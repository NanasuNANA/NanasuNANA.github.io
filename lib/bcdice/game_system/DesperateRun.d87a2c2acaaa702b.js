(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2205],{7408:(ge,ye,he)=>{he(5151),Opal.modules["i18n/backend/fallbacks"]=function(e){var L,i,r,s,a,d,G=e.module,B=e.class_variable_set,c=e.truthy,P=e.class_variable_get,x=e.def,z=e.send,F=e.send2,q=e.find_super,S=e.hash2,I=e.find_block_super,T=e.neqeq,H=e.thrower,Y=e.return_val,M=[],N=e.nil,R=e.$$$;return L=M,d=[a=G(M[0],"I18n")].concat(L),B(d[0],"@@fallbacks",N),i=e.get_singleton_class(a),r=[i].concat(d),s=e.$r(r),x(i,"$fallbacks",function(){var w=N;return B(r[1],"@@fallbacks",c(null!=r[1].$$cvars["@@fallbacks"]?"class variable":N)&&c(w=P(r[1],"@@fallbacks",!1))?w:R(R(s("I18n"),"Locale"),"Fallbacks").$new()),c(w=s("Thread").$current()["$[]"]("i18n_fallbacks"))?w:P(r[1],"@@fallbacks",!1)}),x(i,"$fallbacks=",function(C){var w;return B(r[1],"@@fallbacks",c(C["$is_a?"](s("Array")))?R(R(s("I18n"),"Locale"),"Fallbacks").$new(C):C),w=["i18n_fallbacks",P(r[1],"@@fallbacks",!1)],z(s("Thread").$current(),"[]=",w),w[w.length-1]}),function(i,D){var C,w,y,f,s=[G(i,"Backend")].concat(D);return C=s,y=[w=G(s[0],"Fallbacks")].concat(C),f=e.$r(y),x(w,"$translate",function p(m,h,u){try{var v=H("return"),_=p.$$p||N,A=this,U=N,o=N;return p.$$p=null,null==u&&(u=f("EMPTY_HASH")),c(u.$fetch("fallback",!0))?c(u["$[]"]("fallback_in_progress"))?F(A,q(A,"translate",p,!1,!0),"translate",[m,h,u],_):(c(u["$[]"]("default"))&&(U=A["$extract_non_symbol_default!"](u)),o=u.$merge(S(["fallback_in_progress"],{fallback_in_progress:!0})),z(f("I18n").$fallbacks()["$[]"](m),"each",[],function t(k){var n=null==t.$$s?this:t.$$s;null==k&&(k=N);try{return z(n,"catch",["exception"],function l(){var $=null==l.$$s?this:l.$$s,j=N;if(j=F($,I($,"translate",l.$$def||t.$$def||p,!1,!1),"translate",[k,h,o],null),c(j["$nil?"]()))return N;T(m.$to_s(),k.$to_s())&&$.$on_fallback(m,k,h,u),v.$throw(j)},{$$s:n,$$ret:v})}catch(l){if(!e.rescue(l,[R(f("I18n"),"InvalidLocale")]))throw l;try{return N}finally{e.pop_exception()}}},{$$s:A}),c(u["$key?"]("default"))&&c(u["$[]"]("default")["$nil?"]())?N:c(U)?F(A,q(A,"translate",p,!1,!0),"translate",[m,N,u.$merge(S(["default"],{default:U}))],null):A.$throw("exception",R(f("I18n"),"MissingTranslation").$new(m,h,u))):F(A,q(A,"translate",p,!1,!0),"translate",[m,h,u],_)}catch(t){if(t===v)return t.$v;throw t}},-3),x(w,"$extract_non_symbol_default!",function(m){var u,h=N;return h=[m["$[]"]("default")].$flatten(),u=z(h,"detect",[],function(_){return null==_&&(_=N),_["$is_a?"](f("Symbol"))["$!"]()}),c(u)&&m["$[]="]("default",h["$[]"](0,h.$index(u))),u}),x(w,"$exists?",function p(m,h,u){try{var v=H("return"),_=p.$$p||N,A=this;return p.$$p=null,null==u&&(u=f("EMPTY_HASH")),c(u.$fetch("fallback",!0))?(z(f("I18n").$fallbacks()["$[]"](m),"each",[],function U(o){var t=null==U.$$s?this:U.$$s;null==o&&(o=N);try{if(!c(F(t,I(t,"exists?",U.$$def||p,!1,!1),"exists?",[o,h],null)))return N;v.$throw(!0)}catch(k){if(!e.rescue(k,[R(f("I18n"),"InvalidLocale")]))throw k;try{return N}finally{e.pop_exception()}}},{$$s:A,$$ret:v}),!1):F(A,q(A,"exists?",p,!1,!0),"exists?",[m,h,u],_)}catch(U){if(U===v)return U.$v;throw U}},-3),w.$private(),x(w,"$on_fallback",Y(N))}(d[0],d)},Opal.modules["bcdice/randomizer"]=function(e){var a,b,C,w,y,f,i,D,B=e.klass,c=e.const_set,P=e.def,x=e.truthy,z=e.rb_gt,F=e.rb_plus,q=e.rb_le,S=e.send,I=e.rb_minus,T=e.eqeq,H=e.rb_times,Y=e.eqeqeq,M=e.rb_ge,N=[],R=e.nil,W=e.$$$;return a=N,i=[(0,e.module)(N[0],"BCDice")].concat(a),D=e.$r(i),b=i,w=[C=B(i[0],null,"Randomizer")].concat(b),y=e.$r(w),(f=C.$$prototype).rand_results=f.detailed_rand_results=R,c(w[0],"UPPER_LIMIT_DICE_TIMES",200),c(w[0],"UPPER_LIMIT_DICE_SIDES",1e4),c(w[0],"UPPER_LIMIT_RANDS",1e4),P(C,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),C.$attr_reader("rand_results"),C.$attr_reader("detailed_rand_results"),c(w[0],"DetailedRandResult",y("Struct").$new("kind","sides","value")),P(C,"$roll_barabara",function(m,h){var u=this;return x(z(F(u.rand_results.$size(),m),y("UPPER_LIMIT_RANDS")))&&u.$raise(y("TooManyRandsError")),x(q(m,0))||x(z(m,y("UPPER_LIMIT_DICE_TIMES")))?[]:S(y("Array"),"new",[m],function v(){return(null==v.$$s?this:v.$$s).$roll_once(h)},{$$s:u})}),P(C,"$roll_sum",function(m,h){return this.$roll_barabara(m,h).$sum()}),P(C,"$roll_once",function(m){var u=R;return x(q(m,0))||x(z(m,y("UPPER_LIMIT_DICE_SIDES")))?0:(u=this.$rand_inner(m),this.$push_to_detail("normal",m,u),u)}),P(C,"$roll_index",function(m){return I(this.$roll_once(m),1)}),P(C,"$roll_tens_d10",function(){var u,h=R;return h=this.$rand_inner(10),T(h,10)&&(h=0),u=H(h,10),this.$push_to_detail("tens_d10",10,u),u}),P(C,"$roll_d9",function(){var h;return h=I(this.$rand_inner(10),1),this.$push_to_detail("d9",10,h),h}),P(C,"$roll_d66",function(m){var v,u=R;return u=S(y("Array"),"new",[2],function _(){return(null==_.$$s?this:_.$$s).$roll_once(6)},{$$s:this}),Y(W(y("D66SortType"),"ASC"),v=m)?u["$sort!"]():Y(W(y("D66SortType"),"DESC"),v)&&u["$sort!"]()["$reverse!"](),F(H(u["$[]"](0),10),u["$[]"](1))}),C.$private(),P(C,"$rand_inner",function(m){var u,h=this;return x(M(h.rand_results.$size(),y("UPPER_LIMIT_RANDS")))&&h.$raise(y("TooManyRandsError")),u=h.$random(m),h.rand_results["$<<"]([u,m]),u}),P(C,"$random",function(m){return F(y("Kernel").$rand(m),1)}),P(C,"$push_to_detail",function(m,h,u){var _;return _=y("DetailedRandResult").$new(m,h,u),this.detailed_rand_results.$push(_)}),B(i[0],D("StandardError"),"TooManyRandsError"),R},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var S,Y,L,a,d,i,D,N,T,G=e.module,B=e.klass,c=e.def,P=e.truthy,x=e.return_val,z=[],F=e.nil;return S=z,Y=T=[G(z[0],"BCDice")].concat(S),L=N=[G(T[0],"DiceTable")].concat(Y),d=[a=B(N[0],null,"RollResult")].concat(L),i=e.$r(d),(D=a.$$prototype).table_name=D.value=D.body=F,c(a,"$initialize",function(s,b,C){var w=this;return w.table_name=s,w.value=b,w.body=C}),a.$attr_reader("table_name"),a.$attr_reader("value"),a.$attr_reader("body"),c(a,"$to_s",function(){var s=this;return s.table_name+"("+s.value+") \uff1e "+s.body}),c(a,"$last_body",function(){var s=this;return P(s.body["$is_a?"](i("RollResult")))?s.body.$last_body():s.body}),c(a,"$empty?",x(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var S,Y,L,a,d,i,D,N,T,G=e.module,B=e.klass,c=e.truthy,P=e.def,x=e.rb_minus,z=[],F=e.nil;return S=z,Y=T=[G(z[0],"BCDice")].concat(S),L=N=[G(T[0],"DiceTable")].concat(Y),d=[a=B(N[0],null,"ChainTable")].concat(L),i=e.$r(d),(D=a.$$prototype).times=D.sides=D.items=D.name=F,P(a,"$initialize",function(s,b,C){var w=this,y=F;return w.name=s,w.items=C.$freeze(),y=/(\d+)D(\d+)/i.$match(b),c(y)||w.$raise(i("ArgumentError"),"Unexpected table type: "+b),w.times=y["$[]"](1).$to_i(),w.sides=y["$[]"](2).$to_i()}),P(a,"$roll",function(s){var C,w,b=this,y=F;return C=s.$roll_sum(b.times,b.sides),w=x(C,b.times),y=b.items["$[]"](w),c(y["$respond_to?"]("roll"))&&(y=y.$roll(s)),i("RollResult").$new(b.name,C,y)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var H,R,i,D,r,s,b,L,M,G=e.module,B=e.klass,c=e.hash2,P=e.defs,x=e.def,z=e.rb_plus,F=e.rb_times,q=e.rb_minus,S=[],I=e.nil;return H=S,R=M=[G(S[0],"BCDice")].concat(H),i=L=[G(M[0],"DiceTable")].concat(R),r=[D=B(L[0],null,"D66GridTable")].concat(i),s=e.$r(r),(b=D.$$prototype).name=b.items=I,P(D,"$from_i18n",function(w,y){var p=I;return p=s("I18n").$t(w,c(["locale","raise"],{locale:y,raise:!0})),this.$new(p["$[]"]("name"),p["$[]"]("items"))}),x(D,"$initialize",function(w,y){return this.name=w,this.items=y.$freeze()}),x(D,"$roll",function(w){var f,p,m,h,u;return f=w.$roll_once(6),p=w.$roll_once(6),m=z(F(f,10),p),h=q(f,1),u=q(p,1),s("RollResult").$new(this.name,m,this.items["$[]"](h)["$[]"](u))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var I,M,d,i,D,r,R,W,H,G=e.module,B=e.klass,c=e.hash2,P=e.defs,x=e.def,F=[],q=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),I=F,M=H=[G(F[0],"BCDice")].concat(I),R=[G(H[0],"DiceTable")].concat(M),W=e.$r(R),d=R,D=[i=B(R[0],W("D66GridTable"),"D66HalfGridTable")].concat(d),r=e.$r(D),P(i,"$from_i18n",function(b,C){var y=q;return y=r("I18n").$t(b,c(["locale","raise"],{locale:C,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2_3"),y["$[]"]("items_4_5_6"))}),x(i,"$initialize",function(b,C,w){return this.name=b,this.items=[C,C,C,w,w,w].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var I,M,d,i,D,r,R,W,H,G=e.module,B=e.klass,c=e.hash2,P=e.defs,x=e.def,F=[],q=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),I=F,M=H=[G(F[0],"BCDice")].concat(I),R=[G(H[0],"DiceTable")].concat(M),W=e.$r(R),d=R,D=[i=B(R[0],W("D66GridTable"),"D66OneThirdTable")].concat(d),r=e.$r(D),P(i,"$from_i18n",function(b,C){var y=q;return y=r("I18n").$t(b,c(["locale","raise"],{locale:C,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2"),y["$[]"]("items_3_4"),y["$[]"]("items_5_6"))}),x(i,"$initialize",function(b,C,w,y){return this.name=b,this.items=[C,C,w,w,y,y].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var M,L,r,s,b,C,w,d,R,G=e.module,B=e.klass,c=e.hash2,P=e.defs,x=e.def,z=e.eqeqeq,F=e.rb_plus,q=e.rb_times,S=e.truthy,I=[],T=e.nil,H=e.$$$;return M=I,L=R=[G(I[0],"BCDice")].concat(M),r=d=[G(R[0],"DiceTable")].concat(L),b=[s=B(d[0],null,"D66Table")].concat(r),C=e.$r(b),(w=s.$$prototype).sort_type=w.items=w.name=T,P(s,"$from_i18n",function(f,p){var u,h=T;return h=C("I18n").$t(f,c(["locale"],{locale:p})),u=C("D66SortType").$const_get(h["$[]"]("d66_sort_type")),this.$new(h["$[]"]("name"),u,h["$[]"]("items"))}),x(s,"$initialize",function(f,p,m){var h=this;return h.name=f,h.sort_type=p,h.items=m.$freeze()}),x(s,"$roll",function(f){var p=this,m=T,h=T,u=T,v=T;return m=f.$roll_barabara(2,6),z(H(C("D66SortType"),"ASC"),h=p.sort_type)?m["$sort!"]():z(H(C("D66SortType"),"DESC"),h)&&m["$sort!"]()["$reverse!"](),u=F(q(m["$[]"](0),10),m["$[]"](1)),v=S(h=p.items["$[]"](u))?h:p.items["$[]"](u.$to_s()),S(v["$respond_to?"]("roll"))&&(v=v.$roll(f)),C("RollResult").$new(p.name,u,v)}),x(s,"$choice",function(f){return C("RollResult").$new(this.name,f,this.items["$[]"](f))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var N,a,i,D,W,G=e.module,B=e.klass,c=e.hash2,P=e.send,x=e.to_ary,z=e.rb_plus,F=e.rb_times,q=e.send2,S=e.find_super,I=e.def,H=[],Y=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),N=H,a=W=[G(H[0],"BCDice")].concat(N),i=[G(W[0],"DiceTable")].concat(a),D=e.$r(i),I(B(i[0],D("D66Table"),"D66LeftRangeTable"),"$initialize",function C(w,y,f){var h;return C.$$p=null,h=c([],{}),P(f,"each",[],function(v){var _,o;return null==v&&(v=Y),_=x(v),o=null==_[1]?Y:_[1],P(null==_[0]?Y:_[0],"each",[],function(k){return null==k&&(k=Y),P(o,"each_with_index",[],function(l,$){var j,Q;return null==l&&(l=Y),null==$&&($=Y),Q=z(F(k,10),z($,1)),P(h,"[]=",j=[Q,l]),j[j.length-1]})})}),q(this,S(this,"initialize",C,!1,!0),"initialize",[w,y,h],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var Y,W,D,r,s,b,C,a,N,G=e.module,B=e.klass,c=e.hash2,P=e.defs,x=e.def,z=e.truthy,F=e.rb_minus,q=e.rb_plus,S=e.rb_times,I=[],T=e.nil;return Y=I,W=N=[G(I[0],"BCDice")].concat(Y),D=a=[G(N[0],"DiceTable")].concat(W),s=[r=B(a[0],null,"D66ParityTable")].concat(D),b=e.$r(s),(C=r.$$prototype).odd=C.even=C.name=T,P(r,"$from_i18n",function(y,f){var m=T;return m=b("I18n").$t(y,c(["locale","raise"],{locale:f,raise:!0})),this.$new(m["$[]"]("name"),m["$[]"]("odd"),m["$[]"]("even"))}),x(r,"$initialize",function(y,f,p){var m=this;return m.name=y,m.odd=f.$freeze(),m.even=p.$freeze()}),x(r,"$roll",function(y){var m,u,v,f=this,p=T;return p=y.$roll_once(6),m=y.$roll_once(6),u=(z(p["$odd?"]())?f.odd:f.even)["$[]"](F(m,1)),v=q(S(p,10),m),b("RollResult").$new(f.name,v,u)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var I,M,a,d,i,D,r,R,H,G=e.module,B=e.klass,c=e.def,P=e.rb_plus,x=e.rb_times,z=e.send,F=[],q=e.nil;return I=F,M=H=[G(F[0],"BCDice")].concat(I),a=R=[G(H[0],"DiceTable")].concat(M),i=[d=B(R[0],null,"D66RangeTable")].concat(a),D=e.$r(i),(r=d.$$prototype).items=r.name=q,c(d,"$initialize",function(b,C){return this.name=b,this.items=C.$freeze()}),c(d,"$roll",function(b){var w,y,f,p=q;return w=b.$roll_once(6),y=b.$roll_once(6),f=P(x(w,10),y),p=z(this.items,"find",[],function(h){return null==h&&(h=q),h["$[]"](0)["$include?"](f)}),D("RollResult").$new(this.name,f,p["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var Y,W,D,r,s,b,C,a,N,G=e.module,B=e.klass,c=e.const_set,P=e.send,x=e.truthy,z=e.def,F=e.eqeqeq,q=e.rb_times,S=e.rb_plus,I=[],T=e.nil;return Y=I,W=N=[G(I[0],"BCDice")].concat(Y),D=a=[G(N[0],"DiceTable")].concat(W),s=[r=B(a[0],null,"RangeTable")].concat(D),b=e.$r(s),(C=r.$$prototype).name=C.items=C.num_of_dice=C.num_of_sides=C.formatter=T,c(s[0],"RollResult",P(b("Struct"),"new",["sum","values","content","formatted"],function w(){return(null==w.$$s?this:w.$$s).$alias_method("to_s","formatted")},{$$s:r})),c(s[0],"Item",b("Struct").$new("range","content")),c(s[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),c(s[0],"DEFAULT_FORMATTER",P(r,"lambda",[],function(y,f){return null==y&&(y=T),null==f&&(f=T),y.$name()+"("+f.$sum()+") \uff1e "+f.$content()})),r.$attr_reader("name"),r.$attr_reader("num_of_dice"),r.$attr_reader("num_of_sides"),z(r,"$initialize",function w(y,f,p){var u,m=w.$$p||T,h=this,v=T;return w.$$p=null,h.name=y.$freeze(),h.formatter=x(u=m)?u:b("DEFAULT_FORMATTER"),v=b("DICE_ROLL_METHOD_RE").$match(f),x(v)||h.$raise(b("ArgumentError"),h.name+": invalid dice roll method: "+f),h.num_of_dice=v["$[]"](1).$to_i(),h.num_of_sides=v["$[]"](2).$to_i(),h.$store(p)}),z(r,"$fetch",function(y){var p,f=this;return p=P(f.items,"find",[],function(h){return null==h&&(h=T),h.$range()["$include?"](y)}),x(p)||f.$raise(b("RangeError"),f.name+": value is out of range: "+y),p}),z(r,"$roll",function(y){var m,f=this,p=T,h=T;return m=(p=y.$roll_barabara(f.num_of_dice,f.num_of_sides)).$sum(),(h=b("RollResult").$new(m,p,f.$fetch(m).$content()))["$formatted="](f.formatter["$[]"](f,h)),h}),r.$private(),z(r,"$store",function(y){var p,m,f=this;return p=P(y,"map",[],function h(u,v){return null==u&&(u=T),null==v&&(v=T),[(null==h.$$s?this:h.$$s).$coerce_to_int_range(u),v]},{$$s:f}),m=P(p,"sort_by",[],function(u,v){return null==u&&(u=T),null==v&&(v=T),u.$min()}),f.$assert_min_sum_is_covered(m),f.$assert_max_sum_is_covered(m),f.$assert_no_gap_or_overlap_in_ranges(m),f.items=P(m,"map",[],function(u,v){return null==u&&(u=T),null==v&&(v=T),b("Item").$new(u,v.$freeze()).$freeze()}).$freeze(),f}),z(r,"$coerce_to_int_range",function(y){var p;return F(b("Integer"),p=y)?b("Range").$new(y,y):F(b("Range"),p)&&x(y.$begin()["$is_a?"](b("Integer")))&&x(y.$end()["$is_a?"](b("Integer")))?y:this.$raise(b("TypeError"),this.name+": "+y+" ("+y.$class()+") must be an Integer or a Range with Integers ")}),z(r,"$assert_min_sum_is_covered",function(y){var p,f=this,m=T;return p=f.num_of_dice,m=y.$first()["$[]"](0),x(m["$include?"](p))||f.$raise(b("RangeError"),f.name+": min value ("+p+") is not covered: "+m),f}),z(r,"$assert_max_sum_is_covered",function(y){var p,f=this,m=T;return p=q(f.num_of_dice,f.num_of_sides),m=y.$last()["$[]"](0),x(m["$include?"](p))||f.$raise(b("RangeError"),f.name+": max value ("+p+") is not covered: "+m),f}),z(r,"$assert_no_gap_or_overlap_in_ranges",function(y){return P(y,"each_cons",[2],function p(m,h){var A,U,u=null==p.$$s?this:p.$$s,v=T,_=T;return null==u.name&&(u.name=T),null==m&&(m=T),null==h&&(h=T),v=m["$[]"](0),_=h["$[]"](0),A=v.$max(),U=S(A,1),x(_["$include?"](A))&&u.$raise(b("RangeError"),u.name+": Range overlap: "+v+" and "+_),x(_["$include?"](U))?T:u.$raise(b("RangeError"),u.name+": Range gap: "+v+" and "+_)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var T,N,d,b,C,w,y,D,W,Y,G=e.module,B=e.klass,c=e.send,P=e.def,x=e.rb_minus,z=e.return_ivar,F=[],q=e.nil,S=e.$$$;return T=F,N=Y=[G(F[0],"BCDice")].concat(T),d=W=[G(Y[0],"DiceTable")].concat(N),b=D=[B(W[0],null,"SaiFicSkillTable")].concat(d),w=[C=B(D[0],null,"Category")].concat(b),y=e.$r(w),P(C,"$initialize",function(p,m,h,u){var v=this;return v.name=p,v.skills=c(m.$map(),"with_index",[2],function(A,U){return null==A&&(A=q),null==U&&(U=q),S(y("SaiFicSkillTable"),"Skill").$new(p,A,h,U,u)}),v.dice=h}),P(C,"$roll",function(p){return this.$skills()["$[]"](x(p.$roll_sum(2,6),2))}),P(C,"$to_s",z("name")),C.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var q,H,W,D,r,a,M,I,G=e.module,B=e.klass,c=e.def,P=e.hash2,x=[],z=e.nil;return q=x,H=I=[G(x[0],"BCDice")].concat(q),W=M=[G(I[0],"DiceTable")].concat(H),a=[B(M[0],null,"SaiFicSkillTable")].concat(W),(r=(D=B(a[0],null,"Skill")).$$prototype).s_format=r.category_dice=r.row_dice=r.category_name=r.name=z,c(D,"$initialize",function(b,C,w,y,f){var p=this;return p.category_name=b,p.name=C,p.category_dice=w,p.row_dice=y,p.s_format=f}),c(D,"$to_s",function(){var b=this;return b.$format(b.s_format,P(["category_dice","row_dice","category_name","skill_name"],{category_dice:b.category_dice,row_dice:b.row_dice,category_name:b.category_name,skill_name:b.name}))}),D.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var a,r,y,f,p,m,h,b,i,G=e.module,B=e.klass,c=e.ensure_kwargs,P=e.hash2,x=e.send,F=e.defs,q=e.const_set,S=e.to_ary,I=e.def,T=e.truthy,H=e.rb_minus,Y=e.rb_plus,M=e.top,N=[],R=e.nil,W=e.$$$;return M.$require("bcdice/dice_table/sai_fic_skill_table/category"),M.$require("bcdice/dice_table/sai_fic_skill_table/skill"),a=N,r=i=[G(N[0],"BCDice")].concat(a),y=b=[G(i[0],"DiceTable")].concat(r),p=[f=B(b[0],null,"SaiFicSkillTable")].concat(y),m=e.$r(p),(h=f.$$prototype).rtt=h.rtt_format=h.rct=h.rct_format=h.rttn=h.rttn_format=h.categories=R,F(f,"$from_i18n",function(v,_,A){var U,o,t,$,l=R;return null==(U=(A=c(A)).$$smap.rtt)&&(U=R),null==(o=A.$$smap.rct)&&(o=R),null==(t=A.$$smap.rttn)&&(t=R),$=(l=m("I18n").$t("RTT",P(["locale","raise","default"],{locale:_,raise:!1,default:P([],{})})).$merge(m("I18n").$t(v,P(["locale","raise"],{locale:_,raise:!0}))))["$[]"]("items"),l=x(l,"select",[],function(Q,V){return null==Q&&(Q=R),null==V&&(V=R),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](Q)}),this.$new($,e.to_hash(l).$merge(P(["rtt","rct","rttn"],{rtt:U,rct:o,rttn:t})))},-3),q(p[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),q(p[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),q(p[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),q(p[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),I(f,"$initialize",function(v,_){var A,U,o,t,k,n,l,$=this;return null==(A=(_=c(_)).$$smap.rtt)&&(A=R),null==(U=_.$$smap.rct)&&(U=R),null==(o=_.$$smap.rttn)&&(o=R),null==(t=_.$$smap.rtt_format)&&(t=m("DEFAULT_RTT")),null==(k=_.$$smap.rct_format)&&(k=m("DEFAULT_RCT")),null==(n=_.$$smap.rttn_format)&&(n=m("DEFAULT_RTTN")),null==(l=_.$$smap.s_format)&&(l=m("DEFAULT_S")),$.categories=x(v.$map(),"with_index",[1],function(Q,V){var ne,ue,ie;return null==Q&&(Q=R),null==V&&(V=R),ue=null==(ne=S(Q))[0]?R:ne[0],ie=null==ne[1]?R:ne[1],W(m("SaiFicSkillTable"),"Category").$new(ue,ie,V,l)},{$$has_top_level_mlhs_arg:!0}),$.rtt=A,$.rct=U,$.rttn=o.$to_a(),$.rtt_format=t,$.rct_format=k,$.rttn_format=n},-2),q(p[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),f.$attr_reader("categories"),I(f,"$roll_command",function(v,_){var U,A=this,o=R,t=R;return T(["RTT",A.rtt]["$include?"](U=_))?A.$format_skill(A.rtt_format,A.$roll_skill(v)):T(["RCT",A.rct]["$include?"](U))?(o=A.$roll_category(v),A.$format(A.rct_format,P(["category_dice","category_name"],{category_dice:o.$dice(),category_name:o.$name()}))):T(t=m("RTTN").$index(U))||T(t=A.rttn.$index(U))?A.$format_skill(A.rttn_format,A.categories["$[]"](t).$roll(v)):R}),I(f,"$roll_category",function(v){return this.categories["$[]"](H(v.$roll_once(6),1))}),I(f,"$roll_skill",function(v){return this.$roll_category(v).$roll(v)}),I(f,"$prefixes",function(){var v=this;return Y(["RTT[1-6]?","RCT",v.rtt,v.rct],v.rttn).$compact()}),f.$private(),I(f,"$format_skill",function(v,_){return this.$format(v,P(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:_.$category_dice(),row_dice:_.$row_dice(),category_name:_.$category_name(),skill_name:_.$name(),text:_.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var T,N,d,i,D,r,s,W,Y,G=e.module,B=e.klass,c=e.hash2,P=e.defs,x=e.truthy,z=e.def,F=e.rb_minus,q=[],S=e.nil;return T=q,N=Y=[G(q[0],"BCDice")].concat(T),d=W=[G(Y[0],"DiceTable")].concat(N),D=[i=B(W[0],null,"Table")].concat(d),r=e.$r(D),(s=i.$$prototype).times=s.sides=s.name=s.items=S,P(i,"$from_i18n",function(C,w){var f=S;return f=r("I18n").$t(C,c(["locale"],{locale:w})),this.$new(f["$[]"]("name"),f["$[]"]("type"),f["$[]"]("items"))}),z(i,"$initialize",function(C,w,y){var f=this,p=S;return f.name=C,f.items=y.$freeze(),p=/(\d+)D(\d+)/i.$match(w),x(p)||f.$raise(r("ArgumentError"),"Unexpected table type: "+w),f.times=p["$[]"](1).$to_i(),f.sides=p["$[]"](2).$to_i()}),z(i,"$roll",function(C){var y,w=this;return y=C.$roll_sum(w.times,w.sides),w.$choice(y)}),z(i,"$choice",function(C){var y,w=this;return y=F(C,w.times),r("RollResult").$new(w.name,C,w.items["$[]"](y))})},Opal.modules["bcdice/dice_table"]=function(e){var G=e.top;return G.$require("bcdice/dice_table/roll_result"),G.$require("bcdice/dice_table/chain_table"),G.$require("bcdice/dice_table/d66_grid_table"),G.$require("bcdice/dice_table/d66_half_grid_table"),G.$require("bcdice/dice_table/d66_one_third_table"),G.$require("bcdice/dice_table/d66_left_range_table"),G.$require("bcdice/dice_table/d66_parity_table"),G.$require("bcdice/dice_table/d66_range_table"),G.$require("bcdice/dice_table/d66_table"),G.$require("bcdice/dice_table/range_table"),G.$require("bcdice/dice_table/sai_fic_skill_table"),G.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var z,I,H,q,G=e.module,B=e.const_set,c=[];return z=c,I=q=[G(c[0],"BCDice")].concat(z),H=[G(q[0],"D66SortType")].concat(I),B(H[0],"NO_SORT","no_sort"),B(H[0],"ASC","asc"),B(H[0],"DESC","desc"),function(S,I){var H=[G(S,"RoundType")].concat(I);return B(H[0],"CEIL","ceil"),B(H[0],"FLOOR","floor"),B(H[0],"ROUND","round")}(q[0],q)},Opal.modules["bcdice/translate"]=function(e){var I,M,N,R,W,H,G=e.module,B=e.ensure_kwargs,c=e.kwrestargs,x=e.hash2,z=e.def,F=[],q=e.nil;return I=F,M=H=[G(F[0],"BCDice")].concat(I),R=[N=G(H[0],"Translate")].concat(M),W=e.$r(R),z(N,"$translate",function(a,d){var i,D=this;return null==D.locale&&(D.locale=q),d=B(d),i=c(d,{}),W("I18n").$translate(a,x(["locale","raise"],{locale:D.locale,raise:!0}).$merge(e.to_hash(i)))},-2)},Opal.modules["bcdice/result"]=function(e){var N,L,R,I,H,B=e.klass,c=e.send,P=e.def,x=e.return_val,z=e.return_ivar,F=[],q=e.nil;return I=F,N=H=[(0,e.module)(F[0],"BCDice")].concat(I),[R=B(H[0],null,"Result")].concat(N),P(L=e.get_singleton_class(R),"$success",function(i){return c(this.$new(),"tap",[],function(s){var b;return null==s&&(s=q),s["$text="](i),c(s,"success=",b=[!0]),b[b.length-1]})}),P(L,"$failure",function(i){return c(this.$new(),"tap",[],function(s){var b;return null==s&&(s=q),s["$text="](i),c(s,"failure=",b=[!0]),b[b.length-1]})}),P(L,"$critical",function(i){return c(this.$new(),"tap",[],function(s){var b;return null==s&&(s=q),s["$text="](i),s["$critical="](!0),c(s,"success=",b=[!0]),b[b.length-1]})}),P(L,"$fumble",function(i){return c(this.$new(),"tap",[],function(s){var b;return null==s&&(s=q),s["$text="](i),s["$fumble="](!0),c(s,"failure=",b=[!0]),b[b.length-1]})}),P(L,"$nothing",x("nothing")),P(R,"$initialize",function(a){var d=this;return null==a&&(a=q),d.text=a,d.rands=q,d.detailed_rands=q,d.secret=!1,d.success=!1,d.failure=!1,d.critical=!1,d.fumble=!1},-1),R.$attr_accessor("text","rands","detailed_rands"),R.$attr_writer("secret","success","failure","critical","fumble"),P(R,"$secret?",z("secret")),P(R,"$success?",z("success")),P(R,"$failure?",z("failure")),P(R,"$critical?",z("critical")),P(R,"$fumble?",z("fumble")),P(R,"$condition=",function(a){return this.success=a,this.failure=a["$!"]()})},Opal.modules["racc/parser"]=function(e){var C,y,f,G=e.module,B=e.klass,c=e.truthy,P=e.const_set,x=e.defs,z=e.gvars,F=e.rb_lt,q=e.def,S=e.to_ary,I=e.send,T=e.neqeq,H=e.rb_plus,Y=e.eqeq,M=e.rb_ge,N=e.rb_gt,R=e.rb_minus,W=e.rb_le,L=e.rb_times,a=e.assign_ivar_val,i=[],D=e.$r(i),r=e.nil,s=e.$$$;return C=i,y=[G(i[0],"Racc")].concat(C),f=e.$r(y),B(y[0],f("StandardError"),"ParseError"),c(s("::","ParseError","skip_raise")?"constant":r)||P(i[0],"ParseError",s(D("Racc"),"ParseError")),function(b,C){var u,v,_,A,U,f=[G(b,"Racc")].concat(C),p=e.$r(f);return c(p("Racc_No_Extensions","skip_raise")?"constant":r)||P(f[0],"Racc_No_Extensions",!1),u=f,_=[v=B(f[0],null,"Parser")].concat(u),A=e.$r(_),(U=v.$$prototype).yydebug=U.racc_debug_out=U.racc_error_status=U.racc_t=U.racc_vstack=U.racc_val=U.racc_state=U.racc_tstack=r,P(_[0],"Racc_Runtime_Version","1.4.6"),P(_[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),P(_[0],"Racc_Runtime_Core_Version_R","1.4.6"),P(_[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),P(_[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),P(_[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),P(_[0],"Racc_Runtime_Core_Version",A("Racc_Runtime_Core_Version_R")),P(_[0],"Racc_Runtime_Core_Revision",A("Racc_Runtime_Core_Revision_R")),P(_[0],"Racc_Runtime_Type","ruby"),x(A("Parser"),"$racc_runtime_type",function(){return A("Racc_Runtime_Type")}),q(v,"$_racc_setup",function(){var t,k,n=this,l=r,$=r;return null==z.stderr&&(z.stderr=r),c(s(n.$class(),"Racc_debug_parser"))||(n.yydebug=!1),c(null!=(t=n.yydebug)&&t!==r?"instance-variable":r)||(n.yydebug=!1),c(n.yydebug)&&(c(null!=(k=n.racc_debug_out)&&k!==r?"instance-variable":r)||(n.racc_debug_out=z.stderr),n.racc_debug_out=c(l=n.racc_debug_out)?l:z.stderr),$=s(n.$class(),"Racc_arg"),c(F($.$size(),14))&&$["$[]="](13,!0),$}),q(v,"$_racc_init_sysvars",function(){var t=this;return t.racc_state=[0],t.racc_tstack=[],t.racc_vstack=[],t.racc_t=r,t.racc_val=r,t.racc_read_next=!0,t.racc_user_yyerror=!1,t.racc_error_status=0}),q(v,"$do_parse",function(){return this.$__send__(A("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),q(v,"$next_token",function(){return this.$raise(A("NotImplementedError"),this.$class()+"#next_token is not defined")}),q(v,"$_racc_do_parse_rb",function(t,k){var n,$=this,j=r,Q=r,V=r,ne=r,ue=r,ie=r,ce=r,ae=r;return n=S(t),j=null==n[0]?r:n[0],Q=null==n[1]?r:n[1],V=null==n[2]?r:n[2],ne=null==n[3]?r:n[3],ue=null==n[10]?r:n[10],$.$_racc_init_sysvars(),ie=ce=ae=r,I($,"catch",["racc_end_parse"],function re(){var se,K,g=null==re.$$s?this:re.$$s,Z=r;for(null==g.racc_state&&(g.racc_state=r),null==g.racc_read_next&&(g.racc_read_next=r),null==g.racc_t&&(g.racc_t=r),null==g.yydebug&&(g.yydebug=r),null==g.racc_val&&(g.racc_val=r);c(!0);)for(c(ae=ne["$[]"](g.racc_state["$[]"](-1)))?(c(g.racc_read_next)&&T(g.racc_t,0)&&(K=g.$next_token(),se=S(K),ie=null==se[0]?r:se[0],g.racc_val=null==se[1]?r:se[1],g.racc_t=c(ie)?c(Z=ue["$[]"](ie))?Z:1:0,c(g.yydebug)&&g.$racc_read_token(g.racc_t,ie,g.racc_val),g.racc_read_next=!1),ae=H(ae,g.racc_t),c(M(ae,0))&&c(ce=j["$[]"](ae))&&Y(Q["$[]"](ae),g.racc_state["$[]"](-1))||(ce=V["$[]"](g.racc_state["$[]"](-1)))):ce=V["$[]"](g.racc_state["$[]"](-1));c(ce=g.$_racc_evalact(ce,t)););},{$$s:$})}),q(v,"$yyparse",function(t,k){return this.$__send__(A("Racc_YY_Parse_Method"),t,k,this.$_racc_setup(),!0)}),q(v,"$_racc_yyparse_rb",function(t,k,n,l){var $,Q=this,V=r,ne=r,$e=r,ue=r,ce=r,ae=r,re=r;return $=S(n),V=null==$[0]?r:$[0],ne=null==$[1]?r:$[1],$e=null==$[2]?r:$[2],ue=null==$[3]?r:$[3],ce=null==$[10]?r:$[10],Q.$_racc_init_sysvars(),ae=r,re=r,I(Q,"catch",["racc_end_parse"],function se(){var K=null==se.$$s?this:se.$$s;for(null==K.racc_state&&(K.racc_state=r);!c(re=ue["$[]"](K.racc_state["$[]"](-1)));)for(;c(ae=K.$_racc_evalact($e["$[]"](K.racc_state["$[]"](-1)),n)););return I(t,"__send__",[k],function g(Z,X){var E=null==g.$$s?this:g.$$s,O=r,te=r;for(null==E.racc_t&&(E.racc_t=r),null==E.racc_state&&(E.racc_state=r),null==E.racc_read_next&&(E.racc_read_next=r),null==Z&&(Z=r),null==X&&(X=r),E.racc_t=c(Z)?c(O=ce["$[]"](Z))?O:1:0,E.racc_val=X,E.racc_read_next=!1,re=H(re,E.racc_t),c(M(re,0))&&c(ae=V["$[]"](re))&&Y(ne["$[]"](re),E.racc_state["$[]"](-1))||(ae=$e["$[]"](E.racc_state["$[]"](-1)));c(ae=E.$_racc_evalact(ae,n)););for(;c(c(O=c(te=(re=ue["$[]"](E.racc_state["$[]"](-1)))["$!"]())?te:E.racc_read_next["$!"]())?O:E.racc_t["$=="](0));)for(c(re)&&c(re=H(re,E.racc_t))&&c(M(re,0))&&c(ae=V["$[]"](re))&&Y(ne["$[]"](re),E.racc_state["$[]"](-1))||(ae=$e["$[]"](E.racc_state["$[]"](-1)));c(ae=E.$_racc_evalact(ae,n)););},{$$s:K})},{$$s:Q})}),q(v,"$_racc_evalact",function(t,k){var n,$e,$=this,j=r,Q=r,ne=r,ue=r,ie=r,ce=r;if(j=null==(n=S(k))[0]?r:n[0],Q=null==n[1]?r:n[1],ne=null==n[3]?r:n[3],$e=null==n[11]?r:n[11],ue=null==n[12]?r:n[12],c(N(t,0))&&c(F(t,$e)))c(N($.racc_error_status,0))&&(Y($.racc_t,1)||($.racc_error_status=R($.racc_error_status,1))),$.racc_vstack.$push($.racc_val),$.racc_state.$push(t),$.racc_read_next=!0,c($.yydebug)&&($.racc_tstack.$push($.racc_t),$.$racc_shift($.racc_t,$.racc_tstack,$.racc_vstack));else if(c(F(t,0))&&c(N(t,ue["$-@"]()))){if(ie=I($,"catch",["racc_jump"],function ae(){var re=null==ae.$$s?this:ae.$$s;return null==re.racc_state&&(re.racc_state=r),re.racc_state.$push(re.$_racc_do_reduce(k,t)),!1},{$$s:$}),c(ie))switch(ie.valueOf()){case 1:return $.racc_user_yyerror=!0,ue["$-@"]();case 2:return $e;default:$.$raise("[Racc Bug] unknown jump code")}}else if(Y(t,$e))c($.yydebug)&&$.$racc_accept(),$.$throw("racc_end_parse",$.racc_vstack["$[]"](0));else{if(Y(t,ue["$-@"]())){switch($.racc_error_status.valueOf()){case 0:c(k["$[]"](21))||$.$on_error($.racc_t,$.racc_val,$.racc_vstack);break;case 3:Y($.racc_t,0)&&$.$throw("racc_end_parse",r),$.racc_read_next=!0}for($.racc_user_yyerror=!1,$.racc_error_status=3;c(!0)&&!(c(ce=ne["$[]"]($.racc_state["$[]"](-1)))&&(ce=H(ce,1),c(M(ce,0))&&c(t=j["$[]"](ce))&&Y(Q["$[]"](ce),$.racc_state["$[]"](-1))));)c(W($.racc_state.$size(),1))&&$.$throw("racc_end_parse",r),$.racc_state.$pop(),$.racc_vstack.$pop(),c($.yydebug)&&($.racc_tstack.$pop(),$.$racc_e_pop($.racc_state,$.racc_tstack,$.racc_vstack));return t}$.$raise("[Racc Bug] unknown action "+t.$inspect())}return c($.yydebug)&&$.$racc_next_state($.racc_state["$[]"](-1),$.racc_state),r}),q(v,"$_racc_do_reduce",function(t,k){var n,ue,ce,Z,X,E,ee,$=this,Q=r,V=r,ne=r,$e=r,ie=r,ae=r,re=r,se=r,K=r,g=r,O=r,te=r,J=r;return Q=null==(n=S(t))[4]?r:n[4],V=null==n[5]?r:n[5],ne=null==n[6]?r:n[6],$e=null==n[7]?r:n[7],ue=null==n[8]?r:n[8],ie=null==n[9]?r:n[9],ce=null==n[13]?r:n[13],ae=$.racc_state,re=$.racc_vstack,se=$.racc_tstack,K=L(k,-3),g=ie["$[]"](K),Z=ie["$[]"](H(K,1)),X=ie["$[]"](H(K,2)),E=[],c($.yydebug)&&(O=se["$[]"](g["$-@"](),g)),te=re["$[]"](g["$-@"](),g),c($.yydebug)&&se["$[]="](g["$-@"](),g,E),re["$[]="](g["$-@"](),g,E),ae["$[]="](g["$-@"](),g,E),c(ce)?re.$push($.$__send__(X,te,re,te["$[]"](0))):re.$push($.$__send__(X,te,re)),se.$push(Z),c($.yydebug)&&$.$racc_reduce(O,Z,se,re),ee=R(Z,ue),c(K=$e["$[]"](ee))&&(K=H(K,ae["$[]"](-1)),c(M(K,0))&&c(J=Q["$[]"](K))&&Y(V["$[]"](K),ee))?J:ne["$[]"](ee)}),q(v,"$on_error",function(t,k,n){var $,l=this;return l.$raise(A("ParseError"),l.$sprintf("\nparse error on value %s (%s)",k.$inspect(),c($=l.$token_to_str(t))?$:"?"))}),q(v,"$yyerror",function(){return this.$throw("racc_jump",1)}),q(v,"$yyaccept",function(){return this.$throw("racc_jump",2)}),q(v,"$yyerrok",a("racc_error_status",0)),q(v,"$racc_read_token",function(t,k,n){var l=this;return l.racc_debug_out.$print("read    "),l.racc_debug_out.$print(k.$inspect(),"(",l.$racc_token2str(t),") "),l.racc_debug_out.$puts(n.$inspect()),l.racc_debug_out.$puts()}),q(v,"$racc_shift",function(t,k,n){var l=this;return l.racc_debug_out.$puts("shift   "+l.$racc_token2str(t)),l.$racc_print_stacks(k,n),l.racc_debug_out.$puts()}),q(v,"$racc_reduce",function(t,k,n,l){var $=this,j=r;return(j=$.racc_debug_out).$print("reduce "),c(t["$empty?"]())?j.$print(" <none>"):I(t,"each",[],function Q(V){return null==V&&(V=r),j.$print(" ",(null==Q.$$s?this:Q.$$s).$racc_token2str(V))},{$$s:$}),j.$puts(" --\x3e "+$.$racc_token2str(k)),$.$racc_print_stacks(n,l),$.racc_debug_out.$puts()}),q(v,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),q(v,"$racc_e_pop",function(t,k,n){var l=this;return l.racc_debug_out.$puts("error recovering mode: pop token"),l.$racc_print_states(t),l.$racc_print_stacks(k,n),l.racc_debug_out.$puts()}),q(v,"$racc_next_state",function(t,k){var n=this;return n.racc_debug_out.$puts("goto    "+t),n.$racc_print_states(k),n.racc_debug_out.$puts()}),q(v,"$racc_print_stacks",function(t,k){var l=r;return(l=this.racc_debug_out).$print("        ["),I(t,"each_index",[],function $(j){return null==j&&(j=r),l.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(t["$[]"](j))," ",k["$[]"](j).$inspect(),")")},{$$s:this}),l.$puts(" ]")}),q(v,"$racc_print_states",function(t){var n=r;return(n=this.racc_debug_out).$print("        ["),I(t,"each",[],function($){return null==$&&($=r),n.$print(" ",$)}),n.$puts(" ]")}),q(v,"$racc_token2str",function(t){var n;return c(n=s(this.$class(),"Racc_token_to_s_table")["$[]"](t))?n:this.$raise("[Racc Bug] can't convert token "+t+" to string")}),q(v,"$token_to_str",function(t){return s(this.$class(),"Racc_token_to_s_table")["$[]"](t)})}(i[0],i)},Opal.modules["bcdice/arithmetic/node"]=function(e){var a,r,w,u,v,f,p,b,i,G=e.module,B=e.klass,c=e.def,P=e.thrower,x=e.return_ivar,z=e.send2,F=e.find_super,q=e.eqeq,S=e.const_set,I=e.eqeqeq,T=e.rb_divide,H=e.truthy,Y=e.assign_ivar,M=e.alias,N=[],R=e.nil,W=e.$$$;return a=N,r=i=[G(N[0],"BCDice")].concat(a),w=b=[G(i[0],"Arithmetic")].concat(r),f=[G(b[0],"Node")].concat(w),p=e.$r(f),(v=(u=B(f[0],null,"BinaryOp")).$$prototype).lhs=v.rhs=v.op=R,c(u,"$initialize",function(A,U,o){var t=this;return t.lhs=A,t.op=U,t.rhs=o}),c(u,"$eval",function(A){try{P("eval_return");var k,o=this,t=R;return t=o.lhs.$eval(A),k=o.rhs.$eval(A),t.$send(o.op,k)}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),c(u,"$output",function(){var A=this;return""+A.lhs.$output()+A.op+A.rhs.$output()}),c(u,"$s_exp",function(){var A=this;return"("+A.$op_for_s_exp()+" "+A.lhs.$s_exp()+" "+A.rhs.$s_exp()+")"}),c(u,"$op_for_s_exp",x("op")),function(m,h,u){var v=B(m,h,"DivideBase"),_=[v].concat(u),A=e.$r(_),U=v.$$prototype;U.lhs=U.rhs=U.op=R,c(v,"$initialize",function o(t,k){return o.$$p=null,z(this,F(this,"initialize",o,!1,!0),"initialize",[t,"/",k],null)}),c(v,"$eval",function(t){try{P("eval_return");var l,$,n=this;return l=n.lhs.$eval(t),$=n.rhs.$eval(t),q($,0)&&n.$raise(A("ZeroDivisionError")),n.$divide_and_round(l,$,t)}catch(j){if(j===e.t_eval_return)return j.$v;throw j}}),c(v,"$output",function o(){var t=o.$$p||R,k=this;return o.$$p=null,""+z(k,F(k,"output",o,!1,!0),"output",[],t)+k.$rounding_method()}),v.$private(),c(v,"$rounding_method",function(){return W(this.$class(),"ROUNDING_METHOD")}),c(v,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),c(v,"$divide_and_round",function(t,k,n){return this.$raise(A("NotImplementedError"))})}(f[0],p("BinaryOp"),f),function(m,h,u){var v=B(m,h,"DivideWithGameSystemDefault"),_=[v].concat(u),A=e.$r(_);S(_[0],"ROUNDING_METHOD",""),v.$private(),c(v,"$divide_and_round",function(o,t,k){var n,l=R;return I(W(A("RoundType"),"CEIL"),n=k)?T(o.$to_f(),t).$ceil():I(W(A("RoundType"),"ROUND"),n)?(l=T(o.$to_f(),t),H(l["$negative?"]())?l.$abs().$round()["$-@"]():l.$round()):T(o,t).$floor()})}(f[0],p("DivideBase"),f),function(m,h,u){var v=B(m,h,"DivideWithCeil"),_=[v].concat(u);S(_[0],"ROUNDING_METHOD","C"),v.$private(),c(v,"$divide_and_round",function(U,o,t){return T(U.$to_f(),o).$ceil()})}(f[0],p("DivideBase"),f),function(m,h,u){var v=B(m,h,"DivideWithRound"),_=[v].concat(u);S(_[0],"ROUNDING_METHOD","R"),v.$private(),c(v,"$divide_and_round",function(U,o,t){var k=R;return k=T(U.$to_f(),o),H(k["$negative?"]())?k.$abs().$round()["$-@"]():k.$round()})}(f[0],p("DivideBase"),f),function(m,h,u){var v=B(m,h,"DivideWithFloor"),_=[v].concat(u);S(_[0],"ROUNDING_METHOD","F"),v.$private(),c(v,"$divide_and_round",function(U,o,t){return T(U,o).$floor()})}(f[0],p("DivideBase"),f),function(m,h){var u=B(m,null,"Negative");u.$$prototype.body=R,c(u,"$initialize",Y("body")),c(u,"$eval",function(A){try{return P("eval_return"),this.body.$eval(A)["$-@"]()}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(u,"$output",function(){return"-"+this.body.$output()}),c(u,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(f[0]),function(m,h){var u=B(m,null,"Parenthesis");u.$$prototype.expr=R,c(u,"$initialize",Y("expr")),c(u,"$eval",function(A){try{return P("eval_return"),this.expr.$eval(A)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(u,"$output",function(){return"("+this.expr.$output()+")"}),c(u,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(f[0]),function(m,h){var u=B(m,null,"Number");return u.$$prototype.value=R,c(u,"$initialize",Y("value")),c(u,"$eval",x("value")),c(u,"$output",function(){return this.value.$to_s()}),M(u,"s_exp","output")}(f[0])},Opal.modules.strscan=function(e){var Y,M,N,R,W,B=e.def,c=e.truthy,P=e.eqeqeq,x=e.Opal,z=e.return_ivar,F=e.send,q=e.alias,S=[],I=e.nil;return Y=S,N=[M=(0,e.klass)(S[0],null,"StringScanner")].concat(Y),R=e.$r(N),(W=M.$$prototype).pos=W.string=W.working=W.matched=W.prev_pos=W.match=I,M.$attr_reader("pos","matched"),B(M,"$initialize",function(a){var d=this;return d.string=a,d.pos=0,d.matched=I,d.working=a,d.match=[]}),M.$attr_reader("string"),B(M,"$beginning_of_line?",function(){var a=this;return 0===a.pos||"\n"===a.string.charAt(a.pos-1)}),B(M,"$scan",function(a){var d=this,i=(a=d.$anchor(a)).exec(d.working);return null==i?d.matched=I:(d.prev_pos=d.pos,d.pos+=i[0].length,d.working=d.working.substring(i[0].length),d.matched=i[0],d.match=i,i[0])}),B(M,"$scan_until",function(a){var d=this;a=d.$anchor(a);for(var i=d.working,D=0;i.length!=D;++D){var r=a.exec(i.substr(D));if(null!==r){var s=D+r[0].length,b=i.substr(0,s);return d.matched=r[0],d.match=r,d.prev_pos=d.pos+D,d.pos+=s,d.working=i.substr(s),b}}return d.matched=I}),B(M,"$[]",function(a){var i;if(c(this.match["$empty?"]()))return I;P(R("Symbol"),i=a)?a=a.$to_s():P(R("String"),i)||(a=x["$coerce_to!"](a,R("Integer"),"to_int"));var D=this.match;return a<0&&(a+=D.length),a<0||a>=D.length||null==D[a]?I:D[a]}),B(M,"$check",function(a){var d=this,i=(a=d.$anchor(a)).exec(d.working);return d.matched=null==i?I:i[0]}),B(M,"$check_until",function(a){var d=this,i=d.prev_pos,D=d.pos,r=d.working,s=d.$scan_until(a);return d.prev_pos=i,d.pos=D,d.working=r,s}),B(M,"$peek",function(a){return this.working.substring(0,a)}),B(M,"$eos?",function(){return 0===this.working.length}),B(M,"$exist?",function(a){var i=a.exec(this.working);return null==i?I:0==i.index?0:i.index+1}),B(M,"$skip",function(a){var d=this,i=(a=d.$anchor(a)).exec(d.working);if(null==i)return d.match=[],d.matched=I;var D=i[0],r=D.length;return d.matched=D,d.match=i,d.prev_pos=d.pos,d.pos+=r,d.working=d.working.substring(r),r}),B(M,"$skip_until",function(a){var i=this.$scan_until(a);return i===I?I:(this.matched=i.substr(-1),i.length)}),B(M,"$get_byte",function(){var a=this,d=I;return a.pos<a.string.length?(a.prev_pos=a.pos,a.pos+=1,d=a.matched=a.working.substring(0,1),a.working=a.working.substring(1)):a.matched=I,d}),B(M,"$match?",function(a){var d=this,i=(a=d.$anchor(a)).exec(d.working);return null==i?I:(d.prev_pos=d.pos,i[0].length)}),B(M,"$pos=",function(a){var d=this;return a<0&&(a+=d.string.$length()),d.pos=a,d.working=d.string.slice(a)}),B(M,"$matched_size",function(){return this.matched===I?I:this.matched.length}),B(M,"$post_match",function(){var a=this;return a.matched===I?I:a.string.substr(a.pos)}),B(M,"$pre_match",function(){var a=this;return a.matched===I?I:a.string.substr(0,a.prev_pos)}),B(M,"$reset",function(){var a=this;return a.working=a.string,a.matched=I,a.pos=0}),B(M,"$rest",z("working")),B(M,"$rest?",function(){return 0!==this.working.length}),B(M,"$rest_size",function(){return this.$rest().$size()}),B(M,"$terminate",function(){var a,d=this;return d.match=I,a=[d.string.$length()],F(d,"pos=",a),a[a.length-1]}),B(M,"$unscan",function(){var a=this;return a.pos=a.prev_pos,a.prev_pos=I,a.match=I,a}),q(M,"bol?","beginning_of_line?"),q(M,"getch","get_byte"),M.$private(),B(M,"$anchor",function(a){var d=a.toString().match(/\/([^\/]+)$/);return d=d?d[1]:void 0,new RegExp("^(?:"+a.source+")",d)})},Opal.modules["bcdice/normalize"]=function(e){var q,H,I,G=e.module,B=e.eqeqeq,c=e.def,P=e.eqeq,x=[],z=e.nil;return q=x,I=[G(x[0],"BCDice")].concat(q),(H=G(I[0],"Normalize")).$module_function(),c(H,"$comparison_operator",function(M){var N;return B(/<=|=</,N=M)?"<=":B(/>=|=>/,N)?">=":B(/<>|!=|=!/,N)?"!=":B(/</,N)?"<":B(/>/,N)?">":B(/=/,N)?"==":z}),c(H,"$target_number",function(M){return P(M,"?")?M:M.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var Y,W,D,r,s,b,C,a,N,G=e.module,B=e.klass,c=e.const_set,P=e.hash2,x=e.truthy,z=e.send,F=e.def,q=e.thrower,S=e.top,I=[],T=e.nil;return S.$require("strscan"),S.$require("bcdice/normalize"),Y=I,W=N=[G(I[0],"BCDice")].concat(Y),D=a=[G(N[0],"Command")].concat(W),s=[r=B(a[0],null,"Lexer")].concat(D),b=e.$r(s),(C=r.$$prototype).scanner=C.notations=T,c(s[0],"SYMBOLS",P(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),F(r,"$initialize",function(y,f){var p,m,u;return y=x(u=(p=(m=y)===T||null==m?T:m.$split(" ",2))===T||null==p?T:p.$first())?u:"",this.scanner=b("StringScanner").$new(y),this.notations=z(f,"map",[],function(_){return null==_&&(_=T),x(_["$is_a?"](b("String")))?b("Regexp").$new(_):_})}),F(r,"$next_token",function(){try{var y=q("return"),f=this,p=T,m=T,u=T,v=T;return x(f.scanner["$eos?"]())?[!1,"$"]:(z(f.notations,"each",[],function _(A){var o,U=null==_.$$s?this:_.$$s;if(null==U.scanner&&(U.scanner=T),null==A&&(A=T),o=U.scanner.$scan(A),!x(o))return T;y.$throw(["NOTATION",o])},{$$s:f,$$ret:y}),x(p=f.scanner.$scan(/\d+/))?["NUMBER",p.$to_i()]:x(m=f.scanner.$scan(/[<>!=]+/))?(m=b("Normalize").$comparison_operator(m),[x(m)?"CMP_OP":"ILLEGAL",m]):(u=f.scanner.$getch().$upcase(),[x(v=b("SYMBOLS")["$[]"](u))?v:u.$to_sym(),u]))}catch(_){if(_===y)return _.$v;throw _}}),F(r,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var S,Y,L,a,d,i,D,N,T,G=e.module,B=e.klass,c=e.def,P=e.return_ivar,x=e.truthy,z=[],F=e.nil;return S=z,Y=T=[G(z[0],"BCDice")].concat(S),L=N=[G(T[0],"Command")].concat(Y),d=[a=B(N[0],null,"Parsed")].concat(L),i=e.$r(d),(D=a.$$prototype).critical=D.fumble=D.dollar=D.modify_number=D.question_target=D.target_number=D.prefix_number=D.command=D.suffix_number=D.cmp_op=F,a.$attr_accessor("command"),a.$attr_accessor("prefix_number"),a.$attr_accessor("suffix_number"),a.$attr_accessor("critical"),a.$attr_accessor("fumble"),a.$attr_accessor("dollar"),a.$attr_accessor("modify_number"),a.$attr_accessor("cmp_op"),a.$attr_accessor("target_number"),a.$attr_writer("question_target"),c(a,"$initialize",function(){var s=this;return s.prefix_number=F,s.suffix_number=F,s.critical=F,s.fumble=F,s.dollar=F,s.cmp_op=F,s.target_number=F,s.question_target=!1}),c(a,"$question_target?",P("question_target")),c(a,"$to_s",function(s){var b=this,C=F,w=F,y=F,f=F,p=F;switch(null==s&&(s="after_command"),C=x(b.critical)?"@"+b.critical:F,w=x(b.fumble)?"#"+b.fumble:F,y=x(b.dollar)?"$"+b.dollar:F,f=i("Format").$modifier(b.modify_number),p=x(b.question_target)?"?":b.target_number,s.valueOf()){case"after_command":return[b.prefix_number,b.command,b.suffix_number,C,w,y,f,b.cmp_op,p].$join();case"after_modify_number":return[b.prefix_number,b.command,b.suffix_number,f,C,w,y,b.cmp_op,p].$join();case"after_target_number":return[b.prefix_number,b.command,b.suffix_number,f,b.cmp_op,p,C,w,y].$join();default:return F}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var s,y,v,k,n,l,$,j,Q,V,ne,$e,ce,_,o,t,se,p,m,C,G=e.klass,B=e.module,c=e.slice,P=e.extract_kwargs,x=e.ensure_kwargs,z=e.get_kwarg,F=e.send2,q=e.find_super,S=e.def,I=e.send,T=e.eqeq,H=e.thrower,Y=e.hash,M=e.const_set,N=e.truthy,R=e.to_ary,W=e.hash2,L=e.top,a=[],d=e.$r(a),i=e.nil,D=e.$$$;return L.$require("racc/parser.rb"),L.$require("bcdice/arithmetic/node"),L.$require("bcdice/command/lexer"),L.$require("bcdice/command/parsed"),G(D(d("BCDice"),"Command"),D(d("Racc"),"Parser"),"Parser"),s=a,y=C=[B(a[0],"BCDice")].concat(s),p=[B(C[0],"Command")].concat(y),m=e.$r(p),v=p,o=[_=G(p[0],D(m("Racc"),"Parser"),"Parser")].concat(v),t=e.$r(o),(se=_.$$prototype).notations=se.lexer=se.modifier=se.suffix_number=se.prefix_number=se.need_suffix_number=se.need_prefix_number=se.critical=se.fumble=se.dollar=se.allowed_cmp_op=se.question_target=i,S(_,"$initialize",function K(g,Z){var X,E,O,te,J=this;return K.$$p=null,X=c(arguments),E=P(X),E=x(E),O=X,te=z(E,"round_type"),F(J,q(J,"initialize",K,!1,!0),"initialize",[],null),J.notations=O,J.round_type=te,J.prefix_number=!1,J.suffix_number=!1,J.need_prefix_number=!1,J.need_suffix_number=!1,J.modifier=!0,J.critical=!1,J.fumble=!1,J.dollar=!1,J.allowed_cmp_op=[i,">=",">","<=","<","==","!="],J.question_target=!1},-2),S(_,"$disable_modifier",function(){return this.modifier=!1,this}),S(_,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),S(_,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),S(_,"$has_prefix_number",function(){var g=this;return g.prefix_number=!0,g.need_prefix_number=!0,g}),S(_,"$has_suffix_number",function(){var g=this;return g.suffix_number=!0,g.need_suffix_number=!0,g}),S(_,"$enable_critical",function(){return this.critical=!0,this}),S(_,"$enable_fumble",function(){return this.fumble=!0,this}),S(_,"$enable_dollar",function(){return this.dollar=!0,this}),S(_,"$restrict_cmp_op_to",function(g){var Z;return Z=c(arguments),this.allowed_cmp_op=Z,this},-1),S(_,"$enable_question_target",function(){return this.question_target=!0,this}),S(_,"$parse",function(g){var Z=this;try{return Z.lexer=t("Lexer").$new(g,Z.notations),Z.$do_parse()}catch(X){if(!e.rescue(X,[t("ParseError"),t("ZeroDivisionError")]))throw X;try{return i}finally{e.pop_exception()}}}),_.$private(),S(_,"$parsed",function(g,Z,X,E){try{return H("eval_return"),I(t("Parsed").$new(),"tap",[],function ee(J){var _e,le,de,me,ve,fe,be,oe=null==ee.$$s?this:ee.$$s;return null==oe.round_type&&(oe.round_type=i),null==J&&(J=i),J["$command="](g["$[]"]("command")),J["$prefix_number="]((_e=g["$[]"]("prefix"))===i||null==_e?i:_e.$eval(oe.round_type)),J["$suffix_number="]((le=g["$[]"]("suffix"))===i||null==le?i:le.$eval(oe.round_type)),J["$critical="]((de=Z["$[]"]("critical"))===i||null==de?i:de.$eval(oe.round_type)),J["$fumble="]((me=Z["$[]"]("fumble"))===i||null==me?i:me.$eval(oe.round_type)),J["$dollar="]((ve=Z["$[]"]("dollar"))===i||null==ve?i:ve.$eval(oe.round_type)),J["$modify_number="](X.$eval(oe.round_type)),J["$cmp_op="](E["$[]"]("cmp_op")),T(E["$[]"]("target"),"?")?(J["$question_target="](!0),I(J,"target_number=",fe=[0]),fe[fe.length-1]):(J["$question_target="](!1),fe=[(be=E["$[]"]("target"),be===i||null==be?i:be.$eval(oe.round_type))],I(J,"target_number=",fe),fe[fe.length-1])},{$$s:this})}catch(ee){if(ee===e.t_eval_return)return ee.$v;throw ee}}),S(_,"$next_token",function(){return this.lexer.$next_token()}),k=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),n=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),l=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),$=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),j=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),Q=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),V=[i,6,13,3,9,-1,27,-15,-10,-1,-38],ne=[i,i,i,i,i,i,19,16,15,i,i],$e=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ce=Y(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),M(o[0],"Racc_arg",[k,n,$,l,j,Q,ne,V,19,$e,ce,58,35,!0]),N(t("Ractor","skip_raise")?"constant":i)&&t("Ractor").$make_shareable(t("Racc_arg")),M(o[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),N(t("Ractor","skip_raise")?"constant":i)&&t("Ractor").$make_shareable(t("Racc_token_to_s_table")),M(o[0],"Racc_debug_parser",!1),S(_,"$_reduce_1",function(g,Z,X){var E;return N(this.modifier)||this.$raise(t("ParseError")),E=R(g),this.$parsed(null==E[0]?i:E[0],null==E[1]?i:E[1],null==E[2]?i:E[2],null==E[3]?i:E[3])}),S(_,"$_reduce_2",function(g,Z,X){var E;return N(this.modifier)||this.$raise(t("ParseError")),E=R(g),this.$parsed(null==E[0]?i:E[0],null==E[2]?i:E[2],null==E[1]?i:E[1],null==E[3]?i:E[3])}),S(_,"$_reduce_3",function(g,Z,X){var E,_e;return _e=null==(E=R(g))[2]?i:E[2],this.$parsed(null==E[0]?i:E[0],null==E[1]?i:E[1],D(D(t("Arithmetic"),"Node"),"Number").$new(0),_e)}),S(_,"$_reduce_4",function(g,Z,X){var E=this;return N(E.prefix_number)&&N(E.suffix_number)||E.$raise(t("ParseError")),W(["command","prefix","suffix"],{command:g["$[]"](1),prefix:g["$[]"](0),suffix:g["$[]"](2)})}),S(_,"$_reduce_5",function(g,Z,X){var E=this;return N(E.prefix_number)||E.$raise(t("ParseError")),N(E.need_suffix_number)&&E.$raise(t("ParseError")),W(["command","prefix"],{command:g["$[]"](1),prefix:g["$[]"](0)})}),S(_,"$_reduce_6",function(g,Z,X){var E=this;return N(E.suffix_number)||E.$raise(t("ParseError")),N(E.need_prefix_number)&&E.$raise(t("ParseError")),W(["command","suffix"],{command:g["$[]"](0),suffix:g["$[]"](1)})}),S(_,"$_reduce_7",function(g,Z,X){var E=this;return(N(E.need_prefix_number)||N(E.need_suffix_number))&&E.$raise(t("ParseError")),W(["command"],{command:g["$[]"](0)})}),S(_,"$_reduce_8",function(g,Z,X){return W([],{})}),S(_,"$_reduce_9",function(g,Z,X){var E,_e,ee=i;return ee=null==(E=R(g))[0]?i:E[0],_e=null==E[2]?i:E[2],N(this.critical)&&N(ee["$[]"]("critical")["$nil?"]())||this.$raise(t("ParseError")),ee["$[]="]("critical",_e),ee}),S(_,"$_reduce_10",function(g,Z,X){var E,_e,ee=i;return ee=null==(E=R(g))[0]?i:E[0],_e=null==E[2]?i:E[2],N(this.fumble)&&N(ee["$[]"]("fumble")["$nil?"]())||this.$raise(t("ParseError")),ee["$[]="]("fumble",_e),ee}),S(_,"$_reduce_11",function(g,Z,X){var E,_e,ee=i;return ee=null==(E=R(g))[0]?i:E[0],_e=null==E[2]?i:E[2],N(this.dollar)&&N(ee["$[]"]("dollar")["$nil?"]())||this.$raise(t("ParseError")),ee["$[]="]("dollar",_e),ee}),S(_,"$_reduce_12",function(g,Z,X){return g["$[]"](1)}),S(_,"$_reduce_13",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"Negative").$new(g["$[]"](1))}),S(_,"$_reduce_14",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"+",g["$[]"](2))}),S(_,"$_reduce_15",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"-",g["$[]"](2))}),S(_,"$_reduce_16",function(g,Z,X){return N(this.allowed_cmp_op["$include?"](i))||this.$raise(t("ParseError")),W([],{})}),S(_,"$_reduce_17",function(g,Z,X){var E,ee,J;return J=null==(E=R(g))[1]?i:E[1],N(this.allowed_cmp_op["$include?"](ee=null==E[0]?i:E[0]))||this.$raise(t("ParseError")),W(["cmp_op","target"],{cmp_op:ee,target:J})}),S(_,"$_reduce_18",function(g,Z,X){var O,E=this;return O=g["$[]"](0),N(E.question_target)||E.$raise(t("ParseError")),N(E.allowed_cmp_op["$include?"](O))||E.$raise(t("ParseError")),W(["cmp_op","target"],{cmp_op:O,target:"?"})}),S(_,"$_reduce_19",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"+",g["$[]"](2))}),S(_,"$_reduce_20",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"-",g["$[]"](2))}),S(_,"$_reduce_22",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"*",g["$[]"](2))}),S(_,"$_reduce_23",function(g,Z,X){return g["$[]"](3).$new(g["$[]"](0),g["$[]"](2))}),S(_,"$_reduce_25",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),S(_,"$_reduce_26",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"DivideWithCeil")}),S(_,"$_reduce_27",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"DivideWithCeil")}),S(_,"$_reduce_28",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"DivideWithRound")}),S(_,"$_reduce_29",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"DivideWithFloor")}),S(_,"$_reduce_30",function(g,Z,X){return g["$[]"](1)}),S(_,"$_reduce_31",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"Negative").$new(g["$[]"](1))}),S(_,"$_reduce_33",function(g,Z,X){return g["$[]"](1)}),S(_,"$_reduce_34",function(g,Z,X){return D(D(t("Arithmetic"),"Node"),"Number").$new(g["$[]"](0))}),S(_,"$_reduce_none",function(g,Z,X){return g["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var I,M,L,a,d,i,R,H,G=e.module,B=e.send,c=e.eqeqeq,P=e.truthy,x=e.def,z=e.return_val,F=[],q=e.nil;return I=F,M=H=[G(F[0],"BCDice")].concat(I),L=R=[G(H[0],"Deprecated")].concat(M),d=[a=G(R[0],"Checker")].concat(L),i=e.$r(d),a.$private(),x(a,"$check_result_legacy",function(r,s,b,C){var p,w=this,y=q,f=q,m=q,h=q;return y=B(s,"map",[],"sides".$to_proc()),p=(f=B(s,"map",[],"value".$to_proc())).$sum(),m=c([100],h=y)?w.$check_1D100(r,p,b,C):c([20],h)?w.$check_1D20(r,p,b,C):c([6,6],h)?w.$check_2D6(r,p,f,b,C):q,(P(m["$nil?"]())||P(m["$empty?"]()))&&(m=c([10],h=y.$uniq())?w.$check_nD10(r,p,f,b,C):c([6],h)?w.$check_nD6(r,p,f,b,C):q,P(m["$nil?"]())||P(m["$empty?"]()))?q:i("Result").$new(m.$delete_prefix(" \uff1e "))}),x(a,"$check_1D100",z(q)),x(a,"$check_1D20",z(q)),x(a,"$check_nD10",z(q)),x(a,"$check_2D6",z(q)),x(a,"$check_nD6",z(q))},Opal.modules["bcdice/base"]=function(e){var d,w,h,U,t,k,u,v,_,A,f,G=e.module,B=e.klass,c=e.slice,P=e.rb_plus,x=e.truthy,z=e.def,F=e.regexp,q=e.send,S=e.thrower,I=e.return_ivar,T=e.assign_ivar_val,H=e.eqeqeq,Y=e.eqeq,M=e.return_val,N=e.range,R=e.rb_minus,W=e.rb_divide,L=e.rb_times,a=e.rb_ge,i=e.top,D=[],r=e.$r(D),s=e.nil,b=e.$$$;return i.$require("i18n"),i.$require("i18n/backend/fallbacks"),i.$require("bcdice/randomizer"),i.$require("bcdice/dice_table"),i.$require("bcdice/enum"),i.$require("bcdice/translate"),i.$require("bcdice/result"),i.$require("bcdice/command/parser"),i.$require("bcdice/deprecated/checker"),w=D,h=f=[G(D[0],"BCDice")].concat(w),v=[u=B(f[0],null,"Base")].concat(h),_=e.$r(v),(A=u.$$prototype).raw_input=A.randomizer=A.enabled_upcase_input=A.debug=s,t=[U=e.get_singleton_class(u)].concat(v),k=e.$r(t),U.$attr_reader("prefixes"),z(U,"$register_prefix",function(l){var j,V,Q=this;return null==Q.prefixes&&(Q.prefixes=s),j=c(arguments),Q.prefixes=P(x(V=Q.prefixes)?V:[],j.$flatten())},-1),z(U,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),z(U,"$prefixes_pattern",function(){var l=this,$=s;return null==l.prefixes_pattern&&(l.prefixes_pattern=s),null==l.prefixes&&(l.prefixes=s),l.prefixes_pattern=x($=l.prefixes_pattern)?$:s,x(l.prefixes_pattern)?l.prefixes_pattern:(l.prefixes=x($=l.prefixes)?$:[],l.prefixes.$freeze(),l.prefixes_pattern=(x(l.prefixes["$empty?"]())?/(?!)/:F(["^(S)?(",l.prefixes.$join("|"),")"],"i")).$freeze())}),z(U,"$command_pattern",function(){var l=this,$=s,j=s;return null==l.command_pattern&&(l.command_pattern=s),null==l.prefixes&&(l.prefixes=s),l.command_pattern=x($=l.command_pattern)?$:s,x(l.command_pattern)?l.command_pattern:(l.prefixes=x($=l.prefixes)?$:[],l.prefixes.$freeze(),j=P(q(b(k("CommonCommand"),"COMMANDS"),"map",[],function(V){return null==V&&(V=s),b(V,"PREFIX_PATTERN").$source()}),l.prefixes),l.command_pattern=F(["^S?(",j.$join("|"),")"],"i").$freeze())}),z(U,"$eval",function(l){try{return S("eval_return"),this.$new(l).$eval()}catch(Q){if(Q===e.t_eval_return)return Q.$v;throw Q}}),u.$include(_("Translate")),u.$include(b(_("Deprecated"),"Checker")),z(u,"$initialize",function(o){var t=this;return t.raw_input=o,t.sort_add_dice=!1,t.sort_barabara_dice=!1,t.d66_sort_type=b(_("D66SortType"),"NO_SORT"),t.enabled_d9=!1,t.round_type=b(_("RoundType"),"FLOOR"),t.sides_implicit_d=6,t.upper_dice_reroll_threshold=s,t.reroll_dice_reroll_threshold=s,t.default_cmp_op=s,t.default_target_number=s,t.enabled_upcase_input=!0,t.locale="ja_jp",t.randomizer=b(_("BCDice"),"Randomizer").$new(),t.debug=!1}),u.$attr_accessor("randomizer"),u.$attr_reader("d66_sort_type"),u.$attr_reader("round_type"),u.$attr_reader("sides_implicit_d"),u.$attr_reader("upper_dice_reroll_threshold"),u.$attr_reader("reroll_dice_reroll_threshold"),u.$attr_reader("default_cmp_op"),u.$attr_reader("default_target_number"),z(u,"$sort_add_dice?",I("sort_add_dice")),z(u,"$sort_barabara_dice?",I("sort_barabara_dice")),z(u,"$enabled_d9?",I("enabled_d9")),z(u,"$enable_debug",T("debug",!0)),z(u,"$eval",function(){var t,n,o=this,k=s;return t=b(_("BCDice"),"Preprocessor").$process(o.raw_input,o),k=x(n=o.$dice_command(t))?n:o.$eval_common_command(o.raw_input),x(k)?(k["$rands="](o.randomizer.$rand_results()),k["$detailed_rands="](o.randomizer.$detailed_rand_results()),k):s}),z(u,"$change_text",function(o){return o}),z(u,"$check_result",function(o,t,k,n){var l=this,$=s,j=s,Q=s,V=s,ne=s;return $=l.$check_result_legacy(o,t,k,n),x($)?$:(j=q(t,"map",[],"sides".$to_proc()),V=(Q=q(t,"map",[],"value".$to_proc())).$sum(),$=H([100],ne=j)?l.$result_1d100(o,V,k,n):H([20],ne)?l.$result_1d20(o,V,k,n):H([6,6],ne)?l.$result_2d6(o,V,Q,k,n):s,Y($,_("Result").$nothing())?s:x($)?$:($=H([10],ne=j.$uniq())?l.$result_nd10(o,V,Q,k,n):H([6],ne)?l.$result_nd6(o,V,Q,k,n):s,Y($,_("Result").$nothing())?s:x($)?$:l.$result_ndx(o,k,n)))}),z(u,"$grich_text",M(s)),u.$private(),z(u,"$eval_common_command",function(o){try{S("eval_return");var k=S("return");return o=this.$change_text(o),q(b(_("CommonCommand"),"COMMANDS"),"each",[],function l($){var Q,j=null==l.$$s?this:l.$$s;if(null==j.randomizer&&(j.randomizer=s),null==$&&($=s),Q=$.$eval(o,j,j.randomizer),!x(Q))return s;k.$throw(Q)},{$$s:this,$$ret:k}),s}catch(l){if(l===e.t_eval_return||l===k)return l.$v;throw l}}),z(u,"$dice_command",function(o){var t=this,k=s,n=s,l=s,$=s;return x(t.enabled_upcase_input)&&(o=o.$upcase()),k=t.$class().$prefixes_pattern().$match(o),x(k)?(n=k["$[]"](1)["$nil?"]()["$!"](),x(n)&&(o=o["$[]"](N(1,-1,!1))),l=t.$eval_game_system_specific_command(o),x(l["$is_a?"](_("Result")))?(l["$secret="](x($=l["$secret?"]())?$:n),l):x(l["$nil?"]())||x(l["$empty?"]())||Y(l,"1")?s:q(_("Result").$new(),"tap",[],function(Q){var V;return null==Q&&(Q=s),Q["$text="](l.$to_s()),q(Q,"secret=",V=[n]),V[V.length-1]})):s}),z(u,"$eval_game_system_specific_command",M(s)),z(u,"$result_ndx",function(o,t,k){return x(k["$is_a?"](_("String")))?s:x(o.$send(t,k))?_("Result").$success(this.$translate("success")):_("Result").$failure(this.$translate("failure"))}),z(u,"$result_1d100",M(s)),z(u,"$result_1d20",M(s)),z(u,"$result_nd10",M(s)),z(u,"$result_2d6",M(s)),z(u,"$result_nd6",M(s)),z(u,"$get_table_by_2d6",function(o){return this.$get_table_by_nD6(o,2)}),z(u,"$get_table_by_1d6",function(o){return this.$get_table_by_nD6(o,1)}),z(u,"$get_table_by_nD6",function(o,t){return this.$get_table_by_nDx(o,t,6)}),z(u,"$get_table_by_nDx",function(o,t,k){var l,$=s;return l=this.randomizer.$roll_sum(t,k),$=this.$get_table_value(o["$[]"](R(l,t))),x($["$nil?"]())?["1",0]:[$,l]}),z(u,"$get_table_by_1d3",function(o){var n,l,t=this,$=s;return t.$debug("get_table_by_1d3"),n=t.randomizer.$roll_sum(1,6),t.$debug("num",n),l=W(R(n,1),2).$to_i(),t.$debug("index",l),$=o["$[]"](l),x($["$nil?"]())?["1",0]:[$,n]}),z(u,"$get_table_by_d66_swap",function(o){var k;return k=this.randomizer.$roll_d66(b(_("D66SortType"),"ASC")),[this.$get_table_by_number(k,o),k]}),z(u,"$get_table_by_d66",function(o){var k,n,l,j,$=s;return k=this.randomizer.$roll_once(6),n=this.randomizer.$roll_once(6),l=P(L(R(k,1),6),R(n,1)),$=o["$[]"](l),j=""+k+n,x($["$nil?"]())?["1",j]:[$,j]}),z(u,"$get_table_by_number",function(o,t,k){try{var n=S("return");return null==k&&(k="1"),q(t,"each",[],function $(j){var V,Q=null==$.$$s?this:$.$$s;if(null==j&&(j=s),V=j["$[]"](0),!x(a(V,o)))return s;n.$throw(Q.$get_table_value(j["$[]"](1)))},{$$s:this,$$ret:n}),this.$get_table_value(k)}catch($){if($===n)return $.$v;throw $}},-3),z(u,"$get_table_value",function(o){return x(o["$is_a?"](_("Proc")))?o.$call():o}),z(u,"$roll_tables",function(o,t){var n=s;return n=t["$[]"](o),x(n)?n.$roll(this.randomizer).$to_s():s}),z(u,"$debug",function(o,t){var n,l=this,$=s,j=s;return n=c(arguments,1),x(l.debug)?($=x(o["$is_a?"](_("String")))?o:o.$inspect(),x(n["$empty?"]())?l.$warn($):(j=q(n,"map",[],function(V){return null==V&&(V=s),x(V["$is_a?"](_("String")))?'"'+V+'"':V.$inspect()}),l.$warn($+": "+j.$join(", ")))):s},-2),b(b(r("I18n"),"Backend"),"Simple").$include(b(b(r("I18n"),"Backend"),"Fallbacks")),r("I18n").$load_path()["$<<"](r("Dir")["$[]"](r("File").$join("bcdice","../../i18n/**/*.yml"))),r("I18n")["$default_locale="]("ja_jp"),d=[["ja_jp"]],q(r("I18n").$fallbacks(),"defaults=",d),d[d.length-1]},Opal.queue(function(e){var i,b,m,h,u,v,w,y,r,G=e.module,B=e.klass,c=e.const_set,P=e.hash2,x=e.send2,z=e.find_super,F=e.def,q=e.truthy,S=e.to_ary,I=e.rb_plus,T=e.range,H=e.neqeq,Y=e.eqeq,M=e.rb_ge,N=e.rb_minus,W=[],L=e.nil,a=e.$$$;return e.top.$require("bcdice/base"),i=W,b=r=[G(W[0],"BCDice")].concat(i),w=[G(r[0],"GameSystem")].concat(b),y=e.$r(w),m=w,u=[h=B(w[0],y("Base"),"DesperateRun")].concat(m),v=e.$r(u),h.$$prototype.randomizer=L,c(u[0],"ID","DesperateRun"),c(u[0],"NAME","Desperate Run TRPG"),c(u[0],"SORT_KEY","\u3066\u3059\u3078\u308c\u3044\u3068\u3089\u3093TRPG"),c(u[0],"HELP_MESSAGE","\u30fb\u96e3\u6613\u5ea6\u7b97\u51fa\u30b3\u30de\u30f3\u30c9\u3000DDC\n\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\u3000RCx\u3000or\u3000RCx+y\u3000or\u3000RCx-y\uff08x\uff1d\u96e3\u6613\u5ea6\u3001y=\u4fee\u6b63\u5024\uff08\u7701\u7565\u53ef\u80fd\uff09\uff09\n\u30fb\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u8868\u3000ACT\n\u30fb\u521d\u671f\u30a2\u30a4\u30c6\u30e0\u8868\u3000ITEMT\n\u30fb\u52d5\u6a5f\u8868\u3000DOUKIT\n\u30fb\u6b7b\u4ea1\u30d5\u30e9\u30b0\u53f0\u8a5e\u8868\u3000FLAGT\n\u30fb\u9014\u4e2d\u53c2\u52a0\u52d5\u6a5f\u8868\u3000ENTRYT\n\u30fb\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868\u3000ROADT\n"),c(u[0],"TABLES",P(["ACT","ITEMT","DOUKIT","FLAGT","ENTRYT","ROADT"],{ACT:a(v("DiceTable"),"Table").$new("\u30a2\u30af\u30b7\u30c7\u30f3\u30c8\u8868","1D6",["PC\u5168\u54e1\u3001\u968a\u5217\u30921D6\u3067\u6c7a\u3081\u308b\uff0812\uff1a\u524d\u5217\u300134\uff1a\u4e2d\u5217\u300156\uff1a\u5f8c\u5217\uff09","1\u30bf\u30fc\u30f3\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u5074\u306e\u307f\u884c\u52d5\u3059\u308b\u3002","\u3053\u306e\u6226\u95d8\u306e\u884c\u52d5\u9806\u304c\u3001PC\u2192\u30e2\u30f3\u30b9\u30bf\u30fc\u3001\u304b\u3089\u3001\u30e2\u30f3\u30b9\u30bf\u30fc\u2192PC\u306b\u5909\u308f\u308b\u3002","PC\u5168\u54e1\u3001\u30a2\u30a4\u30c6\u30e01\u3064\u3092\u9078\u3093\u3067\u5931\u3046\u3002","PC\u5168\u54e11D6\u3092\u632f\u308b\u3002\u3053\u306e\u6226\u95d8\u4e2d\u3001\u305d\u306e\u51fa\u76ee\u306f\u30ce\u30fc\u30d7\u30e9\u30f3\u306b\u306a\u308b\u3002","PC\u5168\u54e1\u3001Flag\u304c1\u5897\u52a0\u3059\u308b\u3002"]),ITEMT:a(v("DiceTable"),"Table").$new("\u521d\u671f\u30a2\u30a4\u30c6\u30e0\u8868","2D6",["\u30ed\u30b1\u30c3\u30c8\u30e9\u30f3\u30c1\u30e3\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30de\u30ab\u30d6\u30ebLv+3\u3000\u56de\u6570\uff1a\u653b\u64831\u56de","\u30ad\u30fc\u30d4\u30c3\u30af\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30e0\u30fc\u30d6\u30b7\u30fc\u30f3\u3067\u4f7f\u7528\u53ef\u3002\u5224\u5b9a\u306e\u51fa\u76ee\u306e\u5408\u8a08+1\u3000\u56de\u6570\uff1a2\u56de","\u30ec\u30fc\u30c0\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30ce\u30fc\u30d7\u30e9\u30f3\u3000\u88c5\u5099\u6642\u3001\u300c\u5371\u967a\u300d\u30921\u6e1b\u3089\u3059\u3053\u3068\u304c\u51fa\u6765\u308b\u3000\u56de\u6570\uff1a\u5371\u967a\u6e1b\u5c112\u56de","\u98df\u6599\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30e0\u30fc\u30d6\u30b7\u30fc\u30f3\u3067\u4f7f\u7528\u53ef\u3002Life3\u56de\u5fa9\u3000\u56de\u6570\uff1a1\u56de","\u5fdc\u6025\u30ad\u30c3\u30c8\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30e1\u30c7\u30a3\u30ab\u30ebLv+1\u3000\u56de\u6570\uff1a\u56de\u5fa93\u56de","\u5203\u7269\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30a2\u30bf\u30c3\u30afLv+1\u3000\u56de\u6570\uff1a\u653b\u64836\u56de","\u9283\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30b7\u30e5\u30fc\u30c8Lv+1\u3000\u56de\u6570\uff1a\u653b\u64836\u56de","\u30c9\u30e9\u30c3\u30b0\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u3044\u3064\u3067\u3082\u4f7f\u7528\u53ef\u3002Brave1\u56de\u5fa9\u3000\u56de\u6570\uff1a1\u56de","\u91d1\u5238\u3000\u52b9\u679c\uff1a\uff08\u6d88\u8cbb\uff09\u30a2\u30d5\u30bf\u30fc\u30d7\u30ec\u30a4\u3067\u4f7f\u7528\u53ef\u3002\u7d4c\u9a13\u70b9+2\u3000\u56de\u6570\uff1a1\u56de","\u30d7\u30ed\u30c6\u30af\u30bf\u30fc\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30ac\u30fc\u30c9Lv+1\u3000\u56de\u6570\uff1a\u9632\u5fa15\u56de","\u30c8\u30df\u30fc\u30ac\u30f3\u3000\u52b9\u679c\uff1a\uff08\u88c5\u5099\uff09\u30c1\u30a7\u30fc\u30f3Lv+5\u3000\u56de\u6570\uff1a\u653b\u64831\u56de"]),DOUKIT:a(v("DiceTable"),"Table").$new("\u52d5\u6a5f\u8868","1D6",["\u96b7\u5c5e\u3002\u4f55\u304b\u5f31\u307f\u306b\u4ed8\u3051\u8fbc\u307e\u308c\u3001\u5acc\u3005\u306a\u304c\u3089\u3082\u53c2\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u308b\u3002\u5f8c\u308d\u3081\u305f\u3044\u4e8b\u3001\u501f\u91d1\u3001\u306a\u3069\u3002","\u732e\u8eab\u3002\u3053\u306e\u756a\u7d44\u306f\u8ab0\u304b\u306e\u305f\u3081\u306b\u51fa\u3066\u3044\u308b\u3002\u75c5\u6c17\u306e\u5bb6\u65cf\u3092\u6551\u3046\u305f\u3081\u3001\u53c2\u52a0\u8005\u306e\u4e00\u4eba\u304c\u604b\u4eba\u3067\u3042\u308b\u3001\u306a\u3069\u3002","\u6210\u884c\u3002\u671b\u3093\u3067\u3044\u306a\u3044\u306e\u306b\u53c2\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u3002\u8ab0\u304b\u304c\u52dd\u624b\u306b\u7533\u3057\u8fbc\u3093\u3060\u3001\u7d1b\u308c\u8fbc\u3093\u3067\u3057\u307e\u3063\u305f\u3001\u306a\u3069\u3002","\u6e07\u671b\u3002\u3068\u306b\u304b\u304f\u4f55\u304b\u3092\u6b32\u3057\u3066\u53c2\u52a0\u3057\u3066\u3044\u308b\u3002\u91d1\u3001\u30b9\u30ea\u30eb\u3001\u91d1\u3067\u624b\u306b\u5165\u308b\u3082\u306e\u3001\u306a\u3069\u3002","\u5947\u4eba\u3002\u597d\u304d\u597d\u3093\u3067\u3053\u306e\u756a\u7d44\u306b\u51fa\u3066\u3044\u308b\u3002\u6bba\u4eba\u7656\u3001\u30ca\u30eb\u30b7\u30b9\u30c8\u3001\u81ea\u6bba\u9858\u671b\u3001\u5316\u3051\u7269\u30de\u30cb\u30a2\u3001\u306a\u3069\u3002","\u4ed5\u4e8b\u3002\u3053\u306e\u756a\u7d44\u306b\u51fa\u308b\u306e\u306f\u4ed5\u4e8b\u3060\u304b\u3089\u3060\u3002\u8cde\u91d1\u7a3c\u304e\u3001\u82b8\u80fd\u4eba\u3001\u8a18\u8005\u3001\u756a\u7d44\u30b9\u30bf\u30c3\u30d5\u3001\u306a\u3069\u3002"]),FLAGT:a(v("DiceTable"),"Table").$new("\u6b7b\u4ea1\u30d5\u30e9\u30b0\u53f0\u8a5e\u8868","1D6",["\u5e0c\u671b\u3002\u300c\u3053\u308c\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u4e00\u7dd2\u306b\u9152\u3067\u3082\u98f2\u3082\u3046\u3084\u300d\u300c\u3082\u3046\u4f55\u3082\u6016\u304f\u306a\u3044\u300d\u306a\u3069\u3002","\u671b\u90f7\u3002\u300c\u304f\u305d\u3063\u3001\u3001\u3001\u4ffa\u306b\u306f\u3001\u5e30\u308a\u3092\u5f85\u3064\u4eba\u304c\u3001\u3001\u3001\u3063\uff01\u300d\u300c\u3042\u3042\u3001\u6545\u90f7\u306e\u30de\u30eb\u30b2\u30ea\u30fc\u30bf\u3092\u3082\u3046\u4e00\u5ea6\u98df\u3079\u305f\u304b\u3063\u305f\u3001\u3001\u3001\u300d\u306a\u3069\u3002","\u72c2\u4e71\u3002\u300c\u304a\u524d\u3092\u3001\u6bba\u305b\u3070\u3001\u4ffa\u306f\u3001\u5104\u4e07\u9577\u8005\u306a\u3093\u3060\u3088\u3049\u3049\u3049\u304a\uff01\uff01\u300d\u300c\u30d2\u30cf\u30c3\u3001\u6b7b\u306d\u6b7b\u306d\u6b7b\u306d\u6b7b\u306d\u3047\u3047\u3047\u3047\u300d\u306a\u3069\u3002","\u7d76\u671b\u3002\u300c\u3082\u3046\u3060\u3081\u3060\u3041\u3001\u3001\u3001\u304a\u3057\u307e\u3044\u3060\u3041\u3001\u3001\u3001\u300d\u300c\u304f\u3001\u304f\u308b\u306a\u3063\u3001\u304f\u308b\u306a\u3041\u3041\u3041\u3041\uff01\uff01\u300d\u306a\u3069\u3002","\u6162\u5fc3\u3002\u300c\u306a\u3093\u3060\u3001\u3053\u3093\u306a\u3084\u3064\u3001\u4ffa\u3060\u3051\u3067\u5341\u5206\u3060\u300d\u300c\u5927\u4e08\u592b\u3060\u3001\u554f\u984c\u306a\u3044\u300d\u306a\u3069\u3002","\u72a0\u7272\u3002\u300c\u3075\u3075\u3001\u4ffa\u306a\u3089\u5927\u4e08\u592b\u3060\u3001\u3001\u3001\u6c17\u306b\u3059\u308b\u306a\u300d\u300c\u304a\u524d\u3089\u4e0b\u304c\u308c\u3063\uff01\u3053\u3053\u306f\u4ffa\u306b\u4efb\u305b\u308d\uff01\u300d\u306a\u3069\u3002"]),ENTRYT:a(v("DiceTable"),"Table").$new("\u9014\u4e2d\u53c2\u52a0\u52d5\u6a5f\u8868","1D6",["\u9045\u523b\u3002\u3082\u3068\u3082\u3068\u53c2\u52a0\u3059\u308b\u4e88\u5b9a\u3060\u3063\u305f\u306e\u3060\u304c\u9045\u308c\u3066\u3057\u307e\u3063\u305f\u3002\u4eca\u304b\u3089\u3067\u3082\u8d70\u308c\u3068\u7121\u7406\u77e2\u7406\u53c2\u52a0\u3002","\u73fe\u4f4f\u3002\u3082\u3068\u3082\u3068\u3053\u3053\u306b\u4f4f\u3093\u3067\u3044\u305f\u3002\u4f55\uff1f\u756a\u7d44\uff1f\u3048\uff1f\u3042\u3001\u304a\u91d1\u3082\u3089\u3048\u3093\u306e\uff1f\u30a4\u30a4\u30cd\uff01","\u7a81\u767a\u3002\u3082\u3068\u3082\u3068\u8996\u8074\u8005\u3068\u3057\u3066\u30b9\u30bf\u30b8\u30aa\u306b\u5c45\u305f\u3093\u3060\u3051\u3069\u3001\u53f8\u4f1a\u306b\u3046\u307e\u304f\u4e57\u305b\u3089\u308c\u3066\u30fb\u30fb\u30fb","\u4e71\u5165\u3002\u4f55\u304b\u76ee\u7684\u304c\u3042\u3063\u3066\u4e71\u5165\u3057\u305f\u3002\u4eca\u56de\u306e\u30b9\u30c6\u30fc\u30b8\u304c\u7c21\u5358\u306b\u898b\u3048\u305f\u308a\u3001\u53c2\u52a0\u8005\u306b\u5927\u4e8b\u306a\u4eba\u304c\u3044\u305f\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\u795e\u96a0\u3002\u4eca\u56de\u3088\u308a\u524d\u306e\u756a\u7d44\u306b\u53c2\u52a0\u3057\u3066\u3044\u305f\u304c\u884c\u65b9\u4e0d\u660e\u30fb\u6b7b\u3093\u3060\u3068\u601d\u308f\u308c\u3066\u3044\u305f\u3002\u304c\u3002\u541b\u306f\u307e\u3060\u3053\u3053\u306b\u3044\u308b\u3002","\u8077\u54e1\u3002\u3042\u308c\u3001\u9003\u3052\u9045\u308c\u307e\u3057\u305f\uff1f\u3042\u3089\u3042\u3089\u3001\u5927\u5909\u3067\u3059\u306d\u3001\u3057\u3087\u3046\u304c\u306a\u3044\u304b\u3089\u53c2\u52a0\u8005\u3055\u3093\u3068\u4e00\u7dd2\u306b\u8d70\u3063\u3066\u304f\u3060\u3055\u3044\u3002"]),ROADT:a(v("DiceTable"),"Table").$new("\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868","1D6",["\u6b7b\u7dda\u3002\u6b7b\u306c\u304b\u3068\u601d\u3063\u305f\u3002Flag+1","\u602a\u6211\u3002\u75db\u3044\u3002Life-1","\u5931\u610f\u3002\u3069\u3046\u3057\u3066\u3053\u3046\u306a\u3063\u305f\u3002Brave-1\u3002\u6e1b\u3089\u305b\u306a\u3044\u5834\u5408\u3001Flag+1","\u7d1b\u5931\u3002\u3069\u3063\u304b\u3044\u3063\u305f\u3002Item\u3092\u3069\u308c\u304b1\u3064\u6368\u3066\u308b\u3002\u6368\u3066\u308c\u306a\u3044\u5834\u5408\u3001Flag+1","\u8ffd\u5c3e\u3002\u5f8c\u308d\uff01\u5f8c\u308d\u30fc\u3063\uff01\u53c2\u52a0\u958b\u59cb\u90e8\u5c4b\u306e\u5371\u967a+1","\u8ff7\u5b50\u3002\u3042\u308c\u3001\u3053\u3053\u3069\u3053\u3060\uff1f\u9014\u4e2d\u53c2\u52a0\u9053\u4e2d\u8868\u3092\u632f\u308b\u56de\u6570+2"])}).$freeze()),h.$register_prefix("RC","DDC",v("TABLES").$keys()),F(h,"$initialize",function A(U){var t=this;return A.$$p=null,x(t,z(t,"initialize",A,!1,!0),"initialize",[U],null),t.sort_add_dice=!0,t.d66_sort_type=a(v("D66SortType"),"ASC")}),h.$private(),F(h,"$eval_game_system_specific_command",function(U){var t,k,o=this;return q(t=q(k=o.$check_roll(U))?k:o.$ddc_table(U))?t:o.$roll_tables(U,a(o.$class(),"TABLES"))}),F(h,"$check_roll",function(U){var o,t,l=L,$=L,j=L,Q=L,V=L,ne=L,$e=L,ue=L,ie=L;return l=a(v("Command"),"Parser").$new(/RC\d+/,P(["round_type"],{round_type:this.$round_type()})).$restrict_cmp_op_to(L).$parse(U),q(l)?(t=this.randomizer.$roll_barabara(2,6),o=S(t),Q=I($=null==o[0]?L:o[0],j=null==o[1]?L:o[1]),V=I(I($,j),l.$modify_number()),ne=l.$command()["$[]"](T(2,-1,!1)).$to_i(),H(l.$modify_number(),0)&&($e="\u3000\u4fee\u6b63\u5024\uff1a"+l.$modify_number()),ie=["\u5224\u5b9a\u3000\u96e3\u6613\u5ea6\uff1a"+ne+$e,"\u51fa\u76ee\uff1a"+$+"\u3001"+j,(ue=Y($,j)?v("Result").$critical("\u30be\u30ed\u76ee\uff01\u3010Critical\u3011"):Y(Q,7)?v("Result").$fumble("\u30c0\u30a4\u30b9\u306e\u51fa\u76ee\u304c\u8868\u88cf\uff01\u3010Fumble\u3011"):q(M(V,ne))?v("Result").$success(V+"\u3001\u96e3\u6613\u5ea6\u4ee5\u4e0a\uff01\u3010Success\u3011"):v("Result").$failure(V+"\u3001\u96e3\u6613\u5ea6\u672a\u6e80\uff01\u3010Miss\u3011")).$text()],ue["$text="](ie.$join(" \uff1e ")),ue):L}),F(h,"$ddc_table",function(U){var o,t,n=L,l=L,$=L,j=L,Q=L;return H(U,"DDC")?L:(t=this.randomizer.$roll_barabara(2,6),t=[n=null==(o=S(t))[0]?L:o[0],l=null==o[1]?L:o[1]].$sort(),"\u96e3\u6613\u5ea6\u6c7a\u5b9a \uff1e \u51fa\u76ee\uff1a"+n+"\u3001"+l+" \uff1e "+(j=null==(o=S(t))[1]?L:o[1])+"-"+($=null==o[0]?L:o[0])+"="+(Q=N(j,$))+" \uff1e \u96e3\u6613\u5ea6"+I(5,Q))})})}}]);