(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[3678],{7729:(p,O,F)=>{F(5151),Opal.queue(function(a){var I,Y,X,v,C,f,j,U,Q,w=a.module,N=a.klass,z=a.const_set,l=a.truthy,b=a.def,y=a.rb_plus,D=a.eqeq,G=a.rb_ge,B=a.rb_lt,H=a.thrower,q=a.rb_minus,x=a.rb_gt,A=a.send,k=a.eqeqeq,T=a.rb_le,P=[],r=a.nil;return I=P,Y=Q=[w(P[0],"BCDice")].concat(I),j=[w(Q[0],"GameSystem")].concat(Y),U=a.$r(j),X=j,C=[v=N(j[0],U("Base"),"NSSQ")].concat(X),f=a.$r(C),v.$$prototype.randomizer=r,z(C[0],"ID","NSSQ"),z(C[0],"NAME","SRS\u3058\u3083\u306a\u3044\u4e16\u754c\u6a39\u306e\u8ff7\u5baeTRPG"),z(C[0],"SORT_KEY","\u3048\u3059\u3042\u3042\u308b\u3048\u3059\u3057\u3084\u306a\u3044\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046TRPG"),z(C[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xSQ\xb1y>=z)\n  xD6\u306e\u5224\u5b9a\u30023\u3064\u4ee5\u4e0a\u632f\u3063\u305f\u3068\u304d\u3001\u51fa\u76ee\u306e\u9ad8\u30442\u3064\u3092\u8868\u793a\u3057\u307e\u3059\u3002\u7d76\u5bfe\u6210\u529f\u3001\u7d76\u5bfe\u5931\u6557\u3082\u8a08\u7b97\u3057\u307e\u3059\u3002\n  2\u3064\u306e\u30b5\u30a4\u30b3\u30ed\u3092\u4f7f\u7528\u3057\u3066\u51fa\u76ee\u306b1\u304c\u3042\u3063\u305f\u5834\u5408\u306f\u3001FP\u306e\u7372\u5f97\u3082\u8868\u793a\u3057\u307e\u3059\u30023\u3064\u4ee5\u4e0a\u4f7f\u7528\u3057\u305f\u5834\u5408\u306f\u8868\u793a\u3057\u307e\u305b\u3093\u3002\n  \xb1y: y\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n  z: \u76ee\u6a19\u5024\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb (xDR(C)(+)y)\n  xD6\u306e\u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30d2\u30c3\u30c8\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002C\u3092\u4ed8\u3051\u308b\u3068\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30a2\u30c3\u30d7\u72b6\u614b\u3067\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002+\u3092\u4ed8\u3051\u308b\u3068\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30d2\u30c3\u30c8\u6642\u306e\u30c0\u30a4\u30b9\u304c8\u500b\u306b\u306a\u308a\u307e\u3059\u3002\n  x: x\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n  y: y\u306b\u8010\u6027\u3092\u5165\u529b\u3002\n  \u4f8b) 5DR3 5DRC4 5DRC+4\n\n\u25a0 \u56de\u5fa9\u30ed\u30fc\u30eb (xHRy)\n  xD6\u306e\u56de\u5fa9\u30ed\u30fc\u30eb\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30d2\u30c3\u30c8\u304c\u767a\u751f\u3057\u307e\u305b\u3093\u3002\n  x: x\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n  y: y\u306b\u8010\u6027\u3092\u5165\u529b\u3002\u7701\u7565\u3057\u305f\u5834\u54083\u3002\n  \u4f8b) 2HR 10HR2\n\n\u25a0 \u63a1\u96c6\u30ed\u30fc\u30eb (TC\xb1z,SC\xb1z,GC\xb1z)\n  \u5c11\u3057\u3060\u3051(T)\u3001\u305d\u3053\u305d\u3053(S)\u3001\u30ac\u30c3\u30c4\u30ea(G)\u63a1\u53d6\u63a1\u6398\u4f10\u63a1\u3092\u884c\u3044\u307e\u3059\u3002\n  z: z\u306b\u8ffd\u52a0\u3067\u30ed\u30fc\u30eb\u3059\u308b\u56de\u6570\u3092\u5165\u529b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  \u4f8b) TC SC+1 GC-1\n"),v.$register_prefix("\\d+SQ[\\+\\-\\d]*","\\d+DR(C)?(\\+)?\\d+","[TSG]C","\\d+HR\\d*"),b(v,"$eval_game_system_specific_command",function(t){var e,$,u,i=this;return l(e=l($=l(u=i.$roll_sq(t))?u:i.$damage_roll(t))?$:i.$heal_roll(t))?e:i.$collecting_roll(t)}),v.$private(),b(v,"$roll_sq",function(t){try{H("eval_return");var e,u=r,s=r,_=r,c=r,o=r,n=r,d=r,g=r,h=r,m=r,S=r;return u=/(\d+)SQ([+\-\d]+)?(([>=]+)(\d+))?/i.$match(t),l(u)?(s=u["$[]"](1).$to_i(),_=f("ArithmeticEvaluator").$eval(u["$[]"](2)),c=(e=u["$[]"](5))===r||null==e?r:e.$to_i(),n=(o=this.randomizer.$roll_barabara(s,6)).$sort().$reverse().$take(2),d=y(n.$sum(),_),g=o.$count(1),h=D(n,[6,6])?f("Result").$critical(" \uff1e \u7d76\u5bfe\u6210\u529f\uff01"):D(n,[1,1])?f("Result").$fumble(" \uff1e \u7d76\u5bfe\u5931\u6557\uff01"):l(c)&&l(G(d,c))?f("Result").$success(" \uff1e \u6210\u529f"):l(c)&&l(B(d,c))?f("Result").$failure(" \uff1e \u5931\u6557"):f("Result").$new(),m=D(s,2)&&l(G(g,1))?" (\u3010FP\u3011"+g+"\u7372\u5f97)":"",S=["("+t+")","["+o.$join(",")+"]"+f("Format").$modifier(_),d+"["+n.$join(",")+"]"+h.$text()+m],h["$text="](S.$join(" \uff1e ")),h):r}catch(E){if(E===a.t_eval_return)return E.$v;throw E}}),b(v,"$damage_roll",function(t){var i=this,e=r,$=r,u=r,s=r,_=r,c=r,o=r,n=r,d=r;return e=/(\d+)DR(C)?(\+)?(\d+)/i.$match(t),l(e)?($=e["$[]"](1).$to_i(),u=e["$[]"](2)["$nil?"]()["$!"](),s=e["$[]"](3)["$nil?"]()["$!"](),_=e["$[]"](4).$to_i(),c=i.randomizer.$roll_barabara($,6),o=i.$damage(c,_),n="("+t+") \uff1e ["+c.$join(",")+"]"+_,d=l(u)?1:2,l(G(q(c.$count(6),c.$count(1)),d))?(n=y(n,i.$critical_damage_roll(s,_,o)),n=f("Result").$critical(n)):(n=y(n," \uff1e "+o+"\u30c0\u30e1\u30fc\u30b8"),n=l(x(o,0))?f("Result").$success(n):f("Result").$failure(n)),n):r}),b(v,"$critical_damage_roll",function(t,i,e){var u,_,s=r;return u=l(t)?8:4,s=this.randomizer.$roll_barabara(u,6),_=this.$damage(s,i)," \uff1e \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30d2\u30c3\u30c8\uff01 \uff1e ("+u+"DR"+i+") \uff1e ["+s.$join(",")+"]"+i+" \uff1e "+y(e,_)+"\u30c0\u30e1\u30fc\u30b8"}),b(v,"$heal_roll",function(t){var i,$=r,u=r,s=r,_=r,c=r,o=r,n=r;return $=/^(\d+)HR(\d+)?$/i.$match(t),l($)?(u=$["$[]"](1).$to_i(),s=l(_=(i=$["$[]"](2))===r||null==i?r:i.$to_i())?_:3,c=this.randomizer.$roll_barabara(u,6),o=this.$damage(c,s),n="("+t+") \uff1e ["+c.$join(",")+"]"+s+" \uff1e "+o+"\u56de\u5fa9",l(x(o,0))?f("Result").$success(n):f("Result").$failure(n)):r}),b(v,"$damage",function(t,i){return A(t,"count",[],function($){return null==$&&($=r),x($,i)})}),b(v,"$collecting_roll",function(t){try{H("eval_return");var $=r,u=r,s=r,_=r,c=r,o=r;return $=/([TSG])C([+\-\d]+)?/i.$match(t),!l($)||(u=$["$[]"](1),s=f("ArithmeticEvaluator").$eval($["$[]"](2)),_=k("T",c=u)?3:k("S",c)?4:k("G",c)?5:r,o=y(q(_,2),s),l(T(o,0)))?r:A(f("Array"),"new",[o],function d(g){var S,h=null==d.$$s?this:d.$$s,m=r;return null==h.randomizer&&(h.randomizer=r),null==g&&(g=r),S=(m=h.randomizer.$roll_barabara(2,6)).$sum(),"("+t+") \uff1e "+S+"["+m.$join(",")+"]: "+h.$result_collecting(g,S,_)},{$$s:this}).$join("\n")}catch(d){if(d===a.t_eval_return)return d.$v;throw d}}),b(v,"$result_collecting",function(t,i,e){return l(T(i,e))&&l(x(q(e,2),t))?"\uff01\u3042\u3042\u3063\u3068\uff01":l(T(q(e,2),t))?"\u6210\u529f\uff08\u8ffd\u52a0\u5206\uff09":"\u6210\u529f"})})}}]);