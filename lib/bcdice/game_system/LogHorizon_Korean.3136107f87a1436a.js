(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[348],{4912:(ge,ye,he)=>{he(3986),Opal.modules["i18n/backend/fallbacks"]=function(e){var Q,i,t,r,s,d,j=e.module,N=e.class_variable_set,u=e.truthy,M=e.class_variable_get,L=e.def,y=e.send,g=e.send2,D=e.find_super,z=e.hash2,B=e.find_block_super,w=e.neqeq,Y=e.thrower,J=e.return_val,F=[],I=e.nil,S=e.$$$;return Q=F,d=[s=j(F[0],"I18n")].concat(Q),N(d[0],"@@fallbacks",I),i=e.get_singleton_class(s),t=[i].concat(d),r=e.$r(t),L(i,"$fallbacks",function(){var q=I;return N(t[1],"@@fallbacks",u(null!=t[1].$$cvars["@@fallbacks"]?"class variable":I)&&u(q=M(t[1],"@@fallbacks",!1))?q:S(S(r("I18n"),"Locale"),"Fallbacks").$new()),u(q=r("Thread").$current()["$[]"]("i18n_fallbacks"))?q:M(t[1],"@@fallbacks",!1)}),L(i,"$fallbacks=",function(H){var q;return N(t[1],"@@fallbacks",u(H["$is_a?"](r("Array")))?S(S(r("I18n"),"Locale"),"Fallbacks").$new(H):H),q=["i18n_fallbacks",M(t[1],"@@fallbacks",!1)],y(r("Thread").$current(),"[]=",q),q[q.length-1]}),function(i,E){var H,q,x,v,r=[j(i,"Backend")].concat(E);return H=r,x=[q=j(r[0],"Fallbacks")].concat(H),v=e.$r(x),L(q,"$translate",function C(b,T,l){try{var R=Y("return"),f=C.$$p||I,G=this,W=I,_=I;return C.$$p=null,null==l&&(l=v("EMPTY_HASH")),u(l.$fetch("fallback",!0))?u(l["$[]"]("fallback_in_progress"))?g(G,D(G,"translate",C,!1,!0),"translate",[b,T,l],f):(u(l["$[]"]("default"))&&(W=G["$extract_non_symbol_default!"](l)),_=l.$merge(z(["fallback_in_progress"],{fallback_in_progress:!0})),y(v("I18n").$fallbacks()["$[]"](b),"each",[],function $(h){var a=null==$.$$s?this:$.$$s;null==h&&(h=I);try{return y(a,"catch",["exception"],function c(){var n=null==c.$$s?this:c.$$s,p=I;if(p=g(n,B(n,"translate",c.$$def||$.$$def||C,!1,!1),"translate",[h,T,_],null),u(p["$nil?"]()))return I;w(b.$to_s(),h.$to_s())&&n.$on_fallback(b,h,T,l),R.$throw(p)},{$$s:a,$$ret:R})}catch(c){if(!e.rescue(c,[S(v("I18n"),"InvalidLocale")]))throw c;try{return I}finally{e.pop_exception()}}},{$$s:G}),u(l["$key?"]("default"))&&u(l["$[]"]("default")["$nil?"]())?I:u(W)?g(G,D(G,"translate",C,!1,!0),"translate",[b,I,l.$merge(z(["default"],{default:W}))],null):G.$throw("exception",S(v("I18n"),"MissingTranslation").$new(b,T,l))):g(G,D(G,"translate",C,!1,!0),"translate",[b,T,l],f)}catch($){if($===R)return $.$v;throw $}},-3),L(q,"$extract_non_symbol_default!",function(b){var l,T=I;return T=[b["$[]"]("default")].$flatten(),l=y(T,"detect",[],function(f){return null==f&&(f=I),f["$is_a?"](v("Symbol"))["$!"]()}),u(l)&&b["$[]="]("default",T["$[]"](0,T.$index(l))),l}),L(q,"$exists?",function C(b,T,l){try{var R=Y("return"),f=C.$$p||I,G=this;return C.$$p=null,null==l&&(l=v("EMPTY_HASH")),u(l.$fetch("fallback",!0))?(y(v("I18n").$fallbacks()["$[]"](b),"each",[],function W(_){var $=null==W.$$s?this:W.$$s;null==_&&(_=I);try{if(!u(g($,B($,"exists?",W.$$def||C,!1,!1),"exists?",[_,T],null)))return I;R.$throw(!0)}catch(h){if(!e.rescue(h,[S(v("I18n"),"InvalidLocale")]))throw h;try{return I}finally{e.pop_exception()}}},{$$s:G,$$ret:R}),!1):g(G,D(G,"exists?",C,!1,!0),"exists?",[b,T,l],f)}catch(W){if(W===R)return W.$v;throw W}},-3),q.$private(),L(q,"$on_fallback",J(I))}(d[0],d)},Opal.modules["bcdice/randomizer"]=function(e){var s,o,H,q,x,v,i,E,N=e.klass,u=e.const_set,M=e.def,L=e.truthy,y=e.rb_gt,g=e.rb_plus,D=e.rb_le,z=e.send,B=e.rb_minus,w=e.eqeq,Y=e.rb_times,J=e.eqeqeq,F=e.rb_ge,I=[],S=e.nil,X=e.$$$;return s=I,i=[(0,e.module)(I[0],"BCDice")].concat(s),E=e.$r(i),o=i,q=[H=N(i[0],null,"Randomizer")].concat(o),x=e.$r(q),(v=H.$$prototype).rand_results=v.detailed_rand_results=S,u(q[0],"UPPER_LIMIT_DICE_TIMES",200),u(q[0],"UPPER_LIMIT_DICE_SIDES",1e4),u(q[0],"UPPER_LIMIT_RANDS",1e4),M(H,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),H.$attr_reader("rand_results"),H.$attr_reader("detailed_rand_results"),u(q[0],"DetailedRandResult",x("Struct").$new("kind","sides","value")),M(H,"$roll_barabara",function(b,T){var l=this;return L(y(g(l.rand_results.$size(),b),x("UPPER_LIMIT_RANDS")))&&l.$raise(x("TooManyRandsError")),L(D(b,0))||L(y(b,x("UPPER_LIMIT_DICE_TIMES")))?[]:z(x("Array"),"new",[b],function R(){return(null==R.$$s?this:R.$$s).$roll_once(T)},{$$s:l})}),M(H,"$roll_sum",function(b,T){return this.$roll_barabara(b,T).$sum()}),M(H,"$roll_once",function(b){var l=S;return L(D(b,0))||L(y(b,x("UPPER_LIMIT_DICE_SIDES")))?0:(l=this.$rand_inner(b),this.$push_to_detail("normal",b,l),l)}),M(H,"$roll_index",function(b){return B(this.$roll_once(b),1)}),M(H,"$roll_tens_d10",function(){var l,T=S;return T=this.$rand_inner(10),w(T,10)&&(T=0),l=Y(T,10),this.$push_to_detail("tens_d10",10,l),l}),M(H,"$roll_d9",function(){var T;return T=B(this.$rand_inner(10),1),this.$push_to_detail("d9",10,T),T}),M(H,"$roll_d66",function(b){var R,l=S;return l=z(x("Array"),"new",[2],function f(){return(null==f.$$s?this:f.$$s).$roll_once(6)},{$$s:this}),J(X(x("D66SortType"),"ASC"),R=b)?l["$sort!"]():J(X(x("D66SortType"),"DESC"),R)&&l["$sort!"]()["$reverse!"](),g(Y(l["$[]"](0),10),l["$[]"](1))}),H.$private(),M(H,"$rand_inner",function(b){var l,T=this;return L(F(T.rand_results.$size(),x("UPPER_LIMIT_RANDS")))&&T.$raise(x("TooManyRandsError")),l=T.$random(b),T.rand_results["$<<"]([l,b]),l}),M(H,"$random",function(b){return g(x("Kernel").$rand(b),1)}),M(H,"$push_to_detail",function(b,T,l){var f;return f=x("DetailedRandResult").$new(b,T,l),this.detailed_rand_results.$push(f)}),N(i[0],E("StandardError"),"TooManyRandsError"),S},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var z,J,Q,s,d,i,E,I,w,j=e.module,N=e.klass,u=e.def,M=e.truthy,L=e.return_val,y=[],g=e.nil;return z=y,J=w=[j(y[0],"BCDice")].concat(z),Q=I=[j(w[0],"DiceTable")].concat(J),d=[s=N(I[0],null,"RollResult")].concat(Q),i=e.$r(d),(E=s.$$prototype).table_name=E.value=E.body=g,u(s,"$initialize",function(r,o,H){var q=this;return q.table_name=r,q.value=o,q.body=H}),s.$attr_reader("table_name"),s.$attr_reader("value"),s.$attr_reader("body"),u(s,"$to_s",function(){var r=this;return r.table_name+"("+r.value+") \uff1e "+r.body}),u(s,"$last_body",function(){var r=this;return M(r.body["$is_a?"](i("RollResult")))?r.body.$last_body():r.body}),u(s,"$empty?",L(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var z,J,Q,s,d,i,E,I,w,j=e.module,N=e.klass,u=e.truthy,M=e.def,L=e.rb_minus,y=[],g=e.nil;return z=y,J=w=[j(y[0],"BCDice")].concat(z),Q=I=[j(w[0],"DiceTable")].concat(J),d=[s=N(I[0],null,"ChainTable")].concat(Q),i=e.$r(d),(E=s.$$prototype).times=E.sides=E.items=E.name=g,M(s,"$initialize",function(r,o,H){var q=this,x=g;return q.name=r,q.items=H.$freeze(),x=/(\d+)D(\d+)/i.$match(o),u(x)||q.$raise(i("ArgumentError"),"Unexpected table type: "+o),q.times=x["$[]"](1).$to_i(),q.sides=x["$[]"](2).$to_i()}),M(s,"$roll",function(r){var H,q,o=this,x=g;return H=r.$roll_sum(o.times,o.sides),q=L(H,o.times),x=o.items["$[]"](q),u(x["$respond_to?"]("roll"))&&(x=x.$roll(r)),i("RollResult").$new(o.name,H,x)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var Y,S,i,E,t,r,o,Q,F,j=e.module,N=e.klass,u=e.hash2,M=e.defs,L=e.def,y=e.rb_plus,g=e.rb_times,D=e.rb_minus,z=[],B=e.nil;return Y=z,S=F=[j(z[0],"BCDice")].concat(Y),i=Q=[j(F[0],"DiceTable")].concat(S),t=[E=N(Q[0],null,"D66GridTable")].concat(i),r=e.$r(t),(o=E.$$prototype).name=o.items=B,M(E,"$from_i18n",function(q,x){var C=B;return C=r("I18n").$t(q,u(["locale","raise"],{locale:x,raise:!0})),this.$new(C["$[]"]("name"),C["$[]"]("items"))}),L(E,"$initialize",function(q,x){return this.name=q,this.items=x.$freeze()}),L(E,"$roll",function(q){var v,C,b,T,l;return v=q.$roll_once(6),C=q.$roll_once(6),b=y(g(v,10),C),T=D(v,1),l=D(C,1),r("RollResult").$new(this.name,b,this.items["$[]"](T)["$[]"](l))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var B,F,d,i,E,t,S,X,Y,j=e.module,N=e.klass,u=e.hash2,M=e.defs,L=e.def,g=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),B=g,F=Y=[j(g[0],"BCDice")].concat(B),S=[j(Y[0],"DiceTable")].concat(F),X=e.$r(S),d=S,E=[i=N(S[0],X("D66GridTable"),"D66HalfGridTable")].concat(d),t=e.$r(E),M(i,"$from_i18n",function(o,H){var x=D;return x=t("I18n").$t(o,u(["locale","raise"],{locale:H,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2_3"),x["$[]"]("items_4_5_6"))}),L(i,"$initialize",function(o,H,q){return this.name=o,this.items=[H,H,H,q,q,q].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var B,F,d,i,E,t,S,X,Y,j=e.module,N=e.klass,u=e.hash2,M=e.defs,L=e.def,g=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),B=g,F=Y=[j(g[0],"BCDice")].concat(B),S=[j(Y[0],"DiceTable")].concat(F),X=e.$r(S),d=S,E=[i=N(S[0],X("D66GridTable"),"D66OneThirdTable")].concat(d),t=e.$r(E),M(i,"$from_i18n",function(o,H){var x=D;return x=t("I18n").$t(o,u(["locale","raise"],{locale:H,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2"),x["$[]"]("items_3_4"),x["$[]"]("items_5_6"))}),L(i,"$initialize",function(o,H,q,x){return this.name=o,this.items=[H,H,q,q,x,x].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var F,Q,t,r,o,H,q,d,S,j=e.module,N=e.klass,u=e.hash2,M=e.defs,L=e.def,y=e.eqeqeq,g=e.rb_plus,D=e.rb_times,z=e.truthy,B=[],w=e.nil,Y=e.$$$;return F=B,Q=S=[j(B[0],"BCDice")].concat(F),t=d=[j(S[0],"DiceTable")].concat(Q),o=[r=N(d[0],null,"D66Table")].concat(t),H=e.$r(o),(q=r.$$prototype).sort_type=q.items=q.name=w,M(r,"$from_i18n",function(v,C){var l,T=w;return T=H("I18n").$t(v,u(["locale"],{locale:C})),l=H("D66SortType").$const_get(T["$[]"]("d66_sort_type")),this.$new(T["$[]"]("name"),l,T["$[]"]("items"))}),L(r,"$initialize",function(v,C,b){var T=this;return T.name=v,T.sort_type=C,T.items=b.$freeze()}),L(r,"$roll",function(v){var C=this,b=w,T=w,l=w,R=w;return b=v.$roll_barabara(2,6),y(Y(H("D66SortType"),"ASC"),T=C.sort_type)?b["$sort!"]():y(Y(H("D66SortType"),"DESC"),T)&&b["$sort!"]()["$reverse!"](),l=g(D(b["$[]"](0),10),b["$[]"](1)),R=z(T=C.items["$[]"](l))?T:C.items["$[]"](l.$to_s()),z(R["$respond_to?"]("roll"))&&(R=R.$roll(v)),H("RollResult").$new(C.name,l,R)}),L(r,"$choice",function(v){return H("RollResult").$new(this.name,v,this.items["$[]"](v))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var I,s,i,E,X,j=e.module,N=e.klass,u=e.hash2,M=e.send,L=e.to_ary,y=e.rb_plus,g=e.rb_times,D=e.send2,z=e.find_super,B=e.def,Y=[],J=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),I=Y,s=X=[j(Y[0],"BCDice")].concat(I),i=[j(X[0],"DiceTable")].concat(s),E=e.$r(i),B(N(i[0],E("D66Table"),"D66LeftRangeTable"),"$initialize",function H(q,x,v){var T;return H.$$p=null,T=u([],{}),M(v,"each",[],function(R){var f,_;return null==R&&(R=J),f=L(R),_=null==f[1]?J:f[1],M(null==f[0]?J:f[0],"each",[],function(h){return null==h&&(h=J),M(_,"each_with_index",[],function(c,n){var p,A;return null==c&&(c=J),null==n&&(n=J),A=y(g(h,10),y(n,1)),M(T,"[]=",p=[A,c]),p[p.length-1]})})}),D(this,z(this,"initialize",H,!1,!0),"initialize",[q,x,T],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var J,X,E,t,r,o,H,s,I,j=e.module,N=e.klass,u=e.hash2,M=e.defs,L=e.def,y=e.truthy,g=e.rb_minus,D=e.rb_plus,z=e.rb_times,B=[],w=e.nil;return J=B,X=I=[j(B[0],"BCDice")].concat(J),E=s=[j(I[0],"DiceTable")].concat(X),r=[t=N(s[0],null,"D66ParityTable")].concat(E),o=e.$r(r),(H=t.$$prototype).odd=H.even=H.name=w,M(t,"$from_i18n",function(x,v){var b=w;return b=o("I18n").$t(x,u(["locale","raise"],{locale:v,raise:!0})),this.$new(b["$[]"]("name"),b["$[]"]("odd"),b["$[]"]("even"))}),L(t,"$initialize",function(x,v,C){var b=this;return b.name=x,b.odd=v.$freeze(),b.even=C.$freeze()}),L(t,"$roll",function(x){var b,l,R,v=this,C=w;return C=x.$roll_once(6),b=x.$roll_once(6),l=(y(C["$odd?"]())?v.odd:v.even)["$[]"](g(b,1)),R=D(z(C,10),b),o("RollResult").$new(v.name,R,l)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var B,F,s,d,i,E,t,S,Y,j=e.module,N=e.klass,u=e.def,M=e.rb_plus,L=e.rb_times,y=e.send,g=[],D=e.nil;return B=g,F=Y=[j(g[0],"BCDice")].concat(B),s=S=[j(Y[0],"DiceTable")].concat(F),i=[d=N(S[0],null,"D66RangeTable")].concat(s),E=e.$r(i),(t=d.$$prototype).items=t.name=D,u(d,"$initialize",function(o,H){return this.name=o,this.items=H.$freeze()}),u(d,"$roll",function(o){var q,x,v,C=D;return q=o.$roll_once(6),x=o.$roll_once(6),v=M(L(q,10),x),C=y(this.items,"find",[],function(T){return null==T&&(T=D),T["$[]"](0)["$include?"](v)}),E("RollResult").$new(this.name,v,C["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var J,X,E,t,r,o,H,s,I,j=e.module,N=e.klass,u=e.const_set,M=e.send,L=e.truthy,y=e.def,g=e.eqeqeq,D=e.rb_times,z=e.rb_plus,B=[],w=e.nil;return J=B,X=I=[j(B[0],"BCDice")].concat(J),E=s=[j(I[0],"DiceTable")].concat(X),r=[t=N(s[0],null,"RangeTable")].concat(E),o=e.$r(r),(H=t.$$prototype).name=H.items=H.num_of_dice=H.num_of_sides=H.formatter=w,u(r[0],"RollResult",M(o("Struct"),"new",["sum","values","content","formatted"],function q(){return(null==q.$$s?this:q.$$s).$alias_method("to_s","formatted")},{$$s:t})),u(r[0],"Item",o("Struct").$new("range","content")),u(r[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),u(r[0],"DEFAULT_FORMATTER",M(t,"lambda",[],function(x,v){return null==x&&(x=w),null==v&&(v=w),x.$name()+"("+v.$sum()+") \uff1e "+v.$content()})),t.$attr_reader("name"),t.$attr_reader("num_of_dice"),t.$attr_reader("num_of_sides"),y(t,"$initialize",function q(x,v,C){var l,b=q.$$p||w,T=this,R=w;return q.$$p=null,T.name=x.$freeze(),T.formatter=L(l=b)?l:o("DEFAULT_FORMATTER"),R=o("DICE_ROLL_METHOD_RE").$match(v),L(R)||T.$raise(o("ArgumentError"),T.name+": invalid dice roll method: "+v),T.num_of_dice=R["$[]"](1).$to_i(),T.num_of_sides=R["$[]"](2).$to_i(),T.$store(C)}),y(t,"$fetch",function(x){var C,v=this;return C=M(v.items,"find",[],function(T){return null==T&&(T=w),T.$range()["$include?"](x)}),L(C)||v.$raise(o("RangeError"),v.name+": value is out of range: "+x),C}),y(t,"$roll",function(x){var b,v=this,C=w,T=w;return b=(C=x.$roll_barabara(v.num_of_dice,v.num_of_sides)).$sum(),(T=o("RollResult").$new(b,C,v.$fetch(b).$content()))["$formatted="](v.formatter["$[]"](v,T)),T}),t.$private(),y(t,"$store",function(x){var C,b,v=this;return C=M(x,"map",[],function T(l,R){return null==l&&(l=w),null==R&&(R=w),[(null==T.$$s?this:T.$$s).$coerce_to_int_range(l),R]},{$$s:v}),b=M(C,"sort_by",[],function(l,R){return null==l&&(l=w),null==R&&(R=w),l.$min()}),v.$assert_min_sum_is_covered(b),v.$assert_max_sum_is_covered(b),v.$assert_no_gap_or_overlap_in_ranges(b),v.items=M(b,"map",[],function(l,R){return null==l&&(l=w),null==R&&(R=w),o("Item").$new(l,R.$freeze()).$freeze()}).$freeze(),v}),y(t,"$coerce_to_int_range",function(x){var C;return g(o("Integer"),C=x)?o("Range").$new(x,x):g(o("Range"),C)&&L(x.$begin()["$is_a?"](o("Integer")))&&L(x.$end()["$is_a?"](o("Integer")))?x:this.$raise(o("TypeError"),this.name+": "+x+" ("+x.$class()+") must be an Integer or a Range with Integers ")}),y(t,"$assert_min_sum_is_covered",function(x){var C,v=this,b=w;return C=v.num_of_dice,b=x.$first()["$[]"](0),L(b["$include?"](C))||v.$raise(o("RangeError"),v.name+": min value ("+C+") is not covered: "+b),v}),y(t,"$assert_max_sum_is_covered",function(x){var C,v=this,b=w;return C=D(v.num_of_dice,v.num_of_sides),b=x.$last()["$[]"](0),L(b["$include?"](C))||v.$raise(o("RangeError"),v.name+": max value ("+C+") is not covered: "+b),v}),y(t,"$assert_no_gap_or_overlap_in_ranges",function(x){return M(x,"each_cons",[2],function C(b,T){var G,W,l=null==C.$$s?this:C.$$s,R=w,f=w;return null==l.name&&(l.name=w),null==b&&(b=w),null==T&&(T=w),R=b["$[]"](0),f=T["$[]"](0),G=R.$max(),W=z(G,1),L(f["$include?"](G))&&l.$raise(o("RangeError"),l.name+": Range overlap: "+R+" and "+f),L(f["$include?"](W))?w:l.$raise(o("RangeError"),l.name+": Range gap: "+R+" and "+f)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var w,I,d,o,H,q,x,E,X,J,j=e.module,N=e.klass,u=e.send,M=e.def,L=e.rb_minus,y=e.return_ivar,g=[],D=e.nil,z=e.$$$;return w=g,I=J=[j(g[0],"BCDice")].concat(w),d=X=[j(J[0],"DiceTable")].concat(I),o=E=[N(X[0],null,"SaiFicSkillTable")].concat(d),q=[H=N(E[0],null,"Category")].concat(o),x=e.$r(q),M(H,"$initialize",function(C,b,T,l){var R=this;return R.name=C,R.skills=u(b.$map(),"with_index",[2],function(G,W){return null==G&&(G=D),null==W&&(W=D),z(x("SaiFicSkillTable"),"Skill").$new(C,G,T,W,l)}),R.dice=T}),M(H,"$roll",function(C){return this.$skills()["$[]"](L(C.$roll_sum(2,6),2))}),M(H,"$to_s",y("name")),H.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var D,Y,X,E,t,s,F,B,j=e.module,N=e.klass,u=e.def,M=e.hash2,L=[],y=e.nil;return D=L,Y=B=[j(L[0],"BCDice")].concat(D),X=F=[j(B[0],"DiceTable")].concat(Y),s=[N(F[0],null,"SaiFicSkillTable")].concat(X),(t=(E=N(s[0],null,"Skill")).$$prototype).s_format=t.category_dice=t.row_dice=t.category_name=t.name=y,u(E,"$initialize",function(o,H,q,x,v){var C=this;return C.category_name=o,C.name=H,C.category_dice=q,C.row_dice=x,C.s_format=v}),u(E,"$to_s",function(){var o=this;return o.$format(o.s_format,M(["category_dice","row_dice","category_name","skill_name"],{category_dice:o.category_dice,row_dice:o.row_dice,category_name:o.category_name,skill_name:o.name}))}),E.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var s,t,x,v,C,b,T,o,i,j=e.module,N=e.klass,u=e.ensure_kwargs,M=e.hash2,L=e.send,g=e.defs,D=e.const_set,z=e.to_ary,B=e.def,w=e.truthy,Y=e.rb_minus,J=e.rb_plus,F=e.top,I=[],S=e.nil,X=e.$$$;return F.$require("bcdice/dice_table/sai_fic_skill_table/category"),F.$require("bcdice/dice_table/sai_fic_skill_table/skill"),s=I,t=i=[j(I[0],"BCDice")].concat(s),x=o=[j(i[0],"DiceTable")].concat(t),C=[v=N(o[0],null,"SaiFicSkillTable")].concat(x),b=e.$r(C),(T=v.$$prototype).rtt=T.rtt_format=T.rct=T.rct_format=T.rttn=T.rttn_format=T.categories=S,g(v,"$from_i18n",function(R,f,G){var W,_,$,n,c=S;return null==(W=(G=u(G)).$$smap.rtt)&&(W=S),null==(_=G.$$smap.rct)&&(_=S),null==($=G.$$smap.rttn)&&($=S),n=(c=b("I18n").$t("RTT",M(["locale","raise","default"],{locale:f,raise:!1,default:M([],{})})).$merge(b("I18n").$t(R,M(["locale","raise"],{locale:f,raise:!0}))))["$[]"]("items"),c=L(c,"select",[],function(A,k){return null==A&&(A=S),null==k&&(k=S),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](A)}),this.$new(n,e.to_hash(c).$merge(M(["rtt","rct","rttn"],{rtt:W,rct:_,rttn:$})))},-3),D(C[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),D(C[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),D(C[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),D(C[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),B(v,"$initialize",function(R,f){var G,W,_,$,h,a,c,n=this;return null==(G=(f=u(f)).$$smap.rtt)&&(G=S),null==(W=f.$$smap.rct)&&(W=S),null==(_=f.$$smap.rttn)&&(_=S),null==($=f.$$smap.rtt_format)&&($=b("DEFAULT_RTT")),null==(h=f.$$smap.rct_format)&&(h=b("DEFAULT_RCT")),null==(a=f.$$smap.rttn_format)&&(a=b("DEFAULT_RTTN")),null==(c=f.$$smap.s_format)&&(c=b("DEFAULT_S")),n.categories=L(R.$map(),"with_index",[1],function(A,k){var U,ee,K;return null==A&&(A=S),null==k&&(k=S),ee=null==(U=z(A))[0]?S:U[0],K=null==U[1]?S:U[1],X(b("SaiFicSkillTable"),"Category").$new(ee,K,k,c)},{$$has_top_level_mlhs_arg:!0}),n.rtt=G,n.rct=W,n.rttn=_.$to_a(),n.rtt_format=$,n.rct_format=h,n.rttn_format=a},-2),D(C[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),v.$attr_reader("categories"),B(v,"$roll_command",function(R,f){var W,G=this,_=S,$=S;return w(["RTT",G.rtt]["$include?"](W=f))?G.$format_skill(G.rtt_format,G.$roll_skill(R)):w(["RCT",G.rct]["$include?"](W))?(_=G.$roll_category(R),G.$format(G.rct_format,M(["category_dice","category_name"],{category_dice:_.$dice(),category_name:_.$name()}))):w($=b("RTTN").$index(W))||w($=G.rttn.$index(W))?G.$format_skill(G.rttn_format,G.categories["$[]"]($).$roll(R)):S}),B(v,"$roll_category",function(R){return this.categories["$[]"](Y(R.$roll_once(6),1))}),B(v,"$roll_skill",function(R){return this.$roll_category(R).$roll(R)}),B(v,"$prefixes",function(){var R=this;return J(["RTT[1-6]?","RCT",R.rtt,R.rct],R.rttn).$compact()}),v.$private(),B(v,"$format_skill",function(R,f){return this.$format(R,M(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:f.$category_dice(),row_dice:f.$row_dice(),category_name:f.$category_name(),skill_name:f.$name(),text:f.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var w,I,d,i,E,t,r,X,J,j=e.module,N=e.klass,u=e.hash2,M=e.defs,L=e.truthy,y=e.def,g=e.rb_minus,D=[],z=e.nil;return w=D,I=J=[j(D[0],"BCDice")].concat(w),d=X=[j(J[0],"DiceTable")].concat(I),E=[i=N(X[0],null,"Table")].concat(d),t=e.$r(E),(r=i.$$prototype).times=r.sides=r.name=r.items=z,M(i,"$from_i18n",function(H,q){var v=z;return v=t("I18n").$t(H,u(["locale"],{locale:q})),this.$new(v["$[]"]("name"),v["$[]"]("type"),v["$[]"]("items"))}),y(i,"$initialize",function(H,q,x){var v=this,C=z;return v.name=H,v.items=x.$freeze(),C=/(\d+)D(\d+)/i.$match(q),L(C)||v.$raise(t("ArgumentError"),"Unexpected table type: "+q),v.times=C["$[]"](1).$to_i(),v.sides=C["$[]"](2).$to_i()}),y(i,"$roll",function(H){var x,q=this;return x=H.$roll_sum(q.times,q.sides),q.$choice(x)}),y(i,"$choice",function(H){var x,q=this;return x=g(H,q.times),t("RollResult").$new(q.name,H,q.items["$[]"](x))})},Opal.modules["bcdice/dice_table"]=function(e){var j=e.top;return j.$require("bcdice/dice_table/roll_result"),j.$require("bcdice/dice_table/chain_table"),j.$require("bcdice/dice_table/d66_grid_table"),j.$require("bcdice/dice_table/d66_half_grid_table"),j.$require("bcdice/dice_table/d66_one_third_table"),j.$require("bcdice/dice_table/d66_left_range_table"),j.$require("bcdice/dice_table/d66_parity_table"),j.$require("bcdice/dice_table/d66_range_table"),j.$require("bcdice/dice_table/d66_table"),j.$require("bcdice/dice_table/range_table"),j.$require("bcdice/dice_table/sai_fic_skill_table"),j.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var y,B,Y,D,j=e.module,N=e.const_set,u=[];return y=u,B=D=[j(u[0],"BCDice")].concat(y),Y=[j(D[0],"D66SortType")].concat(B),N(Y[0],"NO_SORT","no_sort"),N(Y[0],"ASC","asc"),N(Y[0],"DESC","desc"),function(z,B){var Y=[j(z,"RoundType")].concat(B);return N(Y[0],"CEIL","ceil"),N(Y[0],"FLOOR","floor"),N(Y[0],"ROUND","round")}(D[0],D)},Opal.modules["bcdice/translate"]=function(e){var B,F,I,S,X,Y,j=e.module,N=e.ensure_kwargs,u=e.kwrestargs,L=e.hash2,y=e.def,g=[],D=e.nil;return B=g,F=Y=[j(g[0],"BCDice")].concat(B),S=[I=j(Y[0],"Translate")].concat(F),X=e.$r(S),y(I,"$translate",function(s,d){var i,E=this;return null==E.locale&&(E.locale=D),d=N(d),i=u(d,{}),X("I18n").$translate(s,L(["locale","raise"],{locale:E.locale,raise:!0}).$merge(e.to_hash(i)))},-2)},Opal.modules["bcdice/result"]=function(e){var I,Q,S,B,Y,N=e.klass,u=e.send,M=e.def,L=e.return_val,y=e.return_ivar,g=[],D=e.nil;return B=g,I=Y=[(0,e.module)(g[0],"BCDice")].concat(B),[S=N(Y[0],null,"Result")].concat(I),M(Q=e.get_singleton_class(S),"$success",function(i){return u(this.$new(),"tap",[],function(r){var o;return null==r&&(r=D),r["$text="](i),u(r,"success=",o=[!0]),o[o.length-1]})}),M(Q,"$failure",function(i){return u(this.$new(),"tap",[],function(r){var o;return null==r&&(r=D),r["$text="](i),u(r,"failure=",o=[!0]),o[o.length-1]})}),M(Q,"$critical",function(i){return u(this.$new(),"tap",[],function(r){var o;return null==r&&(r=D),r["$text="](i),r["$critical="](!0),u(r,"success=",o=[!0]),o[o.length-1]})}),M(Q,"$fumble",function(i){return u(this.$new(),"tap",[],function(r){var o;return null==r&&(r=D),r["$text="](i),r["$fumble="](!0),u(r,"failure=",o=[!0]),o[o.length-1]})}),M(Q,"$nothing",L("nothing")),M(S,"$initialize",function(s){var d=this;return null==s&&(s=D),d.text=s,d.rands=D,d.detailed_rands=D,d.secret=!1,d.success=!1,d.failure=!1,d.critical=!1,d.fumble=!1},-1),S.$attr_accessor("text","rands","detailed_rands"),S.$attr_writer("secret","success","failure","critical","fumble"),M(S,"$secret?",y("secret")),M(S,"$success?",y("success")),M(S,"$failure?",y("failure")),M(S,"$critical?",y("critical")),M(S,"$fumble?",y("fumble")),M(S,"$condition=",function(s){return this.success=s,this.failure=s["$!"]()})},Opal.modules["racc/parser"]=function(e){var H,x,v,j=e.module,N=e.klass,u=e.truthy,M=e.const_set,L=e.defs,y=e.gvars,g=e.rb_lt,D=e.def,z=e.to_ary,B=e.send,w=e.neqeq,Y=e.rb_plus,J=e.eqeq,F=e.rb_ge,I=e.rb_gt,S=e.rb_minus,X=e.rb_le,Q=e.rb_times,s=e.assign_ivar_val,i=[],E=e.$r(i),t=e.nil,r=e.$$$;return H=i,x=[j(i[0],"Racc")].concat(H),v=e.$r(x),N(x[0],v("StandardError"),"ParseError"),u(r("::","ParseError","skip_raise")?"constant":t)||M(i[0],"ParseError",r(E("Racc"),"ParseError")),function(o,H){var l,R,f,G,W,v=[j(o,"Racc")].concat(H),C=e.$r(v);return u(C("Racc_No_Extensions","skip_raise")?"constant":t)||M(v[0],"Racc_No_Extensions",!1),l=v,f=[R=N(v[0],null,"Parser")].concat(l),G=e.$r(f),(W=R.$$prototype).yydebug=W.racc_debug_out=W.racc_error_status=W.racc_t=W.racc_vstack=W.racc_val=W.racc_state=W.racc_tstack=t,M(f[0],"Racc_Runtime_Version","1.4.6"),M(f[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),M(f[0],"Racc_Runtime_Core_Version_R","1.4.6"),M(f[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),M(f[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),M(f[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),M(f[0],"Racc_Runtime_Core_Version",G("Racc_Runtime_Core_Version_R")),M(f[0],"Racc_Runtime_Core_Revision",G("Racc_Runtime_Core_Revision_R")),M(f[0],"Racc_Runtime_Type","ruby"),L(G("Parser"),"$racc_runtime_type",function(){return G("Racc_Runtime_Type")}),D(R,"$_racc_setup",function(){var $,h,a=this,c=t,n=t;return null==y.stderr&&(y.stderr=t),u(r(a.$class(),"Racc_debug_parser"))||(a.yydebug=!1),u(null!=($=a.yydebug)&&$!==t?"instance-variable":t)||(a.yydebug=!1),u(a.yydebug)&&(u(null!=(h=a.racc_debug_out)&&h!==t?"instance-variable":t)||(a.racc_debug_out=y.stderr),a.racc_debug_out=u(c=a.racc_debug_out)?c:y.stderr),n=r(a.$class(),"Racc_arg"),u(g(n.$size(),14))&&n["$[]="](13,!0),n}),D(R,"$_racc_init_sysvars",function(){var $=this;return $.racc_state=[0],$.racc_tstack=[],$.racc_vstack=[],$.racc_t=t,$.racc_val=t,$.racc_read_next=!0,$.racc_user_yyerror=!1,$.racc_error_status=0}),D(R,"$do_parse",function(){return this.$__send__(G("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),D(R,"$next_token",function(){return this.$raise(G("NotImplementedError"),this.$class()+"#next_token is not defined")}),D(R,"$_racc_do_parse_rb",function($,h){var a,n=this,p=t,A=t,k=t,U=t,ee=t,K=t,O=t,te=t;return a=z($),p=null==a[0]?t:a[0],A=null==a[1]?t:a[1],k=null==a[2]?t:a[2],U=null==a[3]?t:a[3],ee=null==a[10]?t:a[10],n.$_racc_init_sysvars(),K=O=te=t,B(n,"catch",["racc_end_parse"],function ne(){var ie,V,m=null==ne.$$s?this:ne.$$s,re=t;for(null==m.racc_state&&(m.racc_state=t),null==m.racc_read_next&&(m.racc_read_next=t),null==m.racc_t&&(m.racc_t=t),null==m.yydebug&&(m.yydebug=t),null==m.racc_val&&(m.racc_val=t);u(!0);)for(u(te=U["$[]"](m.racc_state["$[]"](-1)))?(u(m.racc_read_next)&&w(m.racc_t,0)&&(V=m.$next_token(),ie=z(V),K=null==ie[0]?t:ie[0],m.racc_val=null==ie[1]?t:ie[1],m.racc_t=u(K)?u(re=ee["$[]"](K))?re:1:0,u(m.yydebug)&&m.$racc_read_token(m.racc_t,K,m.racc_val),m.racc_read_next=!1),te=Y(te,m.racc_t),u(F(te,0))&&u(O=p["$[]"](te))&&J(A["$[]"](te),m.racc_state["$[]"](-1))||(O=k["$[]"](m.racc_state["$[]"](-1)))):O=k["$[]"](m.racc_state["$[]"](-1));u(O=m.$_racc_evalact(O,$)););},{$$s:n})}),D(R,"$yyparse",function($,h){return this.$__send__(G("Racc_YY_Parse_Method"),$,h,this.$_racc_setup(),!0)}),D(R,"$_racc_yyparse_rb",function($,h,a,c){var n,A=this,k=t,U=t,Z=t,ee=t,O=t,te=t,ne=t;return n=z(a),k=null==n[0]?t:n[0],U=null==n[1]?t:n[1],Z=null==n[2]?t:n[2],ee=null==n[3]?t:n[3],O=null==n[10]?t:n[10],A.$_racc_init_sysvars(),te=t,ne=t,B(A,"catch",["racc_end_parse"],function ie(){var V=null==ie.$$s?this:ie.$$s;for(null==V.racc_state&&(V.racc_state=t);!u(ne=ee["$[]"](V.racc_state["$[]"](-1)));)for(;u(te=V.$_racc_evalact(Z["$[]"](V.racc_state["$[]"](-1)),a)););return B($,"__send__",[h],function m(re,$e){var P=null==m.$$s?this:m.$$s,se=t,ce=t;for(null==P.racc_t&&(P.racc_t=t),null==P.racc_state&&(P.racc_state=t),null==P.racc_read_next&&(P.racc_read_next=t),null==re&&(re=t),null==$e&&($e=t),P.racc_t=u(re)?u(se=O["$[]"](re))?se:1:0,P.racc_val=$e,P.racc_read_next=!1,ne=Y(ne,P.racc_t),u(F(ne,0))&&u(te=k["$[]"](ne))&&J(U["$[]"](ne),P.racc_state["$[]"](-1))||(te=Z["$[]"](P.racc_state["$[]"](-1)));u(te=P.$_racc_evalact(te,a)););for(;u(u(se=u(ce=(ne=ee["$[]"](P.racc_state["$[]"](-1)))["$!"]())?ce:P.racc_read_next["$!"]())?se:P.racc_t["$=="](0));)for(u(ne)&&u(ne=Y(ne,P.racc_t))&&u(F(ne,0))&&u(te=k["$[]"](ne))&&J(U["$[]"](ne),P.racc_state["$[]"](-1))||(te=Z["$[]"](P.racc_state["$[]"](-1)));u(te=P.$_racc_evalact(te,a)););},{$$s:V})},{$$s:A})}),D(R,"$_racc_evalact",function($,h){var a,Z,n=this,p=t,A=t,U=t,ee=t,K=t,O=t;if(p=null==(a=z(h))[0]?t:a[0],A=null==a[1]?t:a[1],U=null==a[3]?t:a[3],Z=null==a[11]?t:a[11],ee=null==a[12]?t:a[12],u(I($,0))&&u(g($,Z)))u(I(n.racc_error_status,0))&&(J(n.racc_t,1)||(n.racc_error_status=S(n.racc_error_status,1))),n.racc_vstack.$push(n.racc_val),n.racc_state.$push($),n.racc_read_next=!0,u(n.yydebug)&&(n.racc_tstack.$push(n.racc_t),n.$racc_shift(n.racc_t,n.racc_tstack,n.racc_vstack));else if(u(g($,0))&&u(I($,ee["$-@"]()))){if(K=B(n,"catch",["racc_jump"],function te(){var ne=null==te.$$s?this:te.$$s;return null==ne.racc_state&&(ne.racc_state=t),ne.racc_state.$push(ne.$_racc_do_reduce(h,$)),!1},{$$s:n}),u(K))switch(K.valueOf()){case 1:return n.racc_user_yyerror=!0,ee["$-@"]();case 2:return Z;default:n.$raise("[Racc Bug] unknown jump code")}}else if(J($,Z))u(n.yydebug)&&n.$racc_accept(),n.$throw("racc_end_parse",n.racc_vstack["$[]"](0));else{if(J($,ee["$-@"]())){switch(n.racc_error_status.valueOf()){case 0:u(h["$[]"](21))||n.$on_error(n.racc_t,n.racc_val,n.racc_vstack);break;case 3:J(n.racc_t,0)&&n.$throw("racc_end_parse",t),n.racc_read_next=!0}for(n.racc_user_yyerror=!1,n.racc_error_status=3;u(!0)&&!(u(O=U["$[]"](n.racc_state["$[]"](-1)))&&(O=Y(O,1),u(F(O,0))&&u($=p["$[]"](O))&&J(A["$[]"](O),n.racc_state["$[]"](-1))));)u(X(n.racc_state.$size(),1))&&n.$throw("racc_end_parse",t),n.racc_state.$pop(),n.racc_vstack.$pop(),u(n.yydebug)&&(n.racc_tstack.$pop(),n.$racc_e_pop(n.racc_state,n.racc_tstack,n.racc_vstack));return $}n.$raise("[Racc Bug] unknown action "+$.$inspect())}return u(n.yydebug)&&n.$racc_next_state(n.racc_state["$[]"](-1),n.racc_state),t}),D(R,"$_racc_do_reduce",function($,h){var a,ee,O,re,$e,P,ue,n=this,A=t,k=t,U=t,Z=t,K=t,te=t,ne=t,ie=t,V=t,m=t,se=t,ce=t,ae=t;return A=null==(a=z($))[4]?t:a[4],k=null==a[5]?t:a[5],U=null==a[6]?t:a[6],Z=null==a[7]?t:a[7],ee=null==a[8]?t:a[8],K=null==a[9]?t:a[9],O=null==a[13]?t:a[13],te=n.racc_state,ne=n.racc_vstack,ie=n.racc_tstack,V=Q(h,-3),m=K["$[]"](V),re=K["$[]"](Y(V,1)),$e=K["$[]"](Y(V,2)),P=[],u(n.yydebug)&&(se=ie["$[]"](m["$-@"](),m)),ce=ne["$[]"](m["$-@"](),m),u(n.yydebug)&&ie["$[]="](m["$-@"](),m,P),ne["$[]="](m["$-@"](),m,P),te["$[]="](m["$-@"](),m,P),u(O)?ne.$push(n.$__send__($e,ce,ne,ce["$[]"](0))):ne.$push(n.$__send__($e,ce,ne)),ie.$push(re),u(n.yydebug)&&n.$racc_reduce(se,re,ie,ne),ue=S(re,ee),u(V=Z["$[]"](ue))&&(V=Y(V,te["$[]"](-1)),u(F(V,0))&&u(ae=A["$[]"](V))&&J(k["$[]"](V),ue))?ae:U["$[]"](ue)}),D(R,"$on_error",function($,h,a){var n,c=this;return c.$raise(G("ParseError"),c.$sprintf("\nparse error on value %s (%s)",h.$inspect(),u(n=c.$token_to_str($))?n:"?"))}),D(R,"$yyerror",function(){return this.$throw("racc_jump",1)}),D(R,"$yyaccept",function(){return this.$throw("racc_jump",2)}),D(R,"$yyerrok",s("racc_error_status",0)),D(R,"$racc_read_token",function($,h,a){var c=this;return c.racc_debug_out.$print("read    "),c.racc_debug_out.$print(h.$inspect(),"(",c.$racc_token2str($),") "),c.racc_debug_out.$puts(a.$inspect()),c.racc_debug_out.$puts()}),D(R,"$racc_shift",function($,h,a){var c=this;return c.racc_debug_out.$puts("shift   "+c.$racc_token2str($)),c.$racc_print_stacks(h,a),c.racc_debug_out.$puts()}),D(R,"$racc_reduce",function($,h,a,c){var n=this,p=t;return(p=n.racc_debug_out).$print("reduce "),u($["$empty?"]())?p.$print(" <none>"):B($,"each",[],function A(k){return null==k&&(k=t),p.$print(" ",(null==A.$$s?this:A.$$s).$racc_token2str(k))},{$$s:n}),p.$puts(" --\x3e "+n.$racc_token2str(h)),n.$racc_print_stacks(a,c),n.racc_debug_out.$puts()}),D(R,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),D(R,"$racc_e_pop",function($,h,a){var c=this;return c.racc_debug_out.$puts("error recovering mode: pop token"),c.$racc_print_states($),c.$racc_print_stacks(h,a),c.racc_debug_out.$puts()}),D(R,"$racc_next_state",function($,h){var a=this;return a.racc_debug_out.$puts("goto    "+$),a.$racc_print_states(h),a.racc_debug_out.$puts()}),D(R,"$racc_print_stacks",function($,h){var c=t;return(c=this.racc_debug_out).$print("        ["),B($,"each_index",[],function n(p){return null==p&&(p=t),c.$print(" (",(null==n.$$s?this:n.$$s).$racc_token2str($["$[]"](p))," ",h["$[]"](p).$inspect(),")")},{$$s:this}),c.$puts(" ]")}),D(R,"$racc_print_states",function($){var a=t;return(a=this.racc_debug_out).$print("        ["),B($,"each",[],function(n){return null==n&&(n=t),a.$print(" ",n)}),a.$puts(" ]")}),D(R,"$racc_token2str",function($){var a;return u(a=r(this.$class(),"Racc_token_to_s_table")["$[]"]($))?a:this.$raise("[Racc Bug] can't convert token "+$+" to string")}),D(R,"$token_to_str",function($){return r(this.$class(),"Racc_token_to_s_table")["$[]"]($)})}(i[0],i)},Opal.modules["bcdice/arithmetic/node"]=function(e){var s,t,q,l,R,v,C,o,i,j=e.module,N=e.klass,u=e.def,M=e.thrower,L=e.return_ivar,y=e.send2,g=e.find_super,D=e.eqeq,z=e.const_set,B=e.eqeqeq,w=e.rb_divide,Y=e.truthy,J=e.assign_ivar,F=e.alias,I=[],S=e.nil,X=e.$$$;return s=I,t=i=[j(I[0],"BCDice")].concat(s),q=o=[j(i[0],"Arithmetic")].concat(t),v=[j(o[0],"Node")].concat(q),C=e.$r(v),(R=(l=N(v[0],null,"BinaryOp")).$$prototype).lhs=R.rhs=R.op=S,u(l,"$initialize",function(G,W,_){var $=this;return $.lhs=G,$.op=W,$.rhs=_}),u(l,"$eval",function(G){try{M("eval_return");var h,_=this,$=S;return $=_.lhs.$eval(G),h=_.rhs.$eval(G),$.$send(_.op,h)}catch(a){if(a===e.t_eval_return)return a.$v;throw a}}),u(l,"$output",function(){var G=this;return""+G.lhs.$output()+G.op+G.rhs.$output()}),u(l,"$s_exp",function(){var G=this;return"("+G.$op_for_s_exp()+" "+G.lhs.$s_exp()+" "+G.rhs.$s_exp()+")"}),u(l,"$op_for_s_exp",L("op")),function(b,T,l){var R=N(b,T,"DivideBase"),f=[R].concat(l),G=e.$r(f),W=R.$$prototype;W.lhs=W.rhs=W.op=S,u(R,"$initialize",function _($,h){return _.$$p=null,y(this,g(this,"initialize",_,!1,!0),"initialize",[$,"/",h],null)}),u(R,"$eval",function($){try{M("eval_return");var c,n,a=this;return c=a.lhs.$eval($),n=a.rhs.$eval($),D(n,0)&&a.$raise(G("ZeroDivisionError")),a.$divide_and_round(c,n,$)}catch(p){if(p===e.t_eval_return)return p.$v;throw p}}),u(R,"$output",function _(){var $=_.$$p||S,h=this;return _.$$p=null,""+y(h,g(h,"output",_,!1,!0),"output",[],$)+h.$rounding_method()}),R.$private(),u(R,"$rounding_method",function(){return X(this.$class(),"ROUNDING_METHOD")}),u(R,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),u(R,"$divide_and_round",function($,h,a){return this.$raise(G("NotImplementedError"))})}(v[0],C("BinaryOp"),v),function(b,T,l){var R=N(b,T,"DivideWithGameSystemDefault"),f=[R].concat(l),G=e.$r(f);z(f[0],"ROUNDING_METHOD",""),R.$private(),u(R,"$divide_and_round",function(_,$,h){var a,c=S;return B(X(G("RoundType"),"CEIL"),a=h)?w(_.$to_f(),$).$ceil():B(X(G("RoundType"),"ROUND"),a)?(c=w(_.$to_f(),$),Y(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()):w(_,$).$floor()})}(v[0],C("DivideBase"),v),function(b,T,l){var R=N(b,T,"DivideWithCeil"),f=[R].concat(l);z(f[0],"ROUNDING_METHOD","C"),R.$private(),u(R,"$divide_and_round",function(W,_,$){return w(W.$to_f(),_).$ceil()})}(v[0],C("DivideBase"),v),function(b,T,l){var R=N(b,T,"DivideWithRound"),f=[R].concat(l);z(f[0],"ROUNDING_METHOD","R"),R.$private(),u(R,"$divide_and_round",function(W,_,$){var h=S;return h=w(W.$to_f(),_),Y(h["$negative?"]())?h.$abs().$round()["$-@"]():h.$round()})}(v[0],C("DivideBase"),v),function(b,T,l){var R=N(b,T,"DivideWithFloor"),f=[R].concat(l);z(f[0],"ROUNDING_METHOD","F"),R.$private(),u(R,"$divide_and_round",function(W,_,$){return w(W,_).$floor()})}(v[0],C("DivideBase"),v),function(b,T){var l=N(b,null,"Negative");l.$$prototype.body=S,u(l,"$initialize",J("body")),u(l,"$eval",function(G){try{return M("eval_return"),this.body.$eval(G)["$-@"]()}catch($){if($===e.t_eval_return)return $.$v;throw $}}),u(l,"$output",function(){return"-"+this.body.$output()}),u(l,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(v[0]),function(b,T){var l=N(b,null,"Parenthesis");l.$$prototype.expr=S,u(l,"$initialize",J("expr")),u(l,"$eval",function(G){try{return M("eval_return"),this.expr.$eval(G)}catch($){if($===e.t_eval_return)return $.$v;throw $}}),u(l,"$output",function(){return"("+this.expr.$output()+")"}),u(l,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(v[0]),function(b,T){var l=N(b,null,"Number");return l.$$prototype.value=S,u(l,"$initialize",J("value")),u(l,"$eval",L("value")),u(l,"$output",function(){return this.value.$to_s()}),F(l,"s_exp","output")}(v[0])},Opal.modules.strscan=function(e){var J,F,I,S,X,N=e.def,u=e.truthy,M=e.eqeqeq,L=e.Opal,y=e.return_ivar,g=e.send,D=e.alias,z=[],B=e.nil;return J=z,I=[F=(0,e.klass)(z[0],null,"StringScanner")].concat(J),S=e.$r(I),(X=F.$$prototype).pos=X.string=X.working=X.matched=X.prev_pos=X.match=B,F.$attr_reader("pos","matched"),N(F,"$initialize",function(s){var d=this;return d.string=s,d.pos=0,d.matched=B,d.working=s,d.match=[]}),F.$attr_reader("string"),N(F,"$beginning_of_line?",function(){var s=this;return 0===s.pos||"\n"===s.string.charAt(s.pos-1)}),N(F,"$scan",function(s){var d=this,i=(s=d.$anchor(s)).exec(d.working);return null==i?d.matched=B:(d.prev_pos=d.pos,d.pos+=i[0].length,d.working=d.working.substring(i[0].length),d.matched=i[0],d.match=i,i[0])}),N(F,"$scan_until",function(s){var d=this;s=d.$anchor(s);for(var i=d.working,E=0;i.length!=E;++E){var t=s.exec(i.substr(E));if(null!==t){var r=E+t[0].length,o=i.substr(0,r);return d.matched=t[0],d.match=t,d.prev_pos=d.pos+E,d.pos+=r,d.working=i.substr(r),o}}return d.matched=B}),N(F,"$[]",function(s){var i;if(u(this.match["$empty?"]()))return B;M(S("Symbol"),i=s)?s=s.$to_s():M(S("String"),i)||(s=L["$coerce_to!"](s,S("Integer"),"to_int"));var E=this.match;return s<0&&(s+=E.length),s<0||s>=E.length||null==E[s]?B:E[s]}),N(F,"$check",function(s){var d=this,i=(s=d.$anchor(s)).exec(d.working);return d.matched=null==i?B:i[0]}),N(F,"$check_until",function(s){var d=this,i=d.prev_pos,E=d.pos,t=d.working,r=d.$scan_until(s);return d.prev_pos=i,d.pos=E,d.working=t,r}),N(F,"$peek",function(s){return this.working.substring(0,s)}),N(F,"$eos?",function(){return 0===this.working.length}),N(F,"$exist?",function(s){var i=s.exec(this.working);return null==i?B:0==i.index?0:i.index+1}),N(F,"$skip",function(s){var d=this,i=(s=d.$anchor(s)).exec(d.working);if(null==i)return d.match=[],d.matched=B;var E=i[0],t=E.length;return d.matched=E,d.match=i,d.prev_pos=d.pos,d.pos+=t,d.working=d.working.substring(t),t}),N(F,"$skip_until",function(s){var i=this.$scan_until(s);return i===B?B:(this.matched=i.substr(-1),i.length)}),N(F,"$get_byte",function(){var s=this,d=B;return s.pos<s.string.length?(s.prev_pos=s.pos,s.pos+=1,d=s.matched=s.working.substring(0,1),s.working=s.working.substring(1)):s.matched=B,d}),N(F,"$match?",function(s){var d=this,i=(s=d.$anchor(s)).exec(d.working);return null==i?B:(d.prev_pos=d.pos,i[0].length)}),N(F,"$pos=",function(s){var d=this;return s<0&&(s+=d.string.$length()),d.pos=s,d.working=d.string.slice(s)}),N(F,"$matched_size",function(){return this.matched===B?B:this.matched.length}),N(F,"$post_match",function(){var s=this;return s.matched===B?B:s.string.substr(s.pos)}),N(F,"$pre_match",function(){var s=this;return s.matched===B?B:s.string.substr(0,s.prev_pos)}),N(F,"$reset",function(){var s=this;return s.working=s.string,s.matched=B,s.pos=0}),N(F,"$rest",y("working")),N(F,"$rest?",function(){return 0!==this.working.length}),N(F,"$rest_size",function(){return this.$rest().$size()}),N(F,"$terminate",function(){var s,d=this;return d.match=B,s=[d.string.$length()],g(d,"pos=",s),s[s.length-1]}),N(F,"$unscan",function(){var s=this;return s.pos=s.prev_pos,s.prev_pos=B,s.match=B,s}),D(F,"bol?","beginning_of_line?"),D(F,"getch","get_byte"),F.$private(),N(F,"$anchor",function(s){var d=s.toString().match(/\/([^\/]+)$/);return d=d?d[1]:void 0,new RegExp("^(?:"+s.source+")",d)})},Opal.modules["bcdice/normalize"]=function(e){var D,Y,B,j=e.module,N=e.eqeqeq,u=e.def,M=e.eqeq,L=[],y=e.nil;return D=L,B=[j(L[0],"BCDice")].concat(D),(Y=j(B[0],"Normalize")).$module_function(),u(Y,"$comparison_operator",function(F){var I;return N(/<=|=</,I=F)?"<=":N(/>=|=>/,I)?">=":N(/<>|!=|=!/,I)?"!=":N(/</,I)?"<":N(/>/,I)?">":N(/=/,I)?"==":y}),u(Y,"$target_number",function(F){return M(F,"?")?F:F.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var J,X,E,t,r,o,H,s,I,j=e.module,N=e.klass,u=e.const_set,M=e.hash2,L=e.truthy,y=e.send,g=e.def,D=e.thrower,z=e.top,B=[],w=e.nil;return z.$require("strscan"),z.$require("bcdice/normalize"),J=B,X=I=[j(B[0],"BCDice")].concat(J),E=s=[j(I[0],"Command")].concat(X),r=[t=N(s[0],null,"Lexer")].concat(E),o=e.$r(r),(H=t.$$prototype).scanner=H.notations=w,u(r[0],"SYMBOLS",M(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),g(t,"$initialize",function(x,v){var C,b,l;return x=L(l=(C=(b=x)===w||null==b?w:b.$split(" ",2))===w||null==C?w:C.$first())?l:"",this.scanner=o("StringScanner").$new(x),this.notations=y(v,"map",[],function(f){return null==f&&(f=w),L(f["$is_a?"](o("String")))?o("Regexp").$new(f):f})}),g(t,"$next_token",function(){try{var x=D("return"),v=this,C=w,b=w,l=w,R=w;return L(v.scanner["$eos?"]())?[!1,"$"]:(y(v.notations,"each",[],function f(G){var _,W=null==f.$$s?this:f.$$s;if(null==W.scanner&&(W.scanner=w),null==G&&(G=w),_=W.scanner.$scan(G),!L(_))return w;x.$throw(["NOTATION",_])},{$$s:v,$$ret:x}),L(C=v.scanner.$scan(/\d+/))?["NUMBER",C.$to_i()]:L(b=v.scanner.$scan(/[<>!=]+/))?(b=o("Normalize").$comparison_operator(b),[L(b)?"CMP_OP":"ILLEGAL",b]):(l=v.scanner.$getch().$upcase(),[L(R=o("SYMBOLS")["$[]"](l))?R:l.$to_sym(),l]))}catch(f){if(f===x)return f.$v;throw f}}),g(t,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var z,J,Q,s,d,i,E,I,w,j=e.module,N=e.klass,u=e.def,M=e.return_ivar,L=e.truthy,y=[],g=e.nil;return z=y,J=w=[j(y[0],"BCDice")].concat(z),Q=I=[j(w[0],"Command")].concat(J),d=[s=N(I[0],null,"Parsed")].concat(Q),i=e.$r(d),(E=s.$$prototype).critical=E.fumble=E.dollar=E.modify_number=E.question_target=E.target_number=E.prefix_number=E.command=E.suffix_number=E.cmp_op=g,s.$attr_accessor("command"),s.$attr_accessor("prefix_number"),s.$attr_accessor("suffix_number"),s.$attr_accessor("critical"),s.$attr_accessor("fumble"),s.$attr_accessor("dollar"),s.$attr_accessor("modify_number"),s.$attr_accessor("cmp_op"),s.$attr_accessor("target_number"),s.$attr_writer("question_target"),u(s,"$initialize",function(){var r=this;return r.prefix_number=g,r.suffix_number=g,r.critical=g,r.fumble=g,r.dollar=g,r.cmp_op=g,r.target_number=g,r.question_target=!1}),u(s,"$question_target?",M("question_target")),u(s,"$to_s",function(r){var o=this,H=g,q=g,x=g,v=g,C=g;switch(null==r&&(r="after_command"),H=L(o.critical)?"@"+o.critical:g,q=L(o.fumble)?"#"+o.fumble:g,x=L(o.dollar)?"$"+o.dollar:g,v=i("Format").$modifier(o.modify_number),C=L(o.question_target)?"?":o.target_number,r.valueOf()){case"after_command":return[o.prefix_number,o.command,o.suffix_number,H,q,x,v,o.cmp_op,C].$join();case"after_modify_number":return[o.prefix_number,o.command,o.suffix_number,v,H,q,x,o.cmp_op,C].$join();case"after_target_number":return[o.prefix_number,o.command,o.suffix_number,v,o.cmp_op,C,H,q,x].$join();default:return g}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var r,x,R,h,a,c,n,p,A,k,U,Z,O,f,_,$,ie,C,b,H,j=e.klass,N=e.module,u=e.slice,M=e.extract_kwargs,L=e.ensure_kwargs,y=e.get_kwarg,g=e.send2,D=e.find_super,z=e.def,B=e.send,w=e.eqeq,Y=e.thrower,J=e.hash,F=e.const_set,I=e.truthy,S=e.to_ary,X=e.hash2,Q=e.top,s=[],d=e.$r(s),i=e.nil,E=e.$$$;return Q.$require("racc/parser.rb"),Q.$require("bcdice/arithmetic/node"),Q.$require("bcdice/command/lexer"),Q.$require("bcdice/command/parsed"),j(E(d("BCDice"),"Command"),E(d("Racc"),"Parser"),"Parser"),r=s,x=H=[N(s[0],"BCDice")].concat(r),C=[N(H[0],"Command")].concat(x),b=e.$r(C),R=C,_=[f=j(C[0],E(b("Racc"),"Parser"),"Parser")].concat(R),$=e.$r(_),(ie=f.$$prototype).notations=ie.lexer=ie.modifier=ie.suffix_number=ie.prefix_number=ie.need_suffix_number=ie.need_prefix_number=ie.critical=ie.fumble=ie.dollar=ie.allowed_cmp_op=ie.question_target=i,z(f,"$initialize",function V(m,re){var $e,P,se,ce,ae=this;return V.$$p=null,$e=u(arguments),P=M($e),P=L(P),se=$e,ce=y(P,"round_type"),g(ae,D(ae,"initialize",V,!1,!0),"initialize",[],null),ae.notations=se,ae.round_type=ce,ae.prefix_number=!1,ae.suffix_number=!1,ae.need_prefix_number=!1,ae.need_suffix_number=!1,ae.modifier=!0,ae.critical=!1,ae.fumble=!1,ae.dollar=!1,ae.allowed_cmp_op=[i,">=",">","<=","<","==","!="],ae.question_target=!1},-2),z(f,"$disable_modifier",function(){return this.modifier=!1,this}),z(f,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),z(f,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),z(f,"$has_prefix_number",function(){var m=this;return m.prefix_number=!0,m.need_prefix_number=!0,m}),z(f,"$has_suffix_number",function(){var m=this;return m.suffix_number=!0,m.need_suffix_number=!0,m}),z(f,"$enable_critical",function(){return this.critical=!0,this}),z(f,"$enable_fumble",function(){return this.fumble=!0,this}),z(f,"$enable_dollar",function(){return this.dollar=!0,this}),z(f,"$restrict_cmp_op_to",function(m){var re;return re=u(arguments),this.allowed_cmp_op=re,this},-1),z(f,"$enable_question_target",function(){return this.question_target=!0,this}),z(f,"$parse",function(m){try{return this.lexer=$("Lexer").$new(m,this.notations),this.$do_parse()}catch($e){if(!e.rescue($e,[$("ParseError"),$("ZeroDivisionError")]))throw $e;try{return i}finally{e.pop_exception()}}}),f.$private(),z(f,"$parsed",function(m,re,$e,P){try{return Y("eval_return"),B($("Parsed").$new(),"tap",[],function ue(ae){var le,_e,de,ve,me,fe,be,oe=null==ue.$$s?this:ue.$$s;return null==oe.round_type&&(oe.round_type=i),null==ae&&(ae=i),ae["$command="](m["$[]"]("command")),ae["$prefix_number="]((le=m["$[]"]("prefix"))===i||null==le?i:le.$eval(oe.round_type)),ae["$suffix_number="]((_e=m["$[]"]("suffix"))===i||null==_e?i:_e.$eval(oe.round_type)),ae["$critical="]((de=re["$[]"]("critical"))===i||null==de?i:de.$eval(oe.round_type)),ae["$fumble="]((ve=re["$[]"]("fumble"))===i||null==ve?i:ve.$eval(oe.round_type)),ae["$dollar="]((me=re["$[]"]("dollar"))===i||null==me?i:me.$eval(oe.round_type)),ae["$modify_number="]($e.$eval(oe.round_type)),ae["$cmp_op="](P["$[]"]("cmp_op")),w(P["$[]"]("target"),"?")?(ae["$question_target="](!0),B(ae,"target_number=",fe=[0]),fe[fe.length-1]):(ae["$question_target="](!1),fe=[(be=P["$[]"]("target"),be===i||null==be?i:be.$eval(oe.round_type))],B(ae,"target_number=",fe),fe[fe.length-1])},{$$s:this})}catch(ue){if(ue===e.t_eval_return)return ue.$v;throw ue}}),z(f,"$next_token",function(){return this.lexer.$next_token()}),h=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),a=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),c=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),n=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),p=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),A=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),k=[i,6,13,3,9,-1,27,-15,-10,-1,-38],U=[i,i,i,i,i,i,19,16,15,i,i],Z=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),O=J(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),F(_[0],"Racc_arg",[h,a,n,c,p,A,U,k,19,Z,O,58,35,!0]),I($("Ractor","skip_raise")?"constant":i)&&$("Ractor").$make_shareable($("Racc_arg")),F(_[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),I($("Ractor","skip_raise")?"constant":i)&&$("Ractor").$make_shareable($("Racc_token_to_s_table")),F(_[0],"Racc_debug_parser",!1),z(f,"$_reduce_1",function(m,re,$e){var P;return I(this.modifier)||this.$raise($("ParseError")),P=S(m),this.$parsed(null==P[0]?i:P[0],null==P[1]?i:P[1],null==P[2]?i:P[2],null==P[3]?i:P[3])}),z(f,"$_reduce_2",function(m,re,$e){var P;return I(this.modifier)||this.$raise($("ParseError")),P=S(m),this.$parsed(null==P[0]?i:P[0],null==P[2]?i:P[2],null==P[1]?i:P[1],null==P[3]?i:P[3])}),z(f,"$_reduce_3",function(m,re,$e){var P,le;return le=null==(P=S(m))[2]?i:P[2],this.$parsed(null==P[0]?i:P[0],null==P[1]?i:P[1],E(E($("Arithmetic"),"Node"),"Number").$new(0),le)}),z(f,"$_reduce_4",function(m,re,$e){var P=this;return I(P.prefix_number)&&I(P.suffix_number)||P.$raise($("ParseError")),X(["command","prefix","suffix"],{command:m["$[]"](1),prefix:m["$[]"](0),suffix:m["$[]"](2)})}),z(f,"$_reduce_5",function(m,re,$e){var P=this;return I(P.prefix_number)||P.$raise($("ParseError")),I(P.need_suffix_number)&&P.$raise($("ParseError")),X(["command","prefix"],{command:m["$[]"](1),prefix:m["$[]"](0)})}),z(f,"$_reduce_6",function(m,re,$e){var P=this;return I(P.suffix_number)||P.$raise($("ParseError")),I(P.need_prefix_number)&&P.$raise($("ParseError")),X(["command","suffix"],{command:m["$[]"](0),suffix:m["$[]"](1)})}),z(f,"$_reduce_7",function(m,re,$e){var P=this;return(I(P.need_prefix_number)||I(P.need_suffix_number))&&P.$raise($("ParseError")),X(["command"],{command:m["$[]"](0)})}),z(f,"$_reduce_8",function(m,re,$e){return X([],{})}),z(f,"$_reduce_9",function(m,re,$e){var P,le,ue=i;return ue=null==(P=S(m))[0]?i:P[0],le=null==P[2]?i:P[2],I(this.critical)&&I(ue["$[]"]("critical")["$nil?"]())||this.$raise($("ParseError")),ue["$[]="]("critical",le),ue}),z(f,"$_reduce_10",function(m,re,$e){var P,le,ue=i;return ue=null==(P=S(m))[0]?i:P[0],le=null==P[2]?i:P[2],I(this.fumble)&&I(ue["$[]"]("fumble")["$nil?"]())||this.$raise($("ParseError")),ue["$[]="]("fumble",le),ue}),z(f,"$_reduce_11",function(m,re,$e){var P,le,ue=i;return ue=null==(P=S(m))[0]?i:P[0],le=null==P[2]?i:P[2],I(this.dollar)&&I(ue["$[]"]("dollar")["$nil?"]())||this.$raise($("ParseError")),ue["$[]="]("dollar",le),ue}),z(f,"$_reduce_12",function(m,re,$e){return m["$[]"](1)}),z(f,"$_reduce_13",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"Negative").$new(m["$[]"](1))}),z(f,"$_reduce_14",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"BinaryOp").$new(m["$[]"](0),"+",m["$[]"](2))}),z(f,"$_reduce_15",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"BinaryOp").$new(m["$[]"](0),"-",m["$[]"](2))}),z(f,"$_reduce_16",function(m,re,$e){return I(this.allowed_cmp_op["$include?"](i))||this.$raise($("ParseError")),X([],{})}),z(f,"$_reduce_17",function(m,re,$e){var P,ue,ae;return ae=null==(P=S(m))[1]?i:P[1],I(this.allowed_cmp_op["$include?"](ue=null==P[0]?i:P[0]))||this.$raise($("ParseError")),X(["cmp_op","target"],{cmp_op:ue,target:ae})}),z(f,"$_reduce_18",function(m,re,$e){var se,P=this;return se=m["$[]"](0),I(P.question_target)||P.$raise($("ParseError")),I(P.allowed_cmp_op["$include?"](se))||P.$raise($("ParseError")),X(["cmp_op","target"],{cmp_op:se,target:"?"})}),z(f,"$_reduce_19",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"BinaryOp").$new(m["$[]"](0),"+",m["$[]"](2))}),z(f,"$_reduce_20",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"BinaryOp").$new(m["$[]"](0),"-",m["$[]"](2))}),z(f,"$_reduce_22",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"BinaryOp").$new(m["$[]"](0),"*",m["$[]"](2))}),z(f,"$_reduce_23",function(m,re,$e){return m["$[]"](3).$new(m["$[]"](0),m["$[]"](2))}),z(f,"$_reduce_25",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),z(f,"$_reduce_26",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"DivideWithCeil")}),z(f,"$_reduce_27",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"DivideWithCeil")}),z(f,"$_reduce_28",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"DivideWithRound")}),z(f,"$_reduce_29",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"DivideWithFloor")}),z(f,"$_reduce_30",function(m,re,$e){return m["$[]"](1)}),z(f,"$_reduce_31",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"Negative").$new(m["$[]"](1))}),z(f,"$_reduce_33",function(m,re,$e){return m["$[]"](1)}),z(f,"$_reduce_34",function(m,re,$e){return E(E($("Arithmetic"),"Node"),"Number").$new(m["$[]"](0))}),z(f,"$_reduce_none",function(m,re,$e){return m["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var B,F,Q,s,d,i,S,Y,j=e.module,N=e.send,u=e.eqeqeq,M=e.truthy,L=e.def,y=e.return_val,g=[],D=e.nil;return B=g,F=Y=[j(g[0],"BCDice")].concat(B),Q=S=[j(Y[0],"Deprecated")].concat(F),d=[s=j(S[0],"Checker")].concat(Q),i=e.$r(d),s.$private(),L(s,"$check_result_legacy",function(t,r,o,H){var C,q=this,x=D,v=D,b=D,T=D;return x=N(r,"map",[],"sides".$to_proc()),C=(v=N(r,"map",[],"value".$to_proc())).$sum(),b=u([100],T=x)?q.$check_1D100(t,C,o,H):u([20],T)?q.$check_1D20(t,C,o,H):u([6,6],T)?q.$check_2D6(t,C,v,o,H):D,(M(b["$nil?"]())||M(b["$empty?"]()))&&(b=u([10],T=x.$uniq())?q.$check_nD10(t,C,v,o,H):u([6],T)?q.$check_nD6(t,C,v,o,H):D,M(b["$nil?"]())||M(b["$empty?"]()))?D:i("Result").$new(b.$delete_prefix(" \uff1e "))}),L(s,"$check_1D100",y(D)),L(s,"$check_1D20",y(D)),L(s,"$check_nD10",y(D)),L(s,"$check_2D6",y(D)),L(s,"$check_nD6",y(D))},Opal.modules["bcdice/base"]=function(e){var d,q,T,W,$,h,l,R,f,G,v,j=e.module,N=e.klass,u=e.slice,M=e.rb_plus,L=e.truthy,y=e.def,g=e.regexp,D=e.send,z=e.thrower,B=e.return_ivar,w=e.assign_ivar_val,Y=e.eqeqeq,J=e.eqeq,F=e.return_val,I=e.range,S=e.rb_minus,X=e.rb_divide,Q=e.rb_times,s=e.rb_ge,i=e.top,E=[],t=e.$r(E),r=e.nil,o=e.$$$;return i.$require("i18n"),i.$require("i18n/backend/fallbacks"),i.$require("bcdice/randomizer"),i.$require("bcdice/dice_table"),i.$require("bcdice/enum"),i.$require("bcdice/translate"),i.$require("bcdice/result"),i.$require("bcdice/command/parser"),i.$require("bcdice/deprecated/checker"),q=E,T=v=[j(E[0],"BCDice")].concat(q),R=[l=N(v[0],null,"Base")].concat(T),f=e.$r(R),(G=l.$$prototype).raw_input=G.randomizer=G.enabled_upcase_input=G.debug=r,$=[W=e.get_singleton_class(l)].concat(R),h=e.$r($),W.$attr_reader("prefixes"),y(W,"$register_prefix",function(c){var p,k,A=this;return null==A.prefixes&&(A.prefixes=r),p=u(arguments),A.prefixes=M(L(k=A.prefixes)?k:[],p.$flatten())},-1),y(W,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),y(W,"$prefixes_pattern",function(){var c=this,n=r;return null==c.prefixes_pattern&&(c.prefixes_pattern=r),null==c.prefixes&&(c.prefixes=r),c.prefixes_pattern=L(n=c.prefixes_pattern)?n:r,L(c.prefixes_pattern)?c.prefixes_pattern:(c.prefixes=L(n=c.prefixes)?n:[],c.prefixes.$freeze(),c.prefixes_pattern=(L(c.prefixes["$empty?"]())?/(?!)/:g(["^(S)?(",c.prefixes.$join("|"),")"],"i")).$freeze())}),y(W,"$command_pattern",function(){var c=this,n=r,p=r;return null==c.command_pattern&&(c.command_pattern=r),null==c.prefixes&&(c.prefixes=r),c.command_pattern=L(n=c.command_pattern)?n:r,L(c.command_pattern)?c.command_pattern:(c.prefixes=L(n=c.prefixes)?n:[],c.prefixes.$freeze(),p=M(D(o(h("CommonCommand"),"COMMANDS"),"map",[],function(k){return null==k&&(k=r),o(k,"PREFIX_PATTERN").$source()}),c.prefixes),c.command_pattern=g(["^S?(",p.$join("|"),")"],"i").$freeze())}),y(W,"$eval",function(c){try{return z("eval_return"),this.$new(c).$eval()}catch(A){if(A===e.t_eval_return)return A.$v;throw A}}),l.$include(f("Translate")),l.$include(o(f("Deprecated"),"Checker")),y(l,"$initialize",function(_){var $=this;return $.raw_input=_,$.sort_add_dice=!1,$.sort_barabara_dice=!1,$.d66_sort_type=o(f("D66SortType"),"NO_SORT"),$.enabled_d9=!1,$.round_type=o(f("RoundType"),"FLOOR"),$.sides_implicit_d=6,$.upper_dice_reroll_threshold=r,$.reroll_dice_reroll_threshold=r,$.default_cmp_op=r,$.default_target_number=r,$.enabled_upcase_input=!0,$.locale="ja_jp",$.randomizer=o(f("BCDice"),"Randomizer").$new(),$.debug=!1}),l.$attr_accessor("randomizer"),l.$attr_reader("d66_sort_type"),l.$attr_reader("round_type"),l.$attr_reader("sides_implicit_d"),l.$attr_reader("upper_dice_reroll_threshold"),l.$attr_reader("reroll_dice_reroll_threshold"),l.$attr_reader("default_cmp_op"),l.$attr_reader("default_target_number"),y(l,"$sort_add_dice?",B("sort_add_dice")),y(l,"$sort_barabara_dice?",B("sort_barabara_dice")),y(l,"$enabled_d9?",B("enabled_d9")),y(l,"$enable_debug",w("debug",!0)),y(l,"$eval",function(){var $,a,_=this,h=r;return $=o(f("BCDice"),"Preprocessor").$process(_.raw_input,_),h=L(a=_.$dice_command($))?a:_.$eval_common_command(_.raw_input),L(h)?(h["$rands="](_.randomizer.$rand_results()),h["$detailed_rands="](_.randomizer.$detailed_rand_results()),h):r}),y(l,"$change_text",function(_){return _}),y(l,"$check_result",function(_,$,h,a){var c=this,n=r,p=r,A=r,k=r,U=r;return n=c.$check_result_legacy(_,$,h,a),L(n)?n:(p=D($,"map",[],"sides".$to_proc()),k=(A=D($,"map",[],"value".$to_proc())).$sum(),n=Y([100],U=p)?c.$result_1d100(_,k,h,a):Y([20],U)?c.$result_1d20(_,k,h,a):Y([6,6],U)?c.$result_2d6(_,k,A,h,a):r,J(n,f("Result").$nothing())?r:L(n)?n:(n=Y([10],U=p.$uniq())?c.$result_nd10(_,k,A,h,a):Y([6],U)?c.$result_nd6(_,k,A,h,a):r,J(n,f("Result").$nothing())?r:L(n)?n:c.$result_ndx(_,h,a)))}),y(l,"$grich_text",F(r)),l.$private(),y(l,"$eval_common_command",function(_){try{z("eval_return");var h=z("return");return _=this.$change_text(_),D(o(f("CommonCommand"),"COMMANDS"),"each",[],function c(n){var A,p=null==c.$$s?this:c.$$s;if(null==p.randomizer&&(p.randomizer=r),null==n&&(n=r),A=n.$eval(_,p,p.randomizer),!L(A))return r;h.$throw(A)},{$$s:this,$$ret:h}),r}catch(c){if(c===e.t_eval_return||c===h)return c.$v;throw c}}),y(l,"$dice_command",function(_){var $=this,h=r,a=r,c=r,n=r;return L($.enabled_upcase_input)&&(_=_.$upcase()),h=$.$class().$prefixes_pattern().$match(_),L(h)?(a=h["$[]"](1)["$nil?"]()["$!"](),L(a)&&(_=_["$[]"](I(1,-1,!1))),c=$.$eval_game_system_specific_command(_),L(c["$is_a?"](f("Result")))?(c["$secret="](L(n=c["$secret?"]())?n:a),c):L(c["$nil?"]())||L(c["$empty?"]())||J(c,"1")?r:D(f("Result").$new(),"tap",[],function(A){var k;return null==A&&(A=r),A["$text="](c.$to_s()),D(A,"secret=",k=[a]),k[k.length-1]})):r}),y(l,"$eval_game_system_specific_command",F(r)),y(l,"$result_ndx",function(_,$,h){return L(h["$is_a?"](f("String")))?r:L(_.$send($,h))?f("Result").$success(this.$translate("success")):f("Result").$failure(this.$translate("failure"))}),y(l,"$result_1d100",F(r)),y(l,"$result_1d20",F(r)),y(l,"$result_nd10",F(r)),y(l,"$result_2d6",F(r)),y(l,"$result_nd6",F(r)),y(l,"$get_table_by_2d6",function(_){return this.$get_table_by_nD6(_,2)}),y(l,"$get_table_by_1d6",function(_){return this.$get_table_by_nD6(_,1)}),y(l,"$get_table_by_nD6",function(_,$){return this.$get_table_by_nDx(_,$,6)}),y(l,"$get_table_by_nDx",function(_,$,h){var c,n=r;return c=this.randomizer.$roll_sum($,h),n=this.$get_table_value(_["$[]"](S(c,$))),L(n["$nil?"]())?["1",0]:[n,c]}),y(l,"$get_table_by_1d3",function(_){var a,c,$=this,n=r;return $.$debug("get_table_by_1d3"),a=$.randomizer.$roll_sum(1,6),$.$debug("num",a),c=X(S(a,1),2).$to_i(),$.$debug("index",c),n=_["$[]"](c),L(n["$nil?"]())?["1",0]:[n,a]}),y(l,"$get_table_by_d66_swap",function(_){var h;return h=this.randomizer.$roll_d66(o(f("D66SortType"),"ASC")),[this.$get_table_by_number(h,_),h]}),y(l,"$get_table_by_d66",function(_){var h,a,c,p,n=r;return h=this.randomizer.$roll_once(6),a=this.randomizer.$roll_once(6),c=M(Q(S(h,1),6),S(a,1)),n=_["$[]"](c),p=""+h+a,L(n["$nil?"]())?["1",p]:[n,p]}),y(l,"$get_table_by_number",function(_,$,h){try{var a=z("return");return null==h&&(h="1"),D($,"each",[],function n(p){var k,A=null==n.$$s?this:n.$$s;if(null==p&&(p=r),k=p["$[]"](0),!L(s(k,_)))return r;a.$throw(A.$get_table_value(p["$[]"](1)))},{$$s:this,$$ret:a}),this.$get_table_value(h)}catch(n){if(n===a)return n.$v;throw n}},-3),y(l,"$get_table_value",function(_){return L(_["$is_a?"](f("Proc")))?_.$call():_}),y(l,"$roll_tables",function(_,$){var a=r;return a=$["$[]"](_),L(a)?a.$roll(this.randomizer).$to_s():r}),y(l,"$debug",function(_,$){var a,c=this,n=r,p=r;return a=u(arguments,1),L(c.debug)?(n=L(_["$is_a?"](f("String")))?_:_.$inspect(),L(a["$empty?"]())?c.$warn(n):(p=D(a,"map",[],function(k){return null==k&&(k=r),L(k["$is_a?"](f("String")))?'"'+k+'"':k.$inspect()}),c.$warn(n+": "+p.$join(", ")))):r},-2),o(o(t("I18n"),"Backend"),"Simple").$include(o(o(t("I18n"),"Backend"),"Fallbacks")),t("I18n").$load_path()["$<<"](t("Dir")["$[]"](t("File").$join("bcdice","../../i18n/**/*.yml"))),t("I18n")["$default_locale="]("ja_jp"),d=[["ja_jp"]],D(t("I18n").$fallbacks(),"defaults=",d),d[d.length-1]},Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var B,F,X,s,d,I,S,Y,j=e.module,N=e.ensure_kwargs,u=e.truthy,M=e.thrower,L=e.def,y=[],g=e.nil,D=e.$$$;return B=y,F=Y=[j(y[0],"BCDice")].concat(B),S=[I=j(Y[0],"ArithmeticEvaluator")].concat(F),s=[X=e.get_singleton_class(I)].concat(S),d=e.$r(s),L(X,"$eval",function(E,t){try{M("eval_return");var o,H=g;return null==(o=(t=N(t)).$$smap.round_type)&&(o=D(d("RoundType"),"FLOOR")),u(E)&&u(H=d("Arithmetic").$eval(E,o))?H:0}catch(q){if(q===e.t_eval_return)return q.$v;throw q}},-2)},Opal.modules["bcdice/game_system/LogHorizon"]=function(e){var q,b,f,G,W,p,A,_,$,h,a,l,R,v,j=e.module,N=e.klass,u=e.const_set,M=e.send2,L=e.find_super,y=e.def,g=e.truthy,D=e.hash2,z=e.rb_plus,B=e.rb_ge,w=e.thrower,Y=e.eqeqeq,J=e.assign_ivar,F=e.rb_divide,I=e.rb_minus,S=e.rb_times,X=e.eqeq,Q=e.neqeq,s=e.rb_le,d=e.send,i=e.rb_lt,E=e.top,t=[],r=e.nil,o=e.$$$;return E.$require("bcdice/base"),E.$require("bcdice/arithmetic_evaluator"),q=t,b=v=[j(t[0],"BCDice")].concat(q),l=[j(v[0],"GameSystem")].concat(b),R=e.$r(l),f=l[0],G=R("Base"),W=l,$=[_=N(f,G,"LogHorizon")].concat(W),h=e.$r($),(a=_.$$prototype).randomizer=a.locale=r,u($[0],"ID","LogHorizon"),u($[0],"NAME","\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG"),u($[0],"SORT_KEY","\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG"),u($[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xLH\xb1y>=z)\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000\xb1y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000>=z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \u6d88\u8017\u8868 (tCTx\xb1y$z)\n\u3000PCT \u4f53\u529b\uff0fECT \u6c17\u529b\uff0fGCT \u7269\u54c1\uff0fCCT \u91d1\u92ad\n\u3000x:CR\u3092\u6307\u5b9a\u3002\n\u3000\xb1y:\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u8868\u306e\u7279\u5b9a\u306e\u5024\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u8ca1\u5b9d\u8868 (tTRSx\xb1y$)\n\u3000LHZB1\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRS \u91d1\u92ad\uff0fMTRS \u9b54\u6cd5\u7d20\u6750\uff0fITRS \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0f\u203bHTRS \u30d2\u30ed\u30a4\u30f3\uff0fGTRS \u30b4\u30d6\u30ea\u30f3\u8ca1\u5b9d\u8868\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\u300a\u30b4\u30fc\u30eb\u30c9\u30d5\u30a3\u30f3\u30ac\u30fc\u300b\u4f7f\u7528\u6642\u306a\u3069\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u8ca1\u5b9d\u8868\u306e\u30c0\u30a4\u30b9\u76ee\u30927\u56fa\u5b9a\uff081\u56de\u5206\u306e\u30d7\u30e9\u30a4\u30ba\u7528\uff09\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30a4\u30fc\u30b9\u30bf\u30eb\u63a2\u7d22\u8868 (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30c9\u30de\u30b8\u30c3\u30af\u30a2\u30a4\u30c6\u30e0\u52b9\u679c\u8868 (MGRx)\n\u3000x\u306fMG\u3092\u6307\u5b9a\u3002(LHZB1\u7528)\n\n\u25a0 \u697d\u5668\u7a2e\u5225\u8868\u2020 (MIIx)\n\u3000x\u306f\u697d\u5668\u306e\u7a2e\u985e(1\uff5e6\u3092\u6307\u5b9a)\u3001\u7701\u7565\u53ef\u80fd\n\u30001 \u6253\u697d\u5668\uff11\uff0f2 \u9375\u76e4\u697d\u5668\uff0f3 \u5f26\u697d\u5668\uff11\uff0f4 \u5f26\u697d\u5668\uff12\uff0f5 \u7ba1\u697d\u5668\uff11\uff0f6 \u7ba1\u697d\u5668\uff12\n\n\u25a0 \u7279\u6b8a\u6d88\u8017\u8868\u2606 (tSCTx\xb1y$z)\n\u3000\u6d88\u8017\u8868\u3068\u540c\u69d8\u3001\u305f\u3060\u3057CR\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u3000ESCT \u30ed\u30c7\u7814\u306f\u7206\u767a\u3060\uff01\uff0fCSCT \u30a2\u30eb\u30f4\u306e\u546a\u3044\u3058\u3083\uff01\n\n\u25a0 \u30ed\u30c7\u7814\u306e\u65b0\u767a\u660e\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (IATt)\n\u3000IATA \u7279\u5fb4A(\u30e1\u30ea\u30c3\u30c8)\uff0fIATB \u7279\u5fb4B(\u30c7\u30e1\u30ea\u30c3\u30c8)\uff0fIATL \u898b\u305f\u76ee\uff0fIATT \u7a2e\u985e\n\u3000t\u3092\u7701\u7565\u3059\u308b\u3068\u5168\u3066\u8868\u793a\u3002t\u306bA/B/L/T\u3092\u4efb\u610f\u306e\u9806\u3067\u9023\u7d50\u53ef\u80fd\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \u8868\n\u3000\u30fb\u30d1\u30fc\u30bd\u30ca\u30ea\u30c6\u30a3\u30bf\u30b0\u8868 (PTAG)\n\u3000\u30fb\u4ea4\u53cb\u8868 (KOYU)\n\u3000\u30fb\u653b\u6483\u547d\u4e2d\u7b87\u6240\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (HLOC)\n\u3000\u30fbPC\u540d\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (PCNM)\n\u3000\u30fb\u30a2\u30ad\u30d0\u306e\u8857\u3067\u906d\u9047\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (TIAS)\n\u3000\u30fb\u5ec3\u68c4\u5150\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (ABDC)\n\n\u2020\u5370\u306f\u2606\u5370\u306f\u300c\u30a4\u30f3\u30c8\u30a5\u30fb\u30b6\u30fb\u30bb\u30eb\u30c7\u30b7\u30a2 \u3055\u3089\u306a\u308b\u30d3\u30eb\u30c9\u306e\u7fbd\u3070\u305f\u304d\uff08\uff11\uff09\u300d\u3088\u308a\u3001\n\u2606\u5370\u306f\u30bb\u30eb\u30c7\u30b7\u30a2\u30fb\u30ac\u30bc\u30c3\u30c8\u300c\u3067\u304d\u308b\u304b\u306a66\u300dVol.1\u3088\u308a\u3001\n\u203b\u5370\u306f\u300c\u5b9f\u9332\u30fb\u4e03\u9762\u4f53\u5de5\u623f\u30b9\u30bf\u30c3\u30d5\u5ea7\u8ac7\u4f1a(\u590f\u306e\u9663)\u300d\u3088\u308a\u3002\u5229\u7528\u6cd5\u306a\u3069\u306f\u305d\u3061\u3089\u53c2\u7167\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),_.$register_prefix("\\d+LH","\\w+CT","CT","\\w+TRS","TRS","IAT","TIAS","ABDC","MII","ESTL"),y(_,"$initialize",function c(n){var A=this;return c.$$p=null,M(A,L(A,"initialize",c,!1,!0),"initialize",[n],null),A.d66_sort_type=o(h("D66SortType"),"NO_SORT")}),y(_,"$eval_game_system_specific_command",function(n){var A,k,U,Z,ee,K,O,te,ne,ie,V,p=this;return g(A=g(k=g(U=g(Z=g(ee=g(K=g(O=g(te=g(ne=g(ie=g(V=p.$getCheckRollDiceCommandResult(n))?V:p.$roll_consumption(n))?ie:p.$roll_consumption_table(n))?ne:p.$roll_treasure(n))?te:p.$roll_treasure_table(n))?O:p.$roll_treasure_table_b2(n))?K:p.$getInventionAttributeTextDiceCommandResult(n))?ee:p.$getTroubleInAkibaStreetDiceCommandResult(n))?Z:p.$getAbandonedChildDiceCommandResult(n))?U:p.$getMusicalInstrumentTypeDiceCommandResult(n))?k:p.$roll_eastal_exploration_table(n))?A:p.$roll_tables(n,o(p.$class(),"TABLES"))}),_.$private(),y(_,"$getCheckRollDiceCommandResult",function(n){var p=this,k=r,U=r,Z=r,ee=r,K=r,O=r,te=r;return k=o(h("Command"),"Parser").$new(/\d+LH/,D(["round_type"],{round_type:p.$round_type()})).$restrict_cmp_op_to(r,">=").$parse(n),g(k)?(U=k.$command().$to_i(),ee=(Z=p.randomizer.$roll_barabara(U,6)).$sum(),K=z(ee,k.$modify_number()),O=p.$result_text(U,Z,K,k),te=["("+k+")",ee+"["+Z.$join(",")+"]"+h("Format").$modifier(k.$modify_number()),K,O.$text()].$compact(),O["$text="](te.$join(" \uff1e ")),O):r}),y(_,"$result_text",function(n,p,A,k){var U=this;return g(B(p.$count(6),2))?h("Result").$critical(U.$translate("LogHorizon.LH.critical")):g(B(p.$count(1),n))?h("Result").$fumble(U.$translate("LogHorizon.LH.fumble")):g(k.$cmp_op()["$nil?"]())?h("Result").$new():g(B(A,k.$target_number()))?h("Result").$success(U.$translate("success")):h("Result").$failure(U.$translate("failure"))}),y(_,"$getValue",function(n,p){try{return w("eval_return"),g(n["$nil?"]())||g(n["$empty?"]())?p:h("ArithmeticEvaluator").$eval(n)}catch(k){if(k===e.t_eval_return)return k.$v;throw k}}),y(_,"$roll_consumption",function(n){try{w("eval_return");var k=r,U=r,Z=r,ee=r,K=r;return k=/^CT\d*([+\-\d]+)?$/.$match(n),g(k)?(U=h("ArithmeticEvaluator").$eval(k["$[]"](1)),Z=h("Format").$modifier(U),ee=this.randomizer.$roll_once(6),g(Z["$empty?"]())||(K=z(ee.$to_s(),Z)),["(1D6"+Z+")",K,z(ee,U)].$compact().$join(" \uff1e ")):r}catch(te){if(te===e.t_eval_return)return te.$v;throw te}}),y(_,"$roll_consumption_table",function(n){try{w("eval_return");var k=r,U=r,Z=r,ee=r;return k=/(P|E|G|C|ES|CS)CT(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(n),g(k)?(U=this.$construct_consumption_table(k["$[]"](1)),Z=k["$[]"](2).$to_i(),ee=h("ArithmeticEvaluator").$eval(k["$[]"](3)),g(k["$[]"](4))&&U.$fix_dice_value(k["$[]"](4).$to_i()),U.$roll(Z,ee,this.randomizer)):r}catch(K){if(K===e.t_eval_return)return K.$v;throw K}}),y(_,"$construct_consumption_table",function(n){var k,p=this,A=r;return A=Y("P",k=n)?p.$translate("LogHorizon.CT.PCT"):Y("E",k)?p.$translate("LogHorizon.CT.ECT"):Y("G",k)?p.$translate("LogHorizon.CT.GCT"):Y("C",k)?p.$translate("LogHorizon.CT.CCT"):Y("ES",k)?p.$translate("LogHorizon.CT.ESCT"):Y("CS",k)?p.$translate("LogHorizon.CT.CSCT"):r,h("ConsumptionTable").$new(A["$[]"]("name"),A["$[]"]("items"))}),(A=(p=N($[0],null,"ConsumptionTable")).$$prototype).tables=A.dice_value=A.name=r,y(p,"$initialize",function(U,Z){return this.name=U,this.tables=Z,this.dice_value=r}),y(p,"$fix_dice_value",J("dice_value")),y(p,"$roll",function(U,Z,ee){var O,ne,V,K=this,te=r,ie=r;return O=F(I(U,1),5).$clamp(0,I(K.tables.$size(),1)),te=K.tables["$[]"](O),K.dice_value=g(ne=K.dice_value)?ne:ee.$roll_once(6),ie=z(K.dice_value,Z),V=te["$[]"](ie.$clamp(0,7)),K.name+"("+ie+"["+K.dice_value+"]) \uff1e "+V}),y(_,"$roll_treasure",function(n){try{w("eval_return");var k=r,U=r,Z=r,ee=r,K=r,O=r;return k=/^TRS(\d+)?([+\-\d]+)?$/.$match(n),g(k)?(U=k["$[]"](1).$to_i(),Z=h("ArithmeticEvaluator").$eval(k["$[]"](2)),K=(ee=this.randomizer.$roll_barabara(2,6)).$sum(),O=z(z(K,S(U,5)),Z),"(2D6+"+U+"*5"+h("Format").$modifier(Z)+") \uff1e "+K+"["+ee.$join(",")+"]"+h("Format").$modifier(z(S(U,5),Z))+" \uff1e "+O):r}catch(te){if(te===e.t_eval_return)return te.$v;throw te}}),y(_,"$roll_treasure_table",function(n){try{w("eval_return");var A=this,k=r,U=r,Z=r,ee=r,K=r;return k=/^([CMIHG]TRS)(\d+)?([+\-\d]+)?(\$)?$/.$match(n),g(k)?(U=k["$[]"](1),Z=A.$construct_treasure_table(U),ee=k["$[]"](2).$to_i(),K=h("ArithmeticEvaluator").$eval(k["$[]"](3)),X(ee,0)&&X(K,0)?A.$translate("LogHorizon.TRS.need_cr",D(["command"],{command:n})):(g(k["$[]"](4))&&Z.$fix_dice_value(7),Z.$roll(ee,K,A.randomizer))):r}catch(O){if(O===e.t_eval_return)return O.$v;throw O}}),y(_,"$construct_treasure_table",function(n){return X(n,"HTRS")?h("HeroineTreasureTable").$from_i18n("LogHorizon.TRS.HTRS",this.locale):h("TreasureTable").$from_i18n("LogHorizon.TRS."+n,this.locale)}),y(_,"$roll_treasure_table_b2",function(n){try{w("eval_return");var A=this,k=r,U=r,Z=r,ee=r,K=r;return k=/^([CMIO]TRSE)(\d+)?([+\-\d]+)?(\$)?$/.$match(n),g(k)?(U=k["$[]"](1),Z=h("ExpansionTreasureTable").$from_i18n("LogHorizon.TRSE."+U,A.locale),ee=k["$[]"](2).$to_i(),K=h("ArithmeticEvaluator").$eval(k["$[]"](3)),X(ee,0)&&X(K,0)?A.$translate("LogHorizon.TRS.need_cr",D(["command"],{command:n})):(g(k["$[]"](4))&&Z.$fix_dice_value(7),Z.$roll(ee,K,A.randomizer))):r}catch(O){if(O===e.t_eval_return)return O.$v;throw O}}),function(c,n,p){var ee,O,te,A=N(c,null,"TreasureTable"),k=[A].concat(p),U=e.$r(k),Z=A.$$prototype;Z.dice_list=Z.name=Z.items=r,A.$include(U("Translate")),O=[ee=e.get_singleton_class(A)].concat(k),te=e.$r(O),y(ee,"$from_i18n",function(ie,V){var re=r;return re=te("I18n").$translate(ie,D(["raise","locale"],{raise:!0,locale:V})),this.$new(re["$[]"]("name"),re["$[]"]("items"),V)}),y(A,"$initialize",function(K,O,te){return this.name=K,this.items=O,this.locale=te,this.dice_list=r}),y(A,"$fix_dice_value",function(K){return this.dice_list=[K]}),y(A,"$roll",function(K,O,te){var ne,ie=this,V=r,m=r,re=r,$e=r;return X(K,0)&&X(O,0)?r:(V=X(K,0)&&Q(O,0)?O:(ie.dice_list=g(m=ie.dice_list)?m:te.$roll_barabara(2,6),z(z(ie.dice_list.$sum(),S(5,K)),O)),re=ie.$pick_item(V),g(ie.dice_list)&&($e="["+((ne=ie.dice_list)===r||null==ne?r:ne.$join(","))+"]"),ie.name+"("+V+$e+") \uff1e "+re)}),A.$private(),y(A,"$pick_item",function(K){var O=this;return g(s(K,6))?O.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):g(s(K,62))?O.items["$[]"](K.$to_s()):g(s(K,72))?O.items["$[]"](I(K,10).$to_s())+"&80G":g(s(K,82))?O.items["$[]"](I(K,20).$to_s())+"&160G":g(s(K,87))?O.items["$[]"](I(K,30).$to_s())+"&260G":O.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:88}))})}($[0],0,$),function(c,n){var p=N(c,n,"HeroineTreasureTable");p.$$prototype.items=r,y(p,"$pick_item",function(U){var Z=this;return g(s(U,6))?Z.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):g(s(U,53))?Z.items["$[]"](U.$to_s()):Z.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:54}))})}($[0],h("TreasureTable")),function(c,n){var p=N(c,n,"ExpansionTreasureTable");p.$$prototype.items=r,y(p,"$pick_item",function(U){var Z=this;return g(s(U,6))?Z.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):g(s(U,162))?Z.items["$[]"](U.$to_s()):g(s(U,172))?Z.items["$[]"](I(U,10).$to_s())+"&200G":g(s(U,182))?Z.items["$[]"](I(U,20).$to_s())+"&400G":g(s(U,187))?Z.items["$[]"](I(U,30).$to_s())+"&600G":Z.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:188}))})}($[0],h("TreasureTable")),y(_,"$getInventionAttributeTextDiceCommandResult",function(n){var A=r,k=r,U=r,Z=r,ee=r;return g(n["$=~"](/IAT([ABMDLT]*)/))?(A=this.$translate("LogHorizon.IAT.name"),k=g(h("Regexp").$last_match(1))&&Q(h("Regexp").$last_match(1),"")?h("Regexp").$last_match(1):"MDLT",U=k.$length()["$=="](1),Z=[],ee=[],d(k.$split(/(?:)/),"each",[],function K(O){var V,te=null==K.$$s?this:K.$$s,ne=r,ie=r,m=r;return null==te.randomizer&&(te.randomizer=r),null==O&&(O=r),ne=te.randomizer.$roll_once(6),ee["$<<"](ne.$to_s()),m=(ie=Y("A",V=O)||Y("M",V)?te.$translate("LogHorizon.IAT.A"):Y("B",V)||Y("D",V)?te.$translate("LogHorizon.IAT.B"):Y("L",V)?te.$translate("LogHorizon.IAT.L"):Y("T",V)?te.$translate("LogHorizon.IAT.T"):r)["$[]"]("items")["$[]"](I(ne,1)),g(U)&&(m=ie["$[]"]("name")+"\uff1a"+m),Z.$push(m)},{$$s:this}),A+"(["+ee.$join(",")+"]) \uff1e "+Z.$join(" ")):r}),y(_,"$getTroubleInAkibaStreetDiceCommandResult",function(n){return X(n,"TIAS")?this.$roll_random_table("LogHorizon.TIAS"):r}),y(_,"$getAbandonedChildDiceCommandResult",function(n){return X(n,"ABDC")?this.$roll_random_table("LogHorizon.ABDC"):r}),y(_,"$roll_random_table",function(n){var A=r,k=r,U=r,Z=r;return A=this.$translate(n),k=A["$[]"]("tables"),U=this.randomizer.$roll_barabara(k.$size(),6),Z=d(U.$map(),"with_index",[],function(K,O){return null==K&&(K=r),null==O&&(O=r),k["$[]"](O)["$[]"](I(K,1))}),A["$[]"]("name")+"(["+U.$join(",")+"]) \uff1e "+Z.$join(" ")}),y(_,"$getMusicalInstrumentTypeDiceCommandResult",function(n){var p=this,A=r,k=r,U=r,Z=r,ee=r,K=r,O=r;return!g(n["$=~"](/MII(\d?)/))||(A=(g(k=h("Regexp").$last_match(1))?h("Regexp").$last_match(1)["$!="](""):k)["$!"](),U=g(A)?p.randomizer.$roll_once(6):h("Regexp").$last_match(1).$to_i(),g(i(U,1))||i(6,U))?r:(Z=p.$translate("LogHorizon.MII.name"),ee=p.$translate("LogHorizon.MII.type_list")["$[]"](I(U,1)),K=p.randomizer.$roll_once(6),O=p.$translate("LogHorizon.MII.items")["$[]"](I(U,1))["$[]"](I(K,1)),z(z(Z.$to_s(),g(A)?"("+U+")":"")," \uff1e "+ee+"("+K+") \uff1e "+O))}),y(_,"$roll_eastal_exploration_table",function(n){try{w("eval_return");var A,k=this,U=r,Z=r,ee=r,K=r,O=r,te=r,ne=r,ie=r,m=r;return U=/ESTL(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(n),!g(U)||g(U["$[]"](1)["$nil?"]())&&g(U["$[]"](2)["$nil?"]())&&g(U["$[]"](3)["$nil?"]())?r:(Z=U["$[]"](1).$to_i(),ee=h("ArithmeticEvaluator").$eval(U["$[]"](2)),K=(A=U["$[]"](3))===r||null==A?r:A.$to_i(),O=g(K)?[K]:X(Z,0)?[]:k.randomizer.$roll_barabara(2,6),g(O["$empty?"]())||(te="["+O.$join(",")+"]"),ne=z(z(O.$sum(),S(Z,5)),ee).$clamp(7,162),ie=k.$translate("LogHorizon.ESTL.name"),m=k.$translate("LogHorizon.ESTL.items")["$[]"](ne.$to_s()).$chomp(),ie+"("+ne+te+")\n"+m)}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),function(c,n){var p=[c].concat(n),A=e.$r(p);c.$private(),y(c,"$translate_tables",function(U){return D(["PTAG","KOYU","MGR1","MGR2","MGR3","HLOC","PCNM"],{PTAG:o(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PTAG",U),KOYU:o(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.KOYU",U),MGR1:o(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR1",U),MGR2:o(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR2",U),MGR3:o(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR3",U),HLOC:o(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.HLOC",U),PCNM:o(A("DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PCNM",U)})})}(e.get_singleton_class(_),$),u($[0],"TABLES",_.$translate_tables("ja_jp")),_.$register_prefix(h("TABLES").$keys())},Opal.queue(function(e){var w,I,i,E,t,X,Q,J,j=e.module,N=e.klass,u=e.const_set,M=e.send2,L=e.find_super,y=e.def,D=[];return e.top.$require("bcdice/game_system/LogHorizon"),w=D,I=J=[j(D[0],"BCDice")].concat(w),X=[j(J[0],"GameSystem")].concat(I),Q=e.$r(X),i=X,u((t=[E=N(X[0],Q("LogHorizon"),"LogHorizon_Korean")].concat(i))[0],"ID","LogHorizon:Korean"),u(t[0],"NAME","\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),u(t[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),u(t[0],"HELP_MESSAGE","\u25a0 \ud310\uc815(xLH\xb1y>=z)\n\u3000xD6\uc758 \ud310\uc815.\ud06c\ub9ac\ud2f0\uceec, \ud38c\ube14\uc758 \uc790\ub3d9 \ud310\uc815\uc744 \uc2e4\uc2dc\ud569\ub2c8\ub2e4.\n\u3000x\uff1ax\ub85c \uad74\ub9b4 \uc8fc\uc0ac\uc704\uc758 \uc218\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.\n\u3000\xb1y\uff1ay\ub85c \uc218\uc815\uce58\ub97c \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n  >=z\uff1az\ub85c \ubaa9\ud45c\uac12\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \uc18c\ubaa8\ud45c(tCTx\xb1y$z)\n\u3000PCT \uccb4\ub825\uff0fECT \uae30\ub825\uff0fGCT \ubb3c\ud488\uff0fCCT \uae08\uc804\n\u3000x:CR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\u3000\xb1y:\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$z\uff1a$\ub97c \ubd99\uc774\uba74 \uc8fc\uc0ac\uc704 \ub208\uc744 z\uace0\uc815\ud569\ub2c8\ub2e4. \ud45c\uc758 \ud2b9\uc815 \uac12 \ucc38\uc870\uc6a9\uc73c\ub85c \uc0ac\uc6a9\ud558\uba70.\uc0dd\ub7b5 \uac00\ub2a5.\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc7ac\ubb3c\ud45c(tTRSx\xb1y$)\n\u3000CTRS \uae08\uc804\uff0fMTRS \ub9c8\ubc95\uc18c\uc7ac\uff0fITRS \ud658\uc804 \uc544\uc774\ud15c\uff0f\u203bHTRS \ud788\ub85c\uc778\uff0fGTRS \uace0\ube14\ub9b0 \uc7ac\ubcf4\ud45c\n\u3000x\uff1aCR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc0dd\ub7b5\uc2dc\uc5d0\ub294 \ub2e4\uc774\uce58 0\uace0\uc815\uc73c\ub85c \uc218\uc815\uce58\uc758 \ud45c\ub97c \ucc38\uc870.\u300a\uace8\ub4dc \ud551\uac70\u300b\uc0ac\uc6a9 \uc2dc \ub4f1.\n\u3000\xb1y\uff1a\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$\uff1a\uff04\uc744 \ubd99\uc774\uba74 \uc7ac\ubb3c\ud45c\uc758 \ub2e4\uc774\uc2a4\ub97c 7\ub85c \uace0\uc815\ud569\ub2c8\ub2e4.\uff081\ucc28 \ubd84\ub7c9\uc758 \ud504\ub77c\uc774\uc988 \uc6a9\ub3c4\uff09\uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc774\uc2a4\ud0c8 \ud0d0\uc0c9\ud45c (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \ud504\ub9ac\ud53d\uc2a4\ub4dc \ub9e4\uc9c1\uc544\uc774\ud15c \ud6a8\uacfc \ud45c(MGRx)\n\u3000x\ub294 MG\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\n\u25a0 \uc545\uae30 \uc885\ub958 \ud45c\u2020 (MIIx)\n\u3000x\ub294 \uc545\uae30\uc758 \uc885\ub958\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.(1~6\ub97c \uc9c0\uc815) \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u30001 \ud0c0\uc545\uae301\uff0f2 \uac74\ubc18\uc545\uae30\uff0f3 \ud604\uc545\uae301\uff0f4 \ud604\uc545\uae302\uff0f5 \uad00\uc545\uae301\uff0f6 \uad00\uc545\uae302\n\n\u25a0 \ud2b9\uc218 \uc18c\ubaa8\ud45c\u2606 (tSCTx\xb1y$z)\n\u3000\uc18c\ubaa8\ud45c\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4. \ub2e4\ub9cc CR\uc740 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000ESCT \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\ub294 \ud3ed\ubc1c\ud588\ub2e4!\uff0fCSCT \uc54c\ube0c\uc758 \uc800\uc8fc\ub2e4!\n\n\u25a0 \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\uc758 \uc0c8\ub85c\uc6b4 \ubc1c\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (IATt)\n\u3000IATA \ud2b9\uc9d5A(\uc7a5\uc810)\uff0fIATB \ud2b9\uc9d5B(\ub2e8\uc810)\uff0fIATL \uc678\ud615\uff0fIATT \uc885\ub958\n\u3000t\ub97c \uc0dd\ub7b5\ud560 \uacbd\uc6b0 \ubaa8\ub450 \ud45c\uc2dc\ud569\ub2c8\ub2e4. t\uc5d0 A/B/L/T\ub97c \uc784\uc758\uc758 \uc21c\uc11c\ub85c \uc5f0\uacb0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \ud45c\n\u3000\u30fb\ud37c\uc2a4\ub110\ub9ac\ud2f0 \ud0dc\uadf8 \ud45c (PTAG)\n\u3000\u30fb\uad50\uc6b0\ud45c (KOYU)\n\u3000\u30fb\uacf5\uaca9 \uba85\uc911 \uc7a5\uc18c \ub79c\ub364 \uacb0\uc815\ud45c\u203b (HLOC)\n\u3000\u30fbPC\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (PCNM)\n\u3000\u30fb\uc544\ud0a4\ubc14 \uac70\ub9ac\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c \ub79c\ub364\uacb0\uc815 \ud45c\u203b (TIAS)\n\u3000\u30fb\ubc84\ub824\uc9c4 \uc544\uc774 \ub79c\ub364 \uacb0\uc815 \ud45c\u203b (ABDC)\n\n\u2020\ud45c\uc2dc\uc640 \u2606\ud45c\uc2dc\ub294\u300c\uc778\ud22c\u30fb\ub354\u30fb\uc140\ub374\uc2dc\uc544 \uc0c8\ub85c\uc6b4 \ube4c\ub4dc\uc758 \ub0a0\uac1c\uc9d3(1)\u300d\uc5d0\uc11c\u3001\n\u2606\ud45c\uc2dc\ub294 \uc140\ub374\uc2dc\uc544\u30fb\uac00\uc81c\ud2b8\u300cD \ub418\uae30\ub294 \ud560\uae4c? 66\u300dVol.1\uc5d0\uc11c\u3001\n\u203b\ud45c\uc2dc\ub294\u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc5d0\uc11c \ucc38\uc870\ud588\uc2b5\ub2c8\ub2e4. \uc774\uc6a9\ubc95\uc740 \ud56d\ubaa9\uc744 \ucc38\uc870\ud574\uc8fc\uc138\uc694.\n\u30fbD66\ub2e4\uc774\uc2a4\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.\n\n\u30fb\uc5ed\uc790\uc758 \ub9d0 : \u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc740 \ud55c\uad6d\uc5d0\uc11c \ubc1c\ub9e4\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucc38\uace0\ud574\uc8fc\uc138\uc694.\n\u30fb\uc774\ub2c8\ud2f0\uc6c0\ub2d8, \uad11\ud669\ub2d8, CoC\ubc29 \uc5ec\ub7ec\ubd84 \uac10\uc0ac\ud569\ub2c8\ub2e4. by\ud638\ud761\ub3c4\uc758\uc2dd\ud558\uba74\uadc0\ucc2e\uc544\n"),E.$register_prefix_from_super_class(),y(E,"$initialize",function r(o){var q=this;return r.$$p=null,M(q,L(q,"initialize",r,!1,!0),"initialize",[o],null),q.locale="ko_kr"}),u(t[0],"TABLES",E.$translate_tables("ko_kr"))})}}]);