(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"1ezJ":function(e,t,a){a("pQ1d"),Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var t=[],a=e.$$$,n=e.$$,r=e.module,s=e.hash2,o=e.truthy;return function(t,i){var l=[r(t,"BCDice")].concat(i);!function(t,i){var l=r(t,"ArithmeticEvaluator"),$=[l].concat(i);!function(t,r){var i,l=[t].concat(r);e.def(t,"$eval",i=function(t,r){var i,$;if(null==r)r=s([],{});else if(!r.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(i=r.$$smap.round_type)&&(i=a(n(l,"RoundType"),"FLOOR")),o(t)&&o($=n(l,"Arithmetic").$eval(t,i))?$:0},i.$$arity=-2)}(e.get_singleton_class(l),$)}(l[0],l)}(t[0],t)},Opal.modules["bcdice/dice_table/range_table"]=function(e){var t=[],a=e.nil,n=e.$$,r=e.module,s=e.klass,o=e.send,i=e.truthy;return function(t,l){var $=[r(t,"BCDice")].concat(l);!function(t,l){var $=[r(t,"DiceTable")].concat(l);!function(t,r,l){var $,u,c,_,m,f,p,d,v,h=s(t,null,"RangeTable"),b=[h].concat(l);h.$$prototype.name=h.$$prototype.items=h.$$prototype.num_of_dice=h.$$prototype.num_of_sides=h.$$prototype.formatter=a,e.const_set(b[0],"RollResult",o(n(b,"Struct"),"new",["sum","values","content","formatted"],(($=function(){return(null==$.$$s?this:$.$$s).$alias_method("to_s","formatted")}).$$s=h,$.$$arity=0,$))),e.const_set(b[0],"Item",n(b,"Struct").$new("range","content")),e.const_set(b[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),e.const_set(b[0],"DEFAULT_FORMATTER",o(h,"lambda",[],($$2=function(e,t){return null==$$2.$$s||$$2,null==e&&(e=a),null==t&&(t=a),e.$name()+"("+t.$sum()+") \uff1e "+t.$content()},$$2.$$s=h,$$2.$$arity=2,$$2))),h.$attr_reader("name"),h.$attr_reader("num_of_dice"),h.$attr_reader("num_of_sides"),e.def(h,"$initialize",u=function(e,t,r){var s,o=u.$$p,l=o||a,$=a;return o&&(u.$$p=null),o&&(u.$$p=null),this.name=e.$freeze(),this.formatter=i(s=l)?s:n(b,"DEFAULT_FORMATTER"),$=n(b,"DICE_ROLL_METHOD_RE").$match(t),i($)||this.$raise(n(b,"ArgumentError"),this.name+": invalid dice roll method: "+t),this.num_of_dice=$["$[]"](1).$to_i(),this.num_of_sides=$["$[]"](2).$to_i(),this.$store(r)},u.$$arity=3),e.def(h,"$fetch",c=function(e){var t,r;return r=o(this.items,"find",[],((t=function(t){return null==t&&(t=a),t.$range()["$include?"](e)}).$$s=this,t.$$arity=1,t)),i(r)||this.$raise(n(b,"RangeError"),this.name+": value is out of range: "+e),r},c.$$arity=1),e.def(h,"$roll",_=function(t){var r,s,i,l,$=a;return r=($=t.$roll_barabara(this.num_of_dice,this.num_of_sides)).$sum(),s=n(b,"RollResult").$new(r,$,this.$fetch(r).$content()),i=[this.formatter["$[]"](this,s)],o(s,"formatted=",e.to_a(i)),"number"==typeof(l=i.length)||l["$-"](1),s},_.$$arity=1),h.$private(),e.def(h,"$store",m=function(e){var t,r,s,i,l;return i=o(e,"map",[],((t=function(e,n){return null==e&&(e=a),null==n&&(n=a),[(null==t.$$s?this:t.$$s).$coerce_to_int_range(e),n]}).$$s=this,t.$$arity=2,t)),l=o(i,"sort_by",[],((r=function(e,t){return null==e&&(e=a),null==t&&(t=a),e.$min()}).$$s=this,r.$$arity=2,r)),this.$assert_min_sum_is_covered(l),this.$assert_max_sum_is_covered(l),this.$assert_no_gap_or_overlap_in_ranges(l),this.items=o(l,"map",[],(s=function(e,t){return null==e&&(e=a),null==t&&(t=a),n(b,"Item").$new(e,t.$freeze()).$freeze()},s.$$s=this,s.$$arity=2,s)).$freeze(),this},m.$$arity=1),e.def(h,"$coerce_to_int_range",f=function(e){var t,r=a;return t=e,n(b,"Integer")["$==="](t)?n(b,"Range").$new(e,e):n(b,"Range")["$==="](t)&&i(i(r=e.$begin()["$is_a?"](n(b,"Integer")))?e.$end()["$is_a?"](n(b,"Integer")):r)?e:this.$raise(n(b,"TypeError"),this.name+": "+e+" ("+e.$class()+") must be an Integer or a Range with Integers ")},f.$$arity=1),e.def(h,"$assert_min_sum_is_covered",p=function(e){var t,r=a;return t=this.num_of_dice,r=e.$first()["$[]"](0),i(r["$include?"](t))||this.$raise(n(b,"RangeError"),this.name+": min value ("+t+") is not covered: "+r),this},p.$$arity=1),e.def(h,"$assert_max_sum_is_covered",d=function(e){var t,r,s,o=a;return r=this.num_of_sides,s="number"==typeof(t=this.num_of_dice)&&"number"==typeof r?t*r:t["$*"](r),o=e.$last()["$[]"](0),i(o["$include?"](s))||this.$raise(n(b,"RangeError"),this.name+": max value ("+s+") is not covered: "+o),this},d.$$arity=1),e.def(h,"$assert_no_gap_or_overlap_in_ranges",v=function(e){var t;return o(e,"each_cons",[2],((t=function(e,r){var s,o,l,$=null==t.$$s?this:t.$$s,u=a,c=a;return null==$.name&&($.name=a),null==e&&(e=a),null==r&&(r=a),u=e["$[]"](0),c=r["$[]"](0),l="number"==typeof(o=s=u.$max())?o+1:o["$+"](1),i(c["$include?"](s))&&$.$raise(n(b,"RangeError"),$.name+": Range overlap: "+u+" and "+c),i(c["$include?"](l))?a:$.$raise(n(b,"RangeError"),$.name+": Range gap: "+u+" and "+c)}).$$s=this,t.$$arity=2,t)),this},v.$$arity=1)}($[0],0,$)}($[0],$)}(t[0],t)},function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}var s=e.top,o=[],i=e.nil,l=e.$$$,$=e.$$,u=e.module,c=e.klass,_=e.truthy,m=e.send,f=e.hash2,p=e.range;s.$require("bcdice/arithmetic_evaluator"),s.$require("bcdice/dice_table/range_table"),function(s,o){var d=[u(s,"BCDice")].concat(o);!function(s,o){var d=[u(s,"GameSystem")].concat(o);!function(s,o,u){var d,v,h,b,E,y=c(s,o,"DoubleCross"),D=[y].concat(u);y.$$prototype.randomizer=i,e.const_set(D[0],"ID","DoubleCross"),e.const_set(D[0],"NAME","\u30c0\u30d6\u30eb\u30af\u30ed\u30b92nd,3rd"),e.const_set(D[0],"SORT_KEY","\u305f\u3075\u308b\u304f\u308d\u30592"),e.const_set(D[0],"HELP_MESSAGE",'\u30fb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9\uff08xDX+y@c or xDXc+y\uff09\n\u3000"(\u500b\u6570)DX(\u4fee\u6b63)@(\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024)" \u3082\u3057\u304f\u306f "(\u500b\u6570)DX(\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024)(\u4fee\u6b63)" \u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3000\u4fee\u6b63\u5024\u3082\u4ed8\u3051\u3089\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff0910dx\u3000\u300010dx+5@8\uff08OD tool\u5f0f)\u3000\u30005DX7+7-3\uff08\u75be\u98a8\u6012\u6fe4\u5f0f\uff09\n\n\u30fb\u5404\u7a2e\u8868\n\u3000\u30fb\u611f\u60c5\u8868\uff08ET\uff09\n\u3000\u3000\u30dd\u30b8\u30c6\u30a3\u30d6\u3068\u30cd\u30ac\u30c6\u30a3\u30d6\u306e\u4e21\u65b9\u3092\u632f\u3063\u3066\u3001\u8868\u306b\u306a\u3063\u3066\u3044\u308b\u5074\u306b\u25cb\u3092\u4ed8\u3051\u3066\u8868\u793a\u3057\u307e\u3059\u3002\n\u3000\u3000\u3082\u3061\u308d\u3093\u4efb\u610f\u3067\u9078\u3076\u90e8\u5206\u306f\u5909\u66f4\u3057\u3066\u69cb\u3044\u307e\u305b\u3093\u3002\n\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n'),y.$register_prefix("\\d+DX","ET"),function(s,o,u){var f,p,d,v,h=c(s,null,"DX"),b=[h].concat(u);h.$$prototype.modifier=h.$$prototype.critical_value=h.$$prototype.expression=h.$$prototype.num=h.$$prototype.modifier_str=h.$$prototype.target_value=i,h.$include($(b,"Translate")),e.def(h,"$initialize",f=function(e,t,a,n){return this.num=e,this.critical_value=t,this.modifier=a,this.target_value=n,this.modifier_str=$(b,"Format").$modifier(this.modifier),this.expression=this.$node_expression(),this.locale="ja_jp"},f.$$arity=4),e.def(h,"$execute",p=function(e){var n,r=i,s=i,o=i,u=i,c=i,m=i;if(_(t(this.critical_value,2)))return $(b,"Result").$new("("+this.expression+") \uff1e "+this.$translate("DoubleCross.DX.invalid_critical"));if(_(t(this.num,1)))return $(b,"Result").$failure("("+this.expression+") \uff1e "+this.$translate("DoubleCross.DX.auto_failure"));for(r=[],s=this.num,o=0;_((n=void 0,_(u="number"==typeof(n=s)?n>0:n["$>"](0))?t(o,l(l($(b,"CommonCommand"),"RerollDice"),"REROLL_LIMIT")):u));)c=e.$roll_barabara(s,10),m=$(b,"ValueGroup").$new(c,this.critical_value),r.$push(m),s=m.$num_of_critical_occurrences(),o=a(o,1);return this.$result(r)},p.$$arity=1),h.$private(),e.def(h,"$node_expression",d=function(){var e;return e=this.num+"DX"+this.critical_value+this.modifier_str,_(this.target_value)?e+">="+this.target_value:e},d.$$arity=0),e.def(h,"$result",v=function(t){var s,o,l=i,u=i,c=i,f=i,p=i,d=i,v=i;return l=$(b,"Result").$new(),u=[t["$[]"](0).$values()["$all?"](1)],m(l,"fumble=",e.to_a(u)),n(u.length,1),s=m(t,"map",[],"max".$to_proc()).$sum(),c=_(l["$fumble?"]())?0:a(s,this.modifier),o=_(l["$fumble?"]())?c+" ("+this.$translate("fumble")+")":c.$to_s(),f=["("+this.expression+")",""+t.$join("+")+this.modifier_str,o],_(this.target_value)&&(p=_(d=l["$fumble?"]()["$!"]())?r(c,this.target_value):d,_(p)?(m(l,"success=",e.to_a(u=[!0])),n(u.length,1)):(m(l,"failure=",e.to_a(u=[!0])),n(u.length,1)),v=this.$translate(_(p)?"success":"failure"),f.$push(v)),u=[f.$join(" \uff1e ")],m(l,"text=",e.to_a(u)),n(u.length,1),l},v.$$arity=1)}(D[0],0,D),function(t,a,n){var s,o,l,$,u,f=c(t,null,"ValueGroup");[f].concat(n),f.$$prototype.values=f.$$prototype.critical_value=i,f.$attr_reader("values"),f.$attr_reader("critical_value"),e.def(f,"$initialize",s=function(e,t){return this.values=e.$sort(),this.critical_value=t},s.$$arity=2),e.def(f,"$to_s",o=function(){return this.$max()+"["+this.values.$join(",")+"]"},o.$$arity=0),e.def(f,"$max",l=function(){var e;return _(m(this.values,"any?",[],((e=function(t){return null==t&&(t=i),(null==e.$$s?this:e.$$s)["$critical?"](t)}).$$s=this,e.$$arity=1,e)))?10:this.values.$max()},l.$$arity=0),e.def(f,"$num_of_critical_occurrences",$=function(){var e;return m(this.values,"count",[],((e=function(t){return null==t&&(t=i),(null==e.$$s?this:e.$$s)["$critical?"](t)}).$$s=this,e.$$arity=1,e))},$.$$arity=0),f.$private(),e.def(f,"$critical?",u=function(e){return r(e,this.critical_value)},u.$$arity=1)}(D[0],0,D),e.def(y,"$eval_game_system_specific_command",d=function(e){var t=i;return _(t=this.$parse_dx(e))?t.$execute(this.randomizer):e["$=="]("ET")?this.$roll_emotion_table():i},d.$$arity=1),y.$private(),e.def(y,"$parse_dx",v=function(e){var t;return _(t=this.$parse_dx_od(e))?t:this.$parse_dx_shippu_doto(e)},v.$$arity=1),e.def(y,"$parse_dx_od",h=function(e){var t,a,n=i,r=i;return n=l($(D,"Command"),"Parser").$new(/\d+DX/,f(["round_type"],{round_type:this.$round_type()})).$enable_critical().$restrict_cmp_op_to(i,">=").$parse(e),_(n)?(t=n.$command().$to_i(),a=_(r=n.$critical())?r:10,l(this.$class(),"DX").$new(t,a,n.$modify_number(),n.$target_number())):i},h.$$arity=1),e.def(y,"$parse_dx_shippu_doto",b=function(t){var a,n,r,s,o=i,u=i,c=i;return o=l($(D,"Command"),"Parser").$new(/\d+DX\d*/,f(["round_type"],{round_type:this.$round_type()})).$restrict_cmp_op_to(i,">=").$parse(t),_(o)?(n=m(o.$command().$split("DX",2),"map",[],((r=function(e){var t;return null==e&&(e=i),(t=e)===i||null==t?i:m(t,"to_i",[])}).$$s=this,r.$$arity=1,r)),s=null==(a=e.to_ary(n))[0]?i:a[0],u=_(c=u=null==a[1]?i:a[1])?c:10,l(this.$class(),"DX").$new(s,u,o.$modify_number(),o.$target_number())):i},b.$$arity=1),e.def(y,"$roll_emotion_table",E=function(){var e,t=i,a=i,n=i,r=i;return t=l(this.$class(),"POSITIVE_EMOTION_TABLE").$roll(this.randomizer),a=l(this.$class(),"NEGATIVE_EMOTION_TABLE").$roll(this.randomizer),e=this.randomizer.$roll_once(2)["$=="](1),n=_(e)?["\u25cb"+t.$content(),a.$content()]:[t.$content(),"\u25cb"+a.$content()],r=[this.$translate("DoubleCross.ET.name")+"("+t.$sum()+"-"+a.$sum()+")",n.$join(" - ")],$(D,"Result").$new(r.$join(" \uff1e "))},E.$$arity=0),function(t,a){var n,r,s=[t].concat(a);t.$private(),e.def(t,"$positive_emotion_table",n=function(e){return l($(s,"DiceTable"),"RangeTable").$new($(s,"I18n").$translate("DoubleCross.ET.positive.name",f(["locale"],{locale:e})),"1D100",[[p(1,5,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.1_5",f(["locale"],{locale:e}))],[p(6,10,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.6_10",f(["locale"],{locale:e}))],[p(11,15,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.11_15",f(["locale"],{locale:e}))],[p(16,20,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.16_20",f(["locale"],{locale:e}))],[p(21,25,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.21_25",f(["locale"],{locale:e}))],[p(26,30,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.26_30",f(["locale"],{locale:e}))],[p(31,35,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.31_35",f(["locale"],{locale:e}))],[p(36,40,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.36_40",f(["locale"],{locale:e}))],[p(41,45,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.41_45",f(["locale"],{locale:e}))],[p(46,50,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.46_50",f(["locale"],{locale:e}))],[p(51,55,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.51_55",f(["locale"],{locale:e}))],[p(56,60,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.56_60",f(["locale"],{locale:e}))],[p(61,65,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.61_65",f(["locale"],{locale:e}))],[p(66,70,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.66_70",f(["locale"],{locale:e}))],[p(71,75,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.71_75",f(["locale"],{locale:e}))],[p(76,80,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.76_80",f(["locale"],{locale:e}))],[p(81,85,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.81_85",f(["locale"],{locale:e}))],[p(86,90,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.86_90",f(["locale"],{locale:e}))],[p(91,95,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.91_95",f(["locale"],{locale:e}))],[p(96,100,!1),$(s,"I18n").$translate("DoubleCross.ET.positive.items.96_100",f(["locale"],{locale:e}))]])},n.$$arity=1),e.def(t,"$negative_emotion_table",r=function(e){return l($(s,"DiceTable"),"RangeTable").$new($(s,"I18n").$translate("DoubleCross.ET.negative.name",f(["locale"],{locale:e})),"1D100",[[p(1,5,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.1_5",f(["locale"],{locale:e}))],[p(6,10,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.6_10",f(["locale"],{locale:e}))],[p(11,15,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.11_15",f(["locale"],{locale:e}))],[p(16,20,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.16_20",f(["locale"],{locale:e}))],[p(21,25,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.21_25",f(["locale"],{locale:e}))],[p(26,30,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.26_30",f(["locale"],{locale:e}))],[p(31,35,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.31_35",f(["locale"],{locale:e}))],[p(36,40,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.36_40",f(["locale"],{locale:e}))],[p(41,45,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.41_45",f(["locale"],{locale:e}))],[p(46,50,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.46_50",f(["locale"],{locale:e}))],[p(51,55,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.51_55",f(["locale"],{locale:e}))],[p(56,60,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.56_60",f(["locale"],{locale:e}))],[p(61,65,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.61_65",f(["locale"],{locale:e}))],[p(66,70,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.66_70",f(["locale"],{locale:e}))],[p(71,75,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.71_75",f(["locale"],{locale:e}))],[p(76,80,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.76_80",f(["locale"],{locale:e}))],[p(81,85,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.81_85",f(["locale"],{locale:e}))],[p(86,90,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.86_90",f(["locale"],{locale:e}))],[p(91,95,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.91_95",f(["locale"],{locale:e}))],[p(96,100,!1),$(s,"I18n").$translate("DoubleCross.ET.negative.items.96_100",f(["locale"],{locale:e}))]]).$freeze()},r.$$arity=1)}(e.get_singleton_class(y),D),e.const_set(D[0],"POSITIVE_EMOTION_TABLE",y.$positive_emotion_table("ja_jp").$freeze()),e.const_set(D[0],"NEGATIVE_EMOTION_TABLE",y.$negative_emotion_table("ja_jp").$freeze())}(d[0],$(d,"Base"),d)}(d[0],d)}(o[0],o)}(Opal)}}]);