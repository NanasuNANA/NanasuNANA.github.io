(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[8780],{28780:function(t,e,n){n(93683),function(t){function e(t,e){return"number"==typeof t&&"number"==typeof e?t<=e:t["$<="](e)}function n(t,e){return"number"==typeof t&&"number"==typeof e?t+e:t["$+"](e)}function $(t,e){return"number"==typeof t&&"number"==typeof e?t/e:t["$/"](e)}function i(t,e){return"number"==typeof t&&"number"==typeof e?t-e:t["$-"](e)}var o,r,u,_,s,a,f,d,l,c,g,m,p,y,b,h,x,v,D,O,N=[],S=t.nil,R=t.$$$,z=t.$$,V=t.module,j=t.klass,A=t.send2,k=t.truthy,B=t.hash,E=t.hash2,I=t.send;o=N,r=O=[V(N[0],"BCDice")].concat(o),u=D=[V(O[0],"GameSystem")].concat(r),x=j(D[0],z(D,"Base"),"Skynauts"),v=[x].concat(u),x.$$prototype.randomizer=S,t.const_set(v[0],"ID","Skynauts"),t.const_set(v[0],"NAME","\u6b6f\u8eca\u306e\u5854\u306e\u63a2\u7a7a\u58eb\uff08\u516d\u7573\u9593\u5e7b\u60f3\u7a7a\u9593\uff09"),t.const_set(v[0],"SORT_KEY","\u306f\u304f\u308b\u307e\u306e\u3068\u3046\u306e\u3059\u304b\u3044\u306e\u304a\u3064"),t.const_set(v[0],"HELP_MESSAGE","\u25c6\u5224\u5b9a\u3000(SNn)\u3001(2D6<=n)\u3000n:\u76ee\u6a19\u5024\uff08\u7701\u7565\u6642:7\uff09\n\u3000\u4f8b\uff09SN5\u3000SN5\u3000SN(3+2)\n\u25c6\u822a\u884c\u30c1\u30a7\u30c3\u30af\u3000(NV+n)\u3000n:\u4fee\u6b63\u5024\uff08\u7701\u7565\u6642:0\uff09\n\u3000\u4f8b\uff09NV\u3000NV+1\n\u25c6\u30c0\u30e1\u30fc\u30b8\u30c1\u30a7\u30c3\u30af\u3000(Dx/y@m)\u3000x:\u30c0\u30e1\u30fc\u30b8\u5de6\u5074\u306e\u5024\u3001y:\u30c0\u30e1\u30fc\u30b8\u53f3\u5074\u306e\u5024\n\u3000m:\u300a\u5f3e\u9053\u5b66\u300b\uff08\u7701\u7565\u53ef\uff09\u4e0a:8\u3001\u4e0b:2\u3001\u5de6:4\u3001\u53f3:6\n\u3000\u98db\u7a7a\u8247\u30b7\u30fc\u30c8\u5916\u306e\u5ea7\u6a19\u306f()\u304c\u4ed8\u304d\u307e\u3059\u3002\n\u3000\u4f8b\uff09 D/4\u3000D19/2\u3000D/3@8\u3000D[\u5927\u63fa\u308c]/2\n\u25c6\u7832\u6483\u5224\u5b9a+\u30c0\u30e1\u30fc\u30b8\u30c1\u30a7\u30c3\u30af\u3000(BOMn/Dx/y@m)\u3000n:\u76ee\u6a19\u5024\uff08\u7701\u7565\u6642:7\uff09\n\u3000x:\u30c0\u30e1\u30fc\u30b8\u5de6\u5074\u306e\u5024\u3001y:\u30c0\u30e1\u30fc\u30b8\u53f3\u5074\u306e\u5024\n\u3000m:\u300a\u5f3e\u9053\u5b66\u300b\uff08\u7701\u7565\u53ef\uff09\u4e0a:8\u3001\u4e0b:2\u3001\u5de6:4\u3001\u53f3:6\n\u3000\u4f8b\uff09 BOM/D/4\u3000BOM9/D19/2@4\n\u25c6\u300a\u56de\u907f\u904b\u52d5\u300b\u3000(AVOn@mXX)\u3000n:\u76ee\u6a19\u5024\uff08\u7701\u7565\u6642:7\uff09\n\u3000m:\u56de\u907f\u65b9\u5411\u3002\u4e0a:8\u3001\u4e0b:2\u3001\u5de6:4\u3001\u53f3:6\u3001XX\uff1a\u30c0\u30e1\u30fc\u30b8\u30c1\u30a7\u30c3\u30af\u7d50\u679c\n\u3000\u4f8b\uff09\n\u3000AVO9@8[\u7e261,\u6a2a4],[\u7e262,\u6a2a6],[\u7e263,\u6a2a8]\u3000AVO@2[\u7e266,\u6a2a4],[\u7e262,\u6a2a6]\n"),x.$register_prefix("D","2D6<=","SN","NV","AVO","BOM"),t.def(x,"$initialize",_=function(e){var n=this;return _.$$p&&(_.$$p=null),A(n,t.find_super_dispatcher(n,"initialize",_,!1,!0),"initialize",[e],null),n.round_type=R(z(v,"RoundType"),"FLOOR")},_.$$arity=1),t.def(x,"$eval_game_system_specific_command",s=function(t){var e,n,$,i,o=this;return o.$debug("\n=======================================\n"),o.$debug("eval_game_system_specific_command command",t),k(e=k(n=k($=k(i=o.$get_judge_result(t))?i:o.$navigation_result(t))?$:o.$get_fire_result(t))?n:o.$get_bomb_result(t))?e:o.$get_avoid_result(t)},s.$$arity=1),x.$private(),t.def(x,"$get_judge_result",a=function(t){var $,i=this,o=S,r=S,u=S,_=S,s=S;return k(o=k($=/^2D6<=(\d)$/i.$match(t))?$:/^SN(\d*)$/i.$match(t))?(i.$debug("====get_judge_result===="),r=k(o["$[]"](1)["$empty?"]())?7:o["$[]"](1).$to_i(),i.$debug("\u76ee\u6a19\u5024",r),s="(2D6<="+r+") \uff1e "+(_=(u=i.randomizer.$roll_barabara(2,6)).$sum())+"["+u.$join(",")+"] \uff1e "+_,k(e(_,2))?z(v,"Result").$fumble(n(s," \uff1e \u30d5\u30a1\u30f3\u30d6\u30eb")):k(e(_,r))?z(v,"Result").$success(n(s," \uff1e \u6210\u529f")):z(v,"Result").$failure(n(s," \uff1e \u5931\u6557"))):S},a.$$arity=1),t.def(x,"$navigation_result",f=function(t){var i=this,o=S,r=S,u=S,_=S,s=S;return k(o=/^NV(\+(\d+))?$/.$match(t))?(i.$debug("====navigation_result===="),r=o["$[]"](2).$to_i(),i.$debug("\u79fb\u52d5\u4fee\u6b63",r),u=i.randomizer.$roll_once(6),s=n(_=k(e($(u,2).$to_i(),0))?1:$(u,2).$to_i(),r),i.$debug("\u79fb\u52d5\u30a8\u30ea\u30a2\u6570",s),z(v,"Result").$new("\u822a\u884c\u30c1\u30a7\u30c3\u30af(\u6700\u4f4e1)\u3000(1D6/2+"+r+") \uff1e "+u+" /2+"+r+" \uff1e "+_+"+"+r+" \uff1e "+s+"\u30a8\u30ea\u30a2\u9032\u3080")):S},f.$$arity=1),t.const_set(v[0],"DIRECTION_INFOS",B(1,E(["name","position_diff"],{name:"\u5de6\u4e0b",position_diff:E(["x","y"],{x:-1,y:1})}),2,E(["name","position_diff"],{name:"\u4e0b",position_diff:E(["x","y"],{x:0,y:1})}),3,E(["name","position_diff"],{name:"\u53f3\u4e0b",position_diff:E(["x","y"],{x:1,y:1})}),4,E(["name","position_diff"],{name:"\u5de6",position_diff:E(["x","y"],{x:-1,y:0})}),6,E(["name","position_diff"],{name:"\u53f3",position_diff:E(["x","y"],{x:1,y:0})}),7,E(["name","position_diff"],{name:"\u5de6\u4e0a",position_diff:E(["x","y"],{x:-1,y:-1})}),8,E(["name","position_diff"],{name:"\u4e0a",position_diff:E(["x","y"],{x:0,y:-1})}),9,E(["name","position_diff"],{name:"\u53f3\u4e0a",position_diff:E(["x","y"],{x:1,y:-1})})).$freeze()),t.def(x,"$get_direction_info",d=function(t,e,n){var $=S;return null==n&&(n=S),$=z(v,"DIRECTION_INFOS")["$[]"](t.$to_i()),k($["$nil?"]())?n:$["$[]"](e)},d.$$arity=-3),t.def(x,"$get_fire_result",l=function(t){var e=this,n=S,$=S,i=S,o=S,r=S,u=S;return k(n=/^D([12346789]*)(\[.+\])*\/(\d{1,2})(@([2468]))?$/.$match(t))?(e.$debug("====get_fire_result===="),$=n["$[]"](3).$to_i(),i=n["$[]"](1).$to_s(),o=n["$[]"](5).$to_i(),e.$debug("fire_count",$),e.$debug("fire_range",i),e.$debug("ballistics",o),r=e.$get_fire_point(i,$),u=[t,e.$get_fire_point_text(r,$).$text()],k(o["$!="](0))&&(u["$<<"]("\u300a\u5f3e\u9053\u5b66\u300b:"+e.$get_direction_info(o,"name","")+"\n"),u["$<<"](e.$get_fire_point_text(r,$,o).$text())),z(v,"Result").$new(u.$join(" \uff1e "))):S},l.$$arity=1),t.def(x,"$get_fire_point",c=function(t,e){var $,i=this,o=S;return i.$debug("====get_fire_point===="),o=[],I(e,"times",[],(($=function(e){var i,r,u,_=null==$.$$s?this:$.$$s,s=S;return null==_.randomizer&&(_.randomizer=S),null==e&&(e=S),_.$debug("\n\u7832\u6483\u56de\u6570",n(e,1)),o["$<<"]([]),r=_.randomizer.$roll_once(6),u=_.randomizer.$roll_sum(2,6),s=[u,r],o["$[]"](-1)["$<<"](s),_.$debug("\u7740\u5f3e\u70b9",o),I(t,"chars",[],((i=function(t){var e=null==i.$$s?this:i.$$s,$=S;return null==t&&(t=S),e.$debug("\u7bc4\u56f2",t),$=e.$get_direction_info(t,"position_diff",E([],{})),s=[n(u,$["$[]"]("x").$to_i()),n(r,$["$[]"]("y").$to_i())],o["$[]"](-1)["$<<"](s),e.$debug("\u7740\u5f3e\u70b9:\u7bc4\u56f2",o)}).$$s=_,i.$$arity=1,i))}).$$s=i,$.$$arity=1,$)),i.$debug("\n\u6700\u7d42\u7740\u5f3e\u70b9",o),o},c.$$arity=2),t.def(x,"$get_fire_point_text",g=function(e,$,i){var o,r=S;return null==i&&(i=0),this.$debug("====get_fire_point_text===="),r=[],I(e,"each",[],((o=function(e){var $,u=S;return null==e&&(e=S),u="",I(e,"each",[],(($=function(e,o){var r,_,s=null==$.$$s?this:$.$$s;return null==e&&(e=S),null==o&&(o=S),_=s.$get_move_point(e,o,i),r=t.to_ary(_),u=n(u,k(s["$in_map_position?"](e=null==r[0]?S:r[0],o=null==r[1]?S:r[1]))?"[\u7e26"+o+",\u6a2a"+e+"]":"([\u7e26"+o+",\u6a2a"+e+"])"),s.$debug("\u7740\u5f3e\u70b9\u30c6\u30ad\u30b9\u30c8",u)}).$$s=null==o.$$s?this:o.$$s,$.$$arity=2,$)),r["$<<"](u)}).$$s=this,o.$$arity=1,o)),z(v,"Result").$new(r.$join(","))},g.$$arity=-3),t.def(x,"$in_map_position?",m=function(t,n){var $,i,o=S;return k($=k(i=e(1,n))?e(n,6):i)?k(o=e(2,t))?e(t,12):o:$},m.$$arity=2),t.def(x,"$get_move_point",p=function(t,e,$){var i=this,o=S;return i.$debug("====get_move_point===="),i.$debug("\u65b9\u5411",$),i.$debug("\u5ea7\u6a19\u79fb\u52d5\u524d(x,y)",t,e),t=n(t,(o=i.$get_direction_info($,"position_diff",E([],{})))["$[]"]("x").$to_i()),e=n(e,o["$[]"]("y").$to_i()),i.$debug("\n\u5ea7\u6a19\u79fb\u52d5\u5f8c(x,y)",t,e),[t,e]},p.$$arity=3),t.def(x,"$get_bomb_result",y=function(e){var $=this,o=S,r=S,u=S,_=S,s=S,a=S;return k(o=/^BOM(\d*)?\/D([12346789]*)(\[.+\])*\/(\d+)(@([2468]))?$/i.$match(e))?($.$debug("====get_bomb_result====",e),r=o["$[]"](1).$to_s(),u=o["$[]"](6).$to_i(),$.$debug("\u5f3e\u9053\u5b66\u65b9\u5411",u),_=$.$get_judge_result(n("SN",r)),k(_["$failure?"]())?(s=[e+" \uff1e "+_.$text()],I(_,"text=",t.to_a(s)),i(s.length,1),_):(a=e.$slice(/D([12346789]*)(\[.+\])*\/(\d+)(@([2468]))?/),s=[e+" \uff1e "+_.$text()+"\n \uff1e "+$.$get_fire_result(a).$text()],I(_,"text=",t.to_a(s)),i(s.length,1),_)):S},y.$$arity=1),t.def(x,"$get_avoid_result",b=function(e){var $=this,o=S,r=S,u=S,_=S,s=S,a=S,f=S,d=S;return k(o=/^AVO(\d*)?(@([2468]))(\(?\[\u7e26\d+,\u6a2a\d+\]\)?,?)+$/.$match(e))?($.$debug("====get_avoid_result====",e),r=o["$[]"](3).$to_i(),$.$debug("\u56de\u907f\u65b9\u5411",r),u=e.$slice(/^AVO(\d*)?(@([2468]))/),_=$.$get_judge_result(n("SN",z(v,"Regexp").$last_match(1).$to_s())),k(_["$failure?"]())?(s=[u+" \uff1e \u300a\u56de\u907f\u904b\u52d5\u300b"+_.$text()],I(_,"text=",t.to_a(s)),i(s.length,1),_):(a=e.$slice(/(\(?\[\u7e26\d+,\u6a2a\d+\]\)?,?)+/),d=(f=$.$scan_fire_point(a)).$size(),z(v,"Result").$success([u,"\u300a\u56de\u907f\u904b\u52d5\u300b"+_.$text()+"\n",a,n(n("\u300a\u56de\u907f\u904b\u52d5\u300b:",$.$get_direction_info(r,"name","")),"\n"),$.$get_fire_point_text(f,d,r).$text()].$compact().$join(" \uff1e ")))):S},b.$$arity=1),t.def(x,"$scan_fire_point",h=function(e){var n,$=S;return this.$debug("====scan_fire_point====",e),e=e.$gsub(/\(|\)/,""),$=[],I(e.$split(/\],/),"each",[],((n=function(e){var o,r=null==n.$$s?this:n.$$s;return null==e&&(e=S),r.$debug("point_text",e),$["$<<"]([]),I(e.$split(/\]/),"each",[],((o=function(e){var n=null==o.$$s?this:o.$$s,r=S,u=S;return null==e&&(e=S),n.$debug("point",e),$["$[]"](-1)["$<<"]([]),k(e["$=~"](/[^\d]*(\d+),[^\d]*(\d+)/))?(r=z(v,"Regexp").$last_match(1).$to_i(),u=[-1,[z(v,"Regexp").$last_match(2).$to_i(),r]],I($["$[]"](-1),"[]=",t.to_a(u)),i(u.length,1),n.$debug("\u7740\u5f3e\u70b9",$)):S}).$$s=r,o.$$arity=1,o))}).$$s=this,n.$$arity=1,n)),$},h.$$arity=1)}(Opal)}}]);