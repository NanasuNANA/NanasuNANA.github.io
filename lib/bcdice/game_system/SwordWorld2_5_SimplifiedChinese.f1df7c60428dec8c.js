(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[6152],{8463:(pe,ke,ye)=>{ye(9993),Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var M,j,i,o,k,A,z,Q,Y=e.module,U=e.ensure_kwargs,c=e.truthy,I=e.thrower,K=e.def,d=[],W=e.nil,b=e.$$$;return M=d,j=Q=[Y(d[0],"BCDice")].concat(M),z=[A=Y(Q[0],"ArithmeticEvaluator")].concat(j),o=[i=e.get_singleton_class(A)].concat(z),k=e.$r(o),K(i,"$eval",function(C,r){try{I("eval_return");var x,F=W;return null==(x=(r=U(r)).$$smap.round_type)&&(x=b(k("RoundType"),"FLOOR")),c(C)&&c(F=k("Arithmetic").$eval(C,x))?F:0}catch(P){if(P===e.t_eval_return)return P.$v;throw P}},-2)},Opal.modules["i18n/backend/fallbacks"]=function(e){var B,_,r,n,o,k,Y=e.module,U=e.class_variable_set,c=e.truthy,I=e.class_variable_get,K=e.def,d=e.send,W=e.send2,b=e.find_super,N=e.hash2,M=e.find_block_super,E=e.neqeq,Q=e.thrower,V=e.return_val,j=[],A=e.nil,z=e.$$$;return B=j,k=[o=Y(j[0],"I18n")].concat(B),U(k[0],"@@fallbacks",A),_=e.get_singleton_class(o),r=[_].concat(k),n=e.$r(r),K(_,"$fallbacks",function(){var P=A;return U(r[1],"@@fallbacks",c(null!=r[1].$$cvars["@@fallbacks"]?"class variable":A)&&c(P=I(r[1],"@@fallbacks",!1))?P:z(z(n("I18n"),"Locale"),"Fallbacks").$new()),c(P=n("Thread").$current()["$[]"]("i18n_fallbacks"))?P:I(r[1],"@@fallbacks",!1)}),K(_,"$fallbacks=",function(F){var P;return U(r[1],"@@fallbacks",c(F["$is_a?"](n("Array")))?z(z(n("I18n"),"Locale"),"Fallbacks").$new(F):F),P=["i18n_fallbacks",I(r[1],"@@fallbacks",!1)],d(n("Thread").$current(),"[]=",P),P[P.length-1]}),function(_,C){var F,P,R,p,n=[Y(_,"Backend")].concat(C);return F=n,R=[P=Y(n[0],"Fallbacks")].concat(F),p=e.$r(R),K(P,"$translate",function D(y,g,a){try{var f=Q("return"),l=D.$$p||A,T=this,u=A,m=A;return D.$$p=null,null==a&&(a=p("EMPTY_HASH")),c(a.$fetch("fallback",!0))?c(a["$[]"]("fallback_in_progress"))?W(T,b(T,"translate",D,!1,!0),"translate",[y,g,a],l):(c(a["$[]"]("default"))&&(u=T["$extract_non_symbol_default!"](a)),m=a.$merge(N(["fallback_in_progress"],{fallback_in_progress:!0})),d(p("I18n").$fallbacks()["$[]"](y),"each",[],function t(S){var s=null==t.$$s?this:t.$$s;null==S&&(S=A);try{return d(s,"catch",["exception"],function v(){var $=null==v.$$s?this:v.$$s,ee=A;if(ee=W($,M($,"translate",v.$$def||t.$$def||D,!1,!1),"translate",[S,g,m],null),c(ee["$nil?"]()))return A;E(y.$to_s(),S.$to_s())&&$.$on_fallback(y,S,g,a),f.$throw(ee)},{$$s:s,$$ret:f})}catch(v){if(!e.rescue(v,[z(p("I18n"),"InvalidLocale")]))throw v;try{return A}finally{e.pop_exception()}}},{$$s:T}),c(a["$key?"]("default"))&&c(a["$[]"]("default")["$nil?"]())?A:c(u)?W(T,b(T,"translate",D,!1,!0),"translate",[y,A,a.$merge(N(["default"],{default:u}))],null):T.$throw("exception",z(p("I18n"),"MissingTranslation").$new(y,g,a))):W(T,b(T,"translate",D,!1,!0),"translate",[y,g,a],l)}catch(t){if(t===f)return t.$v;throw t}},-3),K(P,"$extract_non_symbol_default!",function(y){var a,g=A;return g=[y["$[]"]("default")].$flatten(),a=d(g,"detect",[],function(l){return null==l&&(l=A),l["$is_a?"](p("Symbol"))["$!"]()}),c(a)&&y["$[]="]("default",g["$[]"](0,g.$index(a))),a}),K(P,"$exists?",function D(y,g,a){try{var f=Q("return"),l=D.$$p||A,T=this;return D.$$p=null,null==a&&(a=p("EMPTY_HASH")),c(a.$fetch("fallback",!0))?(d(p("I18n").$fallbacks()["$[]"](y),"each",[],function u(m){var t=null==u.$$s?this:u.$$s;null==m&&(m=A);try{if(!c(W(t,M(t,"exists?",u.$$def||D,!1,!1),"exists?",[m,g],null)))return A;f.$throw(!0)}catch(S){if(!e.rescue(S,[z(p("I18n"),"InvalidLocale")]))throw S;try{return A}finally{e.pop_exception()}}},{$$s:T,$$ret:f}),!1):W(T,b(T,"exists?",D,!1,!0),"exists?",[y,g,a],l)}catch(u){if(u===f)return u.$v;throw u}},-3),P.$private(),K(P,"$on_fallback",V(A))}(k[0],k)},Opal.modules["bcdice/randomizer"]=function(e){var o,x,F,P,R,p,_,C,U=e.klass,c=e.const_set,I=e.def,K=e.truthy,d=e.rb_gt,W=e.rb_plus,b=e.rb_le,N=e.send,M=e.rb_minus,E=e.eqeq,Q=e.rb_times,V=e.eqeqeq,j=e.rb_ge,A=[],z=e.nil,i=e.$$$;return o=A,_=[(0,e.module)(A[0],"BCDice")].concat(o),C=e.$r(_),x=_,P=[F=U(_[0],null,"Randomizer")].concat(x),R=e.$r(P),(p=F.$$prototype).rand_results=p.detailed_rand_results=z,c(P[0],"UPPER_LIMIT_DICE_TIMES",200),c(P[0],"UPPER_LIMIT_DICE_SIDES",1e4),c(P[0],"UPPER_LIMIT_RANDS",1e4),I(F,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),F.$attr_reader("rand_results"),F.$attr_reader("detailed_rand_results"),c(P[0],"DetailedRandResult",R("Struct").$new("kind","sides","value")),I(F,"$roll_barabara",function(y,g){var a=this;return K(d(W(a.rand_results.$size(),y),R("UPPER_LIMIT_RANDS")))&&a.$raise(R("TooManyRandsError")),K(b(y,0))||K(d(y,R("UPPER_LIMIT_DICE_TIMES")))?[]:N(R("Array"),"new",[y],function f(){return(null==f.$$s?this:f.$$s).$roll_once(g)},{$$s:a})}),I(F,"$roll_sum",function(y,g){return this.$roll_barabara(y,g).$sum()}),I(F,"$roll_once",function(y){var a=z;return K(b(y,0))||K(d(y,R("UPPER_LIMIT_DICE_SIDES")))?0:(a=this.$rand_inner(y),this.$push_to_detail("normal",y,a),a)}),I(F,"$roll_index",function(y){return M(this.$roll_once(y),1)}),I(F,"$roll_tens_d10",function(){var a,g=z;return g=this.$rand_inner(10),E(g,10)&&(g=0),a=Q(g,10),this.$push_to_detail("tens_d10",10,a),a}),I(F,"$roll_d9",function(){var g;return g=M(this.$rand_inner(10),1),this.$push_to_detail("d9",10,g),g}),I(F,"$roll_d66",function(y){var f,a=z;return a=N(R("Array"),"new",[2],function l(){return(null==l.$$s?this:l.$$s).$roll_once(6)},{$$s:this}),V(i(R("D66SortType"),"ASC"),f=y)?a["$sort!"]():V(i(R("D66SortType"),"DESC"),f)&&a["$sort!"]()["$reverse!"](),W(Q(a["$[]"](0),10),a["$[]"](1))}),F.$private(),I(F,"$rand_inner",function(y){var a,g=this;return K(j(g.rand_results.$size(),R("UPPER_LIMIT_RANDS")))&&g.$raise(R("TooManyRandsError")),a=g.$random(y),g.rand_results["$<<"]([a,y]),a}),I(F,"$random",function(y){return W(R("Kernel").$rand(y),1)}),I(F,"$push_to_detail",function(y,g,a){var l;return l=R("DetailedRandResult").$new(y,g,a),this.detailed_rand_results.$push(l)}),U(_[0],C("StandardError"),"TooManyRandsError"),z},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var N,V,B,o,k,_,C,A,E,Y=e.module,U=e.klass,c=e.def,I=e.truthy,K=e.return_val,d=[],W=e.nil;return N=d,V=E=[Y(d[0],"BCDice")].concat(N),B=A=[Y(E[0],"DiceTable")].concat(V),k=[o=U(A[0],null,"RollResult")].concat(B),_=e.$r(k),(C=o.$$prototype).table_name=C.value=C.body=W,c(o,"$initialize",function(n,x,F){var P=this;return P.table_name=n,P.value=x,P.body=F}),o.$attr_reader("table_name"),o.$attr_reader("value"),o.$attr_reader("body"),c(o,"$to_s",function(){var n=this;return n.table_name+"("+n.value+") \uff1e "+n.body}),c(o,"$last_body",function(){var n=this;return I(n.body["$is_a?"](_("RollResult")))?n.body.$last_body():n.body}),c(o,"$empty?",K(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var N,V,B,o,k,_,C,A,E,Y=e.module,U=e.klass,c=e.truthy,I=e.def,K=e.rb_minus,d=[],W=e.nil;return N=d,V=E=[Y(d[0],"BCDice")].concat(N),B=A=[Y(E[0],"DiceTable")].concat(V),k=[o=U(A[0],null,"ChainTable")].concat(B),_=e.$r(k),(C=o.$$prototype).times=C.sides=C.items=C.name=W,I(o,"$initialize",function(n,x,F){var P=this,R=W;return P.name=n,P.items=F.$freeze(),R=/(\d+)D(\d+)/i.$match(x),c(R)||P.$raise(_("ArgumentError"),"Unexpected table type: "+x),P.times=R["$[]"](1).$to_i(),P.sides=R["$[]"](2).$to_i()}),I(o,"$roll",function(n){var F,P,x=this,R=W;return F=n.$roll_sum(x.times,x.sides),P=K(F,x.times),R=x.items["$[]"](P),c(R["$respond_to?"]("roll"))&&(R=R.$roll(n)),_("RollResult").$new(x.name,F,R)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var Q,z,_,C,r,n,x,B,j,Y=e.module,U=e.klass,c=e.hash2,I=e.defs,K=e.def,d=e.rb_plus,W=e.rb_times,b=e.rb_minus,N=[],M=e.nil;return Q=N,z=j=[Y(N[0],"BCDice")].concat(Q),_=B=[Y(j[0],"DiceTable")].concat(z),r=[C=U(B[0],null,"D66GridTable")].concat(_),n=e.$r(r),(x=C.$$prototype).name=x.items=M,I(C,"$from_i18n",function(P,R){var D=M;return D=n("I18n").$t(P,c(["locale","raise"],{locale:R,raise:!0})),this.$new(D["$[]"]("name"),D["$[]"]("items"))}),K(C,"$initialize",function(P,R){return this.name=P,this.items=R.$freeze()}),K(C,"$roll",function(P){var p,D,y,g,a;return p=P.$roll_once(6),D=P.$roll_once(6),y=d(W(p,10),D),g=b(p,1),a=b(D,1),n("RollResult").$new(this.name,y,this.items["$[]"](g)["$[]"](a))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var M,j,k,_,C,r,z,i,Q,Y=e.module,U=e.klass,c=e.hash2,I=e.defs,K=e.def,W=[],b=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),M=W,j=Q=[Y(W[0],"BCDice")].concat(M),z=[Y(Q[0],"DiceTable")].concat(j),i=e.$r(z),k=z,C=[_=U(z[0],i("D66GridTable"),"D66HalfGridTable")].concat(k),r=e.$r(C),I(_,"$from_i18n",function(x,F){var R=b;return R=r("I18n").$t(x,c(["locale","raise"],{locale:F,raise:!0})),this.$new(R["$[]"]("name"),R["$[]"]("items_1_2_3"),R["$[]"]("items_4_5_6"))}),K(_,"$initialize",function(x,F,P){return this.name=x,this.items=[F,F,F,P,P,P].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var M,j,k,_,C,r,z,i,Q,Y=e.module,U=e.klass,c=e.hash2,I=e.defs,K=e.def,W=[],b=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),M=W,j=Q=[Y(W[0],"BCDice")].concat(M),z=[Y(Q[0],"DiceTable")].concat(j),i=e.$r(z),k=z,C=[_=U(z[0],i("D66GridTable"),"D66OneThirdTable")].concat(k),r=e.$r(C),I(_,"$from_i18n",function(x,F){var R=b;return R=r("I18n").$t(x,c(["locale","raise"],{locale:F,raise:!0})),this.$new(R["$[]"]("name"),R["$[]"]("items_1_2"),R["$[]"]("items_3_4"),R["$[]"]("items_5_6"))}),K(_,"$initialize",function(x,F,P,R){return this.name=x,this.items=[F,F,P,P,R,R].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var j,B,r,n,x,F,P,k,z,Y=e.module,U=e.klass,c=e.hash2,I=e.defs,K=e.def,d=e.eqeqeq,W=e.rb_plus,b=e.rb_times,N=e.truthy,M=[],E=e.nil,Q=e.$$$;return j=M,B=z=[Y(M[0],"BCDice")].concat(j),r=k=[Y(z[0],"DiceTable")].concat(B),x=[n=U(k[0],null,"D66Table")].concat(r),F=e.$r(x),(P=n.$$prototype).sort_type=P.items=P.name=E,I(n,"$from_i18n",function(p,D){var a,g=E;return g=F("I18n").$t(p,c(["locale"],{locale:D})),a=F("D66SortType").$const_get(g["$[]"]("d66_sort_type")),this.$new(g["$[]"]("name"),a,g["$[]"]("items"))}),K(n,"$initialize",function(p,D,y){var g=this;return g.name=p,g.sort_type=D,g.items=y.$freeze()}),K(n,"$roll",function(p){var D=this,y=E,g=E,a=E,f=E;return y=p.$roll_barabara(2,6),d(Q(F("D66SortType"),"ASC"),g=D.sort_type)?y["$sort!"]():d(Q(F("D66SortType"),"DESC"),g)&&y["$sort!"]()["$reverse!"](),a=W(b(y["$[]"](0),10),y["$[]"](1)),f=N(g=D.items["$[]"](a))?g:D.items["$[]"](a.$to_s()),N(f["$respond_to?"]("roll"))&&(f=f.$roll(p)),F("RollResult").$new(D.name,a,f)}),K(n,"$choice",function(p){return F("RollResult").$new(this.name,p,this.items["$[]"](p))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var A,o,_,C,i,Y=e.module,U=e.klass,c=e.hash2,I=e.send,K=e.to_ary,d=e.rb_plus,W=e.rb_times,b=e.send2,N=e.find_super,M=e.def,Q=[],V=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),A=Q,o=i=[Y(Q[0],"BCDice")].concat(A),_=[Y(i[0],"DiceTable")].concat(o),C=e.$r(_),M(U(_[0],C("D66Table"),"D66LeftRangeTable"),"$initialize",function F(P,R,p){var g;return F.$$p=null,g=c([],{}),I(p,"each",[],function(f){var l,m;return null==f&&(f=V),l=K(f),m=null==l[1]?V:l[1],I(null==l[0]?V:l[0],"each",[],function(S){return null==S&&(S=V),I(m,"each_with_index",[],function(v,$){var ee,te;return null==v&&(v=V),null==$&&($=V),te=d(W(S,10),d($,1)),I(g,"[]=",ee=[te,v]),ee[ee.length-1]})})}),b(this,N(this,"initialize",F,!1,!0),"initialize",[P,R,g],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var V,i,C,r,n,x,F,o,A,Y=e.module,U=e.klass,c=e.hash2,I=e.defs,K=e.def,d=e.truthy,W=e.rb_minus,b=e.rb_plus,N=e.rb_times,M=[],E=e.nil;return V=M,i=A=[Y(M[0],"BCDice")].concat(V),C=o=[Y(A[0],"DiceTable")].concat(i),n=[r=U(o[0],null,"D66ParityTable")].concat(C),x=e.$r(n),(F=r.$$prototype).odd=F.even=F.name=E,I(r,"$from_i18n",function(R,p){var y=E;return y=x("I18n").$t(R,c(["locale","raise"],{locale:p,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("odd"),y["$[]"]("even"))}),K(r,"$initialize",function(R,p,D){var y=this;return y.name=R,y.odd=p.$freeze(),y.even=D.$freeze()}),K(r,"$roll",function(R){var y,a,f,p=this,D=E;return D=R.$roll_once(6),y=R.$roll_once(6),a=(d(D["$odd?"]())?p.odd:p.even)["$[]"](W(y,1)),f=b(N(D,10),y),x("RollResult").$new(p.name,f,a)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var M,j,o,k,_,C,r,z,Q,Y=e.module,U=e.klass,c=e.def,I=e.rb_plus,K=e.rb_times,d=e.send,W=[],b=e.nil;return M=W,j=Q=[Y(W[0],"BCDice")].concat(M),o=z=[Y(Q[0],"DiceTable")].concat(j),_=[k=U(z[0],null,"D66RangeTable")].concat(o),C=e.$r(_),(r=k.$$prototype).items=r.name=b,c(k,"$initialize",function(x,F){return this.name=x,this.items=F.$freeze()}),c(k,"$roll",function(x){var P,R,p,D=b;return P=x.$roll_once(6),R=x.$roll_once(6),p=I(K(P,10),R),D=d(this.items,"find",[],function(g){return null==g&&(g=b),g["$[]"](0)["$include?"](p)}),C("RollResult").$new(this.name,p,D["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var V,i,C,r,n,x,F,o,A,Y=e.module,U=e.klass,c=e.const_set,I=e.send,K=e.truthy,d=e.def,W=e.eqeqeq,b=e.rb_times,N=e.rb_plus,M=[],E=e.nil;return V=M,i=A=[Y(M[0],"BCDice")].concat(V),C=o=[Y(A[0],"DiceTable")].concat(i),n=[r=U(o[0],null,"RangeTable")].concat(C),x=e.$r(n),(F=r.$$prototype).name=F.items=F.num_of_dice=F.num_of_sides=F.formatter=E,c(n[0],"RollResult",I(x("Struct"),"new",["sum","values","content","formatted"],function P(){return(null==P.$$s?this:P.$$s).$alias_method("to_s","formatted")},{$$s:r})),c(n[0],"Item",x("Struct").$new("range","content")),c(n[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),c(n[0],"DEFAULT_FORMATTER",I(r,"lambda",[],function(R,p){return null==R&&(R=E),null==p&&(p=E),R.$name()+"("+p.$sum()+") \uff1e "+p.$content()})),r.$attr_reader("name"),r.$attr_reader("num_of_dice"),r.$attr_reader("num_of_sides"),d(r,"$initialize",function P(R,p,D){var a,y=P.$$p||E,g=this,f=E;return P.$$p=null,g.name=R.$freeze(),g.formatter=K(a=y)?a:x("DEFAULT_FORMATTER"),f=x("DICE_ROLL_METHOD_RE").$match(p),K(f)||g.$raise(x("ArgumentError"),g.name+": invalid dice roll method: "+p),g.num_of_dice=f["$[]"](1).$to_i(),g.num_of_sides=f["$[]"](2).$to_i(),g.$store(D)}),d(r,"$fetch",function(R){var D,p=this;return D=I(p.items,"find",[],function(g){return null==g&&(g=E),g.$range()["$include?"](R)}),K(D)||p.$raise(x("RangeError"),p.name+": value is out of range: "+R),D}),d(r,"$roll",function(R){var y,p=this,D=E,g=E;return y=(D=R.$roll_barabara(p.num_of_dice,p.num_of_sides)).$sum(),(g=x("RollResult").$new(y,D,p.$fetch(y).$content()))["$formatted="](p.formatter["$[]"](p,g)),g}),r.$private(),d(r,"$store",function(R){var D,y,p=this;return D=I(R,"map",[],function g(a,f){return null==a&&(a=E),null==f&&(f=E),[(null==g.$$s?this:g.$$s).$coerce_to_int_range(a),f]},{$$s:p}),y=I(D,"sort_by",[],function(a,f){return null==a&&(a=E),null==f&&(f=E),a.$min()}),p.$assert_min_sum_is_covered(y),p.$assert_max_sum_is_covered(y),p.$assert_no_gap_or_overlap_in_ranges(y),p.items=I(y,"map",[],function(a,f){return null==a&&(a=E),null==f&&(f=E),x("Item").$new(a,f.$freeze()).$freeze()}).$freeze(),p}),d(r,"$coerce_to_int_range",function(R){var D;return W(x("Integer"),D=R)?x("Range").$new(R,R):W(x("Range"),D)&&K(R.$begin()["$is_a?"](x("Integer")))&&K(R.$end()["$is_a?"](x("Integer")))?R:this.$raise(x("TypeError"),this.name+": "+R+" ("+R.$class()+") must be an Integer or a Range with Integers ")}),d(r,"$assert_min_sum_is_covered",function(R){var D,p=this,y=E;return D=p.num_of_dice,y=R.$first()["$[]"](0),K(y["$include?"](D))||p.$raise(x("RangeError"),p.name+": min value ("+D+") is not covered: "+y),p}),d(r,"$assert_max_sum_is_covered",function(R){var D,p=this,y=E;return D=b(p.num_of_dice,p.num_of_sides),y=R.$last()["$[]"](0),K(y["$include?"](D))||p.$raise(x("RangeError"),p.name+": max value ("+D+") is not covered: "+y),p}),d(r,"$assert_no_gap_or_overlap_in_ranges",function(R){return I(R,"each_cons",[2],function D(y,g){var T,u,a=null==D.$$s?this:D.$$s,f=E,l=E;return null==a.name&&(a.name=E),null==y&&(y=E),null==g&&(g=E),f=y["$[]"](0),l=g["$[]"](0),T=f.$max(),u=N(T,1),K(l["$include?"](T))&&a.$raise(x("RangeError"),a.name+": Range overlap: "+f+" and "+l),K(l["$include?"](u))?E:a.$raise(x("RangeError"),a.name+": Range gap: "+f+" and "+l)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var E,A,k,x,F,P,R,C,i,V,Y=e.module,U=e.klass,c=e.send,I=e.def,K=e.rb_minus,d=e.return_ivar,W=[],b=e.nil,N=e.$$$;return E=W,A=V=[Y(W[0],"BCDice")].concat(E),k=i=[Y(V[0],"DiceTable")].concat(A),x=C=[U(i[0],null,"SaiFicSkillTable")].concat(k),P=[F=U(C[0],null,"Category")].concat(x),R=e.$r(P),I(F,"$initialize",function(D,y,g,a){var f=this;return f.name=D,f.skills=c(y.$map(),"with_index",[2],function(T,u){return null==T&&(T=b),null==u&&(u=b),N(R("SaiFicSkillTable"),"Skill").$new(D,T,g,u,a)}),f.dice=g}),I(F,"$roll",function(D){return this.$skills()["$[]"](K(D.$roll_sum(2,6),2))}),I(F,"$to_s",d("name")),F.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var b,Q,i,C,r,o,j,M,Y=e.module,U=e.klass,c=e.def,I=e.hash2,K=[],d=e.nil;return b=K,Q=M=[Y(K[0],"BCDice")].concat(b),i=j=[Y(M[0],"DiceTable")].concat(Q),o=[U(j[0],null,"SaiFicSkillTable")].concat(i),(r=(C=U(o[0],null,"Skill")).$$prototype).s_format=r.category_dice=r.row_dice=r.category_name=r.name=d,c(C,"$initialize",function(x,F,P,R,p){var D=this;return D.category_name=x,D.name=F,D.category_dice=P,D.row_dice=R,D.s_format=p}),c(C,"$to_s",function(){var x=this;return x.$format(x.s_format,I(["category_dice","row_dice","category_name","skill_name"],{category_dice:x.category_dice,row_dice:x.row_dice,category_name:x.category_name,skill_name:x.name}))}),C.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var o,r,R,p,D,y,g,x,_,Y=e.module,U=e.klass,c=e.ensure_kwargs,I=e.hash2,K=e.send,W=e.defs,b=e.const_set,N=e.to_ary,M=e.def,E=e.truthy,Q=e.rb_minus,V=e.rb_plus,j=e.top,A=[],z=e.nil,i=e.$$$;return j.$require("bcdice/dice_table/sai_fic_skill_table/category"),j.$require("bcdice/dice_table/sai_fic_skill_table/skill"),o=A,r=_=[Y(A[0],"BCDice")].concat(o),R=x=[Y(_[0],"DiceTable")].concat(r),D=[p=U(x[0],null,"SaiFicSkillTable")].concat(R),y=e.$r(D),(g=p.$$prototype).rtt=g.rtt_format=g.rct=g.rct_format=g.rttn=g.rttn_format=g.categories=z,W(p,"$from_i18n",function(f,l,T){var u,m,t,$,v=z;return null==(u=(T=c(T)).$$smap.rtt)&&(u=z),null==(m=T.$$smap.rct)&&(m=z),null==(t=T.$$smap.rttn)&&(t=z),$=(v=y("I18n").$t("RTT",I(["locale","raise","default"],{locale:l,raise:!1,default:I([],{})})).$merge(y("I18n").$t(f,I(["locale","raise"],{locale:l,raise:!0}))))["$[]"]("items"),v=K(v,"select",[],function(te,re){return null==te&&(te=z),null==re&&(re=z),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](te)}),this.$new($,e.to_hash(v).$merge(I(["rtt","rct","rttn"],{rtt:u,rct:m,rttn:t})))},-3),b(D[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),b(D[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),b(D[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),b(D[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),M(p,"$initialize",function(f,l){var T,u,m,t,S,s,v,$=this;return null==(T=(l=c(l)).$$smap.rtt)&&(T=z),null==(u=l.$$smap.rct)&&(u=z),null==(m=l.$$smap.rttn)&&(m=z),null==(t=l.$$smap.rtt_format)&&(t=y("DEFAULT_RTT")),null==(S=l.$$smap.rct_format)&&(S=y("DEFAULT_RCT")),null==(s=l.$$smap.rttn_format)&&(s=y("DEFAULT_RTTN")),null==(v=l.$$smap.s_format)&&(v=y("DEFAULT_S")),$.categories=K(f.$map(),"with_index",[1],function(te,re){var $e,le,ae;return null==te&&(te=z),null==re&&(re=z),le=null==($e=N(te))[0]?z:$e[0],ae=null==$e[1]?z:$e[1],i(y("SaiFicSkillTable"),"Category").$new(le,ae,re,v)},{$$has_top_level_mlhs_arg:!0}),$.rtt=T,$.rct=u,$.rttn=m.$to_a(),$.rtt_format=t,$.rct_format=S,$.rttn_format=s},-2),b(D[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),p.$attr_reader("categories"),M(p,"$roll_command",function(f,l){var u,T=this,m=z,t=z;return E(["RTT",T.rtt]["$include?"](u=l))?T.$format_skill(T.rtt_format,T.$roll_skill(f)):E(["RCT",T.rct]["$include?"](u))?(m=T.$roll_category(f),T.$format(T.rct_format,I(["category_dice","category_name"],{category_dice:m.$dice(),category_name:m.$name()}))):E(t=y("RTTN").$index(u))||E(t=T.rttn.$index(u))?T.$format_skill(T.rttn_format,T.categories["$[]"](t).$roll(f)):z}),M(p,"$roll_category",function(f){return this.categories["$[]"](Q(f.$roll_once(6),1))}),M(p,"$roll_skill",function(f){return this.$roll_category(f).$roll(f)}),M(p,"$prefixes",function(){var f=this;return V(["RTT[1-6]?","RCT",f.rtt,f.rct],f.rttn).$compact()}),p.$private(),M(p,"$format_skill",function(f,l){return this.$format(f,I(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:l.$category_dice(),row_dice:l.$row_dice(),category_name:l.$category_name(),skill_name:l.$name(),text:l.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var E,A,k,_,C,r,n,i,V,Y=e.module,U=e.klass,c=e.hash2,I=e.defs,K=e.truthy,d=e.def,W=e.rb_minus,b=[],N=e.nil;return E=b,A=V=[Y(b[0],"BCDice")].concat(E),k=i=[Y(V[0],"DiceTable")].concat(A),C=[_=U(i[0],null,"Table")].concat(k),r=e.$r(C),(n=_.$$prototype).times=n.sides=n.name=n.items=N,I(_,"$from_i18n",function(F,P){var p=N;return p=r("I18n").$t(F,c(["locale"],{locale:P})),this.$new(p["$[]"]("name"),p["$[]"]("type"),p["$[]"]("items"))}),d(_,"$initialize",function(F,P,R){var p=this,D=N;return p.name=F,p.items=R.$freeze(),D=/(\d+)D(\d+)/i.$match(P),K(D)||p.$raise(r("ArgumentError"),"Unexpected table type: "+P),p.times=D["$[]"](1).$to_i(),p.sides=D["$[]"](2).$to_i()}),d(_,"$roll",function(F){var R,P=this;return R=F.$roll_sum(P.times,P.sides),P.$choice(R)}),d(_,"$choice",function(F){var R,P=this;return R=W(F,P.times),r("RollResult").$new(P.name,F,P.items["$[]"](R))})},Opal.modules["bcdice/dice_table"]=function(e){var Y=e.top;return Y.$require("bcdice/dice_table/roll_result"),Y.$require("bcdice/dice_table/chain_table"),Y.$require("bcdice/dice_table/d66_grid_table"),Y.$require("bcdice/dice_table/d66_half_grid_table"),Y.$require("bcdice/dice_table/d66_one_third_table"),Y.$require("bcdice/dice_table/d66_left_range_table"),Y.$require("bcdice/dice_table/d66_parity_table"),Y.$require("bcdice/dice_table/d66_range_table"),Y.$require("bcdice/dice_table/d66_table"),Y.$require("bcdice/dice_table/range_table"),Y.$require("bcdice/dice_table/sai_fic_skill_table"),Y.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var d,M,Q,b,Y=e.module,U=e.const_set,c=[];return d=c,M=b=[Y(c[0],"BCDice")].concat(d),Q=[Y(b[0],"D66SortType")].concat(M),U(Q[0],"NO_SORT","no_sort"),U(Q[0],"ASC","asc"),U(Q[0],"DESC","desc"),function(N,M){var Q=[Y(N,"RoundType")].concat(M);return U(Q[0],"CEIL","ceil"),U(Q[0],"FLOOR","floor"),U(Q[0],"ROUND","round")}(b[0],b)},Opal.modules["bcdice/translate"]=function(e){var M,j,A,z,i,Q,Y=e.module,U=e.ensure_kwargs,c=e.kwrestargs,K=e.hash2,d=e.def,W=[],b=e.nil;return M=W,j=Q=[Y(W[0],"BCDice")].concat(M),z=[A=Y(Q[0],"Translate")].concat(j),i=e.$r(z),d(A,"$translate",function(o,k){var _,C=this;return null==C.locale&&(C.locale=b),k=U(k),_=c(k,{}),i("I18n").$translate(o,K(["locale","raise"],{locale:C.locale,raise:!0}).$merge(e.to_hash(_)))},-2)},Opal.modules["bcdice/result"]=function(e){var A,B,z,M,Q,U=e.klass,c=e.send,I=e.def,K=e.return_val,d=e.return_ivar,W=[],b=e.nil;return M=W,A=Q=[(0,e.module)(W[0],"BCDice")].concat(M),[z=U(Q[0],null,"Result")].concat(A),I(B=e.get_singleton_class(z),"$success",function(_){return c(this.$new(),"tap",[],function(n){var x;return null==n&&(n=b),n["$text="](_),c(n,"success=",x=[!0]),x[x.length-1]})}),I(B,"$failure",function(_){return c(this.$new(),"tap",[],function(n){var x;return null==n&&(n=b),n["$text="](_),c(n,"failure=",x=[!0]),x[x.length-1]})}),I(B,"$critical",function(_){return c(this.$new(),"tap",[],function(n){var x;return null==n&&(n=b),n["$text="](_),n["$critical="](!0),c(n,"success=",x=[!0]),x[x.length-1]})}),I(B,"$fumble",function(_){return c(this.$new(),"tap",[],function(n){var x;return null==n&&(n=b),n["$text="](_),n["$fumble="](!0),c(n,"failure=",x=[!0]),x[x.length-1]})}),I(B,"$nothing",K("nothing")),I(z,"$initialize",function(o){var k=this;return null==o&&(o=b),k.text=o,k.rands=b,k.detailed_rands=b,k.secret=!1,k.success=!1,k.failure=!1,k.critical=!1,k.fumble=!1},-1),z.$attr_accessor("text","rands","detailed_rands"),z.$attr_writer("secret","success","failure","critical","fumble"),I(z,"$secret?",d("secret")),I(z,"$success?",d("success")),I(z,"$failure?",d("failure")),I(z,"$critical?",d("critical")),I(z,"$fumble?",d("fumble")),I(z,"$condition=",function(o){return this.success=o,this.failure=o["$!"]()})},Opal.modules["racc/parser"]=function(e){var F,R,p,Y=e.module,U=e.klass,c=e.truthy,I=e.const_set,K=e.defs,d=e.gvars,W=e.rb_lt,b=e.def,N=e.to_ary,M=e.send,E=e.neqeq,Q=e.rb_plus,V=e.eqeq,j=e.rb_ge,A=e.rb_gt,z=e.rb_minus,i=e.rb_le,B=e.rb_times,o=e.assign_ivar_val,_=[],C=e.$r(_),r=e.nil,n=e.$$$;return F=_,R=[Y(_[0],"Racc")].concat(F),p=e.$r(R),U(R[0],p("StandardError"),"ParseError"),c(n("::","ParseError","skip_raise")?"constant":r)||I(_[0],"ParseError",n(C("Racc"),"ParseError")),function(x,F){var a,f,l,T,u,p=[Y(x,"Racc")].concat(F),D=e.$r(p);return c(D("Racc_No_Extensions","skip_raise")?"constant":r)||I(p[0],"Racc_No_Extensions",!1),a=p,l=[f=U(p[0],null,"Parser")].concat(a),T=e.$r(l),(u=f.$$prototype).yydebug=u.racc_debug_out=u.racc_error_status=u.racc_t=u.racc_vstack=u.racc_val=u.racc_state=u.racc_tstack=r,I(l[0],"Racc_Runtime_Version","1.4.6"),I(l[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),I(l[0],"Racc_Runtime_Core_Version_R","1.4.6"),I(l[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),I(l[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),I(l[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),I(l[0],"Racc_Runtime_Core_Version",T("Racc_Runtime_Core_Version_R")),I(l[0],"Racc_Runtime_Core_Revision",T("Racc_Runtime_Core_Revision_R")),I(l[0],"Racc_Runtime_Type","ruby"),K(T("Parser"),"$racc_runtime_type",function(){return T("Racc_Runtime_Type")}),b(f,"$_racc_setup",function(){var t,S,s=this,v=r,$=r;return null==d.stderr&&(d.stderr=r),c(n(s.$class(),"Racc_debug_parser"))||(s.yydebug=!1),c(null!=(t=s.yydebug)&&t!==r?"instance-variable":r)||(s.yydebug=!1),c(s.yydebug)&&(c(null!=(S=s.racc_debug_out)&&S!==r?"instance-variable":r)||(s.racc_debug_out=d.stderr),s.racc_debug_out=c(v=s.racc_debug_out)?v:d.stderr),$=n(s.$class(),"Racc_arg"),c(W($.$size(),14))&&$["$[]="](13,!0),$}),b(f,"$_racc_init_sysvars",function(){var t=this;return t.racc_state=[0],t.racc_tstack=[],t.racc_vstack=[],t.racc_t=r,t.racc_val=r,t.racc_read_next=!0,t.racc_user_yyerror=!1,t.racc_error_status=0}),b(f,"$do_parse",function(){return this.$__send__(T("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),b(f,"$next_token",function(){return this.$raise(T("NotImplementedError"),this.$class()+"#next_token is not defined")}),b(f,"$_racc_do_parse_rb",function(t,S){var s,$=this,ee=r,te=r,re=r,$e=r,le=r,ae=r,se=r,ue=r;return s=N(t),ee=null==s[0]?r:s[0],te=null==s[1]?r:s[1],re=null==s[2]?r:s[2],$e=null==s[3]?r:s[3],le=null==s[10]?r:s[10],$.$_racc_init_sysvars(),ae=se=ue=r,M($,"catch",["racc_end_parse"],function J(){var L,Z,w=null==J.$$s?this:J.$$s,q=r;for(null==w.racc_state&&(w.racc_state=r),null==w.racc_read_next&&(w.racc_read_next=r),null==w.racc_t&&(w.racc_t=r),null==w.yydebug&&(w.yydebug=r),null==w.racc_val&&(w.racc_val=r);c(!0);)for(c(ue=$e["$[]"](w.racc_state["$[]"](-1)))?(c(w.racc_read_next)&&E(w.racc_t,0)&&(Z=w.$next_token(),L=N(Z),ae=null==L[0]?r:L[0],w.racc_val=null==L[1]?r:L[1],w.racc_t=c(ae)?c(q=le["$[]"](ae))?q:1:0,c(w.yydebug)&&w.$racc_read_token(w.racc_t,ae,w.racc_val),w.racc_read_next=!1),ue=Q(ue,w.racc_t),c(j(ue,0))&&c(se=ee["$[]"](ue))&&V(te["$[]"](ue),w.racc_state["$[]"](-1))||(se=re["$[]"](w.racc_state["$[]"](-1)))):se=re["$[]"](w.racc_state["$[]"](-1));c(se=w.$_racc_evalact(se,t)););},{$$s:$})}),b(f,"$yyparse",function(t,S){return this.$__send__(T("Racc_YY_Parse_Method"),t,S,this.$_racc_setup(),!0)}),b(f,"$_racc_yyparse_rb",function(t,S,s,v){var $,re=r,$e=r,_e=r,le=r,se=r,ue=r,J=r;return $=N(s),re=null==$[0]?r:$[0],$e=null==$[1]?r:$[1],_e=null==$[2]?r:$[2],le=null==$[3]?r:$[3],se=null==$[10]?r:$[10],this.$_racc_init_sysvars(),ue=r,J=r,M(this,"catch",["racc_end_parse"],function L(){var Z=null==L.$$s?this:L.$$s;for(null==Z.racc_state&&(Z.racc_state=r);!c(J=le["$[]"](Z.racc_state["$[]"](-1)));)for(;c(ue=Z.$_racc_evalact(_e["$[]"](Z.racc_state["$[]"](-1)),s)););return M(t,"__send__",[S],function w(q,O){var h=null==w.$$s?this:w.$$s,H=r,X=r;for(null==h.racc_t&&(h.racc_t=r),null==h.racc_state&&(h.racc_state=r),null==h.racc_read_next&&(h.racc_read_next=r),null==q&&(q=r),null==O&&(O=r),h.racc_t=c(q)?c(H=se["$[]"](q))?H:1:0,h.racc_val=O,h.racc_read_next=!1,J=Q(J,h.racc_t),c(j(J,0))&&c(ue=re["$[]"](J))&&V($e["$[]"](J),h.racc_state["$[]"](-1))||(ue=_e["$[]"](h.racc_state["$[]"](-1)));c(ue=h.$_racc_evalact(ue,s)););for(;c(c(H=c(X=(J=le["$[]"](h.racc_state["$[]"](-1)))["$!"]())?X:h.racc_read_next["$!"]())?H:h.racc_t["$=="](0));)for(c(J)&&c(J=Q(J,h.racc_t))&&c(j(J,0))&&c(ue=re["$[]"](J))&&V($e["$[]"](J),h.racc_state["$[]"](-1))||(ue=_e["$[]"](h.racc_state["$[]"](-1)));c(ue=h.$_racc_evalact(ue,s)););},{$$s:Z})},{$$s:this})}),b(f,"$_racc_evalact",function(t,S){var s,_e,$=this,ee=r,te=r,$e=r,le=r,ae=r,se=r;if(ee=null==(s=N(S))[0]?r:s[0],te=null==s[1]?r:s[1],$e=null==s[3]?r:s[3],_e=null==s[11]?r:s[11],le=null==s[12]?r:s[12],c(A(t,0))&&c(W(t,_e)))c(A($.racc_error_status,0))&&(V($.racc_t,1)||($.racc_error_status=z($.racc_error_status,1))),$.racc_vstack.$push($.racc_val),$.racc_state.$push(t),$.racc_read_next=!0,c($.yydebug)&&($.racc_tstack.$push($.racc_t),$.$racc_shift($.racc_t,$.racc_tstack,$.racc_vstack));else if(c(W(t,0))&&c(A(t,le["$-@"]()))){if(ae=M($,"catch",["racc_jump"],function ue(){var J=null==ue.$$s?this:ue.$$s;return null==J.racc_state&&(J.racc_state=r),J.racc_state.$push(J.$_racc_do_reduce(S,t)),!1},{$$s:$}),c(ae))switch(ae){case 1:return $.racc_user_yyerror=!0,le["$-@"]();case 2:return _e;default:$.$raise("[Racc Bug] unknown jump code")}}else if(V(t,_e))c($.yydebug)&&$.$racc_accept(),$.$throw("racc_end_parse",$.racc_vstack["$[]"](0));else{if(V(t,le["$-@"]())){switch($.racc_error_status){case 0:c(S["$[]"](21))||$.$on_error($.racc_t,$.racc_val,$.racc_vstack);break;case 3:V($.racc_t,0)&&$.$throw("racc_end_parse",r),$.racc_read_next=!0}for($.racc_user_yyerror=!1,$.racc_error_status=3;c(!0)&&!(c(se=$e["$[]"]($.racc_state["$[]"](-1)))&&(se=Q(se,1),c(j(se,0))&&c(t=ee["$[]"](se))&&V(te["$[]"](se),$.racc_state["$[]"](-1))));)c(i($.racc_state.$size(),1))&&$.$throw("racc_end_parse",r),$.racc_state.$pop(),$.racc_vstack.$pop(),c($.yydebug)&&($.racc_tstack.$pop(),$.$racc_e_pop($.racc_state,$.racc_tstack,$.racc_vstack));return t}$.$raise("[Racc Bug] unknown action "+t.$inspect())}return c($.yydebug)&&$.$racc_next_state($.racc_state["$[]"](-1),$.racc_state),r}),b(f,"$_racc_do_reduce",function(t,S){var s,le,se,q,O,h,G,$=this,te=r,re=r,$e=r,_e=r,ae=r,ue=r,J=r,L=r,Z=r,w=r,H=r,X=r,ne=r;return te=null==(s=N(t))[4]?r:s[4],re=null==s[5]?r:s[5],$e=null==s[6]?r:s[6],_e=null==s[7]?r:s[7],le=null==s[8]?r:s[8],ae=null==s[9]?r:s[9],se=null==s[13]?r:s[13],ue=$.racc_state,J=$.racc_vstack,L=$.racc_tstack,Z=B(S,-3),w=ae["$[]"](Z),q=ae["$[]"](Q(Z,1)),O=ae["$[]"](Q(Z,2)),h=[],c($.yydebug)&&(H=L["$[]"](w["$-@"](),w)),X=J["$[]"](w["$-@"](),w),c($.yydebug)&&L["$[]="](w["$-@"](),w,h),J["$[]="](w["$-@"](),w,h),ue["$[]="](w["$-@"](),w,h),c(se)?J.$push($.$__send__(O,X,J,X["$[]"](0))):J.$push($.$__send__(O,X,J)),L.$push(q),c($.yydebug)&&$.$racc_reduce(H,q,L,J),G=z(q,le),c(Z=_e["$[]"](G))&&(Z=Q(Z,ue["$[]"](-1)),c(j(Z,0))&&c(ne=te["$[]"](Z))&&V(re["$[]"](Z),G))?ne:$e["$[]"](G)}),b(f,"$on_error",function(t,S,s){var $,v=this;return v.$raise(T("ParseError"),v.$sprintf("\nparse error on value %s (%s)",S.$inspect(),c($=v.$token_to_str(t))?$:"?"))}),b(f,"$yyerror",function(){return this.$throw("racc_jump",1)}),b(f,"$yyaccept",function(){return this.$throw("racc_jump",2)}),b(f,"$yyerrok",o("racc_error_status",0)),b(f,"$racc_read_token",function(t,S,s){var v=this;return v.racc_debug_out.$print("read    "),v.racc_debug_out.$print(S.$inspect(),"(",v.$racc_token2str(t),") "),v.racc_debug_out.$puts(s.$inspect()),v.racc_debug_out.$puts()}),b(f,"$racc_shift",function(t,S,s){var v=this;return v.racc_debug_out.$puts("shift   "+v.$racc_token2str(t)),v.$racc_print_stacks(S,s),v.racc_debug_out.$puts()}),b(f,"$racc_reduce",function(t,S,s,v){var $=this,ee=r;return(ee=$.racc_debug_out).$print("reduce "),c(t["$empty?"]())?ee.$print(" <none>"):M(t,"each",[],function te(re){return null==re&&(re=r),ee.$print(" ",(null==te.$$s?this:te.$$s).$racc_token2str(re))},{$$s:$}),ee.$puts(" --\x3e "+$.$racc_token2str(S)),$.$racc_print_stacks(s,v),$.racc_debug_out.$puts()}),b(f,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),b(f,"$racc_e_pop",function(t,S,s){var v=this;return v.racc_debug_out.$puts("error recovering mode: pop token"),v.$racc_print_states(t),v.$racc_print_stacks(S,s),v.racc_debug_out.$puts()}),b(f,"$racc_next_state",function(t,S){var s=this;return s.racc_debug_out.$puts("goto    "+t),s.$racc_print_states(S),s.racc_debug_out.$puts()}),b(f,"$racc_print_stacks",function(t,S){var v=r;return(v=this.racc_debug_out).$print("        ["),M(t,"each_index",[],function $(ee){return null==ee&&(ee=r),v.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(t["$[]"](ee))," ",S["$[]"](ee).$inspect(),")")},{$$s:this}),v.$puts(" ]")}),b(f,"$racc_print_states",function(t){var s=r;return(s=this.racc_debug_out).$print("        ["),M(t,"each",[],function($){return null==$&&($=r),s.$print(" ",$)}),s.$puts(" ]")}),b(f,"$racc_token2str",function(t){var s;return c(s=n(this.$class(),"Racc_token_to_s_table")["$[]"](t))?s:this.$raise("[Racc Bug] can't convert token "+t+" to string")}),b(f,"$token_to_str",function(t){return n(this.$class(),"Racc_token_to_s_table")["$[]"](t)})}(_[0],_)},Opal.modules["bcdice/arithmetic/node"]=function(e){var o,r,P,a,f,p,D,x,_,Y=e.module,U=e.klass,c=e.def,I=e.thrower,K=e.return_ivar,d=e.send2,W=e.find_super,b=e.eqeq,N=e.const_set,M=e.eqeqeq,E=e.rb_divide,Q=e.truthy,V=e.assign_ivar,j=e.alias,A=[],z=e.nil,i=e.$$$;return o=A,r=_=[Y(A[0],"BCDice")].concat(o),P=x=[Y(_[0],"Arithmetic")].concat(r),p=[Y(x[0],"Node")].concat(P),D=e.$r(p),(f=(a=U(p[0],null,"BinaryOp")).$$prototype).lhs=f.rhs=f.op=z,c(a,"$initialize",function(T,u,m){var t=this;return t.lhs=T,t.op=u,t.rhs=m}),c(a,"$eval",function(T){try{I("eval_return");var S,m=this,t=z;return t=m.lhs.$eval(T),S=m.rhs.$eval(T),t.$send(m.op,S)}catch(s){if(s===e.t_eval_return)return s.$v;throw s}}),c(a,"$output",function(){var T=this;return""+T.lhs.$output()+T.op+T.rhs.$output()}),c(a,"$s_exp",function(){var T=this;return"("+T.$op_for_s_exp()+" "+T.lhs.$s_exp()+" "+T.rhs.$s_exp()+")"}),c(a,"$op_for_s_exp",K("op")),function(y,g,a){var f=U(y,g,"DivideBase"),l=[f].concat(a),T=e.$r(l),u=f.$$prototype;u.lhs=u.rhs=u.op=z,c(f,"$initialize",function m(t,S){return m.$$p=null,d(this,W(this,"initialize",m,!1,!0),"initialize",[t,"/",S],null)}),c(f,"$eval",function(t){try{I("eval_return");var v,$,s=this;return v=s.lhs.$eval(t),$=s.rhs.$eval(t),b($,0)&&s.$raise(T("ZeroDivisionError")),s.$divide_and_round(v,$,t)}catch(ee){if(ee===e.t_eval_return)return ee.$v;throw ee}}),c(f,"$output",function m(){var t=m.$$p||z,S=this;return m.$$p=null,""+d(S,W(S,"output",m,!1,!0),"output",[],t)+S.$rounding_method()}),f.$private(),c(f,"$rounding_method",function(){return i(this.$class(),"ROUNDING_METHOD")}),c(f,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),c(f,"$divide_and_round",function(t,S,s){return this.$raise(T("NotImplementedError"))})}(p[0],D("BinaryOp"),p),function(y,g,a){var f=U(y,g,"DivideWithGameSystemDefault"),l=[f].concat(a),T=e.$r(l);N(l[0],"ROUNDING_METHOD",""),f.$private(),c(f,"$divide_and_round",function(m,t,S){var s,v=z;return M(i(T("RoundType"),"CEIL"),s=S)?E(m.$to_f(),t).$ceil():M(i(T("RoundType"),"ROUND"),s)?(v=E(m.$to_f(),t),Q(v["$negative?"]())?v.$abs().$round()["$-@"]():v.$round()):E(m,t).$floor()})}(p[0],D("DivideBase"),p),function(y,g,a){var f=U(y,g,"DivideWithCeil"),l=[f].concat(a);N(l[0],"ROUNDING_METHOD","C"),f.$private(),c(f,"$divide_and_round",function(u,m,t){return E(u.$to_f(),m).$ceil()})}(p[0],D("DivideBase"),p),function(y,g,a){var f=U(y,g,"DivideWithRound"),l=[f].concat(a);N(l[0],"ROUNDING_METHOD","R"),f.$private(),c(f,"$divide_and_round",function(u,m,t){var S=z;return S=E(u.$to_f(),m),Q(S["$negative?"]())?S.$abs().$round()["$-@"]():S.$round()})}(p[0],D("DivideBase"),p),function(y,g,a){var f=U(y,g,"DivideWithFloor"),l=[f].concat(a);N(l[0],"ROUNDING_METHOD","F"),f.$private(),c(f,"$divide_and_round",function(u,m,t){return E(u,m).$floor()})}(p[0],D("DivideBase"),p),function(y,g){var a=U(y,null,"Negative");a.$$prototype.body=z,c(a,"$initialize",V("body")),c(a,"$eval",function(T){try{return I("eval_return"),this.body.$eval(T)["$-@"]()}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(a,"$output",function(){return"-"+this.body.$output()}),c(a,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(p[0]),function(y,g){var a=U(y,null,"Parenthesis");a.$$prototype.expr=z,c(a,"$initialize",V("expr")),c(a,"$eval",function(T){try{return I("eval_return"),this.expr.$eval(T)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(a,"$output",function(){return"("+this.expr.$output()+")"}),c(a,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(p[0]),function(y,g){var a=U(y,null,"Number");return a.$$prototype.value=z,c(a,"$initialize",V("value")),c(a,"$eval",K("value")),c(a,"$output",function(){return this.value.$to_s()}),j(a,"s_exp","output")}(p[0])},Opal.modules.strscan=function(e){var V,j,A,z,i,U=e.def,c=e.truthy,I=e.eqeqeq,K=e.Opal,d=e.return_ivar,W=e.send,b=e.alias,N=[],M=e.nil;return V=N,A=[j=(0,e.klass)(N[0],null,"StringScanner")].concat(V),z=e.$r(A),(i=j.$$prototype).pos=i.string=i.working=i.matched=i.prev_pos=i.match=M,j.$attr_reader("pos","matched"),U(j,"$initialize",function(o){var k=this;return k.string=o,k.pos=0,k.matched=M,k.working=o,k.match=[]}),j.$attr_reader("string"),U(j,"$beginning_of_line?",function(){var o=this;return 0===o.pos||"\n"===o.string.charAt(o.pos-1)}),U(j,"$scan",function(o){var k=this,_=(o=k.$anchor(o)).exec(k.working);return null==_?k.matched=M:(k.prev_pos=k.pos,k.pos+=_[0].length,k.working=k.working.substring(_[0].length),k.matched=_[0],k.match=_,_[0])}),U(j,"$scan_until",function(o){var k=this;o=k.$anchor(o);for(var _=k.working,C=0;_.length!=C;++C){var r=o.exec(_.substr(C));if(null!==r){var n=C+r[0].length,x=_.substr(0,n);return k.matched=r[0],k.match=r,k.prev_pos=k.pos+C,k.pos+=n,k.working=_.substr(n),x}}return k.matched=M}),U(j,"$[]",function(o){var _;if(c(this.match["$empty?"]()))return M;I(z("Symbol"),_=o)?o=o.$to_s():I(z("String"),_)||(o=K["$coerce_to!"](o,z("Integer"),"to_int"));var C=this.match;return o<0&&(o+=C.length),o<0||o>=C.length||null==C[o]?M:C[o]}),U(j,"$check",function(o){var k=this,_=(o=k.$anchor(o)).exec(k.working);return k.matched=null==_?M:_[0]}),U(j,"$check_until",function(o){var k=this,_=k.prev_pos,C=k.pos,r=k.working,n=k.$scan_until(o);return k.prev_pos=_,k.pos=C,k.working=r,n}),U(j,"$peek",function(o){return this.working.substring(0,o)}),U(j,"$eos?",function(){return 0===this.working.length}),U(j,"$exist?",function(o){var _=o.exec(this.working);return null==_?M:0==_.index?0:_.index+1}),U(j,"$skip",function(o){var k=this,_=(o=k.$anchor(o)).exec(k.working);if(null==_)return k.match=[],k.matched=M;var C=_[0],r=C.length;return k.matched=C,k.match=_,k.prev_pos=k.pos,k.pos+=r,k.working=k.working.substring(r),r}),U(j,"$skip_until",function(o){var _=this.$scan_until(o);return _===M?M:(this.matched=_.substr(-1),_.length)}),U(j,"$get_byte",function(){var o=this,k=M;return o.pos<o.string.length?(o.prev_pos=o.pos,o.pos+=1,k=o.matched=o.working.substring(0,1),o.working=o.working.substring(1)):o.matched=M,k}),U(j,"$match?",function(o){var k=this,_=(o=k.$anchor(o)).exec(k.working);return null==_?M:(k.prev_pos=k.pos,_[0].length)}),U(j,"$pos=",function(o){var k=this;return o<0&&(o+=k.string.$length()),k.pos=o,k.working=k.string.slice(o)}),U(j,"$matched_size",function(){return this.matched===M?M:this.matched.length}),U(j,"$post_match",function(){var o=this;return o.matched===M?M:o.string.substr(o.pos)}),U(j,"$pre_match",function(){var o=this;return o.matched===M?M:o.string.substr(0,o.prev_pos)}),U(j,"$reset",function(){var o=this;return o.working=o.string,o.matched=M,o.pos=0}),U(j,"$rest",d("working")),U(j,"$rest?",function(){return 0!==this.working.length}),U(j,"$rest_size",function(){return this.$rest().$size()}),U(j,"$terminate",function(){var o,k=this;return k.match=M,o=[k.string.$length()],W(k,"pos=",o),o[o.length-1]}),U(j,"$unscan",function(){var o=this;return o.pos=o.prev_pos,o.prev_pos=M,o.match=M,o}),b(j,"bol?","beginning_of_line?"),b(j,"getch","get_byte"),j.$private(),U(j,"$anchor",function(o){var k=o.toString().match(/\/([^\/]+)$/);return k=k?k[1]:void 0,new RegExp("^(?:"+o.source+")",k)})},Opal.modules["bcdice/normalize"]=function(e){var b,Q,M,Y=e.module,U=e.eqeqeq,c=e.def,I=e.eqeq,K=[],d=e.nil;return b=K,M=[Y(K[0],"BCDice")].concat(b),(Q=Y(M[0],"Normalize")).$module_function(),c(Q,"$comparison_operator",function(j){var A;return U(/<=|=</,A=j)?"<=":U(/>=|=>/,A)?">=":U(/<>|!=|=!/,A)?"!=":U(/</,A)?"<":U(/>/,A)?">":U(/=/,A)?"==":d}),c(Q,"$target_number",function(j){return I(j,"?")?j:j.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var V,i,C,r,n,x,F,o,A,Y=e.module,U=e.klass,c=e.const_set,I=e.hash2,K=e.truthy,d=e.send,W=e.def,b=e.thrower,N=e.top,M=[],E=e.nil;return N.$require("strscan"),N.$require("bcdice/normalize"),V=M,i=A=[Y(M[0],"BCDice")].concat(V),C=o=[Y(A[0],"Command")].concat(i),n=[r=U(o[0],null,"Lexer")].concat(C),x=e.$r(n),(F=r.$$prototype).scanner=F.notations=E,c(n[0],"SYMBOLS",I(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),W(r,"$initialize",function(R,p){var D,y,a;return R=K(a=(D=(y=R)===E||null==y?E:y.$split(" ",2))===E||null==D?E:D.$first())?a:"",this.scanner=x("StringScanner").$new(R),this.notations=d(p,"map",[],function(l){return null==l&&(l=E),K(l["$is_a?"](x("String")))?x("Regexp").$new(l):l})}),W(r,"$next_token",function(){try{var R=b("return"),p=this,D=E,y=E,a=E,f=E;return K(p.scanner["$eos?"]())?[!1,"$"]:(d(p.notations,"each",[],function l(T){var m,u=null==l.$$s?this:l.$$s;if(null==u.scanner&&(u.scanner=E),null==T&&(T=E),m=u.scanner.$scan(T),!K(m))return E;R.$throw(["NOTATION",m])},{$$s:p,$$ret:R}),K(D=p.scanner.$scan(/\d+/))?["NUMBER",D.$to_i()]:K(y=p.scanner.$scan(/[<>!=]+/))?(y=x("Normalize").$comparison_operator(y),[K(y)?"CMP_OP":"ILLEGAL",y]):(a=p.scanner.$getch().$upcase(),[K(f=x("SYMBOLS")["$[]"](a))?f:a.$to_sym(),a]))}catch(l){if(l===R)return l.$v;throw l}}),W(r,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var N,V,B,o,k,_,C,A,E,Y=e.module,U=e.klass,c=e.def,I=e.return_ivar,K=e.truthy,d=[],W=e.nil;return N=d,V=E=[Y(d[0],"BCDice")].concat(N),B=A=[Y(E[0],"Command")].concat(V),k=[o=U(A[0],null,"Parsed")].concat(B),_=e.$r(k),(C=o.$$prototype).critical=C.fumble=C.dollar=C.modify_number=C.question_target=C.target_number=C.prefix_number=C.command=C.suffix_number=C.cmp_op=W,o.$attr_accessor("command"),o.$attr_accessor("prefix_number"),o.$attr_accessor("suffix_number"),o.$attr_accessor("critical"),o.$attr_accessor("fumble"),o.$attr_accessor("dollar"),o.$attr_accessor("modify_number"),o.$attr_accessor("cmp_op"),o.$attr_accessor("target_number"),o.$attr_writer("question_target"),c(o,"$initialize",function(){var n=this;return n.prefix_number=W,n.suffix_number=W,n.critical=W,n.fumble=W,n.dollar=W,n.cmp_op=W,n.target_number=W,n.question_target=!1}),c(o,"$question_target?",I("question_target")),c(o,"$to_s",function(n){var x=this,F=W,P=W,R=W,p=W,D=W;switch(null==n&&(n="after_command"),F=K(x.critical)?"@"+x.critical:W,P=K(x.fumble)?"#"+x.fumble:W,R=K(x.dollar)?"$"+x.dollar:W,p=_("Format").$modifier(x.modify_number),D=K(x.question_target)?"?":x.target_number,n){case"after_command":return[x.prefix_number,x.command,x.suffix_number,F,P,R,p,x.cmp_op,D].$join();case"after_modify_number":return[x.prefix_number,x.command,x.suffix_number,p,F,P,R,x.cmp_op,D].$join();case"after_target_number":return[x.prefix_number,x.command,x.suffix_number,p,x.cmp_op,D,F,P,R].$join();default:return W}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var n,R,f,m,t,S,s,v,$,ee,te,re,le,l,T,u,ue,D,y,F,Y=e.klass,U=e.module,c=e.slice,I=e.extract_kwargs,K=e.ensure_kwargs,d=e.get_kwarg,W=e.send2,b=e.find_super,N=e.def,M=e.send,E=e.eqeq,Q=e.thrower,V=e.hash,j=e.const_set,A=e.truthy,z=e.to_ary,i=e.hash2,B=e.top,o=[],k=e.$r(o),_=e.nil,C=e.$$$;return B.$require("racc/parser.rb"),B.$require("bcdice/arithmetic/node"),B.$require("bcdice/command/lexer"),B.$require("bcdice/command/parsed"),Y(C(k("BCDice"),"Command"),C(k("Racc"),"Parser"),"Parser"),n=o,R=F=[U(o[0],"BCDice")].concat(n),D=[U(F[0],"Command")].concat(R),y=e.$r(D),f=D,T=[l=Y(D[0],C(y("Racc"),"Parser"),"Parser")].concat(f),u=e.$r(T),(ue=l.$$prototype).notations=ue.lexer=ue.modifier=ue.suffix_number=ue.prefix_number=ue.need_suffix_number=ue.need_prefix_number=ue.critical=ue.fumble=ue.dollar=ue.allowed_cmp_op=ue.question_target=_,N(l,"$initialize",function J(L,Z){var w,q,O,h,X=this;return J.$$p=null,w=c(arguments),q=I(w),q=K(q),O=w,h=d(q,"round_type"),W(X,b(X,"initialize",J,!1,!0),"initialize",[],null),X.notations=O,X.round_type=h,X.prefix_number=!1,X.suffix_number=!1,X.need_prefix_number=!1,X.need_suffix_number=!1,X.modifier=!0,X.critical=!1,X.fumble=!1,X.dollar=!1,X.allowed_cmp_op=[_,">=",">","<=","<","==","!="],X.question_target=!1},-2),N(l,"$disable_modifier",function(){return this.modifier=!1,this}),N(l,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),N(l,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),N(l,"$has_prefix_number",function(){var L=this;return L.prefix_number=!0,L.need_prefix_number=!0,L}),N(l,"$has_suffix_number",function(){var L=this;return L.suffix_number=!0,L.need_suffix_number=!0,L}),N(l,"$enable_critical",function(){return this.critical=!0,this}),N(l,"$enable_fumble",function(){return this.fumble=!0,this}),N(l,"$enable_dollar",function(){return this.dollar=!0,this}),N(l,"$restrict_cmp_op_to",function(L){var Z;return Z=c(arguments),this.allowed_cmp_op=Z,this},-1),N(l,"$enable_question_target",function(){return this.question_target=!0,this}),N(l,"$parse",function(L){var Z=this;try{return Z.lexer=u("Lexer").$new(L,Z.notations),Z.$do_parse()}catch(w){if(!e.rescue(w,[u("ParseError"),u("ZeroDivisionError")]))throw w;try{return _}finally{e.pop_exception()}}}),l.$private(),N(l,"$parsed",function(L,Z,w,q){try{return Q("eval_return"),M(u("Parsed").$new(),"tap",[],function H(X){var G,ne,ie,ce,fe,oe,de,me=null==H.$$s?this:H.$$s;return null==me.round_type&&(me.round_type=_),null==X&&(X=_),X["$command="](L["$[]"]("command")),X["$prefix_number="]((G=L["$[]"]("prefix"))===_||null==G?_:G.$eval(me.round_type)),X["$suffix_number="]((ne=L["$[]"]("suffix"))===_||null==ne?_:ne.$eval(me.round_type)),X["$critical="]((ie=Z["$[]"]("critical"))===_||null==ie?_:ie.$eval(me.round_type)),X["$fumble="]((ce=Z["$[]"]("fumble"))===_||null==ce?_:ce.$eval(me.round_type)),X["$dollar="]((fe=Z["$[]"]("dollar"))===_||null==fe?_:fe.$eval(me.round_type)),X["$modify_number="](w.$eval(me.round_type)),X["$cmp_op="](q["$[]"]("cmp_op")),E(q["$[]"]("target"),"?")?(X["$question_target="](!0),M(X,"target_number=",oe=[0]),oe[oe.length-1]):(X["$question_target="](!1),oe=[(de=q["$[]"]("target"),de===_||null==de?_:de.$eval(me.round_type))],M(X,"target_number=",oe),oe[oe.length-1])},{$$s:this})}catch(H){if(H===e.t_eval_return)return H.$v;throw H}}),N(l,"$next_token",function(){return this.lexer.$next_token()}),m=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),t=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),S=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),s=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),v=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),$=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),ee=[_,6,13,3,9,-1,27,-15,-10,-1,-38],te=[_,_,_,_,_,_,19,16,15,_,_],re=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),le=V(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),j(T[0],"Racc_arg",[m,t,s,S,v,$,te,ee,19,re,le,58,35,!0]),j(T[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),j(T[0],"Racc_debug_parser",!1),N(l,"$_reduce_1",function(L,Z,w){var q,h=this;return A(h.modifier)||h.$raise(u("ParseError")),q=z(L),h.$parsed(null==q[0]?_:q[0],null==q[1]?_:q[1],null==q[2]?_:q[2],null==q[3]?_:q[3])}),N(l,"$_reduce_2",function(L,Z,w){var q,h=this;return A(h.modifier)||h.$raise(u("ParseError")),q=z(L),h.$parsed(null==q[0]?_:q[0],null==q[2]?_:q[2],null==q[1]?_:q[1],null==q[3]?_:q[3])}),N(l,"$_reduce_3",function(L,Z,w){var q,G;return G=null==(q=z(L))[2]?_:q[2],this.$parsed(null==q[0]?_:q[0],null==q[1]?_:q[1],C(C(u("Arithmetic"),"Node"),"Number").$new(0),G)}),N(l,"$_reduce_4",function(L,Z,w){var q=this;return A(q.prefix_number)&&A(q.suffix_number)||q.$raise(u("ParseError")),i(["command","prefix","suffix"],{command:L["$[]"](1),prefix:L["$[]"](0),suffix:L["$[]"](2)})}),N(l,"$_reduce_5",function(L,Z,w){var q=this;return A(q.prefix_number)||q.$raise(u("ParseError")),A(q.need_suffix_number)&&q.$raise(u("ParseError")),i(["command","prefix"],{command:L["$[]"](1),prefix:L["$[]"](0)})}),N(l,"$_reduce_6",function(L,Z,w){var q=this;return A(q.suffix_number)||q.$raise(u("ParseError")),A(q.need_prefix_number)&&q.$raise(u("ParseError")),i(["command","suffix"],{command:L["$[]"](0),suffix:L["$[]"](1)})}),N(l,"$_reduce_7",function(L,Z,w){var q=this;return(A(q.need_prefix_number)||A(q.need_suffix_number))&&q.$raise(u("ParseError")),i(["command"],{command:L["$[]"](0)})}),N(l,"$_reduce_8",function(L,Z,w){return i([],{})}),N(l,"$_reduce_9",function(L,Z,w){var q,G,H=_;return H=null==(q=z(L))[0]?_:q[0],G=null==q[2]?_:q[2],A(this.critical)&&A(H["$[]"]("critical")["$nil?"]())||this.$raise(u("ParseError")),H["$[]="]("critical",G),H}),N(l,"$_reduce_10",function(L,Z,w){var q,G,H=_;return H=null==(q=z(L))[0]?_:q[0],G=null==q[2]?_:q[2],A(this.fumble)&&A(H["$[]"]("fumble")["$nil?"]())||this.$raise(u("ParseError")),H["$[]="]("fumble",G),H}),N(l,"$_reduce_11",function(L,Z,w){var q,G,H=_;return H=null==(q=z(L))[0]?_:q[0],G=null==q[2]?_:q[2],A(this.dollar)&&A(H["$[]"]("dollar")["$nil?"]())||this.$raise(u("ParseError")),H["$[]="]("dollar",G),H}),N(l,"$_reduce_12",function(L,Z,w){return L["$[]"](1)}),N(l,"$_reduce_13",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"Negative").$new(L["$[]"](1))}),N(l,"$_reduce_14",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"+",L["$[]"](2))}),N(l,"$_reduce_15",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"-",L["$[]"](2))}),N(l,"$_reduce_16",function(L,Z,w){return A(this.allowed_cmp_op["$include?"](_))||this.$raise(u("ParseError")),i([],{})}),N(l,"$_reduce_17",function(L,Z,w){var q,H,X;return X=null==(q=z(L))[1]?_:q[1],A(this.allowed_cmp_op["$include?"](H=null==q[0]?_:q[0]))||this.$raise(u("ParseError")),i(["cmp_op","target"],{cmp_op:H,target:X})}),N(l,"$_reduce_18",function(L,Z,w){var O,q=this;return O=L["$[]"](0),A(q.question_target)||q.$raise(u("ParseError")),A(q.allowed_cmp_op["$include?"](O))||q.$raise(u("ParseError")),i(["cmp_op","target"],{cmp_op:O,target:"?"})}),N(l,"$_reduce_19",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"+",L["$[]"](2))}),N(l,"$_reduce_20",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"-",L["$[]"](2))}),N(l,"$_reduce_22",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"*",L["$[]"](2))}),N(l,"$_reduce_23",function(L,Z,w){return L["$[]"](3).$new(L["$[]"](0),L["$[]"](2))}),N(l,"$_reduce_25",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),N(l,"$_reduce_26",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"DivideWithCeil")}),N(l,"$_reduce_27",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"DivideWithCeil")}),N(l,"$_reduce_28",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"DivideWithRound")}),N(l,"$_reduce_29",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"DivideWithFloor")}),N(l,"$_reduce_30",function(L,Z,w){return L["$[]"](1)}),N(l,"$_reduce_31",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"Negative").$new(L["$[]"](1))}),N(l,"$_reduce_33",function(L,Z,w){return L["$[]"](1)}),N(l,"$_reduce_34",function(L,Z,w){return C(C(u("Arithmetic"),"Node"),"Number").$new(L["$[]"](0))}),N(l,"$_reduce_none",function(L,Z,w){return L["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var M,j,B,o,k,_,z,Q,Y=e.module,U=e.send,c=e.eqeqeq,I=e.truthy,K=e.def,d=e.return_val,W=[],b=e.nil;return M=W,j=Q=[Y(W[0],"BCDice")].concat(M),B=z=[Y(Q[0],"Deprecated")].concat(j),k=[o=Y(z[0],"Checker")].concat(B),_=e.$r(k),o.$private(),K(o,"$check_result_legacy",function(r,n,x,F){var D,P=this,R=b,p=b,y=b,g=b;return R=U(n,"map",[],"sides".$to_proc()),D=(p=U(n,"map",[],"value".$to_proc())).$sum(),y=c([100],g=R)?P.$check_1D100(r,D,x,F):c([20],g)?P.$check_1D20(r,D,x,F):c([6,6],g)?P.$check_2D6(r,D,p,x,F):b,(I(y["$nil?"]())||I(y["$empty?"]()))&&(y=c([10],g=R.$uniq())?P.$check_nD10(r,D,p,x,F):c([6],g)?P.$check_nD6(r,D,p,x,F):b,I(y["$nil?"]())||I(y["$empty?"]()))?b:_("Result").$new(y.$delete_prefix(" \uff1e "))}),K(o,"$check_1D100",d(b)),K(o,"$check_1D20",d(b)),K(o,"$check_nD10",d(b)),K(o,"$check_2D6",d(b)),K(o,"$check_nD6",d(b))},Opal.modules["bcdice/base"]=function(e){var k,P,g,u,t,S,a,f,l,T,p,Y=e.module,U=e.klass,c=e.slice,I=e.rb_plus,K=e.truthy,d=e.def,W=e.regexp,b=e.send,N=e.thrower,M=e.return_ivar,E=e.assign_ivar_val,Q=e.eqeqeq,V=e.eqeq,j=e.return_val,A=e.range,z=e.rb_minus,i=e.rb_divide,B=e.rb_times,o=e.rb_ge,_=e.top,C=[],r=e.$r(C),n=e.nil,x=e.$$$;return _.$require("i18n"),_.$require("i18n/backend/fallbacks"),_.$require("bcdice/randomizer"),_.$require("bcdice/dice_table"),_.$require("bcdice/enum"),_.$require("bcdice/translate"),_.$require("bcdice/result"),_.$require("bcdice/command/parser"),_.$require("bcdice/deprecated/checker"),P=C,g=p=[Y(C[0],"BCDice")].concat(P),f=[a=U(p[0],null,"Base")].concat(g),l=e.$r(f),(T=a.$$prototype).raw_input=T.randomizer=T.enabled_upcase_input=T.debug=n,t=[u=e.get_singleton_class(a)].concat(f),S=e.$r(t),u.$attr_reader("prefixes"),d(u,"$register_prefix",function(v){var ee,re;return null==this.prefixes&&(this.prefixes=n),ee=c(arguments),this.prefixes=I(K(re=this.prefixes)?re:[],ee.$flatten())},-1),d(u,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),d(u,"$prefixes_pattern",function(){var v=this,$=n;return null==v.prefixes_pattern&&(v.prefixes_pattern=n),null==v.prefixes&&(v.prefixes=n),v.prefixes_pattern=K($=v.prefixes_pattern)?$:n,K(v.prefixes_pattern)?v.prefixes_pattern:(v.prefixes=K($=v.prefixes)?$:[],v.prefixes.$freeze(),v.prefixes_pattern=(K(v.prefixes["$empty?"]())?/(?!)/:W(["^(S)?(",v.prefixes.$join("|"),")"],"i")).$freeze())}),d(u,"$command_pattern",function(){var v=this,$=n,ee=n;return null==v.command_pattern&&(v.command_pattern=n),null==v.prefixes&&(v.prefixes=n),v.command_pattern=K($=v.command_pattern)?$:n,K(v.command_pattern)?v.command_pattern:(v.prefixes=K($=v.prefixes)?$:[],v.prefixes.$freeze(),ee=I(b(x(S("CommonCommand"),"COMMANDS"),"map",[],function(re){return null==re&&(re=n),x(re,"PREFIX_PATTERN").$source()}),v.prefixes),v.command_pattern=W(["^S?(",ee.$join("|"),")"],"i").$freeze())}),d(u,"$eval",function(v){try{return N("eval_return"),this.$new(v).$eval()}catch(te){if(te===e.t_eval_return)return te.$v;throw te}}),a.$include(l("Translate")),a.$include(x(l("Deprecated"),"Checker")),d(a,"$initialize",function(m){var t=this;return t.raw_input=m,t.sort_add_dice=!1,t.sort_barabara_dice=!1,t.d66_sort_type=x(l("D66SortType"),"NO_SORT"),t.enabled_d9=!1,t.round_type=x(l("RoundType"),"FLOOR"),t.sides_implicit_d=6,t.upper_dice_reroll_threshold=n,t.reroll_dice_reroll_threshold=n,t.default_cmp_op=n,t.default_target_number=n,t.enabled_upcase_input=!0,t.locale="ja_jp",t.randomizer=x(l("BCDice"),"Randomizer").$new(),t.debug=!1}),a.$attr_accessor("randomizer"),a.$attr_reader("d66_sort_type"),a.$attr_reader("round_type"),a.$attr_reader("sides_implicit_d"),a.$attr_reader("upper_dice_reroll_threshold"),a.$attr_reader("reroll_dice_reroll_threshold"),a.$attr_reader("default_cmp_op"),a.$attr_reader("default_target_number"),d(a,"$sort_add_dice?",M("sort_add_dice")),d(a,"$sort_barabara_dice?",M("sort_barabara_dice")),d(a,"$enabled_d9?",M("enabled_d9")),d(a,"$enable_debug",E("debug",!0)),d(a,"$eval",function(){var t,s,m=this,S=n;return t=x(l("BCDice"),"Preprocessor").$process(m.raw_input,m),S=K(s=m.$dice_command(t))?s:m.$eval_common_command(m.raw_input),K(S)?(S["$rands="](m.randomizer.$rand_results()),S["$detailed_rands="](m.randomizer.$detailed_rand_results()),S):n}),d(a,"$change_text",function(m){return m}),d(a,"$check_result",function(m,t,S,s){var v=this,$=n,ee=n,te=n,re=n,$e=n;return $=v.$check_result_legacy(m,t,S,s),K($)?$:(ee=b(t,"map",[],"sides".$to_proc()),re=(te=b(t,"map",[],"value".$to_proc())).$sum(),$=Q([100],$e=ee)?v.$result_1d100(m,re,S,s):Q([20],$e)?v.$result_1d20(m,re,S,s):Q([6,6],$e)?v.$result_2d6(m,re,te,S,s):n,V($,l("Result").$nothing())?n:K($)?$:($=Q([10],$e=ee.$uniq())?v.$result_nd10(m,re,te,S,s):Q([6],$e)?v.$result_nd6(m,re,te,S,s):n,V($,l("Result").$nothing())?n:K($)?$:v.$result_ndx(m,S,s)))}),d(a,"$grich_text",j(n)),a.$private(),d(a,"$eval_common_command",function(m){try{N("eval_return");var S=N("return");return m=this.$change_text(m),b(x(l("CommonCommand"),"COMMANDS"),"each",[],function v($){var te,ee=null==v.$$s?this:v.$$s;if(null==ee.randomizer&&(ee.randomizer=n),null==$&&($=n),te=$.$eval(m,ee,ee.randomizer),!K(te))return n;S.$throw(te)},{$$s:this,$$ret:S}),n}catch(v){if(v===e.t_eval_return||v===S)return v.$v;throw v}}),d(a,"$dice_command",function(m){var t=this,S=n,s=n,v=n,$=n;return K(t.enabled_upcase_input)&&(m=m.$upcase()),S=t.$class().$prefixes_pattern().$match(m),K(S)?(s=S["$[]"](1)["$nil?"]()["$!"](),K(s)&&(m=m["$[]"](A(1,-1,!1))),v=t.$eval_game_system_specific_command(m),K(v["$is_a?"](l("Result")))?(v["$secret="](K($=v["$secret?"]())?$:s),v):K(v["$nil?"]())||K(v["$empty?"]())||V(v,"1")?n:b(l("Result").$new(),"tap",[],function(te){var re;return null==te&&(te=n),te["$text="](v.$to_s()),b(te,"secret=",re=[s]),re[re.length-1]})):n}),d(a,"$eval_game_system_specific_command",j(n)),d(a,"$result_ndx",function(m,t,S){return K(S["$is_a?"](l("String")))?n:K(m.$send(t,S))?l("Result").$success(this.$translate("success")):l("Result").$failure(this.$translate("failure"))}),d(a,"$result_1d100",j(n)),d(a,"$result_1d20",j(n)),d(a,"$result_nd10",j(n)),d(a,"$result_2d6",j(n)),d(a,"$result_nd6",j(n)),d(a,"$get_table_by_2d6",function(m){return this.$get_table_by_nD6(m,2)}),d(a,"$get_table_by_1d6",function(m){return this.$get_table_by_nD6(m,1)}),d(a,"$get_table_by_nD6",function(m,t){return this.$get_table_by_nDx(m,t,6)}),d(a,"$get_table_by_nDx",function(m,t,S){var v,$=n;return v=this.randomizer.$roll_sum(t,S),$=this.$get_table_value(m["$[]"](z(v,t))),K($["$nil?"]())?["1",0]:[$,v]}),d(a,"$get_table_by_1d3",function(m){var s,v,t=this,$=n;return t.$debug("get_table_by_1d3"),s=t.randomizer.$roll_sum(1,6),t.$debug("num",s),v=i(z(s,1),2).$to_i(),t.$debug("index",v),$=m["$[]"](v),K($["$nil?"]())?["1",0]:[$,s]}),d(a,"$get_table_by_d66_swap",function(m){var S;return S=this.randomizer.$roll_d66(x(l("D66SortType"),"ASC")),[this.$get_table_by_number(S,m),S]}),d(a,"$get_table_by_d66",function(m){var S,s,v,ee,$=n;return S=this.randomizer.$roll_once(6),s=this.randomizer.$roll_once(6),v=I(B(z(S,1),6),z(s,1)),$=m["$[]"](v),ee=""+S+s,K($["$nil?"]())?["1",ee]:[$,ee]}),d(a,"$get_table_by_number",function(m,t,S){try{var s=N("return");return null==S&&(S="1"),b(t,"each",[],function $(ee){var re,te=null==$.$$s?this:$.$$s;if(null==ee&&(ee=n),re=ee["$[]"](0),!K(o(re,m)))return n;s.$throw(te.$get_table_value(ee["$[]"](1)))},{$$s:this,$$ret:s}),this.$get_table_value(S)}catch($){if($===s)return $.$v;throw $}},-3),d(a,"$get_table_value",function(m){return K(m["$is_a?"](l("Proc")))?m.$call():m}),d(a,"$roll_tables",function(m,t){var s=n;return s=t["$[]"](m),K(s)?s.$roll(this.randomizer).$to_s():n}),d(a,"$debug",function(m,t){var s,v=this,$=n,ee=n;return s=c(arguments,1),K(v.debug)?($=K(m["$is_a?"](l("String")))?m:m.$inspect(),K(s["$empty?"]())?v.$warn($):(ee=b(s,"map",[],function(re){return null==re&&(re=n),K(re["$is_a?"](l("String")))?'"'+re+'"':re.$inspect()}),v.$warn($+": "+ee.$join(", ")))):n},-2),x(x(r("I18n"),"Backend"),"Simple").$include(x(x(r("I18n"),"Backend"),"Fallbacks")),r("I18n").$load_path()["$<<"](r("Dir")["$[]"](r("File").$join("bcdice","../../i18n/**/*.yml"))),r("I18n")["$default_locale="]("ja_jp"),k=[["ja_jp"]],b(r("I18n").$fallbacks(),"defaults=",k),k[k.length-1]},Opal.modules["bcdice/game_system/sword_world/rating_lexer"]=function(e){var E,A,_,F,P,R,p,r,i,B,V,Y=e.module,U=e.klass,c=e.const_set,I=e.hash2,K=e.truthy,d=e.def,b=[],N=e.nil;return e.top.$require("strscan"),E=b,A=V=[Y(b[0],"BCDice")].concat(E),i=[Y(V[0],"GameSystem")].concat(A),B=e.$r(i),_=i,F=r=[U(i[0],B("Base"),"SwordWorld")].concat(_),R=[P=U(r[0],null,"RatingLexer")].concat(F),p=e.$r(R),P.$$prototype.scanner=N,c(R[0],"SYMBOLS",I(["+","-","*","/","(",")","[","]","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),d(P,"$initialize",function(g){var a,f,T;return g=K(T=(a=(f=g)===N||null==f?N:f.$split(" ",2))===N||null==a?N:a.$first())?T:"",this.scanner=p("StringScanner").$new(g)}),d(P,"$next_token",function(){var g=this,a=N,f=N,T=N;return K(g.scanner["$eos?"]())?[!1,"$"]:K(a=g.scanner.$scan(/\d+/))?["NUMBER",a.$to_i()]:(f=g.scanner.$getch().$upcase(),[K(T=p("SYMBOLS")["$[]"](f))?T:f.$to_sym(),f])}),d(P,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/game_system/sword_world/rating_parsed"]=function(e){var Q,z,C,P,R,p,D,y,n,B,o,j,Y=e.module,U=e.klass,c=e.def,I=e.truthy,K=e.rb_le,d=e.rb_plus,W=e.rb_lt,b=e.neqeq,N=[],M=e.nil;return Q=N,z=j=[Y(N[0],"BCDice")].concat(Q),B=[Y(j[0],"GameSystem")].concat(z),o=e.$r(B),C=B,P=n=[U(B[0],o("Base"),"SwordWorld")].concat(C),p=[R=U(n[0],null,"RatingParsed")].concat(P),D=e.$r(p),(y=R.$$prototype).modifier_after_half=y.modifier_after_one_and_a_half=y.semi_fixed_val=y.kept_modify=y.rate=y.greatest_fortune=y.modifier=M,R.$attr_accessor("rate"),R.$attr_accessor("critical"),R.$attr_accessor("kept_modify"),R.$attr_accessor("first_to"),R.$attr_accessor("first_modify"),R.$attr_accessor("rateup"),R.$attr_accessor("greatest_fortune"),R.$attr_accessor("semi_fixed_val"),R.$attr_accessor("tmp_fixed_val"),R.$attr_accessor("modifier"),R.$attr_accessor("modifier_after_half"),R.$attr_accessor("modifier_after_one_and_a_half"),c(R,"$initialize",function(a,f){var l=this;return l.rate=a,l.modifier=f,l.critical=13,l.kept_modify=0,l.first_to=0,l.first_modify=0,l.greatest_fortune=!1,l.rateup=0,l.semi_fixed_val=0,l.tmp_fixed_val=0,l.modifier_after_half=M,l.modifier_after_one_and_a_half=M}),c(R,"$half",function(){return this.modifier_after_half["$nil?"]()["$!"]()}),c(R,"$one_and_a_half",function(){return this.modifier_after_one_and_a_half["$nil?"]()["$!"]()}),c(R,"$min_critical",function(){var a=this;return I(K(a.semi_fixed_val,1))?3:d(d(a.semi_fixed_val,a.kept_modify),2).$clamp(3,13)}),c(R,"$infinite_roll?",function(){return W(this.$critical(),this.$min_critical())}),c(R,"$to_s",function(){var a=this,f=M;return f="KeyNo."+a.rate,I(W(a.$critical(),13))&&(f=d(f,"c["+a.$critical()+"]")),b(a.$first_modify(),0)&&(f=d(f,"m["+D("Format").$modifier(a.$first_modify())+"]")),b(a.$first_to(),0)&&(f=d(f,"m["+a.$first_to()+"]")),b(a.$rateup(),0)&&(f=d(f,"r["+a.$rateup()+"]")),I(a.greatest_fortune)&&(f=d(f,"gf")),b(a.$semi_fixed_val(),0)&&(f=d(f,"sf["+a.$semi_fixed_val()+"]")),b(a.$tmp_fixed_val(),0)&&(f=d(f,"tf["+a.$tmp_fixed_val()+"]")),b(a.$kept_modify(),0)&&(f=d(f,"a["+D("Format").$modifier(a.$kept_modify())+"]")),b(a.modifier,0)&&(f=d(f,D("Format").$modifier(a.modifier))),f})},Opal.modules["bcdice/game_system/sword_world/rating_options"]=function(e){var b,Q,B,r,k,j,A,M,Y=e.module,U=e.klass,c=e.truthy,I=e.def,K=[];return b=K,Q=M=[Y(K[0],"BCDice")].concat(b),j=[Y(M[0],"GameSystem")].concat(Q),A=e.$r(j),B=j,k=[U(j[0],A("Base"),"SwordWorld")].concat(B),(r=U(k[0],null,"RatingOptions")).$attr_accessor("critical"),r.$attr_accessor("kept_modify"),r.$attr_accessor("first_to"),r.$attr_accessor("first_modify"),r.$attr_accessor("rateup"),r.$attr_accessor("greatest_fortune"),r.$attr_accessor("semi_fixed_val"),r.$attr_accessor("tmp_fixed_val"),r.$attr_accessor("modifier"),r.$attr_accessor("modifier_after_half"),r.$attr_accessor("modifier_after_one_and_a_half"),I(r,"$settable_first_roll_adjust_option?",function(){var F;return c(F=this.$first_modify()["$nil?"]())?this.$first_to()["$nil?"]():F}),I(r,"$settable_non_2d_roll_option?",function(){var F,P,x=this;return c(F=c(P=x.$greatest_fortune()["$nil?"]())?x.$semi_fixed_val()["$nil?"]():P)?x.$tmp_fixed_val()["$nil?"]():F})},Opal.modules["bcdice/game_system/sword_world/rating_parser"]=function(e){var k,n,D,T,S,s,v,$,ee,te,re,$e,_e,se,u,m,t,L,g,a,F,P,C,Y=e.module,U=e.klass,c=e.ensure_kwargs,I=e.send2,K=e.find_super,d=e.def,W=e.send,b=e.truthy,N=e.not,M=e.thrower,E=e.hash,Q=e.const_set,V=e.to_ary,j=e.eqeq,A=e.top,z=[],i=e.nil,B=e.$$$;return A.$require("racc/parser.rb"),A.$require("bcdice/arithmetic/node"),A.$require("bcdice/enum"),A.$require("bcdice/game_system/sword_world/rating_lexer"),A.$require("bcdice/game_system/sword_world/rating_parsed"),A.$require("bcdice/game_system/sword_world/rating_options"),k=z,n=C=[Y(z[0],"BCDice")].concat(k),F=[Y(C[0],"GameSystem")].concat(n),P=e.$r(F),D=F,g=[U(F[0],P("Base"),"SwordWorld")].concat(D),a=e.$r(g),T=g,m=[u=U(g[0],B(a("Racc"),"Parser"),"RatingParser")].concat(T),t=e.$r(m),(L=u.$$prototype).lexer=L.round_type=L.version=i,d(u,"$initialize",function Z(w){var q,O,H=this;return Z.$$p=null,null==(q=(w=c(w)).$$smap.version)&&(q="v1_0"),null==(O=w.$$smap.round_type)&&(O=B(t("RoundType"),"CEIL")),I(H,K(H,"initialize",Z,!1,!0),"initialize",[],null),H.version=q,H.round_type=O},-1),d(u,"$set_debug",function(){return this.yydebug=!0,this}),d(u,"$parse",function(w){try{return this.lexer=t("RatingLexer").$new(w),this.$do_parse()}catch(O){if(!e.rescue(O,[t("ParseError"),t("ZeroDivisionError")]))throw O;try{return i}finally{e.pop_exception()}}}),u.$private(),d(u,"$parsed",function(w,q,O){try{return M("eval_return"),W(t("RatingParsed").$new(w,q),"tap",[],function X(G){var ne,ie,ce,fe,oe,de,me,be,he,ge=null==X.$$s?this:X.$$s,ve=i;return null==ge.round_type&&(ge.round_type=i),null==G&&(G=i),G["$kept_modify="](b(ve=(ne=O.$kept_modify())===i||null==ne?i:ne.$eval(ge.round_type))?ve:0),G["$first_to="](b(ve=O.$first_to())?ve:0),G["$first_modify="](b(ve=O.$first_modify())?ve:0),G["$rateup="](b(ve=(ie=O.$rateup())===i||null==ie?i:ie.$eval(ge.round_type))?ve:0),N(O.$greatest_fortune()["$nil?"]())&&G["$greatest_fortune="](O.$greatest_fortune()),G["$semi_fixed_val="](b(ve=(ce=O.$semi_fixed_val())===i||null==ce?i:ce.$clamp(1,6))?ve:0),G["$tmp_fixed_val="](b(ve=(fe=O.$tmp_fixed_val())===i||null==fe?i:fe.$clamp(1,6))?ve:0),G["$modifier_after_half="]((oe=O.$modifier_after_half())===i||null==oe?i:oe.$eval(ge.round_type)),G["$modifier_after_one_and_a_half="]((de=O.$modifier_after_one_and_a_half())===i||null==de?i:de.$eval(ge.round_type)),me=[b((he=O.$critical(),be=he===i||null==he?i:he.$eval(ge.round_type),ve=be===i||null==be?i:be.$clamp(0,13)))?ve:b(G.$half())||b(G.$one_and_a_half())?13:10],W(G,"critical=",me),me[me.length-1]},{$$s:this})}catch(X){if(X===e.t_eval_return)return X.$v;throw X}}),d(u,"$next_token",function(){return this.lexer.$next_token()}),S=e.large_array_unpack("18,16,17,19,6,20,21,23,24,64,65,27,28,13,66,14,22,15,18,16,17,19,5,20,21,23,24,5,9,3,4,13,10,14,22,15,18,16,17,19,11,20,21,23,24,34,5,34,40,13,42,14,22,15,30,31,30,31,33,34,33,34,62,63,62,63,34,43,30,31,30,31,33,34,33,30,31,44,34,33,34,52,30,31,57,34,33,30,31,30,31,33,34,33,30,31,58,34,33,34,60,30,31,61,34,33,30,31,30,31,33,34,33,30,31,,34,33,34,,30,31,,34,33,30,31,30,31,33,36,33,30,31,62,63,33,62,63,37,38,62,63,62,63,62,63"),s=e.large_array_unpack("7,7,7,7,1,7,7,7,7,55,55,12,12,7,55,7,7,7,25,25,25,25,3,25,25,25,25,0,4,0,0,25,5,25,25,25,49,49,49,49,6,49,49,49,49,13,9,14,17,49,19,49,49,49,13,13,14,14,13,16,14,18,46,46,48,48,22,20,16,16,18,18,16,23,18,22,22,21,24,22,27,29,23,23,37,28,23,24,24,27,27,24,30,27,28,28,38,31,28,33,43,30,30,44,40,30,31,31,33,33,31,62,33,40,40,,63,40,64,,62,62,,65,62,63,63,64,64,63,15,64,65,65,50,50,65,51,51,15,15,56,56,69,69,70,70"),v=e.large_array_unpack("24,4,,19,23,30,40,-4,,43,,,0,43,45,128,57,43,59,42,59,69,64,71,76,14,,78,83,63,90,95,,97,,,,82,94,,102,,,98,101,,49,,51,32,121,124,,,,-2,128,,,,,,109,114,116,121,,,,130,132"),$=e.large_array_unpack("-36,-36,-5,-36,-36,-36,-36,-1,-5,-36,-4,71,-6,-36,-36,-36,-12,-36,-36,-36,-36,-36,-36,-36,-36,-2,-5,-36,-36,-36,-36,-36,-33,-36,-35,-8,-9,-36,-36,-13,-14,-16,-17,-36,-36,-20,-21,-30,-22,-3,-23,-24,-7,-31,-32,-36,-27,-10,-11,-15,-18,-19,-36,-36,-36,-36,-34,-28,-29,-25,-26"),ee=e.large_array_unpack("29,35,7,39,1,41,46,48,25,45,50,51,2,55,,8,56,53,54,,,26,,,,,49,59,,,,,,,,,,,,,,,,,,,,69,70,67,68"),te=e.large_array_unpack("5,5,3,5,1,5,6,6,3,5,6,6,2,7,,2,6,5,5,,,2,,,,,3,5,,,,,,,,,,,,,,,,,,,,6,6,5,5"),re=[i,4,12,0,i,-13,-17,-20,i],$e=[i,i,i,i,12,47,i,i,32],_e=e.large_array_unpack("0,0,racc_error,2,23,_reduce_1,3,23,_reduce_2,4,23,_reduce_3,2,24,_reduce_4,0,25,_reduce_5,2,25,_reduce_6,4,25,_reduce_7,3,25,_reduce_8,3,25,_reduce_9,4,25,_reduce_10,4,25,_reduce_11,2,25,_reduce_12,3,25,_reduce_13,3,25,_reduce_14,4,25,_reduce_15,3,25,_reduce_16,3,25,_reduce_17,4,25,_reduce_18,4,25,_reduce_19,3,25,_reduce_20,2,26,_reduce_21,2,26,_reduce_22,3,26,_reduce_23,3,26,_reduce_24,3,29,_reduce_25,3,29,_reduce_26,1,29,_reduce_none,3,28,_reduce_28,3,28,_reduce_29,1,28,_reduce_none,2,27,_reduce_31,2,27,_reduce_32,1,27,_reduce_none,3,30,_reduce_34,1,30,_reduce_35"),se=E(!1,0,"error",1,"NUMBER",2,"K",3,"R",4,"H",5,"O",6,"G",7,"F",8,"S",9,"T",10,"PLUS",11,"MINUS",12,"ASTERISK",13,"SLASH",14,"PARENL",15,"PARENR",16,"BRACKETL",17,"BRACKETR",18,"AT",19,"SHARP",20,"DOLLAR",21),Q(m[0],"Racc_arg",[S,s,$,v,ee,te,$e,re,22,_e,se,71,36,!0]),Q(m[0],"Racc_token_to_s_table",["$end","error","NUMBER","K","R","H","O","G","F","S","T","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","BRACKETL","BRACKETR","AT","SHARP","DOLLAR","$start","expr","rate","option","modifier","unary","mul","add","term"]),Q(m[0],"Racc_debug_parser",!1),d(u,"$_reduce_1",function(w,q,O){try{M("eval_return");var H,ne,fe,ie=i,ce=i;return ne=null==(H=V(w))[0]?i:H[0],ce=b(fe=(ie=null==H[1]?i:H[1]).$modifier())?fe:B(B(t("Arithmetic"),"Node"),"Number").$new(0),this.$parsed(ne,ce.$eval(this.round_type),ie)}catch(oe){if(oe===e.t_eval_return)return oe.$v;throw oe}}),d(u,"$_reduce_2",function(w,q,O){try{M("eval_return");var H,ie,fe,G=this,ce=i,oe=i;return ie=null==(H=V(w))[1]?i:H[1],b((ce=null==H[2]?i:H[2]).$modifier_after_one_and_a_half())&&G.$raise(t("ParseError")),b(ce.$modifier_after_half())||ce["$modifier_after_half="](B(B(t("Arithmetic"),"Node"),"Number").$new(0)),oe=b(fe=ce.$modifier())?fe:B(B(t("Arithmetic"),"Node"),"Number").$new(0),G.$parsed(ie,oe.$eval(G.round_type),ce)}catch(de){if(de===e.t_eval_return)return de.$v;throw de}}),d(u,"$_reduce_3",function(w,q,O){try{M("eval_return");var H,ie,fe,G=this,ce=i,oe=i;return ie=null==(H=V(w))[2]?i:H[2],b((ce=null==H[3]?i:H[3]).$modifier_after_half())&&G.$raise(t("ParseError")),b(ce.$modifier_after_one_and_a_half())||ce["$modifier_after_one_and_a_half="](B(B(t("Arithmetic"),"Node"),"Number").$new(0)),oe=b(fe=ce.$modifier())?fe:B(B(t("Arithmetic"),"Node"),"Number").$new(0),G.$parsed(ie,oe.$eval(G.round_type),ce)}catch(de){if(de===e.t_eval_return)return de.$v;throw de}}),d(u,"$_reduce_4",function(w,q,O){return w["$[]"](1).$to_i()}),d(u,"$_reduce_5",function(w,q,O){return t("RatingOptions").$new()}),d(u,"$_reduce_6",function(w,q,O){var h,ne,G=i;return ne=null==(h=V(w))[1]?i:h[1],b((G=null==h[0]?i:h[0]).$modifier()["$nil?"]())||this.$raise(t("ParseError")),G["$modifier="](ne),G}),d(u,"$_reduce_7",function(w,q,O){var h,ie,G=i;return ie=null==(h=V(w))[2]?i:h[2],b((G=null==h[0]?i:h[0]).$critical()["$nil?"]())||this.$raise(t("ParseError")),G["$critical="](ie),G}),d(u,"$_reduce_8",function(w,q,O){var h,ie,G=i;return ie=null==(h=V(w))[2]?i:h[2],b((G=null==h[0]?i:h[0]).$critical()["$nil?"]())||this.$raise(t("ParseError")),G["$critical="](ie),G}),d(u,"$_reduce_9",function(w,q,O){var h,G=i,ie=i;return ie=null==(h=V(w))[2]?i:h[2],b((G=null==h[0]?i:h[0])["$settable_first_roll_adjust_option?"]())||this.$raise(t("ParseError")),G["$first_to="](ie.$to_i()),G}),d(u,"$_reduce_10",function(w,q,O){var h,G=i,ie=i;return ie=null==(h=V(w))[3]?i:h[3],b((G=null==h[0]?i:h[0])["$settable_first_roll_adjust_option?"]())||this.$raise(t("ParseError")),G["$first_modify="](ie.$to_i()),G}),d(u,"$_reduce_11",function(w,q,O){var h,G=i,ie=i;return ie=null==(h=V(w))[3]?i:h[3],b((G=null==h[0]?i:h[0])["$settable_first_roll_adjust_option?"]())||this.$raise(t("ParseError")),G["$first_modify="](ie.$to_i()["$-@"]()),G}),d(u,"$_reduce_12",function(w,q,O){var h,G=i;return h=V(w),b((G=null==h[0]?i:h[0]).$modifier_after_half()["$nil?"]())||this.$raise(t("ParseError")),G["$modifier_after_half="](B(B(t("Arithmetic"),"Node"),"Number").$new(0)),G}),d(u,"$_reduce_13",function(w,q,O){var h,ie,G=i;return ie=null==(h=V(w))[2]?i:h[2],b((G=null==h[0]?i:h[0]).$modifier_after_half()["$nil?"]())||this.$raise(t("ParseError")),G["$modifier_after_half="](ie),G}),d(u,"$_reduce_14",function(w,q,O){var h,G=i;return h=V(w),b((G=null==h[0]?i:h[0]).$modifier_after_one_and_a_half())&&this.$raise(t("ParseError")),G["$modifier_after_one_and_a_half="](B(B(t("Arithmetic"),"Node"),"Number").$new(0)),G}),d(u,"$_reduce_15",function(w,q,O){var h,ie,G=i;return ie=null==(h=V(w))[3]?i:h[3],b((G=null==h[0]?i:h[0]).$modifier_after_one_and_a_half())&&this.$raise(t("ParseError")),G["$modifier_after_one_and_a_half="](ie),G}),d(u,"$_reduce_16",function(w,q,O){var h,ie,G=i;return G=null==(h=V(w))[0]?i:h[0],ie=null==h[2]?i:h[2],b(["v2_5","v2_0"]["$include?"](this.version))&&b(G.$rateup()["$nil?"]())||this.$raise(t("ParseError")),G["$rateup="](ie),G}),d(u,"$_reduce_17",function(w,q,O){var h,G=i;return G=null==(h=V(w))[0]?i:h[0],b(["v2_5","v2_0"]["$include?"](this.version))&&b(G["$settable_non_2d_roll_option?"]())||this.$raise(t("ParseError")),G["$greatest_fortune="](!0),G}),d(u,"$_reduce_18",function(w,q,O){var h,G=i,ie=i;return G=null==(h=V(w))[0]?i:h[0],ie=null==h[3]?i:h[3],b(["v2_5","v2_0"]["$include?"](this.version))&&b(G["$settable_non_2d_roll_option?"]())||this.$raise(t("ParseError")),G["$semi_fixed_val="](ie.$to_i()),G}),d(u,"$_reduce_19",function(w,q,O){var h,G=i,ie=i;return G=null==(h=V(w))[0]?i:h[0],ie=null==h[3]?i:h[3],b(["v2_5","v2_0"]["$include?"](this.version))&&b(G["$settable_non_2d_roll_option?"]())||this.$raise(t("ParseError")),G["$tmp_fixed_val="](ie.$to_i()),G}),d(u,"$_reduce_20",function(w,q,O){var h,ie,G=i;return G=null==(h=V(w))[0]?i:h[0],ie=null==h[2]?i:h[2],j(this.version,"v2_5")&&b(G.$kept_modify()["$nil?"]())||this.$raise(t("ParseError")),G["$kept_modify="](ie),G}),d(u,"$_reduce_21",function(w,q,O){return w["$[]"](1)}),d(u,"$_reduce_22",function(w,q,O){return B(B(t("Arithmetic"),"Node"),"Negative").$new(w["$[]"](1))}),d(u,"$_reduce_23",function(w,q,O){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"+",w["$[]"](2))}),d(u,"$_reduce_24",function(w,q,O){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"-",w["$[]"](2))}),d(u,"$_reduce_25",function(w,q,O){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"+",w["$[]"](2))}),d(u,"$_reduce_26",function(w,q,O){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"-",w["$[]"](2))}),d(u,"$_reduce_28",function(w,q,O){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(w["$[]"](0),"*",w["$[]"](2))}),d(u,"$_reduce_29",function(w,q,O){return B(B(t("Arithmetic"),"Node"),"DivideWithGameSystemDefault").$new(w["$[]"](0),w["$[]"](2))}),d(u,"$_reduce_31",function(w,q,O){return w["$[]"](1)}),d(u,"$_reduce_32",function(w,q,O){return B(B(t("Arithmetic"),"Node"),"Negative").$new(w["$[]"](1))}),d(u,"$_reduce_34",function(w,q,O){return w["$[]"](1)}),d(u,"$_reduce_35",function(w,q,O){return B(B(t("Arithmetic"),"Node"),"Number").$new(w["$[]"](0))}),d(u,"$_reduce_none",function(w,q,O){return w["$[]"](0)})},Opal.modules["bcdice/game_system/SwordWorld"]=function(e){var F,D,T,u,m,t,S,g,a,R,Y=e.module,U=e.klass,c=e.const_set,I=e.send2,K=e.find_super,d=e.def,W=e.truthy,b=e.rb_ge,N=e.rb_le,M=e.eqeq,E=e.neqeq,Q=e.rb_minus,V=e.rb_gt,j=e.hash2,A=e.send,z=e.to_ary,i=e.rb_plus,B=e.rb_lt,o=e.rb_times,k=e.thrower,_=e.rb_divide,C=e.top,r=[],n=e.nil;return C.$require("bcdice/base"),C.$require("bcdice/game_system/sword_world/rating_parser"),F=r,D=R=[Y(r[0],"BCDice")].concat(F),g=[Y(R[0],"GameSystem")].concat(D),a=e.$r(g),T=g,m=[u=U(g[0],a("Base"),"SwordWorld")].concat(T),t=e.$r(m),(S=u.$$prototype).rating_table=S.randomizer=n,c(m[0],"ID","SwordWorld"),c(m[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c9RPG"),c(m[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u3068"),c(m[0],"HELP_MESSAGE","\u30fbSW\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx[c]+m$f) (x:\u30ad\u30fc, c:\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024, m:\u30dc\u30fc\u30ca\u30b9, f:\u51fa\u76ee\u4fee\u6b63)\n"),u.$register_prefix("H?K"),d(u,"$initialize",function s(v){return s.$$p=null,I(this,K(this,"initialize",s,!1,!0),"initialize",[v],null),this.rating_table=0}),d(u,"$result_2d6",function(v,$,ee,te,re){return W(b($,12))?t("Result").$critical(this.$translate("SwordWorld.critical")):W(N($,2))?t("Result").$fumble(this.$translate("SwordWorld.fumble")):E(te,">=")||M(re,"?")?n:W(b(v,re))?t("Result").$success(this.$translate("success")):t("Result").$failure(this.$translate("failure"))}),d(u,"$eval_game_system_specific_command",function(v){return this.$rating(v)}),u.$private(),d(u,"$rating_parser",function(){return t("RatingParser").$new()}),d(u,"$rating",function(v){var $,ee,te=this,re=n,$e=n,_e=n,le=n,ae=n,se=n,ue=n,J=n,L=n,Z=n,w=n,q=n,O=n,h=n,X=n,G=n;return te.$debug("rating string",v),re=te.$rating_parser().$parse(v),W(re)?($e=te.$getSW2_0_RatingTable(),_e=Q($e.$length(),1),te.$debug("keyMax",_e),W(V(re.$rate(),_e))?t("Result").$new(te.$translate("SwordWorld.keynumber_exceeds",j(["keyMax"],{keyMax:_e}))):W(re["$infinite_roll?"]())?t("Result").$new(te.$translate("SwordWorld.infinite_critical",j(["min_critical"],{min_critical:re.$min_critical()}))):(le=te.$getNewRates($e),ae=re+" \uff1e ",se=[],ue=[],J=[],L=0,Z=0,w=0,q=0,O=re.$first_to(),h=re.$first_modify(),function(){try{var ne=k("break");A(te,"loop",[],function ie(){var ce,fe,be,he,oe=null==ie.$$s?this:ie.$$s,de=n,me=n;if(fe=oe.$rollDice(re,q),me=null==(ce=z(fe))[1]?n:ce[1],L=de=null==ce[0]?n:ce[0],E(O,0)?(L=de=O,O=0):E(h,0)&&(L=i(L,h),h=0),W(N(de,2))&&(se["$<<"](de.$to_s()),ue["$<<"](me.$to_s()),J["$<<"]("**"),q=i(q,1),ne.$throw()),E(re.$kept_modify(),0)&&E(L,2)&&(L=i(L,re.$kept_modify())),W(B(L,2))&&(L=2),W(V(L,12))&&(L=12),be=[i(re.$rate(),o(q,re.$rateup())),_e].$min(),oe.$debug("currentKey",be),he=le["$[]"](L)["$[]"](be),oe.$debug("rateValue",he),w=i(w,he),Z=i(Z,L),se["$<<"](L.$to_s()),ue["$<<"](me.$to_s()),J["$<<"](W(V(L,2))?he:"**"),q=i(q,1),W(b(L,re.$critical())))return n;ne.$throw()},{$$s:te})}catch(ie){if(ie===ne)return ie.$v;throw ie}}(),ee=te.$getResultText(w,re,ue,se,J,Z,q),$=z(ee),X=null==$[1]?n:$[1],G=null==$[2]?n:$[2],ae=i(ae,null==$[0]?n:$[0]),A(t("Result").$new(),"tap",[],function(ie){var ce;return null==ie&&(ie=n),ie["$text="](ae),ie["$critical="](X),A(ie,"fumble=",ce=[G]),ce[ce.length-1]}))):(te.$debug("not matched"),"1")}),d(u,"$getSW2_0_RatingTable",function(){return["*,0,0,0,1,2,2,3,3,4,4","*,0,0,0,1,2,3,3,3,4,4","*,0,0,0,1,2,3,4,4,4,4","*,0,0,1,1,2,3,4,4,4,5","*,0,0,1,2,2,3,4,4,5,5","*,0,1,1,2,2,3,4,5,5,5","*,0,1,1,2,3,3,4,5,5,5","*,0,1,1,2,3,4,4,5,5,6","*,0,1,2,2,3,4,4,5,6,6","*,0,1,2,3,3,4,4,5,6,7","*,1,1,2,3,3,4,5,5,6,7","*,1,2,2,3,3,4,5,6,6,7","*,1,2,2,3,4,4,5,6,6,7","*,1,2,3,3,4,4,5,6,7,7","*,1,2,3,4,4,4,5,6,7,8","*,1,2,3,4,4,5,5,6,7,8","*,1,2,3,4,4,5,6,7,7,8","*,1,2,3,4,5,5,6,7,7,8","*,1,2,3,4,5,6,6,7,7,8","*,1,2,3,4,5,6,7,7,8,9","*,1,2,3,4,5,6,7,8,9,10","*,1,2,3,4,6,6,7,8,9,10","*,1,2,3,5,6,6,7,8,9,10","*,2,2,3,5,6,7,7,8,9,10","*,2,3,4,5,6,7,7,8,9,10","*,2,3,4,5,6,7,8,8,9,10","*,2,3,4,5,6,8,8,9,9,10","*,2,3,4,6,6,8,8,9,9,10","*,2,3,4,6,6,8,9,9,10,10","*,2,3,4,6,7,8,9,9,10,10","*,2,4,4,6,7,8,9,10,10,10","*,2,4,5,6,7,8,9,10,10,11","*,3,4,5,6,7,8,10,10,10,11","*,3,4,5,6,8,8,10,10,10,11","*,3,4,5,6,8,9,10,10,11,11","*,3,4,5,7,8,9,10,10,11,12","*,3,5,5,7,8,9,10,11,11,12","*,3,5,6,7,8,9,10,11,12,12","*,3,5,6,7,8,10,10,11,12,13","*,4,5,6,7,8,10,11,11,12,13","*,4,5,6,7,9,10,11,11,12,13","*,4,6,6,7,9,10,11,12,12,13","*,4,6,7,7,9,10,11,12,13,13","*,4,6,7,8,9,10,11,12,13,14","*,4,6,7,8,10,10,11,12,13,14","*,4,6,7,9,10,10,11,12,13,14","*,4,6,7,9,10,10,12,13,13,14","*,4,6,7,9,10,11,12,13,13,15","*,4,6,7,9,10,12,12,13,13,15","*,4,6,7,10,10,12,12,13,14,15","*,4,6,8,10,10,12,12,13,15,15","*,5,7,8,10,10,12,12,13,15,15","*,5,7,8,10,11,12,12,13,15,15","*,5,7,9,10,11,12,12,14,15,15","*,5,7,9,10,11,12,13,14,15,16","*,5,7,10,10,11,12,13,14,16,16","*,5,8,10,10,11,12,13,15,16,16","*,5,8,10,11,11,12,13,15,16,17","*,5,8,10,11,12,12,13,15,16,17","*,5,9,10,11,12,12,14,15,16,17","*,5,9,10,11,12,13,14,15,16,18","*,5,9,10,11,12,13,14,16,17,18","*,5,9,10,11,13,13,14,16,17,18","*,5,9,10,11,13,13,15,17,17,18","*,5,9,10,11,13,14,15,17,17,18","*,5,9,10,12,13,14,15,17,18,18","*,5,9,10,12,13,15,15,17,18,19","*,5,9,10,12,13,15,16,17,19,19","*,5,9,10,12,14,15,16,17,19,19","*,5,9,10,12,14,16,16,17,19,19","*,5,9,10,12,14,16,17,18,19,19","*,5,9,10,13,14,16,17,18,19,20","*,5,9,10,13,15,16,17,18,19,20","*,5,9,10,13,15,16,17,19,20,21","*,6,9,10,13,15,16,18,19,20,21","*,6,9,10,13,16,16,18,19,20,21","*,6,9,10,13,16,17,18,19,20,21","*,6,9,10,13,16,17,18,20,21,22","*,6,9,10,13,16,17,19,20,22,23","*,6,9,10,13,16,18,19,20,22,23","*,6,9,10,13,16,18,20,21,22,23","*,6,9,10,13,17,18,20,21,22,23","*,6,9,10,14,17,18,20,21,22,24","*,6,9,11,14,17,18,20,21,23,24","*,6,9,11,14,17,19,20,21,23,24","*,6,9,11,14,17,19,21,22,23,24","*,7,10,11,14,17,19,21,22,23,25","*,7,10,12,14,17,19,21,22,24,25","*,7,10,12,14,18,19,21,22,24,25","*,7,10,12,15,18,19,21,22,24,26","*,7,10,12,15,18,19,21,23,25,26","*,7,11,13,15,18,19,21,23,25,26","*,7,11,13,15,18,20,21,23,25,27","*,8,11,13,15,18,20,22,23,25,27","*,8,11,13,16,18,20,22,23,25,28","*,8,11,14,16,18,20,22,23,26,28","*,8,11,14,16,19,20,22,23,26,28","*,8,12,14,16,19,20,22,24,26,28","*,8,12,15,16,19,20,22,24,27,28","*,8,12,15,17,19,20,22,24,27,29","*,8,12,15,18,19,20,22,24,27,30"]}),d(u,"$getNewRates",function(v){var $,ee,re=n,$e=n,_e=n,le=n,ae=n,se=n,ue=n,J=n,L=n,Z=n,w=n;return re=[],$e=[],_e=[],le=[],ae=[],se=[],ue=[],J=[],L=[],Z=[],w=[],A(v,"each",[],function(h){var H=n;return null==h&&(h=n),H=h.$split(/,/),w.$push(0),re.$push(H["$[]"](1).$to_i()),$e.$push(H["$[]"](2).$to_i()),_e.$push(H["$[]"](3).$to_i()),le.$push(H["$[]"](4).$to_i()),ae.$push(H["$[]"](5).$to_i()),se.$push(H["$[]"](6).$to_i()),ue.$push(H["$[]"](7).$to_i()),J.$push(H["$[]"](8).$to_i()),L.$push(H["$[]"](9).$to_i()),Z.$push(H["$[]"](10).$to_i())}),M(this.rating_table,1)&&Z["$[]="](31,($=[32,(ee=[33,10],A(Z,"[]=",ee),ee[ee.length-1])],A(Z,"[]=",$),$[$.length-1])),[w,w,w,re,$e,_e,le,ae,se,ue,J,L,Z]}),d(u,"$rollDice",function(v,$){var te=n;return[(te=this.randomizer.$roll_barabara(2,6)).$sum(),te.$join(",")]}),d(u,"$getResultText",function(v,$,ee,te,re,$e,_e){var ae=n,se=n,ue=n,J=n,L=n;return(ae=[]).$push("2D:["+ee.$join(" ")+"]="+te.$join(",")),W(N($e,2))?(ae.$push(re.$join(",")),ae.$push(this.$translate("SwordWorld.fumble")),[ae.$join(" \uff1e "),!1,!0]):(W(V(re.$size(),1))||E($.$modifier(),0)?(se=i(re.$join(","),t("Format").$modifier($.$modifier())),W($.$half())?(se="("+se+")/2",E($.$modifier_after_half(),0)&&(se=i(se,t("Format").$modifier($.$modifier_after_half())))):W($.$one_and_a_half())&&(se="("+se+")*1.5",E($.$modifier_after_one_and_a_half(),0)&&(se=i(se,t("Format").$modifier($.$modifier_after_one_and_a_half())))),ae.$push(se)):W($.$half())?(se=re.$first()+"/2",E($.$modifier_after_half(),0)&&(se=i(se,t("Format").$modifier($.$modifier_after_half()))),ae.$push(se)):W($.$one_and_a_half())&&(se=re.$first()+"*1.5",E($.$modifier_after_one_and_a_half(),0)&&(se=i(se,t("Format").$modifier($.$modifier_after_one_and_a_half()))),ae.$push(se)),W(V(_e,1))&&(ue=this.$translate("SwordWorld.round_text",j(["reroll_count"],{reroll_count:Q(_e,1)})),ae.$push(ue)),J=i(v,$.$modifier()),W($.$half())?(J=_(J,2).$ceil(),E($.$modifier_after_half(),0)&&(J=i(J,$.$modifier_after_half()))):W($.$one_and_a_half())&&(J=o(J,1.5).$ceil(),E($.$modifier_after_one_and_a_half(),0)&&(J=i(J,$.$modifier_after_one_and_a_half()))),L=J.$to_s(),ae.$push(L),[ae.$join(" \uff1e "),V(_e,1),!1])})},Opal.modules["bcdice/game_system/sword_world/transcendent_test"]=function(e){var j,B,n,p,D,y,g,a,F,k,_,z,Y=e.module,U=e.klass,c=e.def,I=e.truthy,K=e.rb_lt,d=e.hash2,W=e.rb_ge,b=e.rb_plus,N=e.send,M=e.top,E=[],Q=e.nil;return M.$require("bcdice/result"),M.$require("bcdice/translate"),j=E,B=z=[Y(E[0],"BCDice")].concat(j),k=[Y(z[0],"GameSystem")].concat(B),_=e.$r(k),n=k,p=F=[U(k[0],_("SwordWorld"),"SwordWorld2_0")].concat(n),y=[D=U(F[0],null,"TranscendentTest")].concat(p),g=e.$r(y),(a=D.$$prototype).modifier=a.critical_value=a.expression=a.modifier_str=a.target=a.cmp_op=Q,D.$include(g("Translate")),c(D,"$initialize",function(l,T,u,m,t){var S=this;return S.critical_value=l,S.modifier=T,S.cmp_op=u,S.target=m,S.locale=t,S.modifier_str=g("Format").$modifier(S.modifier),S.expression=S.$node_expression()}),c(D,"$execute",function(l){var t,S,s,T=this,u=Q,m=Q,v=Q,$=Q,ee=Q,te=Q;if(I(K(T.critical_value,3)))return T.$translate("SwordWorld2_0.transcendent_critical_too_small",d(["expression"],{expression:T.expression}));if(m=[u=l.$roll_barabara(2,6)],t=u["$=="]([1,1]),S=u["$=="]([6,6]),!I(t))for(;I(W(T.$sum_of_dice(m.$last()),T.critical_value));)m.$push(l.$roll_barabara(2,6));return s=T.$sum_of_dice(m),v=b(s,T.modifier),$=T.$result_status(v,m.$length(),t,S),ee=d(["success","failure","super_success","critical","fumble"],{success:T.$translate("success"),failure:T.$translate("failure"),super_success:T.$translate("SwordWorld2_0.super_success"),critical:T.$translate("SwordWorld.critical"),fumble:T.$translate("SwordWorld.fumble")}).$freeze()["$[]"]($),te=["("+T.expression+")",""+T.$dice_str(m,s)+T.modifier_str,v,ee].$compact(),N(g("Result").$new(),"tap",[],function($e){var _e;return null==$e&&($e=Q),$e["$text="](te.$join(" \uff1e ")),$e["$fumble="]($["$=="]("fumble")),$e["$critical="]($["$=="]("critical")),$e["$success="](["success","super_success","critical"]["$include?"]($)),_e=[["failure","fumble"]["$include?"]($)],N($e,"failure=",_e),_e[_e.length-1]})}),D.$private(),c(D,"$node_expression",function(){var T,l=this;return T="2D6@"+l.critical_value+l.modifier_str,I(l.target)?""+T+l.cmp_op+l.target:T}),c(D,"$sum_of_dice",function(l){return l.$flatten().$sum()}),c(D,"$dice_str",function(l,T){return""+T+N(l,"map",[],function(t){return null==t&&(t=Q),"["+t.$join(",")+"]"}).$join()}),c(D,"$result_status",function(l,T,u,m){var t=this;return I(t.target)?I(u)?"fumble":I(m)?"critical":I(l.$send(t.cmp_op,t.target))?I(W(T,2))&&I(W(l,41))?"super_success":"success":"failure":"no_target"})},Opal.modules["bcdice/game_system/SwordWorld2_0"]=function(e){var _,x,y,g,a,f,l,P,R,r,Y=e.module,U=e.klass,c=e.const_set,I=e.send2,K=e.find_super,d=e.def,W=e.eqeqeq,b=e.truthy,N=e.hash2,M=e.rb_gt,E=e.rb_plus,Q=e.eqeq,V=e.rb_times,j=e.send,A=e.neqeq,z=e.top,i=[],B=e.nil,o=e.$$$;return z.$require("bcdice/arithmetic_evaluator"),z.$require("bcdice/game_system/SwordWorld"),z.$require("bcdice/game_system/sword_world/transcendent_test"),_=i,x=r=[Y(i[0],"BCDice")].concat(_),P=[Y(r[0],"GameSystem")].concat(x),R=e.$r(P),y=P,a=[g=U(P[0],R("SwordWorld"),"SwordWorld2_0")].concat(y),f=e.$r(a),(l=g.$$prototype).locale=l.randomizer=B,c(a[0],"ID","SwordWorld2.0"),c(a[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.0"),c(a[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u30682.0"),c(a[0],"HELP_MESSAGE",'\u81ea\u52d5\u7684\u6210\u529f\u3001\u6210\u529f\u3001\u5931\u6557\u3001\u81ea\u52d5\u7684\u5931\u6557\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx)\n\u3000"K\u30ad\u30fc\u30ca\u30f3\u30d0\u30fc+\u30dc\u30fc\u30ca\u30b9"\u306e\u5f62\u3067\u8a18\u5165\u3057\u307e\u3059\u3002\n\u3000\u30dc\u30fc\u30ca\u30b9\u306e\u90e8\u5206\u306b\u300cK20+K30\u300d\u306e\u3088\u3046\u306b\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u53d6\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002\n\u3000\u307e\u305f\u3001\u30dc\u30fc\u30ca\u30b9\u306f\u8907\u6570\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3082\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3068\u540c\u69d8\u306b\u3001\u4ed6\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u96a0\u308c\u3066\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2\n\n\u30fb\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306e\u8a2d\u5b9a\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306f"[\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024]"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3000\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502410\u3068\u3057\u307e\u3059\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u51e6\u7406\u304c\u5fc5\u8981\u306a\u3044\u3068\u304d\u306f13\u306a\u3069\u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002(\u9632\u5fa1\u6642\u306a\u3069\u306e\u5bfe\u5fdc)\n\u3000\u307e\u305f\u30bf\u30a4\u30d7\u306e\u8efd\u6e1b\u5316\u306e\u305f\u3081\u306b\u672b\u5c3e\u306b\u300c@\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u300d\u3067\u3082\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3000\u4f8b\uff09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u534a\u6e1b (HKx, KxH+N)\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u5148\u982d\u307e\u305f\u306f\u672b\u5c3e\u306b"H"\u3092\u3064\u3051\u308b\u3068\u3001\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3092\u632f\u3063\u3066\u6700\u7d42\u7d50\u679c\u3092\u534a\u6e1b\u3055\u305b\u307e\u3059\u3002\n\u3000\u672b\u5c3e\u306b\u3064\u3051\u305f\u5834\u5408\u3001\u76f4\u5f8c\u306b\u4fee\u6b63\u3092\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u3001\u534a\u6e1b\u5f8c\u306e\u52a0\u6e1b\u7b97\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u3053\u306e\u969b\u3001\u8907\u6570\u306e\u9805\u306b\u3088\u308b\u4fee\u6b63\u306b\u306f\u30ab\u30c3\u30b3\u3067\u56f2\u3046\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\uff08\u30ab\u30c3\u30b3\u304c\u306a\u3044\u3068\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u307e\u3059\uff09\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u3057\u3068\u6271\u308f\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H(1+1)\n\n\u30fb\u30c0\u30a4\u30b9\u76ee\u306e\u4fee\u6b63\uff08\u904b\u547d\u5909\u8ee2\u3084\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30ec\u30a4\u7528\uff09\n\u3000\u672b\u5c3e\u306b\u300c$\u4fee\u6b63\u5024\u300d\u3067\u30c0\u30a4\u30b9\u76ee\u306b\u4fee\u6b63\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\u3000$\uff0b\uff11\u3068\u4fee\u6b63\u8868\u8a18\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u306b\uff0b\u4fee\u6b63\u3001\uff04\uff19\u306e\u3088\u3046\u306b\u56fa\u5b9a\u5024\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u3092\u305d\u306e\u51fa\u76ee\u306b\u5dee\u3057\u66ff\u3048\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3057\u305f\u5834\u5408\u3067\u3082\u56fa\u5b9a\u5024\u3084\u4fee\u6b63\u5024\u306e\u9069\u7528\u306f\u6700\u521d\u306e\u4e00\u56de\u3060\u3051\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9\n\n\u30fb\u9996\u5207\u308a\u5200\u7528\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u4e0a\u6607 r10\n\u3000\u4f8b\uff09K20r10\u3000K30+24@8R10\u3000K40+24@8$12r10\n\n\u30fb\u30b0\u30ec\u30a4\u30c6\u30b9\u30c8\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u306f\u672b\u5c3e\u306b gf\n\u3000\u4f8b\uff09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r10gf\n\n\u30fb\u5a01\u529b\u8868\u30921d+sf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u3082\u7d99\u7d9a sf4\n\u3000\u4f8b\uff09k10sf4\u3000k0+5SF4@13\u3000k70+26sf3@9\n\n\u30fb\u5a01\u529b\u8868\u30921d+tf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u306f2d\u3067\u53c2\u7167 tf3\n\u3000\u4f8b\uff09k10tf3\u3000k0+5TF4@13\u3000k70+26tf3@9\n\n\u30fb\u8d85\u8d8a\u5224\u5b9a\u7528\u306b2d6\u30ed\u30fc\u30eb\u306b 2D6@10 \u66f8\u5f0f\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u4ed8\u4e0e\u304c\u53ef\u80fd\u306b\u3002\n\u3000\u4f8b\uff092D6@10\u30002D6@10+11>=30\n\n\u30fb\u6210\u9577\u3000(Gr)\n\u3000\u672b\u5c3e\u306b\u6570\u5b57\u3092\u4ed8\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u56de\u306e\u6210\u9577\u3092\u307e\u3068\u3081\u3066\u884c\u3048\u307e\u3059\u3002\n\u3000\u4f8b\uff09Gr3\n\n\u30fb\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3000(FT)\n\u3000\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30fb\u7d61\u307f\u52b9\u679c\u8868\u3000(TT)\n\u3000\u7d61\u307f\u52b9\u679c\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n'),g.$register_prefix("H?K","Gr","2D6?@\\d+","FT","TT"),d(g,"$initialize",function T(u){var t=this;return T.$$p=null,I(t,K(t,"initialize",T,!1,!0),"initialize",[u],null),t.rating_table=2}),d(g,"$eval_game_system_specific_command",function T(u){var S,t=this,v=B;return T.$$p=null,W(/^Gr(\d+)?/i,S=u)?b(u["$=~"](/^Gr(\d+)/i))?t.$growth(f("Regexp").$last_match(1).$to_i()):t.$growth():W(/^2D6?@\d+/i,S)?(v=o(f("Command"),"Parser").$new(/2D6?/i,N(["round_type"],{round_type:o(o(f("BCDice"),"RoundType"),"CEIL")})).$enable_critical().$restrict_cmp_op_to(B,">=",">").$parse(u),b(v)?f("TranscendentTest").$new(v.$critical(),v.$modify_number(),v.$cmp_op(),v.$target_number(),t.locale).$execute(t.randomizer):B):W("FT",S)?t.$get_fumble_table():W("TT",S)?t.$get_tangle_table():I(t,K(t,"eval_game_system_specific_command",T,!1,!0),"eval_game_system_specific_command",[u],null)}),d(g,"$rating_parser",function(){return f("RatingParser").$new(N(["version"],{version:"v2_0"}))}),d(g,"$rollDice",function T(u,m){var S=this,s=B;return T.$$p=null,b(M(u.$semi_fixed_val(),0))?(s=S.randomizer.$roll_once(6),[E(s,u.$semi_fixed_val()),s+","+u.$semi_fixed_val()]):Q(m,0)&&b(M(u.$tmp_fixed_val(),0))?(s=S.randomizer.$roll_once(6),[E(s,u.$tmp_fixed_val()),s+","+u.$tmp_fixed_val()]):b(u.$greatest_fortune())?(s=S.randomizer.$roll_once(6),[V(s,2),s+","+s]):I(S,K(S,"rollDice",T,!1,!0),"rollDice",[u,m],null)}),d(g,"$growth",function(u){return null==u&&(u=1),j(e.Range.$new(1,u,!1),"map",[],function t(){return(null==t.$$s?this:t.$$s).$growth_step()},{$$s:this}).$join(" | ")},-1),d(g,"$growth_step",function(){var u=this,m=B,t=B,S=B;return t=(m=o(f("DiceTable"),"Table").$from_i18n("SwordWorld2_0.GrowthTable",u.locale)).$roll(u.randomizer),S=m.$roll(u.randomizer),A(t.$value(),S.$value())?"["+t.$value()+","+S.$value()+"]->("+t.$body()+" or "+S.$body()+")":"["+t.$value()+","+S.$value()+"]->("+t.$body()+")"}),d(g,"$get_fumble_table",function(){return o(f("DiceTable"),"Table").$from_i18n("SwordWorld2_0.FumbleTable",this.locale).$roll(this.randomizer)}),d(g,"$get_tangle_table",function(){return o(f("DiceTable"),"Table").$from_i18n("SwordWorld2_0.TangleTable",this.locale).$roll(this.randomizer)})},Opal.modules["bcdice/game_system/SwordWorld2_5"]=function(e){var B,C,R,p,D,y,g,n,x,k,Y=e.module,U=e.klass,c=e.const_set,I=e.eqeqeq,K=e.send,d=e.hash2,W=e.truthy,b=e.send2,N=e.find_super,M=e.def,E=e.range,Q=e.rb_plus,j=[],A=e.nil,z=e.$$$;return e.top.$require("bcdice/game_system/SwordWorld2_0"),B=j,C=k=[Y(j[0],"BCDice")].concat(B),n=[Y(k[0],"GameSystem")].concat(C),x=e.$r(n),R=n,D=[p=U(n[0],x("SwordWorld2_0"),"SwordWorld2_5")].concat(R),y=e.$r(D),(g=p.$$prototype).randomizer=g.locale=A,c(D[0],"ID","SwordWorld2.5"),c(D[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.5"),c(D[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u30682.5"),c(D[0],"HELP_MESSAGE",'\u81ea\u52d5\u7684\u6210\u529f\u3001\u6210\u529f\u3001\u5931\u6557\u3001\u81ea\u52d5\u7684\u5931\u6557\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx)\n\u3000"K\u30ad\u30fc\u30ca\u30f3\u30d0\u30fc+\u30dc\u30fc\u30ca\u30b9"\u306e\u5f62\u3067\u8a18\u5165\u3057\u307e\u3059\u3002\n\u3000\u30dc\u30fc\u30ca\u30b9\u306e\u90e8\u5206\u306b\u300cK20+K30\u300d\u306e\u3088\u3046\u306b\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u53d6\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002\n\u3000\u307e\u305f\u3001\u30dc\u30fc\u30ca\u30b9\u306f\u8907\u6570\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3082\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3068\u540c\u69d8\u306b\u3001\u4ed6\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u96a0\u308c\u3066\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2\n\n\u30fb\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306e\u8a2d\u5b9a\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306f"[\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024]"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3000\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502410\u3068\u3057\u307e\u3059\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u51e6\u7406\u304c\u5fc5\u8981\u306a\u3044\u3068\u304d\u306f13\u306a\u3069\u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002(\u9632\u5fa1\u6642\u306a\u3069\u306e\u5bfe\u5fdc)\n\u3000\u307e\u305f\u30bf\u30a4\u30d7\u306e\u8efd\u6e1b\u5316\u306e\u305f\u3081\u306b\u672b\u5c3e\u306b\u300c@\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u300d\u3067\u3082\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3000\u4f8b\uff09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u534a\u6e1b (HKx, KxH+N)\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u5148\u982d\u307e\u305f\u306f\u672b\u5c3e\u306b"H"\u3092\u3064\u3051\u308b\u3068\u3001\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3092\u632f\u3063\u3066\u6700\u7d42\u7d50\u679c\u3092\u534a\u6e1b\u3055\u305b\u307e\u3059\u3002\n\u3000\u672b\u5c3e\u306b\u3064\u3051\u305f\u5834\u5408\u3001\u76f4\u5f8c\u306b\u4fee\u6b63\u3092\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u3001\u534a\u6e1b\u5f8c\u306e\u52a0\u6e1b\u7b97\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u3053\u306e\u969b\u3001\u8907\u6570\u306e\u9805\u306b\u3088\u308b\u4fee\u6b63\u306b\u306f\u30ab\u30c3\u30b3\u3067\u56f2\u3046\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\uff08\u30ab\u30c3\u30b3\u304c\u306a\u3044\u3068\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u307e\u3059\uff09\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u3057\u3068\u6271\u308f\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H+(1+1)\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e1.5\u500d (OHKx, KxOH+N)\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u5148\u982d\u307e\u305f\u306f\u672b\u5c3e\u306b"OH"\u3092\u3064\u3051\u308b\u3068\u3001\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3092\u632f\u3063\u3066\u6700\u7d42\u7d50\u679c\u30921.5\u500d\u3057\u307e\u3059\u3002\n\u3000\u672b\u5c3e\u306b\u3064\u3051\u305f\u5834\u5408\u3001\u76f4\u5f8c\u306b\u4fee\u6b63\u3092\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u30011.5\u500d\u5f8c\u306e\u52a0\u6e1b\u7b97\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u3053\u306e\u969b\u3001\u8907\u6570\u306e\u9805\u306b\u3088\u308b\u4fee\u6b63\u306b\u306f\u30ab\u30c3\u30b3\u3067\u56f2\u3046\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\uff08\u30ab\u30c3\u30b3\u304c\u306a\u3044\u3068\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u307e\u3059\uff09\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u3057\u3068\u6271\u308f\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09OHK20\u3000\u3000K20oh\u3000\u3000OHK10-5@9\u3000\u3000K20+8OH+2\u3000\u3000K20+8OH+(1+1)\n\n\u30fb\u30c0\u30a4\u30b9\u76ee\u306e\u4fee\u6b63\uff08\u904b\u547d\u5909\u8ee2\u3084\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30ec\u30a4\u7528\uff09\n\u3000\u672b\u5c3e\u306b\u300c$\u4fee\u6b63\u5024\u300d\u3067\u30c0\u30a4\u30b9\u76ee\u306b\u4fee\u6b63\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\u3000$\uff0b\uff11\u3068\u4fee\u6b63\u8868\u8a18\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u306b\uff0b\u4fee\u6b63\u3001\uff04\uff19\u306e\u3088\u3046\u306b\u56fa\u5b9a\u5024\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u3092\u305d\u306e\u51fa\u76ee\u306b\u5dee\u3057\u66ff\u3048\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3057\u305f\u5834\u5408\u3067\u3082\u56fa\u5b9a\u5024\u3084\u4fee\u6b63\u5024\u306e\u9069\u7528\u306f\u6700\u521d\u306e\u4e00\u56de\u3060\u3051\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9\n\n\u30fb\u30c0\u30a4\u30b9\u76ee\u306e\u4fee\u6b63\uff08\u5fc5\u6bba\u653b\u6483\u7528\uff09\n\u3000\u300c\uff03\u4fee\u6b63\u5024\u300d\u3067\u30c0\u30a4\u30b9\u76ee\u306b\u4fee\u6b63\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3057\u305f\u5834\u5408\u3067\u3082\u4fee\u6b63\u5024\u306e\u9069\u7528\u306f\u7d99\u7d9a\u3055\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09K20#1\u3000\u3000\u3000k10-5@9#2\n\n\u30fb\u9996\u5207\u308a\u5200\u7528\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u4e0a\u6607 r5\n\u3000\u4f8b\uff09K20r5\u3000K30+24@8R5\u3000K40+24@8$12r5\n\n\u30fb\u30b0\u30ec\u30a4\u30c6\u30b9\u30c8\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u306f\u672b\u5c3e\u306b gf\n\u3000\u4f8b\uff09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r5gf\n\n\u30fb\u5a01\u529b\u8868\u30921d+sf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u3082\u7d99\u7d9a sf4\n\u3000\u4f8b\uff09k10sf4\u3000k0+5sf4@13\u3000k70+26sf3@9\n\n\u30fb\u5a01\u529b\u8868\u30921d+tf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u306f2d\u3067\u53c2\u7167 tf3\n\u3000\u4f8b\uff09k10tf3\u3000k0+5tf4@13\u3000k70+26tf3@9\n\n\u30fb\u8d85\u8d8a\u5224\u5b9a\u7528\u306b2d6\u30ed\u30fc\u30eb\u306b 2D6@10 \u66f8\u5f0f\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u4ed8\u4e0e\u304c\u53ef\u80fd\u306b\u3002\n\u3000\u4f8b\uff092D6@10\u30002D6@10+11>=30\n\n\u30fb\u6210\u9577\u3000(Gr)\n\u3000\u672b\u5c3e\u306b\u6570\u5b57\u3092\u4ed8\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u56de\u306e\u6210\u9577\u3092\u307e\u3068\u3081\u3066\u884c\u3048\u307e\u3059\u3002\n\u3000\u4f8b\uff09Gr3\n\n\u30fb\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3000(FT)\n\u3000\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30fb\u7d61\u307f\u52b9\u679c\u8868\u3000(TT)\n\u3000\u7d61\u307f\u52b9\u679c\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30fb\u30c9\u30eb\u30a4\u30c9\u306e\u7269\u7406\u9b54\u6cd5\u7528\u8868\u3000(Dru[2-6\u306e\u5024,7-9\u306e\u5024,10-12\u306e\u5024])\n\u3000\u4f8b\uff09Dru[0,3,6]+10-3\n\n\u30fb\u30a2\u30d3\u30b9\u30ab\u30fc\u30b9\u8868\u3000(ABT)\n\u3000\u30a2\u30d3\u30b9\u30ab\u30fc\u30b9\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n'),p.$register_prefix("H?K","OHK","Gr","2D6?@\\d+","FT","TT","Dru","ABT"),M(p,"$eval_game_system_specific_command",function a(f){var u,T=this,m=A,S=A;return a.$$p=null,I(/^dru\[(\d+),(\d+),(\d+)\]/i,u=f)?(m=K(y("Regexp").$last_match().$captures(),"map",[],"to_i".$to_proc()),S=z(y("Command"),"Parser").$new(/dru\[\d+,\d+,\d+\]/i,d(["round_type"],{round_type:z(z(y("BCDice"),"RoundType"),"CEIL")})).$parse(f),W(S)?T.$druid_dice(S,m):A):I("ABT",u)?T.$get_abyss_curse_table():b(T,N(T,"eval_game_system_specific_command",a,!1,!0),"eval_game_system_specific_command",[f],null)}),M(p,"$rating_parser",function(){return y("RatingParser").$new(d(["version"],{version:"v2_5"}))}),M(p,"$druid_dice",function(f,l){var m,t,S,s,v,u=A;return m=(u=this.randomizer.$roll_barabara(2,6)).$sum(),t=I(E(2,6,!1),S=m)?0:I(E(7,9,!1),S)?1:I(E(10,12,!1),S)?2:A,s=l["$[]"](t),v=Q(s,f.$modify_number()),["("+f.$command().$capitalize()+y("Format").$modifier(f.$modify_number())+")","2D["+u.$join(",")+"]="+m,""+s+y("Format").$modifier(f.$modify_number()),v].$join(" \uff1e ")}),M(p,"$get_abyss_curse_table",function(){var u,f=this,l=A,T=A;return l=z(y("DiceTable"),"D66GridTable").$from_i18n("SwordWorld2_5.AbyssCurseTable",f.locale).$roll(f.randomizer),T=I(14,u=l.$value())?z(y("DiceTable"),"D66ParityTable").$from_i18n("SwordWorld2_5.AbyssCurseCategoryTable",f.locale).$roll(f.randomizer).$to_s():I(25,u)?z(y("DiceTable"),"D66ParityTable").$from_i18n("SwordWorld2_5.AbyssCurseAttrTable",f.locale).$roll(f.randomizer).$to_s():A,[l.$to_s(),T].$compact().$join("\n")})},Opal.queue(function(e){var E,A,_,C,r,i,B,V,Y=e.module,U=e.klass,c=e.const_set,I=e.send2,K=e.find_super,d=e.def,b=[];return e.top.$require("bcdice/game_system/SwordWorld2_5"),E=b,A=V=[Y(b[0],"BCDice")].concat(E),i=[Y(V[0],"GameSystem")].concat(A),B=e.$r(i),_=i,c((r=[C=U(i[0],B("SwordWorld2_5"),"SwordWorld2_5_SimplifiedChinese")].concat(_))[0],"ID","SwordWorld2.5:SimplifiedChinese"),c(r[0],"NAME","\u5251\u4e16\u754c2.5"),c(r[0],"SORT_KEY","\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c2.5"),c(r[0],"HELP_MESSAGE","\u81ea\u52a8\u6210\u529f\u3001\u6210\u529f\u3001\u5931\u8d25\u3001\u81ea\u52a8\u5931\u8d25\u4f1a\u81ea\u52a8\u5224\u5b9a\u3002\n\n  \u30fb\u5a01\u529b\u8868\u3000(Kx)\n  \u3000\u6307\u4ee4\u4e3a\u201cK\u5a01\u529b\u503c+\u52a0\u503c\u201d\u7684\u683c\u5f0f\u3002\n  \u3000\u52a0\u503c\u7684\u90e8\u5206\u4e0d\u80fd\u662f\u50cf\u201cK20+K30\u201d\u8fd9\u6837\u7684\u5a01\u529b\u7684\u5199\u6cd5\u3002\n  \u3000\u53e6\u5916\uff0c\u52a0\u503c\u53ef\u4ee5\u6709\u591a\u4e2a\u3002\n  \u3000\u5a01\u529b\u8868\u548c\u9ab0\u70b9\u4e00\u6837\uff0c\u53ef\u4ee5\u5bf9\u5176\u4ed6\u73a9\u5bb6\u9690\u85cf\u3002\n  \u3000\u4f8b\uff09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2\n\n  \u30fb\u66b4\u51fb\u503c\u7684\u8bbe\u5b9a\n  \u3000\u66b4\u51fb\u503c\u901a\u8fc7\u201c[\u66b4\u51fb\u503c]\u201d\u6307\u5b9a\u3002\n  \u3000\u6ca1\u6709\u6307\u5b9a\u66b4\u51fb\u503c\u65f6\u9ed8\u8ba4\u4e3a10\u3002\n  \u3000\u5982\u679c\u4e0d\u9700\u8981\u53d1\u751f\u66b4\u51fb\uff0c\u8bf7\u8bbe\u5b9a\u4e3a13\u3002\uff08\u4f8b\u5982\u9632\u5fa1\u65f6\uff09\n  \u3000\u53e6\u5916\u4e5f\u53ef\u5199\u6210\u7ed3\u5c3e\u7684\u201c@\u66b4\u51fb\u503c\u201d\u7684\u5f62\u5f0f\u3002\n  \u3000\u4f8b\uff09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9\n\n  \u30fb\u5a01\u529b\u8868\u7684\u51cf\u534a (HKx, KxH+N)\n  \u3000\u5728\u5a01\u529b\u8868\u5f00\u5934\u6216\u672b\u5c3e\u52a0\u4e0a\u201cH\u201d\uff0c\u9ab0\u5a01\u529b\u8868\u7684\u6700\u7ec8\u7ed3\u679c\u5c31\u4f1a\u51cf\u534a\u3002\n  \u3000H\u5199\u5728\u5a01\u529b\u8868\u672b\u5c3e\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5728\u540e\u9762\u76f4\u63a5\u8ddf\u7740\u4fee\u6b63\uff0c\u4f1a\u5728\u51cf\u534a\u540e\u8fdb\u884c\u52a0\u51cf\u8fd0\u7b97\u3002\n  \u3000\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u591a\u4e2a\u4fee\u6b63\u9700\u8981\u7528\u62ec\u53f7\u62ec\u8d77\u6765\uff08\u5426\u5219\u4f1a\u89e3\u6790\u5931\u8d25\uff09\n  \u3000\u6ca1\u6709\u6307\u5b9a\u66b4\u51fb\u503c\u7684\u60c5\u51b5\u4e0b\uff0c\u5219\u89c6\u4e3a\u6ca1\u6709\u66b4\u51fb\u503c\u3002\n  \u3000\u4f8b\uff09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H+(1+1)\n\n  \u30fb\u9ab0\u5b50\u51fa\u76ee\u4fee\u6b63\uff08\u547d\u8fd0\u53d8\u8f6c\u6216\u91cd\u51fb\u5149\u8f89\u7528\uff09\n  \u3000\u5728\u6307\u4ee4\u672b\u5c3e\u6dfb\u52a0\u201c$\u4fee\u6b63\u503c\u201d\u6765\u6539\u53d8\u9ab0\u5b50\u51fa\u76ee\u3002\n  \u3000\u53ef\u4ee5\u4f7f\u7528$+1\u7684\u683c\u5f0f\u5728\u9ab0\u5b50\u51fa\u76ee\u4e0a+\u4fee\u6b63\uff0c\u6216\u4f7f\u7528$9\u7684\u683c\u5f0f\u628a\u9ab0\u5b50\u51fa\u76ee\u66ff\u6362\u4e3a\u56fa\u5b9a\u503c\u3002\n  \u3000\u66b4\u51fb\u65f6\u53ea\u6709\u7b2c\u4e00\u6b21\u51fa\u76ee\u5e94\u7528\u8fd9\u4e2a\u4fee\u6b63\u3002\n  \u3000\u4f8b\uff09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9\n\n  \u30fb\u9ab0\u5b50\u51fa\u76ee\u4fee\u6b63\uff08\u5fc5\u6740\u653b\u51fb\u7528\uff09\n  \u3000\u5199\u6210\u201c#\u4fee\u6b63\u503c\u201c\u7684\u683c\u5f0f\u6765\u589e\u52a0\u9ab0\u5b50\u51fa\u76ee\u3002\n  \u3000\u66b4\u51fb\u65f6\u540e\u7eed\u9ab0\u5b50\u4e5f\u4f1a\u7ee7\u7eed\u5e94\u7528\u4fee\u6b63\u503c\u3002\n  \u3000\u4f8b\uff09K20#1\u3000\u3000\u3000k10-5@9#2\n\n  \u30fb\u5a01\u529b\u4e0a\u5347\uff08\u65a9\u9996\u5200\u7528\uff09 r5\n  \u3000r\u540e\u8ddf\u4e0a\u5347\u503c\uff0c\u66b4\u51fb\u540e\u5a01\u529b\u4e0a\u5347r\u540e\u6240\u586b\u5199\u7684\u4e0a\u5347\u503c\u70b9\n  \u3000\u4f8b\uff09K20r5\u3000K30+24@8R5\u3000K40+24@8$12r5\n\n  \u30fb\u6781\u9650\u547d\u8fd0\u5728\u672b\u5c3e\u52a0\u4e0a gf\n  \u3000\u4f8b\uff09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r5gf\n\n  \u30fb\u5a01\u529b\u8868\u4f7f\u75281d+\u56fa\u5b9a\u503c\u5bf9\u5e94 \u66b4\u51fb\u540e\u4ecd\u7ee7\u7eed sf4\n  \u3000\u4f8b\uff09k10sf4\u3000k0+5sf4@13\u3000k70+26sf3@9\n\n  \u30fb\u5a01\u529b\u8868\u4f7f\u75281d+\u56fa\u5b9a\u503c\u5bf9\u5e94 \u66b4\u51fb\u540e\u53d8\u56de\u4f7f\u75282d\u5bf9\u5e94 tf3\n  \u3000\u4f8b\uff09k10tf3\u3000k0+5tf4@13\u3000k70+26tf3@9\n\n  \u30fb\u8d85\u8d8a\u5224\u5b9a\u75282d6\u53ef\u5199\u6210 2d6@10 \u7684\u683c\u5f0f\u52a0\u4e0a\u66b4\u51fb\u503c\u3002\n  \u3000\u4f8b\uff092D6@10\u30002D6@10+11>=30\n\n  \u30fb\u6210\u957f\u3000(Gr)\n  \u3000\u5728Gr\u540e\u9762\u52a0\u4e0a\u6570\u5b57\u53ef\u4ee5\u8fdb\u884c\u591a\u6b21\u6210\u957f\u3002\n  \u3000\u4f8b\uff09Gr3\n\n  \u30fb\u9632\u5fa1\u5927\u5931\u8d25\u8868\u3000(FT)\n  \u3000\u62bd\u53d6\u9632\u5fa1\u5927\u5931\u8d25\u8868\u3002\n\n  \u30fb\u7f20\u7ed5\u6548\u679c\u8868\u3000(TT)\n  \u3000\u62bd\u53d6\u7f20\u7ed5\u6548\u679c\u8868\u3002\n\n  \u30fb\u5fb7\u9c81\u4f0a\u7528\u7269\u7406\u9b54\u6cd5\u8868 (Dru[2~6\u7684\u7ed3\u679c\uff0c7~9\u7684\u7ed3\u679c\uff0c10~12\u7684\u7ed3\u679c])\n  \u3000\u4f8b\uff09Dru[0,3,6]+10-3\n\n  \u30fb\u5948\u843d\u8bc5\u5492\u8868\u3000(ABT)\n  \u3000\u62bd\u53d6\u5948\u843d\u8bc5\u5492\u8868\u3002\n"),C.$register_prefix_from_super_class(),d(C,"$initialize",function n(x){var P=this;return n.$$p=null,I(P,K(P,"initialize",n,!1,!0),"initialize",[x],null),P.locale="zh_hans"})})}}]);