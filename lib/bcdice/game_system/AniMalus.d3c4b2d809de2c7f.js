(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[8752],{3831:(Z,O,C)=>{C(3986),Opal.queue(function(a){var P,F,W,g,q,x,D,Q,S,G=a.module,B=a.klass,R=a.const_set,H=a.send2,K=a.find_super,p=a.def,t=a.truthy,A=a.send,k=a.rb_le,I=a.rb_ge,v=a.rb_plus,j=a.eqeq,y=a.rb_gt,L=a.rb_times,E=[],e=a.nil;return P=E,F=S=[G(E[0],"BCDice")].concat(P),D=[G(S[0],"GameSystem")].concat(F),Q=a.$r(D),W=D,q=[g=B(D[0],Q("Base"),"AniMalus")].concat(W),x=a.$r(q),g.$$prototype.randomizer=e,R(q[0],"ID","AniMalus"),R(q[0],"NAME","\u30a2\u30cb\u30de\u30e9\u30b9"),R(q[0],"SORT_KEY","\u3042\u306b\u307e\u3089\u3059"),R(q[0],"HELP_MESSAGE","\u25a0\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u30c0\u30a4\u30b9\u5224\u5b9a\u3000nAM<=t,x        n:\u80fd\u529b\u5024 t:\u6210\u529f\u5024 x:\u5fc5\u8981\u6210\u529f\u6570\n\u4f8b)3AM<=2,1: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u3063\u3066\u3001\u6210\u529f\u50242,\u5fc5\u8981\u6210\u529f\u65701\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u6570,\u6210\u529f\u30fb\u5931\u6557)\u3092\u8868\u793a\n\n\u25a0\u63a2\u7d22\u6280\u80fd\u306e\u30c0\u30a4\u30b9\u5224\u5b9a\u3000AI<=t,x        t:\u63a2\u7d22\u6280\u80fd\u30ec\u30d9\u30eb x:\u5fc5\u8981\u6210\u529f\u6570\n\u4f8b)AI<=3,1: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u3063\u3066\u3001\u63a2\u7d22\u6280\u80fd\u30ec\u30d9\u30eb3,\u5fc5\u8981\u6210\u529f\u65701\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u6570,\u6210\u529f\u30fb\u5931\u6557)\u3092\u8868\u793a\n\n\u25a0\u653b\u6483\u5224\u5b9a\u3000AA<=t        t:\u6226\u95d8\u6280\u80fd\u30ec\u30d9\u30eb\n\u4f8b)AA<=3: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u3063\u3066\u3001\u6226\u95d8\u6280\u80fd\u30ec\u30d9\u30eb3\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u30fb\u5931\u6557,\u30c0\u30e1\u30fc\u30b8,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb,\u30d5\u30a1\u30f3\u30d6\u30eb)\u3092\u8868\u793a\n\n\u25a0\u9632\u5fa1\u5224\u5b9a\u3000AG=t        t:\u653b\u6483\u6280\u80fd\u30ec\u30d9\u30eb\n\u4f8b)AG=2: \u30c0\u30a4\u30b9\u30923\u500b\u632f\u3063\u3066\u3001\u653b\u6483\u6280\u80fd\u30ec\u30d9\u30eb2\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u30fb\u5931\u6557,\u30c0\u30e1\u30fc\u30b8,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb,\u30d5\u30a1\u30f3\u30d6\u30eb)\u3092\u8868\u793a\n\n\u25a0\u56de\u907f\u5224\u5b9a\u3000AD=t        t:\u653b\u6483\u6280\u80fd\u30ec\u30d9\u30eb\n\u4f8b)AD=3: \u30c0\u30a4\u30b9\u30921\u500b\u632f\u3063\u3066\u3001\u653b\u6483\u6280\u80fd\u30ec\u30d9\u30eb3\u3067\u5224\u5b9a\u3002\u305d\u306e\u7d50\u679c(\u6210\u529f\u30fb\u5931\u6557)\u3092\u8868\u793a\n"),g.$register_prefix("\\d*A[MIAGD]"),p(g,"$initialize",function h(f){var n=this;return h.$$p=null,H(n,K(n,"initialize",h,!1,!0),"initialize",[f],null),n.sort_barabara_dice=!0}),p(g,"$eval_game_system_specific_command",function(f){var n,r,$,c,l=this;return t(n=t(r=t($=t(c=l.$resolute_action(f))?c:l.$resolute_investigation(f))?$:l.$resolute_attacking(f))?r:l.$resolute_guarding(f))?n:l.$resolute_dodging(f)}),g.$private(),p(g,"$resolute_action",function(f){var n=e,r=e,$=e,c=e,o=e,d=e,i=e,u=e;return n=/^(\d+)AM<=(\d+),(\d)$/.$match(f),t(n)?(r=n["$[]"](1).$to_i(),$=n["$[]"](2).$to_i(),c=n["$[]"](3).$to_i(),d=(o=this.randomizer.$roll_barabara(r,6).$sort()).$join(","),i=A(o,"count",[],function(b){return null==b&&(b=e),k(b,$)}),u="("+r+"AM<="+$+","+c+") \uff1e "+d+" \uff1e \u6210\u529f\u6570"+i,t(I(i,c))?(u=v(u," \uff1e \u6210\u529f"),x("Result").$success(u)):(u=v(u," \uff1e \u5931\u6557"),x("Result").$failure(u))):e}),p(g,"$resolute_investigation",function(f){var n=e,r=e,$=e,c=e,o=e,d=e,i=e;return n=/^AI<=(\d+),(\d)$/.$match(f),t(n)?(r=n["$[]"](1).$to_i(),$=n["$[]"](2).$to_i(),o=(c=this.randomizer.$roll_barabara(3,6).$sort()).$join(","),d=A(c,"count",[],function(m){return null==m&&(m=e),k(m,r)}),i="(AI<="+r+","+$+") \uff1e "+o+" \uff1e \u6210\u529f\u6570"+d,t(I(d,$))?(i=v(i," \uff1e \u6210\u529f"),x("Result").$success(i)):(i=v(i," \uff1e \u5931\u6557"),x("Result").$failure(i))):e}),p(g,"$resolute_attacking",function(f){var n=e,r=e,$=e,c=e,o=e,d=e,i=e,u=e,m=e,b=e,s=e;return n=/^AA<=(\d+)$/.$match(f),t(n)?(r=n["$[]"](1).$to_i(),$=this.randomizer.$roll_barabara(3,6).$sort(),c=$.$join(","),o=A($,"count",[],function(_){return null==_&&(_=e),k(_,r)}),d=t(i=t(u=$["$[]"](0)["$=="](1))?$["$[]"](1)["$=="](2):u)?$["$[]"](2)["$=="](3):i,m=t(i=t(u=$["$[]"](0)["$=="](4))?$["$[]"](1)["$=="](5):u)?$["$[]"](2)["$=="](6):i,b=$.$max(),s=$.$max(),j($["$[]"](0),$["$[]"](1))&&j($["$[]"](1),$["$[]"](2))&&t(k($["$[]"](2),r))?(s=v(s,6),b=s):(j($["$[]"](0),$["$[]"](1))&&t(k($["$[]"](1),r))||j($["$[]"](1),$["$[]"](2))&&t(k($["$[]"](2),r)))&&(s=v(s,3)),A(x("Result").$new(),"tap",[],function(_){var w,M=e;return null==_&&(_=e),_["$critical="](d),_["$fumble="](m),_["$condition="](y(o,0)),M=["(AA<="+r+")",c,"\u6210\u529f\u6570"+o,t(_["$success?"]())?"\u6210\u529f":"\u5931\u6557"].$compact(),t(_["$success?"]())&&(j(b,s)?M.$push("\u30c0\u30e1\u30fc\u30b8("+b+")"):M.$push("\u30c0\u30e1\u30fc\u30b8("+b+"\u304b"+s+")")),t(_["$critical?"]())&&M.$push("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"),t(_["$fumble?"]())&&M.$push("\u30d5\u30a1\u30f3\u30d6\u30eb"),w=[M.$join(" \uff1e ")],A(_,"text=",w),w[w.length-1]})):e}),p(g,"$resolute_guarding",function(f){var n=e,r=e,$=e,c=e,o=e,d=e,i=e,u=e,m=e;return n=/^AG=(\d+)$/.$match(f),t(n)?(r=n["$[]"](1).$to_i(),$=this.randomizer.$roll_barabara(3,6).$sort(),c=$.$join(","),o=$.$count(r),d=t(i=t(u=$["$[]"](0)["$=="](1))?$["$[]"](1)["$=="](2):u)?$["$[]"](2)["$=="](3):i,m=t(i=t(u=$["$[]"](0)["$=="](4))?$["$[]"](1)["$=="](5):u)?$["$[]"](2)["$=="](6):i,A(x("Result").$new(),"tap",[],function(s){var z,_=e;return null==s&&(s=e),s["$critical="](d),s["$fumble="](m),s["$condition="](y(o,0)),_=["(AG="+r+")",c,"\u6210\u529f\u6570"+o,t(s["$success?"]())?"\u6210\u529f \uff1e \u30c0\u30e1\u30fc\u30b8\u8efd\u6e1b("+L(o,2)+")":"\u5931\u6557"].$compact(),t(s["$critical?"]())&&_.$push("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"),t(s["$fumble?"]())&&_.$push("\u30d5\u30a1\u30f3\u30d6\u30eb"),z=[_.$join(" \uff1e ")],A(s,"text=",z),z[z.length-1]})):e}),p(g,"$resolute_dodging",function(f){var n=e,r=e,$=e,c=e,o=e;return n=/^AD=(\d+)$/.$match(f),t(n)?(r=n["$[]"](1).$to_i(),$=this.randomizer.$roll_barabara(1,6),c=$.$join(","),o=$.$count(r),A(x("Result").$new(),"tap",[],function(i){var u;return null==i&&(i=e),i["$condition="](y(o,0)),u=[["(AD="+r+")",c,"\u6210\u529f\u6570"+o,t(i["$success?"]())?"\u6210\u529f(\u30c0\u30e1\u30fc\u30b8\u7121\u52b9)":"\u5931\u6557"].$compact().$join(" \uff1e ")],A(i,"text=",u),u[u.length-1]})):e})})}}]);