(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5225],{6383:(ge,pe,be)=>{be(3986),Opal.modules["i18n/backend/fallbacks"]=function(e){var H,i,r,a,s,m,F=e.module,B=e.class_variable_set,c=e.truthy,P=e.class_variable_get,S=e.def,D=e.send,U=e.send2,w=e.find_super,E=e.hash2,N=e.find_block_super,q=e.neqeq,j=e.thrower,G=e.return_val,M=[],R=e.nil,g=e.$$$;return H=M,m=[s=F(M[0],"I18n")].concat(H),B(m[0],"@@fallbacks",R),i=e.get_singleton_class(s),r=[i].concat(m),a=e.$r(r),S(i,"$fallbacks",function(){var C=R;return B(r[1],"@@fallbacks",c(null!=r[1].$$cvars["@@fallbacks"]?"class variable":R)&&c(C=P(r[1],"@@fallbacks",!1))?C:g(g(a("I18n"),"Locale"),"Fallbacks").$new()),c(C=a("Thread").$current()["$[]"]("i18n_fallbacks"))?C:P(r[1],"@@fallbacks",!1)}),S(i,"$fallbacks=",function(L){var C;return B(r[1],"@@fallbacks",c(L["$is_a?"](a("Array")))?g(g(a("I18n"),"Locale"),"Fallbacks").$new(L):L),C=["i18n_fallbacks",P(r[1],"@@fallbacks",!1)],D(a("Thread").$current(),"[]=",C),C[C.length-1]}),function(i,A){var L,C,x,l,a=[F(i,"Backend")].concat(A);return L=a,x=[C=F(a[0],"Fallbacks")].concat(L),l=e.$r(x),S(C,"$translate",function h(_,p,u){try{var y=j("return"),o=h.$$p||R,z=this,T=R,f=R;return h.$$p=null,null==u&&(u=l("EMPTY_HASH")),c(u.$fetch("fallback",!0))?c(u["$[]"]("fallback_in_progress"))?U(z,w(z,"translate",h,!1,!0),"translate",[_,p,u],o):(c(u["$[]"]("default"))&&(T=z["$extract_non_symbol_default!"](u)),f=u.$merge(E(["fallback_in_progress"],{fallback_in_progress:!0})),D(l("I18n").$fallbacks()["$[]"](_),"each",[],function t(k){var n=null==t.$$s?this:t.$$s;null==k&&(k=R);try{return D(n,"catch",["exception"],function d(){var $=null==d.$$s?this:d.$$s,Y=R;if(Y=U($,N($,"translate",d.$$def||t.$$def||h,!1,!1),"translate",[k,p,f],null),c(Y["$nil?"]()))return R;q(_.$to_s(),k.$to_s())&&$.$on_fallback(_,k,p,u),y.$throw(Y)},{$$s:n,$$ret:y})}catch(d){if(!e.rescue(d,[g(l("I18n"),"InvalidLocale")]))throw d;try{return R}finally{e.pop_exception()}}},{$$s:z}),c(u["$key?"]("default"))&&c(u["$[]"]("default")["$nil?"]())?R:c(T)?U(z,w(z,"translate",h,!1,!0),"translate",[_,R,u.$merge(E(["default"],{default:T}))],null):z.$throw("exception",g(l("I18n"),"MissingTranslation").$new(_,p,u))):U(z,w(z,"translate",h,!1,!0),"translate",[_,p,u],o)}catch(t){if(t===y)return t.$v;throw t}},-3),S(C,"$extract_non_symbol_default!",function(_){var u,p=R;return p=[_["$[]"]("default")].$flatten(),u=D(p,"detect",[],function(o){return null==o&&(o=R),o["$is_a?"](l("Symbol"))["$!"]()}),c(u)&&_["$[]="]("default",p["$[]"](0,p.$index(u))),u}),S(C,"$exists?",function h(_,p,u){try{var y=j("return"),o=h.$$p||R,z=this;return h.$$p=null,null==u&&(u=l("EMPTY_HASH")),c(u.$fetch("fallback",!0))?(D(l("I18n").$fallbacks()["$[]"](_),"each",[],function T(f){var t=null==T.$$s?this:T.$$s;null==f&&(f=R);try{if(!c(U(t,N(t,"exists?",T.$$def||h,!1,!1),"exists?",[f,p],null)))return R;y.$throw(!0)}catch(k){if(!e.rescue(k,[g(l("I18n"),"InvalidLocale")]))throw k;try{return R}finally{e.pop_exception()}}},{$$s:z,$$ret:y}),!1):U(z,w(z,"exists?",h,!1,!0),"exists?",[_,p,u],o)}catch(T){if(T===y)return T.$v;throw T}},-3),C.$private(),S(C,"$on_fallback",G(R))}(m[0],m)},Opal.modules["bcdice/randomizer"]=function(e){var s,v,L,C,x,l,i,A,B=e.klass,c=e.const_set,P=e.def,S=e.truthy,D=e.rb_gt,U=e.rb_plus,w=e.rb_le,E=e.send,N=e.rb_minus,q=e.eqeq,j=e.rb_times,G=e.eqeqeq,M=e.rb_ge,R=[],g=e.nil,W=e.$$$;return s=R,i=[(0,e.module)(R[0],"BCDice")].concat(s),A=e.$r(i),v=i,C=[L=B(i[0],null,"Randomizer")].concat(v),x=e.$r(C),(l=L.$$prototype).rand_results=l.detailed_rand_results=g,c(C[0],"UPPER_LIMIT_DICE_TIMES",200),c(C[0],"UPPER_LIMIT_DICE_SIDES",1e4),c(C[0],"UPPER_LIMIT_RANDS",1e4),P(L,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),L.$attr_reader("rand_results"),L.$attr_reader("detailed_rand_results"),c(C[0],"DetailedRandResult",x("Struct").$new("kind","sides","value")),P(L,"$roll_barabara",function(_,p){var u=this;return S(D(U(u.rand_results.$size(),_),x("UPPER_LIMIT_RANDS")))&&u.$raise(x("TooManyRandsError")),S(w(_,0))||S(D(_,x("UPPER_LIMIT_DICE_TIMES")))?[]:E(x("Array"),"new",[_],function y(){return(null==y.$$s?this:y.$$s).$roll_once(p)},{$$s:u})}),P(L,"$roll_sum",function(_,p){return this.$roll_barabara(_,p).$sum()}),P(L,"$roll_once",function(_){var u=g;return S(w(_,0))||S(D(_,x("UPPER_LIMIT_DICE_SIDES")))?0:(u=this.$rand_inner(_),this.$push_to_detail("normal",_,u),u)}),P(L,"$roll_index",function(_){return N(this.$roll_once(_),1)}),P(L,"$roll_tens_d10",function(){var u,p=g;return p=this.$rand_inner(10),q(p,10)&&(p=0),u=j(p,10),this.$push_to_detail("tens_d10",10,u),u}),P(L,"$roll_d9",function(){var p;return p=N(this.$rand_inner(10),1),this.$push_to_detail("d9",10,p),p}),P(L,"$roll_d66",function(_){var y,u=g;return u=E(x("Array"),"new",[2],function o(){return(null==o.$$s?this:o.$$s).$roll_once(6)},{$$s:this}),G(W(x("D66SortType"),"ASC"),y=_)?u["$sort!"]():G(W(x("D66SortType"),"DESC"),y)&&u["$sort!"]()["$reverse!"](),U(j(u["$[]"](0),10),u["$[]"](1))}),L.$private(),P(L,"$rand_inner",function(_){var u,p=this;return S(M(p.rand_results.$size(),x("UPPER_LIMIT_RANDS")))&&p.$raise(x("TooManyRandsError")),u=p.$random(_),p.rand_results["$<<"]([u,_]),u}),P(L,"$random",function(_){return U(x("Kernel").$rand(_),1)}),P(L,"$push_to_detail",function(_,p,u){var o;return o=x("DetailedRandResult").$new(_,p,u),this.detailed_rand_results.$push(o)}),B(i[0],A("StandardError"),"TooManyRandsError"),g},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var E,G,H,s,m,i,A,R,q,F=e.module,B=e.klass,c=e.def,P=e.truthy,S=e.return_val,D=[],U=e.nil;return E=D,G=q=[F(D[0],"BCDice")].concat(E),H=R=[F(q[0],"DiceTable")].concat(G),m=[s=B(R[0],null,"RollResult")].concat(H),i=e.$r(m),(A=s.$$prototype).table_name=A.value=A.body=U,c(s,"$initialize",function(a,v,L){var C=this;return C.table_name=a,C.value=v,C.body=L}),s.$attr_reader("table_name"),s.$attr_reader("value"),s.$attr_reader("body"),c(s,"$to_s",function(){var a=this;return a.table_name+"("+a.value+") \uff1e "+a.body}),c(s,"$last_body",function(){var a=this;return P(a.body["$is_a?"](i("RollResult")))?a.body.$last_body():a.body}),c(s,"$empty?",S(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var E,G,H,s,m,i,A,R,q,F=e.module,B=e.klass,c=e.truthy,P=e.def,S=e.rb_minus,D=[],U=e.nil;return E=D,G=q=[F(D[0],"BCDice")].concat(E),H=R=[F(q[0],"DiceTable")].concat(G),m=[s=B(R[0],null,"ChainTable")].concat(H),i=e.$r(m),(A=s.$$prototype).times=A.sides=A.items=A.name=U,P(s,"$initialize",function(a,v,L){var C=this,x=U;return C.name=a,C.items=L.$freeze(),x=/(\d+)D(\d+)/i.$match(v),c(x)||C.$raise(i("ArgumentError"),"Unexpected table type: "+v),C.times=x["$[]"](1).$to_i(),C.sides=x["$[]"](2).$to_i()}),P(s,"$roll",function(a){var L,C,v=this,x=U;return L=a.$roll_sum(v.times,v.sides),C=S(L,v.times),x=v.items["$[]"](C),c(x["$respond_to?"]("roll"))&&(x=x.$roll(a)),i("RollResult").$new(v.name,L,x)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var j,g,i,A,r,a,v,H,M,F=e.module,B=e.klass,c=e.hash2,P=e.defs,S=e.def,D=e.rb_plus,U=e.rb_times,w=e.rb_minus,E=[],N=e.nil;return j=E,g=M=[F(E[0],"BCDice")].concat(j),i=H=[F(M[0],"DiceTable")].concat(g),r=[A=B(H[0],null,"D66GridTable")].concat(i),a=e.$r(r),(v=A.$$prototype).name=v.items=N,P(A,"$from_i18n",function(C,x){var h=N;return h=a("I18n").$t(C,c(["locale","raise"],{locale:x,raise:!0})),this.$new(h["$[]"]("name"),h["$[]"]("items"))}),S(A,"$initialize",function(C,x){return this.name=C,this.items=x.$freeze()}),S(A,"$roll",function(C){var l,h,_,p,u;return l=C.$roll_once(6),h=C.$roll_once(6),_=D(U(l,10),h),p=w(l,1),u=w(h,1),a("RollResult").$new(this.name,_,this.items["$[]"](p)["$[]"](u))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var N,M,m,i,A,r,g,W,j,F=e.module,B=e.klass,c=e.hash2,P=e.defs,S=e.def,U=[],w=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),N=U,M=j=[F(U[0],"BCDice")].concat(N),g=[F(j[0],"DiceTable")].concat(M),W=e.$r(g),m=g,A=[i=B(g[0],W("D66GridTable"),"D66HalfGridTable")].concat(m),r=e.$r(A),P(i,"$from_i18n",function(v,L){var x=w;return x=r("I18n").$t(v,c(["locale","raise"],{locale:L,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2_3"),x["$[]"]("items_4_5_6"))}),S(i,"$initialize",function(v,L,C){return this.name=v,this.items=[L,L,L,C,C,C].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var N,M,m,i,A,r,g,W,j,F=e.module,B=e.klass,c=e.hash2,P=e.defs,S=e.def,U=[],w=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),N=U,M=j=[F(U[0],"BCDice")].concat(N),g=[F(j[0],"DiceTable")].concat(M),W=e.$r(g),m=g,A=[i=B(g[0],W("D66GridTable"),"D66OneThirdTable")].concat(m),r=e.$r(A),P(i,"$from_i18n",function(v,L){var x=w;return x=r("I18n").$t(v,c(["locale","raise"],{locale:L,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2"),x["$[]"]("items_3_4"),x["$[]"]("items_5_6"))}),S(i,"$initialize",function(v,L,C,x){return this.name=v,this.items=[L,L,C,C,x,x].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var M,H,r,a,v,L,C,m,g,F=e.module,B=e.klass,c=e.hash2,P=e.defs,S=e.def,D=e.eqeqeq,U=e.rb_plus,w=e.rb_times,E=e.truthy,N=[],q=e.nil,j=e.$$$;return M=N,H=g=[F(N[0],"BCDice")].concat(M),r=m=[F(g[0],"DiceTable")].concat(H),v=[a=B(m[0],null,"D66Table")].concat(r),L=e.$r(v),(C=a.$$prototype).sort_type=C.items=C.name=q,P(a,"$from_i18n",function(l,h){var u,p=q;return p=L("I18n").$t(l,c(["locale"],{locale:h})),u=L("D66SortType").$const_get(p["$[]"]("d66_sort_type")),this.$new(p["$[]"]("name"),u,p["$[]"]("items"))}),S(a,"$initialize",function(l,h,_){var p=this;return p.name=l,p.sort_type=h,p.items=_.$freeze()}),S(a,"$roll",function(l){var h=this,_=q,p=q,u=q,y=q;return _=l.$roll_barabara(2,6),D(j(L("D66SortType"),"ASC"),p=h.sort_type)?_["$sort!"]():D(j(L("D66SortType"),"DESC"),p)&&_["$sort!"]()["$reverse!"](),u=U(w(_["$[]"](0),10),_["$[]"](1)),y=E(p=h.items["$[]"](u))?p:h.items["$[]"](u.$to_s()),E(y["$respond_to?"]("roll"))&&(y=y.$roll(l)),L("RollResult").$new(h.name,u,y)}),S(a,"$choice",function(l){return L("RollResult").$new(this.name,l,this.items["$[]"](l))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var R,s,i,A,W,F=e.module,B=e.klass,c=e.hash2,P=e.send,S=e.to_ary,D=e.rb_plus,U=e.rb_times,w=e.send2,E=e.find_super,N=e.def,j=[],G=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),R=j,s=W=[F(j[0],"BCDice")].concat(R),i=[F(W[0],"DiceTable")].concat(s),A=e.$r(i),N(B(i[0],A("D66Table"),"D66LeftRangeTable"),"$initialize",function L(C,x,l){var p;return L.$$p=null,p=c([],{}),P(l,"each",[],function(y){var o,f;return null==y&&(y=G),o=S(y),f=null==o[1]?G:o[1],P(null==o[0]?G:o[0],"each",[],function(k){return null==k&&(k=G),P(f,"each_with_index",[],function(d,$){var Y,V;return null==d&&(d=G),null==$&&($=G),V=D(U(k,10),D($,1)),P(p,"[]=",Y=[V,d]),Y[Y.length-1]})})}),w(this,E(this,"initialize",L,!1,!0),"initialize",[C,x,p],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var G,W,A,r,a,v,L,s,R,F=e.module,B=e.klass,c=e.hash2,P=e.defs,S=e.def,D=e.truthy,U=e.rb_minus,w=e.rb_plus,E=e.rb_times,N=[],q=e.nil;return G=N,W=R=[F(N[0],"BCDice")].concat(G),A=s=[F(R[0],"DiceTable")].concat(W),a=[r=B(s[0],null,"D66ParityTable")].concat(A),v=e.$r(a),(L=r.$$prototype).odd=L.even=L.name=q,P(r,"$from_i18n",function(x,l){var _=q;return _=v("I18n").$t(x,c(["locale","raise"],{locale:l,raise:!0})),this.$new(_["$[]"]("name"),_["$[]"]("odd"),_["$[]"]("even"))}),S(r,"$initialize",function(x,l,h){var _=this;return _.name=x,_.odd=l.$freeze(),_.even=h.$freeze()}),S(r,"$roll",function(x){var _,u,y,l=this,h=q;return h=x.$roll_once(6),_=x.$roll_once(6),u=(D(h["$odd?"]())?l.odd:l.even)["$[]"](U(_,1)),y=w(E(h,10),_),v("RollResult").$new(l.name,y,u)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var N,M,s,m,i,A,r,g,j,F=e.module,B=e.klass,c=e.def,P=e.rb_plus,S=e.rb_times,D=e.send,U=[],w=e.nil;return N=U,M=j=[F(U[0],"BCDice")].concat(N),s=g=[F(j[0],"DiceTable")].concat(M),i=[m=B(g[0],null,"D66RangeTable")].concat(s),A=e.$r(i),(r=m.$$prototype).items=r.name=w,c(m,"$initialize",function(v,L){return this.name=v,this.items=L.$freeze()}),c(m,"$roll",function(v){var C,x,l,h=w;return C=v.$roll_once(6),x=v.$roll_once(6),l=P(S(C,10),x),h=D(this.items,"find",[],function(p){return null==p&&(p=w),p["$[]"](0)["$include?"](l)}),A("RollResult").$new(this.name,l,h["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var G,W,A,r,a,v,L,s,R,F=e.module,B=e.klass,c=e.const_set,P=e.send,S=e.truthy,D=e.def,U=e.eqeqeq,w=e.rb_times,E=e.rb_plus,N=[],q=e.nil;return G=N,W=R=[F(N[0],"BCDice")].concat(G),A=s=[F(R[0],"DiceTable")].concat(W),a=[r=B(s[0],null,"RangeTable")].concat(A),v=e.$r(a),(L=r.$$prototype).name=L.items=L.num_of_dice=L.num_of_sides=L.formatter=q,c(a[0],"RollResult",P(v("Struct"),"new",["sum","values","content","formatted"],function C(){return(null==C.$$s?this:C.$$s).$alias_method("to_s","formatted")},{$$s:r})),c(a[0],"Item",v("Struct").$new("range","content")),c(a[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),c(a[0],"DEFAULT_FORMATTER",P(r,"lambda",[],function(x,l){return null==x&&(x=q),null==l&&(l=q),x.$name()+"("+l.$sum()+") \uff1e "+l.$content()})),r.$attr_reader("name"),r.$attr_reader("num_of_dice"),r.$attr_reader("num_of_sides"),D(r,"$initialize",function C(x,l,h){var u,_=C.$$p||q,p=this,y=q;return C.$$p=null,p.name=x.$freeze(),p.formatter=S(u=_)?u:v("DEFAULT_FORMATTER"),y=v("DICE_ROLL_METHOD_RE").$match(l),S(y)||p.$raise(v("ArgumentError"),p.name+": invalid dice roll method: "+l),p.num_of_dice=y["$[]"](1).$to_i(),p.num_of_sides=y["$[]"](2).$to_i(),p.$store(h)}),D(r,"$fetch",function(x){var h,l=this;return h=P(l.items,"find",[],function(p){return null==p&&(p=q),p.$range()["$include?"](x)}),S(h)||l.$raise(v("RangeError"),l.name+": value is out of range: "+x),h}),D(r,"$roll",function(x){var _,l=this,h=q,p=q;return _=(h=x.$roll_barabara(l.num_of_dice,l.num_of_sides)).$sum(),(p=v("RollResult").$new(_,h,l.$fetch(_).$content()))["$formatted="](l.formatter["$[]"](l,p)),p}),r.$private(),D(r,"$store",function(x){var h,_,l=this;return h=P(x,"map",[],function p(u,y){return null==u&&(u=q),null==y&&(y=q),[(null==p.$$s?this:p.$$s).$coerce_to_int_range(u),y]},{$$s:l}),_=P(h,"sort_by",[],function(u,y){return null==u&&(u=q),null==y&&(y=q),u.$min()}),l.$assert_min_sum_is_covered(_),l.$assert_max_sum_is_covered(_),l.$assert_no_gap_or_overlap_in_ranges(_),l.items=P(_,"map",[],function(u,y){return null==u&&(u=q),null==y&&(y=q),v("Item").$new(u,y.$freeze()).$freeze()}).$freeze(),l}),D(r,"$coerce_to_int_range",function(x){var h;return U(v("Integer"),h=x)?v("Range").$new(x,x):U(v("Range"),h)&&S(x.$begin()["$is_a?"](v("Integer")))&&S(x.$end()["$is_a?"](v("Integer")))?x:this.$raise(v("TypeError"),this.name+": "+x+" ("+x.$class()+") must be an Integer or a Range with Integers ")}),D(r,"$assert_min_sum_is_covered",function(x){var h,l=this,_=q;return h=l.num_of_dice,_=x.$first()["$[]"](0),S(_["$include?"](h))||l.$raise(v("RangeError"),l.name+": min value ("+h+") is not covered: "+_),l}),D(r,"$assert_max_sum_is_covered",function(x){var h,l=this,_=q;return h=w(l.num_of_dice,l.num_of_sides),_=x.$last()["$[]"](0),S(_["$include?"](h))||l.$raise(v("RangeError"),l.name+": max value ("+h+") is not covered: "+_),l}),D(r,"$assert_no_gap_or_overlap_in_ranges",function(x){return P(x,"each_cons",[2],function h(_,p){var z,T,u=null==h.$$s?this:h.$$s,y=q,o=q;return null==u.name&&(u.name=q),null==_&&(_=q),null==p&&(p=q),y=_["$[]"](0),o=p["$[]"](0),z=y.$max(),T=E(z,1),S(o["$include?"](z))&&u.$raise(v("RangeError"),u.name+": Range overlap: "+y+" and "+o),S(o["$include?"](T))?q:u.$raise(v("RangeError"),u.name+": Range gap: "+y+" and "+o)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var q,R,m,v,L,C,x,A,W,G,F=e.module,B=e.klass,c=e.send,P=e.def,S=e.rb_minus,D=e.return_ivar,U=[],w=e.nil,E=e.$$$;return q=U,R=G=[F(U[0],"BCDice")].concat(q),m=W=[F(G[0],"DiceTable")].concat(R),v=A=[B(W[0],null,"SaiFicSkillTable")].concat(m),C=[L=B(A[0],null,"Category")].concat(v),x=e.$r(C),P(L,"$initialize",function(h,_,p,u){var y=this;return y.name=h,y.skills=c(_.$map(),"with_index",[2],function(z,T){return null==z&&(z=w),null==T&&(T=w),E(x("SaiFicSkillTable"),"Skill").$new(h,z,p,T,u)}),y.dice=p}),P(L,"$roll",function(h){return this.$skills()["$[]"](S(h.$roll_sum(2,6),2))}),P(L,"$to_s",D("name")),L.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var w,j,W,A,r,s,M,N,F=e.module,B=e.klass,c=e.def,P=e.hash2,S=[],D=e.nil;return w=S,j=N=[F(S[0],"BCDice")].concat(w),W=M=[F(N[0],"DiceTable")].concat(j),s=[B(M[0],null,"SaiFicSkillTable")].concat(W),(r=(A=B(s[0],null,"Skill")).$$prototype).s_format=r.category_dice=r.row_dice=r.category_name=r.name=D,c(A,"$initialize",function(v,L,C,x,l){var h=this;return h.category_name=v,h.name=L,h.category_dice=C,h.row_dice=x,h.s_format=l}),c(A,"$to_s",function(){var v=this;return v.$format(v.s_format,P(["category_dice","row_dice","category_name","skill_name"],{category_dice:v.category_dice,row_dice:v.row_dice,category_name:v.category_name,skill_name:v.name}))}),A.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var s,r,x,l,h,_,p,v,i,F=e.module,B=e.klass,c=e.ensure_kwargs,P=e.hash2,S=e.send,U=e.defs,w=e.const_set,E=e.to_ary,N=e.def,q=e.truthy,j=e.rb_minus,G=e.rb_plus,M=e.top,R=[],g=e.nil,W=e.$$$;return M.$require("bcdice/dice_table/sai_fic_skill_table/category"),M.$require("bcdice/dice_table/sai_fic_skill_table/skill"),s=R,r=i=[F(R[0],"BCDice")].concat(s),x=v=[F(i[0],"DiceTable")].concat(r),h=[l=B(v[0],null,"SaiFicSkillTable")].concat(x),_=e.$r(h),(p=l.$$prototype).rtt=p.rtt_format=p.rct=p.rct_format=p.rttn=p.rttn_format=p.categories=g,U(l,"$from_i18n",function(y,o,z){var T,f,t,$,d=g;return null==(T=(z=c(z)).$$smap.rtt)&&(T=g),null==(f=z.$$smap.rct)&&(f=g),null==(t=z.$$smap.rttn)&&(t=g),$=(d=_("I18n").$t("RTT",P(["locale","raise","default"],{locale:o,raise:!1,default:P([],{})})).$merge(_("I18n").$t(y,P(["locale","raise"],{locale:o,raise:!0}))))["$[]"]("items"),d=S(d,"select",[],function(V,K){return null==V&&(V=g),null==K&&(K=g),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](V)}),this.$new($,e.to_hash(d).$merge(P(["rtt","rct","rttn"],{rtt:T,rct:f,rttn:t})))},-3),w(h[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),w(h[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),w(h[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),w(h[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),N(l,"$initialize",function(y,o){var z,T,f,t,k,n,d,$=this;return null==(z=(o=c(o)).$$smap.rtt)&&(z=g),null==(T=o.$$smap.rct)&&(T=g),null==(f=o.$$smap.rttn)&&(f=g),null==(t=o.$$smap.rtt_format)&&(t=_("DEFAULT_RTT")),null==(k=o.$$smap.rct_format)&&(k=_("DEFAULT_RCT")),null==(n=o.$$smap.rttn_format)&&(n=_("DEFAULT_RTTN")),null==(d=o.$$smap.s_format)&&(d=_("DEFAULT_S")),$.categories=S(y.$map(),"with_index",[1],function(V,K){var ne,_e,ie;return null==V&&(V=g),null==K&&(K=g),_e=null==(ne=E(V))[0]?g:ne[0],ie=null==ne[1]?g:ne[1],W(_("SaiFicSkillTable"),"Category").$new(_e,ie,K,d)},{$$has_top_level_mlhs_arg:!0}),$.rtt=z,$.rct=T,$.rttn=f.$to_a(),$.rtt_format=t,$.rct_format=k,$.rttn_format=n},-2),w(h[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),l.$attr_reader("categories"),N(l,"$roll_command",function(y,o){var T,z=this,f=g,t=g;return q(["RTT",z.rtt]["$include?"](T=o))?z.$format_skill(z.rtt_format,z.$roll_skill(y)):q(["RCT",z.rct]["$include?"](T))?(f=z.$roll_category(y),z.$format(z.rct_format,P(["category_dice","category_name"],{category_dice:f.$dice(),category_name:f.$name()}))):q(t=_("RTTN").$index(T))||q(t=z.rttn.$index(T))?z.$format_skill(z.rttn_format,z.categories["$[]"](t).$roll(y)):g}),N(l,"$roll_category",function(y){return this.categories["$[]"](j(y.$roll_once(6),1))}),N(l,"$roll_skill",function(y){return this.$roll_category(y).$roll(y)}),N(l,"$prefixes",function(){var y=this;return G(["RTT[1-6]?","RCT",y.rtt,y.rct],y.rttn).$compact()}),l.$private(),N(l,"$format_skill",function(y,o){return this.$format(y,P(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:o.$category_dice(),row_dice:o.$row_dice(),category_name:o.$category_name(),skill_name:o.$name(),text:o.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var q,R,m,i,A,r,a,W,G,F=e.module,B=e.klass,c=e.hash2,P=e.defs,S=e.truthy,D=e.def,U=e.rb_minus,w=[],E=e.nil;return q=w,R=G=[F(w[0],"BCDice")].concat(q),m=W=[F(G[0],"DiceTable")].concat(R),A=[i=B(W[0],null,"Table")].concat(m),r=e.$r(A),(a=i.$$prototype).times=a.sides=a.name=a.items=E,P(i,"$from_i18n",function(L,C){var l=E;return l=r("I18n").$t(L,c(["locale"],{locale:C})),this.$new(l["$[]"]("name"),l["$[]"]("type"),l["$[]"]("items"))}),D(i,"$initialize",function(L,C,x){var l=this,h=E;return l.name=L,l.items=x.$freeze(),h=/(\d+)D(\d+)/i.$match(C),S(h)||l.$raise(r("ArgumentError"),"Unexpected table type: "+C),l.times=h["$[]"](1).$to_i(),l.sides=h["$[]"](2).$to_i()}),D(i,"$roll",function(L){var x,C=this;return x=L.$roll_sum(C.times,C.sides),C.$choice(x)}),D(i,"$choice",function(L){var x,C=this;return x=U(L,C.times),r("RollResult").$new(C.name,L,C.items["$[]"](x))})},Opal.modules["bcdice/dice_table"]=function(e){var F=e.top;return F.$require("bcdice/dice_table/roll_result"),F.$require("bcdice/dice_table/chain_table"),F.$require("bcdice/dice_table/d66_grid_table"),F.$require("bcdice/dice_table/d66_half_grid_table"),F.$require("bcdice/dice_table/d66_one_third_table"),F.$require("bcdice/dice_table/d66_left_range_table"),F.$require("bcdice/dice_table/d66_parity_table"),F.$require("bcdice/dice_table/d66_range_table"),F.$require("bcdice/dice_table/d66_table"),F.$require("bcdice/dice_table/range_table"),F.$require("bcdice/dice_table/sai_fic_skill_table"),F.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var D,N,j,w,F=e.module,B=e.const_set,c=[];return D=c,N=w=[F(c[0],"BCDice")].concat(D),j=[F(w[0],"D66SortType")].concat(N),B(j[0],"NO_SORT","no_sort"),B(j[0],"ASC","asc"),B(j[0],"DESC","desc"),function(E,N){var j=[F(E,"RoundType")].concat(N);return B(j[0],"CEIL","ceil"),B(j[0],"FLOOR","floor"),B(j[0],"ROUND","round")}(w[0],w)},Opal.modules["bcdice/translate"]=function(e){var N,M,R,g,W,j,F=e.module,B=e.ensure_kwargs,c=e.kwrestargs,S=e.hash2,D=e.def,U=[],w=e.nil;return N=U,M=j=[F(U[0],"BCDice")].concat(N),g=[R=F(j[0],"Translate")].concat(M),W=e.$r(g),D(R,"$translate",function(s,m){var i,A=this;return null==A.locale&&(A.locale=w),m=B(m),i=c(m,{}),W("I18n").$translate(s,S(["locale","raise"],{locale:A.locale,raise:!0}).$merge(e.to_hash(i)))},-2)},Opal.modules["bcdice/result"]=function(e){var R,H,g,N,j,B=e.klass,c=e.send,P=e.def,S=e.return_val,D=e.return_ivar,U=[],w=e.nil;return N=U,R=j=[(0,e.module)(U[0],"BCDice")].concat(N),[g=B(j[0],null,"Result")].concat(R),P(H=e.get_singleton_class(g),"$success",function(i){return c(this.$new(),"tap",[],function(a){var v;return null==a&&(a=w),a["$text="](i),c(a,"success=",v=[!0]),v[v.length-1]})}),P(H,"$failure",function(i){return c(this.$new(),"tap",[],function(a){var v;return null==a&&(a=w),a["$text="](i),c(a,"failure=",v=[!0]),v[v.length-1]})}),P(H,"$critical",function(i){return c(this.$new(),"tap",[],function(a){var v;return null==a&&(a=w),a["$text="](i),a["$critical="](!0),c(a,"success=",v=[!0]),v[v.length-1]})}),P(H,"$fumble",function(i){return c(this.$new(),"tap",[],function(a){var v;return null==a&&(a=w),a["$text="](i),a["$fumble="](!0),c(a,"failure=",v=[!0]),v[v.length-1]})}),P(H,"$nothing",S("nothing")),P(g,"$initialize",function(s){var m=this;return null==s&&(s=w),m.text=s,m.rands=w,m.detailed_rands=w,m.secret=!1,m.success=!1,m.failure=!1,m.critical=!1,m.fumble=!1},-1),g.$attr_accessor("text","rands","detailed_rands"),g.$attr_writer("secret","success","failure","critical","fumble"),P(g,"$secret?",D("secret")),P(g,"$success?",D("success")),P(g,"$failure?",D("failure")),P(g,"$critical?",D("critical")),P(g,"$fumble?",D("fumble")),P(g,"$condition=",function(s){return this.success=s,this.failure=s["$!"]()})},Opal.modules["racc/parser"]=function(e){var L,x,l,F=e.module,B=e.klass,c=e.truthy,P=e.const_set,S=e.defs,D=e.gvars,U=e.rb_lt,w=e.def,E=e.to_ary,N=e.send,q=e.neqeq,j=e.rb_plus,G=e.eqeq,M=e.rb_ge,R=e.rb_gt,g=e.rb_minus,W=e.rb_le,H=e.rb_times,s=e.assign_ivar_val,i=[],A=e.$r(i),r=e.nil,a=e.$$$;return L=i,x=[F(i[0],"Racc")].concat(L),l=e.$r(x),B(x[0],l("StandardError"),"ParseError"),c(a("::","ParseError","skip_raise")?"constant":r)||P(i[0],"ParseError",a(A("Racc"),"ParseError")),function(v,L){var u,y,o,z,T,l=[F(v,"Racc")].concat(L),h=e.$r(l);return c(h("Racc_No_Extensions","skip_raise")?"constant":r)||P(l[0],"Racc_No_Extensions",!1),u=l,o=[y=B(l[0],null,"Parser")].concat(u),z=e.$r(o),(T=y.$$prototype).yydebug=T.racc_debug_out=T.racc_error_status=T.racc_t=T.racc_vstack=T.racc_val=T.racc_state=T.racc_tstack=r,P(o[0],"Racc_Runtime_Version","1.4.6"),P(o[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),P(o[0],"Racc_Runtime_Core_Version_R","1.4.6"),P(o[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),P(o[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),P(o[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),P(o[0],"Racc_Runtime_Core_Version",z("Racc_Runtime_Core_Version_R")),P(o[0],"Racc_Runtime_Core_Revision",z("Racc_Runtime_Core_Revision_R")),P(o[0],"Racc_Runtime_Type","ruby"),S(z("Parser"),"$racc_runtime_type",function(){return z("Racc_Runtime_Type")}),w(y,"$_racc_setup",function(){var t,k,n=this,d=r,$=r;return null==D.stderr&&(D.stderr=r),c(a(n.$class(),"Racc_debug_parser"))||(n.yydebug=!1),c(null!=(t=n.yydebug)&&t!==r?"instance-variable":r)||(n.yydebug=!1),c(n.yydebug)&&(c(null!=(k=n.racc_debug_out)&&k!==r?"instance-variable":r)||(n.racc_debug_out=D.stderr),n.racc_debug_out=c(d=n.racc_debug_out)?d:D.stderr),$=a(n.$class(),"Racc_arg"),c(U($.$size(),14))&&$["$[]="](13,!0),$}),w(y,"$_racc_init_sysvars",function(){var t=this;return t.racc_state=[0],t.racc_tstack=[],t.racc_vstack=[],t.racc_t=r,t.racc_val=r,t.racc_read_next=!0,t.racc_user_yyerror=!1,t.racc_error_status=0}),w(y,"$do_parse",function(){return this.$__send__(z("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),w(y,"$next_token",function(){return this.$raise(z("NotImplementedError"),this.$class()+"#next_token is not defined")}),w(y,"$_racc_do_parse_rb",function(t,k){var n,$=this,Y=r,V=r,K=r,ne=r,_e=r,ie=r,ce=r,ae=r;return n=E(t),Y=null==n[0]?r:n[0],V=null==n[1]?r:n[1],K=null==n[2]?r:n[2],ne=null==n[3]?r:n[3],_e=null==n[10]?r:n[10],$.$_racc_init_sysvars(),ie=ce=ae=r,N($,"catch",["racc_end_parse"],function re(){var se,Q,b=null==re.$$s?this:re.$$s,Z=r;for(null==b.racc_state&&(b.racc_state=r),null==b.racc_read_next&&(b.racc_read_next=r),null==b.racc_t&&(b.racc_t=r),null==b.yydebug&&(b.yydebug=r),null==b.racc_val&&(b.racc_val=r);c(!0);)for(c(ae=ne["$[]"](b.racc_state["$[]"](-1)))?(c(b.racc_read_next)&&q(b.racc_t,0)&&(Q=b.$next_token(),se=E(Q),ie=null==se[0]?r:se[0],b.racc_val=null==se[1]?r:se[1],b.racc_t=c(ie)?c(Z=_e["$[]"](ie))?Z:1:0,c(b.yydebug)&&b.$racc_read_token(b.racc_t,ie,b.racc_val),b.racc_read_next=!1),ae=j(ae,b.racc_t),c(M(ae,0))&&c(ce=Y["$[]"](ae))&&G(V["$[]"](ae),b.racc_state["$[]"](-1))||(ce=K["$[]"](b.racc_state["$[]"](-1)))):ce=K["$[]"](b.racc_state["$[]"](-1));c(ce=b.$_racc_evalact(ce,t)););},{$$s:$})}),w(y,"$yyparse",function(t,k){return this.$__send__(z("Racc_YY_Parse_Method"),t,k,this.$_racc_setup(),!0)}),w(y,"$_racc_yyparse_rb",function(t,k,n,d){var $,V=this,K=r,ne=r,$e=r,_e=r,ce=r,ae=r,re=r;return $=E(n),K=null==$[0]?r:$[0],ne=null==$[1]?r:$[1],$e=null==$[2]?r:$[2],_e=null==$[3]?r:$[3],ce=null==$[10]?r:$[10],V.$_racc_init_sysvars(),ae=r,re=r,N(V,"catch",["racc_end_parse"],function se(){var Q=null==se.$$s?this:se.$$s;for(null==Q.racc_state&&(Q.racc_state=r);!c(re=_e["$[]"](Q.racc_state["$[]"](-1)));)for(;c(ae=Q.$_racc_evalact($e["$[]"](Q.racc_state["$[]"](-1)),n)););return N(t,"__send__",[k],function b(Z,X){var I=null==b.$$s?this:b.$$s,O=r,te=r;for(null==I.racc_t&&(I.racc_t=r),null==I.racc_state&&(I.racc_state=r),null==I.racc_read_next&&(I.racc_read_next=r),null==Z&&(Z=r),null==X&&(X=r),I.racc_t=c(Z)?c(O=ce["$[]"](Z))?O:1:0,I.racc_val=X,I.racc_read_next=!1,re=j(re,I.racc_t),c(M(re,0))&&c(ae=K["$[]"](re))&&G(ne["$[]"](re),I.racc_state["$[]"](-1))||(ae=$e["$[]"](I.racc_state["$[]"](-1)));c(ae=I.$_racc_evalact(ae,n)););for(;c(c(O=c(te=(re=_e["$[]"](I.racc_state["$[]"](-1)))["$!"]())?te:I.racc_read_next["$!"]())?O:I.racc_t["$=="](0));)for(c(re)&&c(re=j(re,I.racc_t))&&c(M(re,0))&&c(ae=K["$[]"](re))&&G(ne["$[]"](re),I.racc_state["$[]"](-1))||(ae=$e["$[]"](I.racc_state["$[]"](-1)));c(ae=I.$_racc_evalact(ae,n)););},{$$s:Q})},{$$s:V})}),w(y,"$_racc_evalact",function(t,k){var n,$e,$=this,Y=r,V=r,ne=r,_e=r,ie=r,ce=r;if(Y=null==(n=E(k))[0]?r:n[0],V=null==n[1]?r:n[1],ne=null==n[3]?r:n[3],$e=null==n[11]?r:n[11],_e=null==n[12]?r:n[12],c(R(t,0))&&c(U(t,$e)))c(R($.racc_error_status,0))&&(G($.racc_t,1)||($.racc_error_status=g($.racc_error_status,1))),$.racc_vstack.$push($.racc_val),$.racc_state.$push(t),$.racc_read_next=!0,c($.yydebug)&&($.racc_tstack.$push($.racc_t),$.$racc_shift($.racc_t,$.racc_tstack,$.racc_vstack));else if(c(U(t,0))&&c(R(t,_e["$-@"]()))){if(ie=N($,"catch",["racc_jump"],function ae(){var re=null==ae.$$s?this:ae.$$s;return null==re.racc_state&&(re.racc_state=r),re.racc_state.$push(re.$_racc_do_reduce(k,t)),!1},{$$s:$}),c(ie))switch(ie.valueOf()){case 1:return $.racc_user_yyerror=!0,_e["$-@"]();case 2:return $e;default:$.$raise("[Racc Bug] unknown jump code")}}else if(G(t,$e))c($.yydebug)&&$.$racc_accept(),$.$throw("racc_end_parse",$.racc_vstack["$[]"](0));else{if(G(t,_e["$-@"]())){switch($.racc_error_status.valueOf()){case 0:c(k["$[]"](21))||$.$on_error($.racc_t,$.racc_val,$.racc_vstack);break;case 3:G($.racc_t,0)&&$.$throw("racc_end_parse",r),$.racc_read_next=!0}for($.racc_user_yyerror=!1,$.racc_error_status=3;c(!0)&&!(c(ce=ne["$[]"]($.racc_state["$[]"](-1)))&&(ce=j(ce,1),c(M(ce,0))&&c(t=Y["$[]"](ce))&&G(V["$[]"](ce),$.racc_state["$[]"](-1))));)c(W($.racc_state.$size(),1))&&$.$throw("racc_end_parse",r),$.racc_state.$pop(),$.racc_vstack.$pop(),c($.yydebug)&&($.racc_tstack.$pop(),$.$racc_e_pop($.racc_state,$.racc_tstack,$.racc_vstack));return t}$.$raise("[Racc Bug] unknown action "+t.$inspect())}return c($.yydebug)&&$.$racc_next_state($.racc_state["$[]"](-1),$.racc_state),r}),w(y,"$_racc_do_reduce",function(t,k){var n,_e,ce,Z,X,I,ee,$=this,V=r,K=r,ne=r,$e=r,ie=r,ae=r,re=r,se=r,Q=r,b=r,O=r,te=r,J=r;return V=null==(n=E(t))[4]?r:n[4],K=null==n[5]?r:n[5],ne=null==n[6]?r:n[6],$e=null==n[7]?r:n[7],_e=null==n[8]?r:n[8],ie=null==n[9]?r:n[9],ce=null==n[13]?r:n[13],ae=$.racc_state,re=$.racc_vstack,se=$.racc_tstack,Q=H(k,-3),b=ie["$[]"](Q),Z=ie["$[]"](j(Q,1)),X=ie["$[]"](j(Q,2)),I=[],c($.yydebug)&&(O=se["$[]"](b["$-@"](),b)),te=re["$[]"](b["$-@"](),b),c($.yydebug)&&se["$[]="](b["$-@"](),b,I),re["$[]="](b["$-@"](),b,I),ae["$[]="](b["$-@"](),b,I),c(ce)?re.$push($.$__send__(X,te,re,te["$[]"](0))):re.$push($.$__send__(X,te,re)),se.$push(Z),c($.yydebug)&&$.$racc_reduce(O,Z,se,re),ee=g(Z,_e),c(Q=$e["$[]"](ee))&&(Q=j(Q,ae["$[]"](-1)),c(M(Q,0))&&c(J=V["$[]"](Q))&&G(K["$[]"](Q),ee))?J:ne["$[]"](ee)}),w(y,"$on_error",function(t,k,n){var $,d=this;return d.$raise(z("ParseError"),d.$sprintf("\nparse error on value %s (%s)",k.$inspect(),c($=d.$token_to_str(t))?$:"?"))}),w(y,"$yyerror",function(){return this.$throw("racc_jump",1)}),w(y,"$yyaccept",function(){return this.$throw("racc_jump",2)}),w(y,"$yyerrok",s("racc_error_status",0)),w(y,"$racc_read_token",function(t,k,n){var d=this;return d.racc_debug_out.$print("read    "),d.racc_debug_out.$print(k.$inspect(),"(",d.$racc_token2str(t),") "),d.racc_debug_out.$puts(n.$inspect()),d.racc_debug_out.$puts()}),w(y,"$racc_shift",function(t,k,n){var d=this;return d.racc_debug_out.$puts("shift   "+d.$racc_token2str(t)),d.$racc_print_stacks(k,n),d.racc_debug_out.$puts()}),w(y,"$racc_reduce",function(t,k,n,d){var $=this,Y=r;return(Y=$.racc_debug_out).$print("reduce "),c(t["$empty?"]())?Y.$print(" <none>"):N(t,"each",[],function V(K){return null==K&&(K=r),Y.$print(" ",(null==V.$$s?this:V.$$s).$racc_token2str(K))},{$$s:$}),Y.$puts(" --\x3e "+$.$racc_token2str(k)),$.$racc_print_stacks(n,d),$.racc_debug_out.$puts()}),w(y,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),w(y,"$racc_e_pop",function(t,k,n){var d=this;return d.racc_debug_out.$puts("error recovering mode: pop token"),d.$racc_print_states(t),d.$racc_print_stacks(k,n),d.racc_debug_out.$puts()}),w(y,"$racc_next_state",function(t,k){var n=this;return n.racc_debug_out.$puts("goto    "+t),n.$racc_print_states(k),n.racc_debug_out.$puts()}),w(y,"$racc_print_stacks",function(t,k){var d=r;return(d=this.racc_debug_out).$print("        ["),N(t,"each_index",[],function $(Y){return null==Y&&(Y=r),d.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(t["$[]"](Y))," ",k["$[]"](Y).$inspect(),")")},{$$s:this}),d.$puts(" ]")}),w(y,"$racc_print_states",function(t){var n=r;return(n=this.racc_debug_out).$print("        ["),N(t,"each",[],function($){return null==$&&($=r),n.$print(" ",$)}),n.$puts(" ]")}),w(y,"$racc_token2str",function(t){var n;return c(n=a(this.$class(),"Racc_token_to_s_table")["$[]"](t))?n:this.$raise("[Racc Bug] can't convert token "+t+" to string")}),w(y,"$token_to_str",function(t){return a(this.$class(),"Racc_token_to_s_table")["$[]"](t)})}(i[0],i)},Opal.modules["bcdice/arithmetic/node"]=function(e){var s,r,C,u,y,l,h,v,i,F=e.module,B=e.klass,c=e.def,P=e.thrower,S=e.return_ivar,D=e.send2,U=e.find_super,w=e.eqeq,E=e.const_set,N=e.eqeqeq,q=e.rb_divide,j=e.truthy,G=e.assign_ivar,M=e.alias,R=[],g=e.nil,W=e.$$$;return s=R,r=i=[F(R[0],"BCDice")].concat(s),C=v=[F(i[0],"Arithmetic")].concat(r),l=[F(v[0],"Node")].concat(C),h=e.$r(l),(y=(u=B(l[0],null,"BinaryOp")).$$prototype).lhs=y.rhs=y.op=g,c(u,"$initialize",function(z,T,f){var t=this;return t.lhs=z,t.op=T,t.rhs=f}),c(u,"$eval",function(z){try{P("eval_return");var k,f=this,t=g;return t=f.lhs.$eval(z),k=f.rhs.$eval(z),t.$send(f.op,k)}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),c(u,"$output",function(){var z=this;return""+z.lhs.$output()+z.op+z.rhs.$output()}),c(u,"$s_exp",function(){var z=this;return"("+z.$op_for_s_exp()+" "+z.lhs.$s_exp()+" "+z.rhs.$s_exp()+")"}),c(u,"$op_for_s_exp",S("op")),function(_,p,u){var y=B(_,p,"DivideBase"),o=[y].concat(u),z=e.$r(o),T=y.$$prototype;T.lhs=T.rhs=T.op=g,c(y,"$initialize",function f(t,k){return f.$$p=null,D(this,U(this,"initialize",f,!1,!0),"initialize",[t,"/",k],null)}),c(y,"$eval",function(t){try{P("eval_return");var d,$,n=this;return d=n.lhs.$eval(t),$=n.rhs.$eval(t),w($,0)&&n.$raise(z("ZeroDivisionError")),n.$divide_and_round(d,$,t)}catch(Y){if(Y===e.t_eval_return)return Y.$v;throw Y}}),c(y,"$output",function f(){var t=f.$$p||g,k=this;return f.$$p=null,""+D(k,U(k,"output",f,!1,!0),"output",[],t)+k.$rounding_method()}),y.$private(),c(y,"$rounding_method",function(){return W(this.$class(),"ROUNDING_METHOD")}),c(y,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),c(y,"$divide_and_round",function(t,k,n){return this.$raise(z("NotImplementedError"))})}(l[0],h("BinaryOp"),l),function(_,p,u){var y=B(_,p,"DivideWithGameSystemDefault"),o=[y].concat(u),z=e.$r(o);E(o[0],"ROUNDING_METHOD",""),y.$private(),c(y,"$divide_and_round",function(f,t,k){var n,d=g;return N(W(z("RoundType"),"CEIL"),n=k)?q(f.$to_f(),t).$ceil():N(W(z("RoundType"),"ROUND"),n)?(d=q(f.$to_f(),t),j(d["$negative?"]())?d.$abs().$round()["$-@"]():d.$round()):q(f,t).$floor()})}(l[0],h("DivideBase"),l),function(_,p,u){var y=B(_,p,"DivideWithCeil"),o=[y].concat(u);E(o[0],"ROUNDING_METHOD","C"),y.$private(),c(y,"$divide_and_round",function(T,f,t){return q(T.$to_f(),f).$ceil()})}(l[0],h("DivideBase"),l),function(_,p,u){var y=B(_,p,"DivideWithRound"),o=[y].concat(u);E(o[0],"ROUNDING_METHOD","R"),y.$private(),c(y,"$divide_and_round",function(T,f,t){var k=g;return k=q(T.$to_f(),f),j(k["$negative?"]())?k.$abs().$round()["$-@"]():k.$round()})}(l[0],h("DivideBase"),l),function(_,p,u){var y=B(_,p,"DivideWithFloor"),o=[y].concat(u);E(o[0],"ROUNDING_METHOD","F"),y.$private(),c(y,"$divide_and_round",function(T,f,t){return q(T,f).$floor()})}(l[0],h("DivideBase"),l),function(_,p){var u=B(_,null,"Negative");u.$$prototype.body=g,c(u,"$initialize",G("body")),c(u,"$eval",function(z){try{return P("eval_return"),this.body.$eval(z)["$-@"]()}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(u,"$output",function(){return"-"+this.body.$output()}),c(u,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(l[0]),function(_,p){var u=B(_,null,"Parenthesis");u.$$prototype.expr=g,c(u,"$initialize",G("expr")),c(u,"$eval",function(z){try{return P("eval_return"),this.expr.$eval(z)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(u,"$output",function(){return"("+this.expr.$output()+")"}),c(u,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(l[0]),function(_,p){var u=B(_,null,"Number");return u.$$prototype.value=g,c(u,"$initialize",G("value")),c(u,"$eval",S("value")),c(u,"$output",function(){return this.value.$to_s()}),M(u,"s_exp","output")}(l[0])},Opal.modules.strscan=function(e){var G,M,R,g,W,B=e.def,c=e.truthy,P=e.eqeqeq,S=e.Opal,D=e.return_ivar,U=e.send,w=e.alias,E=[],N=e.nil;return G=E,R=[M=(0,e.klass)(E[0],null,"StringScanner")].concat(G),g=e.$r(R),(W=M.$$prototype).pos=W.string=W.working=W.matched=W.prev_pos=W.match=N,M.$attr_reader("pos","matched"),B(M,"$initialize",function(s){var m=this;return m.string=s,m.pos=0,m.matched=N,m.working=s,m.match=[]}),M.$attr_reader("string"),B(M,"$beginning_of_line?",function(){var s=this;return 0===s.pos||"\n"===s.string.charAt(s.pos-1)}),B(M,"$scan",function(s){var m=this,i=(s=m.$anchor(s)).exec(m.working);return null==i?m.matched=N:(m.prev_pos=m.pos,m.pos+=i[0].length,m.working=m.working.substring(i[0].length),m.matched=i[0],m.match=i,i[0])}),B(M,"$scan_until",function(s){var m=this;s=m.$anchor(s);for(var i=m.working,A=0;i.length!=A;++A){var r=s.exec(i.substr(A));if(null!==r){var a=A+r[0].length,v=i.substr(0,a);return m.matched=r[0],m.match=r,m.prev_pos=m.pos+A,m.pos+=a,m.working=i.substr(a),v}}return m.matched=N}),B(M,"$[]",function(s){var i;if(c(this.match["$empty?"]()))return N;P(g("Symbol"),i=s)?s=s.$to_s():P(g("String"),i)||(s=S["$coerce_to!"](s,g("Integer"),"to_int"));var A=this.match;return s<0&&(s+=A.length),s<0||s>=A.length||null==A[s]?N:A[s]}),B(M,"$check",function(s){var m=this,i=(s=m.$anchor(s)).exec(m.working);return m.matched=null==i?N:i[0]}),B(M,"$check_until",function(s){var m=this,i=m.prev_pos,A=m.pos,r=m.working,a=m.$scan_until(s);return m.prev_pos=i,m.pos=A,m.working=r,a}),B(M,"$peek",function(s){return this.working.substring(0,s)}),B(M,"$eos?",function(){return 0===this.working.length}),B(M,"$exist?",function(s){var i=s.exec(this.working);return null==i?N:0==i.index?0:i.index+1}),B(M,"$skip",function(s){var m=this,i=(s=m.$anchor(s)).exec(m.working);if(null==i)return m.match=[],m.matched=N;var A=i[0],r=A.length;return m.matched=A,m.match=i,m.prev_pos=m.pos,m.pos+=r,m.working=m.working.substring(r),r}),B(M,"$skip_until",function(s){var i=this.$scan_until(s);return i===N?N:(this.matched=i.substr(-1),i.length)}),B(M,"$get_byte",function(){var s=this,m=N;return s.pos<s.string.length?(s.prev_pos=s.pos,s.pos+=1,m=s.matched=s.working.substring(0,1),s.working=s.working.substring(1)):s.matched=N,m}),B(M,"$match?",function(s){var m=this,i=(s=m.$anchor(s)).exec(m.working);return null==i?N:(m.prev_pos=m.pos,i[0].length)}),B(M,"$pos=",function(s){var m=this;return s<0&&(s+=m.string.$length()),m.pos=s,m.working=m.string.slice(s)}),B(M,"$matched_size",function(){return this.matched===N?N:this.matched.length}),B(M,"$post_match",function(){var s=this;return s.matched===N?N:s.string.substr(s.pos)}),B(M,"$pre_match",function(){var s=this;return s.matched===N?N:s.string.substr(0,s.prev_pos)}),B(M,"$reset",function(){var s=this;return s.working=s.string,s.matched=N,s.pos=0}),B(M,"$rest",D("working")),B(M,"$rest?",function(){return 0!==this.working.length}),B(M,"$rest_size",function(){return this.$rest().$size()}),B(M,"$terminate",function(){var s,m=this;return m.match=N,s=[m.string.$length()],U(m,"pos=",s),s[s.length-1]}),B(M,"$unscan",function(){var s=this;return s.pos=s.prev_pos,s.prev_pos=N,s.match=N,s}),w(M,"bol?","beginning_of_line?"),w(M,"getch","get_byte"),M.$private(),B(M,"$anchor",function(s){var m=s.toString().match(/\/([^\/]+)$/);return m=m?m[1]:void 0,new RegExp("^(?:"+s.source+")",m)})},Opal.modules["bcdice/normalize"]=function(e){var w,j,N,F=e.module,B=e.eqeqeq,c=e.def,P=e.eqeq,S=[],D=e.nil;return w=S,N=[F(S[0],"BCDice")].concat(w),(j=F(N[0],"Normalize")).$module_function(),c(j,"$comparison_operator",function(M){var R;return B(/<=|=</,R=M)?"<=":B(/>=|=>/,R)?">=":B(/<>|!=|=!/,R)?"!=":B(/</,R)?"<":B(/>/,R)?">":B(/=/,R)?"==":D}),c(j,"$target_number",function(M){return P(M,"?")?M:M.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var G,W,A,r,a,v,L,s,R,F=e.module,B=e.klass,c=e.const_set,P=e.hash2,S=e.truthy,D=e.send,U=e.def,w=e.thrower,E=e.top,N=[],q=e.nil;return E.$require("strscan"),E.$require("bcdice/normalize"),G=N,W=R=[F(N[0],"BCDice")].concat(G),A=s=[F(R[0],"Command")].concat(W),a=[r=B(s[0],null,"Lexer")].concat(A),v=e.$r(a),(L=r.$$prototype).scanner=L.notations=q,c(a[0],"SYMBOLS",P(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),U(r,"$initialize",function(x,l){var h,_,u;return x=S(u=(h=(_=x)===q||null==_?q:_.$split(" ",2))===q||null==h?q:h.$first())?u:"",this.scanner=v("StringScanner").$new(x),this.notations=D(l,"map",[],function(o){return null==o&&(o=q),S(o["$is_a?"](v("String")))?v("Regexp").$new(o):o})}),U(r,"$next_token",function(){try{var x=w("return"),l=this,h=q,_=q,u=q,y=q;return S(l.scanner["$eos?"]())?[!1,"$"]:(D(l.notations,"each",[],function o(z){var f,T=null==o.$$s?this:o.$$s;if(null==T.scanner&&(T.scanner=q),null==z&&(z=q),f=T.scanner.$scan(z),!S(f))return q;x.$throw(["NOTATION",f])},{$$s:l,$$ret:x}),S(h=l.scanner.$scan(/\d+/))?["NUMBER",h.$to_i()]:S(_=l.scanner.$scan(/[<>!=]+/))?(_=v("Normalize").$comparison_operator(_),[S(_)?"CMP_OP":"ILLEGAL",_]):(u=l.scanner.$getch().$upcase(),[S(y=v("SYMBOLS")["$[]"](u))?y:u.$to_sym(),u]))}catch(o){if(o===x)return o.$v;throw o}}),U(r,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var E,G,H,s,m,i,A,R,q,F=e.module,B=e.klass,c=e.def,P=e.return_ivar,S=e.truthy,D=[],U=e.nil;return E=D,G=q=[F(D[0],"BCDice")].concat(E),H=R=[F(q[0],"Command")].concat(G),m=[s=B(R[0],null,"Parsed")].concat(H),i=e.$r(m),(A=s.$$prototype).critical=A.fumble=A.dollar=A.modify_number=A.question_target=A.target_number=A.prefix_number=A.command=A.suffix_number=A.cmp_op=U,s.$attr_accessor("command"),s.$attr_accessor("prefix_number"),s.$attr_accessor("suffix_number"),s.$attr_accessor("critical"),s.$attr_accessor("fumble"),s.$attr_accessor("dollar"),s.$attr_accessor("modify_number"),s.$attr_accessor("cmp_op"),s.$attr_accessor("target_number"),s.$attr_writer("question_target"),c(s,"$initialize",function(){var a=this;return a.prefix_number=U,a.suffix_number=U,a.critical=U,a.fumble=U,a.dollar=U,a.cmp_op=U,a.target_number=U,a.question_target=!1}),c(s,"$question_target?",P("question_target")),c(s,"$to_s",function(a){var v=this,L=U,C=U,x=U,l=U,h=U;switch(null==a&&(a="after_command"),L=S(v.critical)?"@"+v.critical:U,C=S(v.fumble)?"#"+v.fumble:U,x=S(v.dollar)?"$"+v.dollar:U,l=i("Format").$modifier(v.modify_number),h=S(v.question_target)?"?":v.target_number,a.valueOf()){case"after_command":return[v.prefix_number,v.command,v.suffix_number,L,C,x,l,v.cmp_op,h].$join();case"after_modify_number":return[v.prefix_number,v.command,v.suffix_number,l,L,C,x,v.cmp_op,h].$join();case"after_target_number":return[v.prefix_number,v.command,v.suffix_number,l,v.cmp_op,h,L,C,x].$join();default:return U}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var a,x,y,k,n,d,$,Y,V,K,ne,$e,ce,o,f,t,se,h,_,L,F=e.klass,B=e.module,c=e.slice,P=e.extract_kwargs,S=e.ensure_kwargs,D=e.get_kwarg,U=e.send2,w=e.find_super,E=e.def,N=e.send,q=e.eqeq,j=e.thrower,G=e.hash,M=e.const_set,R=e.truthy,g=e.to_ary,W=e.hash2,H=e.top,s=[],m=e.$r(s),i=e.nil,A=e.$$$;return H.$require("racc/parser.rb"),H.$require("bcdice/arithmetic/node"),H.$require("bcdice/command/lexer"),H.$require("bcdice/command/parsed"),F(A(m("BCDice"),"Command"),A(m("Racc"),"Parser"),"Parser"),a=s,x=L=[B(s[0],"BCDice")].concat(a),h=[B(L[0],"Command")].concat(x),_=e.$r(h),y=h,f=[o=F(h[0],A(_("Racc"),"Parser"),"Parser")].concat(y),t=e.$r(f),(se=o.$$prototype).notations=se.lexer=se.modifier=se.suffix_number=se.prefix_number=se.need_suffix_number=se.need_prefix_number=se.critical=se.fumble=se.dollar=se.allowed_cmp_op=se.question_target=i,E(o,"$initialize",function Q(b,Z){var X,I,O,te,J=this;return Q.$$p=null,X=c(arguments),I=P(X),I=S(I),O=X,te=D(I,"round_type"),U(J,w(J,"initialize",Q,!1,!0),"initialize",[],null),J.notations=O,J.round_type=te,J.prefix_number=!1,J.suffix_number=!1,J.need_prefix_number=!1,J.need_suffix_number=!1,J.modifier=!0,J.critical=!1,J.fumble=!1,J.dollar=!1,J.allowed_cmp_op=[i,">=",">","<=","<","==","!="],J.question_target=!1},-2),E(o,"$disable_modifier",function(){return this.modifier=!1,this}),E(o,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),E(o,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),E(o,"$has_prefix_number",function(){var b=this;return b.prefix_number=!0,b.need_prefix_number=!0,b}),E(o,"$has_suffix_number",function(){var b=this;return b.suffix_number=!0,b.need_suffix_number=!0,b}),E(o,"$enable_critical",function(){return this.critical=!0,this}),E(o,"$enable_fumble",function(){return this.fumble=!0,this}),E(o,"$enable_dollar",function(){return this.dollar=!0,this}),E(o,"$restrict_cmp_op_to",function(b){var Z;return Z=c(arguments),this.allowed_cmp_op=Z,this},-1),E(o,"$enable_question_target",function(){return this.question_target=!0,this}),E(o,"$parse",function(b){var Z=this;try{return Z.lexer=t("Lexer").$new(b,Z.notations),Z.$do_parse()}catch(X){if(!e.rescue(X,[t("ParseError"),t("ZeroDivisionError")]))throw X;try{return i}finally{e.pop_exception()}}}),o.$private(),E(o,"$parsed",function(b,Z,X,I){try{return j("eval_return"),N(t("Parsed").$new(),"tap",[],function ee(J){var ue,le,de,me,ve,fe,he,oe=null==ee.$$s?this:ee.$$s;return null==oe.round_type&&(oe.round_type=i),null==J&&(J=i),J["$command="](b["$[]"]("command")),J["$prefix_number="]((ue=b["$[]"]("prefix"))===i||null==ue?i:ue.$eval(oe.round_type)),J["$suffix_number="]((le=b["$[]"]("suffix"))===i||null==le?i:le.$eval(oe.round_type)),J["$critical="]((de=Z["$[]"]("critical"))===i||null==de?i:de.$eval(oe.round_type)),J["$fumble="]((me=Z["$[]"]("fumble"))===i||null==me?i:me.$eval(oe.round_type)),J["$dollar="]((ve=Z["$[]"]("dollar"))===i||null==ve?i:ve.$eval(oe.round_type)),J["$modify_number="](X.$eval(oe.round_type)),J["$cmp_op="](I["$[]"]("cmp_op")),q(I["$[]"]("target"),"?")?(J["$question_target="](!0),N(J,"target_number=",fe=[0]),fe[fe.length-1]):(J["$question_target="](!1),fe=[(he=I["$[]"]("target"),he===i||null==he?i:he.$eval(oe.round_type))],N(J,"target_number=",fe),fe[fe.length-1])},{$$s:this})}catch(ee){if(ee===e.t_eval_return)return ee.$v;throw ee}}),E(o,"$next_token",function(){return this.lexer.$next_token()}),k=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),n=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),d=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),$=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),Y=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),V=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),K=[i,6,13,3,9,-1,27,-15,-10,-1,-38],ne=[i,i,i,i,i,i,19,16,15,i,i],$e=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ce=G(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),M(f[0],"Racc_arg",[k,n,$,d,Y,V,ne,K,19,$e,ce,58,35,!0]),R(t("Ractor","skip_raise")?"constant":i)&&t("Ractor").$make_shareable(t("Racc_arg")),M(f[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),R(t("Ractor","skip_raise")?"constant":i)&&t("Ractor").$make_shareable(t("Racc_token_to_s_table")),M(f[0],"Racc_debug_parser",!1),E(o,"$_reduce_1",function(b,Z,X){var I;return R(this.modifier)||this.$raise(t("ParseError")),I=g(b),this.$parsed(null==I[0]?i:I[0],null==I[1]?i:I[1],null==I[2]?i:I[2],null==I[3]?i:I[3])}),E(o,"$_reduce_2",function(b,Z,X){var I;return R(this.modifier)||this.$raise(t("ParseError")),I=g(b),this.$parsed(null==I[0]?i:I[0],null==I[2]?i:I[2],null==I[1]?i:I[1],null==I[3]?i:I[3])}),E(o,"$_reduce_3",function(b,Z,X){var I,ue;return ue=null==(I=g(b))[2]?i:I[2],this.$parsed(null==I[0]?i:I[0],null==I[1]?i:I[1],A(A(t("Arithmetic"),"Node"),"Number").$new(0),ue)}),E(o,"$_reduce_4",function(b,Z,X){var I=this;return R(I.prefix_number)&&R(I.suffix_number)||I.$raise(t("ParseError")),W(["command","prefix","suffix"],{command:b["$[]"](1),prefix:b["$[]"](0),suffix:b["$[]"](2)})}),E(o,"$_reduce_5",function(b,Z,X){var I=this;return R(I.prefix_number)||I.$raise(t("ParseError")),R(I.need_suffix_number)&&I.$raise(t("ParseError")),W(["command","prefix"],{command:b["$[]"](1),prefix:b["$[]"](0)})}),E(o,"$_reduce_6",function(b,Z,X){var I=this;return R(I.suffix_number)||I.$raise(t("ParseError")),R(I.need_prefix_number)&&I.$raise(t("ParseError")),W(["command","suffix"],{command:b["$[]"](0),suffix:b["$[]"](1)})}),E(o,"$_reduce_7",function(b,Z,X){var I=this;return(R(I.need_prefix_number)||R(I.need_suffix_number))&&I.$raise(t("ParseError")),W(["command"],{command:b["$[]"](0)})}),E(o,"$_reduce_8",function(b,Z,X){return W([],{})}),E(o,"$_reduce_9",function(b,Z,X){var I,ue,ee=i;return ee=null==(I=g(b))[0]?i:I[0],ue=null==I[2]?i:I[2],R(this.critical)&&R(ee["$[]"]("critical")["$nil?"]())||this.$raise(t("ParseError")),ee["$[]="]("critical",ue),ee}),E(o,"$_reduce_10",function(b,Z,X){var I,ue,ee=i;return ee=null==(I=g(b))[0]?i:I[0],ue=null==I[2]?i:I[2],R(this.fumble)&&R(ee["$[]"]("fumble")["$nil?"]())||this.$raise(t("ParseError")),ee["$[]="]("fumble",ue),ee}),E(o,"$_reduce_11",function(b,Z,X){var I,ue,ee=i;return ee=null==(I=g(b))[0]?i:I[0],ue=null==I[2]?i:I[2],R(this.dollar)&&R(ee["$[]"]("dollar")["$nil?"]())||this.$raise(t("ParseError")),ee["$[]="]("dollar",ue),ee}),E(o,"$_reduce_12",function(b,Z,X){return b["$[]"](1)}),E(o,"$_reduce_13",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"Negative").$new(b["$[]"](1))}),E(o,"$_reduce_14",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"+",b["$[]"](2))}),E(o,"$_reduce_15",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"-",b["$[]"](2))}),E(o,"$_reduce_16",function(b,Z,X){return R(this.allowed_cmp_op["$include?"](i))||this.$raise(t("ParseError")),W([],{})}),E(o,"$_reduce_17",function(b,Z,X){var I,ee,J;return J=null==(I=g(b))[1]?i:I[1],R(this.allowed_cmp_op["$include?"](ee=null==I[0]?i:I[0]))||this.$raise(t("ParseError")),W(["cmp_op","target"],{cmp_op:ee,target:J})}),E(o,"$_reduce_18",function(b,Z,X){var O,I=this;return O=b["$[]"](0),R(I.question_target)||I.$raise(t("ParseError")),R(I.allowed_cmp_op["$include?"](O))||I.$raise(t("ParseError")),W(["cmp_op","target"],{cmp_op:O,target:"?"})}),E(o,"$_reduce_19",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"+",b["$[]"](2))}),E(o,"$_reduce_20",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"-",b["$[]"](2))}),E(o,"$_reduce_22",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"BinaryOp").$new(b["$[]"](0),"*",b["$[]"](2))}),E(o,"$_reduce_23",function(b,Z,X){return b["$[]"](3).$new(b["$[]"](0),b["$[]"](2))}),E(o,"$_reduce_25",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),E(o,"$_reduce_26",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"DivideWithCeil")}),E(o,"$_reduce_27",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"DivideWithCeil")}),E(o,"$_reduce_28",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"DivideWithRound")}),E(o,"$_reduce_29",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"DivideWithFloor")}),E(o,"$_reduce_30",function(b,Z,X){return b["$[]"](1)}),E(o,"$_reduce_31",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"Negative").$new(b["$[]"](1))}),E(o,"$_reduce_33",function(b,Z,X){return b["$[]"](1)}),E(o,"$_reduce_34",function(b,Z,X){return A(A(t("Arithmetic"),"Node"),"Number").$new(b["$[]"](0))}),E(o,"$_reduce_none",function(b,Z,X){return b["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var N,M,H,s,m,i,g,j,F=e.module,B=e.send,c=e.eqeqeq,P=e.truthy,S=e.def,D=e.return_val,U=[],w=e.nil;return N=U,M=j=[F(U[0],"BCDice")].concat(N),H=g=[F(j[0],"Deprecated")].concat(M),m=[s=F(g[0],"Checker")].concat(H),i=e.$r(m),s.$private(),S(s,"$check_result_legacy",function(r,a,v,L){var h,C=this,x=w,l=w,_=w,p=w;return x=B(a,"map",[],"sides".$to_proc()),h=(l=B(a,"map",[],"value".$to_proc())).$sum(),_=c([100],p=x)?C.$check_1D100(r,h,v,L):c([20],p)?C.$check_1D20(r,h,v,L):c([6,6],p)?C.$check_2D6(r,h,l,v,L):w,(P(_["$nil?"]())||P(_["$empty?"]()))&&(_=c([10],p=x.$uniq())?C.$check_nD10(r,h,l,v,L):c([6],p)?C.$check_nD6(r,h,l,v,L):w,P(_["$nil?"]())||P(_["$empty?"]()))?w:i("Result").$new(_.$delete_prefix(" \uff1e "))}),S(s,"$check_1D100",D(w)),S(s,"$check_1D20",D(w)),S(s,"$check_nD10",D(w)),S(s,"$check_2D6",D(w)),S(s,"$check_nD6",D(w))},Opal.modules["bcdice/base"]=function(e){var m,C,p,T,t,k,u,y,o,z,l,F=e.module,B=e.klass,c=e.slice,P=e.rb_plus,S=e.truthy,D=e.def,U=e.regexp,w=e.send,E=e.thrower,N=e.return_ivar,q=e.assign_ivar_val,j=e.eqeqeq,G=e.eqeq,M=e.return_val,R=e.range,g=e.rb_minus,W=e.rb_divide,H=e.rb_times,s=e.rb_ge,i=e.top,A=[],r=e.$r(A),a=e.nil,v=e.$$$;return i.$require("i18n"),i.$require("i18n/backend/fallbacks"),i.$require("bcdice/randomizer"),i.$require("bcdice/dice_table"),i.$require("bcdice/enum"),i.$require("bcdice/translate"),i.$require("bcdice/result"),i.$require("bcdice/command/parser"),i.$require("bcdice/deprecated/checker"),C=A,p=l=[F(A[0],"BCDice")].concat(C),y=[u=B(l[0],null,"Base")].concat(p),o=e.$r(y),(z=u.$$prototype).raw_input=z.randomizer=z.enabled_upcase_input=z.debug=a,t=[T=e.get_singleton_class(u)].concat(y),k=e.$r(t),T.$attr_reader("prefixes"),D(T,"$register_prefix",function(d){var Y,K,V=this;return null==V.prefixes&&(V.prefixes=a),Y=c(arguments),V.prefixes=P(S(K=V.prefixes)?K:[],Y.$flatten())},-1),D(T,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),D(T,"$prefixes_pattern",function(){var d=this,$=a;return null==d.prefixes_pattern&&(d.prefixes_pattern=a),null==d.prefixes&&(d.prefixes=a),d.prefixes_pattern=S($=d.prefixes_pattern)?$:a,S(d.prefixes_pattern)?d.prefixes_pattern:(d.prefixes=S($=d.prefixes)?$:[],d.prefixes.$freeze(),d.prefixes_pattern=(S(d.prefixes["$empty?"]())?/(?!)/:U(["^(S)?(",d.prefixes.$join("|"),")"],"i")).$freeze())}),D(T,"$command_pattern",function(){var d=this,$=a,Y=a;return null==d.command_pattern&&(d.command_pattern=a),null==d.prefixes&&(d.prefixes=a),d.command_pattern=S($=d.command_pattern)?$:a,S(d.command_pattern)?d.command_pattern:(d.prefixes=S($=d.prefixes)?$:[],d.prefixes.$freeze(),Y=P(w(v(k("CommonCommand"),"COMMANDS"),"map",[],function(K){return null==K&&(K=a),v(K,"PREFIX_PATTERN").$source()}),d.prefixes),d.command_pattern=U(["^S?(",Y.$join("|"),")"],"i").$freeze())}),D(T,"$eval",function(d){try{return E("eval_return"),this.$new(d).$eval()}catch(V){if(V===e.t_eval_return)return V.$v;throw V}}),u.$include(o("Translate")),u.$include(v(o("Deprecated"),"Checker")),D(u,"$initialize",function(f){var t=this;return t.raw_input=f,t.sort_add_dice=!1,t.sort_barabara_dice=!1,t.d66_sort_type=v(o("D66SortType"),"NO_SORT"),t.enabled_d9=!1,t.round_type=v(o("RoundType"),"FLOOR"),t.sides_implicit_d=6,t.upper_dice_reroll_threshold=a,t.reroll_dice_reroll_threshold=a,t.default_cmp_op=a,t.default_target_number=a,t.enabled_upcase_input=!0,t.locale="ja_jp",t.randomizer=v(o("BCDice"),"Randomizer").$new(),t.debug=!1}),u.$attr_accessor("randomizer"),u.$attr_reader("d66_sort_type"),u.$attr_reader("round_type"),u.$attr_reader("sides_implicit_d"),u.$attr_reader("upper_dice_reroll_threshold"),u.$attr_reader("reroll_dice_reroll_threshold"),u.$attr_reader("default_cmp_op"),u.$attr_reader("default_target_number"),D(u,"$sort_add_dice?",N("sort_add_dice")),D(u,"$sort_barabara_dice?",N("sort_barabara_dice")),D(u,"$enabled_d9?",N("enabled_d9")),D(u,"$enable_debug",q("debug",!0)),D(u,"$eval",function(){var t,n,f=this,k=a;return t=v(o("BCDice"),"Preprocessor").$process(f.raw_input,f),k=S(n=f.$dice_command(t))?n:f.$eval_common_command(f.raw_input),S(k)?(k["$rands="](f.randomizer.$rand_results()),k["$detailed_rands="](f.randomizer.$detailed_rand_results()),k):a}),D(u,"$change_text",function(f){return f}),D(u,"$check_result",function(f,t,k,n){var d=this,$=a,Y=a,V=a,K=a,ne=a;return $=d.$check_result_legacy(f,t,k,n),S($)?$:(Y=w(t,"map",[],"sides".$to_proc()),K=(V=w(t,"map",[],"value".$to_proc())).$sum(),$=j([100],ne=Y)?d.$result_1d100(f,K,k,n):j([20],ne)?d.$result_1d20(f,K,k,n):j([6,6],ne)?d.$result_2d6(f,K,V,k,n):a,G($,o("Result").$nothing())?a:S($)?$:($=j([10],ne=Y.$uniq())?d.$result_nd10(f,K,V,k,n):j([6],ne)?d.$result_nd6(f,K,V,k,n):a,G($,o("Result").$nothing())?a:S($)?$:d.$result_ndx(f,k,n)))}),D(u,"$grich_text",M(a)),u.$private(),D(u,"$eval_common_command",function(f){try{E("eval_return");var k=E("return");return f=this.$change_text(f),w(v(o("CommonCommand"),"COMMANDS"),"each",[],function d($){var V,Y=null==d.$$s?this:d.$$s;if(null==Y.randomizer&&(Y.randomizer=a),null==$&&($=a),V=$.$eval(f,Y,Y.randomizer),!S(V))return a;k.$throw(V)},{$$s:this,$$ret:k}),a}catch(d){if(d===e.t_eval_return||d===k)return d.$v;throw d}}),D(u,"$dice_command",function(f){var t=this,k=a,n=a,d=a,$=a;return S(t.enabled_upcase_input)&&(f=f.$upcase()),k=t.$class().$prefixes_pattern().$match(f),S(k)?(n=k["$[]"](1)["$nil?"]()["$!"](),S(n)&&(f=f["$[]"](R(1,-1,!1))),d=t.$eval_game_system_specific_command(f),S(d["$is_a?"](o("Result")))?(d["$secret="](S($=d["$secret?"]())?$:n),d):S(d["$nil?"]())||S(d["$empty?"]())||G(d,"1")?a:w(o("Result").$new(),"tap",[],function(V){var K;return null==V&&(V=a),V["$text="](d.$to_s()),w(V,"secret=",K=[n]),K[K.length-1]})):a}),D(u,"$eval_game_system_specific_command",M(a)),D(u,"$result_ndx",function(f,t,k){return S(k["$is_a?"](o("String")))?a:S(f.$send(t,k))?o("Result").$success(this.$translate("success")):o("Result").$failure(this.$translate("failure"))}),D(u,"$result_1d100",M(a)),D(u,"$result_1d20",M(a)),D(u,"$result_nd10",M(a)),D(u,"$result_2d6",M(a)),D(u,"$result_nd6",M(a)),D(u,"$get_table_by_2d6",function(f){return this.$get_table_by_nD6(f,2)}),D(u,"$get_table_by_1d6",function(f){return this.$get_table_by_nD6(f,1)}),D(u,"$get_table_by_nD6",function(f,t){return this.$get_table_by_nDx(f,t,6)}),D(u,"$get_table_by_nDx",function(f,t,k){var d,$=a;return d=this.randomizer.$roll_sum(t,k),$=this.$get_table_value(f["$[]"](g(d,t))),S($["$nil?"]())?["1",0]:[$,d]}),D(u,"$get_table_by_1d3",function(f){var n,d,t=this,$=a;return t.$debug("get_table_by_1d3"),n=t.randomizer.$roll_sum(1,6),t.$debug("num",n),d=W(g(n,1),2).$to_i(),t.$debug("index",d),$=f["$[]"](d),S($["$nil?"]())?["1",0]:[$,n]}),D(u,"$get_table_by_d66_swap",function(f){var k;return k=this.randomizer.$roll_d66(v(o("D66SortType"),"ASC")),[this.$get_table_by_number(k,f),k]}),D(u,"$get_table_by_d66",function(f){var k,n,d,Y,$=a;return k=this.randomizer.$roll_once(6),n=this.randomizer.$roll_once(6),d=P(H(g(k,1),6),g(n,1)),$=f["$[]"](d),Y=""+k+n,S($["$nil?"]())?["1",Y]:[$,Y]}),D(u,"$get_table_by_number",function(f,t,k){try{var n=E("return");return null==k&&(k="1"),w(t,"each",[],function $(Y){var K,V=null==$.$$s?this:$.$$s;if(null==Y&&(Y=a),K=Y["$[]"](0),!S(s(K,f)))return a;n.$throw(V.$get_table_value(Y["$[]"](1)))},{$$s:this,$$ret:n}),this.$get_table_value(k)}catch($){if($===n)return $.$v;throw $}},-3),D(u,"$get_table_value",function(f){return S(f["$is_a?"](o("Proc")))?f.$call():f}),D(u,"$roll_tables",function(f,t){var n=a;return n=t["$[]"](f),S(n)?n.$roll(this.randomizer).$to_s():a}),D(u,"$debug",function(f,t){var n,d=this,$=a,Y=a;return n=c(arguments,1),S(d.debug)?($=S(f["$is_a?"](o("String")))?f:f.$inspect(),S(n["$empty?"]())?d.$warn($):(Y=w(n,"map",[],function(K){return null==K&&(K=a),S(K["$is_a?"](o("String")))?'"'+K+'"':K.$inspect()}),d.$warn($+": "+Y.$join(", ")))):a},-2),v(v(r("I18n"),"Backend"),"Simple").$include(v(v(r("I18n"),"Backend"),"Fallbacks")),r("I18n").$load_path()["$<<"](r("Dir")["$[]"](r("File").$join("bcdice","../../i18n/**/*.yml"))),r("I18n")["$default_locale="]("ja_jp"),m=[["ja_jp"]],w(r("I18n").$fallbacks(),"defaults=",m),m[m.length-1]},Opal.queue(function(e){var H,A,x,u,y,l,h,_,p,a,v,m,F=e.module,B=e.klass,c=e.const_set,P=e.send2,S=e.find_super,D=e.def,U=e.truthy,w=e.send,E=e.hash2,N=e.rb_le,q=e.hash,j=e.rb_plus,M=[],R=e.nil,g=e.$$$;return e.top.$require("bcdice/base"),H=M,A=m=[F(M[0],"BCDice")].concat(H),a=[F(m[0],"GameSystem")].concat(A),v=e.$r(a),x=a,h=[l=B(a[0],v("Base"),"AlchemiaStruggle")].concat(x),_=e.$r(h),p=R,l.$$prototype.randomizer=R,c(h[0],"ID","AlchemiaStruggle"),c(h[0],"NAME","\u30a2\u30eb\u30b1\u30df\u30a2\u30fb\u30b9\u30c8\u30e9\u30b0\u30eb"),c(h[0],"SORT_KEY","\u3042\u308b\u3051\u307f\u3042\u3059\u3068\u3089\u304f\u308b"),c(h[0],"HELP_MESSAGE","\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff08 xAS \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 5AS\n\n\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff06\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306b\u30d4\u30c3\u30af\uff08 xASy \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u3001\u305d\u3053\u304b\u3089\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306by\u500b\u3092\u30d4\u30c3\u30af\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 4AS3\n\n\u25a0 \u30a6\u30eb\u30c0\u30a4\u30b9\u306e\u7372\u5f97\uff08 xUL \uff09\n  xD\u306e\u30a6\u30eb\u30c0\u30a4\u30b9\u3092\u632f\u308a\u3001\u51fa\u305f\u51fa\u76ee\u306e\u500b\u6570\u3092No.\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 6UL\n\n\u25a0 \u8868\n  \u30fb\u5947\u8de1\u306e\u89e6\u5a92\n    \u30fb\u30a8\u30ec\u30e1\u30f3\u30c8 (CELE, CElement)\n    \u30fb\u30a2\u30eb\u30b1\u30df\u30a2 (CALC, CAlchemia)\n    \u30fb\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8 (CINF, CInformant)\n    \u30fb\u30a4\u30ce\u30bb\u30f3\u30b9 (CINN, CInnocence)\n    \u30fb\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9 (CACQ, CAcquired)\n  \u30fb\u643a\u884c\u54c1\n    \u30fb\uff33\u30b5\u30a4\u30ba (ARS, ArticleS)\n    \u30fb\uff2d\u30b5\u30a4\u30ba (ARM, ArticleM)\n    \u30fb\uff2c\u30b5\u30a4\u30ba (ARL, ArticleL)\n  \u30fb\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868 (PCI, PCInformation)\n  \u30fb\u7406\u7531\u8868 (REA, Reason)\n  \u30fb\u4ea4\u6d41\u8868 (ASS, Associate)\n  \u30fb\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868 (CON, Contact)\n"),c(h[0],"ROLL_REG",/^(\d+)AS(\d+)?$/i.$freeze()),l.$register_prefix("\\d+AS","\\d+UL"),D(l,"$initialize",function z(T){var t=this;return z.$$p=null,P(t,S(t,"initialize",z,!1,!0),"initialize",[T],null),t.sort_add_dice=!0,t.sort_barabara_dice=!0,t.round_type=g(_("RoundType"),"CEIL")}),D(l,"$eval_game_system_specific_command",function(T){var t,n,f=this,k=R;return t=U(k=_("ALIAS")["$[]"](T))?k:T,U(k=U(n=f.$try_roll_alchemia(t))?n:f.$try_roll_uldice(t))?k:f.$roll_tables(t,_("TABLES"))}),D(l,"$try_roll_alchemia",function(T){var f=this,t=R,k=R,n=R,d=R;return t=_("ROLL_REG").$match(T),U(t)?(k=t["$[]"](1).$to_i(),U(t["$[]"](2)["$nil?"]())?(n=f.$roll_alchemia(k),f.$make_roll_text(n)):(d=t["$[]"](2).$to_i(),n=f.$roll_alchemia_and_pick(k,d),f.$make_roll_and_pick_text(n["$[]"]("rolled_dices"),d,n["$[]"]("picked_dices")))):R}),D(l,"$try_roll_uldice",function(T){var t=R,k=R,n=R;return t=/^(\d+)UL$/.$match(T),U(t)?["("+(k=t["$[]"](1).$to_i())+"D6)","["+(n=this.randomizer.$roll_barabara(k,6).$sort()).$join(",")+"]",w(w(n,"group_by",[],"itself".$to_proc()),"map",[],function(K,ne){return null==K&&(K=R),null==ne&&(ne=R),"No."+K+": "+ne.$size()+"\u500b"}).$join(", ")].$join(" \uff1e "):R}),D(l,"$roll_alchemia",function(T){return this.randomizer.$roll_barabara(T,6)}),D(l,"$roll_alchemia_and_pick",function(T,f){var k;return k=this.$roll_alchemia(T),E(["rolled_dices","picked_dices"],{rolled_dices:k,picked_dices:this.$pick_maximum(k,f)})}),D(l,"$pick_maximum",function(T,f){return U(N(T.$size(),f))?T:T.$sort().$pop(f)}),D(l,"$make_roll_text",function(T){return"("+T.$size()+"D6) \uff1e "+this.$make_dice_text(T)}),D(l,"$make_roll_and_pick_text",function(T,f,t){return"("+T.$size()+"D6|>"+f+"D6) \uff1e "+this.$make_dice_text(T)+" >> "+this.$make_dice_text(t)+" \uff1e "+t.$sum()}),D(l,"$make_dice_text",function(T){return"["+T.$sort().$join(", ")+"]"}),c(h[0],"CATALYST_TABLES",w(E(["CElement","CAlchemia","CInformant","CInnocence","CAcquired"],{CElement:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a8\u30ec\u30e1\u30f3\u30c8\uff09","1D6",["\u30ef\u30f3\u30c9","\u6c34\u6676\u7389","\u30ab\u30fc\u30c9","\u30b9\u30c6\u30c3\u30ad","\u624b\u93e1","\u5b9d\u77f3"]),CAlchemia:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30eb\u30b1\u30df\u30a2\uff09","1D6",["\u6307\u8f2a","\u30d6\u30ec\u30b9\u30ec\u30c3\u30c8","\u30a4\u30e4\u30ea\u30f3\u30b0","\u30cd\u30c3\u30af\u30ec\u30b9","\u30d6\u30ed\u30fc\u30c1","\u30d8\u30a2\u30d4\u30f3"]),CInformant:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8\uff09","1D6",["\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3","\u30bf\u30d6\u30ec\u30c3\u30c8","\u30ce\u30fc\u30c8\u30d1\u30bd\u30b3\u30f3","\u7121\u7dda\u6a5f\uff08\u30c8\u30e9\u30f3\u30b7\u30fc\u30d0\u30fc\uff09","\u30a6\u30a7\u30a2\u30e9\u30d6\u30eb\u30c7\u30d0\u30a4\u30b9","\u643a\u5e2f\u30b2\u30fc\u30e0\u6a5f"]),CInnocence:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30ce\u30bb\u30f3\u30b9\uff09","1D6",["\u624b\u888b","\u7b1b","\u9774","\u9234","\u62e1\u58f0\u5668","\u5f26\u697d\u5668"]),CAcquired:g(_("DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9\uff09","1D6",["\u30dc\u30bf\u30f3","\u97f3\u58f0","\u30e2\u30fc\u30b7\u30e7\u30f3","\u8133\u6ce2","\u8a18\u9332\u5a92\u4f53","\uff21\uff29"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),c(h[0],"ARTICLE_TABLES",w(E(["ArticleS","ArticleM","ArticleL"],{ArticleS:g(_("DiceTable"),"D66Table").$new("\u643a\u884c\u54c1\uff08\uff33\u30b5\u30a4\u30ba\uff09",g(_("D66SortType"),"ASC"),q(11,"\u30de\u30c3\u30c1",12,"\u30da\u30c3\u30c8\u30dc\u30c8\u30eb",13,"\u8a66\u9a13\u7ba1",14,"\u56e3\u6247",15,"\u690d\u7269",16,"\u30cf\u30f3\u30ab\u30c1",22,"\u5316\u7ca7\u7528\u5177",23,"\u30d9\u30eb\u30c8",24,"\u30bf\u30d0\u30b3",25,"\u30c1\u30a7\u30fc\u30f3",26,"\u96fb\u6c60",33,"\u304a\u83d3\u5b50",34,"\u91dd\u91d1",35,"\u30b3\u30a4\u30f3",36,"\u30ca\u30a4\u30d5",44,"\u30ab\u30c8\u30e9\u30ea\u30fc",45,"\u7802",46,"\u30b9\u30d7\u30ec\u30fc",55,"\u77f3",56,"\u6587\u623f\u5177",66,"\u30da\u30f3\u30e9\u30a4\u30c8")),ArticleM:g(_("DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2d\u30b5\u30a4\u30ba\uff09",["\u672c","\u5098","\u91d1\u5c5e\u677f","\u82b1\u706b","\u30a8\u30a2\u30ac\u30f3","\u5305\u5e2f"],["\u5de5\u5177","\u30b8\u30e3\u30b1\u30c3\u30c8","\u30ed\u30fc\u30d7","\u4eba\u5f62","\u8efd\u98df","\u30ac\u30e9\u30b9\u74f6"]),ArticleL:g(_("DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2c\u30b5\u30a4\u30ba\uff09",["\u6728\u5200","\u91e3\u308a\u5177","\u81ea\u8ee2\u8eca","\u30d0\u30c3\u30c8","\u5bdd\u888b","\u4e38\u592a"],["\u7269\u5e72\u3057\u7aff","\u934b","\u30b9\u30b1\u30fc\u30c8\u30dc\u30fc\u30c9","\u30b7\u30e3\u30d9\u30eb\uff08\u30b9\u30b3\u30c3\u30d7\uff09","\u30bf\u30f3\u30af","\u811a\u7acb"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),c(h[0],"DRAMA_SEQUENCE_TABLES",w(E(["PCInformation","Reason","Associate","Contact"],{PCInformation:g(_("DiceTable"),"D66ParityTable").$new("\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u3066\u3044\u305f\u5834\u6240\u3002\u805e\u304d\u305f\u3044\u3053\u3068\u3092\u7a81\u304d\u3064\u3051\u308b\u9803\u5408\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u3053\u3061\u3089\u306e\u30da\u30fc\u30b9\u306b\u5f15\u304d\u8fbc\u307f\u3001\u3086\u3055\u3076\u308a\u3092\u304b\u3051\u308b\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u76f8\u624b\u306e\u30da\u30fc\u30b9\u306b\u5451\u307e\u308c\u306a\u3044\u3088\u3046\u3001\u614e\u91cd\u306b\u3044\u3053\u3046\u3002","\u81ea\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u4ef2\u9593\u306b\u624b\u306f\u51fa\u3055\u305b\u305a\u3001\u3042\u304f\u307e\u3067\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u3092\u4e0e\u3048\u308b\u3060\u3051\u306b\u3057\u3066\u3082\u3089\u3046\u3002","\u30ab\u30d5\u30a7\u3001\u30d0\u30fc \u2015\u2015 \u53b3\u304b\u306a\u7a7a\u6c17\u306b\u5305\u307e\u308c\u305f\u5927\u4eba\u306e\u5834\u6240\u3002\u3053\u3053\u3067\u58f0\u3092\u8352\u3052\u308b\u306e\u306f\u7d33\u58eb\u7684\u3067\u306f\u306a\u3044\u3002","\u8def\u5730\u88cf \u2015\u2015 \u5efa\u7269\u3068\u5efa\u7269\u306e\u9593\u3084\u3001\u4eba\u901a\u308a\u306e\u5c11\u306a\u3044\u88cf\u901a\u308a\u3002\u591a\u5c11\u624b\u8352\u306a\u624b\u6bb5\u306b\u51fa\u3066\u3082\u76ee\u7acb\u3061\u306f\u3057\u306a\u3044\u3060\u308d\u3046\u3002"],["\u5ec3\u589f \u2015\u2015 \u5ec3\u30d3\u30eb\u3001\u5ec3\u5de5\u5834\u306e\u3088\u3046\u306a\u4eba\u304c\u7acb\u3061\u5165\u3089\u306a\u3044\u5834\u6240\u3002\u304a\u3042\u3064\u3089\u3048\u5411\u304d\u306e\u5834\u6240\u3092\u7528\u610f\u3057\u3066\u3084\u3063\u305f\u3002","\u516c\u5171\u4ea4\u901a\u6a5f\u95a2 \u2015\u2015 \u30d0\u30b9\u3001\u96fb\u8eca\u306a\u3069\u3002\u663c\u591c\u554f\u308f\u305a\u591a\u304f\u306e\u4eba\u304c\u5229\u7528\u3059\u308b\u4e57\u308a\u7269\u3002\u6562\u3048\u3066\u4eba\u76ee\u306b\u4ed8\u304f\u5834\u6240\u3067\u8a70\u3081\u5bc4\u308a\u3001\u52d5\u63fa\u3092\u8a98\u3046\u3002","\u96d1\u6728\u6797 \u2015\u2015 \u8349\u6728\u304c\u63fa\u308c\u308b\u97f3\u3001\u866b\u3084\u9ce5\u306e\u9cf4\u304d\u58f0\u3060\u3051\u304c\u805e\u3053\u3048\u308b\u3002\u305d\u3053\u306b\u90aa\u9b54\u3059\u308b\u8005\u306f\u3044\u306a\u3044\u3002","\u591c\u306e\u516c\u5712 \u2015\u2015 \u5bdd\u9759\u307e\u3063\u305f\u8857\u306e\u516c\u5712\u3002\u8857\u706f\u306b\u7167\u3089\u3055\u308c\u306a\u3044\u5834\u6240\u306a\u3089\u76ee\u7acb\u3064\u3053\u3068\u3082\u306a\u3044\u3060\u308d\u3046\u3002","\u99d0\u8eca\u5834 \u2015\u2015 \u7acb\u4f53\u3001\u5e73\u9762\u3001\u5730\u4e0b\u3092\u554f\u308f\u305a\u8eca\u3092\u505c\u3081\u308b\u5834\u6240\u3002\u4eba\u306e\u51fa\u5165\u308a\u306e\u6fc0\u3057\u3055\u306b\u5bfe\u3057\u3001\u305d\u3053\u306b\u7559\u307e\u308b\u4eba\u306f\u5c11\u306a\u3044\u3002\u76ee\u6483\u8005\u3082\u591a\u304f\u306f\u306a\u3044\u3060\u308d\u3046\u3002","\u9ad8\u67b6\u4e0b \u2015\u2015 \u7dda\u8def\u3001\u9053\u8def\u306e\u6a4b\u306e\u4e0b\u3002\u97ff\u304f\u9a12\u97f3\u304c\u81ea\u5206\u305f\u3061\u306e\u5b58\u5728\u3092\u8584\u3081\u3066\u304f\u308c\u308b\u3002"]),Reason:g(_("DiceTable"),"Table").$new("\u7406\u7531\u8868","1D6",["\u4e0d\u4fe1\u611f \u2015\u2015 \u884c\u52d5\u3084\u8a00\u52d5\u306b\u306a\u306b\u304b\u91c8\u7136\u3068\u3057\u306a\u3044\u90e8\u5206\u3092\u611f\u3058\u308b\u3002\u767d\u9ed2\u306f\u3063\u304d\u308a\u3055\u305b\u3088\u3046\u3002","\u597d\u5947\u5fc3 \u2015\u2015 \u76f8\u624b\u306e\u3053\u3068\u3092\u77e5\u308a\u305f\u3044\u3068\u63bb\u304d\u7acb\u3066\u3089\u308c\u308b\u3002\u77e5\u308a\u305f\u3044\u6c17\u6301\u3061\u3092\u6291\u3048\u3089\u308c\u306a\u3044\u3002","\u5e87\u8b77\u611f \u2015\u2015 \u77e5\u53e4\u306e\u59ff\u3092\u91cd\u306d\u3066\u5b88\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u4fe1\u983c\u95a2\u4fc2\u3092\u541b\u3068\u7bc9\u304f\u305f\u3081\u3001\u8e0f\u307f\u8fbc\u3093\u3060\u3068\u3053\u308d\u307e\u3067\u77e5\u3063\u3066\u304a\u304d\u305f\u3044\u3002","\u5acc\u60aa\u611f \u2015\u2015 \u7406\u7531\u306f\u306a\u3044\u3051\u3069\u6c17\u306b\u98df\u308f\u306a\u3044\u3002\u60c5\u5831\u306e\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u3092\u63e1\u308b\u3053\u3068\u3067\u512a\u4f4d\u306b\u7acb\u3066\u308b\u306f\u305a\u3060\u3002","\u504f\u611b \u2015\u2015 \u611b\u3086\u3048\u306b\u77e5\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u541b\u306e\u601d\u8003\u3001\u76ee\u7684\u3001\u611f\u60c5\u306e\u3059\u3079\u3066\u3092\u624b\u306b\u5165\u308c\u305f\u3044\u3002","\u76f4\u611f \u2015\u2015 \u6839\u62e0\u306f\u306a\u3044\u304c\u3001\u306a\u306b\u304b\u96a0\u3057\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u3002\u4e00\u304b\u516b\u304b\u3001\u52dd\u8ca0\u306b\u51fa\u3088\u3046\u3002"]),Associate:g(_("DiceTable"),"D66ParityTable").$new("\u4ea4\u6d41\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u305f\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u4e00\u606f\u3064\u304f\u3082\u306e\u3044\u3044\u3060\u308d\u3046\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u4e00\u7dd2\u306b\u304f\u3064\u308d\u304e\u306a\u304c\u3089\u8a71\u3092\u3057\u3088\u3046\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u304a\u90aa\u9b54\u3055\u305b\u3066\u3082\u3089\u3048\u306a\u3044\u3060\u308d\u3046\u304b\uff1f","\u76f8\u624b\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u82e5\u5e72\u306e\u5c45\u5fc3\u5730\u60aa\u3055\u306f\u3042\u308b\u304c\u3001\u597d\u611f\u3092\u6301\u3063\u3066\u3082\u3089\u3046\u305f\u3081\u306b\u306f\u6211\u6162\u3082\u5fc5\u8981\u3002","\u98df\u4e8b\u51e6 \u2015\u2015 \u30d5\u30a1\u30df\u30ec\u30b9\u3001\u5c45\u9152\u5c4b\u306a\u3069\u3002\u4eba\u3067\u306b\u304e\u308f\u3046\u98df\u4e8b\u51e6\u3002\u6c17\u8efd\u306b\u98f2\u307f\u98df\u3044\u3067\u304d\u308b\u7a7a\u9593\u3067\u3001\u8a71\u3082\u5f3e\u3080\u306f\u305a\u3002","\u30a2\u30df\u30e5\u30fc\u30ba\u30e1\u30f3\u30c8\u65bd\u8a2d \u2015\u2015 \u30ab\u30e9\u30aa\u30b1\u3001\u30dc\u30fc\u30ea\u30f3\u30b0\u3001\u30b2\u30fc\u30e0\u30bb\u30f3\u30bf\u30fc\u306a\u3069\u306e\u5a2f\u697d\u65bd\u8a2d\u3002\u904a\u3079\u3070\u4eba\u3068\u306a\u308a\u304c\u308f\u304b\u308b\u3002\u624b\u3063\u53d6\u308a\u65e9\u304f\u3044\u3053\u3046\u3002"],["\u304a\u796d\u308a \u2015\u2015 \u8001\u82e5\u7537\u5973\u304c\u53c2\u52a0\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3002\u975e\u65e5\u5e38\u7684\u306a\u7a7a\u6c17\u3092\u697d\u3057\u3080\u3053\u3068\u3067\u3001\u6c17\u5206\u8ee2\u63db\u3082\u3067\u304d\u308b\u3060\u308d\u3046\u3002","\u663c\u9593\u306e\u516c\u5712 \u2015\u2015 \u6563\u6b69\u3059\u308b\u4eba\u3084\u5b50\u9023\u308c\u306e\u5bb6\u65cf\u3067\u6ea2\u308c\u308b\u516c\u5712\u3002\u50d5\u3089\u306b\u3082\u3042\u3042\u3084\u3063\u3066\u751f\u304d\u308b\u9053\u304c\u3042\u3063\u305f\u306e\u3060\u308d\u3046\u304b\u3002","\u601d\u3044\u51fa\u306e\u5834\u6240 \u2015\u2015 \u81ea\u5206\u306b\u3068\u3063\u3066\u601d\u3044\u5165\u308c\u306e\u3042\u308b\u5927\u4e8b\u306a\u5834\u6240\u3002\u3053\u306e\u4eba\u306b\u306a\u3089\u80f8\u306e\u5185\u3092\u660e\u304b\u3057\u3066\u3082\u3044\u3044\u6c17\u5206\u306b\u306a\u3063\u305f\u3002","\u30b9\u30dd\u30fc\u30c4\u89b3\u6226 \u2015\u2015 \u91ce\u7403\u3001\u30b5\u30c3\u30ab\u30fc\u3001\u30d0\u30b9\u30b1\u306a\u3069\u3002\u30d7\u30ed\u30a2\u30de\u554f\u308f\u305a\u89b3\u6226\u3059\u308b\u3002\u624b\u306b\u6c57\u63e1\u308b\u5c55\u958b\u3092\u5171\u306b\u898b\u5c4a\u3051\u3088\u3046\u3002","\u5c4b\u4e0a \u2015\u2015 \u8857\u3068\u4eba\u3092\u898b\u4e0b\u308d\u3059\u773a\u3081\u306e\u3044\u3044\u5834\u6240\u3002\u3053\u306e\u666f\u8272\u3092\u541b\u306f\u559c\u3076\u3060\u308d\u3046\u304b\u3001\u6016\u304c\u308b\u3060\u308d\u3046\u304b\u3002","\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 \u2015\u2015 \u5927\u578b\u5546\u696d\u65bd\u8a2d\u3084\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30b9\u30c8\u30ea\u30fc\u30c8\u306b\u5411\u304b\u3046\u3002\u4e92\u3044\u306e\u8208\u5473\u304c\u3042\u308b\u3082\u306e\u3092\u77e5\u308b\u3044\u3044\u6a5f\u4f1a\u3060\u3002"]),Contact:g(_("DiceTable"),"Table").$new("\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868","1D6",["\u4f53\u52e2\u3092\u5d29\u3059 \u2015\u2015 \u8ee2\u3073\u305d\u3046\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3092\u652f\u3048\u308b\u3001\u652f\u3048\u3089\u308c\u308b\u3002","\u4ed8\u7740\u7269\u3092\u3068\u308b \u2015\u2015 \u9aea\u3084\u670d\u306b\u3064\u3044\u3066\u3044\u308b\u30b4\u30df\u3001\u6c5a\u308c\u3092\u3068\u3063\u3066\u3042\u3052\u308b\u3002","\u601d\u308f\u305a\u624b\u304c\u51fa\u308b \u2015\u2015 \u8a00\u8449\u3088\u308a\u5148\u306b\u3001\u5f37\u3081\u306b\u624b\u304c\u51fa\u3066\u3057\u307e\u3046\u3002","\u7269\u3054\u3057\u306b\u89e6\u308c\u308b \u2015\u2015 \u7269\u3092\u6e21\u3059\u3001\u62fe\u3046\u969b\u306b\u6307\u5148\u540c\u58eb\u304c\u3076\u3064\u304b\u308b\u3002","\u53cb\u597d\u306e\u30b5\u30a4\u30f3 \u2015\u2015 \u80a9\u3092\u7d44\u3080\u3001\u63e1\u624b\u3092\u3059\u308b\u3001\u30cf\u30b0\u3092\u3059\u308b\u306a\u3069\u3002","\u30b1\u30a2\u3092\u3057\u3066\u3042\u3052\u308b \u2015\u2015 \u9aea\u3092\u3068\u304b\u3059\u3001\u80a9\u3092\u3082\u3080\u3001\u982d\u3092\u64ab\u3067\u308b\u3002\u76f8\u624b\u3092\u52b4\u3063\u3066\u3059\u308b\u884c\u70ba\u5168\u822c\u3002"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),c(h[0],"TABLES",_("CATALYST_TABLES").$merge(_("ARTICLE_TABLES")).$merge(_("DRAMA_SEQUENCE_TABLES"))),p=w(_("CATALYST_TABLES").$keys(),"map",[],function(T){return null==T&&(T=R),[T["$[]"](0,4),T]}).$to_h(),u=w(_("ARTICLE_TABLES").$keys(),"map",[],function(T){return null==T&&(T=R),[j(T["$[]"](0,2),T["$[]"](-1)),T]}).$to_h(),y=w(_("DRAMA_SEQUENCE_TABLES").$keys(),"map",[],function(T){return null==T&&(T=R),[T["$[]"](0,3),T]}).$to_h(),c(h[0],"ALIAS",p.$merge(u).$merge(y).$freeze()),l.$register_prefix(_("ALIAS").$keys(),_("TABLES").$keys())})}}]);