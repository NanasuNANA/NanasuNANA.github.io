(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{VjH8:function(n,e,i){i("pQ1d"),Opal.modules["bcdice/game_system/beginning_idol/chain_table"]=function(n){var e=[],i=n.nil,t=n.$$,l=n.module,a=n.klass,o=n.truthy,r=n.send;return function(e,$){var s=[l(e,"BCDice")].concat($);!function(e,$){var s=[l(e,"GameSystem")].concat($);!function(e,l,$){var s=[a(e,l,"BeginningIdol")].concat($);!function(e,l,$){var s,c,u=a(e,null,"ChainTable"),b=[u].concat($);u.$$prototype.times=u.$$prototype.sides=u.$$prototype.items=u.$$prototype.name=i,n.def(u,"$initialize",s=function(n,e,l){var a=i;return this.name=n,this.items=l.$freeze(),a=/^(\d+)D(\d+)$/i.$match(e),o(a)||this.$raise(t(b,"ArgumentError"),"Unexpected table type: "+e),this.times=a["$[]"](1).$to_i(),this.sides=a["$[]"](2).$to_i()},s.$$arity=3),n.def(u,"$roll",c=function(n){var e,t,l,a,$,s,c;return t=n.$roll_sum(this.times,this.sides),s=this.times,c="number"==typeof($=t)&&"number"==typeof s?$-s:$["$-"](s),l=this.items["$[]"](c),a=r(l,"map",[],(e=function(e){return null==e&&(e=i),o(e["$respond_to?"]("roll"))?e.$roll(n):e},e.$$s=this,e.$$arity=1,e)).$join("\n"),this.name+"("+t+") \uff1e "+a},c.$$arity=1)}(s[0],0,s)}(s[0],t(s,"Base"),s)}(s[0],s)}(e[0],e)},Opal.modules["bcdice/game_system/beginning_idol/chain_d66_table"]=function(n){var e=[],i=n.nil,t=n.$$,l=n.module,a=n.klass,o=n.send,r=n.truthy;return function(e,$){var s=[l(e,"BCDice")].concat($);!function(e,$){var s=[l(e,"GameSystem")].concat($);!function(e,t,l){var $=[a(e,t,"BeginningIdol")].concat(l);!function(e,t,l){var $,s,c=a(e,null,"ChainD66Table");[c].concat(l),c.$$prototype.items=c.$$prototype.name=i,n.def(c,"$initialize",$=function(n,e){return this.name=n,this.items=e.$freeze()},$.$$arity=2),n.def(c,"$roll",s=function(n){var e,t,l,a,$=i,s=i;return s=function(n,e){return"number"==typeof n&&"number"==typeof e?n+e:n["$+"](e)}("number"==typeof(a=($=n.$roll_barabara(2,6).$sort())["$[]"](0))?10*a:a["$*"](10),$["$[]"](1)),t=this.items["$[]"](s.$to_s()),l=o(t,"map",[],(e=function(e){return null==e&&(e=i),r(e["$respond_to?"]("roll"))?e.$roll(n):e},e.$$s=this,e.$$arity=1,e)).$join("\n"),this.name+"("+s+") \uff1e "+l},s.$$arity=1)}($[0],0,$)}(s[0],t(s,"Base"),s)}(s[0],s)}(e[0],e)},Opal.modules["bcdice/game_system/beginning_idol/bad_status_table"]=function(n){var e=[],i=n.nil,t=n.$$,l=n.module,a=n.klass,o=n.truthy,r=n.send,$=n.hash2;return function(e,s){var c=[l(e,"BCDice")].concat(s);!function(e,s){var c=[l(e,"GameSystem")].concat(s);!function(e,l,s){var c=[a(e,l,"BeginningIdol")].concat(s);!function(e,l,s){var c,u,b,m=a(e,null,"BadStatusTable"),_=[m].concat(s);m.$$prototype.locale=i,n.def(m,"$initialize",c=function(n){return this.locale=n},c.$$arity=1),n.def(m,"$roll_command",u=function(n,e){var t,l,a=i,$=i;return a=/^BT(\d+)?$/.$match(e),o(a)?(l=o($=(t=a["$[]"](1))===i||null==t?i:r(t,"to_i",[]))?$:1,this.$roll(n,l)):i},u.$$arity=2),n.def(m,"$roll",b=function(n,e){var l,a,s,c,u,b=i,m=i,d=i,g=i;return null==e&&(e=1),o("number"==typeof(u=e)?u<=0:u["$<="](0))?i:(a=t(_,"I18n").$t("BeginningIdol.BT.name",$(["locale"],{locale:this.locale})),b=t(_,"I18n").$t("BeginningIdol.BT.items",$(["locale"],{locale:this.locale})),s=t(_,"I18n").$t("BeginningIdol.BT.prefix_format",$(["locale"],{locale:this.locale})),d=(m=n.$roll_barabara(e,6).$sort()).$uniq(),o(function(n,e){return"number"==typeof n?n>1:n["$>"](1)}(d.$size()))&&(g=function(n,e){return n["$+"]("\n")}(this.$format(s,$(["count_bad_status"],{count_bad_status:d.$size()})))),c=r(d,"map",[],(l=function(n){return null==n&&(n=i),b["$[]"](function(n,e){return"number"==typeof n?n-1:n["$-"](1)}(n))},l.$$s=this,l.$$arity=1,l)).$join("\n"),a+" \uff1e ["+m.$join(",")+"] \uff1e "+g+c)},b.$$arity=-2)}(c[0],0,c)}(c[0],t(c,"Base"),c)}(c[0],c)}(e[0],e)},Opal.modules["bcdice/game_system/beginning_idol/random_event_table"]=function(n){var e=[],i=n.nil,t=n.$$$,l=n.$$,a=n.module,o=n.klass,r=n.truthy,$=n.hash2;return function(e,s){var c=[a(e,"BCDice")].concat(s);!function(e,s){var c=[a(e,"GameSystem")].concat(s);!function(e,a,s){var c=[o(e,a,"BeginningIdol")].concat(s);!function(e,a,s){var c,u,b=o(e,null,"RandomEventTable"),m=[b].concat(s);b.$$prototype.locale=i,n.def(b,"$initialize",c=function(n){return this.locale=n},c.$$arity=1),n.def(b,"$roll",u=function(n){var e,a,o,s=i,c=i,u=i,b=i;return s=n.$roll_once(6),c=n.$roll_d66(t(l(m,"D66SortType"),"NO_SORT")),e=r(s["$even?"]())?"BeginningIdol.RE.on_event":"BeginningIdol.RE.off_event",u=l(m,"I18n").$t(e,$(["locale"],{locale:this.locale})),a=l(m,"I18n").$t("BeginningIdol.RE.name",$(["locale"],{locale:this.locale})),o=l(m,"I18n").$t("BeginningIdol.RE.format",$(["locale"],{locale:this.locale})),b=u["$[]"]("items")["$[]"](c.$to_s()),a+" \uff1e (1D6) \uff1e "+s+"\n"+u["$[]"]("name")+" \uff1e ["+c+"] \uff1e "+this.$format(o,$(["event","page"],{event:b["$[]"](0),page:b["$[]"](1)}))},u.$$arity=1)}(c[0],0,c)}(c[0],l(c,"Base"),c)}(c[0],c)}(e[0],e)},Opal.modules["bcdice/game_system/beginning_idol/my_skill_name_table"]=function(n){function e(n,e){return"number"==typeof n&&"number"==typeof e?n-e:n["$-"](e)}var i=[],t=n.nil,l=n.$$$,a=n.$$,o=n.module,r=n.klass,$=n.send,s=n.hash2;return function(i,c){var u=[o(i,"BCDice")].concat(c);!function(i,c){var u=[o(i,"GameSystem")].concat(c);!function(i,o,c){var u=[r(i,o,"BeginningIdol")].concat(c);!function(i,o,c){var u,b,m=r(i,null,"MySkillNameTable"),_=[m].concat(c);m.$$prototype.chains=m.$$prototype.locale=t,n.def(m,"$initialize",u=function(n){var e=t,i=t,o=t,r=t,$=t;return this.locale=n,e=l(a(_,"DiceTable"),"Table").$from_i18n("BeginningIdol.MS.subtables.article",n),i=l(a(_,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.describe",n),o=l(a(_,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.scene",n),r=l(a(_,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.material",n),$=l(a(_,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.action",n),this.chains=[[i,o,r],[i,o,$],[i,r,$],[o,r,$],[i,o,e],[r,$,e]].$freeze()},u.$$arity=1),n.def(m,"$roll",b=function(i){var l,o,r,c,u,b,m=t,d=t;return r=i.$roll_once(6),c=$(this.chains["$[]"](e(r,1)),"map",[],((l=function(n){return null==n&&(n=t),n.$roll(i)}).$$s=this,l.$$arity=1,l)),m=$(c,"map",[],((o=function(n){var e,i;return null==n&&(n=t),e=n.$table_name(),i=n.$value().$to_s(),"number"==typeof e&&"number"==typeof i?e+i:e["$+"](i)}).$$s=this,o.$$arity=1,o)),u=a(_,"I18n").$t("BeginningIdol.MS.name",s(["locale"],{locale:this.locale})),d=a(_,"I18n").$t("BeginningIdol.MS.formats",s(["locale"],{locale:this.locale}))["$[]"](e(r,1)),b=$(this,"format",[d].concat(n.to_a($(c,"map",[],"body".$to_proc())))),u+" \uff1e ["+r+","+m.$join(",")+"] \uff1e "+b},b.$$arity=1)}(u[0],0,u)}(u[0],a(u,"Base"),u)}(u[0],u)}(i[0],i)},Opal.modules["bcdice/game_system/beginning_idol/d6_twice_table"]=function(n){function e(n,e){return"number"==typeof n&&"number"==typeof e?n-e:n["$-"](e)}var i=[],t=n.nil,l=n.$$,a=n.module,o=n.klass,r=n.hash2;return function(i,$){var s=[a(i,"BCDice")].concat($);!function(i,$){var s=[a(i,"GameSystem")].concat($);!function(i,a,$){var s=[o(i,a,"BeginningIdol")].concat($);!function(i,a,$){var s,c,u,b=o(i,null,"D6TwiceTable"),m=[b].concat($);b.$$prototype.items1=b.$$prototype.items2=b.$$prototype.name=t,n.defs(b,"$from_i18n",s=function(n,e){var i=t;return i=l(m,"I18n").$t(n,r(["locale"],{locale:e})),this.$new(i["$[]"]("name"),i["$[]"]("items1"),i["$[]"]("items2"))},s.$$arity=2),n.def(b,"$initialize",c=function(n,e,i){return this.name=n,this.items1=e,this.items2=i},c.$$arity=3),n.def(b,"$roll",u=function(i){var l,a,o,r,$,s;return a=i.$roll_barabara(2,6),r=null==(l=n.to_ary(a))[1]?t:l[1],$=this.items1["$[]"](e(o=null==l[0]?t:l[0],1)),s=this.items2["$[]"](e(r,1)),this.name+"["+o+","+r+"] \uff1e "+$+s},u.$$arity=1)}(s[0],0,s)}(s[0],l(s,"Base"),s)}(s[0],s)}(i[0],i)},Opal.modules["bcdice/game_system/beginning_idol/item_table"]=function(n){var e=[],i=n.nil,t=n.$$,l=n.module,a=n.klass,o=n.truthy,r=n.send,$=n.hash2;return function(e,s){var c=[l(e,"BCDice")].concat(s);!function(e,s){var c=[l(e,"GameSystem")].concat(s);!function(e,l,s){var c=[a(e,l,"BeginningIdol")].concat(s);!function(e,l,s){var c,u,b,m=a(e,null,"ItemTable"),_=[m].concat(s);m.$$prototype.locale=i,n.def(m,"$initialize",c=function(n){return this.locale=n},c.$$arity=1),n.def(m,"$roll_command",u=function(n,e){var t,l,a=i,$=i;return a=/^IT(\d+)?$/.$match(e),o(a)?(l=o($=(t=a["$[]"](1))===i||null==t?i:r(t,"to_i",[]))?$:1,this.$roll(n,l)):i},u.$$arity=2),n.def(m,"$roll",b=function(n,e){var l,a=i,s=i,c=i,u=i;return null==e&&(e=1),e["$=="](0)?i:(a=t(_,"I18n").$t("BeginningIdol.item_table",$(["locale"],{locale:this.locale})),s=n.$roll_barabara(e,6).$sort(),c=r(s,"group_by",[],"itself".$to_proc()),u=r(c,"map",[],((l=function(n,e){var t,r=null==l.$$s?this:l.$$s,u=i;return null==n&&(n=i),null==e&&(e=i),u=a["$[]"]("items")["$[]"]("number"==typeof(t=n)?t-1:t["$-"](1)),o(c.$size()["$!="](1))&&(u=r.$format(a["$[]"]("emph"),$(["item"],{item:u}))),s.$size()["$=="](c.$size())?u:r.$format(a["$[]"]("counting"),$(["item","count"],{item:u,count:e.$size()}))}).$$s=this,l.$$arity=2,l)),a["$[]"]("name")+" \uff1e ["+s.$join(",")+"] \uff1e "+u.$join(a["$[]"]("sep")))},b.$$arity=-2)}(c[0],0,c)}(c[0],t(c,"Base"),c)}(c[0],c)}(e[0],e)},Opal.modules["bcdice/game_system/beginning_idol/costume_table"]=function(n){var e=[],i=n.nil,t=n.$$$,l=n.$$,a=n.module,o=n.klass,r=n.hash2,$=n.send;return function(e,s){var c=[a(e,"BCDice")].concat(s);!function(e,s){var c=[a(e,"GameSystem")].concat(s);!function(e,a,s){var c=[o(e,a,"BeginningIdol")].concat(s);!function(e,a,s){var c,u,b,m,_=o(e,null,"CostumeTable"),d=[_].concat(s);_.$$prototype.name=_.$$prototype.items=i,n.defs(_,"$from_i18n",c=function(n,e){var t=i;return t=l(d,"I18n").$t(n,r(["locale"],{locale:e})),this.$new(t["$[]"]("name"),t["$[]"]("items"))},c.$$arity=2),n.def(_,"$initialize",u=function(n,e){return this.name=n,this.items=e},u.$$arity=2),n.def(_,"$roll",b=function(n){var e=i;return e=n.$roll_d66(t(l(d,"D66SortType"),"ASC")),this.name+"("+e+") \uff1e "+this.items["$[]"](e.$to_s())},b.$$arity=1),n.def(_,"$brand_only",m=function(){var n;return t(l(d,"DiceTable"),"D66Table").$new(this.name,t(l(d,"D66SortType"),"ASC"),$(this.items,"transform_values",[],((n=function(n){return null==n&&(n=i),n.$split("\n").$first()}).$$s=this,n.$$arity=1,n)))},m.$$arity=0)}(c[0],0,c)}(c[0],l(c,"Base"),c)}(c[0],c)}(e[0],e)},Opal.modules["bcdice/game_system/beginning_idol/accessories_table"]=function(n){var e=[],i=n.nil,t=n.$$$,l=n.$$,a=n.module,o=n.klass,r=n.hash2;return function(e,$){var s=[a(e,"BCDice")].concat($);!function(e,$){var s=[a(e,"GameSystem")].concat($);!function(e,a,$){var s=o(e,a,"BeginningIdol"),c=[s].concat($);!function(e,a){var o,$=[e].concat(a);e.$private(),n.def(e,"$translate_accessories_table",o=function(n){var e,a=i;return a=l($,"I18n").$t("BeginningIdol.ACT.items",r(["locale"],{locale:n})),e=[t(l($,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.head",n),t(l($,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.hat",n),t(l($,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.body",n),t(l($,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.arm",n),t(l($,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.foot",n),t(l($,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.other",n)],l($,"ChainTable").$new(l($,"I18n").$t("BeginningIdol.ACT.name",r(["locale"],{locale:n})),"1D6",a.$zip(e))},o.$$arity=1)}(n.get_singleton_class(s),c)}(s[0],l(s,"Base"),s)}(s[0],s)}(e[0],e)},Opal.modules["bcdice/game_system/beginning_idol/with_abnormality"]=function(n){var e=[],i=n.nil,t=n.$$$,l=n.$$,a=n.module,o=n.klass,r=n.hash2,$=n.truthy,s=n.send,c=n.send2;return function(e,u){var b=[a(e,"BCDice")].concat(u);!function(e,u){var b=[a(e,"GameSystem")].concat(u);!function(e,u,b){var m=[o(e,u,"BeginningIdol")].concat(b);(function(e,o){var c,u,b=a(e,"WithAbnormality"),m=[b].concat(o);n.def(b,"$replace_abnormality",c=function(n,e){var a,o,s,c=i,u=i;return null==this.locale&&(this.locale=i),null==this.bad_status_table&&(this.bad_status_table=i),u=(c=l(m,"Regexp").$new(l(m,"I18n").$t("BeginningIdol.abnormality.regexp",r(["locale"],{locale:this.locale})))).$match(n.$body()),$(u)?(a=this.$kanji_to_i(u["$[]"](1)),$(a)?(o=this.bad_status_table.$roll(e,a),s=n.$body().$sub(c,o),t(l(m,"DiceTable"),"RollResult").$new(n.$table_name(),n.$value(),s)):n):n},c.$$arity=2),n.def(b,"$kanji_to_i",u=function(n){var e;return null==this.locale&&(this.locale=i),(e=l(m,"I18n").$t("BeginningIdol.abnormality.num_map",r(["locale"],{locale:this.locale})).$find_index(n))===i||null==e?i:s(e,"succ",[])},u.$$arity=1)})(m[0],m),function(e,t,a){var $,s,u,b=o(e,t,"D66WithAbnormality"),m=[b].concat(a);b.$include(l(m,"WithAbnormality")),n.defs(b,"$from_i18n",$=function(n,e,t){var a,o=i;return o=l(m,"I18n").$t(n,r(["locale"],{locale:t})),a=l(m,"D66SortType").$const_get(o["$[]"]("d66_sort_type")),this.$new(o["$[]"]("name"),a,o["$[]"]("items"),e,t)},$.$$arity=3),n.def(b,"$initialize",s=function(e,i,t,l,a){return s.$$p&&(s.$$p=null),c(this,n.find_super_dispatcher(this,"initialize",s,!1,!0),"initialize",[e,i,t],null),this.bad_status_table=l,this.locale=a},s.$$arity=5),n.def(b,"$roll",u=function(e){var i;return u.$$p&&(u.$$p=null),i=c(this,n.find_super_dispatcher(this,"roll",u,!1,!0),"roll",[e],null),this.$replace_abnormality(i,e)},u.$$arity=1)}(m[0],t(l(m,"DiceTable"),"D66Table"),m),function(e,t,a){var $,s,u,b=o(e,t,"TableWithAbnormality"),m=[b].concat(a);b.$include(l(m,"WithAbnormality")),n.defs(b,"$from_i18n",$=function(n,e,t){var a=i;return a=l(m,"I18n").$t(n,r(["locale"],{locale:t})),this.$new(a["$[]"]("name"),a["$[]"]("type"),a["$[]"]("items"),e,t)},$.$$arity=3),n.def(b,"$initialize",s=function(e,i,t,l,a){return s.$$p&&(s.$$p=null),c(this,n.find_super_dispatcher(this,"initialize",s,!1,!0),"initialize",[e,i,t],null),this.bad_status_table=l,this.locale=a},s.$$arity=5),n.def(b,"$roll",u=function(e){var i;return u.$$p&&(u.$$p=null),i=c(this,n.find_super_dispatcher(this,"roll",u,!1,!0),"roll",[e],null),this.$replace_abnormality(i,e)},u.$$arity=1)}(m[0],t(l(m,"DiceTable"),"Table"),m)}(b[0],l(b,"Base"),b)}(b[0],b)}(e[0],e)},Opal.modules["bcdice/game_system/beginning_idol/work_table"]=function(n){var e=[],i=n.nil,t=n.$$$,l=n.$$,a=n.module,o=n.klass,r=n.hash2,$=n.send2,s=n.truthy,c=n.send;return function(e,u){var b=[a(e,"BCDice")].concat(u);!function(e,u){var b=[a(e,"GameSystem")].concat(u);!function(e,a,u){var b=o(e,a,"BeginningIdol"),m=[b].concat(u);(function(e,a,u){var b,m,_,d,g=o(e,a,"WorkWithChanceTable"),f=[g].concat(u);g.$$prototype.regexp=g.$$prototype.off=i,n.defs(g,"$from_i18n",b=function(n,e){var t,a=i;return a=l(f,"I18n").$t(n,r(["locale"],{locale:e})),t=l(f,"D66SortType").$const_get(a["$[]"]("d66_sort_type")),this.$new(a["$[]"]("name"),t,a["$[]"]("items"),e)},b.$$arity=2),n.def(g,"$initialize",m=function(e,i,t,a){return m.$$p&&(m.$$p=null),$(this,n.find_super_dispatcher(this,"initialize",m,!1,!0),"initialize",[e,i,t],null),this.regexp=l(f,"Regexp").$new(l(f,"I18n").$t("BeginningIdol.with_chance.regexp",r(["locale"],{locale:a}))),this.off=l(f,"I18n").$t("BeginningIdol.with_chance.off_text",r(["locale"],{locale:a}))},m.$$arity=4),n.def(g,"$roll_command",_=function(n,e){var t,l=i;return l=/^LO([1-6]{1,2})?$/.$match(e),s(l)?this.$roll(n,(t=l["$[]"](1))===i||null==t?i:c(t,"to_i",[])):i},_.$$arity=2),n.def(g,"$roll",d=function(e,a){var o,r,c=i,u=i,b=i;return d.$$p&&(d.$$p=null),null==a&&(a=i),c=$(this,n.find_super_dispatcher(this,"roll",d,!1,!0),"roll",[e],null),s(a)?(u=this.regexp.$match(c.$body()),s(s(b=u)?(r=a,"number"==typeof(o=u["$[]"](1).$to_i())&&"number"==typeof r?o>=r:o["$>="](r)):b)?t(l(f,"DiceTable"),"RollResult").$new(c.$table_name(),c.$value(),this.off):s(u)?t(l(f,"DiceTable"),"RollResult").$new(c.$table_name(),c.$value(),c.$body().$sub(this.regexp,"")):c):c},d.$$arity=-2)})(m[0],t(l(m,"DiceTable"),"D66Table"),m),function(e,i){var t,a=[e].concat(i);e.$private(),n.def(e,"$translate_local_work_table",t=function(n){return l(a,"WorkWithChanceTable").$from_i18n("BeginningIdol.local_work",n)},t.$$arity=1)}(n.get_singleton_class(b),m),b.$register_prefix("LO")}(b[0],l(b,"Base"),b)}(b[0],b)}(e[0],e)},Opal.modules["bcdice/game_system/beginning_idol/skill_table"]=function(n){function e(n,e){return"number"==typeof n&&"number"==typeof e?n+e:n["$+"](e)}var i=[],t=n.nil,l=n.$$$,a=n.$$,o=n.module,r=n.klass,$=n.hash2,s=n.send2,c=n.truthy,u=n.send;return function(i,b){var m=[o(i,"BCDice")].concat(b);!function(i,b){var m=[o(i,"GameSystem")].concat(b);!function(i,o,b){var m=[r(i,o,"BeginningIdol")].concat(b);(function(e,i,t){var l,a=r(e,i,"SkillTable");[a].concat(t),n.def(a,"$roll",l=function(n){return this.$roll_command(n,"RTT")},l.$$arity=1)})(m[0],l(a(m,"DiceTable"),"SaiFicSkillTable"),m),function(i,o,b){var m,_,d,g=r(i,o,"SkillGetTable"),f=[g].concat(b);g.$$prototype.reroll_reg=t,n.defs(g,"$from_i18n",m=function(n,e,i){var l=t;return l=a(f,"I18n").$t(n,$(["locale"],{locale:i})),this.$new(l["$[]"]("name"),l["$[]"]("type"),l["$[]"]("items"),e,i)},m.$$arity=3),n.def(g,"$initialize",_=function(e,i,l,o,r){var c=t;return _.$$p&&(_.$$p=null),s(this,n.find_super_dispatcher(this,"initialize",_,!1,!0),"initialize",[e,i,l],null),this.skill_table=o,c=a(f,"I18n").$t("BeginningIdol.skill_get_table",$(["locale"],{locale:r})),this.reroll_reg=a(f,"Regexp").$new(c["$[]"]("reroll_reg")),this.reroll=c["$[]"]("reroll"),this.secondary_name=c["$[]"]("secondary_name")},_.$$arity=5),n.def(g,"$roll",d=function(i){var o,r=this,$=t,b=t,m=t,_=t;return d.$$p&&(d.$$p=null),$=s(r,n.find_super_dispatcher(r,"roll",d,!1,!0),"roll",[i],null),b=r.reroll_reg.$match($.$body()),c(b)?(m=b.$captures(),_=e($.$body(),"\n"),function(){var l=n.new_brk();try{u(r,"loop",[],((o=function(){var a=null==o.$$s?this:o.$$s,r=t;return null==a.skill_table&&(a.skill_table=t),null==a.secondary_name&&(a.secondary_name=t),null==a.reroll&&(a.reroll=t),r=a.skill_table.$roll_skill(i),_=e(_,a.secondary_name+" \uff1e ["+r.$category_dice()+","+r.$row_dice()+"] \uff1e "+r),c(m["$include?"](r.$category_name()))||n.brk(t,l),_=e(_," \uff1e "+a.reroll+"\n")}).$$s=r,o.$$brk=l,o.$$arity=0,o))}catch(a){if(a===l)return a.$v;throw a}}(),l(a(f,"DiceTable"),"RollResult").$new($.$table_name(),$.$value(),_)):$},d.$$arity=1)}(m[0],l(a(m,"DiceTable"),"Table"),m),function(e,i,l){var a,o,$=r(e,null,"SkillHometown");[$].concat(l),$.$$prototype.skill_name=t,n.def($,"$initialize",a=function(n){return this.skill_name=n},a.$$arity=1),n.def($,"$roll",o=function(n){return this.skill_name.$roll_command(n,"AT6")},o.$$arity=1)}(m[0],0,m)}(m[0],a(m,"Base"),m)}(m[0],m)}(i[0],i)},Opal.modules["bcdice/game_system/beginning_idol/table"]=function(n){var e=n.top,i=[],t=n.nil,l=n.$$$,a=n.$$,o=n.module,r=n.klass,$=n.hash2,s=n.send,c=n.truthy;return e.$require("bcdice/game_system/beginning_idol/chain_table"),e.$require("bcdice/game_system/beginning_idol/chain_d66_table"),e.$require("bcdice/game_system/beginning_idol/bad_status_table"),e.$require("bcdice/game_system/beginning_idol/random_event_table"),e.$require("bcdice/game_system/beginning_idol/my_skill_name_table"),e.$require("bcdice/game_system/beginning_idol/d6_twice_table"),e.$require("bcdice/game_system/beginning_idol/item_table"),e.$require("bcdice/game_system/beginning_idol/costume_table"),e.$require("bcdice/game_system/beginning_idol/accessories_table"),e.$require("bcdice/game_system/beginning_idol/with_abnormality"),e.$require("bcdice/game_system/beginning_idol/work_table"),e.$require("bcdice/game_system/beginning_idol/skill_table"),function(e,i){var u=[o(e,"BCDice")].concat(i);!function(e,i){var u=[o(e,"GameSystem")].concat(i);!function(e,i,o){var u=r(e,i,"BeginningIdol"),b=[u].concat(o);(function(e,i){var o,r,u=[e].concat(i);e.$private(),n.def(e,"$translate_skill_table",o=function(n){return a(u,"SkillTable").$from_i18n("BeginningIdol.skill_table",n,$(["rtt","rttn"],{rtt:"AT",rttn:["AT1","AT2","AT3","AT4","AT5","AT6"]}))},o.$$arity=1),n.def(e,"$translate_tables",r=function(e){var i,o,r,b,m,_,d,g,f,T,h,B,y,I,p=t,D=t,v=t,S=t;return p=a(u,"CostumeTable").$from_i18n("BeginningIdol.tables.DT",e),D=a(u,"CostumeTable").$from_i18n("BeginningIdol.tables.RC",e),v=a(u,"CostumeTable").$from_i18n("BeginningIdol.tables.FC",e),b=a(u,"ChainTable").$new(a(u,"I18n").$t("BeginningIdol.ACB.name",$(["locale"],{locale:e})),"1D6",[[a(u,"I18n").$t("BeginningIdol.ACB.items.challenge_girls",$(["locale"],{locale:e})),p.$brand_only()],[a(u,"I18n").$t("BeginningIdol.ACB.items.challenge_girls",$(["locale"],{locale:e})),p.$brand_only()],[a(u,"I18n").$t("BeginningIdol.ACB.items.road_to_prince",$(["locale"],{locale:e})),D.$brand_only()],[a(u,"I18n").$t("BeginningIdol.ACB.items.road_to_prince",$(["locale"],{locale:e})),D.$brand_only()],[a(u,"I18n").$t("BeginningIdol.ACB.items.fortune_stars",$(["locale"],{locale:e})),v.$brand_only()],[a(u,"I18n").$t("BeginningIdol.ACB.items.fortune_stars",$(["locale"],{locale:e})),v.$brand_only()]]),m=a(u,"BadStatusTable").$new(e),_=this.$translate_skill_table(e),d=l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.rare_skill_table",e),g=a(u,"ItemTable").$new(e),f=a(u,"ChainTable").$new(a(u,"I18n").$t("BeginningIdol.TN.name",$(["locale"],{locale:e})),"1D6",s(a(u,"I18n").$t("BeginningIdol.TN.items",$(["locale"],{locale:e})).$dup(),"tap",[],((i=function(n){return null==n&&(n=t),n["$[]"](3).$push(_)}).$$s=this,i.$$arity=1,i))),T=a(u,"ChainTable").$new(a(u,"I18n").$t("BeginningIdol.CG.name",$(["locale"],{locale:e})),"1D6",s(a(u,"I18n").$t("BeginningIdol.CG.items",$(["locale"],{locale:e})).$map(),"with_index",[],((o=function(n,e){return null==n&&(n=t),null==e&&(e=t),c([3,4]["$include?"](e))?[n,g]:[n]}).$$s=this,o.$$arity=2,o))),h=a(u,"ChainD66Table").$new(a(u,"I18n").$t("BeginningIdol.GG.name",$(["locale"],{locale:e})),s(a(u,"I18n").$t("BeginningIdol.GG.items",$(["locale"],{locale:e})),"to_h",[],((r=function(n,e){var i;return null==n&&(n=t),null==e&&(e=t),i=c(["23","24","25"]["$include?"](n))?[e,d]:n["$=="]("56")?[e,g]:[e],[n,i]}).$$s=this,r.$$arity=2,r))),B=["22",[(S=a(u,"I18n").$t("BeginningIdol.HA.items",$(["locale"],{locale:e})))["$[]"]("22"),a(u,"SkillHometown").$new(_)].$flatten()],s(S,"[]=",n.to_a(B)),"number"==typeof(I=B.length)||I["$-"](1),y=a(u,"ChainD66Table").$new(a(u,"I18n").$t("BeginningIdol.HA.name",$(["locale"],{locale:e})),S),$(["DT","RC","FC","ACB","TN","CG","GG","HA","CBT","RCB","HBT","RHB","RU","SIP","BU","HW","FL","MSE","ST","FST","BWT","LWT","TWT","CWT","SU","WI","NA","GA","BA","WT","VA","MU","DR","VI","SP","CHR","PAR","SW","AN","MOV","FA","BVT","LVT","TVT","CVT","BST","LST","TST","CST","BPT","LPT","TPT","CPT","BIT","LIT","TIT","CIT","CHO","SCH","WCH","NCH","GCH","PCH","LUR","SUR","WUR","NUR","GUR","BUR","ACE","ACT","MS","RE","SH","MO","SEA","SPA","LN","SGT","RS"],{DT:p,RC:D,FC:v,ACB:b,TN:f,CG:T,GG:h,HA:y,CBT:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CBT",e),RCB:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.RCB",e),HBT:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.HBT",e),RHB:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.RHB",e),RU:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.RU",e),SIP:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.SIP",e),BU:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BU",e),HW:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.HW",e),FL:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.FL",e),MSE:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.MSE",e),ST:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.ST",e),FST:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.FST",e),BWT:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.BWT",e),LWT:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.LWT",e),TWT:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.TWT",e),CWT:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CWT",e),SU:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SU",e),WI:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.WI",e),NA:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.NA",e),GA:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.GA",e),BA:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.BA",e),WT:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.WT",e),VA:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.VA",e),MU:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.MU",e),DR:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.DR",e),VI:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.VI",e),SP:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SP",e),CHR:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CHR",e),PAR:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.PAR",e),SW:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SW",e),AN:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.AN",e),MOV:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.MOV",e),FA:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.FA",e),BVT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BVT",e),LVT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LVT",e),TVT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TVT",e),CVT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CVT",e),BST:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BST",e),LST:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LST",e),TST:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TST",e),CST:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CST",e),BPT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BPT",e),LPT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LPT",e),TPT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TPT",e),CPT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CPT",e),BIT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BIT",e),LIT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LIT",e),TIT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TIT",e),CIT:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CIT",e),CHO:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CHO",e),SCH:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.SCH",e),WCH:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.WCH",e),NCH:l(a(u,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.NCH",e),GCH:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.GCH",e),PCH:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.PCH",e),LUR:a(u,"D6TwiceTable").$from_i18n("BeginningIdol.tables.LUR",e),SUR:a(u,"D6TwiceTable").$from_i18n("BeginningIdol.tables.SUR",e),WUR:a(u,"D6TwiceTable").$from_i18n("BeginningIdol.tables.WUR",e),NUR:a(u,"D6TwiceTable").$from_i18n("BeginningIdol.tables.NUR",e),GUR:a(u,"D6TwiceTable").$from_i18n("BeginningIdol.tables.GUR",e),BUR:a(u,"D6TwiceTable").$from_i18n("BeginningIdol.tables.BUR",e),ACE:l(a(u,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.ACE",e),ACT:this.$translate_accessories_table(e),MS:a(u,"MySkillNameTable").$new(e),RE:a(u,"RandomEventTable").$new(e),SH:a(u,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.SH",m,e),MO:a(u,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.MO",m,e),SEA:a(u,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.SEA",m,e),SPA:a(u,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.SPA",m,e),LN:a(u,"TableWithAbnormality").$from_i18n("BeginningIdol.tables.LN",m,e),SGT:a(u,"SkillGetTable").$from_i18n("BeginningIdol.tables.SGT",_,e),RS:a(u,"SkillGetTable").$from_i18n("BeginningIdol.tables.RS",_,e)})},r.$$arity=1)})(n.get_singleton_class(u),b),n.const_set(b[0],"TABLES",u.$translate_tables("ja_jp")),n.const_set(b[0],"BAD_STATUS_TABLE",a(b,"BadStatusTable").$new("ja_jp")),n.const_set(b[0],"LOCAL_WORK_TABLE",u.$translate_local_work_table("ja_jp")),n.const_set(b[0],"ITEM_TABLE",a(b,"ItemTable").$new("ja_jp")),n.const_set(b[0],"SKILL_TABLE",u.$translate_skill_table("ja_jp")),u.$register_prefix(a(b,"TABLES").$keys())}(u[0],a(u,"Base"),u)}(u[0],u)}(i[0],i)},function(n){function e(n,e){return"number"==typeof n&&"number"==typeof e?n<=e:n["$<="](e)}function i(n,e){return"number"==typeof n&&"number"==typeof e?n>=e:n["$>="](e)}function t(n,e){return"number"==typeof n&&"number"==typeof e?n+e:n["$+"](e)}var l=[],a=n.nil,o=n.$$$,r=n.$$,$=n.module,s=n.klass,c=n.send2,u=n.truthy,b=n.send,m=n.hash2;n.top.$require("bcdice/game_system/beginning_idol/table"),function(l,_){var d=[$(l,"BCDice")].concat(_);!function(l,_){var d=[$(l,"GameSystem")].concat(_);!function(l,$,_){var d,g,f,T,h,B,y,I,p,D,v=s(l,$,"BeginningIdol"),S=[v].concat(_);v.$$prototype.randomizer=a,n.const_set(S[0],"ID","BeginningIdol"),n.const_set(S[0],"NAME","\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb"),n.const_set(S[0],"SORT_KEY","\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b"),n.const_set(S[0],"HELP_MESSAGE","\u30fb\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3000[r]PDn[+m/-m](r\uff1a\u5834\u306b\u6b8b\u3063\u305f\u51fa\u76ee\u3000n\uff1a\u632f\u308b\u6570\u3000m\uff1a\u4fee\u6b63\u5024)\n\u30fb\u30ef\u30fc\u30eb\u30c9\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0\u4ed5\u4e8b\u8868\u3000BWT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LWT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\n\u3000TWT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CWT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\u3000LO[n]\uff1a\u5730\u65b9\u30a2\u30a4\u30c9\u30eb(n\uff1a\u30c1\u30e3\u30f3\u30b9)\n\u3000SU\uff1a\u60c5\u71b1\u306e\u590f\u3000WI\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\u3000NA\uff1a\u5927\u81ea\u7136\u3000GA\uff1a\u5973\u5b66\u5712\u3000BA\uff1a\u30a2\u30ab\u30c7\u30df\u30fc\n\u30fb\u4ed5\u4e8b\u8868\u3000WT\u3000VA\uff1a\u30d0\u30e9\u30a8\u30c6\u30a3\u3000MU\uff1a\u97f3\u697d\u95a2\u4fc2\u3000DR\uff1a\u30c9\u30e9\u30de\u95a2\u4fc2\n\u3000VI\uff1a\u30d3\u30b8\u30e5\u30a2\u30eb\u95a2\u4fc2\u3000SP\uff1a\u30b9\u30dd\u30fc\u30c4\u3000CHR\uff1a\u30af\u30ea\u30b9\u30de\u30b9\u3000PAR\uff1a\u30d1\u30fc\u30c8\u30ca\u30fc\u95a2\u4fc2\n\u3000SW\uff1a\u304a\u83d3\u5b50\u3000AN\uff1a\u52d5\u7269\u3000MOV\uff1a\u6620\u753b\u3000FA\uff1a\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\n\u30fb\u30e9\u30f3\u30c0\u30e0\u30a4\u30d9\u30f3\u30c8\u3000RE\n\u30fb\u30cf\u30d7\u30cb\u30f3\u30b0\u8868\u3000HA\n\u30fb\u7279\u6280\u30ea\u30b9\u30c8\u3000AT[n](n\uff1a\u5206\u91ceNo.)\n\u30fb\u30a2\u30a4\u30c9\u30eb\u30b9\u30ad\u30eb\u4fee\u5f97\u8868\u3000SGT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RS\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u5909\u8abf\u3000BT[n](n\uff1a\u767a\u751f\u6570)\n\u30fb\u30a2\u30a4\u30c6\u30e0\u3000IT[n](n\uff1a\u7372\u5f97\u6570)\n\u30fb\u30a2\u30af\u30bb\u30b5\u30ea\u30fc\u3000ACT\uff1a\u7a2e\u5225\u6c7a\u5b9a\u3000ACB\uff1a\u30d6\u30e9\u30f3\u30c9\u6c7a\u5b9a\u3000ACE\uff1a\u52b9\u679c\u8868\n\u30fb\u8863\u88c5\u3000DT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RC\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\u3000FC:\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u30b9\u30bf\u30fc\u30ba\n\u30fb\u7121\u8336\u3076\u308a\u8868\u3000LUR\uff1a\u5730\u65b9\u30a2\u30a4\u30c9\u30eb\u3000SUR\uff1a\u60c5\u71b1\u306e\u590f\u3000WUR\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\n\u3000NUR\uff1a\u5927\u81ea\u7136\u3000GUR\uff1a\u5973\u5b66\u5712\u3000BUR\uff1a\u30a2\u30ab\u30c7\u30df\u30fc\n\u30fb\u30bb\u30f3\u30bf\u30fc\u30eb\u30fc\u30eb\u3000HW\uff1a\u5411\u304b\u3044\u98a8\u30b7\u30fc\u30f3\u8868\u3000FL\uff1a\u99c6\u3051\u51fa\u3057\u30b7\u30fc\u30f3\u8868\u3000LN\uff1a\u5b64\u72ec\u8868\n\u3000\u30de\u30a4\u30b9\u30ad\u30eb\u3010MS\uff1a\u540d\u524d\u6c7a\u5b9a\u3000MSE\uff1a\u52b9\u679c\u8868\u3011\u3000\u6f14\u51fa\u8868\u3010ST\u3000FST\uff1a\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\u3011\n\u30fb\u5408\u5bbf\u30eb\u30fc\u30eb\u3000\u6563\u7b56\u8868\u3010SH\uff1a\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30e2\u30fc\u30eb\u3000MO\uff1a\u5c71\u3000SEA\uff1a\u6d77\u3000SPA\uff1a\u6e29\u6cc9\u8857\u3011\n\u3000TN\uff1a\u591c\u8a9e\u308a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\u3000\u6210\u9577\u8868\u3010CG\uff1a\u30b3\u30e2\u30f3\u3000GG\uff1a\u30b4\u30fc\u30eb\u30c9\u3011\n\u30fb\u30b5\u30d3\u8868\u3000CHO\u3000SCH\uff1a\u60c5\u71b1\u306e\u590f\u3000WCH\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\u3000NCH\uff1a\u5927\u81ea\u7136\n\u3000GCH\uff1a\u5973\u6027\u5411\u3051\u3000PCH\uff1a\u529b\u5f37\u3044\n\u30fb\u30ad\u30e3\u30e9\u7a7a\u767d\u8868\u3000CBT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RCB\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u8da3\u5473\u7a7a\u767d\u8868\u3000HBT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RHB\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u30de\u30b9\u30b3\u30c3\u30c8\u66b4\u8d70\u8868\u3000RU\n\u30fb\u30a2\u30a4\u30c9\u30eb\u71b1\u6e6f\u98a8\u5442\u3000nC\uff1a\u30d0\u30fc\u30b9\u30c8\u30bf\u30a4\u30e0(n\uff1a\u6e29\u5ea6)\u3000BU\uff1a\u30d0\u30fc\u30b9\u30c8\u8868\n\u30fb\u653b\u6483\u3000n[S]A[r][+m/-m](n\uff1a\u632f\u308b\u6570\u3000S\uff1a\u5931\u6557\u3057\u306a\u3044\u3000r\uff1a\u53d6\u308a\u9664\u304f\u51fa\u76ee\u3000m\uff1a\u4fee\u6b63\u5024)\n\u30fb\u304b\u3093\u305f\u3093\u30d1\u30fc\u30bd\u30f3\u8868\u3000SIP\n\u30fb\u4f1a\u5834\u8868\n\u3000BVT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LVT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TVT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CVT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u5834\u6240\u8868\n\u3000BST\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LST\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TST\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CST\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u7a2e\u5225\u6c7a\u5b9a\u8868\n\u3000BPT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LPT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TPT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CPT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u9053\u5177\u8868\n\u3000BIT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LIT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TIT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CIT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n[]\u5185\u306f\u7701\u7565\u53ef\u3000D66\u5165\u308c\u66ff\u3048\u3042\u308a\n"),v.$register_prefix(r(S,"SKILL_TABLE").$prefixes(),"IT","BT","\\d{2}C","\\d+S?A","[1-7]*PD"),n.def(v,"$initialize",d=function(e){return d.$$p&&(d.$$p=null),c(this,n.find_super_dispatcher(this,"initialize",d,!1,!0),"initialize",[e],null),this.sort_add_dice=!0,this.d66_sort_type=o(r(S,"D66SortType"),"ASC")},d.$$arity=1),n.def(v,"$result_nd6",g=function(n,t,l,o,$){return $["$=="]("?")?a:o["$=="](">=")?u(e(t,2))?r(S,"Result").$fumble(this.$translate("BeginningIdol.fumble")):u(i(t,12))?r(S,"Result").$critical(this.$translate("BeginningIdol.special")):u(i(n,$))?r(S,"Result").$success(this.$translate("success")):r(S,"Result").$failure(this.$translate("failure")):a},g.$$arity=5),n.alias(v,"check_2D6","check_nD6"),n.def(v,"$eval_game_system_specific_command",f=function(n){var e,i,t,l,a,r,$;return u(e=u(i=u(t=u(l=u(a=u(r=u($=this.$roll_attack(n))?$:this.$roll_burst(n))?r:this.$roll_performance(n))?a:o(this.$class(),"SKILL_TABLE").$roll_command(this.randomizer,n))?l:o(this.$class(),"ITEM_TABLE").$roll_command(this.randomizer,n))?t:o(this.$class(),"BAD_STATUS_TABLE").$roll_command(this.randomizer,n))?i:o(this.$class(),"LOCAL_WORK_TABLE").$roll_command(this.randomizer,n))?e:this.$roll_tables(n,o(this.$class(),"TABLES"))},f.$$arity=1),v.$private(),n.def(v,"$roll_burst",T=function(n){var l,o,r,$,s,c=a,b=a,m=a;return c=/^(\d{2})C$/.$match(n),u(c)?(l=c["$[]"](1).$to_i(),u(u(b="number"==typeof(s=l)?s<45:s["$<"](45))?b:function(n,e){return"number"==typeof n?n>55:n["$>"](55)}(l))?a:(o=u(e(l,49))?3:u(e(l,52))?4:u(e(l,54))?5:6,r=t((m=this.randomizer.$roll_barabara(o,6).$sort()).$sum(),l),$=u(i(r,80))?this.$translate("BeginningIdol.burst.burst"):u(i(r,75))?this.$translate("BeginningIdol.burst.critical_success"):u(i(r,65))?this.$translate("BeginningIdol.burst.success"):this.$translate("failure"),this.$translate("BeginningIdol.burst.name")+" \uff1e "+l+"+["+m.$join(",")+"] \uff1e "+r+" \uff1e "+$)):a},T.$$arity=1),n.def(v,"$roll_attack",h=function(n){var i,l,o,$,s,c,_,d=a,g=a,f=a,T=a,h=a,B=a,y=a;return d=/^(\d+)(S?)A([1-6]*)([+\-]\d+)?$/.$match(n),u(d)?(i=d["$[]"](1).$to_i(),u(e(i,0))?a:(l=d["$[]"](2)["$empty?"]()["$!"](),o=b(d["$[]"](3).$each_char(),"map",[],"to_i".$to_proc()),g=d["$[]"](4).$to_i(),$=r(S,"Format").$modifier(g),s=(f=this.randomizer.$roll_barabara(i,6).$sort()).$join(","),_=o,f="number"==typeof(c=f)&&"number"==typeof _?c-_:c["$-"](_),T=this.$translate("BeginningIdol.attack.name")+" \uff1e ["+s+"]"+$+" \uff1e ",u(u(h=f.$count()["$=="](i))?h:f["$empty?"]())||(T=t(T,"["+f.$join(",")+"]"+$+" \uff1e ")),u(u(B=l)?B:f.$count()["$=="](f.$uniq().$count()))?(y=[t(f.$sum(),g.$to_i()),0].$max(),T=t(T,this.$format(this.$translate("BeginningIdol.attack.damage"),m(["total"],{total:y})))):T=t(T,this.$translate("failure")),T)):a},h.$$arity=1),n.def(v,"$roll_performance",B=function(n){var i,l,o,r,$,s,c,m=a,_=a;return m=/^([1-7]*)PD(\d+)([+\-]\d+)?$/.$match(n),u(m)?(i=m["$[]"](2).$to_i(),u(e(i,0))?a:(_=b(m["$[]"](1).$chars(),"map",[],"to_i".$to_proc()).$sort(),l=m["$[]"](3).$to_i(),r=t(o=this.randomizer.$roll_barabara(i,6).$sort(),_).$sort(),$=this.$select_uniqs(r),s=u(_["$empty?"]())?this.$translate("BeginningIdol.PD.paformance"):this.$translate("BeginningIdol.PD.symphony"),c=u(_["$empty?"]())?this.$result_performance($,l,r):this.$result_symphony($,l),[s,this.$format_dice_list(o,_,l),c].$join(" \uff1e "))):a},B.$$arity=1),n.def(v,"$select_uniqs",y=function(n){var e,i;return b(b(b(n,"group_by",[],"itself".$to_proc()).$to_a(),"select",[],(e=function(n,e){return null==n&&(n=a),null==e&&(e=a),e.$size()["$=="](1)},e.$$s=this,e.$$arity=2,e)),"map",[],(i=function(n,e){return null==n&&(n=a),null==e&&(e=a),n},i.$$s=this,i.$$arity=2,i)).$sort()},y.$$arity=1),n.def(v,"$format_dice_list",I=function(n,e,i){return u(e["$empty?"]())?"["+n.$join(",")+"]"+r(S,"Format").$modifier(i):"["+n.$join(",")+"],["+e.$join(",")+"]"+r(S,"Format").$modifier(i)},I.$$arity=3),n.def(v,"$result_performance",p=function(n,e,i){return u(n["$empty?"]())?this.$format(this.$translate("BeginningIdol.PD.miracle"),m(["value"],{value:t(e,10)})):n["$=="]([1,2,3,4,5,6])?this.$format(this.$translate("BeginningIdol.PD.perfect_miracle"),m(["value"],{value:t(e,30)})):u(n.$size()["$!="](i.$size()))?"["+n.$join(",")+"]"+r(S,"Format").$modifier(e)+" \uff1e "+t(n.$sum(),e):t(n.$sum(),e).$to_s()},p.$$arity=3),n.def(v,"$result_symphony",D=function(n,e){var i=a;return u(n["$empty?"]())?this.$format(this.$translate("BeginningIdol.PD.miracle_synchro"),m(["value"],{value:t(e,15)})):n["$=="]([1,2,3,4,5,6])?(i=this.$format(this.$translate("BeginningIdol.PD.perfect_miracle"),m(["value"],{value:t(e,30)})),"["+n.$join(",")+"]"+r(S,"Format").$modifier(e)+" \uff1e "+i):"["+n.$join(",")+"]"+r(S,"Format").$modifier(e)+" \uff1e "+t(n.$sum(),e)},D.$$arity=2)}(d[0],r(d,"Base"),d)}(d[0],d)}(l[0],l)}(Opal)}}]);