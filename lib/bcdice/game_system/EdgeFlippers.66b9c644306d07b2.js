(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[6093],{4832:(oe,_e,W)=>{W(5151),Opal.queue(function(a){var re,$e,ae,o,i,n,h,r,u,p,_,D,x,g,Q,P,le,J,X=a.module,I=a.klass,q=a.const_set,l=a.truthy,d=a.def,b=a.eqeq,m=a.send,E=a.rb_plus,Z=a.rb_ge,L=a.rb_gt,R=a.thrower,B=a.neqeq,G=a.not,M=a.eqeqeq,K=a.hash2,N=a.rb_lt,O=a.rb_le,Y=[],e=a.nil,C=a.$$$;return re=Y,$e=J=[X(Y[0],"BCDice")].concat(re),P=[X(J[0],"GameSystem")].concat($e),le=a.$r(P),ae=P,x=[D=I(P[0],le("Base"),"EdgeFlippers")].concat(ae),g=a.$r(x),(Q=D.$$prototype).randomizer=Q.round_type=e,q(x[0],"ID","EdgeFlippers"),q(x[0],"NAME","EDGE FLIPPERS"),q(x[0],"SORT_KEY","\u3048\u3064\u3057\u3075\u308a\u3064\u306f\u3042\u3059"),q(x[0],"HELP_MESSAGE","\u25a0 \u6c4e\u7528\u30b3\u30de\u30f3\u30c9\n  xHD+ySD=t,t,t\n  \u4eba\u9593\u30c0\u30a4\u30b9\u3068\u602a\u7570\u30c0\u30a4\u30b9\u3092\u30ed\u30fc\u30eb\u3057\u3066\u3001\u7279\u5b9a\u306e\u51fa\u76ee\u304c\u3042\u308b\u304b\u5224\u5b9a\u3057\u307e\u3059\u3002\n  x: \u4eba\u9593\u30c0\u30a4\u30b9\u306e\u6570\n  y: \u602a\u7570\u30c0\u30a4\u30b9\u306e\u6570\n  t: \u5fc5\u8981\u306a\u51fa\u76ee\uff08\u7701\u7565\u5316\uff09\n\n\u25a0 \u62ee\u6297\u5224\u5b9a\n  xHD+ySD=Xi\n  \u4eba\u9593\u30c0\u30a4\u30b9\u3068\u602a\u7570\u30c0\u30a4\u30b9\u3092\u30ed\u30fc\u30eb\u3057\u3066\u3001\u30be\u30ed\u76ee\u304c\u5fc5\u8981\u6570\u3042\u308b\u304b\u5224\u5b9a\u3057\u307e\u3059\u3002\n  i: \u5fc5\u8981\u306a\u30be\u30ed\u76ee\u306e\u500b\u6570\n\n\u25a0 \u5168\u529b\u5224\u5b9a\n  xHFD>=t\n  xSFD>=t\n  x: \u30c0\u30a4\u30b9\u306e\u6570\n  t: \u76ee\u6a19\u5024\uff08\u7701\u7565\u664220\uff09\n\n\u25a0 \u5b58\u5728\u5224\u5b9a\n  EXIST -> 2HD+2SD\n\n\u25a0 \u90fd\u5e02\u5224\u5b9a\n  xHCD -> xHD=1,2,3,4\n\n\u25a0 \u8d85\u5e38\u5224\u5b9a\n  nSPD -> nSD=7,8,9,10\n\n\u25a0 \u8853\u5f0f\u5224\u5b9a\n  TD\n\n\u25a0 \u30e9\u30f3\u30c0\u30e0\u8868\n  BAET\uff1a\u3010\u4eba\u9593\u3011\u306b\u3082\u3010\u602a\u7570\u3011\u306b\u3082\u5f71\u97ff\u306e\u3042\u308b\u5f8c\u907a\u75c7\n  HAET\uff1a\u3010\u4eba\u9593\u5bc4\u308a\u3011\u306e\u6642\u306b\u5f71\u97ff\u306e\u3042\u308b\u5f8c\u907a\u75c7\n  SAET\uff1a\u3010\u602a\u7570\u5bc4\u308a\u3011\u306e\u6642\u306b\u5f71\u97ff\u306e\u3042\u308b\u5f8c\u907a\u75c7\n"),d(D,"$eval_game_system_specific_command",function(f){var r,u,p,_,o=this;return l(r=l(u=l(p=l(_=o.$roll_hs(f))?_:o.$roll_alias(f))?p:o.$roll_fullpower(f))?u:o.$roll_technical(f))?r:o.$roll_tables(f,g("TABLES"))}),D.$private(),o=x,u=[r=I(x[0],null,"HSCommand")].concat(o),p=a.$r(u),(_=r.$$prototype).h=_.s=_.hv=_.sv=_.targets=_.same_value=_.is_success=e,n=[i=a.get_singleton_class(r)].concat(u),h=a.$r(n),d(i,"$parse",function(c){var $,s,H,A,S,w=e,z=e,F=e,k=e,j=e,U=e,V=e;return w=/^(?:(\d+)HD(?:\+(\d+)SD)?|(\d+)SD(?:\+(\d+)HD)?)(?:=(?:([\d,]+)|X(\d+)))?$/.$match(c),!l(w)||(z=l(F=l(k=($=w["$[]"](1))===e||null==$?e:$.$to_i())?k:(s=w["$[]"](4))===e||null==s?e:s.$to_i())?F:0,j=l(F=l(k=(H=w["$[]"](2))===e||null==H?e:H.$to_i())?k:(A=w["$[]"](3))===e||null==A?e:A.$to_i())?F:0,U=this.$parse_target(w["$[]"](5)),V=(S=w["$[]"](6))===e||null==S?e:S.$to_i(),b(z,0)&&b(j,0))?e:h("HSCommand").$new(z,j,U,V)}),i.$private(),d(i,"$parse_target",function(c){return l(c)?m(m(c.$split(","),"filter",[],function(s){return null==s&&(s=e),s["$empty?"]()["$!"]()}),"map",[],"to_i".$to_proc()).$sort():e}),d(r,"$initialize",function(t,n,h,v){var c=this;return c.h=t,c.s=n,c.targets=h,c.same_value=v}),d(r,"$roll",function(t){var h,n=this;return n.hv=t.$roll_barabara(n.h,6).$sort(),n.sv=t.$roll_barabara(n.s,10).$sort(),h=E(n.hv,n.sv).$sort(),n.is_success=l(n.targets)?n["$subset?"](h,n.targets):l(n.same_value)?m(m(h,"group_by",[],"itself".$to_proc()),"any?",[],function v(c,$){var s=null==v.$$s?this:v.$$s;return null==s.same_value&&(s.same_value=e),null==c&&(c=e),null==$&&($=e),Z($.$length(),s.same_value)},{$$s:n}):e,m(p("Result").$new(),"tap",[],function v(c){var $,s=null==v.$$s?this:v.$$s;return null==s.is_success&&(s.is_success=e),null==c&&(c=e),c["$text="]([s.$expr(),s.$result_values(),s.$result_label()].$compact().$join(" \uff1e ")),l(s.is_success["$nil?"]())?e:(m(c,"condition=",$=[s.is_success]),$[$.length-1])},{$$s:n})}),r.$private(),d(r,"$subset?",function(t,n){try{var h=R("return"),v=e;return!!l(n["$empty?"]())||(v=0,m(t,"each",[],function($){var s;if(null==$&&($=e),s=n["$[]"](v),b(s,$)){if(v=E(v,1),!b(v,n.$length()))return e;h.$throw(!0)}else{if(!l(L($,s)))return e;h.$throw(!1)}},{$$ret:h}),!1)}catch(c){if(c===h)return c.$v;throw c}}),d(r,"$expr",function(){return"("+this.$expr_body()+this.$expr_cond()+")"}),d(r,"$expr_body",function(){var t=this;return B(t.h,0)&&B(t.s,0)?t.h+"HD+"+t.s+"SD":B(t.h,0)?t.h+"HD":t.s+"SD"}),d(r,"$expr_cond",function(){var t=this;return l(t.targets)?"="+t.targets.$join(","):l(t.same_value)?"=X"+t.same_value:""}),d(r,"$result_values",function(){var t=this;return[G(t.hv["$empty?"]())?"D6["+t.hv.$join(",")+"]":e,G(t.sv["$empty?"]())?"D10["+t.sv.$join(",")+"]":e].$compact().$join(" ")}),d(r,"$result_label",function(){var n;return M(!0,n=this.is_success)?"\u6210\u529f":M(!1,n)?"\u5931\u6557":e}),d(D,"$roll_hs",function(f){var r=e;return r=g("HSCommand").$parse(f),l(r)?r.$roll(this.randomizer):e}),d(D,"$parse_target",function(f){return l(f)?m(m(f.$split(","),"filter",[],function(r){return null==r&&(r=e),r["$empty?"]()["$!"]()}),"map",[],"to_i".$to_proc()).$sort():e}),d(D,"$subset?",function(f,o){try{var r=R("return"),u=e;return!!l(o["$empty?"]())||(u=0,m(f,"each",[],function(_){var i;if(null==_&&(_=e),i=o["$[]"](u),b(i,_)){if(u=E(u,1),!b(u,o.$length()))return e;r.$throw(!0)}else{if(!l(L(_,i)))return e;r.$throw(!1)}},{$$ret:r}),!1)}catch(p){if(p===r)return p.$v;throw p}}),d(D,"$roll_alias",function(f){var u,o=this,r=e;if("EXIST"===f.valueOf())return o.$roll_hs("2HD+2SD");if(r=/^(\d+)(HCD|SPD)$/.$match(f),!l(r))return e;switch(u=r["$[]"](1).$to_i(),r["$[]"](2).valueOf()){case"HCD":return o.$roll_hs(u+"HD=1,2,3,4");case"SPD":return o.$roll_hs(u+"SD=7,8,9,10");default:return e}}),d(D,"$roll_fullpower",function(f){var o=this,r=e,u=e,p=e,_=e,i=e,t=e,n=e,h=e,v=e;if(r=C(g("Command"),"Parser").$new(/[HS]FD/,K(["round_type"],{round_type:o.round_type})).$disable_modifier().$enable_prefix_number().$restrict_cmp_op_to(e,">="),u=r.$parse(f),!l(u)||(p=u.$prefix_number(),_=b(u.$command(),"HFD")?6:10,i=l(t=u.$target_number())?t:20,b(p,0)))return e;for(n=o.randomizer.$roll_barabara(p,_).$sort(),h=n.$sum(),v=[n];l(N(h,i));)n=o.randomizer.$roll_barabara(p,_).$sort(),v.$push(n),h=E(h,n.$sum());return m(g("Result").$new(),"tap",[],function($){var s,H;return null==$&&($=e),$["$text="]("("+p+u.$command()+">="+i+")"),m(v,"each",[],function(S){var T;return null==S&&(S=e),T=[E($.$text()," \uff1e "+S.$sum()+"["+S.$join(",")+"]")],m($,"text=",T),T[T.length-1]}),H=N(v.$length(),5),$["$text="](E($.$text()," \uff1e "+h+"("+v.$length()+"\u56de)")),$["$text="](E($.$text(),l(H)?" \uff1e \u6210\u529f":" \uff1e \u5931\u6557")),m($,"condition=",s=[H]),s[s.length-1]})}),d(D,"$roll_technical",function(f){var r=e,u=e;return b(f,"TD")?(r=this.randomizer.$roll_once(10),u=O(r,2),m(g("Result").$new(),"tap",[],function(_){var i;return null==_&&(_=e),_["$text="]("(TD) \uff1e "+r+" \uff1e "+(l(u)?"\u6210\u529f":"\u5931\u6557")),m(_,"condition=",i=[u]),i[i.length-1]})):e}),q(x[0],"TABLES",K(["BAET","HAET","SAET"],{BAET:C(g("DiceTable"),"Table").$new("\u3010\u4eba\u9593\u3011\u306b\u3082\u3010\u602a\u7570\u3011\u306b\u3082\u5f71\u97ff\u306e\u3042\u308b\u5f8c\u907a\u75c7","1D12",["\u93e1\u306b\u6620\u3089\u306a\u3044\uff1a\u93e1\u3084\u6c34\u9762\u306b\u59ff\u304c\u6620\u3089\u306a\u304f\u306a\u308b\u3002\u4ed6\u8005\u304b\u3089\u898b\u3048\u306a\u304f\u306a\u308b\u308f\u3051\u3067\u306f\u306a\u3044","\u90e8\u5206\u7684\u306b\u900f\u660e\uff1a\u8eab\u4f53\u306e\u3069\u3053\u304b\u304c\u900f\u660e\u306b\u306a\u308b","\u90e8\u5206\u7684\u6b20\u843d\uff1a\u8eab\u4f53\u306e\u3069\u3053\u304b\u304c\u6d88\u3048\u3066\u89e6\u308b\u3053\u3068\u3082\u3067\u304d\u306a\u304f\u306a\u308b\u3002\u751f\u547d\u7dad\u6301\u306b\u5f71\u97ff\u306f\u306a\u3044","\u89d2\u304c\u751f\u3048\u308b\uff1a\u89d2\u304c\u751f\u3048\u3066\u304f\u308b\u3002\u5143\u304b\u3089\u89d2\u304c\u3042\u308b\u5834\u5408\u306f\u3055\u3089\u306b\u8ffd\u52a0","\u3057\u3063\u307d\uff1a\u52d5\u7269\u306e\u3057\u3063\u307d\u304c\u751f\u3048\u308b","\u3051\u3082\u307f\u307f\uff1a\u52d5\u7269\u306e\u8033\u304c\u982d\u306b\u751f\u3048\u308b","\u5f71\u304c\u306a\u304f\u306a\u308b\uff1a\u81ea\u5206\u306e\u5f71\u304c\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3046","\u6d99\u304c\u6b62\u307e\u3089\u306a\u3044\uff1a\u305a\u3063\u3068\u6d99\u304c\u6d41\u308c\u7d9a\u3051\u3066\u6b62\u307e\u3089\u306a\u304f\u306a\u308b","\u8996\u754c\u306e\u7aef\u306b\u4f55\u304b\u3044\u308b\uff1a\u5e38\u306b\u8996\u754c\u306e\u7aef\u306b\u4f55\u304b\u304c\u3044\u3066\u3001\u8e0a\u3063\u3066\u3044\u308b","\u8033\u9cf4\u308a\uff1a\u305a\u3063\u3068\u8033\u9cf4\u308a\u304c\u3084\u307e\u306a\u3044\u3002\u305f\u307e\u306b\u5e7b\u8074\u304c\u3059\u308b","\u7f8e\u3057\u3044\u5e7b\u8074\uff1a\u6642\u3005\u4ed6\u4eba\u306e\u58f0\u304c\u73fe\u5b9f\u96e2\u308c\u3057\u305f\u7f8e\u3057\u3044\u58f0\u306b\u5909\u308f\u3063\u3066\u805e\u3053\u3048\u308b","\u76ae\u819a\u306e\u4e0b\u306e\u3046\u3054\u3081\u304d\uff1a\u76ae\u819a\u306e\u4e0b\u3067\u305a\u3063\u3068\u4f55\u304b\u304c\u8822\u3044\u3066\u3044\u308b\u3088\u3046\u306b\u611f\u3058\u3089\u308c\u308b"]),HAET:C(g("DiceTable"),"Table").$new("\u3010\u4eba\u9593\u5bc4\u308a\u3011\u306e\u6642\u306b\u5f71\u97ff\u306e\u3042\u308b\u5f8c\u907a\u75c7","1D6",["\u5e7b\u80a2\u306e\u611f\u899a\uff1a\u5b58\u5728\u3057\u306a\u3044\u8ffd\u52a0\u306e\u8155\u3084\u7ffc\u306e\u611f\u899a\u304c\u3042\u308b","\u58f0\u5909\u308f\u308a\uff1a\u666e\u6bb5\u3068\u306f\u9055\u3046\u58f0\u306b\u306a\u3063\u3066\u3057\u307e\u3046","\u602a\u7570\u306e\u7247\u9c57\uff1a\u3010\u602a\u7570\u5bc4\u308a\u3011\u306e\u3068\u304d\u306e\u5bb9\u59ff\u306e\u4e00\u90e8\u304c\u3010\u4eba\u9593\u5bc4\u308a\u3011\u306e\u6642\u306b\u3082\u51fa\u3066\u3057\u307e\u3046","\u5e7b\u899a\uff1a\u6642\u6298\u3084\u3051\u306b\u751f\u3005\u3057\u3044\u5e7b\u899a\u304c\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308b","\u6050\u6016\uff1a\u3042\u3089\u3086\u308b\u3082\u306e\u304c\u6016\u304f\u898b\u3048\u308b","\u602a\u7570\u8a00\u8a9e\uff1a\u3010\u4eba\u9593\u3011\u306e\u9818\u57df\u306b\u306f\u5b58\u5728\u3057\u306a\u3044\u8b0e\u306e\u8a00\u8a9e\u304c\u7406\u89e3\u3067\u304d\u308b"]),SAET:C(g("DiceTable"),"Table").$new("\u3010\u602a\u7570\u5bc4\u308a\u3011\u306e\u6642\u306b\u5f71\u97ff\u306e\u3042\u308b\u5f8c\u907a\u75c7","1D6",["\u5438\u7cbe\u4f53\u8cea\uff1a\u4ed6\u8005\u306b\u89e6\u308c\u308b\u3068\u751f\u547d\u529b\u3092\u5438\u53ce\u3057\u3066\u3057\u307e\u3046\u3002\u7279\u306b\u4ef2\u306e\u826f\u3044\u76f8\u624b\u3060\u3068\u3088\u308a\u5f37\u304f\u306a\u308b","\u5a01\u5727\u3059\u308b\u8996\u7dda\uff1a\u3042\u306a\u305f\u306e\u8996\u7dda\u306f\u5468\u56f2\u306b\u5f37\u70c8\u306a\u5a01\u5727\u611f\u3092\u4e0e\u3048\u3066\u3057\u307e\u3046","\u30ad\u30e1\u30e9\uff1a\u3042\u306a\u305f\u306e\u5bb9\u59ff\u306e\u4e00\u90e8\u304c\u3001\u4ed6\u306e\u3010\u8d8a\u5883\u8005\u3011\u306e\u3010\u602a\u7570\u5bc4\u308a\u3011\u306e\u3068\u304d\u306e\u5bb9\u59ff\u306e\u3082\u306e\u3068\u540c\u3058\u306b\u306a\u308b","\u7570\u306a\u308b\u602a\u7570\uff1a\u3042\u306a\u305f\u672c\u6765\u306e\u3010\u602a\u7570\u3011\u306e\u59ff\u3068\u306f\u9055\u3046\u59ff\u306b\u5909\u5316\u3057\u3066\u3057\u307e\u3046","\u30dd\u30eb\u30bf\u30fc\u30ac\u30a4\u30b9\u30c8\uff1a\u5468\u56f2\u3067\u30e9\u30c3\u30d7\u97f3\u3084\u90e8\u54c1\u306e\u6d6e\u904a\u3068\u3044\u3063\u305f\u602a\u73fe\u8c61\u304c\u591a\u767a\u3059\u308b","\u4eba\u9593\u305d\u306e\u3082\u306e\uff1a\u3010\u602a\u7570\u5bc4\u308a\u3011\u306e\u3068\u304d\u3067\u3082\u4eba\u9593\u305d\u306e\u3082\u306e\u306e\u5bb9\u59ff\u306b\u306a\u3063\u3066\u3057\u307e\u3046"])}).$freeze()),D.$register_prefix("\\d+HD","\\d+SD","\\d+HCD","\\d+SPD","\\d+HFD","\\dSFD","EXIST","TD",g("TABLES").$keys())})}}]);