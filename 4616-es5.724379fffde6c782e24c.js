(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4616],{74616:function(t,r,e){e(93683),Opal.modules["bcdice/dice_table/table"]=function(t){var r,e,n,c,a,i,$,o,u,s,_,d=[],l=t.nil,p=t.$$,f=t.module,h=t.klass,y=t.hash2,m=t.truthy;return r=d,e=_=[f(d[0],"BCDice")].concat(r),n=s=[f(_[0],"DiceTable")].concat(e),o=h(s[0],null,"Table"),u=[o].concat(n),o.$$prototype.times=o.$$prototype.sides=o.$$prototype.name=o.$$prototype.items=l,t.defs(o,"$from_i18n",c=function(t,r){var e=l;return e=p(u,"I18n").$t(t,y(["locale"],{locale:r})),this.$new(e["$[]"]("name"),e["$[]"]("type"),e["$[]"]("items"))},c.$$arity=2),t.def(o,"$initialize",a=function(t,r,e){var n=this,c=l;return n.name=t,n.items=e.$freeze(),c=/(\d+)D(\d+)/i.$match(r),m(c)||n.$raise(p(u,"ArgumentError"),"Unexpected table type: "+r),n.times=c["$[]"](1).$to_i(),n.sides=c["$[]"](2).$to_i()},a.$$arity=3),t.def(o,"$roll",i=function(t){var r,e=this;return r=t.$roll_sum(e.times,e.sides),e.$choice(r)},i.$$arity=1),void t.def(o,"$choice",$=function(t){var r,e=this;return r=function(t,r){return"number"==typeof t&&"number"==typeof r?t-r:t["$-"](r)}(t,e.times),p(u,"RollResult").$new(e.name,t,e.items["$[]"](r))},$.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(t){function r(t,r){return"number"==typeof t&&"number"==typeof r?t-r:t["$-"](r)}var e,n,c,a,i,$,o,u,s,_,d=[],l=t.nil,p=t.$$,f=t.module,h=t.klass,y=t.hash2;return e=d,n=_=[f(d[0],"BCDice")].concat(e),c=s=[f(_[0],"DiceTable")].concat(n),o=h(s[0],null,"D66GridTable"),u=[o].concat(c),o.$$prototype.name=o.$$prototype.items=l,t.defs(o,"$from_i18n",a=function(t,r){var e=l;return e=p(u,"I18n").$t(t,y(["locale","raise"],{locale:r,raise:!0})),this.$new(e["$[]"]("name"),e["$[]"]("items"))},a.$$arity=2),t.def(o,"$initialize",i=function(t,r){return this.name=t,this.items=r.$freeze()},i.$$arity=2),void t.def(o,"$roll",$=function(t){var e,n,c,a,i,$;return e=t.$roll_once(6),n=t.$roll_once(6),c=function(t,r){return"number"==typeof t&&"number"==typeof r?t+r:t["$+"](r)}("number"==typeof($=e)?10*$:$["$*"](10),n),a=r(e,1),i=r(n,1),p(u,"RollResult").$new(this.name,c,this.items["$[]"](a)["$[]"](i))},$.$$arity=1)},Opal.modules["bcdice/arithmetic/node"]=function(t){function r(t,r){return"number"==typeof t&&"number"==typeof r?t/r:t["$/"](r)}var e,n,c,a,i,$,o,u,s,_,d,l,p,f,h,y,m,v=[],g=t.nil,b=t.$$$,R=t.$$,k=t.module,x=t.klass,w=t.send2;return e=v,n=m=[k(v[0],"BCDice")].concat(e),c=y=[k(m[0],"Arithmetic")].concat(n),function(r,e,n){var c,a,i,$,o,u=x(r,null,"BinaryOp");[u].concat(n),u.$$prototype.lhs=u.$$prototype.rhs=u.$$prototype.op=g,t.def(u,"$initialize",c=function(t,r,e){var n=this;return n.lhs=t,n.op=r,n.rhs=e},c.$$arity=3),t.def(u,"$eval",a=function(t){var r,e=this,n=g;return n=e.lhs.$eval(t),r=e.rhs.$eval(t),n.$send(e.op,r)},a.$$arity=1),t.def(u,"$output",i=function(){var t=this;return""+t.lhs.$output()+t.op+t.rhs.$output()},i.$$arity=0),t.def(u,"$s_exp",$=function(){var t=this;return"("+t.$op_for_s_exp()+" "+t.lhs.$s_exp()+" "+t.rhs.$s_exp()+")"},$.$$arity=0),t.def(u,"$op_for_s_exp",o=function(){return this.op},o.$$arity=0)}((h=[k(y[0],"Node")].concat(c))[0],0,h),a=h[0],i=R(h,"BinaryOp"),$=h,p=x(a,i,"DivideBase"),f=[p].concat($),p.$$prototype.lhs=p.$$prototype.rhs=p.$$prototype.op=g,t.def(p,"$initialize",o=function(r,e){return o.$$p&&(o.$$p=null),w(this,t.find_super_dispatcher(this,"initialize",o,!1,!0),"initialize",[r,"/",e],null)},o.$$arity=2),t.def(p,"$eval",u=function(t){var r,e=this,n=g;return r=e.lhs.$eval(t),(n=e.rhs.$eval(t))["$=="](0)&&e.$raise(R(f,"ZeroDivisionError")),e.$divide_and_round(r,n,t)},u.$$arity=1),t.def(p,"$output",s=function(){var r=s.$$p,e=this,n=g,c=g,a=g;for(r&&(s.$$p=null),c=0,a=arguments.length,n=new Array(a);c<a;c++)n[c]=arguments[c];return""+w(e,t.find_super_dispatcher(e,"output",s,!1,!0),"output",n,r)+e.$rounding_method()},s.$$arity=0),p.$private(),t.def(p,"$rounding_method",_=function(){return b(this.$class(),"ROUNDING_METHOD")},_.$$arity=0),t.def(p,"$op_for_s_exp",d=function(){return""+this.op+this.$rounding_method()},d.$$arity=0),t.def(p,"$divide_and_round",l=function(t,r,e){return this.$raise(R(f,"NotImplementedError"))},l.$$arity=3),function(e,n,c){var a,i=x(e,n,"DivideWithGameSystemDefault"),$=[i].concat(c);t.const_set($[0],"ROUNDING_METHOD",""),i.$private(),t.def(i,"$divide_and_round",a=function(t,e,n){var c;return c=n,b(R($,"RoundType"),"CEIL")["$==="](c)?r(t.$to_f(),e).$ceil():b(R($,"RoundType"),"ROUND")["$==="](c)?r(t.$to_f(),e).$round():r(t,e).$to_i()},a.$$arity=3)}(h[0],R(h,"DivideBase"),h),function(e,n,c){var a,i=x(e,n,"DivideWithCeil"),$=[i].concat(c);t.const_set($[0],"ROUNDING_METHOD","C"),i.$private(),t.def(i,"$divide_and_round",a=function(t,e,n){return r(t.$to_f(),e).$ceil()},a.$$arity=3)}(h[0],R(h,"DivideBase"),h),function(e,n,c){var a,i=x(e,n,"DivideWithRound"),$=[i].concat(c);t.const_set($[0],"ROUNDING_METHOD","R"),i.$private(),t.def(i,"$divide_and_round",a=function(t,e,n){return r(t.$to_f(),e).$round()},a.$$arity=3)}(h[0],R(h,"DivideBase"),h),function(e,n,c){var a,i=x(e,n,"DivideWithFloor"),$=[i].concat(c);t.const_set($[0],"ROUNDING_METHOD","F"),i.$private(),t.def(i,"$divide_and_round",a=function(t,e,n){return r(t,e).$to_i()},a.$$arity=3)}(h[0],R(h,"DivideBase"),h),function(r,e,n){var c,a,i,$,o=x(r,null,"Negative");[o].concat(n),o.$$prototype.body=g,t.def(o,"$initialize",c=function(t){return this.body=t},c.$$arity=1),t.def(o,"$eval",a=function(t){return this.body.$eval(t)["$-@"]()},a.$$arity=1),t.def(o,"$output",i=function(){return"-"+this.body.$output()},i.$$arity=0),t.def(o,"$s_exp",$=function(){return"(- "+this.body.$s_exp()+")"},$.$$arity=0)}(h[0],0,h),function(r,e,n){var c,a,i,$,o=x(r,null,"Parenthesis");[o].concat(n),o.$$prototype.expr=g,t.def(o,"$initialize",c=function(t){return this.expr=t},c.$$arity=1),t.def(o,"$eval",a=function(t){return this.expr.$eval(t)},a.$$arity=1),t.def(o,"$output",i=function(){return"("+this.expr.$output()+")"},i.$$arity=0),t.def(o,"$s_exp",$=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},$.$$arity=0)}(h[0],0,h),void function(r,e,n){var c,a,i,$=x(r,null,"Number");[$].concat(n),$.$$prototype.value=g,t.def($,"$initialize",c=function(t){return this.value=t},c.$$arity=1),t.def($,"$eval",a=function(t){return this.value},a.$$arity=1),t.def($,"$output",i=function(){return this.value.$to_s()},i.$$arity=0),t.alias($,"s_exp","output")}(h[0],0,h)},Opal.modules["racc/parser"]=function(t){function r(t,r){return"number"==typeof t&&"number"==typeof r?t<r:t["$<"](r)}function e(t,r){return"number"==typeof t&&"number"==typeof r?t-r:t["$-"](r)}function n(t,r){return"number"==typeof t&&"number"==typeof r?t+r:t["$+"](r)}function c(t,r){return"number"==typeof t&&"number"==typeof r?t>=r:t["$>="](r)}function a(t,r){return"number"==typeof t&&"number"==typeof r?t>r:t["$>"](r)}function i(t,r){return"number"==typeof t&&"number"==typeof r?t<=r:t["$<="](r)}var $,o,u,s,_,d=[],l=t.nil,p=t.$$$,f=t.$$,h=t.module,y=t.klass,m=t.truthy,v=t.gvars,g=t.send;return s=d,$=(_=[h(d[0],"Racc")].concat(s))[0],o=f(_,"StandardError"),u=_,[y($,o,"ParseError")].concat(u),m(p("::","ParseError","skip_raise")?"constant":l)||t.const_set(d[0],"ParseError",p(f(d,"Racc"),"ParseError")),function($,o){var u,s,_,d,b,R,k,x,w,E,N,D,A,S,O,B,T,C,P,z,L,M,G,I,U,q,H,W=[h($,"Racc")].concat(o);m(f(W,"Racc_No_Extensions","skip_raise")?"constant":l)||t.const_set(W[0],"Racc_No_Extensions",!1),u=W,q=y(W[0],null,"Parser"),H=[q].concat(u),q.$$prototype.yydebug=q.$$prototype.racc_debug_out=q.$$prototype.racc_error_status=q.$$prototype.racc_t=q.$$prototype.racc_vstack=q.$$prototype.racc_val=q.$$prototype.racc_state=q.$$prototype.racc_tstack=l,t.const_set(H[0],"Racc_Runtime_Version","1.4.6"),t.const_set(H[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),t.const_set(H[0],"Racc_Runtime_Core_Version_R","1.4.6"),t.const_set(H[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),t.const_set(H[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),t.const_set(H[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),t.const_set(H[0],"Racc_Runtime_Core_Version",f(H,"Racc_Runtime_Core_Version_R")),t.const_set(H[0],"Racc_Runtime_Core_Revision",f(H,"Racc_Runtime_Core_Revision_R")),t.const_set(H[0],"Racc_Runtime_Type","ruby"),t.defs(f(H,"Parser"),"$racc_runtime_type",s=function(){return f(H,"Racc_Runtime_Type")},s.$$arity=0),t.def(q,"$_racc_setup",_=function(){var n,c,a=this,i=l,$=l,o=l;return null==v.stderr&&(v.stderr=l),m(p(a.$class(),"Racc_debug_parser"))||(a.yydebug=!1),m(null!=(n=a.yydebug)&&n!==l?"instance-variable":l)||(a.yydebug=!1),m(a.yydebug)&&(m(null!=(c=a.racc_debug_out)&&c!==l?"instance-variable":l)||(a.racc_debug_out=v.stderr),a.racc_debug_out=m(i=a.racc_debug_out)?i:v.stderr),$=p(a.$class(),"Racc_arg"),m(r($.$size(),14))&&(g($,"[]=",t.to_a(o=[13,!0])),e(o.length,1)),$},_.$$arity=0),t.def(q,"$_racc_init_sysvars",d=function(){var t=this;return t.racc_state=[0],t.racc_tstack=[],t.racc_vstack=[],t.racc_t=l,t.racc_val=l,t.racc_read_next=!0,t.racc_user_yyerror=!1,t.racc_error_status=0},d.$$arity=0),t.def(q,"$do_parse",b=function(){return this.$__send__(f(H,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},b.$$arity=0),t.def(q,"$next_token",R=function(){return this.$raise(f(H,"NotImplementedError"),this.$class()+"#next_token is not defined")},R.$$arity=0),t.def(q,"$_racc_do_parse_rb",k=function(r,e){var a,i,$=this,o=l,u=l,s=l,_=l,d=l,p=l,f=l,h=l;return a=t.to_ary(r),o=null==a[0]?l:a[0],u=null==a[1]?l:a[1],s=null==a[2]?l:a[2],_=null==a[3]?l:a[3],d=null==a[10]?l:a[10],$.$_racc_init_sysvars(),p=f=h=l,g($,"catch",["racc_end_parse"],((i=function(){var e,a,$=null==i.$$s?this:i.$$s,y=l,v=l,g=l;for(null==$.racc_state&&($.racc_state=l),null==$.racc_read_next&&($.racc_read_next=l),null==$.racc_t&&($.racc_t=l),null==$.yydebug&&($.yydebug=l),null==$.racc_val&&($.racc_val=l);m(!0);)for(m(h=_["$[]"]($.racc_state["$[]"](-1)))?(m($.racc_read_next)&&m($.racc_t["$!="](0))&&(a=$.$next_token(),e=t.to_ary(a),p=null==e[0]?l:e[0],$.racc_val=null==e[1]?l:e[1],$.racc_t=m(p)?m(y=d["$[]"](p))?y:1:0,m($.yydebug)&&$.$racc_read_token($.racc_t,p,$.racc_val),$.racc_read_next=!1),h=n(h,$.racc_t),m(m(v=m(g=c(h,0))?f=o["$[]"](h):g)?u["$[]"](h)["$=="]($.racc_state["$[]"](-1)):v)||(f=s["$[]"]($.racc_state["$[]"](-1)))):f=s["$[]"]($.racc_state["$[]"](-1));m(f=$.$_racc_evalact(f,r)););}).$$s=$,i.$$arity=0,i))},k.$$arity=2),t.def(q,"$yyparse",x=function(t,r){return this.$__send__(f(H,"Racc_YY_Parse_Method"),t,r,this.$_racc_setup(),!0)},x.$$arity=2),t.def(q,"$_racc_yyparse_rb",w=function(r,e,a,i){var $,o,u=l,s=l,_=l,d=l,p=l,f=l,h=l;return $=t.to_ary(a),u=null==$[0]?l:$[0],s=null==$[1]?l:$[1],_=null==$[2]?l:$[2],d=null==$[3]?l:$[3],p=null==$[10]?l:$[10],this.$_racc_init_sysvars(),f=l,h=l,g(this,"catch",["racc_end_parse"],((o=function(){var t,i=null==o.$$s?this:o.$$s;for(null==i.racc_state&&(i.racc_state=l);!m(h=d["$[]"](i.racc_state["$[]"](-1)));)for(;m(f=i.$_racc_evalact(_["$[]"](i.racc_state["$[]"](-1)),a)););return g(r,"__send__",[e],((t=function(r,e){var i,$,o=null==t.$$s?this:t.$$s,y=l,v=l,g=l,b=l,R=l,k=l,x=l;for(null==o.racc_t&&(o.racc_t=l),null==o.racc_state&&(o.racc_state=l),null==o.racc_read_next&&(o.racc_read_next=l),null==r&&(r=l),null==e&&(e=l),o.racc_t=m(r)?m(y=p["$[]"](r))?y:1:0,o.racc_val=e,o.racc_read_next=!1,h=n(h,o.racc_t),m(m(i=m($=c(h,0))?f=u["$[]"](h):$)?s["$[]"](h)["$=="](o.racc_state["$[]"](-1)):i)||(f=_["$[]"](o.racc_state["$[]"](-1)));m(f=o.$_racc_evalact(f,a)););for(;m(m(v=m(g=(h=d["$[]"](o.racc_state["$[]"](-1)))["$!"]())?g:o.racc_read_next["$!"]())?v:o.racc_t["$=="](0));)for(m(m(b=m(R=m(k=m(x=h)?h=n(h,o.racc_t):x)?c(h,0):k)?f=u["$[]"](h):R)?s["$[]"](h)["$=="](o.racc_state["$[]"](-1)):b)||(f=_["$[]"](o.racc_state["$[]"](-1)));m(f=o.$_racc_evalact(f,a)););}).$$s=i,t.$$arity=2,t))}).$$s=this,o.$$arity=0,o))},w.$$arity=4),t.def(q,"$_racc_evalact",E=function($,o){var u,s,_,d,p=this,f=l,h=l,y=l,v=l,b=l,R=l,k=l,x=l,w=l,E=l;if(f=null==(u=t.to_ary(o))[0]?l:u[0],h=null==u[1]?l:u[1],y=null==u[3]?l:u[3],_=null==u[11]?l:u[11],v=null==u[12]?l:u[12],m(m(d=a($,0))?r($,_):d))m(a(p.racc_error_status,0))&&(p.racc_t["$=="](1)||(p.racc_error_status=e(p.racc_error_status,1))),p.racc_vstack.$push(p.racc_val),p.racc_state.$push($),p.racc_read_next=!0,m(p.yydebug)&&(p.racc_tstack.$push(p.racc_t),p.$racc_shift(p.racc_t,p.racc_tstack,p.racc_vstack));else if(m(m(b=r($,0))?a($,v["$-@"]()):b)){if(R=g(p,"catch",["racc_jump"],((s=function(){var t=null==s.$$s?this:s.$$s;return null==t.racc_state&&(t.racc_state=l),t.racc_state.$push(t.$_racc_do_reduce(o,$)),!1}).$$s=p,s.$$arity=0,s)),m(R)){if(1["$==="](k=R))return p.racc_user_yyerror=!0,v["$-@"]();if(2["$==="](k))return _;p.$raise("[Racc Bug] unknown jump code")}}else if($["$=="](_))m(p.yydebug)&&p.$racc_accept(),p.$throw("racc_end_parse",p.racc_vstack["$[]"](0));else{if($["$=="](v["$-@"]())){for((0)["$==="](k=p.racc_error_status)?m(o["$[]"](21))||p.$on_error(p.racc_t,p.racc_val,p.racc_vstack):3["$==="](k)&&(p.racc_t["$=="](0)&&p.$throw("racc_end_parse",l),p.racc_read_next=!0),p.racc_user_yyerror=!1,p.racc_error_status=3;m(!0)&&(!m(x=y["$[]"](p.racc_state["$[]"](-1)))||(x=n(x,1),!m(m(w=m(E=c(x,0))?$=f["$[]"](x):E)?h["$[]"](x)["$=="](p.racc_state["$[]"](-1)):w)));)m(i(p.racc_state.$size(),1))&&p.$throw("racc_end_parse",l),p.racc_state.$pop(),p.racc_vstack.$pop(),m(p.yydebug)&&(p.racc_tstack.$pop(),p.$racc_e_pop(p.racc_state,p.racc_tstack,p.racc_vstack));return $}p.$raise("[Racc Bug] unknown action "+$.$inspect())}return m(p.yydebug)&&p.$racc_next_state(p.racc_state["$[]"](-1),p.racc_state),l},E.$$arity=2),t.def(q,"$_racc_do_reduce",N=function(r,a){var i,$,o,u,s,_,d,p=this,f=l,h=l,y=l,v=l,b=l,R=l,k=l,x=l,w=l,E=l,N=l,D=l,A=l,S=l,O=l,B=l;return f=null==(i=t.to_ary(r))[4]?l:i[4],h=null==i[5]?l:i[5],y=null==i[6]?l:i[6],v=null==i[7]?l:i[7],$=null==i[8]?l:i[8],b=null==i[9]?l:i[9],o=null==i[13]?l:i[13],R=p.racc_state,k=p.racc_vstack,x=p.racc_tstack,w=function(t,r){return"number"==typeof t?-3*t:t["$*"](-3)}(a),E=b["$[]"](w),u=b["$[]"](n(w,1)),s=b["$[]"](n(w,2)),_=[],m(p.yydebug)&&(N=x["$[]"](E["$-@"](),E)),D=k["$[]"](E["$-@"](),E),m(p.yydebug)&&(A=[E["$-@"](),E,_],g(x,"[]=",t.to_a(A)),e(A.length,1)),A=[E["$-@"](),E,_],g(k,"[]=",t.to_a(A)),e(A.length,1),A=[E["$-@"](),E,_],g(R,"[]=",t.to_a(A)),e(A.length,1),m(o)?k.$push(p.$__send__(s,D,k,D["$[]"](0))):k.$push(p.$__send__(s,D,k)),x.$push(u),m(p.yydebug)&&p.$racc_reduce(N,u,x,k),d=e(u,$),m(w=v["$[]"](d))&&(w=n(w,R["$[]"](-1)),m(m(S=m(O=c(w,0))?B=f["$[]"](w):O)?h["$[]"](w)["$=="](d):S))?B:y["$[]"](d)},N.$$arity=2),t.def(q,"$on_error",D=function(t,r,e){var n,c=this;return c.$raise(f(H,"ParseError"),c.$sprintf("\nparse error on value %s (%s)",r.$inspect(),m(n=c.$token_to_str(t))?n:"?"))},D.$$arity=3),t.def(q,"$yyerror",A=function(){return this.$throw("racc_jump",1)},A.$$arity=0),t.def(q,"$yyaccept",S=function(){return this.$throw("racc_jump",2)},S.$$arity=0),t.def(q,"$yyerrok",O=function(){return this.racc_error_status=0},O.$$arity=0),t.def(q,"$racc_read_token",B=function(t,r,e){var n=this;return n.racc_debug_out.$print("read    "),n.racc_debug_out.$print(r.$inspect(),"(",n.$racc_token2str(t),") "),n.racc_debug_out.$puts(e.$inspect()),n.racc_debug_out.$puts()},B.$$arity=3),t.def(q,"$racc_shift",T=function(t,r,e){var n=this;return n.racc_debug_out.$puts("shift   "+n.$racc_token2str(t)),n.$racc_print_stacks(r,e),n.racc_debug_out.$puts()},T.$$arity=3),t.def(q,"$racc_reduce",C=function(t,r,e,n){var c,a=this,i=l;return(i=a.racc_debug_out).$print("reduce "),m(t["$empty?"]())?i.$print(" <none>"):g(t,"each",[],((c=function(t){return null==t&&(t=l),i.$print(" ",(null==c.$$s?this:c.$$s).$racc_token2str(t))}).$$s=a,c.$$arity=1,c)),i.$puts(" --\x3e "+a.$racc_token2str(r)),a.$racc_print_stacks(e,n),a.racc_debug_out.$puts()},C.$$arity=4),t.def(q,"$racc_accept",P=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},P.$$arity=0),t.def(q,"$racc_e_pop",z=function(t,r,e){var n=this;return n.racc_debug_out.$puts("error recovering mode: pop token"),n.$racc_print_states(t),n.$racc_print_stacks(r,e),n.racc_debug_out.$puts()},z.$$arity=3),t.def(q,"$racc_next_state",L=function(t,r){var e=this;return e.racc_debug_out.$puts("goto    "+t),e.$racc_print_states(r),e.racc_debug_out.$puts()},L.$$arity=2),t.def(q,"$racc_print_stacks",M=function(t,r){var e,n=l;return(n=this.racc_debug_out).$print("        ["),g(t,"each_index",[],((e=function(c){return null==c&&(c=l),n.$print(" (",(null==e.$$s?this:e.$$s).$racc_token2str(t["$[]"](c))," ",r["$[]"](c).$inspect(),")")}).$$s=this,e.$$arity=1,e)),n.$puts(" ]")},M.$$arity=2),t.def(q,"$racc_print_states",G=function(t){var r,e=l;return(e=this.racc_debug_out).$print("        ["),g(t,"each",[],((r=function(t){return null==t&&(t=l),e.$print(" ",t)}).$$s=this,r.$$arity=1,r)),e.$puts(" ]")},G.$$arity=1),t.def(q,"$racc_token2str",I=function(t){var r;return m(r=p(this.$class(),"Racc_token_to_s_table")["$[]"](t))?r:this.$raise("[Racc Bug] can't convert token "+t+" to string")},I.$$arity=1),t.def(q,"$token_to_str",U=function(t){return p(this.$class(),"Racc_token_to_s_table")["$[]"](t)},U.$$arity=1)}(d[0],d)},Opal.modules.strscan=function(t){var r,e,n,c,a,i,$,o,u,s,_,d,l,p,f,h,y,m,v,g,b,R,k,x,w,E,N,D,A=[],S=t.nil,O=t.$$,B=t.truthy,T=t.send;return r=A,N=(0,t.klass)(A[0],null,"StringScanner"),D=[N].concat(r),N.$$prototype.pos=N.$$prototype.string=N.$$prototype.working=N.$$prototype.matched=N.$$prototype.prev_pos=N.$$prototype.match=S,N.$attr_reader("pos"),N.$attr_reader("matched"),t.def(N,"$initialize",e=function(t){var r=this;return r.string=t,r.pos=0,r.matched=S,r.working=t,r.match=[]},e.$$arity=1),N.$attr_reader("string"),t.def(N,"$beginning_of_line?",n=function(){var t=this;return 0===t.pos||"\n"===t.string.charAt(t.pos-1)},n.$$arity=0),t.alias(N,"bol?","beginning_of_line?"),t.def(N,"$scan",c=function(t){var r=this,e=(t=r.$anchor(t)).exec(r.working);return null==e?r.matched=S:"object"==typeof e?(r.prev_pos=r.pos,r.pos+=e[0].length,r.working=r.working.substring(e[0].length),r.matched=e[0],r.match=e,e[0]):"string"==typeof e?(r.pos+=e.length,r.working=r.working.substring(e.length),e):S},c.$$arity=1),t.def(N,"$scan_until",a=function(t){var r=this;t=r.$anchor(t);for(var e,n=r.pos,c=r.working;;){if(e=t.exec(c),n+=1,c=c.substr(1),null!=e)return r.matched=r.string.substr(r.pos,n-r.pos-1+e[0].length),r.match=e,r.prev_pos=n-1,r.pos=n,r.working=c.substr(e[0].length),r.matched;if(0===c.length)return r.match=[],r.matched=S}},a.$$arity=1),t.def(N,"$[]",i=function(t){var r;if(B(this.match["$empty?"]()))return S;r=t,O(D,"Symbol")["$==="](r)?t=t.$to_s():O(D,"String")["$==="](r)||(t=O(D,"Opal")["$coerce_to!"](t,O(D,"Integer"),"to_int"));var e=this.match;return t<0&&(t+=e.length),t<0||t>=e.length||null==e[t]?S:e[t]},i.$$arity=1),t.def(N,"$check",$=function(t){var r=this,e=(t=r.$anchor(t)).exec(r.working);return r.matched=null==e?S:e[0]},$.$$arity=1),t.def(N,"$check_until",o=function(t){var r=this,e=r.prev_pos,n=r.pos,c=r.$scan_until(t);return c!==S&&(r.matched=c.substr(-1),r.working=r.string.substr(n)),r.prev_pos=e,r.pos=n,c},o.$$arity=1),t.def(N,"$peek",u=function(t){return this.working.substring(0,t)},u.$$arity=1),t.def(N,"$eos?",s=function(){return 0===this.working.length},s.$$arity=0),t.def(N,"$exist?",_=function(t){var r=t.exec(this.working);return null==r?S:0==r.index?0:r.index+1},_.$$arity=1),t.def(N,"$skip",d=function(t){var r=this,e=(t=r.$anchor(t)).exec(r.working);if(null==e)return r.match=[],r.matched=S;var n=e[0],c=n.length;return r.matched=n,r.match=e,r.prev_pos=r.pos,r.pos+=c,r.working=r.working.substring(c),c},d.$$arity=1),t.def(N,"$skip_until",l=function(t){var r=this.$scan_until(t);return r===S?S:(this.matched=r.substr(-1),r.length)},l.$$arity=1),t.def(N,"$get_byte",p=function(){var t=this,r=S;return t.pos<t.string.length?(t.prev_pos=t.pos,t.pos+=1,r=t.matched=t.working.substring(0,1),t.working=t.working.substring(1)):t.matched=S,r},p.$$arity=0),t.alias(N,"getch","get_byte"),t.def(N,"$match?",f=function(t){var r=this,e=(t=r.$anchor(t)).exec(r.working);return null==e?S:(r.prev_pos=r.pos,e[0].length)},f.$$arity=1),t.def(N,"$pos=",h=function(t){var r=this;return t<0&&(t+=r.string.$length()),r.pos=t,r.working=r.string.slice(t)},h.$$arity=1),t.def(N,"$matched_size",y=function(){return this.matched===S?S:this.matched.length},y.$$arity=0),t.def(N,"$post_match",m=function(){var t=this;return t.matched===S?S:t.string.substr(t.pos)},m.$$arity=0),t.def(N,"$pre_match",v=function(){var t=this;return t.matched===S?S:t.string.substr(0,t.prev_pos)},v.$$arity=0),t.def(N,"$reset",g=function(){var t=this;return t.working=t.string,t.matched=S,t.pos=0},g.$$arity=0),t.def(N,"$rest",b=function(){return this.working},b.$$arity=0),t.def(N,"$rest?",R=function(){return 0!==this.working.length},R.$$arity=0),t.def(N,"$rest_size",k=function(){return this.$rest().$size()},k.$$arity=0),t.def(N,"$terminate",x=function(){var r,e,n=this;return n.match=S,r=[n.string.$length()],T(n,"pos=",t.to_a(r)),r[(e=r.length,"number"==typeof e?e-1:e["$-"](1))]},x.$$arity=0),t.def(N,"$unscan",w=function(){var t=this;return t.pos=t.prev_pos,t.prev_pos=S,t.match=S,t},w.$$arity=0),N.$private(),t.def(N,"$anchor",E=function(t){var r=t.toString().match(/\/([^\/]+)$/);return r=r?r[1]:void 0,new RegExp("^(?:"+t.source+")",r)},E.$$arity=1),S&&"anchor"},Opal.modules["bcdice/normalize"]=function(t){var r,e,n,c,a,i,$=[],o=t.nil,u=t.module;return a=$,r=i=[u($[0],"BCDice")].concat(a),[c=u(i[0],"Normalize")].concat(r),c.$module_function(),t.def(c,"$comparison_operator",e=function(t){var r;return/<=|=</["$==="](r=t)?"<=":/>=|=>/["$==="](r)?">=":/<>|!=|=!/["$==="](r)?"!=":/</["$==="](r)?"<":/>/["$==="](r)?">":/=/["$==="](r)?"==":o},e.$$arity=1),void t.def(c,"$target_number",n=function(t){return t["$=="]("?")?t:t.$to_i()},n.$$arity=1)},Opal.modules["bcdice/common_command/lexer"]=function(t){var r,e,n,c,a,i,$,o,u,s,_=t.top,d=[],l=t.nil,p=t.$$,f=t.module,h=t.klass,y=t.hash2,m=t.truthy;return _.$require("strscan"),_.$require("bcdice/normalize"),r=d,e=s=[f(d[0],"BCDice")].concat(r),n=u=[f(s[0],"CommonCommand")].concat(e),$=h(u[0],null,"Lexer"),o=[$].concat(n),$.$$prototype.scanner=l,t.const_set(o[0],"SYMBOLS",y(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),t.def($,"$initialize",c=function(t){var r;return t=m(r=t.$split(" ",2).$first())?r:"",this.scanner=p(o,"StringScanner").$new(t)},c.$$arity=1),t.def($,"$next_token",a=function(){var t=this,r=l,e=l,n=l,c=l;return m(t.scanner["$eos?"]())?[!1,"$"]:m(r=t.scanner.$scan(/\d+/))?["NUMBER",r.$to_i()]:m(e=t.scanner.$scan(/[<>!=]+/))?["CMP_OP",p(o,"Normalize").$comparison_operator(e)]:(n=t.scanner.$getch().$upcase(),[m(c=p(o,"SYMBOLS")["$[]"](n))?c:n.$to_sym(),n])},a.$$arity=0),void t.def($,"$source",i=function(){return this.scanner.$string()},i.$$arity=0)},Opal.modules["bcdice/arithmetic/parser"]=function(t){var r,e,n,c,a,i,$,o,u,s,_,d,l,p,f,h,y,m,v,g,b,R,k,x,w,E,N,D,A,S,O,B,T,C,P=t.top,z=[],L=t.nil,M=t.$$$,G=t.$$,I=t.module,U=t.klass,q=t.hash;return P.$require("racc/parser.rb"),P.$require("bcdice/common_command/lexer"),P.$require("bcdice/arithmetic/node"),r=z,e=C=[I(z[0],"BCDice")].concat(r),n=T=[I(C[0],"Arithmetic")].concat(e),O=U(T[0],M(G(T,"Racc"),"Parser"),"Parser"),B=[O].concat(n),O.$$prototype.lexer=L,t.defs(O,"$parse",c=function(t){return this.$new().$parse(t)},c.$$arity=1),t.def(O,"$parse",a=function(r){try{return this.lexer=M(M(G(B,"BCDice"),"CommonCommand"),"Lexer").$new(r),this.$do_parse()}catch(e){if(!t.rescue(e,[G(B,"ParseError")]))throw e;try{return L}finally{t.pop_exception()}}},a.$$arity=1),O.$private(),t.def(O,"$next_token",i=function(){return this.lexer.$next_token()},i.$$arity=0),b=[8,17,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,L,L,4,5,4,5,7,9,7,L,L,10,11,L,10,11,22,26,24,25,27],R=[0,9,4,2,2,0,0,4,4,0,5,4,7,18,18,5,5,7,7,5,10,7,11,19,19,10,10,11,11,10,12,11,13,L,L,12,12,13,13,12,1,13,L,L,16,16,L,1,1,16,21,21,21,21],k=[-2,40,-6,L,0,8,L,10,L,1,18,20,28,30,L,L,37,L,4,14,L,47,L,L,L,L,L,L],x=[-17,-17,-3,-6,-17,-17,-14,-17,-16,-17,-17,-17,-17,-17,-12,-13,-17,28,-1,-2,-4,-7,-15,-5,-8,-9,-10,-11],w=[14,15,23,1,18,19,L,L,20,21,16],E=[3,3,4,1,2,2,L,L,3,3,1],N=[L,3,-6,-4,-19,L],D=[L,L,2,3,L,6],A=[0,0,"racc_error",3,14,"_reduce_1",3,14,"_reduce_2",1,14,"_reduce_none",3,15,"_reduce_4",4,15,"_reduce_5",1,15,"_reduce_none",0,17,"_reduce_7",1,17,"_reduce_8",1,17,"_reduce_9",1,17,"_reduce_10",1,17,"_reduce_11",2,16,"_reduce_12",2,16,"_reduce_13",1,16,"_reduce_none",3,18,"_reduce_15",1,18,"_reduce_16"],S=q(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12),t.const_set(B[0],"Racc_arg",[b,R,x,k,w,E,D,N,13,A,S,28,17,!0]),t.const_set(B[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","add","mul","unary","round_type","term"]),t.const_set(B[0],"Racc_debug_parser",!1),t.def(O,"$_reduce_1",$=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"BinaryOp").$new(t["$[]"](0),"+",t["$[]"](2))},$.$$arity=3),t.def(O,"$_reduce_2",o=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"BinaryOp").$new(t["$[]"](0),"-",t["$[]"](2))},o.$$arity=3),t.def(O,"$_reduce_4",u=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"BinaryOp").$new(t["$[]"](0),"*",t["$[]"](2))},u.$$arity=3),t.def(O,"$_reduce_5",s=function(t,r,e){return t["$[]"](3).$new(t["$[]"](0),t["$[]"](2))},s.$$arity=3),t.def(O,"$_reduce_7",_=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},_.$$arity=3),t.def(O,"$_reduce_8",d=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"DivideWithCeil")},d.$$arity=3),t.def(O,"$_reduce_9",l=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"DivideWithCeil")},l.$$arity=3),t.def(O,"$_reduce_10",p=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"DivideWithRound")},p.$$arity=3),t.def(O,"$_reduce_11",f=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"DivideWithFloor")},f.$$arity=3),t.def(O,"$_reduce_12",h=function(t,r,e){return t["$[]"](1)},h.$$arity=3),t.def(O,"$_reduce_13",y=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"Negative").$new(t["$[]"](1))},y.$$arity=3),t.def(O,"$_reduce_15",m=function(t,r,e){return t["$[]"](1)},m.$$arity=3),t.def(O,"$_reduce_16",v=function(t,r,e){return M(M(G(B,"Arithmetic"),"Node"),"Number").$new(t["$[]"](0))},v.$$arity=3),void t.def(O,"$_reduce_none",g=function(t,r,e){return t["$[]"](0)},g.$$arity=3)},Opal.modules["bcdice/arithmetic"]=function(t){var r,e,n,c,a,i,$,o,u=t.top,s=[],_=t.nil,d=t.$$,l=t.module,p=t.send;return u.$require("bcdice/arithmetic/node"),u.$require("bcdice/arithmetic/parser"),r=s,e=o=[l(s[0],"BCDice")].concat(r),$=[i=l(o[0],"Arithmetic")].concat(e),n=t.get_singleton_class(i),a=[n].concat($),void t.def(n,"$eval",c=function(r,e){var n;try{return(n=d(a,"Parser").$parse(r))===_||null==n?_:p(n,"eval",[e])}catch(c){if(!t.rescue(c,[d(a,"ZeroDivisionError")]))throw c;try{return _}finally{t.pop_exception()}}},c.$$arity=2)},function(t){function r(t,r){return"number"==typeof t&&"number"==typeof r?t>=r:t["$>="](r)}function e(t,r){return"number"==typeof t&&"number"==typeof r?t+r:t["$+"](r)}var n,c,a,i,$,o,u,s,_,d,l=t.top,p=[],f=t.nil,h=t.$$$,y=t.$$,m=t.module,v=t.klass,g=t.send2,b=t.truthy,R=t.send,k=t.hash2;l.$require("bcdice/dice_table/table"),l.$require("bcdice/dice_table/d66_grid_table"),l.$require("bcdice/arithmetic"),n=p,c=d=[m(p[0],"BCDice")].concat(n),a=_=[m(d[0],"GameSystem")].concat(c),u=v(_[0],y(_,"Base"),"AngelGear"),s=[u].concat(a),u.$$prototype.randomizer=f,t.const_set(s[0],"ID","AngelGear"),t.const_set(s[0],"NAME","\u30a8\u30f3\u30bc\u30eb\u30ae\u30a2 \u5929\u4f7f\u5927\u6226TRPG The 2nd Editon"),t.const_set(s[0],"SORT_KEY","\u3048\u3093\u305b\u308b\u304d\u30422"),t.const_set(s[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u3000nAG[s][\xb1a]\n[]\u5185\u306f\u7701\u7565\u53ef\u80fd\u3002\nn:\u5224\u5b9a\u5024\ns:\u6280\u80fd\u5024\na:\u4fee\u6b63\n\uff08\u4f8b\uff09\n12AG 10AG3\xb120\n\n\u30fb\u611f\u60c5\u8868\u3000ET\n"),t.def(u,"$initialize",i=function(r){var e=this;return i.$$p&&(i.$$p=null),g(e,t.find_super_dispatcher(e,"initialize",i,!1,!0),"initialize",[r],null),e.sort_barabara_dice=!0},i.$$arity=1),t.def(u,"$eval_game_system_specific_command",$=function(t){var r,e=f;return b(e=/^(\d+)AG(\d+)?(([+\-]\d+)*)$/.$match(t))?this.$resolute_action(e["$[]"](1).$to_i(),(r=e["$[]"](2))===f||null==r?f:R(r,"to_i",[]),e["$[]"](3),t):this.$roll_tables(t,y(s,"TABLES"))},$.$$arity=1),t.def(u,"$resolute_action",o=function(t,n,c,a){var i,$,o,u=f,_=f,d=f,l=f;return $=(u=this.randomizer.$roll_barabara(t,6).$sort()).$join(","),_=0,d=0,b(n)&&(d=R(u,"count",[],((i=function(t){return null==t&&(t=f),function(t,r){return"number"==typeof t&&"number"==typeof r?t<=r:t["$<="](r)}(t,n)}).$$s=this,i.$$arity=1,i)),b(c["$empty?"]())||(_=y(s,"Arithmetic").$eval(c,h(y(s,"RoundType"),"FLOOR")))),b(r(e(d,_),100))&&(l="(\u798f\u97f3\u767a\u751f)"),o="("+a+") \uff1e "+d+"["+$+"]"+this.$format("%+d",_)+" \uff1e \u6210\u529f\u6570: "+e(d,_)+l,b(r(e(d,_),100))?y(s,"Result").$critical(o):function(t,r){return"number"==typeof r?0<r:(0)["$<"](r)}(0,e(d,_))?y(s,"Result").$success(o):y(s,"Result").$failure(o)},o.$$arity=4),t.const_set(s[0],"TABLES",k(["ET"],{ET:h(y(s,"DiceTable"),"D66GridTable").$new("\u611f\u60c5\u8868",[["\u597d\u5947\u5fc3\uff08\u597d\u5947\u5fc3\uff09","\u61a7\u308c\uff08\u3042\u3053\u304c\u308c\uff09","\u5c0a\u656c\uff08\u305d\u3093\u3051\u3044\uff09","\u4ef2\u9593\u610f\u8b58\uff08\u306a\u304b\u307e\u3044\u3057\u304d\uff09","\u6bcd\u6027\u611b\uff08\u307c\u305b\u3044\u3042\u3044\uff09","\u611f\u5fc3\uff08\u304b\u3093\u3057\u3093\uff09"],["\u7d14\u611b\uff08\u3058\u3085\u3093\u3042\u3044\uff09","\u53cb\u60c5\uff08\u3086\u3046\u3058\u3087\u3046\uff09","\u540c\u60c5\uff08\u3069\u3046\u3058\u3087\u3046\uff09","\u7236\u6027\u611b\uff08\u3075\u305b\u3044\u3042\u3044\uff09","\u5e78\u798f\u611f\uff08\u3053\u3046\u3075\u304f\u304b\u3093\uff09","\u4fe1\u983c\uff08\u3057\u3093\u3089\u3044\uff09"],["\u7af6\u4e89\u5fc3\uff08\u304d\u3087\u3046\u305d\u3046\u3057\u3093\uff09","\u89aa\u8fd1\u611f\uff08\u3057\u3093\u304d\u3093\u304b\u3093\uff09","\u307e\u3054\u3053\u308d","\u597d\u610f\uff08\u3053\u3046\u3044\uff09","\u6709\u70ba\uff08\u3086\u3046\u3044\uff09","\u5d07\u62dd\uff08\u3059\u3046\u306f\u3044\uff09"],["\u5927\u5acc\u3044\uff08\u3060\u3044\u304d\u3089\u3044\uff09","\u59ac\u307f\uff08\u306d\u305f\u307f\uff09","\u4fae\u8511\uff08\u3076\u3079\u3064\uff09","\u8150\u308c\u7e01\uff08\u304f\u3055\u308c\u3048\u3093\uff09","\u6050\u6016\uff08\u304d\u3087\u3046\u3075\uff09","\u52a3\u7b49\u611f\uff08\u308c\u3063\u3068\u3046\u304b\u3093\uff09"],["\u504f\u611b\uff08\u3078\u3093\u3042\u3044\uff09","\u5bc2\u3057\u3055\uff08\u3055\u3073\u3057\u3055\uff09","\u6190\u61ab\uff08\u308c\u3093\u3073\u3093\uff09","\u95d8\u4e89\u5fc3\uff08\u3068\u3046\u305d\u3046\u3057\u3093\uff09","\u98df\u50b7\uff08\u3057\u3087\u304f\u3057\u3087\u3046\uff09","\u5618\u3064\u304d\uff08\u3046\u305d\u3064\u304d\uff09"],["\u7518\u3048\uff08\u3042\u307e\u3048\uff09","\u82db\u7acb\u3061\uff08\u3044\u3089\u3060\u3061\uff09","\u4e0b\u5fc3\uff08\u3057\u305f\u3054\u3053\u308d\uff09","\u618e\u60aa\uff08\u305e\u3046\u304a\uff09","\u7591\u60d1\uff08\u304e\u308f\u304f\uff09","\u652f\u914d\uff08\u3057\u306f\u3044\uff09"]])}).$freeze()),u.$register_prefix("\\d+AG",y(s,"TABLES").$keys())}(Opal)}}]);