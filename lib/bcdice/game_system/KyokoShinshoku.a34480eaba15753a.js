(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[3356],{4079:(H,F,C)=>{C(5151),Opal.queue(function(t){var p,J,Z,S,I,i,q,K,U,N,T=t.module,L=t.klass,R=t.const_set,n=t.truthy,y=t.def,x=t.hash,E=t.eqeq,d=t.rb_lt,g=t.rb_ge,m=t.rb_gt,A=t.thrower,w=t.rb_minus,G=[],r=t.nil;return p=G,J=N=[T(G[0],"BCDice")].concat(p),K=[T(N[0],"GameSystem")].concat(J),U=t.$r(K),Z=K,I=[S=L(K[0],U("Base"),"KyokoShinshoku")].concat(Z),i=t.$r(I),(q=S.$$prototype).round_type=q.randomizer=r,R(I[0],"ID","KyokoShinshoku"),R(I[0],"NAME","\u865a\u69cb\u4fb5\u8755TRPG"),R(I[0],"SORT_KEY","\u304d\u3088\u3053\u3046\u3057\u3093\u3057\u3088\u304fTRPG"),R(I[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\n\u3000\u30c0\u30a4\u30b9\u3092\u6307\u5b9a\u6570\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3057\u3066\u3001\u6700\u3082\u9ad8\u3044\u51fa\u76ee\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u96e3\u6613\u5ea6\u3092\u6307\u5b9a\u3059\u308b\u3068\u6210\u5426\u3092\u5224\u5b9a\u3057\u307e\u3059\u3002\nKS(x,y)\nx\uff1a\u30c0\u30a4\u30b9\u30b5\u30a4\u30ba\u30021=D4\uff08\u80fd\u529b\u50241\u30012\u4ee5\u4e0a\u306e\u51fa\u76ee\u304c\u51fa\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u6700\u59271\uff09\uff0f2=D4\uff08\u80fd\u529b\u50242\u30013\u4ee5\u4e0a\u306e\u51fa\u76ee\u304c\u51fa\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u6700\u59272\uff09\uff0f3=D4\uff08\u80fd\u529b\u50243\u3001\u51fa\u76ee4\u304c\u51fa\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u6700\u59273\uff09\uff0f4=D4\uff0f6=D6\uff0f8=D8\uff0f10=D10\uff0f12=D12\uff0f20=D20\ny\uff1a\u30c0\u30a4\u30b9\u6570\uff08\u7701\u7565\uff1a1\uff09\n\nKS(x,y)>=z\nx\uff1a\u30c0\u30a4\u30b9\u30b5\u30a4\u30ba\u30021=D4\uff08\u80fd\u529b\u50241\u30012\u4ee5\u4e0a\u306e\u51fa\u76ee\u304c\u51fa\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u6700\u59271\uff09\uff0f2=D4\uff08\u80fd\u529b\u50242\u30013\u4ee5\u4e0a\u306e\u51fa\u76ee\u304c\u51fa\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u6700\u59272\uff09\uff0f3=D4\uff08\u80fd\u529b\u50243\u3001\u51fa\u76ee4\u304c\u51fa\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u6700\u59273\uff09\uff0f4=D4\uff0f6=D6\uff0f8=D8\uff0f10=D10\uff0f12=D12\uff0f20=D20\ny\uff1a\u30c0\u30a4\u30b9\u6570\uff08\u7701\u7565\uff1a1\uff09\nz\uff1a\u96e3\u6613\u5ea6\n\n\u30fb\u89b3\u6e2c\u30ed\u30fc\u30eb\n\u3000\uff3b\u73fe\u5b9f\u4e56\u96e2\uff3d\u306e\u6bb5\u968e\u306b\u5fdc\u3058\u305f\u30c0\u30a4\u30b9\u3092\u6307\u5b9a\u6570\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3057\u3066\u3001\u6700\u3082\u9ad8\u3044\u51fa\u76ee\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\nKR(x)\nx=\uff3b\u73fe\u5b9f\u4e56\u96e2\uff3d\u306e\u6bb5\u968e\uff081=D4\uff0f2=D6\uff0f3=D8\uff0f4=D10\uff0f5=D12\uff0f6=D20\uff09\n\nKR(x,y)\u3000\u89b3\u6e2c\u30ed\u30fc\u30eb\uff08\u30ea\u30a2\u30ea\u30c6\u30a3\u30e9\u30a4\u30f3\u3042\u308a\uff09\nx=\uff3b\u73fe\u5b9f\u4e56\u96e2\uff3d\u306e\u6bb5\u968e\uff081=D4\uff0f2=D6\uff0f3=D8\uff0f4=D10\uff0f5=D12\uff0f6=D20\uff09\ny=\uff3b\u30ea\u30a2\u30ea\u30c6\u30a3\u30e9\u30a4\u30f3\uff3d\u306e\u30ec\u30d9\u30eb\uff083=1\u500b\uff0f2=2\u500b\uff0f1=3\u500b\uff09\n\n\u30fb\u865a\u69cb\u306e\u53ce\u675f\u306e\u4fb5\u8755\u5ea6\u6e1b\u5c11\u30ed\u30fc\u30eb\n\u3000\uff3b\u73fe\u5b9f\u4e56\u96e2\uff3d\u306e\u6bb5\u968e\u306b\u5fdc\u3058\u305f\u30c0\u30a4\u30b9\u3092\u6307\u5b9a\u6570\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3057\u3066\u3001\u305d\u306e\u5408\u8a08\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\nKRS(x,y)\nx=\uff3b\u73fe\u5b9f\u4e56\u96e2\uff3d\u306e\u6bb5\u968e\uff081=D4\uff0f2=D6\uff0f3=D8\uff0f4=D10\uff0f5=D12\uff0f6=D20\uff09\ny=\u30c0\u30a4\u30b9\u306e\u500b\u6570\n"),S.$register_prefix("KS","KR","KRS"),y(S,"$eval_game_system_specific_command",function(s){var u,D,f=this;return n(u=n(D=f.$roll_check(s))?D:f.$roll_kansoku(s))?u:f.$roll_shusoku(s)}),S.$private(),R(I[0],"DICE_SIZE_TO_SIDES",x(1,4,2,4,3,4,4,4,6,6,8,8,10,10,12,12,20,20).$freeze()),y(S,"$roll_check",function(s){try{A("eval_return");var u,D=this,$=r,_=r,a=r,e=r,o=r,l=r,h=r,c=r,k=r;return $=/^KS(?:\((\d+),([-+\d]+)?\)|(\d+))(?:>=([-+\d]+))?$/.$match(s),!n($)||(_=n(a=(u=$["$[]"](1))===r||null==u?r:u.$to_i())?a:$["$[]"](3).$to_i(),e=n($["$[]"](2))?i("Arithmetic").$eval($["$[]"](2),D.round_type):1,o=n(a=$["$[]"](4))?i("Arithmetic").$eval($["$[]"](4),D.round_type):a,l=i("DICE_SIZE_TO_SIDES")["$[]"](_),n(l["$nil?"]())||n(e["$nil?"]()))?r:(c=(h=D.randomizer.$roll_barabara(e,l).$sort()).$max().$clamp(1,_),(k=E(c,1)?i("Result").$fumble("\u30d5\u30a1\u30f3\u30d6\u30eb"):n(o)&&n(d(c,o))?i("Result").$failure("\u5931\u6557"):n(o)&&E(c,l)?i("Result").$critical("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"):n(o)&&n(g(c,o))?i("Result").$success("\u6210\u529f"):i("Result").$new())["$text="]([n(o)?"(KS("+_+","+e+")>="+o+")":"(KS("+_+","+e+"))",n(m(e,1))?c+"["+h.$join(",")+"]":r,c,k.$text()].$compact().$join(" \uff1e ")),k)}catch(v){if(v===t.t_eval_return)return v.$v;throw v}}),R(I[0],"GENJITU_KAIRI_TO_SIDES",[4,6,8,10,12,20].$freeze()),R(I[0],"REALITY_LINE_TO_TIMES",x(3,1,2,2,1,3).$freeze()),y(S,"$roll_kansoku",function(s){var f,u,$=r,_=r,a=r,e=r,o=r,l=r,h=r,c=r,k=r;return $=/^KR(?:(\d+)|\((\d),(\d)\))$/.$match(s),n($)&&(_=n(a=(f=$["$[]"](1))===r||null==f?r:f.$to_i())?a:$["$[]"](2).$to_i(),e=(u=$["$[]"](3))===r||null==u?r:u.$to_i(),!n(e)||!n(m(e,3))&&!n(d(e,1)))&&(o=i("GENJITU_KAIRI_TO_SIDES")["$[]"](w(_,1)),l=n(a=i("REALITY_LINE_TO_TIMES")["$[]"](e))?a:1,n(o))?(c=(h=this.randomizer.$roll_barabara(l,o).$sort()).$max(),k=n(e)?"KR("+_+","+e+")":"KR("+_+")",E(l,1)?"("+k+") \uff1e "+c:"("+k+") \uff1e "+c+"["+h.$join(",")+"] \uff1e "+c):r}),y(S,"$roll_shusoku",function(s){try{A("eval_return");var D=r,$=r,_=r,a=r,e=r,o=r,l=r;return D=/^KRS(?:\((\d),([-+\d]+)\))$/.$match(s),!n(D)||($=D["$[]"](1).$to_i(),_=n(a=D["$[]"](2))?i("Arithmetic").$eval(D["$[]"](2),this.round_type):a,e=i("GENJITU_KAIRI_TO_SIDES")["$[]"](w($,1)),n(e["$nil?"]())||n(_["$nil?"]()))?r:(l=(o=this.randomizer.$roll_barabara(_,e)).$sum(),E(_,1)?"(KRS("+$+","+_+")) \uff1e "+l:"(KRS("+$+","+_+")) \uff1e "+l+"["+o.$join(",")+"] \uff1e "+l)}catch(h){if(h===t.t_eval_return)return h.$v;throw h}})})}}]);