(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1948],{2093:(be,he,ve)=>{ve(3986),Opal.modules["i18n/backend/fallbacks"]=function(e){var G,n,r,a,s,m,F=e.module,B=e.class_variable_set,c=e.truthy,I=e.class_variable_get,p=e.def,z=e.send,M=e.send2,D=e.find_super,E=e.hash2,P=e.find_block_super,T=e.neqeq,j=e.thrower,Y=e.return_val,U=[],N=e.nil,d=e.$$$;return G=U,m=[s=F(U[0],"I18n")].concat(G),B(m[0],"@@fallbacks",N),n=e.get_singleton_class(s),r=[n].concat(m),a=e.$r(r),p(n,"$fallbacks",function(){var q=N;return B(r[1],"@@fallbacks",c(null!=r[1].$$cvars["@@fallbacks"]?"class variable":N)&&c(q=I(r[1],"@@fallbacks",!1))?q:d(d(a("I18n"),"Locale"),"Fallbacks").$new()),c(q=a("Thread").$current()["$[]"]("i18n_fallbacks"))?q:I(r[1],"@@fallbacks",!1)}),p(n,"$fallbacks=",function(A){var q;return B(r[1],"@@fallbacks",c(A["$is_a?"](a("Array")))?d(d(a("I18n"),"Locale"),"Fallbacks").$new(A):A),q=["i18n_fallbacks",I(r[1],"@@fallbacks",!1)],z(a("Thread").$current(),"[]=",q),q[q.length-1]}),function(n,w){var A,q,k,l,a=[F(n,"Backend")].concat(w);return A=a,k=[q=F(a[0],"Fallbacks")].concat(A),l=e.$r(k),p(q,"$translate",function y(o,h,u){try{var g=j("return"),_=y.$$p||N,C=this,x=N,v=N;return y.$$p=null,null==u&&(u=l("EMPTY_HASH")),c(u.$fetch("fallback",!0))?c(u["$[]"]("fallback_in_progress"))?M(C,D(C,"translate",y,!1,!0),"translate",[o,h,u],_):(c(u["$[]"]("default"))&&(x=C["$extract_non_symbol_default!"](u)),v=u.$merge(E(["fallback_in_progress"],{fallback_in_progress:!0})),z(l("I18n").$fallbacks()["$[]"](o),"each",[],function i(R){var t=null==i.$$s?this:i.$$s;null==R&&(R=N);try{return z(t,"catch",["exception"],function f(){var $=null==f.$$s?this:f.$$s,W=N;if(W=M($,P($,"translate",f.$$def||i.$$def||y,!1,!1),"translate",[R,h,v],null),c(W["$nil?"]()))return N;T(o.$to_s(),R.$to_s())&&$.$on_fallback(o,R,h,u),g.$throw(W)},{$$s:t,$$ret:g})}catch(f){if(!e.rescue(f,[d(l("I18n"),"InvalidLocale")]))throw f;try{return N}finally{e.pop_exception()}}},{$$s:C}),c(u["$key?"]("default"))&&c(u["$[]"]("default")["$nil?"]())?N:c(x)?M(C,D(C,"translate",y,!1,!0),"translate",[o,N,u.$merge(E(["default"],{default:x}))],null):C.$throw("exception",d(l("I18n"),"MissingTranslation").$new(o,h,u))):M(C,D(C,"translate",y,!1,!0),"translate",[o,h,u],_)}catch(i){if(i===g)return i.$v;throw i}},-3),p(q,"$extract_non_symbol_default!",function(o){var u,h=N;return h=[o["$[]"]("default")].$flatten(),u=z(h,"detect",[],function(_){return null==_&&(_=N),_["$is_a?"](l("Symbol"))["$!"]()}),c(u)&&o["$[]="]("default",h["$[]"](0,h.$index(u))),u}),p(q,"$exists?",function y(o,h,u){try{var g=j("return"),_=y.$$p||N,C=this;return y.$$p=null,null==u&&(u=l("EMPTY_HASH")),c(u.$fetch("fallback",!0))?(z(l("I18n").$fallbacks()["$[]"](o),"each",[],function x(v){var i=null==x.$$s?this:x.$$s;null==v&&(v=N);try{if(!c(M(i,P(i,"exists?",x.$$def||y,!1,!1),"exists?",[v,h],null)))return N;g.$throw(!0)}catch(R){if(!e.rescue(R,[d(l("I18n"),"InvalidLocale")]))throw R;try{return N}finally{e.pop_exception()}}},{$$s:C,$$ret:g}),!1):M(C,D(C,"exists?",y,!1,!0),"exists?",[o,h,u],_)}catch(x){if(x===g)return x.$v;throw x}},-3),q.$private(),p(q,"$on_fallback",Y(N))}(m[0],m)},Opal.modules["bcdice/randomizer"]=function(e){var s,b,A,q,k,l,n,w,B=e.klass,c=e.const_set,I=e.def,p=e.truthy,z=e.rb_gt,M=e.rb_plus,D=e.rb_le,E=e.send,P=e.rb_minus,T=e.eqeq,j=e.rb_times,Y=e.eqeqeq,U=e.rb_ge,N=[],d=e.nil,K=e.$$$;return s=N,n=[(0,e.module)(N[0],"BCDice")].concat(s),w=e.$r(n),b=n,q=[A=B(n[0],null,"Randomizer")].concat(b),k=e.$r(q),(l=A.$$prototype).rand_results=l.detailed_rand_results=d,c(q[0],"UPPER_LIMIT_DICE_TIMES",200),c(q[0],"UPPER_LIMIT_DICE_SIDES",1e4),c(q[0],"UPPER_LIMIT_RANDS",1e4),I(A,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),A.$attr_reader("rand_results"),A.$attr_reader("detailed_rand_results"),c(q[0],"DetailedRandResult",k("Struct").$new("kind","sides","value")),I(A,"$roll_barabara",function(o,h){var u=this;return p(z(M(u.rand_results.$size(),o),k("UPPER_LIMIT_RANDS")))&&u.$raise(k("TooManyRandsError")),p(D(o,0))||p(z(o,k("UPPER_LIMIT_DICE_TIMES")))?[]:E(k("Array"),"new",[o],function g(){return(null==g.$$s?this:g.$$s).$roll_once(h)},{$$s:u})}),I(A,"$roll_sum",function(o,h){return this.$roll_barabara(o,h).$sum()}),I(A,"$roll_once",function(o){var u=d;return p(D(o,0))||p(z(o,k("UPPER_LIMIT_DICE_SIDES")))?0:(u=this.$rand_inner(o),this.$push_to_detail("normal",o,u),u)}),I(A,"$roll_index",function(o){return P(this.$roll_once(o),1)}),I(A,"$roll_tens_d10",function(){var u,h=d;return h=this.$rand_inner(10),T(h,10)&&(h=0),u=j(h,10),this.$push_to_detail("tens_d10",10,u),u}),I(A,"$roll_d9",function(){var h;return h=P(this.$rand_inner(10),1),this.$push_to_detail("d9",10,h),h}),I(A,"$roll_d66",function(o){var g,u=d;return u=E(k("Array"),"new",[2],function _(){return(null==_.$$s?this:_.$$s).$roll_once(6)},{$$s:this}),Y(K(k("D66SortType"),"ASC"),g=o)?u["$sort!"]():Y(K(k("D66SortType"),"DESC"),g)&&u["$sort!"]()["$reverse!"](),M(j(u["$[]"](0),10),u["$[]"](1))}),A.$private(),I(A,"$rand_inner",function(o){var u,h=this;return p(U(h.rand_results.$size(),k("UPPER_LIMIT_RANDS")))&&h.$raise(k("TooManyRandsError")),u=h.$random(o),h.rand_results["$<<"]([u,o]),u}),I(A,"$random",function(o){return M(k("Kernel").$rand(o),1)}),I(A,"$push_to_detail",function(o,h,u){var _;return _=k("DetailedRandResult").$new(o,h,u),this.detailed_rand_results.$push(_)}),B(n[0],w("StandardError"),"TooManyRandsError"),d},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var E,Y,G,s,m,n,w,N,T,F=e.module,B=e.klass,c=e.def,I=e.truthy,p=e.return_val,z=[],M=e.nil;return E=z,Y=T=[F(z[0],"BCDice")].concat(E),G=N=[F(T[0],"DiceTable")].concat(Y),m=[s=B(N[0],null,"RollResult")].concat(G),n=e.$r(m),(w=s.$$prototype).table_name=w.value=w.body=M,c(s,"$initialize",function(a,b,A){var q=this;return q.table_name=a,q.value=b,q.body=A}),s.$attr_reader("table_name"),s.$attr_reader("value"),s.$attr_reader("body"),c(s,"$to_s",function(){var a=this;return a.table_name+"("+a.value+") \uff1e "+a.body}),c(s,"$last_body",function(){var a=this;return I(a.body["$is_a?"](n("RollResult")))?a.body.$last_body():a.body}),c(s,"$empty?",p(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var E,Y,G,s,m,n,w,N,T,F=e.module,B=e.klass,c=e.truthy,I=e.def,p=e.rb_minus,z=[],M=e.nil;return E=z,Y=T=[F(z[0],"BCDice")].concat(E),G=N=[F(T[0],"DiceTable")].concat(Y),m=[s=B(N[0],null,"ChainTable")].concat(G),n=e.$r(m),(w=s.$$prototype).times=w.sides=w.items=w.name=M,I(s,"$initialize",function(a,b,A){var q=this,k=M;return q.name=a,q.items=A.$freeze(),k=/(\d+)D(\d+)/i.$match(b),c(k)||q.$raise(n("ArgumentError"),"Unexpected table type: "+b),q.times=k["$[]"](1).$to_i(),q.sides=k["$[]"](2).$to_i()}),I(s,"$roll",function(a){var A,q,b=this,k=M;return A=a.$roll_sum(b.times,b.sides),q=p(A,b.times),k=b.items["$[]"](q),c(k["$respond_to?"]("roll"))&&(k=k.$roll(a)),n("RollResult").$new(b.name,A,k)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var j,d,n,w,r,a,b,G,U,F=e.module,B=e.klass,c=e.hash2,I=e.defs,p=e.def,z=e.rb_plus,M=e.rb_times,D=e.rb_minus,E=[],P=e.nil;return j=E,d=U=[F(E[0],"BCDice")].concat(j),n=G=[F(U[0],"DiceTable")].concat(d),r=[w=B(G[0],null,"D66GridTable")].concat(n),a=e.$r(r),(b=w.$$prototype).name=b.items=P,I(w,"$from_i18n",function(q,k){var y=P;return y=a("I18n").$t(q,c(["locale","raise"],{locale:k,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items"))}),p(w,"$initialize",function(q,k){return this.name=q,this.items=k.$freeze()}),p(w,"$roll",function(q){var l,y,o,h,u;return l=q.$roll_once(6),y=q.$roll_once(6),o=z(M(l,10),y),h=D(l,1),u=D(y,1),a("RollResult").$new(this.name,o,this.items["$[]"](h)["$[]"](u))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var P,U,m,n,w,r,d,K,j,F=e.module,B=e.klass,c=e.hash2,I=e.defs,p=e.def,M=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),P=M,U=j=[F(M[0],"BCDice")].concat(P),d=[F(j[0],"DiceTable")].concat(U),K=e.$r(d),m=d,w=[n=B(d[0],K("D66GridTable"),"D66HalfGridTable")].concat(m),r=e.$r(w),I(n,"$from_i18n",function(b,A){var k=D;return k=r("I18n").$t(b,c(["locale","raise"],{locale:A,raise:!0})),this.$new(k["$[]"]("name"),k["$[]"]("items_1_2_3"),k["$[]"]("items_4_5_6"))}),p(n,"$initialize",function(b,A,q){return this.name=b,this.items=[A,A,A,q,q,q].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var P,U,m,n,w,r,d,K,j,F=e.module,B=e.klass,c=e.hash2,I=e.defs,p=e.def,M=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),P=M,U=j=[F(M[0],"BCDice")].concat(P),d=[F(j[0],"DiceTable")].concat(U),K=e.$r(d),m=d,w=[n=B(d[0],K("D66GridTable"),"D66OneThirdTable")].concat(m),r=e.$r(w),I(n,"$from_i18n",function(b,A){var k=D;return k=r("I18n").$t(b,c(["locale","raise"],{locale:A,raise:!0})),this.$new(k["$[]"]("name"),k["$[]"]("items_1_2"),k["$[]"]("items_3_4"),k["$[]"]("items_5_6"))}),p(n,"$initialize",function(b,A,q,k){return this.name=b,this.items=[A,A,q,q,k,k].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var U,G,r,a,b,A,q,m,d,F=e.module,B=e.klass,c=e.hash2,I=e.defs,p=e.def,z=e.eqeqeq,M=e.rb_plus,D=e.rb_times,E=e.truthy,P=[],T=e.nil,j=e.$$$;return U=P,G=d=[F(P[0],"BCDice")].concat(U),r=m=[F(d[0],"DiceTable")].concat(G),b=[a=B(m[0],null,"D66Table")].concat(r),A=e.$r(b),(q=a.$$prototype).sort_type=q.items=q.name=T,I(a,"$from_i18n",function(l,y){var u,h=T;return h=A("I18n").$t(l,c(["locale"],{locale:y})),u=A("D66SortType").$const_get(h["$[]"]("d66_sort_type")),this.$new(h["$[]"]("name"),u,h["$[]"]("items"))}),p(a,"$initialize",function(l,y,o){var h=this;return h.name=l,h.sort_type=y,h.items=o.$freeze()}),p(a,"$roll",function(l){var y=this,o=T,h=T,u=T,g=T;return o=l.$roll_barabara(2,6),z(j(A("D66SortType"),"ASC"),h=y.sort_type)?o["$sort!"]():z(j(A("D66SortType"),"DESC"),h)&&o["$sort!"]()["$reverse!"](),u=M(D(o["$[]"](0),10),o["$[]"](1)),g=E(h=y.items["$[]"](u))?h:y.items["$[]"](u.$to_s()),E(g["$respond_to?"]("roll"))&&(g=g.$roll(l)),A("RollResult").$new(y.name,u,g)}),p(a,"$choice",function(l){return A("RollResult").$new(this.name,l,this.items["$[]"](l))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var N,s,n,w,K,F=e.module,B=e.klass,c=e.hash2,I=e.send,p=e.to_ary,z=e.rb_plus,M=e.rb_times,D=e.send2,E=e.find_super,P=e.def,j=[],Y=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),N=j,s=K=[F(j[0],"BCDice")].concat(N),n=[F(K[0],"DiceTable")].concat(s),w=e.$r(n),P(B(n[0],w("D66Table"),"D66LeftRangeTable"),"$initialize",function A(q,k,l){var h;return A.$$p=null,h=c([],{}),I(l,"each",[],function(g){var _,v;return null==g&&(g=Y),_=p(g),v=null==_[1]?Y:_[1],I(null==_[0]?Y:_[0],"each",[],function(R){return null==R&&(R=Y),I(v,"each_with_index",[],function(f,$){var W,X;return null==f&&(f=Y),null==$&&($=Y),X=z(M(R,10),z($,1)),I(h,"[]=",W=[X,f]),W[W.length-1]})})}),D(this,E(this,"initialize",A,!1,!0),"initialize",[q,k,h],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var Y,K,w,r,a,b,A,s,N,F=e.module,B=e.klass,c=e.hash2,I=e.defs,p=e.def,z=e.truthy,M=e.rb_minus,D=e.rb_plus,E=e.rb_times,P=[],T=e.nil;return Y=P,K=N=[F(P[0],"BCDice")].concat(Y),w=s=[F(N[0],"DiceTable")].concat(K),a=[r=B(s[0],null,"D66ParityTable")].concat(w),b=e.$r(a),(A=r.$$prototype).odd=A.even=A.name=T,I(r,"$from_i18n",function(k,l){var o=T;return o=b("I18n").$t(k,c(["locale","raise"],{locale:l,raise:!0})),this.$new(o["$[]"]("name"),o["$[]"]("odd"),o["$[]"]("even"))}),p(r,"$initialize",function(k,l,y){var o=this;return o.name=k,o.odd=l.$freeze(),o.even=y.$freeze()}),p(r,"$roll",function(k){var o,u,g,l=this,y=T;return y=k.$roll_once(6),o=k.$roll_once(6),u=(z(y["$odd?"]())?l.odd:l.even)["$[]"](M(o,1)),g=D(E(y,10),o),b("RollResult").$new(l.name,g,u)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var P,U,s,m,n,w,r,d,j,F=e.module,B=e.klass,c=e.def,I=e.rb_plus,p=e.rb_times,z=e.send,M=[],D=e.nil;return P=M,U=j=[F(M[0],"BCDice")].concat(P),s=d=[F(j[0],"DiceTable")].concat(U),n=[m=B(d[0],null,"D66RangeTable")].concat(s),w=e.$r(n),(r=m.$$prototype).items=r.name=D,c(m,"$initialize",function(b,A){return this.name=b,this.items=A.$freeze()}),c(m,"$roll",function(b){var q,k,l,y=D;return q=b.$roll_once(6),k=b.$roll_once(6),l=I(p(q,10),k),y=z(this.items,"find",[],function(h){return null==h&&(h=D),h["$[]"](0)["$include?"](l)}),w("RollResult").$new(this.name,l,y["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var Y,K,w,r,a,b,A,s,N,F=e.module,B=e.klass,c=e.const_set,I=e.send,p=e.truthy,z=e.def,M=e.eqeqeq,D=e.rb_times,E=e.rb_plus,P=[],T=e.nil;return Y=P,K=N=[F(P[0],"BCDice")].concat(Y),w=s=[F(N[0],"DiceTable")].concat(K),a=[r=B(s[0],null,"RangeTable")].concat(w),b=e.$r(a),(A=r.$$prototype).name=A.items=A.num_of_dice=A.num_of_sides=A.formatter=T,c(a[0],"RollResult",I(b("Struct"),"new",["sum","values","content","formatted"],function q(){return(null==q.$$s?this:q.$$s).$alias_method("to_s","formatted")},{$$s:r})),c(a[0],"Item",b("Struct").$new("range","content")),c(a[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),c(a[0],"DEFAULT_FORMATTER",I(r,"lambda",[],function(k,l){return null==k&&(k=T),null==l&&(l=T),k.$name()+"("+l.$sum()+") \uff1e "+l.$content()})),r.$attr_reader("name"),r.$attr_reader("num_of_dice"),r.$attr_reader("num_of_sides"),z(r,"$initialize",function q(k,l,y){var u,o=q.$$p||T,h=this,g=T;return q.$$p=null,h.name=k.$freeze(),h.formatter=p(u=o)?u:b("DEFAULT_FORMATTER"),g=b("DICE_ROLL_METHOD_RE").$match(l),p(g)||h.$raise(b("ArgumentError"),h.name+": invalid dice roll method: "+l),h.num_of_dice=g["$[]"](1).$to_i(),h.num_of_sides=g["$[]"](2).$to_i(),h.$store(y)}),z(r,"$fetch",function(k){var y,l=this;return y=I(l.items,"find",[],function(h){return null==h&&(h=T),h.$range()["$include?"](k)}),p(y)||l.$raise(b("RangeError"),l.name+": value is out of range: "+k),y}),z(r,"$roll",function(k){var o,l=this,y=T,h=T;return o=(y=k.$roll_barabara(l.num_of_dice,l.num_of_sides)).$sum(),(h=b("RollResult").$new(o,y,l.$fetch(o).$content()))["$formatted="](l.formatter["$[]"](l,h)),h}),r.$private(),z(r,"$store",function(k){var y,o,l=this;return y=I(k,"map",[],function h(u,g){return null==u&&(u=T),null==g&&(g=T),[(null==h.$$s?this:h.$$s).$coerce_to_int_range(u),g]},{$$s:l}),o=I(y,"sort_by",[],function(u,g){return null==u&&(u=T),null==g&&(g=T),u.$min()}),l.$assert_min_sum_is_covered(o),l.$assert_max_sum_is_covered(o),l.$assert_no_gap_or_overlap_in_ranges(o),l.items=I(o,"map",[],function(u,g){return null==u&&(u=T),null==g&&(g=T),b("Item").$new(u,g.$freeze()).$freeze()}).$freeze(),l}),z(r,"$coerce_to_int_range",function(k){var y;return M(b("Integer"),y=k)?b("Range").$new(k,k):M(b("Range"),y)&&p(k.$begin()["$is_a?"](b("Integer")))&&p(k.$end()["$is_a?"](b("Integer")))?k:this.$raise(b("TypeError"),this.name+": "+k+" ("+k.$class()+") must be an Integer or a Range with Integers ")}),z(r,"$assert_min_sum_is_covered",function(k){var y,l=this,o=T;return y=l.num_of_dice,o=k.$first()["$[]"](0),p(o["$include?"](y))||l.$raise(b("RangeError"),l.name+": min value ("+y+") is not covered: "+o),l}),z(r,"$assert_max_sum_is_covered",function(k){var y,l=this,o=T;return y=D(l.num_of_dice,l.num_of_sides),o=k.$last()["$[]"](0),p(o["$include?"](y))||l.$raise(b("RangeError"),l.name+": max value ("+y+") is not covered: "+o),l}),z(r,"$assert_no_gap_or_overlap_in_ranges",function(k){return I(k,"each_cons",[2],function y(o,h){var C,x,u=null==y.$$s?this:y.$$s,g=T,_=T;return null==u.name&&(u.name=T),null==o&&(o=T),null==h&&(h=T),g=o["$[]"](0),_=h["$[]"](0),C=g.$max(),x=E(C,1),p(_["$include?"](C))&&u.$raise(b("RangeError"),u.name+": Range overlap: "+g+" and "+_),p(_["$include?"](x))?T:u.$raise(b("RangeError"),u.name+": Range gap: "+g+" and "+_)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var T,N,m,b,A,q,k,w,K,Y,F=e.module,B=e.klass,c=e.send,I=e.def,p=e.rb_minus,z=e.return_ivar,M=[],D=e.nil,E=e.$$$;return T=M,N=Y=[F(M[0],"BCDice")].concat(T),m=K=[F(Y[0],"DiceTable")].concat(N),b=w=[B(K[0],null,"SaiFicSkillTable")].concat(m),q=[A=B(w[0],null,"Category")].concat(b),k=e.$r(q),I(A,"$initialize",function(y,o,h,u){var g=this;return g.name=y,g.skills=c(o.$map(),"with_index",[2],function(C,x){return null==C&&(C=D),null==x&&(x=D),E(k("SaiFicSkillTable"),"Skill").$new(y,C,h,x,u)}),g.dice=h}),I(A,"$roll",function(y){return this.$skills()["$[]"](p(y.$roll_sum(2,6),2))}),I(A,"$to_s",z("name")),A.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var D,j,K,w,r,s,U,P,F=e.module,B=e.klass,c=e.def,I=e.hash2,p=[],z=e.nil;return D=p,j=P=[F(p[0],"BCDice")].concat(D),K=U=[F(P[0],"DiceTable")].concat(j),s=[B(U[0],null,"SaiFicSkillTable")].concat(K),(r=(w=B(s[0],null,"Skill")).$$prototype).s_format=r.category_dice=r.row_dice=r.category_name=r.name=z,c(w,"$initialize",function(b,A,q,k,l){var y=this;return y.category_name=b,y.name=A,y.category_dice=q,y.row_dice=k,y.s_format=l}),c(w,"$to_s",function(){var b=this;return b.$format(b.s_format,I(["category_dice","row_dice","category_name","skill_name"],{category_dice:b.category_dice,row_dice:b.row_dice,category_name:b.category_name,skill_name:b.name}))}),w.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var s,r,k,l,y,o,h,b,n,F=e.module,B=e.klass,c=e.ensure_kwargs,I=e.hash2,p=e.send,M=e.defs,D=e.const_set,E=e.to_ary,P=e.def,T=e.truthy,j=e.rb_minus,Y=e.rb_plus,U=e.top,N=[],d=e.nil,K=e.$$$;return U.$require("bcdice/dice_table/sai_fic_skill_table/category"),U.$require("bcdice/dice_table/sai_fic_skill_table/skill"),s=N,r=n=[F(N[0],"BCDice")].concat(s),k=b=[F(n[0],"DiceTable")].concat(r),y=[l=B(b[0],null,"SaiFicSkillTable")].concat(k),o=e.$r(y),(h=l.$$prototype).rtt=h.rtt_format=h.rct=h.rct_format=h.rttn=h.rttn_format=h.categories=d,M(l,"$from_i18n",function(g,_,C){var x,v,i,$,f=d;return null==(x=(C=c(C)).$$smap.rtt)&&(x=d),null==(v=C.$$smap.rct)&&(v=d),null==(i=C.$$smap.rttn)&&(i=d),$=(f=o("I18n").$t("RTT",I(["locale","raise","default"],{locale:_,raise:!1,default:I([],{})})).$merge(o("I18n").$t(g,I(["locale","raise"],{locale:_,raise:!0}))))["$[]"]("items"),f=p(f,"select",[],function(X,Q){return null==X&&(X=d),null==Q&&(Q=d),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](X)}),this.$new($,e.to_hash(f).$merge(I(["rtt","rct","rttn"],{rtt:x,rct:v,rttn:i})))},-3),D(y[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),D(y[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),D(y[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),D(y[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),P(l,"$initialize",function(g,_){var C,x,v,i,R,t,f,$=this;return null==(C=(_=c(_)).$$smap.rtt)&&(C=d),null==(x=_.$$smap.rct)&&(x=d),null==(v=_.$$smap.rttn)&&(v=d),null==(i=_.$$smap.rtt_format)&&(i=o("DEFAULT_RTT")),null==(R=_.$$smap.rct_format)&&(R=o("DEFAULT_RCT")),null==(t=_.$$smap.rttn_format)&&(t=o("DEFAULT_RTTN")),null==(f=_.$$smap.s_format)&&(f=o("DEFAULT_S")),$.categories=p(g.$map(),"with_index",[1],function(X,Q){var ie,ue,ne;return null==X&&(X=d),null==Q&&(Q=d),ue=null==(ie=E(X))[0]?d:ie[0],ne=null==ie[1]?d:ie[1],K(o("SaiFicSkillTable"),"Category").$new(ue,ne,Q,f)},{$$has_top_level_mlhs_arg:!0}),$.rtt=C,$.rct=x,$.rttn=v.$to_a(),$.rtt_format=i,$.rct_format=R,$.rttn_format=t},-2),D(y[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),l.$attr_reader("categories"),P(l,"$roll_command",function(g,_){var x,C=this,v=d,i=d;return T(["RTT",C.rtt]["$include?"](x=_))?C.$format_skill(C.rtt_format,C.$roll_skill(g)):T(["RCT",C.rct]["$include?"](x))?(v=C.$roll_category(g),C.$format(C.rct_format,I(["category_dice","category_name"],{category_dice:v.$dice(),category_name:v.$name()}))):T(i=o("RTTN").$index(x))||T(i=C.rttn.$index(x))?C.$format_skill(C.rttn_format,C.categories["$[]"](i).$roll(g)):d}),P(l,"$roll_category",function(g){return this.categories["$[]"](j(g.$roll_once(6),1))}),P(l,"$roll_skill",function(g){return this.$roll_category(g).$roll(g)}),P(l,"$prefixes",function(){var g=this;return Y(["RTT[1-6]?","RCT",g.rtt,g.rct],g.rttn).$compact()}),l.$private(),P(l,"$format_skill",function(g,_){return this.$format(g,I(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:_.$category_dice(),row_dice:_.$row_dice(),category_name:_.$category_name(),skill_name:_.$name(),text:_.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var T,N,m,n,w,r,a,K,Y,F=e.module,B=e.klass,c=e.hash2,I=e.defs,p=e.truthy,z=e.def,M=e.rb_minus,D=[],E=e.nil;return T=D,N=Y=[F(D[0],"BCDice")].concat(T),m=K=[F(Y[0],"DiceTable")].concat(N),w=[n=B(K[0],null,"Table")].concat(m),r=e.$r(w),(a=n.$$prototype).times=a.sides=a.name=a.items=E,I(n,"$from_i18n",function(A,q){var l=E;return l=r("I18n").$t(A,c(["locale"],{locale:q})),this.$new(l["$[]"]("name"),l["$[]"]("type"),l["$[]"]("items"))}),z(n,"$initialize",function(A,q,k){var l=this,y=E;return l.name=A,l.items=k.$freeze(),y=/(\d+)D(\d+)/i.$match(q),p(y)||l.$raise(r("ArgumentError"),"Unexpected table type: "+q),l.times=y["$[]"](1).$to_i(),l.sides=y["$[]"](2).$to_i()}),z(n,"$roll",function(A){var k,q=this;return k=A.$roll_sum(q.times,q.sides),q.$choice(k)}),z(n,"$choice",function(A){var k,q=this;return k=M(A,q.times),r("RollResult").$new(q.name,A,q.items["$[]"](k))})},Opal.modules["bcdice/dice_table"]=function(e){var F=e.top;return F.$require("bcdice/dice_table/roll_result"),F.$require("bcdice/dice_table/chain_table"),F.$require("bcdice/dice_table/d66_grid_table"),F.$require("bcdice/dice_table/d66_half_grid_table"),F.$require("bcdice/dice_table/d66_one_third_table"),F.$require("bcdice/dice_table/d66_left_range_table"),F.$require("bcdice/dice_table/d66_parity_table"),F.$require("bcdice/dice_table/d66_range_table"),F.$require("bcdice/dice_table/d66_table"),F.$require("bcdice/dice_table/range_table"),F.$require("bcdice/dice_table/sai_fic_skill_table"),F.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var z,P,j,D,F=e.module,B=e.const_set,c=[];return z=c,P=D=[F(c[0],"BCDice")].concat(z),j=[F(D[0],"D66SortType")].concat(P),B(j[0],"NO_SORT","no_sort"),B(j[0],"ASC","asc"),B(j[0],"DESC","desc"),function(E,P){var j=[F(E,"RoundType")].concat(P);return B(j[0],"CEIL","ceil"),B(j[0],"FLOOR","floor"),B(j[0],"ROUND","round")}(D[0],D)},Opal.modules["bcdice/translate"]=function(e){var P,U,N,d,K,j,F=e.module,B=e.ensure_kwargs,c=e.kwrestargs,p=e.hash2,z=e.def,M=[],D=e.nil;return P=M,U=j=[F(M[0],"BCDice")].concat(P),d=[N=F(j[0],"Translate")].concat(U),K=e.$r(d),z(N,"$translate",function(s,m){var n,w=this;return null==w.locale&&(w.locale=D),m=B(m),n=c(m,{}),K("I18n").$translate(s,p(["locale","raise"],{locale:w.locale,raise:!0}).$merge(e.to_hash(n)))},-2)},Opal.modules["bcdice/result"]=function(e){var N,G,d,P,j,B=e.klass,c=e.send,I=e.def,p=e.return_val,z=e.return_ivar,M=[],D=e.nil;return P=M,N=j=[(0,e.module)(M[0],"BCDice")].concat(P),[d=B(j[0],null,"Result")].concat(N),I(G=e.get_singleton_class(d),"$success",function(n){return c(this.$new(),"tap",[],function(a){var b;return null==a&&(a=D),a["$text="](n),c(a,"success=",b=[!0]),b[b.length-1]})}),I(G,"$failure",function(n){return c(this.$new(),"tap",[],function(a){var b;return null==a&&(a=D),a["$text="](n),c(a,"failure=",b=[!0]),b[b.length-1]})}),I(G,"$critical",function(n){return c(this.$new(),"tap",[],function(a){var b;return null==a&&(a=D),a["$text="](n),a["$critical="](!0),c(a,"success=",b=[!0]),b[b.length-1]})}),I(G,"$fumble",function(n){return c(this.$new(),"tap",[],function(a){var b;return null==a&&(a=D),a["$text="](n),a["$fumble="](!0),c(a,"failure=",b=[!0]),b[b.length-1]})}),I(G,"$nothing",p("nothing")),I(d,"$initialize",function(s){var m=this;return null==s&&(s=D),m.text=s,m.rands=D,m.detailed_rands=D,m.secret=!1,m.success=!1,m.failure=!1,m.critical=!1,m.fumble=!1},-1),d.$attr_accessor("text","rands","detailed_rands"),d.$attr_writer("secret","success","failure","critical","fumble"),I(d,"$secret?",z("secret")),I(d,"$success?",z("success")),I(d,"$failure?",z("failure")),I(d,"$critical?",z("critical")),I(d,"$fumble?",z("fumble")),I(d,"$condition=",function(s){return this.success=s,this.failure=s["$!"]()})},Opal.modules["racc/parser"]=function(e){var A,k,l,F=e.module,B=e.klass,c=e.truthy,I=e.const_set,p=e.defs,z=e.gvars,M=e.rb_lt,D=e.def,E=e.to_ary,P=e.send,T=e.neqeq,j=e.rb_plus,Y=e.eqeq,U=e.rb_ge,N=e.rb_gt,d=e.rb_minus,K=e.rb_le,G=e.rb_times,s=e.assign_ivar_val,n=[],w=e.$r(n),r=e.nil,a=e.$$$;return A=n,k=[F(n[0],"Racc")].concat(A),l=e.$r(k),B(k[0],l("StandardError"),"ParseError"),c(a("::","ParseError","skip_raise")?"constant":r)||I(n[0],"ParseError",a(w("Racc"),"ParseError")),function(b,A){var u,g,_,C,x,l=[F(b,"Racc")].concat(A),y=e.$r(l);return c(y("Racc_No_Extensions","skip_raise")?"constant":r)||I(l[0],"Racc_No_Extensions",!1),u=l,_=[g=B(l[0],null,"Parser")].concat(u),C=e.$r(_),(x=g.$$prototype).yydebug=x.racc_debug_out=x.racc_error_status=x.racc_t=x.racc_vstack=x.racc_val=x.racc_state=x.racc_tstack=r,I(_[0],"Racc_Runtime_Version","1.4.6"),I(_[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),I(_[0],"Racc_Runtime_Core_Version_R","1.4.6"),I(_[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),I(_[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),I(_[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),I(_[0],"Racc_Runtime_Core_Version",C("Racc_Runtime_Core_Version_R")),I(_[0],"Racc_Runtime_Core_Revision",C("Racc_Runtime_Core_Revision_R")),I(_[0],"Racc_Runtime_Type","ruby"),p(C("Parser"),"$racc_runtime_type",function(){return C("Racc_Runtime_Type")}),D(g,"$_racc_setup",function(){var i,R,t=this,f=r,$=r;return null==z.stderr&&(z.stderr=r),c(a(t.$class(),"Racc_debug_parser"))||(t.yydebug=!1),c(null!=(i=t.yydebug)&&i!==r?"instance-variable":r)||(t.yydebug=!1),c(t.yydebug)&&(c(null!=(R=t.racc_debug_out)&&R!==r?"instance-variable":r)||(t.racc_debug_out=z.stderr),t.racc_debug_out=c(f=t.racc_debug_out)?f:z.stderr),$=a(t.$class(),"Racc_arg"),c(M($.$size(),14))&&$["$[]="](13,!0),$}),D(g,"$_racc_init_sysvars",function(){var i=this;return i.racc_state=[0],i.racc_tstack=[],i.racc_vstack=[],i.racc_t=r,i.racc_val=r,i.racc_read_next=!0,i.racc_user_yyerror=!1,i.racc_error_status=0}),D(g,"$do_parse",function(){return this.$__send__(C("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),D(g,"$next_token",function(){return this.$raise(C("NotImplementedError"),this.$class()+"#next_token is not defined")}),D(g,"$_racc_do_parse_rb",function(i,R){var t,$=this,W=r,X=r,Q=r,ie=r,ue=r,ne=r,se=r,te=r;return t=E(i),W=null==t[0]?r:t[0],X=null==t[1]?r:t[1],Q=null==t[2]?r:t[2],ie=null==t[3]?r:t[3],ue=null==t[10]?r:t[10],$.$_racc_init_sysvars(),ne=se=te=r,P($,"catch",["racc_end_parse"],function V(){var S,Z,H=null==V.$$s?this:V.$$s,L=r;for(null==H.racc_state&&(H.racc_state=r),null==H.racc_read_next&&(H.racc_read_next=r),null==H.racc_t&&(H.racc_t=r),null==H.yydebug&&(H.yydebug=r),null==H.racc_val&&(H.racc_val=r);c(!0);)for(c(te=ie["$[]"](H.racc_state["$[]"](-1)))?(c(H.racc_read_next)&&T(H.racc_t,0)&&(Z=H.$next_token(),S=E(Z),ne=null==S[0]?r:S[0],H.racc_val=null==S[1]?r:S[1],H.racc_t=c(ne)?c(L=ue["$[]"](ne))?L:1:0,c(H.yydebug)&&H.$racc_read_token(H.racc_t,ne,H.racc_val),H.racc_read_next=!1),te=j(te,H.racc_t),c(U(te,0))&&c(se=W["$[]"](te))&&Y(X["$[]"](te),H.racc_state["$[]"](-1))||(se=Q["$[]"](H.racc_state["$[]"](-1)))):se=Q["$[]"](H.racc_state["$[]"](-1));c(se=H.$_racc_evalact(se,i)););},{$$s:$})}),D(g,"$yyparse",function(i,R){return this.$__send__(C("Racc_YY_Parse_Method"),i,R,this.$_racc_setup(),!0)}),D(g,"$_racc_yyparse_rb",function(i,R,t,f){var $,X=this,Q=r,ie=r,$e=r,ue=r,se=r,te=r,V=r;return $=E(t),Q=null==$[0]?r:$[0],ie=null==$[1]?r:$[1],$e=null==$[2]?r:$[2],ue=null==$[3]?r:$[3],se=null==$[10]?r:$[10],X.$_racc_init_sysvars(),te=r,V=r,P(X,"catch",["racc_end_parse"],function S(){var Z=null==S.$$s?this:S.$$s;for(null==Z.racc_state&&(Z.racc_state=r);!c(V=ue["$[]"](Z.racc_state["$[]"](-1)));)for(;c(te=Z.$_racc_evalact($e["$[]"](Z.racc_state["$[]"](-1)),t)););return P(i,"__send__",[R],function H(L,ee){var O=null==H.$$s?this:H.$$s,re=r,J=r;for(null==O.racc_t&&(O.racc_t=r),null==O.racc_state&&(O.racc_state=r),null==O.racc_read_next&&(O.racc_read_next=r),null==L&&(L=r),null==ee&&(ee=r),O.racc_t=c(L)?c(re=se["$[]"](L))?re:1:0,O.racc_val=ee,O.racc_read_next=!1,V=j(V,O.racc_t),c(U(V,0))&&c(te=Q["$[]"](V))&&Y(ie["$[]"](V),O.racc_state["$[]"](-1))||(te=$e["$[]"](O.racc_state["$[]"](-1)));c(te=O.$_racc_evalact(te,t)););for(;c(c(re=c(J=(V=ue["$[]"](O.racc_state["$[]"](-1)))["$!"]())?J:O.racc_read_next["$!"]())?re:O.racc_t["$=="](0));)for(c(V)&&c(V=j(V,O.racc_t))&&c(U(V,0))&&c(te=Q["$[]"](V))&&Y(ie["$[]"](V),O.racc_state["$[]"](-1))||(te=$e["$[]"](O.racc_state["$[]"](-1)));c(te=O.$_racc_evalact(te,t)););},{$$s:Z})},{$$s:X})}),D(g,"$_racc_evalact",function(i,R){var t,$e,$=this,W=r,X=r,ie=r,ue=r,ne=r,se=r;if(W=null==(t=E(R))[0]?r:t[0],X=null==t[1]?r:t[1],ie=null==t[3]?r:t[3],$e=null==t[11]?r:t[11],ue=null==t[12]?r:t[12],c(N(i,0))&&c(M(i,$e)))c(N($.racc_error_status,0))&&(Y($.racc_t,1)||($.racc_error_status=d($.racc_error_status,1))),$.racc_vstack.$push($.racc_val),$.racc_state.$push(i),$.racc_read_next=!0,c($.yydebug)&&($.racc_tstack.$push($.racc_t),$.$racc_shift($.racc_t,$.racc_tstack,$.racc_vstack));else if(c(M(i,0))&&c(N(i,ue["$-@"]()))){if(ne=P($,"catch",["racc_jump"],function te(){var V=null==te.$$s?this:te.$$s;return null==V.racc_state&&(V.racc_state=r),V.racc_state.$push(V.$_racc_do_reduce(R,i)),!1},{$$s:$}),c(ne))switch(ne){case 1:return $.racc_user_yyerror=!0,ue["$-@"]();case 2:return $e;default:$.$raise("[Racc Bug] unknown jump code")}}else if(Y(i,$e))c($.yydebug)&&$.$racc_accept(),$.$throw("racc_end_parse",$.racc_vstack["$[]"](0));else{if(Y(i,ue["$-@"]())){switch($.racc_error_status){case 0:c(R["$[]"](21))||$.$on_error($.racc_t,$.racc_val,$.racc_vstack);break;case 3:Y($.racc_t,0)&&$.$throw("racc_end_parse",r),$.racc_read_next=!0}for($.racc_user_yyerror=!1,$.racc_error_status=3;c(!0)&&!(c(se=ie["$[]"]($.racc_state["$[]"](-1)))&&(se=j(se,1),c(U(se,0))&&c(i=W["$[]"](se))&&Y(X["$[]"](se),$.racc_state["$[]"](-1))));)c(K($.racc_state.$size(),1))&&$.$throw("racc_end_parse",r),$.racc_state.$pop(),$.racc_vstack.$pop(),c($.yydebug)&&($.racc_tstack.$pop(),$.$racc_e_pop($.racc_state,$.racc_tstack,$.racc_vstack));return i}$.$raise("[Racc Bug] unknown action "+i.$inspect())}return c($.yydebug)&&$.$racc_next_state($.racc_state["$[]"](-1),$.racc_state),r}),D(g,"$_racc_do_reduce",function(i,R){var t,ue,se,L,ee,O,ae,$=this,X=r,Q=r,ie=r,$e=r,ne=r,te=r,V=r,S=r,Z=r,H=r,re=r,J=r,ce=r;return X=null==(t=E(i))[4]?r:t[4],Q=null==t[5]?r:t[5],ie=null==t[6]?r:t[6],$e=null==t[7]?r:t[7],ue=null==t[8]?r:t[8],ne=null==t[9]?r:t[9],se=null==t[13]?r:t[13],te=$.racc_state,V=$.racc_vstack,S=$.racc_tstack,Z=G(R,-3),H=ne["$[]"](Z),L=ne["$[]"](j(Z,1)),ee=ne["$[]"](j(Z,2)),O=[],c($.yydebug)&&(re=S["$[]"](H["$-@"](),H)),J=V["$[]"](H["$-@"](),H),c($.yydebug)&&S["$[]="](H["$-@"](),H,O),V["$[]="](H["$-@"](),H,O),te["$[]="](H["$-@"](),H,O),c(se)?V.$push($.$__send__(ee,J,V,J["$[]"](0))):V.$push($.$__send__(ee,J,V)),S.$push(L),c($.yydebug)&&$.$racc_reduce(re,L,S,V),ae=d(L,ue),c(Z=$e["$[]"](ae))&&(Z=j(Z,te["$[]"](-1)),c(U(Z,0))&&c(ce=X["$[]"](Z))&&Y(Q["$[]"](Z),ae))?ce:ie["$[]"](ae)}),D(g,"$on_error",function(i,R,t){var $,f=this;return f.$raise(C("ParseError"),f.$sprintf("\nparse error on value %s (%s)",R.$inspect(),c($=f.$token_to_str(i))?$:"?"))}),D(g,"$yyerror",function(){return this.$throw("racc_jump",1)}),D(g,"$yyaccept",function(){return this.$throw("racc_jump",2)}),D(g,"$yyerrok",s("racc_error_status",0)),D(g,"$racc_read_token",function(i,R,t){var f=this;return f.racc_debug_out.$print("read    "),f.racc_debug_out.$print(R.$inspect(),"(",f.$racc_token2str(i),") "),f.racc_debug_out.$puts(t.$inspect()),f.racc_debug_out.$puts()}),D(g,"$racc_shift",function(i,R,t){var f=this;return f.racc_debug_out.$puts("shift   "+f.$racc_token2str(i)),f.$racc_print_stacks(R,t),f.racc_debug_out.$puts()}),D(g,"$racc_reduce",function(i,R,t,f){var $=this,W=r;return(W=$.racc_debug_out).$print("reduce "),c(i["$empty?"]())?W.$print(" <none>"):P(i,"each",[],function X(Q){return null==Q&&(Q=r),W.$print(" ",(null==X.$$s?this:X.$$s).$racc_token2str(Q))},{$$s:$}),W.$puts(" --\x3e "+$.$racc_token2str(R)),$.$racc_print_stacks(t,f),$.racc_debug_out.$puts()}),D(g,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),D(g,"$racc_e_pop",function(i,R,t){var f=this;return f.racc_debug_out.$puts("error recovering mode: pop token"),f.$racc_print_states(i),f.$racc_print_stacks(R,t),f.racc_debug_out.$puts()}),D(g,"$racc_next_state",function(i,R){var t=this;return t.racc_debug_out.$puts("goto    "+i),t.$racc_print_states(R),t.racc_debug_out.$puts()}),D(g,"$racc_print_stacks",function(i,R){var f=r;return(f=this.racc_debug_out).$print("        ["),P(i,"each_index",[],function $(W){return null==W&&(W=r),f.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(i["$[]"](W))," ",R["$[]"](W).$inspect(),")")},{$$s:this}),f.$puts(" ]")}),D(g,"$racc_print_states",function(i){var t=r;return(t=this.racc_debug_out).$print("        ["),P(i,"each",[],function($){return null==$&&($=r),t.$print(" ",$)}),t.$puts(" ]")}),D(g,"$racc_token2str",function(i){var t;return c(t=a(this.$class(),"Racc_token_to_s_table")["$[]"](i))?t:this.$raise("[Racc Bug] can't convert token "+i+" to string")}),D(g,"$token_to_str",function(i){return a(this.$class(),"Racc_token_to_s_table")["$[]"](i)})}(n[0],n)},Opal.modules["bcdice/arithmetic/node"]=function(e){var s,r,q,u,g,l,y,b,n,F=e.module,B=e.klass,c=e.def,I=e.thrower,p=e.return_ivar,z=e.send2,M=e.find_super,D=e.eqeq,E=e.const_set,P=e.eqeqeq,T=e.rb_divide,j=e.truthy,Y=e.assign_ivar,U=e.alias,N=[],d=e.nil,K=e.$$$;return s=N,r=n=[F(N[0],"BCDice")].concat(s),q=b=[F(n[0],"Arithmetic")].concat(r),l=[F(b[0],"Node")].concat(q),y=e.$r(l),(g=(u=B(l[0],null,"BinaryOp")).$$prototype).lhs=g.rhs=g.op=d,c(u,"$initialize",function(C,x,v){var i=this;return i.lhs=C,i.op=x,i.rhs=v}),c(u,"$eval",function(C){try{I("eval_return");var R,v=this,i=d;return i=v.lhs.$eval(C),R=v.rhs.$eval(C),i.$send(v.op,R)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(u,"$output",function(){var C=this;return""+C.lhs.$output()+C.op+C.rhs.$output()}),c(u,"$s_exp",function(){var C=this;return"("+C.$op_for_s_exp()+" "+C.lhs.$s_exp()+" "+C.rhs.$s_exp()+")"}),c(u,"$op_for_s_exp",p("op")),function(o,h,u){var g=B(o,h,"DivideBase"),_=[g].concat(u),C=e.$r(_),x=g.$$prototype;x.lhs=x.rhs=x.op=d,c(g,"$initialize",function v(i,R){return v.$$p=null,z(this,M(this,"initialize",v,!1,!0),"initialize",[i,"/",R],null)}),c(g,"$eval",function(i){try{I("eval_return");var f,$,t=this;return f=t.lhs.$eval(i),$=t.rhs.$eval(i),D($,0)&&t.$raise(C("ZeroDivisionError")),t.$divide_and_round(f,$,i)}catch(W){if(W===e.t_eval_return)return W.$v;throw W}}),c(g,"$output",function v(){var i=v.$$p||d,R=this;return v.$$p=null,""+z(R,M(R,"output",v,!1,!0),"output",[],i)+R.$rounding_method()}),g.$private(),c(g,"$rounding_method",function(){return K(this.$class(),"ROUNDING_METHOD")}),c(g,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),c(g,"$divide_and_round",function(i,R,t){return this.$raise(C("NotImplementedError"))})}(l[0],y("BinaryOp"),l),function(o,h,u){var g=B(o,h,"DivideWithGameSystemDefault"),_=[g].concat(u),C=e.$r(_);E(_[0],"ROUNDING_METHOD",""),g.$private(),c(g,"$divide_and_round",function(v,i,R){var t,f=d;return P(K(C("RoundType"),"CEIL"),t=R)?T(v.$to_f(),i).$ceil():P(K(C("RoundType"),"ROUND"),t)?(f=T(v.$to_f(),i),j(f["$negative?"]())?f.$abs().$round()["$-@"]():f.$round()):T(v,i).$floor()})}(l[0],y("DivideBase"),l),function(o,h,u){var g=B(o,h,"DivideWithCeil"),_=[g].concat(u);E(_[0],"ROUNDING_METHOD","C"),g.$private(),c(g,"$divide_and_round",function(x,v,i){return T(x.$to_f(),v).$ceil()})}(l[0],y("DivideBase"),l),function(o,h,u){var g=B(o,h,"DivideWithRound"),_=[g].concat(u);E(_[0],"ROUNDING_METHOD","R"),g.$private(),c(g,"$divide_and_round",function(x,v,i){var R=d;return R=T(x.$to_f(),v),j(R["$negative?"]())?R.$abs().$round()["$-@"]():R.$round()})}(l[0],y("DivideBase"),l),function(o,h,u){var g=B(o,h,"DivideWithFloor"),_=[g].concat(u);E(_[0],"ROUNDING_METHOD","F"),g.$private(),c(g,"$divide_and_round",function(x,v,i){return T(x,v).$floor()})}(l[0],y("DivideBase"),l),function(o,h){var u=B(o,null,"Negative");u.$$prototype.body=d,c(u,"$initialize",Y("body")),c(u,"$eval",function(C){try{return I("eval_return"),this.body.$eval(C)["$-@"]()}catch(i){if(i===e.t_eval_return)return i.$v;throw i}}),c(u,"$output",function(){return"-"+this.body.$output()}),c(u,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(l[0]),function(o,h){var u=B(o,null,"Parenthesis");u.$$prototype.expr=d,c(u,"$initialize",Y("expr")),c(u,"$eval",function(C){try{return I("eval_return"),this.expr.$eval(C)}catch(i){if(i===e.t_eval_return)return i.$v;throw i}}),c(u,"$output",function(){return"("+this.expr.$output()+")"}),c(u,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(l[0]),function(o,h){var u=B(o,null,"Number");return u.$$prototype.value=d,c(u,"$initialize",Y("value")),c(u,"$eval",p("value")),c(u,"$output",function(){return this.value.$to_s()}),U(u,"s_exp","output")}(l[0])},Opal.modules.strscan=function(e){var Y,U,N,d,K,B=e.def,c=e.truthy,I=e.eqeqeq,p=e.Opal,z=e.return_ivar,M=e.send,D=e.alias,E=[],P=e.nil;return Y=E,N=[U=(0,e.klass)(E[0],null,"StringScanner")].concat(Y),d=e.$r(N),(K=U.$$prototype).pos=K.string=K.working=K.matched=K.prev_pos=K.match=P,U.$attr_reader("pos","matched"),B(U,"$initialize",function(s){var m=this;return m.string=s,m.pos=0,m.matched=P,m.working=s,m.match=[]}),U.$attr_reader("string"),B(U,"$beginning_of_line?",function(){var s=this;return 0===s.pos||"\n"===s.string.charAt(s.pos-1)}),B(U,"$scan",function(s){var m=this,n=(s=m.$anchor(s)).exec(m.working);return null==n?m.matched=P:(m.prev_pos=m.pos,m.pos+=n[0].length,m.working=m.working.substring(n[0].length),m.matched=n[0],m.match=n,n[0])}),B(U,"$scan_until",function(s){var m=this;s=m.$anchor(s);for(var n=m.working,w=0;n.length!=w;++w){var r=s.exec(n.substr(w));if(null!==r){var a=w+r[0].length,b=n.substr(0,a);return m.matched=r[0],m.match=r,m.prev_pos=m.pos+w,m.pos+=a,m.working=n.substr(a),b}}return m.matched=P}),B(U,"$[]",function(s){var n;if(c(this.match["$empty?"]()))return P;I(d("Symbol"),n=s)?s=s.$to_s():I(d("String"),n)||(s=p["$coerce_to!"](s,d("Integer"),"to_int"));var w=this.match;return s<0&&(s+=w.length),s<0||s>=w.length||null==w[s]?P:w[s]}),B(U,"$check",function(s){var m=this,n=(s=m.$anchor(s)).exec(m.working);return m.matched=null==n?P:n[0]}),B(U,"$check_until",function(s){var m=this,n=m.prev_pos,w=m.pos,r=m.working,a=m.$scan_until(s);return m.prev_pos=n,m.pos=w,m.working=r,a}),B(U,"$peek",function(s){return this.working.substring(0,s)}),B(U,"$eos?",function(){return 0===this.working.length}),B(U,"$exist?",function(s){var n=s.exec(this.working);return null==n?P:0==n.index?0:n.index+1}),B(U,"$skip",function(s){var m=this,n=(s=m.$anchor(s)).exec(m.working);if(null==n)return m.match=[],m.matched=P;var w=n[0],r=w.length;return m.matched=w,m.match=n,m.prev_pos=m.pos,m.pos+=r,m.working=m.working.substring(r),r}),B(U,"$skip_until",function(s){var n=this.$scan_until(s);return n===P?P:(this.matched=n.substr(-1),n.length)}),B(U,"$get_byte",function(){var s=this,m=P;return s.pos<s.string.length?(s.prev_pos=s.pos,s.pos+=1,m=s.matched=s.working.substring(0,1),s.working=s.working.substring(1)):s.matched=P,m}),B(U,"$match?",function(s){var m=this,n=(s=m.$anchor(s)).exec(m.working);return null==n?P:(m.prev_pos=m.pos,n[0].length)}),B(U,"$pos=",function(s){var m=this;return s<0&&(s+=m.string.$length()),m.pos=s,m.working=m.string.slice(s)}),B(U,"$matched_size",function(){return this.matched===P?P:this.matched.length}),B(U,"$post_match",function(){var s=this;return s.matched===P?P:s.string.substr(s.pos)}),B(U,"$pre_match",function(){var s=this;return s.matched===P?P:s.string.substr(0,s.prev_pos)}),B(U,"$reset",function(){var s=this;return s.working=s.string,s.matched=P,s.pos=0}),B(U,"$rest",z("working")),B(U,"$rest?",function(){return 0!==this.working.length}),B(U,"$rest_size",function(){return this.$rest().$size()}),B(U,"$terminate",function(){var s,m=this;return m.match=P,s=[m.string.$length()],M(m,"pos=",s),s[s.length-1]}),B(U,"$unscan",function(){var s=this;return s.pos=s.prev_pos,s.prev_pos=P,s.match=P,s}),D(U,"bol?","beginning_of_line?"),D(U,"getch","get_byte"),U.$private(),B(U,"$anchor",function(s){var m=s.toString().match(/\/([^\/]+)$/);return m=m?m[1]:void 0,new RegExp("^(?:"+s.source+")",m)})},Opal.modules["bcdice/normalize"]=function(e){var D,j,P,F=e.module,B=e.eqeqeq,c=e.def,I=e.eqeq,p=[],z=e.nil;return D=p,P=[F(p[0],"BCDice")].concat(D),(j=F(P[0],"Normalize")).$module_function(),c(j,"$comparison_operator",function(U){var N;return B(/<=|=</,N=U)?"<=":B(/>=|=>/,N)?">=":B(/<>|!=|=!/,N)?"!=":B(/</,N)?"<":B(/>/,N)?">":B(/=/,N)?"==":z}),c(j,"$target_number",function(U){return I(U,"?")?U:U.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var Y,K,w,r,a,b,A,s,N,F=e.module,B=e.klass,c=e.const_set,I=e.hash2,p=e.truthy,z=e.send,M=e.def,D=e.thrower,E=e.top,P=[],T=e.nil;return E.$require("strscan"),E.$require("bcdice/normalize"),Y=P,K=N=[F(P[0],"BCDice")].concat(Y),w=s=[F(N[0],"Command")].concat(K),a=[r=B(s[0],null,"Lexer")].concat(w),b=e.$r(a),(A=r.$$prototype).scanner=A.notations=T,c(a[0],"SYMBOLS",I(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),M(r,"$initialize",function(k,l){var y,o,u;return k=p(u=(y=(o=k)===T||null==o?T:o.$split(" ",2))===T||null==y?T:y.$first())?u:"",this.scanner=b("StringScanner").$new(k),this.notations=z(l,"map",[],function(_){return null==_&&(_=T),p(_["$is_a?"](b("String")))?b("Regexp").$new(_):_})}),M(r,"$next_token",function(){try{var k=D("return"),l=this,y=T,o=T,u=T,g=T;return p(l.scanner["$eos?"]())?[!1,"$"]:(z(l.notations,"each",[],function _(C){var v,x=null==_.$$s?this:_.$$s;if(null==x.scanner&&(x.scanner=T),null==C&&(C=T),v=x.scanner.$scan(C),!p(v))return T;k.$throw(["NOTATION",v])},{$$s:l,$$ret:k}),p(y=l.scanner.$scan(/\d+/))?["NUMBER",y.$to_i()]:p(o=l.scanner.$scan(/[<>!=]+/))?(o=b("Normalize").$comparison_operator(o),[p(o)?"CMP_OP":"ILLEGAL",o]):(u=l.scanner.$getch().$upcase(),[p(g=b("SYMBOLS")["$[]"](u))?g:u.$to_sym(),u]))}catch(_){if(_===k)return _.$v;throw _}}),M(r,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var E,Y,G,s,m,n,w,N,T,F=e.module,B=e.klass,c=e.def,I=e.return_ivar,p=e.truthy,z=[],M=e.nil;return E=z,Y=T=[F(z[0],"BCDice")].concat(E),G=N=[F(T[0],"Command")].concat(Y),m=[s=B(N[0],null,"Parsed")].concat(G),n=e.$r(m),(w=s.$$prototype).critical=w.fumble=w.dollar=w.modify_number=w.question_target=w.target_number=w.prefix_number=w.command=w.suffix_number=w.cmp_op=M,s.$attr_accessor("command"),s.$attr_accessor("prefix_number"),s.$attr_accessor("suffix_number"),s.$attr_accessor("critical"),s.$attr_accessor("fumble"),s.$attr_accessor("dollar"),s.$attr_accessor("modify_number"),s.$attr_accessor("cmp_op"),s.$attr_accessor("target_number"),s.$attr_writer("question_target"),c(s,"$initialize",function(){var a=this;return a.prefix_number=M,a.suffix_number=M,a.critical=M,a.fumble=M,a.dollar=M,a.cmp_op=M,a.target_number=M,a.question_target=!1}),c(s,"$question_target?",I("question_target")),c(s,"$to_s",function(a){var b=this,A=M,q=M,k=M,l=M,y=M;switch(null==a&&(a="after_command"),A=p(b.critical)?"@"+b.critical:M,q=p(b.fumble)?"#"+b.fumble:M,k=p(b.dollar)?"$"+b.dollar:M,l=n("Format").$modifier(b.modify_number),y=p(b.question_target)?"?":b.target_number,a){case"after_command":return[b.prefix_number,b.command,b.suffix_number,A,q,k,l,b.cmp_op,y].$join();case"after_modify_number":return[b.prefix_number,b.command,b.suffix_number,l,A,q,k,b.cmp_op,y].$join();case"after_target_number":return[b.prefix_number,b.command,b.suffix_number,l,b.cmp_op,y,A,q,k].$join();default:return M}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var a,k,g,v,i,R,t,f,$,W,X,Q,ue,_,C,x,te,y,o,A,F=e.klass,B=e.module,c=e.slice,I=e.extract_kwargs,p=e.ensure_kwargs,z=e.get_kwarg,M=e.send2,D=e.find_super,E=e.def,P=e.send,T=e.eqeq,j=e.thrower,Y=e.hash,U=e.const_set,N=e.truthy,d=e.to_ary,K=e.hash2,G=e.top,s=[],m=e.$r(s),n=e.nil,w=e.$$$;return G.$require("racc/parser.rb"),G.$require("bcdice/arithmetic/node"),G.$require("bcdice/command/lexer"),G.$require("bcdice/command/parsed"),F(w(m("BCDice"),"Command"),w(m("Racc"),"Parser"),"Parser"),a=s,k=A=[B(s[0],"BCDice")].concat(a),y=[B(A[0],"Command")].concat(k),o=e.$r(y),g=y,C=[_=F(y[0],w(o("Racc"),"Parser"),"Parser")].concat(g),x=e.$r(C),(te=_.$$prototype).notations=te.lexer=te.modifier=te.suffix_number=te.prefix_number=te.need_suffix_number=te.need_prefix_number=te.critical=te.fumble=te.dollar=te.allowed_cmp_op=te.question_target=n,E(_,"$initialize",function V(S,Z){var H,L,ee,O,J=this;return V.$$p=null,H=c(arguments),L=I(H),L=p(L),ee=H,O=z(L,"round_type"),M(J,D(J,"initialize",V,!1,!0),"initialize",[],null),J.notations=ee,J.round_type=O,J.prefix_number=!1,J.suffix_number=!1,J.need_prefix_number=!1,J.need_suffix_number=!1,J.modifier=!0,J.critical=!1,J.fumble=!1,J.dollar=!1,J.allowed_cmp_op=[n,">=",">","<=","<","==","!="],J.question_target=!1},-2),E(_,"$disable_modifier",function(){return this.modifier=!1,this}),E(_,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),E(_,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),E(_,"$has_prefix_number",function(){var S=this;return S.prefix_number=!0,S.need_prefix_number=!0,S}),E(_,"$has_suffix_number",function(){var S=this;return S.suffix_number=!0,S.need_suffix_number=!0,S}),E(_,"$enable_critical",function(){return this.critical=!0,this}),E(_,"$enable_fumble",function(){return this.fumble=!0,this}),E(_,"$enable_dollar",function(){return this.dollar=!0,this}),E(_,"$restrict_cmp_op_to",function(S){var Z;return Z=c(arguments),this.allowed_cmp_op=Z,this},-1),E(_,"$enable_question_target",function(){return this.question_target=!0,this}),E(_,"$parse",function(S){var Z=this;try{return Z.lexer=x("Lexer").$new(S,Z.notations),Z.$do_parse()}catch(H){if(!e.rescue(H,[x("ParseError"),x("ZeroDivisionError")]))throw H;try{return n}finally{e.pop_exception()}}}),_.$private(),E(_,"$parsed",function(S,Z,H,L){try{return j("eval_return"),P(x("Parsed").$new(),"tap",[],function re(J){var ae,ce,oe,fe,de,le,me,_e=null==re.$$s?this:re.$$s;return null==_e.round_type&&(_e.round_type=n),null==J&&(J=n),J["$command="](S["$[]"]("command")),J["$prefix_number="]((ae=S["$[]"]("prefix"))===n||null==ae?n:ae.$eval(_e.round_type)),J["$suffix_number="]((ce=S["$[]"]("suffix"))===n||null==ce?n:ce.$eval(_e.round_type)),J["$critical="]((oe=Z["$[]"]("critical"))===n||null==oe?n:oe.$eval(_e.round_type)),J["$fumble="]((fe=Z["$[]"]("fumble"))===n||null==fe?n:fe.$eval(_e.round_type)),J["$dollar="]((de=Z["$[]"]("dollar"))===n||null==de?n:de.$eval(_e.round_type)),J["$modify_number="](H.$eval(_e.round_type)),J["$cmp_op="](L["$[]"]("cmp_op")),T(L["$[]"]("target"),"?")?(J["$question_target="](!0),P(J,"target_number=",le=[0]),le[le.length-1]):(J["$question_target="](!1),le=[(me=L["$[]"]("target"),me===n||null==me?n:me.$eval(_e.round_type))],P(J,"target_number=",le),le[le.length-1])},{$$s:this})}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),E(_,"$next_token",function(){return this.lexer.$next_token()}),v=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),i=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),R=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),t=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),f=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),$=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),W=[n,6,13,3,9,-1,27,-15,-10,-1,-38],X=[n,n,n,n,n,n,19,16,15,n,n],Q=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ue=Y(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),U(C[0],"Racc_arg",[v,i,t,R,f,$,X,W,19,Q,ue,58,35,!0]),U(C[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),U(C[0],"Racc_debug_parser",!1),E(_,"$_reduce_1",function(S,Z,H){var L,O=this;return N(O.modifier)||O.$raise(x("ParseError")),L=d(S),O.$parsed(null==L[0]?n:L[0],null==L[1]?n:L[1],null==L[2]?n:L[2],null==L[3]?n:L[3])}),E(_,"$_reduce_2",function(S,Z,H){var L,O=this;return N(O.modifier)||O.$raise(x("ParseError")),L=d(S),O.$parsed(null==L[0]?n:L[0],null==L[2]?n:L[2],null==L[1]?n:L[1],null==L[3]?n:L[3])}),E(_,"$_reduce_3",function(S,Z,H){var L,ae;return ae=null==(L=d(S))[2]?n:L[2],this.$parsed(null==L[0]?n:L[0],null==L[1]?n:L[1],w(w(x("Arithmetic"),"Node"),"Number").$new(0),ae)}),E(_,"$_reduce_4",function(S,Z,H){var L=this;return N(L.prefix_number)&&N(L.suffix_number)||L.$raise(x("ParseError")),K(["command","prefix","suffix"],{command:S["$[]"](1),prefix:S["$[]"](0),suffix:S["$[]"](2)})}),E(_,"$_reduce_5",function(S,Z,H){var L=this;return N(L.prefix_number)||L.$raise(x("ParseError")),N(L.need_suffix_number)&&L.$raise(x("ParseError")),K(["command","prefix"],{command:S["$[]"](1),prefix:S["$[]"](0)})}),E(_,"$_reduce_6",function(S,Z,H){var L=this;return N(L.suffix_number)||L.$raise(x("ParseError")),N(L.need_prefix_number)&&L.$raise(x("ParseError")),K(["command","suffix"],{command:S["$[]"](0),suffix:S["$[]"](1)})}),E(_,"$_reduce_7",function(S,Z,H){var L=this;return(N(L.need_prefix_number)||N(L.need_suffix_number))&&L.$raise(x("ParseError")),K(["command"],{command:S["$[]"](0)})}),E(_,"$_reduce_8",function(S,Z,H){return K([],{})}),E(_,"$_reduce_9",function(S,Z,H){var L,ae,re=n;return re=null==(L=d(S))[0]?n:L[0],ae=null==L[2]?n:L[2],N(this.critical)&&N(re["$[]"]("critical")["$nil?"]())||this.$raise(x("ParseError")),re["$[]="]("critical",ae),re}),E(_,"$_reduce_10",function(S,Z,H){var L,ae,re=n;return re=null==(L=d(S))[0]?n:L[0],ae=null==L[2]?n:L[2],N(this.fumble)&&N(re["$[]"]("fumble")["$nil?"]())||this.$raise(x("ParseError")),re["$[]="]("fumble",ae),re}),E(_,"$_reduce_11",function(S,Z,H){var L,ae,re=n;return re=null==(L=d(S))[0]?n:L[0],ae=null==L[2]?n:L[2],N(this.dollar)&&N(re["$[]"]("dollar")["$nil?"]())||this.$raise(x("ParseError")),re["$[]="]("dollar",ae),re}),E(_,"$_reduce_12",function(S,Z,H){return S["$[]"](1)}),E(_,"$_reduce_13",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"Negative").$new(S["$[]"](1))}),E(_,"$_reduce_14",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"+",S["$[]"](2))}),E(_,"$_reduce_15",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"-",S["$[]"](2))}),E(_,"$_reduce_16",function(S,Z,H){return N(this.allowed_cmp_op["$include?"](n))||this.$raise(x("ParseError")),K([],{})}),E(_,"$_reduce_17",function(S,Z,H){var L,re,J;return J=null==(L=d(S))[1]?n:L[1],N(this.allowed_cmp_op["$include?"](re=null==L[0]?n:L[0]))||this.$raise(x("ParseError")),K(["cmp_op","target"],{cmp_op:re,target:J})}),E(_,"$_reduce_18",function(S,Z,H){var ee,L=this;return ee=S["$[]"](0),N(L.question_target)||L.$raise(x("ParseError")),N(L.allowed_cmp_op["$include?"](ee))||L.$raise(x("ParseError")),K(["cmp_op","target"],{cmp_op:ee,target:"?"})}),E(_,"$_reduce_19",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"+",S["$[]"](2))}),E(_,"$_reduce_20",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"-",S["$[]"](2))}),E(_,"$_reduce_22",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"*",S["$[]"](2))}),E(_,"$_reduce_23",function(S,Z,H){return S["$[]"](3).$new(S["$[]"](0),S["$[]"](2))}),E(_,"$_reduce_25",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),E(_,"$_reduce_26",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"DivideWithCeil")}),E(_,"$_reduce_27",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"DivideWithCeil")}),E(_,"$_reduce_28",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"DivideWithRound")}),E(_,"$_reduce_29",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"DivideWithFloor")}),E(_,"$_reduce_30",function(S,Z,H){return S["$[]"](1)}),E(_,"$_reduce_31",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"Negative").$new(S["$[]"](1))}),E(_,"$_reduce_33",function(S,Z,H){return S["$[]"](1)}),E(_,"$_reduce_34",function(S,Z,H){return w(w(x("Arithmetic"),"Node"),"Number").$new(S["$[]"](0))}),E(_,"$_reduce_none",function(S,Z,H){return S["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var P,U,G,s,m,n,d,j,F=e.module,B=e.send,c=e.eqeqeq,I=e.truthy,p=e.def,z=e.return_val,M=[],D=e.nil;return P=M,U=j=[F(M[0],"BCDice")].concat(P),G=d=[F(j[0],"Deprecated")].concat(U),m=[s=F(d[0],"Checker")].concat(G),n=e.$r(m),s.$private(),p(s,"$check_result_legacy",function(r,a,b,A){var y,q=this,k=D,l=D,o=D,h=D;return k=B(a,"map",[],"sides".$to_proc()),y=(l=B(a,"map",[],"value".$to_proc())).$sum(),o=c([100],h=k)?q.$check_1D100(r,y,b,A):c([20],h)?q.$check_1D20(r,y,b,A):c([6,6],h)?q.$check_2D6(r,y,l,b,A):D,(I(o["$nil?"]())||I(o["$empty?"]()))&&(o=c([10],h=k.$uniq())?q.$check_nD10(r,y,l,b,A):c([6],h)?q.$check_nD6(r,y,l,b,A):D,I(o["$nil?"]())||I(o["$empty?"]()))?D:n("Result").$new(o.$delete_prefix(" \uff1e "))}),p(s,"$check_1D100",z(D)),p(s,"$check_1D20",z(D)),p(s,"$check_nD10",z(D)),p(s,"$check_2D6",z(D)),p(s,"$check_nD6",z(D))},Opal.modules["bcdice/base"]=function(e){var m,q,h,x,i,R,u,g,_,C,l,F=e.module,B=e.klass,c=e.slice,I=e.rb_plus,p=e.truthy,z=e.def,M=e.regexp,D=e.send,E=e.thrower,P=e.return_ivar,T=e.assign_ivar_val,j=e.eqeqeq,Y=e.eqeq,U=e.return_val,N=e.range,d=e.rb_minus,K=e.rb_divide,G=e.rb_times,s=e.rb_ge,n=e.top,w=[],r=e.$r(w),a=e.nil,b=e.$$$;return n.$require("i18n"),n.$require("i18n/backend/fallbacks"),n.$require("bcdice/randomizer"),n.$require("bcdice/dice_table"),n.$require("bcdice/enum"),n.$require("bcdice/translate"),n.$require("bcdice/result"),n.$require("bcdice/command/parser"),n.$require("bcdice/deprecated/checker"),q=w,h=l=[F(w[0],"BCDice")].concat(q),g=[u=B(l[0],null,"Base")].concat(h),_=e.$r(g),(C=u.$$prototype).raw_input=C.randomizer=C.enabled_upcase_input=C.debug=a,i=[x=e.get_singleton_class(u)].concat(g),R=e.$r(i),x.$attr_reader("prefixes"),z(x,"$register_prefix",function(f){var W,Q,X=this;return null==X.prefixes&&(X.prefixes=a),W=c(arguments),X.prefixes=I(p(Q=X.prefixes)?Q:[],W.$flatten())},-1),z(x,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),z(x,"$prefixes_pattern",function(){var f=this,$=a;return null==f.prefixes_pattern&&(f.prefixes_pattern=a),null==f.prefixes&&(f.prefixes=a),f.prefixes_pattern=p($=f.prefixes_pattern)?$:a,p(f.prefixes_pattern)?f.prefixes_pattern:(f.prefixes=p($=f.prefixes)?$:[],f.prefixes.$freeze(),f.prefixes_pattern=(p(f.prefixes["$empty?"]())?/(?!)/:M(["^(S)?(",f.prefixes.$join("|"),")"],"i")).$freeze())}),z(x,"$command_pattern",function(){var f=this,$=a,W=a;return null==f.command_pattern&&(f.command_pattern=a),null==f.prefixes&&(f.prefixes=a),f.command_pattern=p($=f.command_pattern)?$:a,p(f.command_pattern)?f.command_pattern:(f.prefixes=p($=f.prefixes)?$:[],f.prefixes.$freeze(),W=I(D(b(R("CommonCommand"),"COMMANDS"),"map",[],function(Q){return null==Q&&(Q=a),b(Q,"PREFIX_PATTERN").$source()}),f.prefixes),f.command_pattern=M(["^S?(",W.$join("|"),")"],"i").$freeze())}),z(x,"$eval",function(f){try{return E("eval_return"),this.$new(f).$eval()}catch(X){if(X===e.t_eval_return)return X.$v;throw X}}),u.$include(_("Translate")),u.$include(b(_("Deprecated"),"Checker")),z(u,"$initialize",function(v){var i=this;return i.raw_input=v,i.sort_add_dice=!1,i.sort_barabara_dice=!1,i.d66_sort_type=b(_("D66SortType"),"NO_SORT"),i.enabled_d9=!1,i.round_type=b(_("RoundType"),"FLOOR"),i.sides_implicit_d=6,i.upper_dice_reroll_threshold=a,i.reroll_dice_reroll_threshold=a,i.default_cmp_op=a,i.default_target_number=a,i.enabled_upcase_input=!0,i.locale="ja_jp",i.randomizer=b(_("BCDice"),"Randomizer").$new(),i.debug=!1}),u.$attr_accessor("randomizer"),u.$attr_reader("d66_sort_type"),u.$attr_reader("round_type"),u.$attr_reader("sides_implicit_d"),u.$attr_reader("upper_dice_reroll_threshold"),u.$attr_reader("reroll_dice_reroll_threshold"),u.$attr_reader("default_cmp_op"),u.$attr_reader("default_target_number"),z(u,"$sort_add_dice?",P("sort_add_dice")),z(u,"$sort_barabara_dice?",P("sort_barabara_dice")),z(u,"$enabled_d9?",P("enabled_d9")),z(u,"$enable_debug",T("debug",!0)),z(u,"$eval",function(){var i,t,v=this,R=a;return i=b(_("BCDice"),"Preprocessor").$process(v.raw_input,v),R=p(t=v.$dice_command(i))?t:v.$eval_common_command(v.raw_input),p(R)?(R["$rands="](v.randomizer.$rand_results()),R["$detailed_rands="](v.randomizer.$detailed_rand_results()),R):a}),z(u,"$change_text",function(v){return v}),z(u,"$check_result",function(v,i,R,t){var f=this,$=a,W=a,X=a,Q=a,ie=a;return $=f.$check_result_legacy(v,i,R,t),p($)?$:(W=D(i,"map",[],"sides".$to_proc()),Q=(X=D(i,"map",[],"value".$to_proc())).$sum(),$=j([100],ie=W)?f.$result_1d100(v,Q,R,t):j([20],ie)?f.$result_1d20(v,Q,R,t):j([6,6],ie)?f.$result_2d6(v,Q,X,R,t):a,Y($,_("Result").$nothing())?a:p($)?$:($=j([10],ie=W.$uniq())?f.$result_nd10(v,Q,X,R,t):j([6],ie)?f.$result_nd6(v,Q,X,R,t):a,Y($,_("Result").$nothing())?a:p($)?$:f.$result_ndx(v,R,t)))}),z(u,"$grich_text",U(a)),u.$private(),z(u,"$eval_common_command",function(v){try{E("eval_return");var R=E("return");return v=this.$change_text(v),D(b(_("CommonCommand"),"COMMANDS"),"each",[],function f($){var X,W=null==f.$$s?this:f.$$s;if(null==W.randomizer&&(W.randomizer=a),null==$&&($=a),X=$.$eval(v,W,W.randomizer),!p(X))return a;R.$throw(X)},{$$s:this,$$ret:R}),a}catch(f){if(f===e.t_eval_return||f===R)return f.$v;throw f}}),z(u,"$dice_command",function(v){var i=this,R=a,t=a,f=a,$=a;return p(i.enabled_upcase_input)&&(v=v.$upcase()),R=i.$class().$prefixes_pattern().$match(v),p(R)?(t=R["$[]"](1)["$nil?"]()["$!"](),p(t)&&(v=v["$[]"](N(1,-1,!1))),f=i.$eval_game_system_specific_command(v),p(f["$is_a?"](_("Result")))?(f["$secret="](p($=f["$secret?"]())?$:t),f):p(f["$nil?"]())||p(f["$empty?"]())||Y(f,"1")?a:D(_("Result").$new(),"tap",[],function(X){var Q;return null==X&&(X=a),X["$text="](f.$to_s()),D(X,"secret=",Q=[t]),Q[Q.length-1]})):a}),z(u,"$eval_game_system_specific_command",U(a)),z(u,"$result_ndx",function(v,i,R){return p(R["$is_a?"](_("String")))?a:p(v.$send(i,R))?_("Result").$success(this.$translate("success")):_("Result").$failure(this.$translate("failure"))}),z(u,"$result_1d100",U(a)),z(u,"$result_1d20",U(a)),z(u,"$result_nd10",U(a)),z(u,"$result_2d6",U(a)),z(u,"$result_nd6",U(a)),z(u,"$get_table_by_2d6",function(v){return this.$get_table_by_nD6(v,2)}),z(u,"$get_table_by_1d6",function(v){return this.$get_table_by_nD6(v,1)}),z(u,"$get_table_by_nD6",function(v,i){return this.$get_table_by_nDx(v,i,6)}),z(u,"$get_table_by_nDx",function(v,i,R){var f,$=a;return f=this.randomizer.$roll_sum(i,R),$=this.$get_table_value(v["$[]"](d(f,i))),p($["$nil?"]())?["1",0]:[$,f]}),z(u,"$get_table_by_1d3",function(v){var t,f,i=this,$=a;return i.$debug("get_table_by_1d3"),t=i.randomizer.$roll_sum(1,6),i.$debug("num",t),f=K(d(t,1),2).$to_i(),i.$debug("index",f),$=v["$[]"](f),p($["$nil?"]())?["1",0]:[$,t]}),z(u,"$get_table_by_d66_swap",function(v){var R;return R=this.randomizer.$roll_d66(b(_("D66SortType"),"ASC")),[this.$get_table_by_number(R,v),R]}),z(u,"$get_table_by_d66",function(v){var R,t,f,W,$=a;return R=this.randomizer.$roll_once(6),t=this.randomizer.$roll_once(6),f=I(G(d(R,1),6),d(t,1)),$=v["$[]"](f),W=""+R+t,p($["$nil?"]())?["1",W]:[$,W]}),z(u,"$get_table_by_number",function(v,i,R){try{var t=E("return");return null==R&&(R="1"),D(i,"each",[],function $(W){var Q,X=null==$.$$s?this:$.$$s;if(null==W&&(W=a),Q=W["$[]"](0),!p(s(Q,v)))return a;t.$throw(X.$get_table_value(W["$[]"](1)))},{$$s:this,$$ret:t}),this.$get_table_value(R)}catch($){if($===t)return $.$v;throw $}},-3),z(u,"$get_table_value",function(v){return p(v["$is_a?"](_("Proc")))?v.$call():v}),z(u,"$roll_tables",function(v,i){var t=a;return t=i["$[]"](v),p(t)?t.$roll(this.randomizer).$to_s():a}),z(u,"$debug",function(v,i){var t,f=this,$=a,W=a;return t=c(arguments,1),p(f.debug)?($=p(v["$is_a?"](_("String")))?v:v.$inspect(),p(t["$empty?"]())?f.$warn($):(W=D(t,"map",[],function(Q){return null==Q&&(Q=a),p(Q["$is_a?"](_("String")))?'"'+Q+'"':Q.$inspect()}),f.$warn($+": "+W.$join(", ")))):a},-2),b(b(r("I18n"),"Backend"),"Simple").$include(b(b(r("I18n"),"Backend"),"Fallbacks")),r("I18n").$load_path()["$<<"](r("Dir")["$[]"](r("File").$join("bcdice","../../i18n/**/*.yml"))),r("I18n")["$default_locale="]("ja_jp"),m=[["ja_jp"]],D(r("I18n").$fallbacks(),"defaults=",m),m[m.length-1]},Opal.queue(function(e){var s,r,l,y,o,h,b,A,n,F=e.module,B=e.klass,c=e.const_set,I=e.hash2,p=e.truthy,z=e.rb_lt,M=e.rb_gt,D=e.send,E=e.rb_plus,P=e.rb_ge,T=e.rb_minus,j=e.def,Y=e.rb_le,N=[],d=e.nil,K=e.$$$;return e.top.$require("bcdice/base"),s=N,r=n=[F(N[0],"BCDice")].concat(s),b=[F(n[0],"GameSystem")].concat(r),A=e.$r(b),l=b,o=[y=B(b[0],A("Base"),"Ventangle")].concat(l),h=e.$r(o),y.$$prototype.randomizer=d,c(o[0],"ID","Ventangle"),c(o[0],"NAME","Ventangle"),c(o[0],"SORT_KEY","\u3046\u3048\u3093\u305f\u3093\u304f\u308b"),c(o[0],"HELP_MESSAGE","\u57fa\u672c\u66f8\u5f0f VTn@s#f$g>=T n=\u30c0\u30a4\u30b9\u6570\uff08\u7701\u7565\u66422\uff09 s=\u30b9\u30da\u30b7\u30e3\u30eb\u5024\uff08\u7701\u7565\u664212\uff09 f=\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\uff08\u7701\u7565\u66422\uff09 g=\u30ec\u30d9\u30eb\u30ae\u30e3\u30c3\u30d7\u5224\u5b9a\u5024\uff08\u7701\u7565\u53ef\uff09 T=\u76ee\u6a19\u5024\uff08\u7701\u7565\u53ef\uff09\n\n\u4f8b\uff1a\nVT        \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b9\u30da\u30b7\u30e3\u30eb\u5024\u30fb\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306e\u5224\u5b9a\u3092\u884c\u3046\nVT@10#3   \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u306e\u5224\u5b9a\u3092\u884c\u3046\nVT3@10#3  \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u306e\u5224\u5b9a\u3092\u3001\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u30921\u70b9\u6d88\u8cbb\u3057\u3066\u30c0\u30a4\u30b93\u3064\u3067\u884c\u3046\n\nVT>=5         \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b9\u30da\u30b7\u30e3\u30eb\u5024\u30fb\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u884c\u3046\nVT@10#3>=5    \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u884c\u3046\nVT@10#3$5>=5  \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u884c\u3046\u3002\u3053\u306e\u969b\u9054\u6210\u5024\u304c\u76ee\u6a19\u5024\u3088\u308a5\u4ee5\u4e0a\u5927\u304d\u3044\u5834\u5408\u3001\u30ae\u30e3\u30c3\u30d7\u30dc\u30fc\u30ca\u30b9\u3092\u8868\u793a\u3059\u308b\nVT3@10#3>=5   \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u3001\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u30921\u70b9\u6d88\u8cbb\u3057\u3066\u30c0\u30a4\u30b93\u3064\u3067\u884c\u3046\nVT3@10#3$4>=5 \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u3001\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u30921\u70b9\u6d88\u8cbb\u3057\u3066\u30c0\u30a4\u30b93\u3064\u3067\u884c\u3046\u3002\u3053\u306e\u969b\u9054\u6210\u5024\u304c\u76ee\u6a19\u5024\u3088\u308a4\u4ee5\u4e0a\u5927\u304d\u3044\u5834\u5408\u3001\u30ae\u30e3\u30c3\u30d7\u30dc\u30fc\u30ca\u30b9\u3092\u8868\u793a\u3059\u308b\n"),c(o[0],"DEFAULT_SPECIAL_VALUE",12),c(o[0],"DEFAULT_FUMBLE_VALUE",2),c(o[0],"DEFAULT_DICE_NUM",2),y.$register_prefix("VT"),j(y,"$eval_game_system_specific_command",function(_){var C=this,v=d,i=d,R=d,t=d,f=d,$=d,W=d,X=d,Q=d,ie=d,$e=d,ue=d,ne=d,se=d;return C.$debug("eval_game_system_specific_command Begin"),v=K(h("Command"),"Parser").$new("VT",I(["round_type"],{round_type:C.$round_type()})).$enable_critical().$enable_fumble().$enable_dollar().$enable_suffix_number().$restrict_cmp_op_to(d,">=").$parse(_),!p(v)||(i=p(R=v.$suffix_number())?R:h("DEFAULT_DICE_NUM"),p(z(i,h("DEFAULT_DICE_NUM"))))?d:(t=C.randomizer.$roll_barabara(i,6),p(M(i,2))?(f=0,$=D(D(D(D(t.$map(),"with_index",[],function(V,S){return null==V&&(V=d),null==S&&(S=d),I(["index","value"],{index:S,value:V})}),"sort_by",[],function(V){return null==V&&(V=d),[V["$[]"]("value"),f=E(f,1)]}).$reverse().$take(2),"sort_by",[],function(V){return null==V&&(V=d),V["$[]"]("index")}),"map",[],function(V){return null==V&&(V=d),V["$[]"]("value")})):$=t,W=$.$sum(),X=E(W,v.$modify_number()),Q=C.$compare(W,X,v),ie=p(M(i,2))?$.$to_s():d,$e=p(M(v.$modify_number(),0))?""+W+h("Format").$modifier(v.$modify_number()):d,ue=p(v.$target_number())&&p(v.$dollar())&&p(Q["$success?"]())&&p(P(ne=T(X,v.$target_number()),v.$dollar()))?"\u30ae\u30e3\u30c3\u30d7\u30dc\u30fc\u30ca\u30b9("+ne+")":d,se=[v.$to_s(),t.$to_s(),ie,$e,X.$to_s(),Q.$text(),ue].$compact(),Q["$text="](se.$join(" \uff1e ")),Q)}),j(y,"$compare",function(_,C,x){var v,R,i=d;return v=p(i=x.$critical())?i:h("DEFAULT_SPECIAL_VALUE"),R=p(i=x.$fumble())?i:h("DEFAULT_FUMBLE_VALUE"),p(Y(_,R))?h("Result").$fumble("\u30d5\u30a1\u30f3\u30d6\u30eb"):p(P(_,v))?h("Result").$critical("\u30b9\u30da\u30b7\u30e3\u30eb"):p(x.$target_number())?p(C.$send(x.$cmp_op(),x.$target_number()))?h("Result").$success("\u6210\u529f"):h("Result").$failure("\u5931\u6557"):h("Result").$new(d)})})}}]);