(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1593],{5214:(Q,U,q)=>{q(9993),Opal.queue(function(n){var A,j,Y,o,g,_,m,I,w,z=[],i=n.nil,C=n.$$$,T=n.module,E=n.klass,x=n.const_set,M=n.send2,F=n.find_super,a=n.def,c=n.truthy,u=n.send,s=n.to_a,l=n.rb_minus,d=n.rb_plus,R=n.rb_ge,G=n.eqeq,L=n.rb_lt;return A=z,j=w=[T(z[0],"BCDice")].concat(A),m=[T(w[0],"GameSystem")].concat(j),I=n.$r(m),Y=m,g=[o=E(m[0],I("Base"),"StrangerOfSwordCity")].concat(Y),_=n.$r(g),o.$$prototype.randomizer=i,x(g[0],"ID","StrangerOfSwordCity"),x(g[0],"NAME","\u5263\u306e\u8857\u306e\u7570\u90a6\u4ebaTRPG"),x(g[0],"SORT_KEY","\u3064\u308b\u304d\u306e\u307e\u3061\u306e\u3044\u307b\u3046\u3057\u3093TRPG"),x(g[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u3000xSR or xSRy or xSR+y or xSR-y or xSR+y>=z\n\u3000x=\u30c0\u30a4\u30b9\u6570\u3001y=\u4fee\u6b63\u5024(\u7701\u7565\u53ef\u3001\xb1\u7701\u7565\u6642\u306f\uff0b\u3068\u3057\u3066\u6271\u3046)\u3001z=\u96e3\u6613\u5ea6(\u7701\u7565\u53ef)\n\u3000\u5224\u5b9a\u6642\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u30fb\u901a\u5e38\u306enD6\u3067\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u306f\u884c\u3044\u307e\u305b\u3093\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),o.$register_prefix("\\d+SR"),a(o,"$initialize",function f(r){var t=this;return delete f.$$p,M(t,F(t,"initialize",f,!1,!0),"initialize",[r],null),t.sort_add_dice=!0,t.d66_sort_type=C(_("D66SortType"),"NO_SORT"),t.round_type=C(_("RoundType"),"FLOOR")},1),a(o,"$eval_game_system_specific_command",function(r){var t=i;return this.$debug("eval_game_system_specific_command command",r),r=r.$upcase(),t=this.$checkRoll(r),c(t["$instance_of?"](_("Result")))||c(t["$empty?"]()),t},1),a(o,"$checkRoll",function(r){var $=this,t=i,e=i,y=i,b=i,S=i,h=i,v=i,p=i,D=i,k=i;return $.$debug("checkRoll begin command",r),t=_("Result").$new(),u(t,"text=",s(e=[""])),l(e.length,1),c(r["$=~"](/^(\d+)SR([+\-]?\d+)?(>=(\d+))?$/i))?(y=_("Regexp").$last_match(1).$to_i(),b=_("Regexp").$last_match(2).$to_i(),c(_("Regexp").$last_match(4))&&(S=_("Regexp").$last_match(4).$to_i()),v=(h=$.randomizer.$roll_barabara(y,6).$sort()).$sum(),p=d(v,b),D=$.$getModifyText(b),e=[d(t.$text(),"("+r+") \uff1e "+v+"["+h.$join(",")+"]"+D+" \uff1e "+p)],u(t,"text=",s(e)),l(e.length,1),k=$.$getCriticalResult(h),c(k["$nil?"]())?c($.$isFumble(h,y))?(u(t,"fumble=",s(e=[!0])),l(e.length,1),u(t,"failure=",s(e=[!0])),l(e.length,1),e=[d(t.$text()," \uff1e \u30d5\u30a1\u30f3\u30d6\u30eb")],u(t,"text=",s(e)),l(e.length,1),t):(c(S["$nil?"]())||(c(R(p,S))?(u(t,"success=",s(e=[!0])),l(e.length,1),e=[d(t.$text()," \uff1e \u6210\u529f")],u(t,"text=",s(e)),l(e.length,1)):(u(t,"failure=",s(e=[!0])),l(e.length,1),e=[d(t.$text()," \uff1e \u5931\u6557")],u(t,"text=",s(e)),l(e.length,1))),t):(u(t,"critical=",s(e=[!0])),l(e.length,1),u(t,"success=",s(e=[!0])),l(e.length,1),e=[d(t.$text()," \uff1e \u30af\u30ea\u30c6\u30a3\u30ab\u30eb(+"+k+"D6)")],u(t,"text=",s(e)),l(e.length,1),t)):t},1),a(o,"$getModifyText",function(r){return G(r,0)?"":c(L(r,0))?r.$to_s():"+"+r},1),a(o,"$getCriticalResult",function(r){var $=i;return $=u(r,"select",[],function(e){return null==e&&(e=i),e["$=="](6)},1).$size(),c(R($,2))?$.$to_s():i},1),a(o,"$isFumble",function(r,$){return R(u(r,"select",[],function(e){return null==e&&(e=i),e["$=="](1)},1).$size(),$)},2)})}}]);