(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4366],{84366:function(e,n,l){l(93683),Opal.modules["bcdice/game_system/beginning_idol/chain_table"]=function(e){var n,l,i,a,t,o,r,$,c,s,b,m=[],u=e.nil,d=e.$$,_=e.module,g=e.klass,T=e.truthy,f=e.send;return n=m,l=b=[_(m[0],"BCDice")].concat(n),i=s=[_(b[0],"GameSystem")].concat(l),a=c=[g(s[0],d(s,"Base"),"BeginningIdol")].concat(i),r=g(c[0],null,"ChainTable"),$=[r].concat(a),r.$$prototype.times=r.$$prototype.sides=r.$$prototype.items=r.$$prototype.name=u,e.def(r,"$initialize",t=function(e,n,l){var i=this,a=u;return i.name=e,i.items=l.$freeze(),a=/^(\d+)D(\d+)$/i.$match(n),T(a)||i.$raise(d($,"ArgumentError"),"Unexpected table type: "+n),i.times=a["$[]"](1).$to_i(),i.sides=a["$[]"](2).$to_i()},t.$$arity=3),void e.def(r,"$roll",o=function(e){var n,l,i,a,t,o=this;return i=function(e,n){return"number"==typeof e&&"number"==typeof n?e-n:e["$-"](n)}(l=e.$roll_sum(o.times,o.sides),o.times),a=o.items["$[]"](i),t=f(a,"map",[],(n=function(n){return null==n&&(n=u),T(n["$respond_to?"]("roll"))?n.$roll(e):n},n.$$s=o,n.$$arity=1,n)).$join("\n"),o.name+"("+l+") \uff1e "+t},o.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/chain_d66_table"]=function(e){var n,l,i,a,t,o,r,$,c,s,b=[],m=e.nil,u=e.$$,d=e.module,_=e.klass,g=e.send,T=e.truthy;return n=b,l=s=[d(b[0],"BCDice")].concat(n),r=c=[d(s[0],"GameSystem")].concat(l),i=$=[_(c[0],u(c,"Base"),"BeginningIdol")].concat(r),[o=_($[0],null,"ChainD66Table")].concat(i),o.$$prototype.items=o.$$prototype.name=m,e.def(o,"$initialize",a=function(e,n){return this.name=e,this.items=n.$freeze()},a.$$arity=2),void e.def(o,"$roll",t=function(e){var n,l,i,a,t=this,o=m,r=m;return r=function(e,n){return"number"==typeof e&&"number"==typeof n?e+n:e["$+"](n)}("number"==typeof(a=(o=e.$roll_barabara(2,6).$sort())["$[]"](0))?10*a:a["$*"](10),o["$[]"](1)),l=t.items["$[]"](r.$to_s()),i=g(l,"map",[],(n=function(n){return null==n&&(n=m),T(n["$respond_to?"]("roll"))?n.$roll(e):n},n.$$s=t,n.$$arity=1,n)).$join("\n"),t.name+"("+r+") \uff1e "+i},t.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/bad_status_table"]=function(e){var n,l,i,a,t,o,r,$,c,s,b,m,u=[],d=e.nil,_=e.$$,g=e.module,T=e.klass,f=e.truthy,B=e.send,y=e.hash2;return n=u,l=m=[g(u[0],"BCDice")].concat(n),i=b=[g(m[0],"GameSystem")].concat(l),a=s=[T(b[0],_(b,"Base"),"BeginningIdol")].concat(i),$=T(s[0],null,"BadStatusTable"),c=[$].concat(a),$.$$prototype.locale=d,e.def($,"$initialize",t=function(e){return this.locale=e},t.$$arity=1),e.def($,"$roll_command",o=function(e,n){var l,i=d,a=d,t=d;return i=/^BT(\d+)?$/.$match(n),f(i)?(a=f(t=(l=i["$[]"](1))===d||null==l?d:B(l,"to_i",[]))?t:1,this.$roll(e,a)):d},o.$$arity=2),void e.def($,"$roll",r=function(e,n){var l,i,a=this,t=d,o=d,r=d,$=d,s=d,b=d,m=d;return null==n&&(n=1),f("number"==typeof(i=n)?i<=0:i["$<="](0))?d:(t=_(c,"I18n").$t("BeginningIdol.BT.name",y(["locale"],{locale:a.locale})),o=_(c,"I18n").$t("BeginningIdol.BT.items",y(["locale"],{locale:a.locale})),r=_(c,"I18n").$t("BeginningIdol.BT.prefix_format",y(["locale"],{locale:a.locale})),s=($=e.$roll_barabara(n,6).$sort()).$uniq(),f(function(e,n){return"number"==typeof e?e>1:e["$>"](1)}(s.$size()))&&(b=function(e,n){return e["$+"]("\n")}(a.$format(r,y(["count_bad_status"],{count_bad_status:s.$size()})))),m=B(s,"map",[],(l=function(e){return null==e&&(e=d),o["$[]"](function(e,n){return"number"==typeof e?e-1:e["$-"](1)}(e))},l.$$s=a,l.$$arity=1,l)).$join("\n"),t+" \uff1e ["+$.$join(",")+"] \uff1e "+b+m)},r.$$arity=-2)},Opal.modules["bcdice/game_system/beginning_idol/random_event_table"]=function(e){var n,l,i,a,t,o,r,$,c,s,b,m=[],u=e.nil,d=e.$$$,_=e.$$,g=e.module,T=e.klass,f=e.truthy,B=e.hash2;return n=m,l=b=[g(m[0],"BCDice")].concat(n),i=s=[g(b[0],"GameSystem")].concat(l),a=c=[T(s[0],_(s,"Base"),"BeginningIdol")].concat(i),r=T(c[0],null,"RandomEventTable"),$=[r].concat(a),r.$$prototype.locale=u,e.def(r,"$initialize",t=function(e){return this.locale=e},t.$$arity=1),void e.def(r,"$roll",o=function(e){var n,l,i,a=this,t=u,o=u,r=u,c=u;return t=e.$roll_once(6),o=e.$roll_d66(d(_($,"D66SortType"),"NO_SORT")),n=f(t["$even?"]())?"BeginningIdol.RE.on_event":"BeginningIdol.RE.off_event",r=_($,"I18n").$t(n,B(["locale"],{locale:a.locale})),l=_($,"I18n").$t("BeginningIdol.RE.name",B(["locale"],{locale:a.locale})),i=_($,"I18n").$t("BeginningIdol.RE.format",B(["locale"],{locale:a.locale})),c=r["$[]"]("items")["$[]"](o.$to_s()),l+" \uff1e (1D6) \uff1e "+t+"\n"+r["$[]"]("name")+" \uff1e ["+o+"] \uff1e "+a.$format(i,B(["event","page"],{event:c["$[]"](0),page:c["$[]"](1)}))},o.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/my_skill_name_table"]=function(e){function n(e,n){return"number"==typeof e&&"number"==typeof n?e-n:e["$-"](n)}var l,i,a,t,o,r,$,c,s,b,m,u=[],d=e.nil,_=e.$$$,g=e.$$,T=e.module,f=e.klass,B=e.send,y=e.hash2;return l=u,i=m=[T(u[0],"BCDice")].concat(l),a=b=[T(m[0],"GameSystem")].concat(i),t=s=[f(b[0],g(b,"Base"),"BeginningIdol")].concat(a),$=f(s[0],null,"MySkillNameTable"),c=[$].concat(t),$.$$prototype.chains=$.$$prototype.locale=d,e.def($,"$initialize",o=function(e){var n=d,l=d,i=d,a=d,t=d;return this.locale=e,n=_(g(c,"DiceTable"),"Table").$from_i18n("BeginningIdol.MS.subtables.article",e),l=_(g(c,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.describe",e),i=_(g(c,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.scene",e),a=_(g(c,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.material",e),t=_(g(c,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.MS.subtables.action",e),this.chains=[[l,i,a],[l,i,t],[l,a,t],[i,a,t],[l,i,n],[a,t,n]].$freeze()},o.$$arity=1),void e.def($,"$roll",r=function(l){var i,a,t,o,r,$,s=this,b=d,m=d;return t=l.$roll_once(6),o=B(s.chains["$[]"](n(t,1)),"map",[],((i=function(e){return null==e&&(e=d),e.$roll(l)}).$$s=s,i.$$arity=1,i)),b=B(o,"map",[],((a=function(e){return null==e&&(e=d),function(e,n){return"number"==typeof e&&"number"==typeof n?e+n:e["$+"](n)}(e.$table_name(),e.$value().$to_s())}).$$s=s,a.$$arity=1,a)),r=g(c,"I18n").$t("BeginningIdol.MS.name",y(["locale"],{locale:s.locale})),m=g(c,"I18n").$t("BeginningIdol.MS.formats",y(["locale"],{locale:s.locale}))["$[]"](n(t,1)),$=B(s,"format",[m].concat(e.to_a(B(o,"map",[],"body".$to_proc())))),r+" \uff1e ["+t+","+b.$join(",")+"] \uff1e "+$},r.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/d6_twice_table"]=function(e){function n(e,n){return"number"==typeof e&&"number"==typeof n?e-n:e["$-"](n)}var l,i,a,t,o,r,$,c,s,b,m,u,d=[],_=e.nil,g=e.$$,T=e.module,f=e.klass,B=e.hash2;return l=d,i=u=[T(d[0],"BCDice")].concat(l),a=m=[T(u[0],"GameSystem")].concat(i),t=b=[f(m[0],g(m,"Base"),"BeginningIdol")].concat(a),c=f(b[0],null,"D6TwiceTable"),s=[c].concat(t),c.$$prototype.items1=c.$$prototype.items2=c.$$prototype.name=_,e.defs(c,"$from_i18n",o=function(e,n){var l=_;return l=g(s,"I18n").$t(e,B(["locale"],{locale:n})),this.$new(l["$[]"]("name"),l["$[]"]("items1"),l["$[]"]("items2"))},o.$$arity=2),e.def(c,"$initialize",r=function(e,n,l){var i=this;return i.name=e,i.items1=n,i.items2=l},r.$$arity=3),void e.def(c,"$roll",$=function(l){var i,a,t,o,r,$,c=this;return a=l.$roll_barabara(2,6),o=null==(i=e.to_ary(a))[1]?_:i[1],r=c.items1["$[]"](n(t=null==i[0]?_:i[0],1)),$=c.items2["$[]"](n(o,1)),c.name+"["+t+","+o+"] \uff1e "+r+$},$.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/item_table"]=function(e){var n,l,i,a,t,o,r,$,c,s,b,m,u=[],d=e.nil,_=e.$$,g=e.module,T=e.klass,f=e.truthy,B=e.send,y=e.hash2;return n=u,l=m=[g(u[0],"BCDice")].concat(n),i=b=[g(m[0],"GameSystem")].concat(l),a=s=[T(b[0],_(b,"Base"),"BeginningIdol")].concat(i),$=T(s[0],null,"ItemTable"),c=[$].concat(a),$.$$prototype.locale=d,e.def($,"$initialize",t=function(e){return this.locale=e},t.$$arity=1),e.def($,"$roll_command",o=function(e,n){var l,i=d,a=d,t=d;return i=/^IT(\d+)?$/.$match(n),f(i)?(a=f(t=(l=i["$[]"](1))===d||null==l?d:B(l,"to_i",[]))?t:1,this.$roll(e,a)):d},o.$$arity=2),void e.def($,"$roll",r=function(e,n){var l,i=d,a=d,t=d,o=d;return null==n&&(n=1),n["$=="](0)?d:(i=_(c,"I18n").$t("BeginningIdol.item_table",y(["locale"],{locale:this.locale})),a=e.$roll_barabara(n,6).$sort(),t=B(a,"group_by",[],"itself".$to_proc()),o=B(t,"map",[],((l=function(e,n){var o,r=null==l.$$s?this:l.$$s,$=d;return null==e&&(e=d),null==n&&(n=d),$=i["$[]"]("items")["$[]"]("number"==typeof(o=e)?o-1:o["$-"](1)),f(t.$size()["$!="](1))&&($=r.$format(i["$[]"]("emph"),y(["item"],{item:$}))),a.$size()["$=="](t.$size())?$:r.$format(i["$[]"]("counting"),y(["item","count"],{item:$,count:n.$size()}))}).$$s=this,l.$$arity=2,l)),i["$[]"]("name")+" \uff1e ["+a.$join(",")+"] \uff1e "+o.$join(i["$[]"]("sep")))},r.$$arity=-2)},Opal.modules["bcdice/game_system/beginning_idol/costume_table"]=function(e){var n,l,i,a,t,o,r,$,c,s,b,m,u,d=[],_=e.nil,g=e.$$$,T=e.$$,f=e.module,B=e.klass,y=e.hash2,I=e.send;return n=d,l=u=[f(d[0],"BCDice")].concat(n),i=m=[f(u[0],"GameSystem")].concat(l),a=b=[B(m[0],T(m,"Base"),"BeginningIdol")].concat(i),c=B(b[0],null,"CostumeTable"),s=[c].concat(a),c.$$prototype.name=c.$$prototype.items=_,e.defs(c,"$from_i18n",t=function(e,n){var l=_;return l=T(s,"I18n").$t(e,y(["locale"],{locale:n})),this.$new(l["$[]"]("name"),l["$[]"]("items"))},t.$$arity=2),e.def(c,"$initialize",o=function(e,n){return this.name=e,this.items=n},o.$$arity=2),e.def(c,"$roll",r=function(e){var n=_;return n=e.$roll_d66(g(T(s,"D66SortType"),"ASC")),this.name+"("+n+") \uff1e "+this.items["$[]"](n.$to_s())},r.$$arity=1),void e.def(c,"$brand_only",$=function(){var e,n=this;return g(T(s,"DiceTable"),"D66Table").$new(n.name,g(T(s,"D66SortType"),"ASC"),I(n.items,"transform_values",[],((e=function(e){return null==e&&(e=_),e.$split("\n").$first()}).$$s=n,e.$$arity=1,e)))},$.$$arity=0)},Opal.modules["bcdice/game_system/beginning_idol/accessories_table"]=function(e){var n,l,i,a,t,o,r,$,c,s,b=[],m=e.nil,u=e.$$$,d=e.$$,_=e.module,g=e.klass,T=e.hash2;return n=b,l=s=[_(b[0],"BCDice")].concat(n),i=c=[_(s[0],"GameSystem")].concat(l),$=[r=g(c[0],d(c,"Base"),"BeginningIdol")].concat(i),a=e.get_singleton_class(r),o=[a].concat($),a.$private(),void e.def(a,"$translate_accessories_table",t=function(e){var n,l=m;return l=d(o,"I18n").$t("BeginningIdol.ACT.items",T(["locale"],{locale:e})),n=[u(d(o,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.head",e),u(d(o,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.hat",e),u(d(o,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.body",e),u(d(o,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.arm",e),u(d(o,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.foot",e),u(d(o,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.ACT.subtables.other",e)],d(o,"ChainTable").$new(d(o,"I18n").$t("BeginningIdol.ACT.name",T(["locale"],{locale:e})),"1D6",l.$zip(n))},t.$$arity=1)},Opal.modules["bcdice/game_system/beginning_idol/with_abnormality"]=function(e){var n,l,i,a,t,o,r,$,c,s,b,m,u,d=[],_=e.nil,g=e.$$$,T=e.$$,f=e.module,B=e.klass,y=e.hash2,I=e.truthy,p=e.send,D=e.send2;return n=d,l=u=[f(d[0],"BCDice")].concat(n),i=(m=[f(u[0],"GameSystem")].concat(l))[0],a=T(m,"Base"),t=m,o=b=[B(i,a,"BeginningIdol")].concat(t),c=f(b[0],"WithAbnormality"),s=[c].concat(o),e.def(c,"$replace_abnormality",r=function(e,n){var l=this,i=_,a=_,t=_,o=_,r=_;return null==l.locale&&(l.locale=_),null==l.bad_status_table&&(l.bad_status_table=_),a=(i=T(s,"Regexp").$new(T(s,"I18n").$t("BeginningIdol.abnormality.regexp",y(["locale"],{locale:l.locale})))).$match(e.$body()),I(a)&&(t=l.$kanji_to_i(a["$[]"](1)),I(t))?(o=l.bad_status_table.$roll(n,t),r=e.$body().$sub(i,o),g(T(s,"DiceTable"),"RollResult").$new(e.$table_name(),e.$value(),r)):e},r.$$arity=2),e.def(c,"$kanji_to_i",$=function(e){var n,l=this;return null==l.locale&&(l.locale=_),(n=T(s,"I18n").$t("BeginningIdol.abnormality.num_map",y(["locale"],{locale:l.locale})).$find_index(e))===_||null==n?_:p(n,"succ",[])},$.$$arity=1),function(n,l,i){var a,t,o,r=B(n,l,"D66WithAbnormality"),$=[r].concat(i);r.$include(T($,"WithAbnormality")),e.defs(r,"$from_i18n",a=function(e,n,l){var i,a=_;return a=T($,"I18n").$t(e,y(["locale"],{locale:l})),i=T($,"D66SortType").$const_get(a["$[]"]("d66_sort_type")),this.$new(a["$[]"]("name"),i,a["$[]"]("items"),n,l)},a.$$arity=3),e.def(r,"$initialize",t=function(n,l,i,a,o){var r=this;return t.$$p&&(t.$$p=null),D(r,e.find_super_dispatcher(r,"initialize",t,!1,!0),"initialize",[n,l,i],null),r.bad_status_table=a,r.locale=o},t.$$arity=5),e.def(r,"$roll",o=function(n){var l,i=this;return o.$$p&&(o.$$p=null),l=D(i,e.find_super_dispatcher(i,"roll",o,!1,!0),"roll",[n],null),i.$replace_abnormality(l,n)},o.$$arity=1)}(b[0],g(T(b,"DiceTable"),"D66Table"),b),void function(n,l,i){var a,t,o,r=B(n,l,"TableWithAbnormality"),$=[r].concat(i);r.$include(T($,"WithAbnormality")),e.defs(r,"$from_i18n",a=function(e,n,l){var i=_;return i=T($,"I18n").$t(e,y(["locale"],{locale:l})),this.$new(i["$[]"]("name"),i["$[]"]("type"),i["$[]"]("items"),n,l)},a.$$arity=3),e.def(r,"$initialize",t=function(n,l,i,a,o){var r=this;return t.$$p&&(t.$$p=null),D(r,e.find_super_dispatcher(r,"initialize",t,!1,!0),"initialize",[n,l,i],null),r.bad_status_table=a,r.locale=o},t.$$arity=5),e.def(r,"$roll",o=function(n){var l,i=this;return o.$$p&&(o.$$p=null),l=D(i,e.find_super_dispatcher(i,"roll",o,!1,!0),"roll",[n],null),i.$replace_abnormality(l,n)},o.$$arity=1)}(b[0],g(T(b,"DiceTable"),"Table"),b)},Opal.modules["bcdice/game_system/beginning_idol/work_table"]=function(e){var n,l,i,a,t,o,r,$,c,s,b,m,u,d,_=[],g=e.nil,T=e.$$$,f=e.$$,B=e.module,y=e.klass,I=e.hash2,p=e.send2,D=e.truthy,h=e.send;return n=_,l=d=[B(_[0],"BCDice")].concat(n),i=u=[B(d[0],"GameSystem")].concat(l),a=m=[b=y(u[0],f(u,"Base"),"BeginningIdol")].concat(i),c=y(m[0],T(f(m,"DiceTable"),"D66Table"),"WorkWithChanceTable"),s=[c].concat(a),c.$$prototype.regexp=c.$$prototype.off=g,e.defs(c,"$from_i18n",t=function(e,n){var l,i=g;return i=f(s,"I18n").$t(e,I(["locale"],{locale:n})),l=f(s,"D66SortType").$const_get(i["$[]"]("d66_sort_type")),this.$new(i["$[]"]("name"),l,i["$[]"]("items"),n)},t.$$arity=2),e.def(c,"$initialize",o=function(n,l,i,a){var t=this;return o.$$p&&(o.$$p=null),p(t,e.find_super_dispatcher(t,"initialize",o,!1,!0),"initialize",[n,l,i],null),t.regexp=f(s,"Regexp").$new(f(s,"I18n").$t("BeginningIdol.with_chance.regexp",I(["locale"],{locale:a}))),t.off=f(s,"I18n").$t("BeginningIdol.with_chance.off_text",I(["locale"],{locale:a}))},o.$$arity=4),e.def(c,"$roll_command",r=function(e,n){var l,i=g;return i=/^LO([1-6]{1,2})?$/.$match(n),D(i)?this.$roll(e,(l=i["$[]"](1))===g||null==l?g:h(l,"to_i",[])):g},r.$$arity=2),e.def(c,"$roll",$=function(n,l){var i=this,a=g,t=g,o=g;return $.$$p&&($.$$p=null),null==l&&(l=g),a=p(i,e.find_super_dispatcher(i,"roll",$,!1,!0),"roll",[n],null),D(l)?(t=i.regexp.$match(a.$body()),D(D(o=t)?function(e,n){return"number"==typeof e&&"number"==typeof n?e>=n:e["$>="](n)}(t["$[]"](1).$to_i(),l):o)?T(f(s,"DiceTable"),"RollResult").$new(a.$table_name(),a.$value(),i.off):D(t)?T(f(s,"DiceTable"),"RollResult").$new(a.$table_name(),a.$value(),a.$body().$sub(i.regexp,"")):a):a},$.$$arity=-2),function(n,l){var i,a=[n].concat(l);n.$private(),e.def(n,"$translate_local_work_table",i=function(e){return f(a,"WorkWithChanceTable").$from_i18n("BeginningIdol.local_work",e)},i.$$arity=1)}(e.get_singleton_class(b),m),void b.$register_prefix("LO")},Opal.modules["bcdice/game_system/beginning_idol/skill_table"]=function(e){function n(e,n){return"number"==typeof e&&"number"==typeof n?e+n:e["$+"](n)}var l,i,a,t,o,r,$,c,s,b,m,u,d,_,g,T,f=[],B=e.nil,y=e.$$$,I=e.$$,p=e.module,D=e.klass,h=e.hash2,S=e.send2,C=e.truthy,A=e.send;return l=f,i=T=[p(f[0],"BCDice")].concat(l),a=(g=[p(T[0],"GameSystem")].concat(i))[0],t=I(g,"Base"),o=g,function(n,l,i){var a,t=D(n,l,"SkillTable");[t].concat(i),e.def(t,"$roll",a=function(e){return this.$roll_command(e,"RTT")},a.$$arity=1)}((_=[D(a,t,"BeginningIdol")].concat(o))[0],y(I(_,"DiceTable"),"SaiFicSkillTable"),_),r=_[0],$=y(I(_,"DiceTable"),"Table"),c=_,u=D(r,$,"SkillGetTable"),d=[u].concat(c),u.$$prototype.reroll_reg=B,e.defs(u,"$from_i18n",s=function(e,n,l){var i=B;return i=I(d,"I18n").$t(e,h(["locale"],{locale:l})),this.$new(i["$[]"]("name"),i["$[]"]("type"),i["$[]"]("items"),n,l)},s.$$arity=3),e.def(u,"$initialize",b=function(n,l,i,a,t){var o=this,r=B;return b.$$p&&(b.$$p=null),S(o,e.find_super_dispatcher(o,"initialize",b,!1,!0),"initialize",[n,l,i],null),o.skill_table=a,r=I(d,"I18n").$t("BeginningIdol.skill_get_table",h(["locale"],{locale:t})),o.reroll_reg=I(d,"Regexp").$new(r["$[]"]("reroll_reg")),o.reroll=r["$[]"]("reroll"),o.secondary_name=r["$[]"]("secondary_name")},b.$$arity=5),e.def(u,"$roll",m=function(l){var i,a=this,t=B,o=B,r=B,$=B;return m.$$p&&(m.$$p=null),t=S(a,e.find_super_dispatcher(a,"roll",m,!1,!0),"roll",[l],null),o=a.reroll_reg.$match(t.$body()),C(o)?(r=o.$captures(),$=n(t.$body(),"\n"),function(){var t=e.new_brk();try{A(a,"loop",[],((i=function(){var a=null==i.$$s?this:i.$$s,o=B;return null==a.skill_table&&(a.skill_table=B),null==a.secondary_name&&(a.secondary_name=B),null==a.reroll&&(a.reroll=B),o=a.skill_table.$roll_skill(l),$=n($,a.secondary_name+" \uff1e ["+o.$category_dice()+","+o.$row_dice()+"] \uff1e "+o),C(r["$include?"](o.$category_name()))||e.brk(B,t),$=n($," \uff1e "+a.reroll+"\n")}).$$s=a,i.$$brk=t,i.$$arity=0,i))}catch(o){if(o===t)return o.$v;throw o}}(),y(I(d,"DiceTable"),"RollResult").$new(t.$table_name(),t.$value(),$)):t},m.$$arity=1),void function(n,l,i){var a,t,o=D(n,null,"SkillHometown");[o].concat(i),o.$$prototype.skill_name=B,e.def(o,"$initialize",a=function(e){return this.skill_name=e},a.$$arity=1),e.def(o,"$roll",t=function(e){return this.skill_name.$roll_command(e,"AT6")},t.$$arity=1)}(_[0],0,_)},Opal.modules["bcdice/game_system/beginning_idol/table"]=function(e){var n,l,i,a,t,o,r,$,c,s,b,m=e.top,u=[],d=e.nil,_=e.$$$,g=e.$$,T=e.module,f=e.klass,B=e.hash2,y=e.send,I=e.truthy;return m.$require("bcdice/game_system/beginning_idol/chain_table"),m.$require("bcdice/game_system/beginning_idol/chain_d66_table"),m.$require("bcdice/game_system/beginning_idol/bad_status_table"),m.$require("bcdice/game_system/beginning_idol/random_event_table"),m.$require("bcdice/game_system/beginning_idol/my_skill_name_table"),m.$require("bcdice/game_system/beginning_idol/d6_twice_table"),m.$require("bcdice/game_system/beginning_idol/item_table"),m.$require("bcdice/game_system/beginning_idol/costume_table"),m.$require("bcdice/game_system/beginning_idol/accessories_table"),m.$require("bcdice/game_system/beginning_idol/with_abnormality"),m.$require("bcdice/game_system/beginning_idol/work_table"),m.$require("bcdice/game_system/beginning_idol/skill_table"),n=u,l=b=[T(u[0],"BCDice")].concat(n),i=s=[T(b[0],"GameSystem")].concat(l),c=[$=f(s[0],g(s,"Base"),"BeginningIdol")].concat(i),a=e.get_singleton_class($),r=[a].concat(c),a.$private(),e.def(a,"$translate_skill_table",t=function(e){return g(r,"SkillTable").$from_i18n("BeginningIdol.skill_table",e,B(["rtt","rttn"],{rtt:"AT",rttn:["AT1","AT2","AT3","AT4","AT5","AT6"]}))},t.$$arity=1),e.def(a,"$translate_tables",o=function(n){var l,i,a,t,o,$,c,s,b,m,u,T,f,p,D=this,h=d,S=d,C=d,A=d;return h=g(r,"CostumeTable").$from_i18n("BeginningIdol.tables.DT",n),S=g(r,"CostumeTable").$from_i18n("BeginningIdol.tables.RC",n),C=g(r,"CostumeTable").$from_i18n("BeginningIdol.tables.FC",n),t=g(r,"ChainTable").$new(g(r,"I18n").$t("BeginningIdol.ACB.name",B(["locale"],{locale:n})),"1D6",[[g(r,"I18n").$t("BeginningIdol.ACB.items.challenge_girls",B(["locale"],{locale:n})),h.$brand_only()],[g(r,"I18n").$t("BeginningIdol.ACB.items.challenge_girls",B(["locale"],{locale:n})),h.$brand_only()],[g(r,"I18n").$t("BeginningIdol.ACB.items.road_to_prince",B(["locale"],{locale:n})),S.$brand_only()],[g(r,"I18n").$t("BeginningIdol.ACB.items.road_to_prince",B(["locale"],{locale:n})),S.$brand_only()],[g(r,"I18n").$t("BeginningIdol.ACB.items.fortune_stars",B(["locale"],{locale:n})),C.$brand_only()],[g(r,"I18n").$t("BeginningIdol.ACB.items.fortune_stars",B(["locale"],{locale:n})),C.$brand_only()]]),o=g(r,"BadStatusTable").$new(n),$=D.$translate_skill_table(n),c=_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.rare_skill_table",n),s=g(r,"ItemTable").$new(n),b=g(r,"ChainTable").$new(g(r,"I18n").$t("BeginningIdol.TN.name",B(["locale"],{locale:n})),"1D6",y(g(r,"I18n").$t("BeginningIdol.TN.items",B(["locale"],{locale:n})).$dup(),"tap",[],((l=function(e){return null==e&&(e=d),e["$[]"](3).$push($)}).$$s=D,l.$$arity=1,l))),m=g(r,"ChainTable").$new(g(r,"I18n").$t("BeginningIdol.CG.name",B(["locale"],{locale:n})),"1D6",y(g(r,"I18n").$t("BeginningIdol.CG.items",B(["locale"],{locale:n})).$map(),"with_index",[],((i=function(e,n){return null==e&&(e=d),null==n&&(n=d),I([3,4]["$include?"](n))?[e,s]:[e]}).$$s=D,i.$$arity=2,i))),u=g(r,"ChainD66Table").$new(g(r,"I18n").$t("BeginningIdol.GG.name",B(["locale"],{locale:n})),y(g(r,"I18n").$t("BeginningIdol.GG.items",B(["locale"],{locale:n})),"to_h",[],((a=function(e,n){var l;return null==e&&(e=d),null==n&&(n=d),l=I(["23","24","25"]["$include?"](e))?[n,c]:e["$=="]("56")?[n,s]:[n],[e,l]}).$$s=D,a.$$arity=2,a))),T=["22",[(A=g(r,"I18n").$t("BeginningIdol.HA.items",B(["locale"],{locale:n})))["$[]"]("22"),g(r,"SkillHometown").$new($)].$flatten()],y(A,"[]=",e.to_a(T)),"number"==typeof(p=T.length)||p["$-"](1),f=g(r,"ChainD66Table").$new(g(r,"I18n").$t("BeginningIdol.HA.name",B(["locale"],{locale:n})),A),B(["DT","RC","FC","ACB","TN","CG","GG","HA","CBT","RCB","HBT","RHB","RU","SIP","BU","HW","FL","MSE","ST","FST","BWT","LWT","TWT","CWT","SU","WI","NA","GA","BA","WT","VA","MU","DR","VI","SP","CHR","PAR","SW","AN","MOV","FA","BVT","LVT","TVT","CVT","BST","LST","TST","CST","BPT","LPT","TPT","CPT","BIT","LIT","TIT","CIT","CHO","SCH","WCH","NCH","GCH","PCH","LUR","SUR","WUR","NUR","GUR","BUR","ACE","ACT","MS","RE","SH","MO","SEA","SPA","LN","SGT","RS"],{DT:h,RC:S,FC:C,ACB:t,TN:b,CG:m,GG:u,HA:f,CBT:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CBT",n),RCB:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.RCB",n),HBT:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.HBT",n),RHB:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.RHB",n),RU:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.RU",n),SIP:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.SIP",n),BU:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BU",n),HW:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.HW",n),FL:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.FL",n),MSE:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.MSE",n),ST:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.ST",n),FST:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.FST",n),BWT:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.BWT",n),LWT:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.LWT",n),TWT:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.TWT",n),CWT:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CWT",n),SU:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SU",n),WI:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.WI",n),NA:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.NA",n),GA:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.GA",n),BA:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.BA",n),WT:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.WT",n),VA:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.VA",n),MU:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.MU",n),DR:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.DR",n),VI:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.VI",n),SP:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SP",n),CHR:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CHR",n),PAR:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.PAR",n),SW:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.SW",n),AN:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.AN",n),MOV:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.MOV",n),FA:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.FA",n),BVT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BVT",n),LVT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LVT",n),TVT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TVT",n),CVT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CVT",n),BST:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BST",n),LST:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LST",n),TST:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TST",n),CST:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CST",n),BPT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BPT",n),LPT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LPT",n),TPT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TPT",n),CPT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CPT",n),BIT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.BIT",n),LIT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.LIT",n),TIT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.TIT",n),CIT:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.CIT",n),CHO:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.CHO",n),SCH:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.SCH",n),WCH:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.WCH",n),NCH:_(g(r,"DiceTable"),"Table").$from_i18n("BeginningIdol.tables.NCH",n),GCH:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.GCH",n),PCH:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.PCH",n),LUR:g(r,"D6TwiceTable").$from_i18n("BeginningIdol.tables.LUR",n),SUR:g(r,"D6TwiceTable").$from_i18n("BeginningIdol.tables.SUR",n),WUR:g(r,"D6TwiceTable").$from_i18n("BeginningIdol.tables.WUR",n),NUR:g(r,"D6TwiceTable").$from_i18n("BeginningIdol.tables.NUR",n),GUR:g(r,"D6TwiceTable").$from_i18n("BeginningIdol.tables.GUR",n),BUR:g(r,"D6TwiceTable").$from_i18n("BeginningIdol.tables.BUR",n),ACE:_(g(r,"DiceTable"),"D66Table").$from_i18n("BeginningIdol.tables.ACE",n),ACT:D.$translate_accessories_table(n),MS:g(r,"MySkillNameTable").$new(n),RE:g(r,"RandomEventTable").$new(n),SH:g(r,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.SH",o,n),MO:g(r,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.MO",o,n),SEA:g(r,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.SEA",o,n),SPA:g(r,"D66WithAbnormality").$from_i18n("BeginningIdol.tables.SPA",o,n),LN:g(r,"TableWithAbnormality").$from_i18n("BeginningIdol.tables.LN",o,n),SGT:g(r,"SkillGetTable").$from_i18n("BeginningIdol.tables.SGT",$,n),RS:g(r,"SkillGetTable").$from_i18n("BeginningIdol.tables.RS",$,n)})},o.$$arity=1),e.const_set(c[0],"TABLES",$.$translate_tables("ja_jp")),e.const_set(c[0],"BAD_STATUS_TABLE",g(c,"BadStatusTable").$new("ja_jp")),e.const_set(c[0],"LOCAL_WORK_TABLE",$.$translate_local_work_table("ja_jp")),e.const_set(c[0],"ITEM_TABLE",g(c,"ItemTable").$new("ja_jp")),e.const_set(c[0],"SKILL_TABLE",$.$translate_skill_table("ja_jp")),void $.$register_prefix(g(c,"TABLES").$keys())},function(e){function n(e,n){return"number"==typeof e&&"number"==typeof n?e<=n:e["$<="](n)}function l(e,n){return"number"==typeof e&&"number"==typeof n?e>=n:e["$>="](n)}function i(e,n){return"number"==typeof e&&"number"==typeof n?e+n:e["$+"](n)}var a,t,o,r,$,c,s,b,m,u,d,_,g,T,f,B,y,I=[],p=e.nil,D=e.$$$,h=e.$$,S=e.module,C=e.klass,A=e.send2,v=e.truthy,R=e.send,k=e.hash2;e.top.$require("bcdice/game_system/beginning_idol/table"),a=I,t=y=[S(I[0],"BCDice")].concat(a),o=B=[S(y[0],"GameSystem")].concat(t),T=C(B[0],h(B,"Base"),"BeginningIdol"),f=[T].concat(o),T.$$prototype.randomizer=p,e.const_set(f[0],"ID","BeginningIdol"),e.const_set(f[0],"NAME","\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb"),e.const_set(f[0],"SORT_KEY","\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b"),e.const_set(f[0],"HELP_MESSAGE","\u30fb\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3000[r]PDn[+m/-m](r\uff1a\u5834\u306b\u6b8b\u3063\u305f\u51fa\u76ee\u3000n\uff1a\u632f\u308b\u6570\u3000m\uff1a\u4fee\u6b63\u5024)\n\u30fb\u30ef\u30fc\u30eb\u30c9\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0\u4ed5\u4e8b\u8868\u3000BWT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LWT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\n\u3000TWT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CWT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\u3000LO[n]\uff1a\u5730\u65b9\u30a2\u30a4\u30c9\u30eb(n\uff1a\u30c1\u30e3\u30f3\u30b9)\n\u3000SU\uff1a\u60c5\u71b1\u306e\u590f\u3000WI\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\u3000NA\uff1a\u5927\u81ea\u7136\u3000GA\uff1a\u5973\u5b66\u5712\u3000BA\uff1a\u30a2\u30ab\u30c7\u30df\u30fc\n\u30fb\u4ed5\u4e8b\u8868\u3000WT\u3000VA\uff1a\u30d0\u30e9\u30a8\u30c6\u30a3\u3000MU\uff1a\u97f3\u697d\u95a2\u4fc2\u3000DR\uff1a\u30c9\u30e9\u30de\u95a2\u4fc2\n\u3000VI\uff1a\u30d3\u30b8\u30e5\u30a2\u30eb\u95a2\u4fc2\u3000SP\uff1a\u30b9\u30dd\u30fc\u30c4\u3000CHR\uff1a\u30af\u30ea\u30b9\u30de\u30b9\u3000PAR\uff1a\u30d1\u30fc\u30c8\u30ca\u30fc\u95a2\u4fc2\n\u3000SW\uff1a\u304a\u83d3\u5b50\u3000AN\uff1a\u52d5\u7269\u3000MOV\uff1a\u6620\u753b\u3000FA\uff1a\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\n\u30fb\u30e9\u30f3\u30c0\u30e0\u30a4\u30d9\u30f3\u30c8\u3000RE\n\u30fb\u30cf\u30d7\u30cb\u30f3\u30b0\u8868\u3000HA\n\u30fb\u7279\u6280\u30ea\u30b9\u30c8\u3000AT[n](n\uff1a\u5206\u91ceNo.)\n\u30fb\u30a2\u30a4\u30c9\u30eb\u30b9\u30ad\u30eb\u4fee\u5f97\u8868\u3000SGT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RS\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u5909\u8abf\u3000BT[n](n\uff1a\u767a\u751f\u6570)\n\u30fb\u30a2\u30a4\u30c6\u30e0\u3000IT[n](n\uff1a\u7372\u5f97\u6570)\n\u30fb\u30a2\u30af\u30bb\u30b5\u30ea\u30fc\u3000ACT\uff1a\u7a2e\u5225\u6c7a\u5b9a\u3000ACB\uff1a\u30d6\u30e9\u30f3\u30c9\u6c7a\u5b9a\u3000ACE\uff1a\u52b9\u679c\u8868\n\u30fb\u8863\u88c5\u3000DT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RC\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\u3000FC:\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u30b9\u30bf\u30fc\u30ba\n\u30fb\u7121\u8336\u3076\u308a\u8868\u3000LUR\uff1a\u5730\u65b9\u30a2\u30a4\u30c9\u30eb\u3000SUR\uff1a\u60c5\u71b1\u306e\u590f\u3000WUR\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\n\u3000NUR\uff1a\u5927\u81ea\u7136\u3000GUR\uff1a\u5973\u5b66\u5712\u3000BUR\uff1a\u30a2\u30ab\u30c7\u30df\u30fc\n\u30fb\u30bb\u30f3\u30bf\u30fc\u30eb\u30fc\u30eb\u3000HW\uff1a\u5411\u304b\u3044\u98a8\u30b7\u30fc\u30f3\u8868\u3000FL\uff1a\u99c6\u3051\u51fa\u3057\u30b7\u30fc\u30f3\u8868\u3000LN\uff1a\u5b64\u72ec\u8868\n\u3000\u30de\u30a4\u30b9\u30ad\u30eb\u3010MS\uff1a\u540d\u524d\u6c7a\u5b9a\u3000MSE\uff1a\u52b9\u679c\u8868\u3011\u3000\u6f14\u51fa\u8868\u3010ST\u3000FST\uff1a\u30d5\u30a1\u30f3\u30bf\u30b8\u30fc\u3011\n\u30fb\u5408\u5bbf\u30eb\u30fc\u30eb\u3000\u6563\u7b56\u8868\u3010SH\uff1a\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30e2\u30fc\u30eb\u3000MO\uff1a\u5c71\u3000SEA\uff1a\u6d77\u3000SPA\uff1a\u6e29\u6cc9\u8857\u3011\n\u3000TN\uff1a\u591c\u8a9e\u308a\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u8868\u3000\u6210\u9577\u8868\u3010CG\uff1a\u30b3\u30e2\u30f3\u3000GG\uff1a\u30b4\u30fc\u30eb\u30c9\u3011\n\u30fb\u30b5\u30d3\u8868\u3000CHO\u3000SCH\uff1a\u60c5\u71b1\u306e\u590f\u3000WCH\uff1a\u306c\u304f\u3082\u308a\u306e\u51ac\u3000NCH\uff1a\u5927\u81ea\u7136\n\u3000GCH\uff1a\u5973\u6027\u5411\u3051\u3000PCH\uff1a\u529b\u5f37\u3044\n\u30fb\u30ad\u30e3\u30e9\u7a7a\u767d\u8868\u3000CBT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RCB\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u8da3\u5473\u7a7a\u767d\u8868\u3000HBT\uff1a\u30c1\u30e3\u30ec\u30f3\u30b8\u30ac\u30fc\u30eb\u30ba\u3000RHB\uff1a\u30ed\u30fc\u30c9\u30c8\u30a5\u30d7\u30ea\u30f3\u30b9\n\u30fb\u30de\u30b9\u30b3\u30c3\u30c8\u66b4\u8d70\u8868\u3000RU\n\u30fb\u30a2\u30a4\u30c9\u30eb\u71b1\u6e6f\u98a8\u5442\u3000nC\uff1a\u30d0\u30fc\u30b9\u30c8\u30bf\u30a4\u30e0(n\uff1a\u6e29\u5ea6)\u3000BU\uff1a\u30d0\u30fc\u30b9\u30c8\u8868\n\u30fb\u653b\u6483\u3000n[S]A[r][+m/-m](n\uff1a\u632f\u308b\u6570\u3000S\uff1a\u5931\u6557\u3057\u306a\u3044\u3000r\uff1a\u53d6\u308a\u9664\u304f\u51fa\u76ee\u3000m\uff1a\u4fee\u6b63\u5024)\n\u30fb\u304b\u3093\u305f\u3093\u30d1\u30fc\u30bd\u30f3\u8868\u3000SIP\n\u30fb\u4f1a\u5834\u8868\n\u3000BVT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LVT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TVT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CVT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u5834\u6240\u8868\n\u3000BST\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LST\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TST\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CST\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u7a2e\u5225\u6c7a\u5b9a\u8868\n\u3000BPT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LPT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TPT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CPT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n\u30fb\u9053\u5177\u8868\n\u3000BIT\uff1a\u5927\u624b\u82b8\u80fd\u30d7\u30ed\u3000LIT\uff1a\u5f31\u5c0f\u82b8\u80fd\u30d7\u30ed\u3000TIT\uff1a\u30e9\u30a4\u30d6\u30b7\u30a2\u30bf\u30fc\u3000CIT\uff1a\u30a2\u30a4\u30c9\u30eb\u90e8\n[]\u5185\u306f\u7701\u7565\u53ef\u3000D66\u5165\u308c\u66ff\u3048\u3042\u308a\n"),T.$register_prefix(h(f,"SKILL_TABLE").$prefixes(),"IT","BT","\\d{2}C","\\d+S?A","[1-7]*PD"),e.def(T,"$initialize",r=function(n){var l=this;return r.$$p&&(r.$$p=null),A(l,e.find_super_dispatcher(l,"initialize",r,!1,!0),"initialize",[n],null),l.sort_add_dice=!0,l.d66_sort_type=D(h(f,"D66SortType"),"ASC")},r.$$arity=1),e.def(T,"$result_nd6",$=function(e,i,a,t,o){var r=this;return o["$=="]("?")||!t["$=="](">=")?p:v(n(i,2))?h(f,"Result").$fumble(r.$translate("BeginningIdol.fumble")):v(l(i,12))?h(f,"Result").$critical(r.$translate("BeginningIdol.special")):v(l(e,o))?h(f,"Result").$success(r.$translate("success")):h(f,"Result").$failure(r.$translate("failure"))},$.$$arity=5),e.alias(T,"check_2D6","check_nD6"),e.def(T,"$eval_game_system_specific_command",c=function(e){var n,l,i,a,t,o,r,$=this;return v(n=v(l=v(i=v(a=v(t=v(o=v(r=$.$roll_attack(e))?r:$.$roll_burst(e))?o:$.$roll_performance(e))?t:D($.$class(),"SKILL_TABLE").$roll_command($.randomizer,e))?a:D($.$class(),"ITEM_TABLE").$roll_command($.randomizer,e))?i:D($.$class(),"BAD_STATUS_TABLE").$roll_command($.randomizer,e))?l:D($.$class(),"LOCAL_WORK_TABLE").$roll_command($.randomizer,e))?n:$.$roll_tables(e,D($.$class(),"TABLES"))},c.$$arity=1),T.$private(),e.def(T,"$roll_burst",s=function(e){var a,t=this,o=p,r=p,$=p,c=p,s=p,b=p,m=p;return o=/^(\d{2})C$/.$match(e),!v(o)||(r=o["$[]"](1).$to_i(),v(v($="number"==typeof(a=r)?a<45:a["$<"](45))?$:function(e,n){return"number"==typeof e?e>55:e["$>"](55)}(r)))?p:(c=v(n(r,49))?3:v(n(r,52))?4:v(n(r,54))?5:6,b=i((s=t.randomizer.$roll_barabara(c,6).$sort()).$sum(),r),m=v(l(b,80))?t.$translate("BeginningIdol.burst.burst"):v(l(b,75))?t.$translate("BeginningIdol.burst.critical_success"):v(l(b,65))?t.$translate("BeginningIdol.burst.success"):t.$translate("failure"),t.$translate("BeginningIdol.burst.name")+" \uff1e "+r+"+["+s.$join(",")+"] \uff1e "+b+" \uff1e "+m)},s.$$arity=1),e.def(T,"$roll_attack",b=function(e){var l=this,a=p,t=p,o=p,r=p,$=p,c=p,s=p,b=p,m=p,u=p,d=p,_=p;return a=/^(\d+)(S?)A([1-6]*)([+\-]\d+)?$/.$match(e),!v(a)||(t=a["$[]"](1).$to_i(),v(n(t,0)))?p:(o=a["$[]"](2)["$empty?"]()["$!"](),r=R(a["$[]"](3).$each_char(),"map",[],"to_i".$to_proc()),$=a["$[]"](4).$to_i(),c=h(f,"Format").$modifier($),b=(s=l.randomizer.$roll_barabara(t,6).$sort()).$join(","),s=function(e,n){return"number"==typeof e&&"number"==typeof n?e-n:e["$-"](n)}(s,r),m=l.$translate("BeginningIdol.attack.name")+" \uff1e ["+b+"]"+c+" \uff1e ",v(v(u=s.$count()["$=="](t))?u:s["$empty?"]())||(m=i(m,"["+s.$join(",")+"]"+c+" \uff1e ")),v(v(d=o)?d:s.$count()["$=="](s.$uniq().$count()))?(_=[i(s.$sum(),$.$to_i()),0].$max(),m=i(m,l.$format(l.$translate("BeginningIdol.attack.damage"),k(["total"],{total:_})))):m=i(m,l.$translate("failure")),m)},b.$$arity=1),e.def(T,"$roll_performance",m=function(e){var l=this,a=p,t=p,o=p,r=p,$=p,c=p,s=p,b=p,m=p;return a=/^([1-7]*)PD(\d+)([+\-]\d+)?$/.$match(e),!v(a)||(t=a["$[]"](2).$to_i(),v(n(t,0)))?p:(o=R(a["$[]"](1).$chars(),"map",[],"to_i".$to_proc()).$sort(),r=a["$[]"](3).$to_i(),c=i($=l.randomizer.$roll_barabara(t,6).$sort(),o).$sort(),s=l.$select_uniqs(c),b=v(o["$empty?"]())?l.$translate("BeginningIdol.PD.paformance"):l.$translate("BeginningIdol.PD.symphony"),m=v(o["$empty?"]())?l.$result_performance(s,r,c):l.$result_symphony(s,r),[b,l.$format_dice_list($,o,r),m].$join(" \uff1e "))},m.$$arity=1),e.def(T,"$select_uniqs",u=function(e){var n,l;return R(R(R(e,"group_by",[],"itself".$to_proc()).$to_a(),"select",[],(n=function(e,n){return null==e&&(e=p),null==n&&(n=p),n.$size()["$=="](1)},n.$$s=this,n.$$arity=2,n)),"map",[],(l=function(e,n){return null==e&&(e=p),null==n&&(n=p),e},l.$$s=this,l.$$arity=2,l)).$sort()},u.$$arity=1),e.def(T,"$format_dice_list",d=function(e,n,l){return v(n["$empty?"]())?"["+e.$join(",")+"]"+h(f,"Format").$modifier(l):"["+e.$join(",")+"],["+n.$join(",")+"]"+h(f,"Format").$modifier(l)},d.$$arity=3),e.def(T,"$result_performance",_=function(e,n,l){var a=this;return v(e["$empty?"]())?a.$format(a.$translate("BeginningIdol.PD.miracle"),k(["value"],{value:i(n,10)})):e["$=="]([1,2,3,4,5,6])?a.$format(a.$translate("BeginningIdol.PD.perfect_miracle"),k(["value"],{value:i(n,30)})):v(e.$size()["$!="](l.$size()))?"["+e.$join(",")+"]"+h(f,"Format").$modifier(n)+" \uff1e "+i(e.$sum(),n):i(e.$sum(),n).$to_s()},_.$$arity=3),e.def(T,"$result_symphony",g=function(e,n){var l=this,a=p;return v(e["$empty?"]())?l.$format(l.$translate("BeginningIdol.PD.miracle_synchro"),k(["value"],{value:i(n,15)})):e["$=="]([1,2,3,4,5,6])?(a=l.$format(l.$translate("BeginningIdol.PD.perfect_miracle"),k(["value"],{value:i(n,30)})),"["+e.$join(",")+"]"+h(f,"Format").$modifier(n)+" \uff1e "+a):"["+e.$join(",")+"]"+h(f,"Format").$modifier(n)+" \uff1e "+i(e.$sum(),n)},g.$$arity=2)}(Opal)}}]);