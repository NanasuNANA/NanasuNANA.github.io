(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[6152],{1873:(xe,Re,ke)=>{ke(3986),Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var L,j,$,l,p,A,z,Q,Y=e.module,G=e.ensure_kwargs,_=e.truthy,I=e.thrower,K=e.def,f=[],M=e.nil,h=e.$$$;return L=f,j=Q=[Y(f[0],"BCDice")].concat(L),z=[A=Y(Q[0],"ArithmeticEvaluator")].concat(j),l=[$=e.get_singleton_class(A)].concat(z),p=e.$r(l),K($,"$eval",function(C,r){try{I("eval_return");var k,H=M;return null==(k=(r=G(r)).$$smap.round_type)&&(k=h(p("RoundType"),"FLOOR")),_(C)&&_(H=p("Arithmetic").$eval(C,k))?H:0}catch(P){if(P===e.t_eval_return)return P.$v;throw P}},-2)},Opal.modules["i18n/backend/fallbacks"]=function(e){var B,u,r,i,l,p,Y=e.module,G=e.class_variable_set,_=e.truthy,I=e.class_variable_get,K=e.def,f=e.send,M=e.send2,h=e.find_super,N=e.hash2,L=e.find_block_super,E=e.neqeq,Q=e.thrower,V=e.return_val,j=[],A=e.nil,z=e.$$$;return B=j,p=[l=Y(j[0],"I18n")].concat(B),G(p[0],"@@fallbacks",A),u=e.get_singleton_class(l),r=[u].concat(p),i=e.$r(r),K(u,"$fallbacks",function(){var P=A;return G(r[1],"@@fallbacks",_(null!=r[1].$$cvars["@@fallbacks"]?"class variable":A)&&_(P=I(r[1],"@@fallbacks",!1))?P:z(z(i("I18n"),"Locale"),"Fallbacks").$new()),_(P=i("Thread").$current()["$[]"]("i18n_fallbacks"))?P:I(r[1],"@@fallbacks",!1)}),K(u,"$fallbacks=",function(H){var P;return G(r[1],"@@fallbacks",_(H["$is_a?"](i("Array")))?z(z(i("I18n"),"Locale"),"Fallbacks").$new(H):H),P=["i18n_fallbacks",I(r[1],"@@fallbacks",!1)],f(i("Thread").$current(),"[]=",P),P[P.length-1]}),function(u,C){var H,P,x,y,i=[Y(u,"Backend")].concat(C);return H=i,x=[P=Y(i[0],"Fallbacks")].concat(H),y=e.$r(x),K(P,"$translate",function D(g,b,s){try{var o=Q("return"),c=D.$$p||A,T=this,d=A,m=A;return D.$$p=null,null==s&&(s=y("EMPTY_HASH")),_(s.$fetch("fallback",!0))?_(s["$[]"]("fallback_in_progress"))?M(T,h(T,"translate",D,!1,!0),"translate",[g,b,s],c):(_(s["$[]"]("default"))&&(d=T["$extract_non_symbol_default!"](s)),m=s.$merge(N(["fallback_in_progress"],{fallback_in_progress:!0})),f(y("I18n").$fallbacks()["$[]"](g),"each",[],function n(w){var t=null==n.$$s?this:n.$$s;null==w&&(w=A);try{return f(t,"catch",["exception"],function v(){var a=null==v.$$s?this:v.$$s,O=A;if(O=M(a,L(a,"translate",v.$$def||n.$$def||D,!1,!1),"translate",[w,b,m],null),_(O["$nil?"]()))return A;E(g.$to_s(),w.$to_s())&&a.$on_fallback(g,w,b,s),o.$throw(O)},{$$s:t,$$ret:o})}catch(v){if(!e.rescue(v,[z(y("I18n"),"InvalidLocale")]))throw v;try{return A}finally{e.pop_exception()}}},{$$s:T}),_(s["$key?"]("default"))&&_(s["$[]"]("default")["$nil?"]())?A:_(d)?M(T,h(T,"translate",D,!1,!0),"translate",[g,A,s.$merge(N(["default"],{default:d}))],null):T.$throw("exception",z(y("I18n"),"MissingTranslation").$new(g,b,s))):M(T,h(T,"translate",D,!1,!0),"translate",[g,b,s],c)}catch(n){if(n===o)return n.$v;throw n}},-3),K(P,"$extract_non_symbol_default!",function(g){var s,b=A;return b=[g["$[]"]("default")].$flatten(),s=f(b,"detect",[],function(c){return null==c&&(c=A),c["$is_a?"](y("Symbol"))["$!"]()}),_(s)&&g["$[]="]("default",b["$[]"](0,b.$index(s))),s}),K(P,"$exists?",function D(g,b,s){try{var o=Q("return"),c=D.$$p||A,T=this;return D.$$p=null,null==s&&(s=y("EMPTY_HASH")),_(s.$fetch("fallback",!0))?(f(y("I18n").$fallbacks()["$[]"](g),"each",[],function d(m){var n=null==d.$$s?this:d.$$s;null==m&&(m=A);try{if(!_(M(n,L(n,"exists?",d.$$def||D,!1,!1),"exists?",[m,b],null)))return A;o.$throw(!0)}catch(w){if(!e.rescue(w,[z(y("I18n"),"InvalidLocale")]))throw w;try{return A}finally{e.pop_exception()}}},{$$s:T,$$ret:o}),!1):M(T,h(T,"exists?",D,!1,!0),"exists?",[g,b,s],c)}catch(d){if(d===o)return d.$v;throw d}},-3),P.$private(),K(P,"$on_fallback",V(A))}(p[0],p)},Opal.modules["bcdice/randomizer"]=function(e){var l,k,H,P,x,y,u,C,G=e.klass,_=e.const_set,I=e.def,K=e.truthy,f=e.rb_gt,M=e.rb_plus,h=e.rb_le,N=e.send,L=e.rb_minus,E=e.eqeq,Q=e.rb_times,V=e.eqeqeq,j=e.rb_ge,A=[],z=e.nil,$=e.$$$;return l=A,u=[(0,e.module)(A[0],"BCDice")].concat(l),C=e.$r(u),k=u,P=[H=G(u[0],null,"Randomizer")].concat(k),x=e.$r(P),(y=H.$$prototype).rand_results=y.detailed_rand_results=z,_(P[0],"UPPER_LIMIT_DICE_TIMES",200),_(P[0],"UPPER_LIMIT_DICE_SIDES",1e4),_(P[0],"UPPER_LIMIT_RANDS",1e4),I(H,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),H.$attr_reader("rand_results"),H.$attr_reader("detailed_rand_results"),_(P[0],"DetailedRandResult",x("Struct").$new("kind","sides","value")),I(H,"$roll_barabara",function(g,b){var s=this;return K(f(M(s.rand_results.$size(),g),x("UPPER_LIMIT_RANDS")))&&s.$raise(x("TooManyRandsError")),K(h(g,0))||K(f(g,x("UPPER_LIMIT_DICE_TIMES")))?[]:N(x("Array"),"new",[g],function o(){return(null==o.$$s?this:o.$$s).$roll_once(b)},{$$s:s})}),I(H,"$roll_sum",function(g,b){return this.$roll_barabara(g,b).$sum()}),I(H,"$roll_once",function(g){var s=z;return K(h(g,0))||K(f(g,x("UPPER_LIMIT_DICE_SIDES")))?0:(s=this.$rand_inner(g),this.$push_to_detail("normal",g,s),s)}),I(H,"$roll_index",function(g){return L(this.$roll_once(g),1)}),I(H,"$roll_tens_d10",function(){var s,b=z;return b=this.$rand_inner(10),E(b,10)&&(b=0),s=Q(b,10),this.$push_to_detail("tens_d10",10,s),s}),I(H,"$roll_d9",function(){var b;return b=L(this.$rand_inner(10),1),this.$push_to_detail("d9",10,b),b}),I(H,"$roll_d66",function(g){var o,s=z;return s=N(x("Array"),"new",[2],function c(){return(null==c.$$s?this:c.$$s).$roll_once(6)},{$$s:this}),V($(x("D66SortType"),"ASC"),o=g)?s["$sort!"]():V($(x("D66SortType"),"DESC"),o)&&s["$sort!"]()["$reverse!"](),M(Q(s["$[]"](0),10),s["$[]"](1))}),H.$private(),I(H,"$rand_inner",function(g){var s,b=this;return K(j(b.rand_results.$size(),x("UPPER_LIMIT_RANDS")))&&b.$raise(x("TooManyRandsError")),s=b.$random(g),b.rand_results["$<<"]([s,g]),s}),I(H,"$random",function(g){return M(x("Kernel").$rand(g),1)}),I(H,"$push_to_detail",function(g,b,s){var c;return c=x("DetailedRandResult").$new(g,b,s),this.detailed_rand_results.$push(c)}),G(u[0],C("StandardError"),"TooManyRandsError"),z},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var N,V,B,l,p,u,C,A,E,Y=e.module,G=e.klass,_=e.def,I=e.truthy,K=e.return_val,f=[],M=e.nil;return N=f,V=E=[Y(f[0],"BCDice")].concat(N),B=A=[Y(E[0],"DiceTable")].concat(V),p=[l=G(A[0],null,"RollResult")].concat(B),u=e.$r(p),(C=l.$$prototype).table_name=C.value=C.body=M,_(l,"$initialize",function(i,k,H){var P=this;return P.table_name=i,P.value=k,P.body=H}),l.$attr_reader("table_name"),l.$attr_reader("value"),l.$attr_reader("body"),_(l,"$to_s",function(){var i=this;return i.table_name+"("+i.value+") \uff1e "+i.body}),_(l,"$last_body",function(){var i=this;return I(i.body["$is_a?"](u("RollResult")))?i.body.$last_body():i.body}),_(l,"$empty?",K(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var N,V,B,l,p,u,C,A,E,Y=e.module,G=e.klass,_=e.truthy,I=e.def,K=e.rb_minus,f=[],M=e.nil;return N=f,V=E=[Y(f[0],"BCDice")].concat(N),B=A=[Y(E[0],"DiceTable")].concat(V),p=[l=G(A[0],null,"ChainTable")].concat(B),u=e.$r(p),(C=l.$$prototype).times=C.sides=C.items=C.name=M,I(l,"$initialize",function(i,k,H){var P=this,x=M;return P.name=i,P.items=H.$freeze(),x=/(\d+)D(\d+)/i.$match(k),_(x)||P.$raise(u("ArgumentError"),"Unexpected table type: "+k),P.times=x["$[]"](1).$to_i(),P.sides=x["$[]"](2).$to_i()}),I(l,"$roll",function(i){var H,P,k=this,x=M;return H=i.$roll_sum(k.times,k.sides),P=K(H,k.times),x=k.items["$[]"](P),_(x["$respond_to?"]("roll"))&&(x=x.$roll(i)),u("RollResult").$new(k.name,H,x)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var Q,z,u,C,r,i,k,B,j,Y=e.module,G=e.klass,_=e.hash2,I=e.defs,K=e.def,f=e.rb_plus,M=e.rb_times,h=e.rb_minus,N=[],L=e.nil;return Q=N,z=j=[Y(N[0],"BCDice")].concat(Q),u=B=[Y(j[0],"DiceTable")].concat(z),r=[C=G(B[0],null,"D66GridTable")].concat(u),i=e.$r(r),(k=C.$$prototype).name=k.items=L,I(C,"$from_i18n",function(P,x){var D=L;return D=i("I18n").$t(P,_(["locale","raise"],{locale:x,raise:!0})),this.$new(D["$[]"]("name"),D["$[]"]("items"))}),K(C,"$initialize",function(P,x){return this.name=P,this.items=x.$freeze()}),K(C,"$roll",function(P){var y,D,g,b,s;return y=P.$roll_once(6),D=P.$roll_once(6),g=f(M(y,10),D),b=h(y,1),s=h(D,1),i("RollResult").$new(this.name,g,this.items["$[]"](b)["$[]"](s))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var L,j,p,u,C,r,z,$,Q,Y=e.module,G=e.klass,_=e.hash2,I=e.defs,K=e.def,M=[],h=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),L=M,j=Q=[Y(M[0],"BCDice")].concat(L),z=[Y(Q[0],"DiceTable")].concat(j),$=e.$r(z),p=z,C=[u=G(z[0],$("D66GridTable"),"D66HalfGridTable")].concat(p),r=e.$r(C),I(u,"$from_i18n",function(k,H){var x=h;return x=r("I18n").$t(k,_(["locale","raise"],{locale:H,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2_3"),x["$[]"]("items_4_5_6"))}),K(u,"$initialize",function(k,H,P){return this.name=k,this.items=[H,H,H,P,P,P].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var L,j,p,u,C,r,z,$,Q,Y=e.module,G=e.klass,_=e.hash2,I=e.defs,K=e.def,M=[],h=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),L=M,j=Q=[Y(M[0],"BCDice")].concat(L),z=[Y(Q[0],"DiceTable")].concat(j),$=e.$r(z),p=z,C=[u=G(z[0],$("D66GridTable"),"D66OneThirdTable")].concat(p),r=e.$r(C),I(u,"$from_i18n",function(k,H){var x=h;return x=r("I18n").$t(k,_(["locale","raise"],{locale:H,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2"),x["$[]"]("items_3_4"),x["$[]"]("items_5_6"))}),K(u,"$initialize",function(k,H,P,x){return this.name=k,this.items=[H,H,P,P,x,x].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var j,B,r,i,k,H,P,p,z,Y=e.module,G=e.klass,_=e.hash2,I=e.defs,K=e.def,f=e.eqeqeq,M=e.rb_plus,h=e.rb_times,N=e.truthy,L=[],E=e.nil,Q=e.$$$;return j=L,B=z=[Y(L[0],"BCDice")].concat(j),r=p=[Y(z[0],"DiceTable")].concat(B),k=[i=G(p[0],null,"D66Table")].concat(r),H=e.$r(k),(P=i.$$prototype).sort_type=P.items=P.name=E,I(i,"$from_i18n",function(y,D){var s,b=E;return b=H("I18n").$t(y,_(["locale"],{locale:D})),s=H("D66SortType").$const_get(b["$[]"]("d66_sort_type")),this.$new(b["$[]"]("name"),s,b["$[]"]("items"))}),K(i,"$initialize",function(y,D,g){var b=this;return b.name=y,b.sort_type=D,b.items=g.$freeze()}),K(i,"$roll",function(y){var D=this,g=E,b=E,s=E,o=E;return g=y.$roll_barabara(2,6),f(Q(H("D66SortType"),"ASC"),b=D.sort_type)?g["$sort!"]():f(Q(H("D66SortType"),"DESC"),b)&&g["$sort!"]()["$reverse!"](),s=M(h(g["$[]"](0),10),g["$[]"](1)),o=N(b=D.items["$[]"](s))?b:D.items["$[]"](s.$to_s()),N(o["$respond_to?"]("roll"))&&(o=o.$roll(y)),H("RollResult").$new(D.name,s,o)}),K(i,"$choice",function(y){return H("RollResult").$new(this.name,y,this.items["$[]"](y))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var A,l,u,C,$,Y=e.module,G=e.klass,_=e.hash2,I=e.send,K=e.to_ary,f=e.rb_plus,M=e.rb_times,h=e.send2,N=e.find_super,L=e.def,Q=[],V=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),A=Q,l=$=[Y(Q[0],"BCDice")].concat(A),u=[Y($[0],"DiceTable")].concat(l),C=e.$r(u),L(G(u[0],C("D66Table"),"D66LeftRangeTable"),"$initialize",function H(P,x,y){var b;return H.$$p=null,b=_([],{}),I(y,"each",[],function(o){var c,m;return null==o&&(o=V),c=K(o),m=null==c[1]?V:c[1],I(null==c[0]?V:c[0],"each",[],function(w){return null==w&&(w=V),I(m,"each_with_index",[],function(v,a){var O,re;return null==v&&(v=V),null==a&&(a=V),re=f(M(w,10),f(a,1)),I(b,"[]=",O=[re,v]),O[O.length-1]})})}),h(this,N(this,"initialize",H,!1,!0),"initialize",[P,x,b],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var V,$,C,r,i,k,H,l,A,Y=e.module,G=e.klass,_=e.hash2,I=e.defs,K=e.def,f=e.truthy,M=e.rb_minus,h=e.rb_plus,N=e.rb_times,L=[],E=e.nil;return V=L,$=A=[Y(L[0],"BCDice")].concat(V),C=l=[Y(A[0],"DiceTable")].concat($),i=[r=G(l[0],null,"D66ParityTable")].concat(C),k=e.$r(i),(H=r.$$prototype).odd=H.even=H.name=E,I(r,"$from_i18n",function(x,y){var g=E;return g=k("I18n").$t(x,_(["locale","raise"],{locale:y,raise:!0})),this.$new(g["$[]"]("name"),g["$[]"]("odd"),g["$[]"]("even"))}),K(r,"$initialize",function(x,y,D){var g=this;return g.name=x,g.odd=y.$freeze(),g.even=D.$freeze()}),K(r,"$roll",function(x){var g,s,o,y=this,D=E;return D=x.$roll_once(6),g=x.$roll_once(6),s=(f(D["$odd?"]())?y.odd:y.even)["$[]"](M(g,1)),o=h(N(D,10),g),k("RollResult").$new(y.name,o,s)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var L,j,l,p,u,C,r,z,Q,Y=e.module,G=e.klass,_=e.def,I=e.rb_plus,K=e.rb_times,f=e.send,M=[],h=e.nil;return L=M,j=Q=[Y(M[0],"BCDice")].concat(L),l=z=[Y(Q[0],"DiceTable")].concat(j),u=[p=G(z[0],null,"D66RangeTable")].concat(l),C=e.$r(u),(r=p.$$prototype).items=r.name=h,_(p,"$initialize",function(k,H){return this.name=k,this.items=H.$freeze()}),_(p,"$roll",function(k){var P,x,y,D=h;return P=k.$roll_once(6),x=k.$roll_once(6),y=I(K(P,10),x),D=f(this.items,"find",[],function(b){return null==b&&(b=h),b["$[]"](0)["$include?"](y)}),C("RollResult").$new(this.name,y,D["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var V,$,C,r,i,k,H,l,A,Y=e.module,G=e.klass,_=e.const_set,I=e.send,K=e.truthy,f=e.def,M=e.eqeqeq,h=e.rb_times,N=e.rb_plus,L=[],E=e.nil;return V=L,$=A=[Y(L[0],"BCDice")].concat(V),C=l=[Y(A[0],"DiceTable")].concat($),i=[r=G(l[0],null,"RangeTable")].concat(C),k=e.$r(i),(H=r.$$prototype).name=H.items=H.num_of_dice=H.num_of_sides=H.formatter=E,_(i[0],"RollResult",I(k("Struct"),"new",["sum","values","content","formatted"],function P(){return(null==P.$$s?this:P.$$s).$alias_method("to_s","formatted")},{$$s:r})),_(i[0],"Item",k("Struct").$new("range","content")),_(i[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),_(i[0],"DEFAULT_FORMATTER",I(r,"lambda",[],function(x,y){return null==x&&(x=E),null==y&&(y=E),x.$name()+"("+y.$sum()+") \uff1e "+y.$content()})),r.$attr_reader("name"),r.$attr_reader("num_of_dice"),r.$attr_reader("num_of_sides"),f(r,"$initialize",function P(x,y,D){var s,g=P.$$p||E,b=this,o=E;return P.$$p=null,b.name=x.$freeze(),b.formatter=K(s=g)?s:k("DEFAULT_FORMATTER"),o=k("DICE_ROLL_METHOD_RE").$match(y),K(o)||b.$raise(k("ArgumentError"),b.name+": invalid dice roll method: "+y),b.num_of_dice=o["$[]"](1).$to_i(),b.num_of_sides=o["$[]"](2).$to_i(),b.$store(D)}),f(r,"$fetch",function(x){var D,y=this;return D=I(y.items,"find",[],function(b){return null==b&&(b=E),b.$range()["$include?"](x)}),K(D)||y.$raise(k("RangeError"),y.name+": value is out of range: "+x),D}),f(r,"$roll",function(x){var g,y=this,D=E,b=E;return g=(D=x.$roll_barabara(y.num_of_dice,y.num_of_sides)).$sum(),(b=k("RollResult").$new(g,D,y.$fetch(g).$content()))["$formatted="](y.formatter["$[]"](y,b)),b}),r.$private(),f(r,"$store",function(x){var D,g,y=this;return D=I(x,"map",[],function b(s,o){return null==s&&(s=E),null==o&&(o=E),[(null==b.$$s?this:b.$$s).$coerce_to_int_range(s),o]},{$$s:y}),g=I(D,"sort_by",[],function(s,o){return null==s&&(s=E),null==o&&(o=E),s.$min()}),y.$assert_min_sum_is_covered(g),y.$assert_max_sum_is_covered(g),y.$assert_no_gap_or_overlap_in_ranges(g),y.items=I(g,"map",[],function(s,o){return null==s&&(s=E),null==o&&(o=E),k("Item").$new(s,o.$freeze()).$freeze()}).$freeze(),y}),f(r,"$coerce_to_int_range",function(x){var D;return M(k("Integer"),D=x)?k("Range").$new(x,x):M(k("Range"),D)&&K(x.$begin()["$is_a?"](k("Integer")))&&K(x.$end()["$is_a?"](k("Integer")))?x:this.$raise(k("TypeError"),this.name+": "+x+" ("+x.$class()+") must be an Integer or a Range with Integers ")}),f(r,"$assert_min_sum_is_covered",function(x){var D,y=this,g=E;return D=y.num_of_dice,g=x.$first()["$[]"](0),K(g["$include?"](D))||y.$raise(k("RangeError"),y.name+": min value ("+D+") is not covered: "+g),y}),f(r,"$assert_max_sum_is_covered",function(x){var D,y=this,g=E;return D=h(y.num_of_dice,y.num_of_sides),g=x.$last()["$[]"](0),K(g["$include?"](D))||y.$raise(k("RangeError"),y.name+": max value ("+D+") is not covered: "+g),y}),f(r,"$assert_no_gap_or_overlap_in_ranges",function(x){return I(x,"each_cons",[2],function D(g,b){var T,d,s=null==D.$$s?this:D.$$s,o=E,c=E;return null==s.name&&(s.name=E),null==g&&(g=E),null==b&&(b=E),o=g["$[]"](0),c=b["$[]"](0),T=o.$max(),d=N(T,1),K(c["$include?"](T))&&s.$raise(k("RangeError"),s.name+": Range overlap: "+o+" and "+c),K(c["$include?"](d))?E:s.$raise(k("RangeError"),s.name+": Range gap: "+o+" and "+c)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var E,A,p,k,H,P,x,C,$,V,Y=e.module,G=e.klass,_=e.send,I=e.def,K=e.rb_minus,f=e.return_ivar,M=[],h=e.nil,N=e.$$$;return E=M,A=V=[Y(M[0],"BCDice")].concat(E),p=$=[Y(V[0],"DiceTable")].concat(A),k=C=[G($[0],null,"SaiFicSkillTable")].concat(p),P=[H=G(C[0],null,"Category")].concat(k),x=e.$r(P),I(H,"$initialize",function(D,g,b,s){var o=this;return o.name=D,o.skills=_(g.$map(),"with_index",[2],function(T,d){return null==T&&(T=h),null==d&&(d=h),N(x("SaiFicSkillTable"),"Skill").$new(D,T,b,d,s)}),o.dice=b}),I(H,"$roll",function(D){return this.$skills()["$[]"](K(D.$roll_sum(2,6),2))}),I(H,"$to_s",f("name")),H.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var h,Q,$,C,r,l,j,L,Y=e.module,G=e.klass,_=e.def,I=e.hash2,K=[],f=e.nil;return h=K,Q=L=[Y(K[0],"BCDice")].concat(h),$=j=[Y(L[0],"DiceTable")].concat(Q),l=[G(j[0],null,"SaiFicSkillTable")].concat($),(r=(C=G(l[0],null,"Skill")).$$prototype).s_format=r.category_dice=r.row_dice=r.category_name=r.name=f,_(C,"$initialize",function(k,H,P,x,y){var D=this;return D.category_name=k,D.name=H,D.category_dice=P,D.row_dice=x,D.s_format=y}),_(C,"$to_s",function(){var k=this;return k.$format(k.s_format,I(["category_dice","row_dice","category_name","skill_name"],{category_dice:k.category_dice,row_dice:k.row_dice,category_name:k.category_name,skill_name:k.name}))}),C.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var l,r,x,y,D,g,b,k,u,Y=e.module,G=e.klass,_=e.ensure_kwargs,I=e.hash2,K=e.send,M=e.defs,h=e.const_set,N=e.to_ary,L=e.def,E=e.truthy,Q=e.rb_minus,V=e.rb_plus,j=e.top,A=[],z=e.nil,$=e.$$$;return j.$require("bcdice/dice_table/sai_fic_skill_table/category"),j.$require("bcdice/dice_table/sai_fic_skill_table/skill"),l=A,r=u=[Y(A[0],"BCDice")].concat(l),x=k=[Y(u[0],"DiceTable")].concat(r),D=[y=G(k[0],null,"SaiFicSkillTable")].concat(x),g=e.$r(D),(b=y.$$prototype).rtt=b.rtt_format=b.rct=b.rct_format=b.rttn=b.rttn_format=b.categories=z,M(y,"$from_i18n",function(o,c,T){var d,m,n,a,v=z;return null==(d=(T=_(T)).$$smap.rtt)&&(d=z),null==(m=T.$$smap.rct)&&(m=z),null==(n=T.$$smap.rttn)&&(n=z),a=(v=g("I18n").$t("RTT",I(["locale","raise","default"],{locale:c,raise:!1,default:I([],{})})).$merge(g("I18n").$t(o,I(["locale","raise"],{locale:c,raise:!0}))))["$[]"]("items"),v=K(v,"select",[],function(re,ee){return null==re&&(re=z),null==ee&&(ee=z),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](re)}),this.$new(a,e.to_hash(v).$merge(I(["rtt","rct","rttn"],{rtt:d,rct:m,rttn:n})))},-3),h(D[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),h(D[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),h(D[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),h(D[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),L(y,"$initialize",function(o,c){var T,d,m,n,w,t,v,a=this;return null==(T=(c=_(c)).$$smap.rtt)&&(T=z),null==(d=c.$$smap.rct)&&(d=z),null==(m=c.$$smap.rttn)&&(m=z),null==(n=c.$$smap.rtt_format)&&(n=g("DEFAULT_RTT")),null==(w=c.$$smap.rct_format)&&(w=g("DEFAULT_RCT")),null==(t=c.$$smap.rttn_format)&&(t=g("DEFAULT_RTTN")),null==(v=c.$$smap.s_format)&&(v=g("DEFAULT_S")),a.categories=K(o.$map(),"with_index",[1],function(re,ee){var ie,oe,ue;return null==re&&(re=z),null==ee&&(ee=z),oe=null==(ie=N(re))[0]?z:ie[0],ue=null==ie[1]?z:ie[1],$(g("SaiFicSkillTable"),"Category").$new(oe,ue,ee,v)},{$$has_top_level_mlhs_arg:!0}),a.rtt=T,a.rct=d,a.rttn=m.$to_a(),a.rtt_format=n,a.rct_format=w,a.rttn_format=t},-2),h(D[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),y.$attr_reader("categories"),L(y,"$roll_command",function(o,c){var d,T=this,m=z,n=z;return E(["RTT",T.rtt]["$include?"](d=c))?T.$format_skill(T.rtt_format,T.$roll_skill(o)):E(["RCT",T.rct]["$include?"](d))?(m=T.$roll_category(o),T.$format(T.rct_format,I(["category_dice","category_name"],{category_dice:m.$dice(),category_name:m.$name()}))):E(n=g("RTTN").$index(d))||E(n=T.rttn.$index(d))?T.$format_skill(T.rttn_format,T.categories["$[]"](n).$roll(o)):z}),L(y,"$roll_category",function(o){return this.categories["$[]"](Q(o.$roll_once(6),1))}),L(y,"$roll_skill",function(o){return this.$roll_category(o).$roll(o)}),L(y,"$prefixes",function(){var o=this;return V(["RTT[1-6]?","RCT",o.rtt,o.rct],o.rttn).$compact()}),y.$private(),L(y,"$format_skill",function(o,c){return this.$format(o,I(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:c.$category_dice(),row_dice:c.$row_dice(),category_name:c.$category_name(),skill_name:c.$name(),text:c.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var E,A,p,u,C,r,i,$,V,Y=e.module,G=e.klass,_=e.hash2,I=e.defs,K=e.truthy,f=e.def,M=e.rb_minus,h=[],N=e.nil;return E=h,A=V=[Y(h[0],"BCDice")].concat(E),p=$=[Y(V[0],"DiceTable")].concat(A),C=[u=G($[0],null,"Table")].concat(p),r=e.$r(C),(i=u.$$prototype).times=i.sides=i.name=i.items=N,I(u,"$from_i18n",function(H,P){var y=N;return y=r("I18n").$t(H,_(["locale"],{locale:P})),this.$new(y["$[]"]("name"),y["$[]"]("type"),y["$[]"]("items"))}),f(u,"$initialize",function(H,P,x){var y=this,D=N;return y.name=H,y.items=x.$freeze(),D=/(\d+)D(\d+)/i.$match(P),K(D)||y.$raise(r("ArgumentError"),"Unexpected table type: "+P),y.times=D["$[]"](1).$to_i(),y.sides=D["$[]"](2).$to_i()}),f(u,"$roll",function(H){var x,P=this;return x=H.$roll_sum(P.times,P.sides),P.$choice(x)}),f(u,"$choice",function(H){var x,P=this;return x=M(H,P.times),r("RollResult").$new(P.name,H,P.items["$[]"](x))})},Opal.modules["bcdice/dice_table"]=function(e){var Y=e.top;return Y.$require("bcdice/dice_table/roll_result"),Y.$require("bcdice/dice_table/chain_table"),Y.$require("bcdice/dice_table/d66_grid_table"),Y.$require("bcdice/dice_table/d66_half_grid_table"),Y.$require("bcdice/dice_table/d66_one_third_table"),Y.$require("bcdice/dice_table/d66_left_range_table"),Y.$require("bcdice/dice_table/d66_parity_table"),Y.$require("bcdice/dice_table/d66_range_table"),Y.$require("bcdice/dice_table/d66_table"),Y.$require("bcdice/dice_table/range_table"),Y.$require("bcdice/dice_table/sai_fic_skill_table"),Y.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var f,L,Q,h,Y=e.module,G=e.const_set,_=[];return f=_,L=h=[Y(_[0],"BCDice")].concat(f),Q=[Y(h[0],"D66SortType")].concat(L),G(Q[0],"NO_SORT","no_sort"),G(Q[0],"ASC","asc"),G(Q[0],"DESC","desc"),function(N,L){var Q=[Y(N,"RoundType")].concat(L);return G(Q[0],"CEIL","ceil"),G(Q[0],"FLOOR","floor"),G(Q[0],"ROUND","round")}(h[0],h)},Opal.modules["bcdice/translate"]=function(e){var L,j,A,z,$,Q,Y=e.module,G=e.ensure_kwargs,_=e.kwrestargs,K=e.hash2,f=e.def,M=[],h=e.nil;return L=M,j=Q=[Y(M[0],"BCDice")].concat(L),z=[A=Y(Q[0],"Translate")].concat(j),$=e.$r(z),f(A,"$translate",function(l,p){var u,C=this;return null==C.locale&&(C.locale=h),p=G(p),u=_(p,{}),$("I18n").$translate(l,K(["locale","raise"],{locale:C.locale,raise:!0}).$merge(e.to_hash(u)))},-2)},Opal.modules["bcdice/result"]=function(e){var A,B,z,L,Q,G=e.klass,_=e.send,I=e.def,K=e.return_val,f=e.return_ivar,M=[],h=e.nil;return L=M,A=Q=[(0,e.module)(M[0],"BCDice")].concat(L),[z=G(Q[0],null,"Result")].concat(A),I(B=e.get_singleton_class(z),"$success",function(u){return _(this.$new(),"tap",[],function(i){var k;return null==i&&(i=h),i["$text="](u),_(i,"success=",k=[!0]),k[k.length-1]})}),I(B,"$failure",function(u){return _(this.$new(),"tap",[],function(i){var k;return null==i&&(i=h),i["$text="](u),_(i,"failure=",k=[!0]),k[k.length-1]})}),I(B,"$critical",function(u){return _(this.$new(),"tap",[],function(i){var k;return null==i&&(i=h),i["$text="](u),i["$critical="](!0),_(i,"success=",k=[!0]),k[k.length-1]})}),I(B,"$fumble",function(u){return _(this.$new(),"tap",[],function(i){var k;return null==i&&(i=h),i["$text="](u),i["$fumble="](!0),_(i,"failure=",k=[!0]),k[k.length-1]})}),I(B,"$nothing",K("nothing")),I(z,"$initialize",function(l){var p=this;return null==l&&(l=h),p.text=l,p.rands=h,p.detailed_rands=h,p.secret=!1,p.success=!1,p.failure=!1,p.critical=!1,p.fumble=!1},-1),z.$attr_accessor("text","rands","detailed_rands"),z.$attr_writer("secret","success","failure","critical","fumble"),I(z,"$secret?",f("secret")),I(z,"$success?",f("success")),I(z,"$failure?",f("failure")),I(z,"$critical?",f("critical")),I(z,"$fumble?",f("fumble")),I(z,"$condition=",function(l){return this.success=l,this.failure=l["$!"]()})},Opal.modules["racc/parser"]=function(e){var H,x,y,Y=e.module,G=e.klass,_=e.truthy,I=e.const_set,K=e.defs,f=e.gvars,M=e.rb_lt,h=e.def,N=e.to_ary,L=e.send,E=e.neqeq,Q=e.rb_plus,V=e.eqeq,j=e.rb_ge,A=e.rb_gt,z=e.rb_minus,$=e.rb_le,B=e.rb_times,l=e.assign_ivar_val,u=[],C=e.$r(u),r=e.nil,i=e.$$$;return H=u,x=[Y(u[0],"Racc")].concat(H),y=e.$r(x),G(x[0],y("StandardError"),"ParseError"),_(i("::","ParseError","skip_raise")?"constant":r)||I(u[0],"ParseError",i(C("Racc"),"ParseError")),function(k,H){var s,o,c,T,d,y=[Y(k,"Racc")].concat(H),D=e.$r(y);return _(D("Racc_No_Extensions","skip_raise")?"constant":r)||I(y[0],"Racc_No_Extensions",!1),s=y,c=[o=G(y[0],null,"Parser")].concat(s),T=e.$r(c),(d=o.$$prototype).yydebug=d.racc_debug_out=d.racc_error_status=d.racc_t=d.racc_vstack=d.racc_val=d.racc_state=d.racc_tstack=r,I(c[0],"Racc_Runtime_Version","1.4.6"),I(c[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),I(c[0],"Racc_Runtime_Core_Version_R","1.4.6"),I(c[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),I(c[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),I(c[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),I(c[0],"Racc_Runtime_Core_Version",T("Racc_Runtime_Core_Version_R")),I(c[0],"Racc_Runtime_Core_Revision",T("Racc_Runtime_Core_Revision_R")),I(c[0],"Racc_Runtime_Type","ruby"),K(T("Parser"),"$racc_runtime_type",function(){return T("Racc_Runtime_Type")}),h(o,"$_racc_setup",function(){var n,w,t=this,v=r,a=r;return null==f.stderr&&(f.stderr=r),_(i(t.$class(),"Racc_debug_parser"))||(t.yydebug=!1),_(null!=(n=t.yydebug)&&n!==r?"instance-variable":r)||(t.yydebug=!1),_(t.yydebug)&&(_(null!=(w=t.racc_debug_out)&&w!==r?"instance-variable":r)||(t.racc_debug_out=f.stderr),t.racc_debug_out=_(v=t.racc_debug_out)?v:f.stderr),a=i(t.$class(),"Racc_arg"),_(M(a.$size(),14))&&a["$[]="](13,!0),a}),h(o,"$_racc_init_sysvars",function(){var n=this;return n.racc_state=[0],n.racc_tstack=[],n.racc_vstack=[],n.racc_t=r,n.racc_val=r,n.racc_read_next=!0,n.racc_user_yyerror=!1,n.racc_error_status=0}),h(o,"$do_parse",function(){return this.$__send__(T("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),h(o,"$next_token",function(){return this.$raise(T("NotImplementedError"),this.$class()+"#next_token is not defined")}),h(o,"$_racc_do_parse_rb",function(n,w){var t,a=this,O=r,re=r,ee=r,ie=r,oe=r,ue=r,_e=r,le=r;return t=N(n),O=null==t[0]?r:t[0],re=null==t[1]?r:t[1],ee=null==t[2]?r:t[2],ie=null==t[3]?r:t[3],oe=null==t[10]?r:t[10],a.$_racc_init_sysvars(),ue=_e=le=r,L(a,"catch",["racc_end_parse"],function $e(){var se,te,q=null==$e.$$s?this:$e.$$s,X=r;for(null==q.racc_state&&(q.racc_state=r),null==q.racc_read_next&&(q.racc_read_next=r),null==q.racc_t&&(q.racc_t=r),null==q.yydebug&&(q.yydebug=r),null==q.racc_val&&(q.racc_val=r);_(!0);)for(_(le=ie["$[]"](q.racc_state["$[]"](-1)))?(_(q.racc_read_next)&&E(q.racc_t,0)&&(te=q.$next_token(),se=N(te),ue=null==se[0]?r:se[0],q.racc_val=null==se[1]?r:se[1],q.racc_t=_(ue)?_(X=oe["$[]"](ue))?X:1:0,_(q.yydebug)&&q.$racc_read_token(q.racc_t,ue,q.racc_val),q.racc_read_next=!1),le=Q(le,q.racc_t),_(j(le,0))&&_(_e=O["$[]"](le))&&V(re["$[]"](le),q.racc_state["$[]"](-1))||(_e=ee["$[]"](q.racc_state["$[]"](-1)))):_e=ee["$[]"](q.racc_state["$[]"](-1));_(_e=q.$_racc_evalact(_e,n)););},{$$s:a})}),h(o,"$yyparse",function(n,w){return this.$__send__(T("Racc_YY_Parse_Method"),n,w,this.$_racc_setup(),!0)}),h(o,"$_racc_yyparse_rb",function(n,w,t,v){var a,ee=r,ie=r,ce=r,oe=r,_e=r,le=r,$e=r;return a=N(t),ee=null==a[0]?r:a[0],ie=null==a[1]?r:a[1],ce=null==a[2]?r:a[2],oe=null==a[3]?r:a[3],_e=null==a[10]?r:a[10],this.$_racc_init_sysvars(),le=r,$e=r,L(this,"catch",["racc_end_parse"],function se(){var te=null==se.$$s?this:se.$$s;for(null==te.racc_state&&(te.racc_state=r);!_($e=oe["$[]"](te.racc_state["$[]"](-1)));)for(;_(le=te.$_racc_evalact(ce["$[]"](te.racc_state["$[]"](-1)),t)););return L(n,"__send__",[w],function q(X,F){var R=null==q.$$s?this:q.$$s,Z=r,S=r;for(null==R.racc_t&&(R.racc_t=r),null==R.racc_state&&(R.racc_state=r),null==R.racc_read_next&&(R.racc_read_next=r),null==X&&(X=r),null==F&&(F=r),R.racc_t=_(X)?_(Z=_e["$[]"](X))?Z:1:0,R.racc_val=F,R.racc_read_next=!1,$e=Q($e,R.racc_t),_(j($e,0))&&_(le=ee["$[]"]($e))&&V(ie["$[]"]($e),R.racc_state["$[]"](-1))||(le=ce["$[]"](R.racc_state["$[]"](-1)));_(le=R.$_racc_evalact(le,t)););for(;_(_(Z=_(S=($e=oe["$[]"](R.racc_state["$[]"](-1)))["$!"]())?S:R.racc_read_next["$!"]())?Z:R.racc_t["$=="](0));)for(_($e)&&_($e=Q($e,R.racc_t))&&_(j($e,0))&&_(le=ee["$[]"]($e))&&V(ie["$[]"]($e),R.racc_state["$[]"](-1))||(le=ce["$[]"](R.racc_state["$[]"](-1)));_(le=R.$_racc_evalact(le,t)););},{$$s:te})},{$$s:this})}),h(o,"$_racc_evalact",function(n,w){var t,ce,a=this,O=r,re=r,ie=r,oe=r,ue=r,_e=r;if(O=null==(t=N(w))[0]?r:t[0],re=null==t[1]?r:t[1],ie=null==t[3]?r:t[3],ce=null==t[11]?r:t[11],oe=null==t[12]?r:t[12],_(A(n,0))&&_(M(n,ce)))_(A(a.racc_error_status,0))&&(V(a.racc_t,1)||(a.racc_error_status=z(a.racc_error_status,1))),a.racc_vstack.$push(a.racc_val),a.racc_state.$push(n),a.racc_read_next=!0,_(a.yydebug)&&(a.racc_tstack.$push(a.racc_t),a.$racc_shift(a.racc_t,a.racc_tstack,a.racc_vstack));else if(_(M(n,0))&&_(A(n,oe["$-@"]()))){if(ue=L(a,"catch",["racc_jump"],function le(){var $e=null==le.$$s?this:le.$$s;return null==$e.racc_state&&($e.racc_state=r),$e.racc_state.$push($e.$_racc_do_reduce(w,n)),!1},{$$s:a}),_(ue))switch(ue.valueOf()){case 1:return a.racc_user_yyerror=!0,oe["$-@"]();case 2:return ce;default:a.$raise("[Racc Bug] unknown jump code")}}else if(V(n,ce))_(a.yydebug)&&a.$racc_accept(),a.$throw("racc_end_parse",a.racc_vstack["$[]"](0));else{if(V(n,oe["$-@"]())){switch(a.racc_error_status.valueOf()){case 0:_(w["$[]"](21))||a.$on_error(a.racc_t,a.racc_val,a.racc_vstack);break;case 3:V(a.racc_t,0)&&a.$throw("racc_end_parse",r),a.racc_read_next=!0}for(a.racc_user_yyerror=!1,a.racc_error_status=3;_(!0)&&!(_(_e=ie["$[]"](a.racc_state["$[]"](-1)))&&(_e=Q(_e,1),_(j(_e,0))&&_(n=O["$[]"](_e))&&V(re["$[]"](_e),a.racc_state["$[]"](-1))));)_($(a.racc_state.$size(),1))&&a.$throw("racc_end_parse",r),a.racc_state.$pop(),a.racc_vstack.$pop(),_(a.yydebug)&&(a.racc_tstack.$pop(),a.$racc_e_pop(a.racc_state,a.racc_tstack,a.racc_vstack));return n}a.$raise("[Racc Bug] unknown action "+n.$inspect())}return _(a.yydebug)&&a.$racc_next_state(a.racc_state["$[]"](-1),a.racc_state),r}),h(o,"$_racc_do_reduce",function(n,w){var t,oe,_e,X,F,R,U,a=this,re=r,ee=r,ie=r,ce=r,ue=r,le=r,$e=r,se=r,te=r,q=r,Z=r,S=r,J=r;return re=null==(t=N(n))[4]?r:t[4],ee=null==t[5]?r:t[5],ie=null==t[6]?r:t[6],ce=null==t[7]?r:t[7],oe=null==t[8]?r:t[8],ue=null==t[9]?r:t[9],_e=null==t[13]?r:t[13],le=a.racc_state,$e=a.racc_vstack,se=a.racc_tstack,te=B(w,-3),q=ue["$[]"](te),X=ue["$[]"](Q(te,1)),F=ue["$[]"](Q(te,2)),R=[],_(a.yydebug)&&(Z=se["$[]"](q["$-@"](),q)),S=$e["$[]"](q["$-@"](),q),_(a.yydebug)&&se["$[]="](q["$-@"](),q,R),$e["$[]="](q["$-@"](),q,R),le["$[]="](q["$-@"](),q,R),_(_e)?$e.$push(a.$__send__(F,S,$e,S["$[]"](0))):$e.$push(a.$__send__(F,S,$e)),se.$push(X),_(a.yydebug)&&a.$racc_reduce(Z,X,se,$e),U=z(X,oe),_(te=ce["$[]"](U))&&(te=Q(te,le["$[]"](-1)),_(j(te,0))&&_(J=re["$[]"](te))&&V(ee["$[]"](te),U))?J:ie["$[]"](U)}),h(o,"$on_error",function(n,w,t){var a,v=this;return v.$raise(T("ParseError"),v.$sprintf("\nparse error on value %s (%s)",w.$inspect(),_(a=v.$token_to_str(n))?a:"?"))}),h(o,"$yyerror",function(){return this.$throw("racc_jump",1)}),h(o,"$yyaccept",function(){return this.$throw("racc_jump",2)}),h(o,"$yyerrok",l("racc_error_status",0)),h(o,"$racc_read_token",function(n,w,t){var v=this;return v.racc_debug_out.$print("read    "),v.racc_debug_out.$print(w.$inspect(),"(",v.$racc_token2str(n),") "),v.racc_debug_out.$puts(t.$inspect()),v.racc_debug_out.$puts()}),h(o,"$racc_shift",function(n,w,t){var v=this;return v.racc_debug_out.$puts("shift   "+v.$racc_token2str(n)),v.$racc_print_stacks(w,t),v.racc_debug_out.$puts()}),h(o,"$racc_reduce",function(n,w,t,v){var a=this,O=r;return(O=a.racc_debug_out).$print("reduce "),_(n["$empty?"]())?O.$print(" <none>"):L(n,"each",[],function re(ee){return null==ee&&(ee=r),O.$print(" ",(null==re.$$s?this:re.$$s).$racc_token2str(ee))},{$$s:a}),O.$puts(" --\x3e "+a.$racc_token2str(w)),a.$racc_print_stacks(t,v),a.racc_debug_out.$puts()}),h(o,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),h(o,"$racc_e_pop",function(n,w,t){var v=this;return v.racc_debug_out.$puts("error recovering mode: pop token"),v.$racc_print_states(n),v.$racc_print_stacks(w,t),v.racc_debug_out.$puts()}),h(o,"$racc_next_state",function(n,w){var t=this;return t.racc_debug_out.$puts("goto    "+n),t.$racc_print_states(w),t.racc_debug_out.$puts()}),h(o,"$racc_print_stacks",function(n,w){var v=r;return(v=this.racc_debug_out).$print("        ["),L(n,"each_index",[],function a(O){return null==O&&(O=r),v.$print(" (",(null==a.$$s?this:a.$$s).$racc_token2str(n["$[]"](O))," ",w["$[]"](O).$inspect(),")")},{$$s:this}),v.$puts(" ]")}),h(o,"$racc_print_states",function(n){var t=r;return(t=this.racc_debug_out).$print("        ["),L(n,"each",[],function(a){return null==a&&(a=r),t.$print(" ",a)}),t.$puts(" ]")}),h(o,"$racc_token2str",function(n){var t;return _(t=i(this.$class(),"Racc_token_to_s_table")["$[]"](n))?t:this.$raise("[Racc Bug] can't convert token "+n+" to string")}),h(o,"$token_to_str",function(n){return i(this.$class(),"Racc_token_to_s_table")["$[]"](n)})}(u[0],u)},Opal.modules["bcdice/arithmetic/node"]=function(e){var l,r,P,s,o,y,D,k,u,Y=e.module,G=e.klass,_=e.def,I=e.thrower,K=e.return_ivar,f=e.send2,M=e.find_super,h=e.eqeq,N=e.const_set,L=e.eqeqeq,E=e.rb_divide,Q=e.truthy,V=e.assign_ivar,j=e.alias,A=[],z=e.nil,$=e.$$$;return l=A,r=u=[Y(A[0],"BCDice")].concat(l),P=k=[Y(u[0],"Arithmetic")].concat(r),y=[Y(k[0],"Node")].concat(P),D=e.$r(y),(o=(s=G(y[0],null,"BinaryOp")).$$prototype).lhs=o.rhs=o.op=z,_(s,"$initialize",function(T,d,m){var n=this;return n.lhs=T,n.op=d,n.rhs=m}),_(s,"$eval",function(T){try{I("eval_return");var w,m=this,n=z;return n=m.lhs.$eval(T),w=m.rhs.$eval(T),n.$send(m.op,w)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),_(s,"$output",function(){var T=this;return""+T.lhs.$output()+T.op+T.rhs.$output()}),_(s,"$s_exp",function(){var T=this;return"("+T.$op_for_s_exp()+" "+T.lhs.$s_exp()+" "+T.rhs.$s_exp()+")"}),_(s,"$op_for_s_exp",K("op")),function(g,b,s){var o=G(g,b,"DivideBase"),c=[o].concat(s),T=e.$r(c),d=o.$$prototype;d.lhs=d.rhs=d.op=z,_(o,"$initialize",function m(n,w){return m.$$p=null,f(this,M(this,"initialize",m,!1,!0),"initialize",[n,"/",w],null)}),_(o,"$eval",function(n){try{I("eval_return");var v,a,t=this;return v=t.lhs.$eval(n),a=t.rhs.$eval(n),h(a,0)&&t.$raise(T("ZeroDivisionError")),t.$divide_and_round(v,a,n)}catch(O){if(O===e.t_eval_return)return O.$v;throw O}}),_(o,"$output",function m(){var n=m.$$p||z,w=this;return m.$$p=null,""+f(w,M(w,"output",m,!1,!0),"output",[],n)+w.$rounding_method()}),o.$private(),_(o,"$rounding_method",function(){return $(this.$class(),"ROUNDING_METHOD")}),_(o,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),_(o,"$divide_and_round",function(n,w,t){return this.$raise(T("NotImplementedError"))})}(y[0],D("BinaryOp"),y),function(g,b,s){var o=G(g,b,"DivideWithGameSystemDefault"),c=[o].concat(s),T=e.$r(c);N(c[0],"ROUNDING_METHOD",""),o.$private(),_(o,"$divide_and_round",function(m,n,w){var t,v=z;return L($(T("RoundType"),"CEIL"),t=w)?E(m.$to_f(),n).$ceil():L($(T("RoundType"),"ROUND"),t)?(v=E(m.$to_f(),n),Q(v["$negative?"]())?v.$abs().$round()["$-@"]():v.$round()):E(m,n).$floor()})}(y[0],D("DivideBase"),y),function(g,b,s){var o=G(g,b,"DivideWithCeil"),c=[o].concat(s);N(c[0],"ROUNDING_METHOD","C"),o.$private(),_(o,"$divide_and_round",function(d,m,n){return E(d.$to_f(),m).$ceil()})}(y[0],D("DivideBase"),y),function(g,b,s){var o=G(g,b,"DivideWithRound"),c=[o].concat(s);N(c[0],"ROUNDING_METHOD","R"),o.$private(),_(o,"$divide_and_round",function(d,m,n){var w=z;return w=E(d.$to_f(),m),Q(w["$negative?"]())?w.$abs().$round()["$-@"]():w.$round()})}(y[0],D("DivideBase"),y),function(g,b,s){var o=G(g,b,"DivideWithFloor"),c=[o].concat(s);N(c[0],"ROUNDING_METHOD","F"),o.$private(),_(o,"$divide_and_round",function(d,m,n){return E(d,m).$floor()})}(y[0],D("DivideBase"),y),function(g,b){var s=G(g,null,"Negative");s.$$prototype.body=z,_(s,"$initialize",V("body")),_(s,"$eval",function(T){try{return I("eval_return"),this.body.$eval(T)["$-@"]()}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),_(s,"$output",function(){return"-"+this.body.$output()}),_(s,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(y[0]),function(g,b){var s=G(g,null,"Parenthesis");s.$$prototype.expr=z,_(s,"$initialize",V("expr")),_(s,"$eval",function(T){try{return I("eval_return"),this.expr.$eval(T)}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),_(s,"$output",function(){return"("+this.expr.$output()+")"}),_(s,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(y[0]),function(g,b){var s=G(g,null,"Number");return s.$$prototype.value=z,_(s,"$initialize",V("value")),_(s,"$eval",K("value")),_(s,"$output",function(){return this.value.$to_s()}),j(s,"s_exp","output")}(y[0])},Opal.modules.strscan=function(e){var V,j,A,z,$,G=e.def,_=e.truthy,I=e.eqeqeq,K=e.Opal,f=e.return_ivar,M=e.send,h=e.alias,N=[],L=e.nil;return V=N,A=[j=(0,e.klass)(N[0],null,"StringScanner")].concat(V),z=e.$r(A),($=j.$$prototype).pos=$.string=$.working=$.matched=$.prev_pos=$.match=L,j.$attr_reader("pos","matched"),G(j,"$initialize",function(l){var p=this;return p.string=l,p.pos=0,p.matched=L,p.working=l,p.match=[]}),j.$attr_reader("string"),G(j,"$beginning_of_line?",function(){var l=this;return 0===l.pos||"\n"===l.string.charAt(l.pos-1)}),G(j,"$scan",function(l){var p=this,u=(l=p.$anchor(l)).exec(p.working);return null==u?p.matched=L:(p.prev_pos=p.pos,p.pos+=u[0].length,p.working=p.working.substring(u[0].length),p.matched=u[0],p.match=u,u[0])}),G(j,"$scan_until",function(l){var p=this;l=p.$anchor(l);for(var u=p.working,C=0;u.length!=C;++C){var r=l.exec(u.substr(C));if(null!==r){var i=C+r[0].length,k=u.substr(0,i);return p.matched=r[0],p.match=r,p.prev_pos=p.pos+C,p.pos+=i,p.working=u.substr(i),k}}return p.matched=L}),G(j,"$[]",function(l){var u;if(_(this.match["$empty?"]()))return L;I(z("Symbol"),u=l)?l=l.$to_s():I(z("String"),u)||(l=K["$coerce_to!"](l,z("Integer"),"to_int"));var C=this.match;return l<0&&(l+=C.length),l<0||l>=C.length||null==C[l]?L:C[l]}),G(j,"$check",function(l){var p=this,u=(l=p.$anchor(l)).exec(p.working);return p.matched=null==u?L:u[0]}),G(j,"$check_until",function(l){var p=this,u=p.prev_pos,C=p.pos,r=p.working,i=p.$scan_until(l);return p.prev_pos=u,p.pos=C,p.working=r,i}),G(j,"$peek",function(l){return this.working.substring(0,l)}),G(j,"$eos?",function(){return 0===this.working.length}),G(j,"$exist?",function(l){var u=l.exec(this.working);return null==u?L:0==u.index?0:u.index+1}),G(j,"$skip",function(l){var p=this,u=(l=p.$anchor(l)).exec(p.working);if(null==u)return p.match=[],p.matched=L;var C=u[0],r=C.length;return p.matched=C,p.match=u,p.prev_pos=p.pos,p.pos+=r,p.working=p.working.substring(r),r}),G(j,"$skip_until",function(l){var u=this.$scan_until(l);return u===L?L:(this.matched=u.substr(-1),u.length)}),G(j,"$get_byte",function(){var l=this,p=L;return l.pos<l.string.length?(l.prev_pos=l.pos,l.pos+=1,p=l.matched=l.working.substring(0,1),l.working=l.working.substring(1)):l.matched=L,p}),G(j,"$match?",function(l){var p=this,u=(l=p.$anchor(l)).exec(p.working);return null==u?L:(p.prev_pos=p.pos,u[0].length)}),G(j,"$pos=",function(l){var p=this;return l<0&&(l+=p.string.$length()),p.pos=l,p.working=p.string.slice(l)}),G(j,"$matched_size",function(){return this.matched===L?L:this.matched.length}),G(j,"$post_match",function(){var l=this;return l.matched===L?L:l.string.substr(l.pos)}),G(j,"$pre_match",function(){var l=this;return l.matched===L?L:l.string.substr(0,l.prev_pos)}),G(j,"$reset",function(){var l=this;return l.working=l.string,l.matched=L,l.pos=0}),G(j,"$rest",f("working")),G(j,"$rest?",function(){return 0!==this.working.length}),G(j,"$rest_size",function(){return this.$rest().$size()}),G(j,"$terminate",function(){var l,p=this;return p.match=L,l=[p.string.$length()],M(p,"pos=",l),l[l.length-1]}),G(j,"$unscan",function(){var l=this;return l.pos=l.prev_pos,l.prev_pos=L,l.match=L,l}),h(j,"bol?","beginning_of_line?"),h(j,"getch","get_byte"),j.$private(),G(j,"$anchor",function(l){var p=l.toString().match(/\/([^\/]+)$/);return p=p?p[1]:void 0,new RegExp("^(?:"+l.source+")",p)})},Opal.modules["bcdice/normalize"]=function(e){var h,Q,L,Y=e.module,G=e.eqeqeq,_=e.def,I=e.eqeq,K=[],f=e.nil;return h=K,L=[Y(K[0],"BCDice")].concat(h),(Q=Y(L[0],"Normalize")).$module_function(),_(Q,"$comparison_operator",function(j){var A;return G(/<=|=</,A=j)?"<=":G(/>=|=>/,A)?">=":G(/<>|!=|=!/,A)?"!=":G(/</,A)?"<":G(/>/,A)?">":G(/=/,A)?"==":f}),_(Q,"$target_number",function(j){return I(j,"?")?j:j.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var V,$,C,r,i,k,H,l,A,Y=e.module,G=e.klass,_=e.const_set,I=e.hash2,K=e.truthy,f=e.send,M=e.def,h=e.thrower,N=e.top,L=[],E=e.nil;return N.$require("strscan"),N.$require("bcdice/normalize"),V=L,$=A=[Y(L[0],"BCDice")].concat(V),C=l=[Y(A[0],"Command")].concat($),i=[r=G(l[0],null,"Lexer")].concat(C),k=e.$r(i),(H=r.$$prototype).scanner=H.notations=E,_(i[0],"SYMBOLS",I(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),M(r,"$initialize",function(x,y){var D,g,s;return x=K(s=(D=(g=x)===E||null==g?E:g.$split(" ",2))===E||null==D?E:D.$first())?s:"",this.scanner=k("StringScanner").$new(x),this.notations=f(y,"map",[],function(c){return null==c&&(c=E),K(c["$is_a?"](k("String")))?k("Regexp").$new(c):c})}),M(r,"$next_token",function(){try{var x=h("return"),y=this,D=E,g=E,s=E,o=E;return K(y.scanner["$eos?"]())?[!1,"$"]:(f(y.notations,"each",[],function c(T){var m,d=null==c.$$s?this:c.$$s;if(null==d.scanner&&(d.scanner=E),null==T&&(T=E),m=d.scanner.$scan(T),!K(m))return E;x.$throw(["NOTATION",m])},{$$s:y,$$ret:x}),K(D=y.scanner.$scan(/\d+/))?["NUMBER",D.$to_i()]:K(g=y.scanner.$scan(/[<>!=]+/))?(g=k("Normalize").$comparison_operator(g),[K(g)?"CMP_OP":"ILLEGAL",g]):(s=y.scanner.$getch().$upcase(),[K(o=k("SYMBOLS")["$[]"](s))?o:s.$to_sym(),s]))}catch(c){if(c===x)return c.$v;throw c}}),M(r,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var N,V,B,l,p,u,C,A,E,Y=e.module,G=e.klass,_=e.def,I=e.return_ivar,K=e.truthy,f=[],M=e.nil;return N=f,V=E=[Y(f[0],"BCDice")].concat(N),B=A=[Y(E[0],"Command")].concat(V),p=[l=G(A[0],null,"Parsed")].concat(B),u=e.$r(p),(C=l.$$prototype).critical=C.fumble=C.dollar=C.modify_number=C.question_target=C.target_number=C.prefix_number=C.command=C.suffix_number=C.cmp_op=M,l.$attr_accessor("command"),l.$attr_accessor("prefix_number"),l.$attr_accessor("suffix_number"),l.$attr_accessor("critical"),l.$attr_accessor("fumble"),l.$attr_accessor("dollar"),l.$attr_accessor("modify_number"),l.$attr_accessor("cmp_op"),l.$attr_accessor("target_number"),l.$attr_writer("question_target"),_(l,"$initialize",function(){var i=this;return i.prefix_number=M,i.suffix_number=M,i.critical=M,i.fumble=M,i.dollar=M,i.cmp_op=M,i.target_number=M,i.question_target=!1}),_(l,"$question_target?",I("question_target")),_(l,"$to_s",function(i){var k=this,H=M,P=M,x=M,y=M,D=M;switch(null==i&&(i="after_command"),H=K(k.critical)?"@"+k.critical:M,P=K(k.fumble)?"#"+k.fumble:M,x=K(k.dollar)?"$"+k.dollar:M,y=u("Format").$modifier(k.modify_number),D=K(k.question_target)?"?":k.target_number,i.valueOf()){case"after_command":return[k.prefix_number,k.command,k.suffix_number,H,P,x,y,k.cmp_op,D].$join();case"after_modify_number":return[k.prefix_number,k.command,k.suffix_number,y,H,P,x,k.cmp_op,D].$join();case"after_target_number":return[k.prefix_number,k.command,k.suffix_number,y,k.cmp_op,D,H,P,x].$join();default:return M}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var i,x,o,w,t,v,a,O,re,ee,ie,ce,_e,c,m,n,se,D,g,H,Y=e.klass,G=e.module,_=e.slice,I=e.extract_kwargs,K=e.ensure_kwargs,f=e.get_kwarg,M=e.send2,h=e.find_super,N=e.def,L=e.send,E=e.eqeq,Q=e.thrower,V=e.hash,j=e.const_set,A=e.truthy,z=e.to_ary,$=e.hash2,B=e.top,l=[],p=e.$r(l),u=e.nil,C=e.$$$;return B.$require("racc/parser.rb"),B.$require("bcdice/arithmetic/node"),B.$require("bcdice/command/lexer"),B.$require("bcdice/command/parsed"),Y(C(p("BCDice"),"Command"),C(p("Racc"),"Parser"),"Parser"),i=l,x=H=[G(l[0],"BCDice")].concat(i),D=[G(H[0],"Command")].concat(x),g=e.$r(D),o=D,m=[c=Y(D[0],C(g("Racc"),"Parser"),"Parser")].concat(o),n=e.$r(m),(se=c.$$prototype).notations=se.lexer=se.modifier=se.suffix_number=se.prefix_number=se.need_suffix_number=se.need_prefix_number=se.critical=se.fumble=se.dollar=se.allowed_cmp_op=se.question_target=u,N(c,"$initialize",function te(q,X){var F,R,Z,S,J=this;return te.$$p=null,F=_(arguments),R=I(F),R=K(R),Z=F,S=f(R,"round_type"),M(J,h(J,"initialize",te,!1,!0),"initialize",[],null),J.notations=Z,J.round_type=S,J.prefix_number=!1,J.suffix_number=!1,J.need_prefix_number=!1,J.need_suffix_number=!1,J.modifier=!0,J.critical=!1,J.fumble=!1,J.dollar=!1,J.allowed_cmp_op=[u,">=",">","<=","<","==","!="],J.question_target=!1},-2),N(c,"$disable_modifier",function(){return this.modifier=!1,this}),N(c,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),N(c,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),N(c,"$has_prefix_number",function(){var q=this;return q.prefix_number=!0,q.need_prefix_number=!0,q}),N(c,"$has_suffix_number",function(){var q=this;return q.suffix_number=!0,q.need_suffix_number=!0,q}),N(c,"$enable_critical",function(){return this.critical=!0,this}),N(c,"$enable_fumble",function(){return this.fumble=!0,this}),N(c,"$enable_dollar",function(){return this.dollar=!0,this}),N(c,"$restrict_cmp_op_to",function(q){var X;return X=_(arguments),this.allowed_cmp_op=X,this},-1),N(c,"$enable_question_target",function(){return this.question_target=!0,this}),N(c,"$parse",function(q){var X=this;try{return X.lexer=n("Lexer").$new(q,X.notations),X.$do_parse()}catch(F){if(!e.rescue(F,[n("ParseError"),n("ZeroDivisionError")]))throw F;try{return u}finally{e.pop_exception()}}}),c.$private(),N(c,"$parsed",function(q,X,F,R){try{return Q("eval_return"),L(n("Parsed").$new(),"tap",[],function U(J){var W,ne,ae,fe,de,me,ve,he=null==U.$$s?this:U.$$s;return null==he.round_type&&(he.round_type=u),null==J&&(J=u),J["$command="](q["$[]"]("command")),J["$prefix_number="]((W=q["$[]"]("prefix"))===u||null==W?u:W.$eval(he.round_type)),J["$suffix_number="]((ne=q["$[]"]("suffix"))===u||null==ne?u:ne.$eval(he.round_type)),J["$critical="]((ae=X["$[]"]("critical"))===u||null==ae?u:ae.$eval(he.round_type)),J["$fumble="]((fe=X["$[]"]("fumble"))===u||null==fe?u:fe.$eval(he.round_type)),J["$dollar="]((de=X["$[]"]("dollar"))===u||null==de?u:de.$eval(he.round_type)),J["$modify_number="](F.$eval(he.round_type)),J["$cmp_op="](R["$[]"]("cmp_op")),E(R["$[]"]("target"),"?")?(J["$question_target="](!0),L(J,"target_number=",me=[0]),me[me.length-1]):(J["$question_target="](!1),me=[(ve=R["$[]"]("target"),ve===u||null==ve?u:ve.$eval(he.round_type))],L(J,"target_number=",me),me[me.length-1])},{$$s:this})}catch(U){if(U===e.t_eval_return)return U.$v;throw U}}),N(c,"$next_token",function(){return this.lexer.$next_token()}),w=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),t=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),v=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),a=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),O=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),re=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),ee=[u,6,13,3,9,-1,27,-15,-10,-1,-38],ie=[u,u,u,u,u,u,19,16,15,u,u],ce=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),_e=V(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),j(m[0],"Racc_arg",[w,t,a,v,O,re,ie,ee,19,ce,_e,58,35,!0]),A(n("Ractor","skip_raise")?"constant":u)&&n("Ractor").$make_shareable(n("Racc_arg")),j(m[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),A(n("Ractor","skip_raise")?"constant":u)&&n("Ractor").$make_shareable(n("Racc_token_to_s_table")),j(m[0],"Racc_debug_parser",!1),N(c,"$_reduce_1",function(q,X,F){var R,S=this;return A(S.modifier)||S.$raise(n("ParseError")),R=z(q),S.$parsed(null==R[0]?u:R[0],null==R[1]?u:R[1],null==R[2]?u:R[2],null==R[3]?u:R[3])}),N(c,"$_reduce_2",function(q,X,F){var R,S=this;return A(S.modifier)||S.$raise(n("ParseError")),R=z(q),S.$parsed(null==R[0]?u:R[0],null==R[2]?u:R[2],null==R[1]?u:R[1],null==R[3]?u:R[3])}),N(c,"$_reduce_3",function(q,X,F){var R,W;return W=null==(R=z(q))[2]?u:R[2],this.$parsed(null==R[0]?u:R[0],null==R[1]?u:R[1],C(C(n("Arithmetic"),"Node"),"Number").$new(0),W)}),N(c,"$_reduce_4",function(q,X,F){var R=this;return A(R.prefix_number)&&A(R.suffix_number)||R.$raise(n("ParseError")),$(["command","prefix","suffix"],{command:q["$[]"](1),prefix:q["$[]"](0),suffix:q["$[]"](2)})}),N(c,"$_reduce_5",function(q,X,F){var R=this;return A(R.prefix_number)||R.$raise(n("ParseError")),A(R.need_suffix_number)&&R.$raise(n("ParseError")),$(["command","prefix"],{command:q["$[]"](1),prefix:q["$[]"](0)})}),N(c,"$_reduce_6",function(q,X,F){var R=this;return A(R.suffix_number)||R.$raise(n("ParseError")),A(R.need_prefix_number)&&R.$raise(n("ParseError")),$(["command","suffix"],{command:q["$[]"](0),suffix:q["$[]"](1)})}),N(c,"$_reduce_7",function(q,X,F){var R=this;return(A(R.need_prefix_number)||A(R.need_suffix_number))&&R.$raise(n("ParseError")),$(["command"],{command:q["$[]"](0)})}),N(c,"$_reduce_8",function(q,X,F){return $([],{})}),N(c,"$_reduce_9",function(q,X,F){var R,W,U=u;return U=null==(R=z(q))[0]?u:R[0],W=null==R[2]?u:R[2],A(this.critical)&&A(U["$[]"]("critical")["$nil?"]())||this.$raise(n("ParseError")),U["$[]="]("critical",W),U}),N(c,"$_reduce_10",function(q,X,F){var R,W,U=u;return U=null==(R=z(q))[0]?u:R[0],W=null==R[2]?u:R[2],A(this.fumble)&&A(U["$[]"]("fumble")["$nil?"]())||this.$raise(n("ParseError")),U["$[]="]("fumble",W),U}),N(c,"$_reduce_11",function(q,X,F){var R,W,U=u;return U=null==(R=z(q))[0]?u:R[0],W=null==R[2]?u:R[2],A(this.dollar)&&A(U["$[]"]("dollar")["$nil?"]())||this.$raise(n("ParseError")),U["$[]="]("dollar",W),U}),N(c,"$_reduce_12",function(q,X,F){return q["$[]"](1)}),N(c,"$_reduce_13",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"Negative").$new(q["$[]"](1))}),N(c,"$_reduce_14",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"+",q["$[]"](2))}),N(c,"$_reduce_15",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"-",q["$[]"](2))}),N(c,"$_reduce_16",function(q,X,F){return A(this.allowed_cmp_op["$include?"](u))||this.$raise(n("ParseError")),$([],{})}),N(c,"$_reduce_17",function(q,X,F){var R,U,J;return J=null==(R=z(q))[1]?u:R[1],A(this.allowed_cmp_op["$include?"](U=null==R[0]?u:R[0]))||this.$raise(n("ParseError")),$(["cmp_op","target"],{cmp_op:U,target:J})}),N(c,"$_reduce_18",function(q,X,F){var Z,R=this;return Z=q["$[]"](0),A(R.question_target)||R.$raise(n("ParseError")),A(R.allowed_cmp_op["$include?"](Z))||R.$raise(n("ParseError")),$(["cmp_op","target"],{cmp_op:Z,target:"?"})}),N(c,"$_reduce_19",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"+",q["$[]"](2))}),N(c,"$_reduce_20",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"-",q["$[]"](2))}),N(c,"$_reduce_22",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(q["$[]"](0),"*",q["$[]"](2))}),N(c,"$_reduce_23",function(q,X,F){return q["$[]"](3).$new(q["$[]"](0),q["$[]"](2))}),N(c,"$_reduce_25",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),N(c,"$_reduce_26",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"DivideWithCeil")}),N(c,"$_reduce_27",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"DivideWithCeil")}),N(c,"$_reduce_28",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"DivideWithRound")}),N(c,"$_reduce_29",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"DivideWithFloor")}),N(c,"$_reduce_30",function(q,X,F){return q["$[]"](1)}),N(c,"$_reduce_31",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"Negative").$new(q["$[]"](1))}),N(c,"$_reduce_33",function(q,X,F){return q["$[]"](1)}),N(c,"$_reduce_34",function(q,X,F){return C(C(n("Arithmetic"),"Node"),"Number").$new(q["$[]"](0))}),N(c,"$_reduce_none",function(q,X,F){return q["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var L,j,B,l,p,u,z,Q,Y=e.module,G=e.send,_=e.eqeqeq,I=e.truthy,K=e.def,f=e.return_val,M=[],h=e.nil;return L=M,j=Q=[Y(M[0],"BCDice")].concat(L),B=z=[Y(Q[0],"Deprecated")].concat(j),p=[l=Y(z[0],"Checker")].concat(B),u=e.$r(p),l.$private(),K(l,"$check_result_legacy",function(r,i,k,H){var D,P=this,x=h,y=h,g=h,b=h;return x=G(i,"map",[],"sides".$to_proc()),D=(y=G(i,"map",[],"value".$to_proc())).$sum(),g=_([100],b=x)?P.$check_1D100(r,D,k,H):_([20],b)?P.$check_1D20(r,D,k,H):_([6,6],b)?P.$check_2D6(r,D,y,k,H):h,(I(g["$nil?"]())||I(g["$empty?"]()))&&(g=_([10],b=x.$uniq())?P.$check_nD10(r,D,y,k,H):_([6],b)?P.$check_nD6(r,D,y,k,H):h,I(g["$nil?"]())||I(g["$empty?"]()))?h:u("Result").$new(g.$delete_prefix(" \uff1e "))}),K(l,"$check_1D100",f(h)),K(l,"$check_1D20",f(h)),K(l,"$check_nD10",f(h)),K(l,"$check_2D6",f(h)),K(l,"$check_nD6",f(h))},Opal.modules["bcdice/base"]=function(e){var p,P,b,d,n,w,s,o,c,T,y,Y=e.module,G=e.klass,_=e.slice,I=e.rb_plus,K=e.truthy,f=e.def,M=e.regexp,h=e.send,N=e.thrower,L=e.return_ivar,E=e.assign_ivar_val,Q=e.eqeqeq,V=e.eqeq,j=e.return_val,A=e.range,z=e.rb_minus,$=e.rb_divide,B=e.rb_times,l=e.rb_ge,u=e.top,C=[],r=e.$r(C),i=e.nil,k=e.$$$;return u.$require("i18n"),u.$require("i18n/backend/fallbacks"),u.$require("bcdice/randomizer"),u.$require("bcdice/dice_table"),u.$require("bcdice/enum"),u.$require("bcdice/translate"),u.$require("bcdice/result"),u.$require("bcdice/command/parser"),u.$require("bcdice/deprecated/checker"),P=C,b=y=[Y(C[0],"BCDice")].concat(P),o=[s=G(y[0],null,"Base")].concat(b),c=e.$r(o),(T=s.$$prototype).raw_input=T.randomizer=T.enabled_upcase_input=T.debug=i,n=[d=e.get_singleton_class(s)].concat(o),w=e.$r(n),d.$attr_reader("prefixes"),f(d,"$register_prefix",function(v){var O,ee;return null==this.prefixes&&(this.prefixes=i),O=_(arguments),this.prefixes=I(K(ee=this.prefixes)?ee:[],O.$flatten())},-1),f(d,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),f(d,"$prefixes_pattern",function(){var v=this,a=i;return null==v.prefixes_pattern&&(v.prefixes_pattern=i),null==v.prefixes&&(v.prefixes=i),v.prefixes_pattern=K(a=v.prefixes_pattern)?a:i,K(v.prefixes_pattern)?v.prefixes_pattern:(v.prefixes=K(a=v.prefixes)?a:[],v.prefixes.$freeze(),v.prefixes_pattern=(K(v.prefixes["$empty?"]())?/(?!)/:M(["^(S)?(",v.prefixes.$join("|"),")"],"i")).$freeze())}),f(d,"$command_pattern",function(){var v=this,a=i,O=i;return null==v.command_pattern&&(v.command_pattern=i),null==v.prefixes&&(v.prefixes=i),v.command_pattern=K(a=v.command_pattern)?a:i,K(v.command_pattern)?v.command_pattern:(v.prefixes=K(a=v.prefixes)?a:[],v.prefixes.$freeze(),O=I(h(k(w("CommonCommand"),"COMMANDS"),"map",[],function(ee){return null==ee&&(ee=i),k(ee,"PREFIX_PATTERN").$source()}),v.prefixes),v.command_pattern=M(["^S?(",O.$join("|"),")"],"i").$freeze())}),f(d,"$eval",function(v){try{return N("eval_return"),this.$new(v).$eval()}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),s.$include(c("Translate")),s.$include(k(c("Deprecated"),"Checker")),f(s,"$initialize",function(m){var n=this;return n.raw_input=m,n.sort_add_dice=!1,n.sort_barabara_dice=!1,n.d66_sort_type=k(c("D66SortType"),"NO_SORT"),n.enabled_d9=!1,n.round_type=k(c("RoundType"),"FLOOR"),n.sides_implicit_d=6,n.upper_dice_reroll_threshold=i,n.reroll_dice_reroll_threshold=i,n.default_cmp_op=i,n.default_target_number=i,n.enabled_upcase_input=!0,n.locale="ja_jp",n.randomizer=k(c("BCDice"),"Randomizer").$new(),n.debug=!1}),s.$attr_accessor("randomizer"),s.$attr_reader("d66_sort_type"),s.$attr_reader("round_type"),s.$attr_reader("sides_implicit_d"),s.$attr_reader("upper_dice_reroll_threshold"),s.$attr_reader("reroll_dice_reroll_threshold"),s.$attr_reader("default_cmp_op"),s.$attr_reader("default_target_number"),f(s,"$sort_add_dice?",L("sort_add_dice")),f(s,"$sort_barabara_dice?",L("sort_barabara_dice")),f(s,"$enabled_d9?",L("enabled_d9")),f(s,"$enable_debug",E("debug",!0)),f(s,"$eval",function(){var n,t,m=this,w=i;return n=k(c("BCDice"),"Preprocessor").$process(m.raw_input,m),w=K(t=m.$dice_command(n))?t:m.$eval_common_command(m.raw_input),K(w)?(w["$rands="](m.randomizer.$rand_results()),w["$detailed_rands="](m.randomizer.$detailed_rand_results()),w):i}),f(s,"$change_text",function(m){return m}),f(s,"$check_result",function(m,n,w,t){var v=this,a=i,O=i,re=i,ee=i,ie=i;return a=v.$check_result_legacy(m,n,w,t),K(a)?a:(O=h(n,"map",[],"sides".$to_proc()),ee=(re=h(n,"map",[],"value".$to_proc())).$sum(),a=Q([100],ie=O)?v.$result_1d100(m,ee,w,t):Q([20],ie)?v.$result_1d20(m,ee,w,t):Q([6,6],ie)?v.$result_2d6(m,ee,re,w,t):i,V(a,c("Result").$nothing())?i:K(a)?a:(a=Q([10],ie=O.$uniq())?v.$result_nd10(m,ee,re,w,t):Q([6],ie)?v.$result_nd6(m,ee,re,w,t):i,V(a,c("Result").$nothing())?i:K(a)?a:v.$result_ndx(m,w,t)))}),f(s,"$grich_text",j(i)),s.$private(),f(s,"$eval_common_command",function(m){try{N("eval_return");var w=N("return");return m=this.$change_text(m),h(k(c("CommonCommand"),"COMMANDS"),"each",[],function v(a){var re,O=null==v.$$s?this:v.$$s;if(null==O.randomizer&&(O.randomizer=i),null==a&&(a=i),re=a.$eval(m,O,O.randomizer),!K(re))return i;w.$throw(re)},{$$s:this,$$ret:w}),i}catch(v){if(v===e.t_eval_return||v===w)return v.$v;throw v}}),f(s,"$dice_command",function(m){var n=this,w=i,t=i,v=i,a=i;return K(n.enabled_upcase_input)&&(m=m.$upcase()),w=n.$class().$prefixes_pattern().$match(m),K(w)?(t=w["$[]"](1)["$nil?"]()["$!"](),K(t)&&(m=m["$[]"](A(1,-1,!1))),v=n.$eval_game_system_specific_command(m),K(v["$is_a?"](c("Result")))?(v["$secret="](K(a=v["$secret?"]())?a:t),v):K(v["$nil?"]())||K(v["$empty?"]())||V(v,"1")?i:h(c("Result").$new(),"tap",[],function(re){var ee;return null==re&&(re=i),re["$text="](v.$to_s()),h(re,"secret=",ee=[t]),ee[ee.length-1]})):i}),f(s,"$eval_game_system_specific_command",j(i)),f(s,"$result_ndx",function(m,n,w){return K(w["$is_a?"](c("String")))?i:K(m.$send(n,w))?c("Result").$success(this.$translate("success")):c("Result").$failure(this.$translate("failure"))}),f(s,"$result_1d100",j(i)),f(s,"$result_1d20",j(i)),f(s,"$result_nd10",j(i)),f(s,"$result_2d6",j(i)),f(s,"$result_nd6",j(i)),f(s,"$get_table_by_2d6",function(m){return this.$get_table_by_nD6(m,2)}),f(s,"$get_table_by_1d6",function(m){return this.$get_table_by_nD6(m,1)}),f(s,"$get_table_by_nD6",function(m,n){return this.$get_table_by_nDx(m,n,6)}),f(s,"$get_table_by_nDx",function(m,n,w){var v,a=i;return v=this.randomizer.$roll_sum(n,w),a=this.$get_table_value(m["$[]"](z(v,n))),K(a["$nil?"]())?["1",0]:[a,v]}),f(s,"$get_table_by_1d3",function(m){var t,v,n=this,a=i;return n.$debug("get_table_by_1d3"),t=n.randomizer.$roll_sum(1,6),n.$debug("num",t),v=$(z(t,1),2).$to_i(),n.$debug("index",v),a=m["$[]"](v),K(a["$nil?"]())?["1",0]:[a,t]}),f(s,"$get_table_by_d66_swap",function(m){var w;return w=this.randomizer.$roll_d66(k(c("D66SortType"),"ASC")),[this.$get_table_by_number(w,m),w]}),f(s,"$get_table_by_d66",function(m){var w,t,v,O,a=i;return w=this.randomizer.$roll_once(6),t=this.randomizer.$roll_once(6),v=I(B(z(w,1),6),z(t,1)),a=m["$[]"](v),O=""+w+t,K(a["$nil?"]())?["1",O]:[a,O]}),f(s,"$get_table_by_number",function(m,n,w){try{var t=N("return");return null==w&&(w="1"),h(n,"each",[],function a(O){var ee,re=null==a.$$s?this:a.$$s;if(null==O&&(O=i),ee=O["$[]"](0),!K(l(ee,m)))return i;t.$throw(re.$get_table_value(O["$[]"](1)))},{$$s:this,$$ret:t}),this.$get_table_value(w)}catch(a){if(a===t)return a.$v;throw a}},-3),f(s,"$get_table_value",function(m){return K(m["$is_a?"](c("Proc")))?m.$call():m}),f(s,"$roll_tables",function(m,n){var t=i;return t=n["$[]"](m),K(t)?t.$roll(this.randomizer).$to_s():i}),f(s,"$debug",function(m,n){var t,v=this,a=i,O=i;return t=_(arguments,1),K(v.debug)?(a=K(m["$is_a?"](c("String")))?m:m.$inspect(),K(t["$empty?"]())?v.$warn(a):(O=h(t,"map",[],function(ee){return null==ee&&(ee=i),K(ee["$is_a?"](c("String")))?'"'+ee+'"':ee.$inspect()}),v.$warn(a+": "+O.$join(", ")))):i},-2),k(k(r("I18n"),"Backend"),"Simple").$include(k(k(r("I18n"),"Backend"),"Fallbacks")),r("I18n").$load_path()["$<<"](r("Dir")["$[]"](r("File").$join("bcdice","../../i18n/**/*.yml"))),r("I18n")["$default_locale="]("ja_jp"),p=[["ja_jp"]],h(r("I18n").$fallbacks(),"defaults=",p),p[p.length-1]},Opal.modules["bcdice/game_system/sword_world/rating_lexer"]=function(e){var E,A,u,H,P,x,y,r,$,B,V,Y=e.module,G=e.klass,_=e.const_set,I=e.hash2,K=e.truthy,f=e.def,h=[],N=e.nil;return e.top.$require("strscan"),E=h,A=V=[Y(h[0],"BCDice")].concat(E),$=[Y(V[0],"GameSystem")].concat(A),B=e.$r($),u=$,H=r=[G($[0],B("Base"),"SwordWorld")].concat(u),x=[P=G(r[0],null,"RatingLexer")].concat(H),y=e.$r(x),P.$$prototype.scanner=N,_(x[0],"SYMBOLS",I(["+","-","*","/","(",")","[","]","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),f(P,"$initialize",function(b){var s,o,T;return b=K(T=(s=(o=b)===N||null==o?N:o.$split(" ",2))===N||null==s?N:s.$first())?T:"",this.scanner=y("StringScanner").$new(b)}),f(P,"$next_token",function(){var b=this,s=N,o=N,T=N;return K(b.scanner["$eos?"]())?[!1,"$"]:K(s=b.scanner.$scan(/\d+/))?["NUMBER",s.$to_i()]:(o=b.scanner.$getch().$upcase(),[K(T=y("SYMBOLS")["$[]"](o))?T:o.$to_sym(),o])}),f(P,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/game_system/sword_world/rating_parsed"]=function(e){var Q,z,C,P,x,y,D,g,i,B,l,j,Y=e.module,G=e.klass,_=e.def,I=e.truthy,K=e.rb_le,f=e.rb_plus,M=e.rb_lt,h=e.neqeq,N=[],L=e.nil;return Q=N,z=j=[Y(N[0],"BCDice")].concat(Q),B=[Y(j[0],"GameSystem")].concat(z),l=e.$r(B),C=B,P=i=[G(B[0],l("Base"),"SwordWorld")].concat(C),y=[x=G(i[0],null,"RatingParsed")].concat(P),D=e.$r(y),(g=x.$$prototype).modifier_after_half=g.modifier_after_one_and_a_half=g.semi_fixed_val=g.kept_modify=g.rate=g.greatest_fortune=g.modifier=L,x.$attr_accessor("rate"),x.$attr_accessor("critical"),x.$attr_accessor("kept_modify"),x.$attr_accessor("first_to"),x.$attr_accessor("first_modify"),x.$attr_accessor("rateup"),x.$attr_accessor("greatest_fortune"),x.$attr_accessor("semi_fixed_val"),x.$attr_accessor("tmp_fixed_val"),x.$attr_accessor("modifier"),x.$attr_accessor("modifier_after_half"),x.$attr_accessor("modifier_after_one_and_a_half"),_(x,"$initialize",function(s,o){var c=this;return c.rate=s,c.modifier=o,c.critical=13,c.kept_modify=0,c.first_to=0,c.first_modify=0,c.greatest_fortune=!1,c.rateup=0,c.semi_fixed_val=0,c.tmp_fixed_val=0,c.modifier_after_half=L,c.modifier_after_one_and_a_half=L}),_(x,"$half",function(){return this.modifier_after_half["$nil?"]()["$!"]()}),_(x,"$one_and_a_half",function(){return this.modifier_after_one_and_a_half["$nil?"]()["$!"]()}),_(x,"$min_critical",function(){var s=this;return I(K(s.semi_fixed_val,1))?3:f(f(s.semi_fixed_val,s.kept_modify),2).$clamp(3,13)}),_(x,"$infinite_roll?",function(){return M(this.$critical(),this.$min_critical())}),_(x,"$to_s",function(){var s=this,o=L;return o="KeyNo."+s.rate,I(M(s.$critical(),13))&&(o=f(o,"c["+s.$critical()+"]")),h(s.$first_modify(),0)&&(o=f(o,"m["+D("Format").$modifier(s.$first_modify())+"]")),h(s.$first_to(),0)&&(o=f(o,"m["+s.$first_to()+"]")),h(s.$rateup(),0)&&(o=f(o,"r["+s.$rateup()+"]")),I(s.greatest_fortune)&&(o=f(o,"gf")),h(s.$semi_fixed_val(),0)&&(o=f(o,"sf["+s.$semi_fixed_val()+"]")),h(s.$tmp_fixed_val(),0)&&(o=f(o,"tf["+s.$tmp_fixed_val()+"]")),h(s.$kept_modify(),0)&&(o=f(o,"a["+D("Format").$modifier(s.$kept_modify())+"]")),h(s.modifier,0)&&(o=f(o,D("Format").$modifier(s.modifier))),o})},Opal.modules["bcdice/game_system/sword_world/rating_options"]=function(e){var h,Q,B,r,p,j,A,L,Y=e.module,G=e.klass,_=e.truthy,I=e.def,K=[];return h=K,Q=L=[Y(K[0],"BCDice")].concat(h),j=[Y(L[0],"GameSystem")].concat(Q),A=e.$r(j),B=j,p=[G(j[0],A("Base"),"SwordWorld")].concat(B),(r=G(p[0],null,"RatingOptions")).$attr_accessor("critical"),r.$attr_accessor("kept_modify"),r.$attr_accessor("first_to"),r.$attr_accessor("first_modify"),r.$attr_accessor("rateup"),r.$attr_accessor("greatest_fortune"),r.$attr_accessor("semi_fixed_val"),r.$attr_accessor("tmp_fixed_val"),r.$attr_accessor("modifier"),r.$attr_accessor("modifier_after_half"),r.$attr_accessor("modifier_after_one_and_a_half"),I(r,"$settable_first_roll_adjust_option?",function(){var H;return _(H=this.$first_modify()["$nil?"]())?this.$first_to()["$nil?"]():H}),I(r,"$settable_non_2d_roll_option?",function(){var H,P,k=this;return _(H=_(P=k.$greatest_fortune()["$nil?"]())?k.$semi_fixed_val()["$nil?"]():P)?k.$tmp_fixed_val()["$nil?"]():H})},Opal.modules["bcdice/game_system/sword_world/rating_parser"]=function(e){var p,i,D,T,v,a,O,re,ee,ie,ce,oe,ue,$e,d,w,t,q,b,s,H,P,C,Y=e.module,G=e.klass,_=e.ensure_kwargs,I=e.send2,K=e.find_super,f=e.def,M=e.send,h=e.truthy,N=e.not,L=e.thrower,E=e.hash,Q=e.const_set,V=e.to_ary,j=e.eqeq,A=e.top,z=[],$=e.nil,B=e.$$$;return A.$require("racc/parser.rb"),A.$require("bcdice/arithmetic/node"),A.$require("bcdice/enum"),A.$require("bcdice/game_system/sword_world/rating_lexer"),A.$require("bcdice/game_system/sword_world/rating_parsed"),A.$require("bcdice/game_system/sword_world/rating_options"),p=z,i=C=[Y(z[0],"BCDice")].concat(p),H=[Y(C[0],"GameSystem")].concat(i),P=e.$r(H),D=H,b=[G(H[0],P("Base"),"SwordWorld")].concat(D),s=e.$r(b),T=b,w=[d=G(b[0],B(s("Racc"),"Parser"),"RatingParser")].concat(T),t=e.$r(w),(q=d.$$prototype).lexer=q.round_type=q.version=$,f(d,"$initialize",function X(F){var R,Z,U=this;return X.$$p=null,null==(R=(F=_(F)).$$smap.version)&&(R="v1_0"),null==(Z=F.$$smap.round_type)&&(Z=B(t("RoundType"),"CEIL")),I(U,K(U,"initialize",X,!1,!0),"initialize",[],null),U.version=R,U.round_type=Z},-1),f(d,"$set_debug",function(){return this.yydebug=!0,this}),f(d,"$parse",function(F){try{return this.lexer=t("RatingLexer").$new(F),this.$do_parse()}catch(Z){if(!e.rescue(Z,[t("ParseError"),t("ZeroDivisionError")]))throw Z;try{return $}finally{e.pop_exception()}}}),d.$private(),f(d,"$parsed",function(F,R,Z){try{return L("eval_return"),M(t("RatingParsed").$new(F,R),"tap",[],function J(W){var ne,ae,fe,de,me,ve,he,ye,pe,ge=null==J.$$s?this:J.$$s,be=$;return null==ge.round_type&&(ge.round_type=$),null==W&&(W=$),W["$kept_modify="](h(be=(ne=Z.$kept_modify())===$||null==ne?$:ne.$eval(ge.round_type))?be:0),W["$first_to="](h(be=Z.$first_to())?be:0),W["$first_modify="](h(be=Z.$first_modify())?be:0),W["$rateup="](h(be=(ae=Z.$rateup())===$||null==ae?$:ae.$eval(ge.round_type))?be:0),N(Z.$greatest_fortune()["$nil?"]())&&W["$greatest_fortune="](Z.$greatest_fortune()),W["$semi_fixed_val="](h(be=(fe=Z.$semi_fixed_val())===$||null==fe?$:fe.$clamp(1,6))?be:0),W["$tmp_fixed_val="](h(be=(de=Z.$tmp_fixed_val())===$||null==de?$:de.$clamp(1,6))?be:0),W["$modifier_after_half="]((me=Z.$modifier_after_half())===$||null==me?$:me.$eval(ge.round_type)),W["$modifier_after_one_and_a_half="]((ve=Z.$modifier_after_one_and_a_half())===$||null==ve?$:ve.$eval(ge.round_type)),he=[h((pe=Z.$critical(),ye=pe===$||null==pe?$:pe.$eval(ge.round_type),be=ye===$||null==ye?$:ye.$clamp(0,13)))?be:h(W.$half())||h(W.$one_and_a_half())?13:10],M(W,"critical=",he),he[he.length-1]},{$$s:this})}catch(J){if(J===e.t_eval_return)return J.$v;throw J}}),f(d,"$next_token",function(){return this.lexer.$next_token()}),v=e.large_array_unpack("18,16,17,19,6,20,21,23,24,64,65,27,28,13,66,14,22,15,18,16,17,19,5,20,21,23,24,5,9,3,4,13,10,14,22,15,18,16,17,19,11,20,21,23,24,34,5,34,40,13,42,14,22,15,30,31,30,31,33,34,33,34,62,63,62,63,34,43,30,31,30,31,33,34,33,30,31,44,34,33,34,52,30,31,57,34,33,30,31,30,31,33,34,33,30,31,58,34,33,34,60,30,31,61,34,33,30,31,30,31,33,34,33,30,31,,34,33,34,,30,31,,34,33,30,31,30,31,33,36,33,30,31,62,63,33,62,63,37,38,62,63,62,63,62,63"),a=e.large_array_unpack("7,7,7,7,1,7,7,7,7,55,55,12,12,7,55,7,7,7,25,25,25,25,3,25,25,25,25,0,4,0,0,25,5,25,25,25,49,49,49,49,6,49,49,49,49,13,9,14,17,49,19,49,49,49,13,13,14,14,13,16,14,18,46,46,48,48,22,20,16,16,18,18,16,23,18,22,22,21,24,22,27,29,23,23,37,28,23,24,24,27,27,24,30,27,28,28,38,31,28,33,43,30,30,44,40,30,31,31,33,33,31,62,33,40,40,,63,40,64,,62,62,,65,62,63,63,64,64,63,15,64,65,65,50,50,65,51,51,15,15,56,56,69,69,70,70"),O=e.large_array_unpack("24,4,,19,23,30,40,-4,,43,,,0,43,45,128,57,43,59,42,59,69,64,71,76,14,,78,83,63,90,95,,97,,,,82,94,,102,,,98,101,,49,,51,32,121,124,,,,-2,128,,,,,,109,114,116,121,,,,130,132"),re=e.large_array_unpack("-36,-36,-5,-36,-36,-36,-36,-1,-5,-36,-4,71,-6,-36,-36,-36,-12,-36,-36,-36,-36,-36,-36,-36,-36,-2,-5,-36,-36,-36,-36,-36,-33,-36,-35,-8,-9,-36,-36,-13,-14,-16,-17,-36,-36,-20,-21,-30,-22,-3,-23,-24,-7,-31,-32,-36,-27,-10,-11,-15,-18,-19,-36,-36,-36,-36,-34,-28,-29,-25,-26"),ee=e.large_array_unpack("29,35,7,39,1,41,46,48,25,45,50,51,2,55,,8,56,53,54,,,26,,,,,49,59,,,,,,,,,,,,,,,,,,,,69,70,67,68"),ie=e.large_array_unpack("5,5,3,5,1,5,6,6,3,5,6,6,2,7,,2,6,5,5,,,2,,,,,3,5,,,,,,,,,,,,,,,,,,,,6,6,5,5"),ce=[$,4,12,0,$,-13,-17,-20,$],oe=[$,$,$,$,12,47,$,$,32],ue=e.large_array_unpack("0,0,racc_error,2,23,_reduce_1,3,23,_reduce_2,4,23,_reduce_3,2,24,_reduce_4,0,25,_reduce_5,2,25,_reduce_6,4,25,_reduce_7,3,25,_reduce_8,3,25,_reduce_9,4,25,_reduce_10,4,25,_reduce_11,2,25,_reduce_12,3,25,_reduce_13,3,25,_reduce_14,4,25,_reduce_15,3,25,_reduce_16,3,25,_reduce_17,4,25,_reduce_18,4,25,_reduce_19,3,25,_reduce_20,2,26,_reduce_21,2,26,_reduce_22,3,26,_reduce_23,3,26,_reduce_24,3,29,_reduce_25,3,29,_reduce_26,1,29,_reduce_none,3,28,_reduce_28,3,28,_reduce_29,1,28,_reduce_none,2,27,_reduce_31,2,27,_reduce_32,1,27,_reduce_none,3,30,_reduce_34,1,30,_reduce_35"),$e=E(!1,0,"error",1,"NUMBER",2,"K",3,"R",4,"H",5,"O",6,"G",7,"F",8,"S",9,"T",10,"PLUS",11,"MINUS",12,"ASTERISK",13,"SLASH",14,"PARENL",15,"PARENR",16,"BRACKETL",17,"BRACKETR",18,"AT",19,"SHARP",20,"DOLLAR",21),Q(w[0],"Racc_arg",[v,a,re,O,ee,ie,oe,ce,22,ue,$e,71,36,!0]),h(t("Ractor","skip_raise")?"constant":$)&&t("Ractor").$make_shareable(t("Racc_arg")),Q(w[0],"Racc_token_to_s_table",["$end","error","NUMBER","K","R","H","O","G","F","S","T","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","BRACKETL","BRACKETR","AT","SHARP","DOLLAR","$start","expr","rate","option","modifier","unary","mul","add","term"]),h(t("Ractor","skip_raise")?"constant":$)&&t("Ractor").$make_shareable(t("Racc_token_to_s_table")),Q(w[0],"Racc_debug_parser",!1),f(d,"$_reduce_1",function(F,R,Z){try{L("eval_return");var U,ne,de,ae=$,fe=$;return ne=null==(U=V(F))[0]?$:U[0],fe=h(de=(ae=null==U[1]?$:U[1]).$modifier())?de:B(B(t("Arithmetic"),"Node"),"Number").$new(0),this.$parsed(ne,fe.$eval(this.round_type),ae)}catch(me){if(me===e.t_eval_return)return me.$v;throw me}}),f(d,"$_reduce_2",function(F,R,Z){try{L("eval_return");var U,ae,de,W=this,fe=$,me=$;return ae=null==(U=V(F))[1]?$:U[1],h((fe=null==U[2]?$:U[2]).$modifier_after_one_and_a_half())&&W.$raise(t("ParseError")),h(fe.$modifier_after_half())||fe["$modifier_after_half="](B(B(t("Arithmetic"),"Node"),"Number").$new(0)),me=h(de=fe.$modifier())?de:B(B(t("Arithmetic"),"Node"),"Number").$new(0),W.$parsed(ae,me.$eval(W.round_type),fe)}catch(ve){if(ve===e.t_eval_return)return ve.$v;throw ve}}),f(d,"$_reduce_3",function(F,R,Z){try{L("eval_return");var U,ae,de,W=this,fe=$,me=$;return ae=null==(U=V(F))[2]?$:U[2],h((fe=null==U[3]?$:U[3]).$modifier_after_half())&&W.$raise(t("ParseError")),h(fe.$modifier_after_one_and_a_half())||fe["$modifier_after_one_and_a_half="](B(B(t("Arithmetic"),"Node"),"Number").$new(0)),me=h(de=fe.$modifier())?de:B(B(t("Arithmetic"),"Node"),"Number").$new(0),W.$parsed(ae,me.$eval(W.round_type),fe)}catch(ve){if(ve===e.t_eval_return)return ve.$v;throw ve}}),f(d,"$_reduce_4",function(F,R,Z){return F["$[]"](1).$to_i()}),f(d,"$_reduce_5",function(F,R,Z){return t("RatingOptions").$new()}),f(d,"$_reduce_6",function(F,R,Z){var S,ne,W=$;return ne=null==(S=V(F))[1]?$:S[1],h((W=null==S[0]?$:S[0]).$modifier()["$nil?"]())||this.$raise(t("ParseError")),W["$modifier="](ne),W}),f(d,"$_reduce_7",function(F,R,Z){var S,ae,W=$;return ae=null==(S=V(F))[2]?$:S[2],h((W=null==S[0]?$:S[0]).$critical()["$nil?"]())||this.$raise(t("ParseError")),W["$critical="](ae),W}),f(d,"$_reduce_8",function(F,R,Z){var S,ae,W=$;return ae=null==(S=V(F))[2]?$:S[2],h((W=null==S[0]?$:S[0]).$critical()["$nil?"]())||this.$raise(t("ParseError")),W["$critical="](ae),W}),f(d,"$_reduce_9",function(F,R,Z){var S,W=$,ae=$;return ae=null==(S=V(F))[2]?$:S[2],h((W=null==S[0]?$:S[0])["$settable_first_roll_adjust_option?"]())||this.$raise(t("ParseError")),W["$first_to="](ae.$to_i()),W}),f(d,"$_reduce_10",function(F,R,Z){var S,W=$,ae=$;return ae=null==(S=V(F))[3]?$:S[3],h((W=null==S[0]?$:S[0])["$settable_first_roll_adjust_option?"]())||this.$raise(t("ParseError")),W["$first_modify="](ae.$to_i()),W}),f(d,"$_reduce_11",function(F,R,Z){var S,W=$,ae=$;return ae=null==(S=V(F))[3]?$:S[3],h((W=null==S[0]?$:S[0])["$settable_first_roll_adjust_option?"]())||this.$raise(t("ParseError")),W["$first_modify="](ae.$to_i()["$-@"]()),W}),f(d,"$_reduce_12",function(F,R,Z){var S,W=$;return S=V(F),h((W=null==S[0]?$:S[0]).$modifier_after_half()["$nil?"]())||this.$raise(t("ParseError")),W["$modifier_after_half="](B(B(t("Arithmetic"),"Node"),"Number").$new(0)),W}),f(d,"$_reduce_13",function(F,R,Z){var S,ae,W=$;return ae=null==(S=V(F))[2]?$:S[2],h((W=null==S[0]?$:S[0]).$modifier_after_half()["$nil?"]())||this.$raise(t("ParseError")),W["$modifier_after_half="](ae),W}),f(d,"$_reduce_14",function(F,R,Z){var S,W=$;return S=V(F),h((W=null==S[0]?$:S[0]).$modifier_after_one_and_a_half())&&this.$raise(t("ParseError")),W["$modifier_after_one_and_a_half="](B(B(t("Arithmetic"),"Node"),"Number").$new(0)),W}),f(d,"$_reduce_15",function(F,R,Z){var S,ae,W=$;return ae=null==(S=V(F))[3]?$:S[3],h((W=null==S[0]?$:S[0]).$modifier_after_one_and_a_half())&&this.$raise(t("ParseError")),W["$modifier_after_one_and_a_half="](ae),W}),f(d,"$_reduce_16",function(F,R,Z){var S,ae,W=$;return W=null==(S=V(F))[0]?$:S[0],ae=null==S[2]?$:S[2],h(["v2_5","v2_0"]["$include?"](this.version))&&h(W.$rateup()["$nil?"]())||this.$raise(t("ParseError")),W["$rateup="](ae),W}),f(d,"$_reduce_17",function(F,R,Z){var S,W=$;return W=null==(S=V(F))[0]?$:S[0],h(["v2_5","v2_0"]["$include?"](this.version))&&h(W["$settable_non_2d_roll_option?"]())||this.$raise(t("ParseError")),W["$greatest_fortune="](!0),W}),f(d,"$_reduce_18",function(F,R,Z){var S,W=$,ae=$;return W=null==(S=V(F))[0]?$:S[0],ae=null==S[3]?$:S[3],h(["v2_5","v2_0"]["$include?"](this.version))&&h(W["$settable_non_2d_roll_option?"]())||this.$raise(t("ParseError")),W["$semi_fixed_val="](ae.$to_i()),W}),f(d,"$_reduce_19",function(F,R,Z){var S,W=$,ae=$;return W=null==(S=V(F))[0]?$:S[0],ae=null==S[3]?$:S[3],h(["v2_5","v2_0"]["$include?"](this.version))&&h(W["$settable_non_2d_roll_option?"]())||this.$raise(t("ParseError")),W["$tmp_fixed_val="](ae.$to_i()),W}),f(d,"$_reduce_20",function(F,R,Z){var S,ae,W=$;return W=null==(S=V(F))[0]?$:S[0],ae=null==S[2]?$:S[2],j(this.version,"v2_5")&&h(W.$kept_modify()["$nil?"]())||this.$raise(t("ParseError")),W["$kept_modify="](ae),W}),f(d,"$_reduce_21",function(F,R,Z){return F["$[]"](1)}),f(d,"$_reduce_22",function(F,R,Z){return B(B(t("Arithmetic"),"Node"),"Negative").$new(F["$[]"](1))}),f(d,"$_reduce_23",function(F,R,Z){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"+",F["$[]"](2))}),f(d,"$_reduce_24",function(F,R,Z){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"-",F["$[]"](2))}),f(d,"$_reduce_25",function(F,R,Z){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"+",F["$[]"](2))}),f(d,"$_reduce_26",function(F,R,Z){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"-",F["$[]"](2))}),f(d,"$_reduce_28",function(F,R,Z){return B(B(t("Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"*",F["$[]"](2))}),f(d,"$_reduce_29",function(F,R,Z){return B(B(t("Arithmetic"),"Node"),"DivideWithGameSystemDefault").$new(F["$[]"](0),F["$[]"](2))}),f(d,"$_reduce_31",function(F,R,Z){return F["$[]"](1)}),f(d,"$_reduce_32",function(F,R,Z){return B(B(t("Arithmetic"),"Node"),"Negative").$new(F["$[]"](1))}),f(d,"$_reduce_34",function(F,R,Z){return F["$[]"](1)}),f(d,"$_reduce_35",function(F,R,Z){return B(B(t("Arithmetic"),"Node"),"Number").$new(F["$[]"](0))}),f(d,"$_reduce_none",function(F,R,Z){return F["$[]"](0)})},Opal.modules["bcdice/game_system/SwordWorld"]=function(e){var H,D,T,d,m,n,w,b,s,x,Y=e.module,G=e.klass,_=e.const_set,I=e.send2,K=e.find_super,f=e.def,M=e.truthy,h=e.rb_ge,N=e.rb_le,L=e.eqeq,E=e.neqeq,Q=e.rb_minus,V=e.rb_gt,j=e.hash2,A=e.send,z=e.to_ary,$=e.rb_plus,B=e.rb_lt,l=e.rb_times,p=e.thrower,u=e.rb_divide,C=e.top,r=[],i=e.nil;return C.$require("bcdice/base"),C.$require("bcdice/game_system/sword_world/rating_parser"),H=r,D=x=[Y(r[0],"BCDice")].concat(H),b=[Y(x[0],"GameSystem")].concat(D),s=e.$r(b),T=b,m=[d=G(b[0],s("Base"),"SwordWorld")].concat(T),n=e.$r(m),(w=d.$$prototype).rating_table=w.randomizer=i,_(m[0],"ID","SwordWorld"),_(m[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c9RPG"),_(m[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u3068"),_(m[0],"HELP_MESSAGE","\u30fbSW\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx[c]+m$f) (x:\u30ad\u30fc, c:\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024, m:\u30dc\u30fc\u30ca\u30b9, f:\u51fa\u76ee\u4fee\u6b63)\n"),d.$register_prefix("H?K"),f(d,"$initialize",function t(v){var O=this;return t.$$p=null,I(O,K(O,"initialize",t,!1,!0),"initialize",[v],null),O.rating_table=0}),f(d,"$result_2d6",function(v,a,O,re,ee){return M(h(a,12))?n("Result").$critical(this.$translate("SwordWorld.critical")):M(N(a,2))?n("Result").$fumble(this.$translate("SwordWorld.fumble")):E(re,">=")||L(ee,"?")?i:M(h(v,ee))?n("Result").$success(this.$translate("success")):n("Result").$failure(this.$translate("failure"))}),f(d,"$eval_game_system_specific_command",function(v){return this.$rating(v)}),d.$private(),f(d,"$rating_parser",function(){return n("RatingParser").$new()}),f(d,"$rating",function(v){var a,O,re=this,ee=i,ie=i,ce=i,oe=i,ue=i,_e=i,le=i,$e=i,se=i,te=i,q=i,X=i,F=i,R=i,S=i,U=i;return re.$debug("rating string",v),ee=re.$rating_parser().$parse(v),M(ee)?(ie=re.$getSW2_0_RatingTable(),ce=Q(ie.$length(),1),re.$debug("keyMax",ce),M(V(ee.$rate(),ce))?n("Result").$new(re.$translate("SwordWorld.keynumber_exceeds",j(["keyMax"],{keyMax:ce}))):M(ee["$infinite_roll?"]())?n("Result").$new(re.$translate("SwordWorld.infinite_critical",j(["min_critical"],{min_critical:ee.$min_critical()}))):(oe=re.$getNewRates(ie),ue=ee+" \uff1e ",_e=[],le=[],$e=[],se=0,te=0,q=0,X=0,F=ee.$first_to(),R=ee.$first_modify(),function(){try{var J=p("break");return A(re,"loop",[],function W(){var ne,ae,ve,he,fe=null==W.$$s?this:W.$$s,de=i,me=i;if(ae=fe.$rollDice(ee,X),me=null==(ne=z(ae))[1]?i:ne[1],se=de=null==ne[0]?i:ne[0],E(F,0)?(se=de=F,F=0):E(R,0)&&(se=$(se,R),R=0),M(N(de,2))&&(_e["$<<"](de.$to_s()),le["$<<"](me.$to_s()),$e["$<<"]("**"),X=$(X,1),J.$throw()),E(ee.$kept_modify(),0)&&E(se,2)&&(se=$(se,ee.$kept_modify())),M(B(se,2))&&(se=2),M(V(se,12))&&(se=12),ve=[$(ee.$rate(),l(X,ee.$rateup())),ce].$min(),fe.$debug("currentKey",ve),he=oe["$[]"](se)["$[]"](ve),fe.$debug("rateValue",he),q=$(q,he),te=$(te,se),_e["$<<"](se.$to_s()),le["$<<"](me.$to_s()),$e["$<<"](M(V(se,2))?he:"**"),X=$(X,1),M(h(se,ee.$critical())))return i;J.$throw()},{$$s:re})}catch(W){if(W===J)return W.$v;throw W}}(),O=re.$getResultText(q,ee,le,_e,$e,te,X),a=z(O),S=null==a[1]?i:a[1],U=null==a[2]?i:a[2],ue=$(ue,null==a[0]?i:a[0]),A(n("Result").$new(),"tap",[],function(W){var ne;return null==W&&(W=i),W["$text="](ue),W["$critical="](S),A(W,"fumble=",ne=[U]),ne[ne.length-1]}))):(re.$debug("not matched"),"1")}),f(d,"$getSW2_0_RatingTable",function(){return["*,0,0,0,1,2,2,3,3,4,4","*,0,0,0,1,2,3,3,3,4,4","*,0,0,0,1,2,3,4,4,4,4","*,0,0,1,1,2,3,4,4,4,5","*,0,0,1,2,2,3,4,4,5,5","*,0,1,1,2,2,3,4,5,5,5","*,0,1,1,2,3,3,4,5,5,5","*,0,1,1,2,3,4,4,5,5,6","*,0,1,2,2,3,4,4,5,6,6","*,0,1,2,3,3,4,4,5,6,7","*,1,1,2,3,3,4,5,5,6,7","*,1,2,2,3,3,4,5,6,6,7","*,1,2,2,3,4,4,5,6,6,7","*,1,2,3,3,4,4,5,6,7,7","*,1,2,3,4,4,4,5,6,7,8","*,1,2,3,4,4,5,5,6,7,8","*,1,2,3,4,4,5,6,7,7,8","*,1,2,3,4,5,5,6,7,7,8","*,1,2,3,4,5,6,6,7,7,8","*,1,2,3,4,5,6,7,7,8,9","*,1,2,3,4,5,6,7,8,9,10","*,1,2,3,4,6,6,7,8,9,10","*,1,2,3,5,6,6,7,8,9,10","*,2,2,3,5,6,7,7,8,9,10","*,2,3,4,5,6,7,7,8,9,10","*,2,3,4,5,6,7,8,8,9,10","*,2,3,4,5,6,8,8,9,9,10","*,2,3,4,6,6,8,8,9,9,10","*,2,3,4,6,6,8,9,9,10,10","*,2,3,4,6,7,8,9,9,10,10","*,2,4,4,6,7,8,9,10,10,10","*,2,4,5,6,7,8,9,10,10,11","*,3,4,5,6,7,8,10,10,10,11","*,3,4,5,6,8,8,10,10,10,11","*,3,4,5,6,8,9,10,10,11,11","*,3,4,5,7,8,9,10,10,11,12","*,3,5,5,7,8,9,10,11,11,12","*,3,5,6,7,8,9,10,11,12,12","*,3,5,6,7,8,10,10,11,12,13","*,4,5,6,7,8,10,11,11,12,13","*,4,5,6,7,9,10,11,11,12,13","*,4,6,6,7,9,10,11,12,12,13","*,4,6,7,7,9,10,11,12,13,13","*,4,6,7,8,9,10,11,12,13,14","*,4,6,7,8,10,10,11,12,13,14","*,4,6,7,9,10,10,11,12,13,14","*,4,6,7,9,10,10,12,13,13,14","*,4,6,7,9,10,11,12,13,13,15","*,4,6,7,9,10,12,12,13,13,15","*,4,6,7,10,10,12,12,13,14,15","*,4,6,8,10,10,12,12,13,15,15","*,5,7,8,10,10,12,12,13,15,15","*,5,7,8,10,11,12,12,13,15,15","*,5,7,9,10,11,12,12,14,15,15","*,5,7,9,10,11,12,13,14,15,16","*,5,7,10,10,11,12,13,14,16,16","*,5,8,10,10,11,12,13,15,16,16","*,5,8,10,11,11,12,13,15,16,17","*,5,8,10,11,12,12,13,15,16,17","*,5,9,10,11,12,12,14,15,16,17","*,5,9,10,11,12,13,14,15,16,18","*,5,9,10,11,12,13,14,16,17,18","*,5,9,10,11,13,13,14,16,17,18","*,5,9,10,11,13,13,15,17,17,18","*,5,9,10,11,13,14,15,17,17,18","*,5,9,10,12,13,14,15,17,18,18","*,5,9,10,12,13,15,15,17,18,19","*,5,9,10,12,13,15,16,17,19,19","*,5,9,10,12,14,15,16,17,19,19","*,5,9,10,12,14,16,16,17,19,19","*,5,9,10,12,14,16,17,18,19,19","*,5,9,10,13,14,16,17,18,19,20","*,5,9,10,13,15,16,17,18,19,20","*,5,9,10,13,15,16,17,19,20,21","*,6,9,10,13,15,16,18,19,20,21","*,6,9,10,13,16,16,18,19,20,21","*,6,9,10,13,16,17,18,19,20,21","*,6,9,10,13,16,17,18,20,21,22","*,6,9,10,13,16,17,19,20,22,23","*,6,9,10,13,16,18,19,20,22,23","*,6,9,10,13,16,18,20,21,22,23","*,6,9,10,13,17,18,20,21,22,23","*,6,9,10,14,17,18,20,21,22,24","*,6,9,11,14,17,18,20,21,23,24","*,6,9,11,14,17,19,20,21,23,24","*,6,9,11,14,17,19,21,22,23,24","*,7,10,11,14,17,19,21,22,23,25","*,7,10,12,14,17,19,21,22,24,25","*,7,10,12,14,18,19,21,22,24,25","*,7,10,12,15,18,19,21,22,24,26","*,7,10,12,15,18,19,21,23,25,26","*,7,11,13,15,18,19,21,23,25,26","*,7,11,13,15,18,20,21,23,25,27","*,8,11,13,15,18,20,22,23,25,27","*,8,11,13,16,18,20,22,23,25,28","*,8,11,14,16,18,20,22,23,26,28","*,8,11,14,16,19,20,22,23,26,28","*,8,12,14,16,19,20,22,24,26,28","*,8,12,15,16,19,20,22,24,27,28","*,8,12,15,17,19,20,22,24,27,29","*,8,12,15,18,19,20,22,24,27,30"]}),f(d,"$getNewRates",function(v){var a,O,ee=i,ie=i,ce=i,oe=i,ue=i,_e=i,le=i,$e=i,se=i,te=i,q=i;return ee=[],ie=[],ce=[],oe=[],ue=[],_e=[],le=[],$e=[],se=[],te=[],q=[],A(v,"each",[],function(R){var Z=i;return null==R&&(R=i),Z=R.$split(/,/),q.$push(0),ee.$push(Z["$[]"](1).$to_i()),ie.$push(Z["$[]"](2).$to_i()),ce.$push(Z["$[]"](3).$to_i()),oe.$push(Z["$[]"](4).$to_i()),ue.$push(Z["$[]"](5).$to_i()),_e.$push(Z["$[]"](6).$to_i()),le.$push(Z["$[]"](7).$to_i()),$e.$push(Z["$[]"](8).$to_i()),se.$push(Z["$[]"](9).$to_i()),te.$push(Z["$[]"](10).$to_i())}),L(this.rating_table,1)&&te["$[]="](31,(a=[32,(O=[33,10],A(te,"[]=",O),O[O.length-1])],A(te,"[]=",a),a[a.length-1])),[q,q,q,ee,ie,ce,oe,ue,_e,le,$e,se,te]}),f(d,"$rollDice",function(v,a){var re=i;return[(re=this.randomizer.$roll_barabara(2,6)).$sum(),re.$join(",")]}),f(d,"$getResultText",function(v,a,O,re,ee,ie,ce){var ue=i,_e=i,le=i,$e=i,se=i;return(ue=[]).$push("2D:["+O.$join(" ")+"]="+re.$join(",")),M(N(ie,2))?(ue.$push(ee.$join(",")),ue.$push(this.$translate("SwordWorld.fumble")),[ue.$join(" \uff1e "),!1,!0]):(M(V(ee.$size(),1))||E(a.$modifier(),0)?(_e=$(ee.$join(","),n("Format").$modifier(a.$modifier())),M(a.$half())?(_e="("+_e+")/2",E(a.$modifier_after_half(),0)&&(_e=$(_e,n("Format").$modifier(a.$modifier_after_half())))):M(a.$one_and_a_half())&&(_e="("+_e+")*1.5",E(a.$modifier_after_one_and_a_half(),0)&&(_e=$(_e,n("Format").$modifier(a.$modifier_after_one_and_a_half())))),ue.$push(_e)):M(a.$half())?(_e=ee.$first()+"/2",E(a.$modifier_after_half(),0)&&(_e=$(_e,n("Format").$modifier(a.$modifier_after_half()))),ue.$push(_e)):M(a.$one_and_a_half())&&(_e=ee.$first()+"*1.5",E(a.$modifier_after_one_and_a_half(),0)&&(_e=$(_e,n("Format").$modifier(a.$modifier_after_one_and_a_half()))),ue.$push(_e)),M(V(ce,1))&&(le=this.$translate("SwordWorld.round_text",j(["reroll_count"],{reroll_count:Q(ce,1)})),ue.$push(le)),$e=$(v,a.$modifier()),M(a.$half())?($e=u($e,2).$ceil(),E(a.$modifier_after_half(),0)&&($e=$($e,a.$modifier_after_half()))):M(a.$one_and_a_half())&&($e=l($e,1.5).$ceil(),E(a.$modifier_after_one_and_a_half(),0)&&($e=$($e,a.$modifier_after_one_and_a_half()))),se=$e.$to_s(),ue.$push(se),[ue.$join(" \uff1e "),V(ce,1),!1])})},Opal.modules["bcdice/game_system/sword_world/transcendent_test"]=function(e){var j,B,i,y,D,g,b,s,H,p,u,z,Y=e.module,G=e.klass,_=e.def,I=e.truthy,K=e.rb_lt,f=e.hash2,M=e.rb_ge,h=e.rb_plus,N=e.send,L=e.top,E=[],Q=e.nil;return L.$require("bcdice/result"),L.$require("bcdice/translate"),j=E,B=z=[Y(E[0],"BCDice")].concat(j),p=[Y(z[0],"GameSystem")].concat(B),u=e.$r(p),i=p,y=H=[G(p[0],u("SwordWorld"),"SwordWorld2_0")].concat(i),g=[D=G(H[0],null,"TranscendentTest")].concat(y),b=e.$r(g),(s=D.$$prototype).modifier=s.critical_value=s.expression=s.modifier_str=s.target=s.cmp_op=Q,D.$include(b("Translate")),_(D,"$initialize",function(c,T,d,m,n){var w=this;return w.critical_value=c,w.modifier=T,w.cmp_op=d,w.target=m,w.locale=n,w.modifier_str=b("Format").$modifier(w.modifier),w.expression=w.$node_expression()}),_(D,"$execute",function(c){var n,w,t,T=this,d=Q,m=Q,v=Q,a=Q,O=Q,re=Q;if(I(K(T.critical_value,3)))return T.$translate("SwordWorld2_0.transcendent_critical_too_small",f(["expression"],{expression:T.expression}));if(m=[d=c.$roll_barabara(2,6)],n=d["$=="]([1,1]),w=d["$=="]([6,6]),!I(n))for(;I(M(T.$sum_of_dice(m.$last()),T.critical_value));)m.$push(c.$roll_barabara(2,6));return t=T.$sum_of_dice(m),v=h(t,T.modifier),a=T.$result_status(v,m.$length(),n,w),O=f(["success","failure","super_success","critical","fumble"],{success:T.$translate("success"),failure:T.$translate("failure"),super_success:T.$translate("SwordWorld2_0.super_success"),critical:T.$translate("SwordWorld.critical"),fumble:T.$translate("SwordWorld.fumble")}).$freeze()["$[]"](a),re=["("+T.expression+")",""+T.$dice_str(m,t)+T.modifier_str,v,O].$compact(),N(b("Result").$new(),"tap",[],function(ie){var ce;return null==ie&&(ie=Q),ie["$text="](re.$join(" \uff1e ")),ie["$fumble="](a["$=="]("fumble")),ie["$critical="](a["$=="]("critical")),ie["$success="](["success","super_success","critical"]["$include?"](a)),ce=[["failure","fumble"]["$include?"](a)],N(ie,"failure=",ce),ce[ce.length-1]})}),D.$private(),_(D,"$node_expression",function(){var T,c=this;return T="2D6@"+c.critical_value+c.modifier_str,I(c.target)?""+T+c.cmp_op+c.target:T}),_(D,"$sum_of_dice",function(c){return c.$flatten().$sum()}),_(D,"$dice_str",function(c,T){return""+T+N(c,"map",[],function(n){return null==n&&(n=Q),"["+n.$join(",")+"]"}).$join()}),_(D,"$result_status",function(c,T,d,m){var n=this;return I(n.target)?I(d)?"fumble":I(m)?"critical":I(c.$send(n.cmp_op,n.target))?I(M(T,2))&&I(M(c,41))?"super_success":"success":"failure":"no_target"})},Opal.modules["bcdice/game_system/SwordWorld2_0"]=function(e){var u,k,g,b,s,o,c,P,x,r,Y=e.module,G=e.klass,_=e.const_set,I=e.send2,K=e.find_super,f=e.def,M=e.eqeqeq,h=e.truthy,N=e.hash2,L=e.rb_gt,E=e.rb_plus,Q=e.eqeq,V=e.rb_times,j=e.send,A=e.neqeq,z=e.top,$=[],B=e.nil,l=e.$$$;return z.$require("bcdice/arithmetic_evaluator"),z.$require("bcdice/game_system/SwordWorld"),z.$require("bcdice/game_system/sword_world/transcendent_test"),u=$,k=r=[Y($[0],"BCDice")].concat(u),P=[Y(r[0],"GameSystem")].concat(k),x=e.$r(P),g=P,s=[b=G(P[0],x("SwordWorld"),"SwordWorld2_0")].concat(g),o=e.$r(s),(c=b.$$prototype).locale=c.randomizer=B,_(s[0],"ID","SwordWorld2.0"),_(s[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.0"),_(s[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u30682.0"),_(s[0],"HELP_MESSAGE",'\u81ea\u52d5\u7684\u6210\u529f\u3001\u6210\u529f\u3001\u5931\u6557\u3001\u81ea\u52d5\u7684\u5931\u6557\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx)\n\u3000"K\u30ad\u30fc\u30ca\u30f3\u30d0\u30fc+\u30dc\u30fc\u30ca\u30b9"\u306e\u5f62\u3067\u8a18\u5165\u3057\u307e\u3059\u3002\n\u3000\u30dc\u30fc\u30ca\u30b9\u306e\u90e8\u5206\u306b\u300cK20+K30\u300d\u306e\u3088\u3046\u306b\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u53d6\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002\n\u3000\u307e\u305f\u3001\u30dc\u30fc\u30ca\u30b9\u306f\u8907\u6570\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3082\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3068\u540c\u69d8\u306b\u3001\u4ed6\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u96a0\u308c\u3066\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2\n\n\u30fb\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306e\u8a2d\u5b9a\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306f"[\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024]"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3000\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502410\u3068\u3057\u307e\u3059\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u51e6\u7406\u304c\u5fc5\u8981\u306a\u3044\u3068\u304d\u306f13\u306a\u3069\u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002(\u9632\u5fa1\u6642\u306a\u3069\u306e\u5bfe\u5fdc)\n\u3000\u307e\u305f\u30bf\u30a4\u30d7\u306e\u8efd\u6e1b\u5316\u306e\u305f\u3081\u306b\u672b\u5c3e\u306b\u300c@\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u300d\u3067\u3082\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3000\u4f8b\uff09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u534a\u6e1b (HKx, KxH+N)\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u5148\u982d\u307e\u305f\u306f\u672b\u5c3e\u306b"H"\u3092\u3064\u3051\u308b\u3068\u3001\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3092\u632f\u3063\u3066\u6700\u7d42\u7d50\u679c\u3092\u534a\u6e1b\u3055\u305b\u307e\u3059\u3002\n\u3000\u672b\u5c3e\u306b\u3064\u3051\u305f\u5834\u5408\u3001\u76f4\u5f8c\u306b\u4fee\u6b63\u3092\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u3001\u534a\u6e1b\u5f8c\u306e\u52a0\u6e1b\u7b97\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u3053\u306e\u969b\u3001\u8907\u6570\u306e\u9805\u306b\u3088\u308b\u4fee\u6b63\u306b\u306f\u30ab\u30c3\u30b3\u3067\u56f2\u3046\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\uff08\u30ab\u30c3\u30b3\u304c\u306a\u3044\u3068\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u307e\u3059\uff09\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u3057\u3068\u6271\u308f\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H(1+1)\n\n\u30fb\u30c0\u30a4\u30b9\u76ee\u306e\u4fee\u6b63\uff08\u904b\u547d\u5909\u8ee2\u3084\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30ec\u30a4\u7528\uff09\n\u3000\u672b\u5c3e\u306b\u300c$\u4fee\u6b63\u5024\u300d\u3067\u30c0\u30a4\u30b9\u76ee\u306b\u4fee\u6b63\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\u3000$\uff0b\uff11\u3068\u4fee\u6b63\u8868\u8a18\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u306b\uff0b\u4fee\u6b63\u3001\uff04\uff19\u306e\u3088\u3046\u306b\u56fa\u5b9a\u5024\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u3092\u305d\u306e\u51fa\u76ee\u306b\u5dee\u3057\u66ff\u3048\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3057\u305f\u5834\u5408\u3067\u3082\u56fa\u5b9a\u5024\u3084\u4fee\u6b63\u5024\u306e\u9069\u7528\u306f\u6700\u521d\u306e\u4e00\u56de\u3060\u3051\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9\n\n\u30fb\u9996\u5207\u308a\u5200\u7528\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u4e0a\u6607 r10\n\u3000\u4f8b\uff09K20r10\u3000K30+24@8R10\u3000K40+24@8$12r10\n\n\u30fb\u30b0\u30ec\u30a4\u30c6\u30b9\u30c8\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u306f\u672b\u5c3e\u306b gf\n\u3000\u4f8b\uff09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r10gf\n\n\u30fb\u5a01\u529b\u8868\u30921d+sf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u3082\u7d99\u7d9a sf4\n\u3000\u4f8b\uff09k10sf4\u3000k0+5SF4@13\u3000k70+26sf3@9\n\n\u30fb\u5a01\u529b\u8868\u30921d+tf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u306f2d\u3067\u53c2\u7167 tf3\n\u3000\u4f8b\uff09k10tf3\u3000k0+5TF4@13\u3000k70+26tf3@9\n\n\u30fb\u8d85\u8d8a\u5224\u5b9a\u7528\u306b2d6\u30ed\u30fc\u30eb\u306b 2D6@10 \u66f8\u5f0f\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u4ed8\u4e0e\u304c\u53ef\u80fd\u306b\u3002\n\u3000\u4f8b\uff092D6@10\u30002D6@10+11>=30\n\n\u30fb\u6210\u9577\u3000(Gr)\n\u3000\u672b\u5c3e\u306b\u6570\u5b57\u3092\u4ed8\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u56de\u306e\u6210\u9577\u3092\u307e\u3068\u3081\u3066\u884c\u3048\u307e\u3059\u3002\n\u3000\u4f8b\uff09Gr3\n\n\u30fb\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3000(FT)\n\u3000\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30fb\u7d61\u307f\u52b9\u679c\u8868\u3000(TT)\n\u3000\u7d61\u307f\u52b9\u679c\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n'),b.$register_prefix("H?K","Gr","2D6?@\\d+","FT","TT"),f(b,"$initialize",function T(d){var n=this;return T.$$p=null,I(n,K(n,"initialize",T,!1,!0),"initialize",[d],null),n.rating_table=2}),f(b,"$eval_game_system_specific_command",function T(d){var w,n=this,v=B;return T.$$p=null,M(/^Gr(\d+)?/i,w=d)?h(d["$=~"](/^Gr(\d+)/i))?n.$growth(o("Regexp").$last_match(1).$to_i()):n.$growth():M(/^2D6?@\d+/i,w)?(v=l(o("Command"),"Parser").$new(/2D6?/i,N(["round_type"],{round_type:l(l(o("BCDice"),"RoundType"),"CEIL")})).$enable_critical().$restrict_cmp_op_to(B,">=",">").$parse(d),h(v)?o("TranscendentTest").$new(v.$critical(),v.$modify_number(),v.$cmp_op(),v.$target_number(),n.locale).$execute(n.randomizer):B):M("FT",w)?n.$get_fumble_table():M("TT",w)?n.$get_tangle_table():I(n,K(n,"eval_game_system_specific_command",T,!1,!0),"eval_game_system_specific_command",[d],null)}),f(b,"$rating_parser",function(){return o("RatingParser").$new(N(["version"],{version:"v2_0"}))}),f(b,"$rollDice",function T(d,m){var w=this,t=B;return T.$$p=null,h(L(d.$semi_fixed_val(),0))?(t=w.randomizer.$roll_once(6),[E(t,d.$semi_fixed_val()),t+","+d.$semi_fixed_val()]):Q(m,0)&&h(L(d.$tmp_fixed_val(),0))?(t=w.randomizer.$roll_once(6),[E(t,d.$tmp_fixed_val()),t+","+d.$tmp_fixed_val()]):h(d.$greatest_fortune())?(t=w.randomizer.$roll_once(6),[V(t,2),t+","+t]):I(w,K(w,"rollDice",T,!1,!0),"rollDice",[d,m],null)}),f(b,"$growth",function(d){return null==d&&(d=1),j(e.Range.$new(1,d,!1),"map",[],function n(){return(null==n.$$s?this:n.$$s).$growth_step()},{$$s:this}).$join(" | ")},-1),f(b,"$growth_step",function(){var d=this,m=B,n=B,w=B;return n=(m=l(o("DiceTable"),"Table").$from_i18n("SwordWorld2_0.GrowthTable",d.locale)).$roll(d.randomizer),w=m.$roll(d.randomizer),A(n.$value(),w.$value())?"["+n.$value()+","+w.$value()+"]->("+n.$body()+" or "+w.$body()+")":"["+n.$value()+","+w.$value()+"]->("+n.$body()+")"}),f(b,"$get_fumble_table",function(){return l(o("DiceTable"),"Table").$from_i18n("SwordWorld2_0.FumbleTable",this.locale).$roll(this.randomizer)}),f(b,"$get_tangle_table",function(){return l(o("DiceTable"),"Table").$from_i18n("SwordWorld2_0.TangleTable",this.locale).$roll(this.randomizer)})},Opal.modules["bcdice/game_system/SwordWorld2_5"]=function(e){var B,C,x,y,D,g,b,i,k,p,Y=e.module,G=e.klass,_=e.const_set,I=e.eqeqeq,K=e.send,f=e.hash2,M=e.truthy,h=e.send2,N=e.find_super,L=e.def,E=e.range,Q=e.rb_plus,j=[],A=e.nil,z=e.$$$;return e.top.$require("bcdice/game_system/SwordWorld2_0"),B=j,C=p=[Y(j[0],"BCDice")].concat(B),i=[Y(p[0],"GameSystem")].concat(C),k=e.$r(i),x=i,D=[y=G(i[0],k("SwordWorld2_0"),"SwordWorld2_5")].concat(x),g=e.$r(D),(b=y.$$prototype).randomizer=b.locale=A,_(D[0],"ID","SwordWorld2.5"),_(D[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.5"),_(D[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u30682.5"),_(D[0],"HELP_MESSAGE",'\u81ea\u52d5\u7684\u6210\u529f\u3001\u6210\u529f\u3001\u5931\u6557\u3001\u81ea\u52d5\u7684\u5931\u6557\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx)\n\u3000"K\u30ad\u30fc\u30ca\u30f3\u30d0\u30fc+\u30dc\u30fc\u30ca\u30b9"\u306e\u5f62\u3067\u8a18\u5165\u3057\u307e\u3059\u3002\n\u3000\u30dc\u30fc\u30ca\u30b9\u306e\u90e8\u5206\u306b\u300cK20+K30\u300d\u306e\u3088\u3046\u306b\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u53d6\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002\n\u3000\u307e\u305f\u3001\u30dc\u30fc\u30ca\u30b9\u306f\u8907\u6570\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3082\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3068\u540c\u69d8\u306b\u3001\u4ed6\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u96a0\u308c\u3066\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2\n\n\u30fb\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306e\u8a2d\u5b9a\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306f"[\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024]"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3000\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502410\u3068\u3057\u307e\u3059\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u51e6\u7406\u304c\u5fc5\u8981\u306a\u3044\u3068\u304d\u306f13\u306a\u3069\u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002(\u9632\u5fa1\u6642\u306a\u3069\u306e\u5bfe\u5fdc)\n\u3000\u307e\u305f\u30bf\u30a4\u30d7\u306e\u8efd\u6e1b\u5316\u306e\u305f\u3081\u306b\u672b\u5c3e\u306b\u300c@\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u300d\u3067\u3082\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3000\u4f8b\uff09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u534a\u6e1b (HKx, KxH+N)\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u5148\u982d\u307e\u305f\u306f\u672b\u5c3e\u306b"H"\u3092\u3064\u3051\u308b\u3068\u3001\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3092\u632f\u3063\u3066\u6700\u7d42\u7d50\u679c\u3092\u534a\u6e1b\u3055\u305b\u307e\u3059\u3002\n\u3000\u672b\u5c3e\u306b\u3064\u3051\u305f\u5834\u5408\u3001\u76f4\u5f8c\u306b\u4fee\u6b63\u3092\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u3001\u534a\u6e1b\u5f8c\u306e\u52a0\u6e1b\u7b97\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u3053\u306e\u969b\u3001\u8907\u6570\u306e\u9805\u306b\u3088\u308b\u4fee\u6b63\u306b\u306f\u30ab\u30c3\u30b3\u3067\u56f2\u3046\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\uff08\u30ab\u30c3\u30b3\u304c\u306a\u3044\u3068\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u307e\u3059\uff09\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u3057\u3068\u6271\u308f\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H+(1+1)\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e1.5\u500d (OHKx, KxOH+N)\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u5148\u982d\u307e\u305f\u306f\u672b\u5c3e\u306b"OH"\u3092\u3064\u3051\u308b\u3068\u3001\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3092\u632f\u3063\u3066\u6700\u7d42\u7d50\u679c\u30921.5\u500d\u3057\u307e\u3059\u3002\n\u3000\u672b\u5c3e\u306b\u3064\u3051\u305f\u5834\u5408\u3001\u76f4\u5f8c\u306b\u4fee\u6b63\u3092\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u30011.5\u500d\u5f8c\u306e\u52a0\u6e1b\u7b97\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u3053\u306e\u969b\u3001\u8907\u6570\u306e\u9805\u306b\u3088\u308b\u4fee\u6b63\u306b\u306f\u30ab\u30c3\u30b3\u3067\u56f2\u3046\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\uff08\u30ab\u30c3\u30b3\u304c\u306a\u3044\u3068\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u307e\u3059\uff09\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u3057\u3068\u6271\u308f\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09OHK20\u3000\u3000K20oh\u3000\u3000OHK10-5@9\u3000\u3000K20+8OH+2\u3000\u3000K20+8OH+(1+1)\n\n\u30fb\u30c0\u30a4\u30b9\u76ee\u306e\u4fee\u6b63\uff08\u904b\u547d\u5909\u8ee2\u3084\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30ec\u30a4\u7528\uff09\n\u3000\u672b\u5c3e\u306b\u300c$\u4fee\u6b63\u5024\u300d\u3067\u30c0\u30a4\u30b9\u76ee\u306b\u4fee\u6b63\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\u3000$\uff0b\uff11\u3068\u4fee\u6b63\u8868\u8a18\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u306b\uff0b\u4fee\u6b63\u3001\uff04\uff19\u306e\u3088\u3046\u306b\u56fa\u5b9a\u5024\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u3092\u305d\u306e\u51fa\u76ee\u306b\u5dee\u3057\u66ff\u3048\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3057\u305f\u5834\u5408\u3067\u3082\u56fa\u5b9a\u5024\u3084\u4fee\u6b63\u5024\u306e\u9069\u7528\u306f\u6700\u521d\u306e\u4e00\u56de\u3060\u3051\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9\n\n\u30fb\u30c0\u30a4\u30b9\u76ee\u306e\u4fee\u6b63\uff08\u5fc5\u6bba\u653b\u6483\u7528\uff09\n\u3000\u300c\uff03\u4fee\u6b63\u5024\u300d\u3067\u30c0\u30a4\u30b9\u76ee\u306b\u4fee\u6b63\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3057\u305f\u5834\u5408\u3067\u3082\u4fee\u6b63\u5024\u306e\u9069\u7528\u306f\u7d99\u7d9a\u3055\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09K20#1\u3000\u3000\u3000k10-5@9#2\n\n\u30fb\u9996\u5207\u308a\u5200\u7528\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u4e0a\u6607 r5\n\u3000\u4f8b\uff09K20r5\u3000K30+24@8R5\u3000K40+24@8$12r5\n\n\u30fb\u30b0\u30ec\u30a4\u30c6\u30b9\u30c8\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u306f\u672b\u5c3e\u306b gf\n\u3000\u4f8b\uff09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r5gf\n\n\u30fb\u5a01\u529b\u8868\u30921d+sf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u3082\u7d99\u7d9a sf4\n\u3000\u4f8b\uff09k10sf4\u3000k0+5sf4@13\u3000k70+26sf3@9\n\n\u30fb\u5a01\u529b\u8868\u30921d+tf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u306f2d\u3067\u53c2\u7167 tf3\n\u3000\u4f8b\uff09k10tf3\u3000k0+5tf4@13\u3000k70+26tf3@9\n\n\u30fb\u8d85\u8d8a\u5224\u5b9a\u7528\u306b2d6\u30ed\u30fc\u30eb\u306b 2D6@10 \u66f8\u5f0f\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u4ed8\u4e0e\u304c\u53ef\u80fd\u306b\u3002\n\u3000\u4f8b\uff092D6@10\u30002D6@10+11>=30\n\n\u30fb\u6210\u9577\u3000(Gr)\n\u3000\u672b\u5c3e\u306b\u6570\u5b57\u3092\u4ed8\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u56de\u306e\u6210\u9577\u3092\u307e\u3068\u3081\u3066\u884c\u3048\u307e\u3059\u3002\n\u3000\u4f8b\uff09Gr3\n\n\u30fb\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3000(FT)\n\u3000\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30fb\u7d61\u307f\u52b9\u679c\u8868\u3000(TT)\n\u3000\u7d61\u307f\u52b9\u679c\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30fb\u30c9\u30eb\u30a4\u30c9\u306e\u7269\u7406\u9b54\u6cd5\u7528\u8868\u3000(Dru[2-6\u306e\u5024,7-9\u306e\u5024,10-12\u306e\u5024])\n\u3000\u4f8b\uff09Dru[0,3,6]+10-3\n\n\u30fb\u30a2\u30d3\u30b9\u30ab\u30fc\u30b9\u8868\u3000(ABT)\n\u3000\u30a2\u30d3\u30b9\u30ab\u30fc\u30b9\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n'),y.$register_prefix("H?K","OHK","Gr","2D6?@\\d+","FT","TT","Dru","ABT"),L(y,"$eval_game_system_specific_command",function s(o){var d,T=this,m=A,w=A;return s.$$p=null,I(/^dru\[(\d+),(\d+),(\d+)\]/i,d=o)?(m=K(g("Regexp").$last_match().$captures(),"map",[],"to_i".$to_proc()),w=z(g("Command"),"Parser").$new(/dru\[\d+,\d+,\d+\]/i,f(["round_type"],{round_type:z(z(g("BCDice"),"RoundType"),"CEIL")})).$parse(o),M(w)?T.$druid_dice(w,m):A):I("ABT",d)?T.$get_abyss_curse_table():h(T,N(T,"eval_game_system_specific_command",s,!1,!0),"eval_game_system_specific_command",[o],null)}),L(y,"$rating_parser",function(){return g("RatingParser").$new(f(["version"],{version:"v2_5"}))}),L(y,"$druid_dice",function(o,c){var m,n,w,t,v,d=A;return m=(d=this.randomizer.$roll_barabara(2,6)).$sum(),n=I(E(2,6,!1),w=m)?0:I(E(7,9,!1),w)?1:I(E(10,12,!1),w)?2:A,t=c["$[]"](n),v=Q(t,o.$modify_number()),["("+o.$command().$capitalize()+g("Format").$modifier(o.$modify_number())+")","2D["+d.$join(",")+"]="+m,""+t+g("Format").$modifier(o.$modify_number()),v].$join(" \uff1e ")}),L(y,"$get_abyss_curse_table",function(){var d,o=this,c=A,T=A;return c=z(g("DiceTable"),"D66GridTable").$from_i18n("SwordWorld2_5.AbyssCurseTable",o.locale).$roll(o.randomizer),T=I(14,d=c.$value())?z(g("DiceTable"),"D66ParityTable").$from_i18n("SwordWorld2_5.AbyssCurseCategoryTable",o.locale).$roll(o.randomizer).$to_s():I(25,d)?z(g("DiceTable"),"D66ParityTable").$from_i18n("SwordWorld2_5.AbyssCurseAttrTable",o.locale).$roll(o.randomizer).$to_s():A,[c.$to_s(),T].$compact().$join("\n")})},Opal.queue(function(e){var E,A,u,C,r,$,B,V,Y=e.module,G=e.klass,_=e.const_set,I=e.send2,K=e.find_super,f=e.def,h=[];return e.top.$require("bcdice/game_system/SwordWorld2_5"),E=h,A=V=[Y(h[0],"BCDice")].concat(E),$=[Y(V[0],"GameSystem")].concat(A),B=e.$r($),u=$,_((r=[C=G($[0],B("SwordWorld2_5"),"SwordWorld2_5_SimplifiedChinese")].concat(u))[0],"ID","SwordWorld2.5:SimplifiedChinese"),_(r[0],"NAME","\u5251\u4e16\u754c2.5"),_(r[0],"SORT_KEY","\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c2.5"),_(r[0],"HELP_MESSAGE","\u81ea\u52a8\u6210\u529f\u3001\u6210\u529f\u3001\u5931\u8d25\u3001\u81ea\u52a8\u5931\u8d25\u4f1a\u81ea\u52a8\u5224\u5b9a\u3002\n\n  \u30fb\u5a01\u529b\u8868\u3000(Kx)\n  \u3000\u6307\u4ee4\u4e3a\u201cK\u5a01\u529b\u503c+\u52a0\u503c\u201d\u7684\u683c\u5f0f\u3002\n  \u3000\u52a0\u503c\u7684\u90e8\u5206\u4e0d\u80fd\u662f\u50cf\u201cK20+K30\u201d\u8fd9\u6837\u7684\u5a01\u529b\u7684\u5199\u6cd5\u3002\n  \u3000\u53e6\u5916\uff0c\u52a0\u503c\u53ef\u4ee5\u6709\u591a\u4e2a\u3002\n  \u3000\u5a01\u529b\u8868\u548c\u9ab0\u70b9\u4e00\u6837\uff0c\u53ef\u4ee5\u5bf9\u5176\u4ed6\u73a9\u5bb6\u9690\u85cf\u3002\n  \u3000\u4f8b\uff09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2\n\n  \u30fb\u66b4\u51fb\u503c\u7684\u8bbe\u5b9a\n  \u3000\u66b4\u51fb\u503c\u901a\u8fc7\u201c[\u66b4\u51fb\u503c]\u201d\u6307\u5b9a\u3002\n  \u3000\u6ca1\u6709\u6307\u5b9a\u66b4\u51fb\u503c\u65f6\u9ed8\u8ba4\u4e3a10\u3002\n  \u3000\u5982\u679c\u4e0d\u9700\u8981\u53d1\u751f\u66b4\u51fb\uff0c\u8bf7\u8bbe\u5b9a\u4e3a13\u3002\uff08\u4f8b\u5982\u9632\u5fa1\u65f6\uff09\n  \u3000\u53e6\u5916\u4e5f\u53ef\u5199\u6210\u7ed3\u5c3e\u7684\u201c@\u66b4\u51fb\u503c\u201d\u7684\u5f62\u5f0f\u3002\n  \u3000\u4f8b\uff09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9\n\n  \u30fb\u5a01\u529b\u8868\u7684\u51cf\u534a (HKx, KxH+N)\n  \u3000\u5728\u5a01\u529b\u8868\u5f00\u5934\u6216\u672b\u5c3e\u52a0\u4e0a\u201cH\u201d\uff0c\u9ab0\u5a01\u529b\u8868\u7684\u6700\u7ec8\u7ed3\u679c\u5c31\u4f1a\u51cf\u534a\u3002\n  \u3000H\u5199\u5728\u5a01\u529b\u8868\u672b\u5c3e\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5728\u540e\u9762\u76f4\u63a5\u8ddf\u7740\u4fee\u6b63\uff0c\u4f1a\u5728\u51cf\u534a\u540e\u8fdb\u884c\u52a0\u51cf\u8fd0\u7b97\u3002\n  \u3000\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u591a\u4e2a\u4fee\u6b63\u9700\u8981\u7528\u62ec\u53f7\u62ec\u8d77\u6765\uff08\u5426\u5219\u4f1a\u89e3\u6790\u5931\u8d25\uff09\n  \u3000\u6ca1\u6709\u6307\u5b9a\u66b4\u51fb\u503c\u7684\u60c5\u51b5\u4e0b\uff0c\u5219\u89c6\u4e3a\u6ca1\u6709\u66b4\u51fb\u503c\u3002\n  \u3000\u4f8b\uff09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H+(1+1)\n\n  \u30fb\u9ab0\u5b50\u51fa\u76ee\u4fee\u6b63\uff08\u547d\u8fd0\u53d8\u8f6c\u6216\u91cd\u51fb\u5149\u8f89\u7528\uff09\n  \u3000\u5728\u6307\u4ee4\u672b\u5c3e\u6dfb\u52a0\u201c$\u4fee\u6b63\u503c\u201d\u6765\u6539\u53d8\u9ab0\u5b50\u51fa\u76ee\u3002\n  \u3000\u53ef\u4ee5\u4f7f\u7528$+1\u7684\u683c\u5f0f\u5728\u9ab0\u5b50\u51fa\u76ee\u4e0a+\u4fee\u6b63\uff0c\u6216\u4f7f\u7528$9\u7684\u683c\u5f0f\u628a\u9ab0\u5b50\u51fa\u76ee\u66ff\u6362\u4e3a\u56fa\u5b9a\u503c\u3002\n  \u3000\u66b4\u51fb\u65f6\u53ea\u6709\u7b2c\u4e00\u6b21\u51fa\u76ee\u5e94\u7528\u8fd9\u4e2a\u4fee\u6b63\u3002\n  \u3000\u4f8b\uff09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9\n\n  \u30fb\u9ab0\u5b50\u51fa\u76ee\u4fee\u6b63\uff08\u5fc5\u6740\u653b\u51fb\u7528\uff09\n  \u3000\u5199\u6210\u201c#\u4fee\u6b63\u503c\u201c\u7684\u683c\u5f0f\u6765\u589e\u52a0\u9ab0\u5b50\u51fa\u76ee\u3002\n  \u3000\u66b4\u51fb\u65f6\u540e\u7eed\u9ab0\u5b50\u4e5f\u4f1a\u7ee7\u7eed\u5e94\u7528\u4fee\u6b63\u503c\u3002\n  \u3000\u4f8b\uff09K20#1\u3000\u3000\u3000k10-5@9#2\n\n  \u30fb\u5a01\u529b\u4e0a\u5347\uff08\u65a9\u9996\u5200\u7528\uff09 r5\n  \u3000r\u540e\u8ddf\u4e0a\u5347\u503c\uff0c\u66b4\u51fb\u540e\u5a01\u529b\u4e0a\u5347r\u540e\u6240\u586b\u5199\u7684\u4e0a\u5347\u503c\u70b9\n  \u3000\u4f8b\uff09K20r5\u3000K30+24@8R5\u3000K40+24@8$12r5\n\n  \u30fb\u6781\u9650\u547d\u8fd0\u5728\u672b\u5c3e\u52a0\u4e0a gf\n  \u3000\u4f8b\uff09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r5gf\n\n  \u30fb\u5a01\u529b\u8868\u4f7f\u75281d+\u56fa\u5b9a\u503c\u5bf9\u5e94 \u66b4\u51fb\u540e\u4ecd\u7ee7\u7eed sf4\n  \u3000\u4f8b\uff09k10sf4\u3000k0+5sf4@13\u3000k70+26sf3@9\n\n  \u30fb\u5a01\u529b\u8868\u4f7f\u75281d+\u56fa\u5b9a\u503c\u5bf9\u5e94 \u66b4\u51fb\u540e\u53d8\u56de\u4f7f\u75282d\u5bf9\u5e94 tf3\n  \u3000\u4f8b\uff09k10tf3\u3000k0+5tf4@13\u3000k70+26tf3@9\n\n  \u30fb\u8d85\u8d8a\u5224\u5b9a\u75282d6\u53ef\u5199\u6210 2d6@10 \u7684\u683c\u5f0f\u52a0\u4e0a\u66b4\u51fb\u503c\u3002\n  \u3000\u4f8b\uff092D6@10\u30002D6@10+11>=30\n\n  \u30fb\u6210\u957f\u3000(Gr)\n  \u3000\u5728Gr\u540e\u9762\u52a0\u4e0a\u6570\u5b57\u53ef\u4ee5\u8fdb\u884c\u591a\u6b21\u6210\u957f\u3002\n  \u3000\u4f8b\uff09Gr3\n\n  \u30fb\u9632\u5fa1\u5927\u5931\u8d25\u8868\u3000(FT)\n  \u3000\u62bd\u53d6\u9632\u5fa1\u5927\u5931\u8d25\u8868\u3002\n\n  \u30fb\u7f20\u7ed5\u6548\u679c\u8868\u3000(TT)\n  \u3000\u62bd\u53d6\u7f20\u7ed5\u6548\u679c\u8868\u3002\n\n  \u30fb\u5fb7\u9c81\u4f0a\u7528\u7269\u7406\u9b54\u6cd5\u8868 (Dru[2~6\u7684\u7ed3\u679c\uff0c7~9\u7684\u7ed3\u679c\uff0c10~12\u7684\u7ed3\u679c])\n  \u3000\u4f8b\uff09Dru[0,3,6]+10-3\n\n  \u30fb\u5948\u843d\u8bc5\u5492\u8868\u3000(ABT)\n  \u3000\u62bd\u53d6\u5948\u843d\u8bc5\u5492\u8868\u3002\n"),C.$register_prefix_from_super_class(),f(C,"$initialize",function i(k){var P=this;return i.$$p=null,I(P,K(P,"initialize",i,!1,!0),"initialize",[k],null),P.locale="zh_hans"})})}}]);