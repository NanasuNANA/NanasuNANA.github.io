(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[5825],{244:(p,O,q)=>{q(5151),Opal.queue(function(n){var Y,J,X,o,m,b,S,T,U,H,z=n.module,L=n.klass,y=n.const_set,B=n.send2,N=n.find_super,h=n.def,l=n.truthy,R=n.eqeq,D=n.rb_gt,j=n.rb_ge,g=n.rb_plus,A=n.thrower,x=n.rb_times,C=n.rb_lt,G=n.rb_minus,M=n.neqeq,I=n.hash2,E=[],e=n.nil,K=n.$$$;return Y=E,J=H=[z(E[0],"BCDice")].concat(Y),T=[z(H[0],"GameSystem")].concat(J),U=n.$r(T),X=T,m=[o=L(T[0],U("Base"),"RogueLikeHalf")].concat(X),b=n.$r(m),(S=o.$$prototype).round_type=S.randomizer=e,y(m[0],"ID","RogueLikeHalf"),y(m[0],"NAME","\u30ed\u30fc\u30b0\u30e9\u30a4\u30af\u30cf\u30fc\u30d5"),y(m[0],"SORT_KEY","\u308d\u304a\u304f\u3089\u3044\u304f\u306f\u3042\u3075"),y(m[0],"HELP_MESSAGE","\u25a0\u5224\u5b9a\u3000RH+x>=t        x:\u6280\u91cf\u70b9 t:\u9054\u6210\u5024(\u5a01\u529b)\n\n\u4f8b)RH+1>=5: \u30c0\u30a4\u30b9\u30921\u500b\u632f\u3063\u3066\u3001\u6280\u91cf\u70b91,\u9054\u6210\u50245\u306e\u7d50\u679c\u3092\u8868\u793a(\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30fb\u30d5\u30a1\u30f3\u30d6\u30eb\u3082\u8868\u793a)\n\n\u25a0D33\u3000D33+x        x:\u4fee\u6b63\u5024\n\n\u4f8b)D33: 3\u9762\u30c0\u30a4\u30b9\u30922\u500b\u632f\u3063\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\u3002\n\n\u25a0\u5b9d\u7269\u8868\u3000NTT+x     x:\u4fee\u6b63\u5024\n"),h(o,"$initialize",function c(r){var t=this;return c.$$p=null,B(t,N(t,"initialize",c,!1,!0),"initialize",[r],null),t.sort_barabara_dice=!0}),h(o,"$eval_game_system_specific_command",function(r){var t,$,s=this;return l(t=l($=s.$resolute_action(r))?$:s.$resolute_d33(r))?t:s.$roll_table_command(r)}),o.$private(),h(o,"$with_symbol",function(r){return R(r,0)?"+0":l(D(r,0))?"+"+r:r.$to_s()}),h(o,"$get_result_of_action",function(r,s,t){return R(s,6)?b("Result").$critical("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb"):R(s,1)?b("Result").$fumble("\u30d5\u30a1\u30f3\u30d6\u30eb"):l(j(r,t))?b("Result").$success("\u6210\u529f"):b("Result").$failure("\u5931\u6557")}),h(o,"$resolute_action",function(r){try{A("eval_return");var t=this,$=e,_=e,i=e,u=e,f=e,a=e,v=e,k=e;return $=/RH([+-]\d)*(>=(\d+))?/.$match(r),l($)?(_=l($["$[]"](1))?b("Arithmetic").$eval($["$[]"](1),t.round_type):0,i=$["$[]"](3).$to_i(),R(i,0)&&(i=4),f=(u=t.randomizer.$roll_once(6)).$to_s(),a=g(u,_),v=t.$get_result_of_action(a,u,i),k=["(RH"+t.$with_symbol(_)+">="+i+")","["+f+"]"+t.$with_symbol(_),a,v.$text()].$compact(),v["$text="](k.$join(" \uff1e ")),v):e}catch(d){if(d===n.t_eval_return)return d.$v;throw d}}),h(o,"$resolute_d33",function(r){try{A("eval_return");var t=this,$=e,_=e,i=e,u=e,f=e,a=e,v=e,w=e;return $=/D33([+-]\d+)*/.$match(r),l($)?(_=l($["$[]"](1))?b("Arithmetic").$eval($["$[]"](1),t.round_type):0,u=(i=t.randomizer.$roll_barabara(2,3)).$join(""),f=g(g(x(i["$[]"](0),3),i["$[]"](1)),_),l(D(f,12))&&(f=12),l(C(f,4))&&(f=4),a=f.$divmod(3),R(a["$[]"](1),0)&&(a["$[]="](0,G(a["$[]"](0),1)),a["$[]="](1,3)),v=g(x(a["$[]"](0),10),a["$[]"](1)),w=["("+r+")",u].$compact(),M(_,0)&&(w=["("+r+")",""+u+t.$with_symbol(_),v].$compact()),b("Result").$new(w.$join(" \uff1e "))):e}catch(k){if(k===n.t_eval_return)return k.$v;throw k}}),h(o,"$roll_table_command",function(r){var t,$=e,_=e,i=e;return r=r.$upcase(),t=[],$=/([A-Z]+)(([+]|-)(\d+))?/.$match(r),l($)?(r=$["$[]"](1),_=$["$[]"](3),i=$["$[]"](4).$to_i(),this.$get_another_table_result(r,_,i)):t}),h(o,"$get_another_table_result",function(r,s,t){var i,_=e,u=e,f=e,a=e;return _="",i=r,u=b("TABLES")["$[]"](i),l(u["$nil?"]())||(f=this.$get_table_index(s,t,1,6),_=(a=u.$choice(f)).$table_name()+":"+a.$value()+":"+a.$body()),_}),h(o,"$get_table_index",function(r,s,t,$){var i=e,u=e;switch(i=0,r.valueOf()){case"+":i=s;break;case"-":i=x(s,-1)}return u=this.randomizer.$roll_sum(t,$),[u=[u=g(u,i),x(t,1)].$max(),g(x(t,$),1)].$min()}),y(m[0],"TABLES",I(["NTT"],{NTT:K(b("DiceTable"),"Table").$new("\u5b9d\u7269\u8868","1D6",["\u91d1\u8ca8\uff11\u679a","\uff11\uff44\uff16\u679a\u306e\u91d1\u8ca8","\uff12\uff44\uff16\u679a\u306e\u91d1\u8ca8\uff08\u4e0b\u9650\u306f\u91d1\u8ca8\uff15\u679a\uff09","\uff11\u500b\u306e\u30a2\u30af\u30bb\u30b5\u30ea\u30fc\uff08\uff11\uff44\uff16\xd7\uff11\uff44\uff16\u679a\u306e\u91d1\u8ca8\u3068\u540c\u7b49\u306e\u4fa1\u5024\uff09","\uff11\u500b\u306e\u5b9d\u77f3\u30fb\u5c0f\uff08\uff11\uff44\uff16\xd7\uff15\u679a\u306e\u91d1\u8ca8\u3068\u540c\u7b49\u306e\u4fa1\u5024\u3002\u4e0b\u9650\u306f\u91d1\u8ca8\uff11\uff15\u679a\u306e\u4fa1\u5024\uff09","\uff11\u500b\u306e\u5b9d\u77f3\u30fb\u5927\uff08\uff12\uff44\uff16\xd7\uff15\u679a\u306e\u91d1\u8ca8\u3068\u540c\u7b49\u306e\u4fa1\u5024\u3002\u4e0b\u9650\u306f\u91d1\u8ca8\uff13\uff10\u679a\u306e\u4fa1\u5024\uff09","\u3010\u9b54\u6cd5\u306e\u5b9d\u7269\u8868\u3011\u3067\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3092\u884c\u3046\u3053\u3068\u3002"])}).$freeze()),o.$register_prefix("RH","D33",b("TABLES").$keys())})}}]);