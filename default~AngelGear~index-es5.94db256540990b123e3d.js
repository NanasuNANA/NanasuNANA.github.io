(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{IznK:function(t,r,e){e("pQ1d"),Opal.modules["bcdice/dice_table/table"]=function(t){var r=[],e=t.nil,n=t.$$,i=t.module,c=t.klass,a=t.hash2,s=t.truthy;return function(r,$){var o=[i(r,"BCDice")].concat($);!function(r,$){var o=[i(r,"DiceTable")].concat($);!function(r,i,$){var o,u,_,h,d=c(r,null,"Table"),l=[d].concat($);d.$$prototype.times=d.$$prototype.sides=d.$$prototype.name=d.$$prototype.items=e,t.defs(d,"$from_i18n",o=function(t,r){var i=e;return i=n(l,"I18n").$t(t,a(["locale"],{locale:r})),this.$new(i["$[]"]("name"),i["$[]"]("type"),i["$[]"]("items"))},o.$$arity=2),t.def(d,"$initialize",u=function(t,r,i){var c=e;return this.name=t,this.items=i.$freeze(),c=/(\d+)D(\d+)/i.$match(r),s(c)||this.$raise(n(l,"ArgumentError"),"Unexpected table type: "+r),this.times=c["$[]"](1).$to_i(),this.sides=c["$[]"](2).$to_i()},u.$$arity=3),t.def(d,"$roll",_=function(t){var r;return r=t.$roll_sum(this.times,this.sides),this.$choice(r)},_.$$arity=1),t.def(d,"$choice",h=function(t){var r,e,i;return e=this.times,i="number"==typeof(r=t)&&"number"==typeof e?r-e:r["$-"](e),n(l,"RollResult").$new(this.name,t,this.items["$[]"](i))},h.$$arity=1)}(o[0],0,o)}(o[0],o)}(r[0],r)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(t){function r(t,r){return"number"==typeof t&&"number"==typeof r?t-r:t["$-"](r)}var e=[],n=t.nil,i=t.$$,c=t.module,a=t.klass,s=t.hash2;return function(e,$){var o=[c(e,"BCDice")].concat($);!function(e,$){var o=[c(e,"DiceTable")].concat($);!function(e,c,$){var o,u,_,h=a(e,null,"D66GridTable"),d=[h].concat($);h.$$prototype.name=h.$$prototype.items=n,t.defs(h,"$from_i18n",o=function(t,r){var e=n;return e=i(d,"I18n").$t(t,s(["locale","raise"],{locale:r,raise:!0})),this.$new(e["$[]"]("name"),e["$[]"]("items"))},o.$$arity=2),t.def(h,"$initialize",u=function(t,r){return this.name=t,this.items=r.$freeze()},u.$$arity=2),t.def(h,"$roll",_=function(t){var e,n,c,a,s,$;return e=t.$roll_once(6),n=t.$roll_once(6),c=function(t,r){return"number"==typeof t&&"number"==typeof r?t+r:t["$+"](r)}("number"==typeof($=e)?10*$:$["$*"](10),n),a=r(e,1),s=r(n,1),i(d,"RollResult").$new(this.name,c,this.items["$[]"](a)["$[]"](s))},_.$$arity=1)}(o[0],0,o)}(o[0],o)}(e[0],e)},Opal.modules["bcdice/arithmetic/node"]=function(t){function r(t,r){return"number"==typeof t&&"number"==typeof r?t/r:t["$/"](r)}var e=[],n=t.nil,i=t.$$$,c=t.$$,a=t.module,s=t.klass,$=t.send2;return function(e,o){var u=[a(e,"BCDice")].concat(o);!function(e,o){var u=[a(e,"Arithmetic")].concat(o);!function(e,o){var u=[a(e,"Node")].concat(o);!function(r,e,i){var c,a,$,o,u,_=s(r,null,"BinaryOp");[_].concat(i),_.$$prototype.lhs=_.$$prototype.rhs=_.$$prototype.op=n,t.def(_,"$initialize",c=function(t,r,e){return this.lhs=t,this.op=r,this.rhs=e},c.$$arity=3),t.def(_,"$eval",a=function(t){var r,e=n;return e=this.lhs.$eval(t),r=this.rhs.$eval(t),e.$send(this.op,r)},a.$$arity=1),t.def(_,"$output",$=function(){return""+this.lhs.$output()+this.op+this.rhs.$output()},$.$$arity=0),t.def(_,"$s_exp",o=function(){return"("+this.$op_for_s_exp()+" "+this.lhs.$s_exp()+" "+this.rhs.$s_exp()+")"},o.$$arity=0),t.def(_,"$op_for_s_exp",u=function(){return this.op},u.$$arity=0)}(u[0],0,u),function(r,e,a){var o,u,_,h,d,l,f=s(r,e,"DivideBase"),p=[f].concat(a);f.$$prototype.lhs=f.$$prototype.rhs=f.$$prototype.op=n,t.def(f,"$initialize",o=function(r,e){return o.$$p&&(o.$$p=null),$(this,t.find_super_dispatcher(this,"initialize",o,!1,!0),"initialize",[r,"/",e],null)},o.$$arity=2),t.def(f,"$eval",u=function(t){var r,e=n;return r=this.lhs.$eval(t),(e=this.rhs.$eval(t))["$=="](0)&&this.$raise(c(p,"ZeroDivisionError")),this.$divide_and_round(r,e,t)},u.$$arity=1),t.def(f,"$output",_=function(){var r=_.$$p,e=this,i=n,c=n,a=n;for(r&&(_.$$p=null),c=0,a=arguments.length,i=new Array(a);c<a;c++)i[c]=arguments[c];return""+$(e,t.find_super_dispatcher(e,"output",_,!1,!0),"output",i,r)+e.$rounding_method()},_.$$arity=0),f.$private(),t.def(f,"$rounding_method",h=function(){return i(this.$class(),"ROUNDING_METHOD")},h.$$arity=0),t.def(f,"$op_for_s_exp",d=function(){return""+this.op+this.$rounding_method()},d.$$arity=0),t.def(f,"$divide_and_round",l=function(t,r,e){return this.$raise(c(p,"NotImplementedError"))},l.$$arity=3)}(u[0],c(u,"BinaryOp"),u),function(e,n,a){var $,o=s(e,n,"DivideWithGameSystemDefault"),u=[o].concat(a);t.const_set(u[0],"ROUNDING_METHOD",""),o.$private(),t.def(o,"$divide_and_round",$=function(t,e,n){var a;return a=n,i(c(u,"RoundType"),"CEIL")["$==="](a)?r(t.$to_f(),e).$ceil():i(c(u,"RoundType"),"ROUND")["$==="](a)?r(t.$to_f(),e).$round():r(t,e).$to_i()},$.$$arity=3)}(u[0],c(u,"DivideBase"),u),function(e,n,i){var c,a=s(e,n,"DivideWithCeil"),$=[a].concat(i);t.const_set($[0],"ROUNDING_METHOD","C"),a.$private(),t.def(a,"$divide_and_round",c=function(t,e,n){return r(t.$to_f(),e).$ceil()},c.$$arity=3)}(u[0],c(u,"DivideBase"),u),function(e,n,i){var c,a=s(e,n,"DivideWithRound"),$=[a].concat(i);t.const_set($[0],"ROUNDING_METHOD","R"),a.$private(),t.def(a,"$divide_and_round",c=function(t,e,n){return r(t.$to_f(),e).$round()},c.$$arity=3)}(u[0],c(u,"DivideBase"),u),function(e,n,i){var c,a=s(e,n,"DivideWithFloor"),$=[a].concat(i);t.const_set($[0],"ROUNDING_METHOD","F"),a.$private(),t.def(a,"$divide_and_round",c=function(t,e,n){return r(t,e).$to_i()},c.$$arity=3)}(u[0],c(u,"DivideBase"),u),function(r,e,i){var c,a,$,o,u=s(r,null,"Negative");[u].concat(i),u.$$prototype.body=n,t.def(u,"$initialize",c=function(t){return this.body=t},c.$$arity=1),t.def(u,"$eval",a=function(t){return this.body.$eval(t)["$-@"]()},a.$$arity=1),t.def(u,"$output",$=function(){return"-"+this.body.$output()},$.$$arity=0),t.def(u,"$s_exp",o=function(){return"(- "+this.body.$s_exp()+")"},o.$$arity=0)}(u[0],0,u),function(r,e,i){var c,a,$,o,u=s(r,null,"Parenthesis");[u].concat(i),u.$$prototype.expr=n,t.def(u,"$initialize",c=function(t){return this.expr=t},c.$$arity=1),t.def(u,"$eval",a=function(t){return this.expr.$eval(t)},a.$$arity=1),t.def(u,"$output",$=function(){return"("+this.expr.$output()+")"},$.$$arity=0),t.def(u,"$s_exp",o=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},o.$$arity=0)}(u[0],0,u),function(r,e,i){var c,a,$,o=s(r,null,"Number");[o].concat(i),o.$$prototype.value=n,t.def(o,"$initialize",c=function(t){return this.value=t},c.$$arity=1),t.def(o,"$eval",a=function(t){return this.value},a.$$arity=1),t.def(o,"$output",$=function(){return this.value.$to_s()},$.$$arity=0),t.alias(o,"s_exp","output")}(u[0],0,u)}(u[0],u)}(u[0],u)}(e[0],e)},Opal.modules["racc/parser"]=function(t){function r(t,r){return"number"==typeof t&&"number"==typeof r?t<r:t["$<"](r)}function e(t,r){return"number"==typeof t&&"number"==typeof r?t-r:t["$-"](r)}function n(t,r){return"number"==typeof t&&"number"==typeof r?t+r:t["$+"](r)}function i(t,r){return"number"==typeof t&&"number"==typeof r?t>=r:t["$>="](r)}function c(t,r){return"number"==typeof t&&"number"==typeof r?t>r:t["$>"](r)}var a=[],s=t.nil,$=t.$$$,o=t.$$,u=t.module,_=t.klass,h=t.truthy,d=t.gvars,l=t.send;return function(t,r){var e=[u(t,"Racc")].concat(r);!function(t,r,e){[_(t,r,"ParseError")].concat(e)}(e[0],o(e,"StandardError"),e)}(a[0],a),h($("::","ParseError","skip_raise")?"constant":s)||t.const_set(a[0],"ParseError",$(o(a,"Racc"),"ParseError")),function(a,f){var p=[u(a,"Racc")].concat(f);h(o(p,"Racc_No_Extensions","skip_raise")?"constant":s)||t.const_set(p[0],"Racc_No_Extensions",!1),function(a,u,f){var p,y,m,v,g,b,R,k,x,w,E,N,D,A,S,O,B,T,z,P,C,I,L,M,G=_(a,null,"Parser"),U=[G].concat(f);G.$$prototype.yydebug=G.$$prototype.racc_debug_out=G.$$prototype.racc_error_status=G.$$prototype.racc_t=G.$$prototype.racc_vstack=G.$$prototype.racc_val=G.$$prototype.racc_state=G.$$prototype.racc_tstack=s,t.const_set(U[0],"Racc_Runtime_Version","1.4.6"),t.const_set(U[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),t.const_set(U[0],"Racc_Runtime_Core_Version_R","1.4.6"),t.const_set(U[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),t.const_set(U[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),t.const_set(U[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),t.const_set(U[0],"Racc_Runtime_Core_Version",o(U,"Racc_Runtime_Core_Version_R")),t.const_set(U[0],"Racc_Runtime_Core_Revision",o(U,"Racc_Runtime_Core_Revision_R")),t.const_set(U[0],"Racc_Runtime_Type","ruby"),t.defs(o(U,"Parser"),"$racc_runtime_type",p=function(){return o(U,"Racc_Runtime_Type")},p.$$arity=0),t.def(G,"$_racc_setup",y=function(){var n,i,c=s,a=s,o=s;return null==d.stderr&&(d.stderr=s),h($(this.$class(),"Racc_debug_parser"))||(this.yydebug=!1),h(null!=(n=this.yydebug)&&n!==s?"instance-variable":s)||(this.yydebug=!1),h(this.yydebug)&&(h(null!=(i=this.racc_debug_out)&&i!==s?"instance-variable":s)||(this.racc_debug_out=d.stderr),this.racc_debug_out=h(c=this.racc_debug_out)?c:d.stderr),a=$(this.$class(),"Racc_arg"),h(r(a.$size(),14))&&(l(a,"[]=",t.to_a(o=[13,!0])),e(o.length,1)),a},y.$$arity=0),t.def(G,"$_racc_init_sysvars",m=function(){return this.racc_state=[0],this.racc_tstack=[],this.racc_vstack=[],this.racc_t=s,this.racc_val=s,this.racc_read_next=!0,this.racc_user_yyerror=!1,this.racc_error_status=0},m.$$arity=0),t.def(G,"$do_parse",v=function(){return this.$__send__(o(U,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},v.$$arity=0),t.def(G,"$next_token",g=function(){return this.$raise(o(U,"NotImplementedError"),this.$class()+"#next_token is not defined")},g.$$arity=0),t.def(G,"$_racc_do_parse_rb",b=function(r,e){var c,a,$=s,o=s,u=s,_=s,d=s,f=s,p=s,y=s;return c=t.to_ary(r),$=null==c[0]?s:c[0],o=null==c[1]?s:c[1],u=null==c[2]?s:c[2],_=null==c[3]?s:c[3],d=null==c[10]?s:c[10],this.$_racc_init_sysvars(),f=p=y=s,l(this,"catch",["racc_end_parse"],((a=function(){var e,c,l=null==a.$$s?this:a.$$s,m=s,v=s,g=s;for(null==l.racc_state&&(l.racc_state=s),null==l.racc_read_next&&(l.racc_read_next=s),null==l.racc_t&&(l.racc_t=s),null==l.yydebug&&(l.yydebug=s),null==l.racc_val&&(l.racc_val=s);h(!0);)for(h(y=_["$[]"](l.racc_state["$[]"](-1)))?(h(l.racc_read_next)&&h(l.racc_t["$!="](0))&&(c=l.$next_token(),e=t.to_ary(c),f=null==e[0]?s:e[0],l.racc_val=null==e[1]?s:e[1],l.racc_t=h(f)?h(m=d["$[]"](f))?m:1:0,h(l.yydebug)&&l.$racc_read_token(l.racc_t,f,l.racc_val),l.racc_read_next=!1),y=n(y,l.racc_t),h(h(v=h(g=i(y,0))?p=$["$[]"](y):g)?o["$[]"](y)["$=="](l.racc_state["$[]"](-1)):v)||(p=u["$[]"](l.racc_state["$[]"](-1)))):p=u["$[]"](l.racc_state["$[]"](-1));h(p=l.$_racc_evalact(p,r)););}).$$s=this,a.$$arity=0,a))},b.$$arity=2),t.def(G,"$yyparse",R=function(t,r){return this.$__send__(o(U,"Racc_YY_Parse_Method"),t,r,this.$_racc_setup(),!0)},R.$$arity=2),t.def(G,"$_racc_yyparse_rb",k=function(r,e,c,a){var $,o,u=s,_=s,d=s,f=s,p=s,y=s,m=s;return $=t.to_ary(c),u=null==$[0]?s:$[0],_=null==$[1]?s:$[1],d=null==$[2]?s:$[2],f=null==$[3]?s:$[3],p=null==$[10]?s:$[10],this.$_racc_init_sysvars(),y=s,m=s,l(this,"catch",["racc_end_parse"],((o=function(){var t,a=null==o.$$s?this:o.$$s;for(null==a.racc_state&&(a.racc_state=s);!h(m=f["$[]"](a.racc_state["$[]"](-1)));)for(;h(y=a.$_racc_evalact(d["$[]"](a.racc_state["$[]"](-1)),c)););return l(r,"__send__",[e],((t=function(r,e){var a,$,o=null==t.$$s?this:t.$$s,l=s,v=s,g=s,b=s,R=s,k=s,x=s;for(null==o.racc_t&&(o.racc_t=s),null==o.racc_state&&(o.racc_state=s),null==o.racc_read_next&&(o.racc_read_next=s),null==r&&(r=s),null==e&&(e=s),o.racc_t=h(r)?h(l=p["$[]"](r))?l:1:0,o.racc_val=e,o.racc_read_next=!1,m=n(m,o.racc_t),h(h(a=h($=i(m,0))?y=u["$[]"](m):$)?_["$[]"](m)["$=="](o.racc_state["$[]"](-1)):a)||(y=d["$[]"](o.racc_state["$[]"](-1)));h(y=o.$_racc_evalact(y,c)););for(;h(h(v=h(g=(m=f["$[]"](o.racc_state["$[]"](-1)))["$!"]())?g:o.racc_read_next["$!"]())?v:o.racc_t["$=="](0));)for(h(h(b=h(R=h(k=h(x=m)?m=n(m,o.racc_t):x)?i(m,0):k)?y=u["$[]"](m):R)?_["$[]"](m)["$=="](o.racc_state["$[]"](-1)):b)||(y=d["$[]"](o.racc_state["$[]"](-1)));h(y=o.$_racc_evalact(y,c)););}).$$s=a,t.$$arity=2,t))}).$$s=this,o.$$arity=0,o))},k.$$arity=4),t.def(G,"$_racc_evalact",x=function(a,$){var o,u,_,d,f,p=s,y=s,m=s,v=s,g=s,b=s,R=s,k=s,x=s,w=s;if(p=null==(o=t.to_ary($))[0]?s:o[0],y=null==o[1]?s:o[1],m=null==o[3]?s:o[3],_=null==o[11]?s:o[11],v=null==o[12]?s:o[12],h(h(f=c(a,0))?r(a,_):f))h(c(this.racc_error_status,0))&&(this.racc_t["$=="](1)||(this.racc_error_status=e(this.racc_error_status,1))),this.racc_vstack.$push(this.racc_val),this.racc_state.$push(a),this.racc_read_next=!0,h(this.yydebug)&&(this.racc_tstack.$push(this.racc_t),this.$racc_shift(this.racc_t,this.racc_tstack,this.racc_vstack));else if(h(h(g=r(a,0))?c(a,v["$-@"]()):g)){if(b=l(this,"catch",["racc_jump"],((u=function(){var t=null==u.$$s?this:u.$$s;return null==t.racc_state&&(t.racc_state=s),t.racc_state.$push(t.$_racc_do_reduce($,a)),!1}).$$s=this,u.$$arity=0,u)),h(b)){if(1["$==="](R=b))return this.racc_user_yyerror=!0,v["$-@"]();if(2["$==="](R))return _;this.$raise("[Racc Bug] unknown jump code")}}else if(a["$=="](_))h(this.yydebug)&&this.$racc_accept(),this.$throw("racc_end_parse",this.racc_vstack["$[]"](0));else{if(a["$=="](v["$-@"]())){for((0)["$==="](R=this.racc_error_status)?h($["$[]"](21))||this.$on_error(this.racc_t,this.racc_val,this.racc_vstack):3["$==="](R)&&(this.racc_t["$=="](0)&&this.$throw("racc_end_parse",s),this.racc_read_next=!0),this.racc_user_yyerror=!1,this.racc_error_status=3;h(!0)&&(!h(k=m["$[]"](this.racc_state["$[]"](-1)))||(k=n(k,1),!h(h(x=h(w=i(k,0))?a=p["$[]"](k):w)?y["$[]"](k)["$=="](this.racc_state["$[]"](-1)):x)));)h("number"==typeof(d=this.racc_state.$size())?d<=1:d["$<="](1))&&this.$throw("racc_end_parse",s),this.racc_state.$pop(),this.racc_vstack.$pop(),h(this.yydebug)&&(this.racc_tstack.$pop(),this.$racc_e_pop(this.racc_state,this.racc_tstack,this.racc_vstack));return a}this.$raise("[Racc Bug] unknown action "+a.$inspect())}return h(this.yydebug)&&this.$racc_next_state(this.racc_state["$[]"](-1),this.racc_state),s},x.$$arity=2),t.def(G,"$_racc_do_reduce",w=function(r,c){var a,$,o,u,_,d,f,p,y=s,m=s,v=s,g=s,b=s,R=s,k=s,x=s,w=s,E=s,N=s,D=s,A=s,S=s,O=s,B=s;return y=null==(a=t.to_ary(r))[4]?s:a[4],m=null==a[5]?s:a[5],v=null==a[6]?s:a[6],g=null==a[7]?s:a[7],$=null==a[8]?s:a[8],b=null==a[9]?s:a[9],o=null==a[13]?s:a[13],R=this.racc_state,k=this.racc_vstack,x=this.racc_tstack,w="number"==typeof(p=c)?-3*p:p["$*"](-3),E=b["$[]"](w),u=b["$[]"](n(w,1)),_=b["$[]"](n(w,2)),d=[],h(this.yydebug)&&(N=x["$[]"](E["$-@"](),E)),D=k["$[]"](E["$-@"](),E),h(this.yydebug)&&(A=[E["$-@"](),E,d],l(x,"[]=",t.to_a(A)),e(A.length,1)),A=[E["$-@"](),E,d],l(k,"[]=",t.to_a(A)),e(A.length,1),A=[E["$-@"](),E,d],l(R,"[]=",t.to_a(A)),e(A.length,1),h(o)?k.$push(this.$__send__(_,D,k,D["$[]"](0))):k.$push(this.$__send__(_,D,k)),x.$push(u),h(this.yydebug)&&this.$racc_reduce(N,u,x,k),f=e(u,$),h(w=g["$[]"](f))&&(w=n(w,R["$[]"](-1)),h(h(S=h(O=i(w,0))?B=y["$[]"](w):O)?m["$[]"](w)["$=="](f):S))?B:v["$[]"](f)},w.$$arity=2),t.def(G,"$on_error",E=function(t,r,e){var n;return this.$raise(o(U,"ParseError"),this.$sprintf("\nparse error on value %s (%s)",r.$inspect(),h(n=this.$token_to_str(t))?n:"?"))},E.$$arity=3),t.def(G,"$yyerror",N=function(){return this.$throw("racc_jump",1)},N.$$arity=0),t.def(G,"$yyaccept",D=function(){return this.$throw("racc_jump",2)},D.$$arity=0),t.def(G,"$yyerrok",A=function(){return this.racc_error_status=0},A.$$arity=0),t.def(G,"$racc_read_token",S=function(t,r,e){return this.racc_debug_out.$print("read    "),this.racc_debug_out.$print(r.$inspect(),"(",this.$racc_token2str(t),") "),this.racc_debug_out.$puts(e.$inspect()),this.racc_debug_out.$puts()},S.$$arity=3),t.def(G,"$racc_shift",O=function(t,r,e){return this.racc_debug_out.$puts("shift   "+this.$racc_token2str(t)),this.$racc_print_stacks(r,e),this.racc_debug_out.$puts()},O.$$arity=3),t.def(G,"$racc_reduce",B=function(t,r,e,n){var i,c=s;return(c=this.racc_debug_out).$print("reduce "),h(t["$empty?"]())?c.$print(" <none>"):l(t,"each",[],((i=function(t){return null==t&&(t=s),c.$print(" ",(null==i.$$s?this:i.$$s).$racc_token2str(t))}).$$s=this,i.$$arity=1,i)),c.$puts(" --\x3e "+this.$racc_token2str(r)),this.$racc_print_stacks(e,n),this.racc_debug_out.$puts()},B.$$arity=4),t.def(G,"$racc_accept",T=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},T.$$arity=0),t.def(G,"$racc_e_pop",z=function(t,r,e){return this.racc_debug_out.$puts("error recovering mode: pop token"),this.$racc_print_states(t),this.$racc_print_stacks(r,e),this.racc_debug_out.$puts()},z.$$arity=3),t.def(G,"$racc_next_state",P=function(t,r){return this.racc_debug_out.$puts("goto    "+t),this.$racc_print_states(r),this.racc_debug_out.$puts()},P.$$arity=2),t.def(G,"$racc_print_stacks",C=function(t,r){var e,n=s;return(n=this.racc_debug_out).$print("        ["),l(t,"each_index",[],((e=function(i){return null==i&&(i=s),n.$print(" (",(null==e.$$s?this:e.$$s).$racc_token2str(t["$[]"](i))," ",r["$[]"](i).$inspect(),")")}).$$s=this,e.$$arity=1,e)),n.$puts(" ]")},C.$$arity=2),t.def(G,"$racc_print_states",I=function(t){var r,e=s;return(e=this.racc_debug_out).$print("        ["),l(t,"each",[],((r=function(t){return null==t&&(t=s),e.$print(" ",t)}).$$s=this,r.$$arity=1,r)),e.$puts(" ]")},I.$$arity=1),t.def(G,"$racc_token2str",L=function(t){var r;return h(r=$(this.$class(),"Racc_token_to_s_table")["$[]"](t))?r:this.$raise("[Racc Bug] can't convert token "+t+" to string")},L.$$arity=1),t.def(G,"$token_to_str",M=function(t){return $(this.$class(),"Racc_token_to_s_table")["$[]"](t)},M.$$arity=1)}(p[0],0,p)}(a[0],a)},Opal.modules.strscan=function(t){var r=[],e=t.nil,n=t.$$,i=t.klass,c=t.truthy,a=t.send;return function(r,s,$){var o,u,_,h,d,l,f,p,y,m,v,g,b,R,k,x,w,E,N,D,A,S,O,B,T,z=i(r,null,"StringScanner"),P=[z].concat($);return z.$$prototype.pos=z.$$prototype.string=z.$$prototype.working=z.$$prototype.matched=z.$$prototype.prev_pos=z.$$prototype.match=e,z.$attr_reader("pos"),z.$attr_reader("matched"),t.def(z,"$initialize",o=function(t){return this.string=t,this.pos=0,this.matched=e,this.working=t,this.match=[]},o.$$arity=1),z.$attr_reader("string"),t.def(z,"$beginning_of_line?",u=function(){return 0===this.pos||"\n"===this.string.charAt(this.pos-1)},u.$$arity=0),t.alias(z,"bol?","beginning_of_line?"),t.def(z,"$scan",_=function(t){var r=(t=this.$anchor(t)).exec(this.working);return null==r?this.matched=e:"object"==typeof r?(this.prev_pos=this.pos,this.pos+=r[0].length,this.working=this.working.substring(r[0].length),this.matched=r[0],this.match=r,r[0]):"string"==typeof r?(this.pos+=r.length,this.working=this.working.substring(r.length),r):e},_.$$arity=1),t.def(z,"$scan_until",h=function(t){t=this.$anchor(t);for(var r,n=this.pos,i=this.working;;){if(r=t.exec(i),n+=1,i=i.substr(1),null!=r)return this.matched=this.string.substr(this.pos,n-this.pos-1+r[0].length),this.match=r,this.prev_pos=n-1,this.pos=n,this.working=i.substr(r[0].length),this.matched;if(0===i.length)return this.match=[],this.matched=e}},h.$$arity=1),t.def(z,"$[]",d=function(t){var r;if(c(this.match["$empty?"]()))return e;r=t,n(P,"Symbol")["$==="](r)?t=t.$to_s():n(P,"String")["$==="](r)||(t=n(P,"Opal")["$coerce_to!"](t,n(P,"Integer"),"to_int"));var i=this.match;return t<0&&(t+=i.length),t<0||t>=i.length||null==i[t]?e:i[t]},d.$$arity=1),t.def(z,"$check",l=function(t){var r=(t=this.$anchor(t)).exec(this.working);return this.matched=null==r?e:r[0]},l.$$arity=1),t.def(z,"$check_until",f=function(t){var r=this.prev_pos,n=this.pos,i=this.$scan_until(t);return i!==e&&(this.matched=i.substr(-1),this.working=this.string.substr(n)),this.prev_pos=r,this.pos=n,i},f.$$arity=1),t.def(z,"$peek",p=function(t){return this.working.substring(0,t)},p.$$arity=1),t.def(z,"$eos?",y=function(){return 0===this.working.length},y.$$arity=0),t.def(z,"$exist?",m=function(t){var r=t.exec(this.working);return null==r?e:0==r.index?0:r.index+1},m.$$arity=1),t.def(z,"$skip",v=function(t){var r=(t=this.$anchor(t)).exec(this.working);if(null==r)return this.match=[],this.matched=e;var n=r[0],i=n.length;return this.matched=n,this.match=r,this.prev_pos=this.pos,this.pos+=i,this.working=this.working.substring(i),i},v.$$arity=1),t.def(z,"$skip_until",g=function(t){var r=this.$scan_until(t);return r===e?e:(this.matched=r.substr(-1),r.length)},g.$$arity=1),t.def(z,"$get_byte",b=function(){var t=e;return this.pos<this.string.length?(this.prev_pos=this.pos,this.pos+=1,t=this.matched=this.working.substring(0,1),this.working=this.working.substring(1)):this.matched=e,t},b.$$arity=0),t.alias(z,"getch","get_byte"),t.def(z,"$match?",R=function(t){var r=(t=this.$anchor(t)).exec(this.working);return null==r?e:(this.prev_pos=this.pos,r[0].length)},R.$$arity=1),t.def(z,"$pos=",k=function(t){return t<0&&(t+=this.string.$length()),this.pos=t,this.working=this.string.slice(t)},k.$$arity=1),t.def(z,"$matched_size",x=function(){return this.matched===e?e:this.matched.length},x.$$arity=0),t.def(z,"$post_match",w=function(){return this.matched===e?e:this.string.substr(this.pos)},w.$$arity=0),t.def(z,"$pre_match",E=function(){return this.matched===e?e:this.string.substr(0,this.prev_pos)},E.$$arity=0),t.def(z,"$reset",N=function(){return this.working=this.string,this.matched=e,this.pos=0},N.$$arity=0),t.def(z,"$rest",D=function(){return this.working},D.$$arity=0),t.def(z,"$rest?",A=function(){return 0!==this.working.length},A.$$arity=0),t.def(z,"$rest_size",S=function(){return this.$rest().$size()},S.$$arity=0),t.def(z,"$terminate",O=function(){var r,n;return this.match=e,r=[this.string.$length()],a(this,"pos=",t.to_a(r)),r[(n=r.length,"number"==typeof n?n-1:n["$-"](1))]},O.$$arity=0),t.def(z,"$unscan",B=function(){return this.pos=this.prev_pos,this.prev_pos=e,this.match=e,this},B.$$arity=0),z.$private(),t.def(z,"$anchor",T=function(t){var r=t.toString().match(/\/([^\/]+)$/);return r=r?r[1]:void 0,new RegExp("^(?:"+t.source+")",r)},T.$$arity=1),e&&"anchor"}(r[0],0,r)},Opal.modules["bcdice/normalize"]=function(t){var r=[],e=t.nil,n=t.module;return function(r,i){var c=[n(r,"BCDice")].concat(i);!function(r,i){var c,a,s=n(r,"Normalize");[s].concat(i),s.$module_function(),t.def(s,"$comparison_operator",c=function(t){var r;return/<=|=</["$==="](r=t)?"<=":/>=|=>/["$==="](r)?">=":/<>|!=|=!/["$==="](r)?"!=":/</["$==="](r)?"<":/>/["$==="](r)?">":/=/["$==="](r)?"==":e},c.$$arity=1),t.def(s,"$target_number",a=function(t){return t["$=="]("?")?t:t.$to_i()},a.$$arity=1)}(c[0],c)}(r[0],r)},Opal.modules["bcdice/common_command/lexer"]=function(t){var r=t.top,e=[],n=t.nil,i=t.$$,c=t.module,a=t.klass,s=t.hash2,$=t.truthy;return r.$require("strscan"),r.$require("bcdice/normalize"),function(r,e){var o=[c(r,"BCDice")].concat(e);!function(r,e){var o=[c(r,"CommonCommand")].concat(e);!function(r,e,c){var o,u,_,h=a(r,null,"Lexer"),d=[h].concat(c);h.$$prototype.scanner=n,t.const_set(d[0],"SYMBOLS",s(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),t.def(h,"$initialize",o=function(t){var r;return t=$(r=t.$split(" ",2).$first())?r:"",this.scanner=i(d,"StringScanner").$new(t)},o.$$arity=1),t.def(h,"$next_token",u=function(){var t=n,r=n,e=n,c=n;return $(this.scanner["$eos?"]())?[!1,"$"]:$(t=this.scanner.$scan(/\d+/))?["NUMBER",t.$to_i()]:$(r=this.scanner.$scan(/[<>!=]+/))?["CMP_OP",i(d,"Normalize").$comparison_operator(r)]:(e=this.scanner.$getch().$upcase(),[$(c=i(d,"SYMBOLS")["$[]"](e))?c:e.$to_sym(),e])},u.$$arity=0),t.def(h,"$source",_=function(){return this.scanner.$string()},_.$$arity=0)}(o[0],0,o)}(o[0],o)}(e[0],e)},Opal.modules["bcdice/arithmetic/parser"]=function(t){var r=t.top,e=[],n=t.nil,i=t.$$$,c=t.$$,a=t.module,s=t.klass,$=t.hash;return r.$require("racc/parser.rb"),r.$require("bcdice/common_command/lexer"),r.$require("bcdice/arithmetic/node"),function(r,e){var o=[a(r,"BCDice")].concat(e);!function(r,e){var o=[a(r,"Arithmetic")].concat(e);!function(r,e,a){var o,u,_,h,d,l,f,p,y,m,v,g,b,R,k,x,w,E,N,D,A,S,O,B,T,z,P,C=s(r,e,"Parser"),I=[C].concat(a);C.$$prototype.lexer=n,t.defs(C,"$parse",o=function(t){return this.$new().$parse(t)},o.$$arity=1),t.def(C,"$parse",u=function(r){try{return this.lexer=i(i(c(I,"BCDice"),"CommonCommand"),"Lexer").$new(r),this.$do_parse()}catch(e){if(!t.rescue(e,[c(I,"ParseError")]))throw e;try{return n}finally{t.pop_exception()}}},u.$$arity=1),C.$private(),t.def(C,"$next_token",_=function(){return this.lexer.$next_token()},_.$$arity=0),E=[8,17,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,n,n,4,5,4,5,7,9,7,n,n,10,11,n,10,11,22,26,24,25,27],N=[0,9,4,2,2,0,0,4,4,0,5,4,7,18,18,5,5,7,7,5,10,7,11,19,19,10,10,11,11,10,12,11,13,n,n,12,12,13,13,12,1,13,n,n,16,16,n,1,1,16,21,21,21,21],D=[-2,40,-6,n,0,8,n,10,n,1,18,20,28,30,n,n,37,n,4,14,n,47,n,n,n,n,n,n],A=[-17,-17,-3,-6,-17,-17,-14,-17,-16,-17,-17,-17,-17,-17,-12,-13,-17,28,-1,-2,-4,-7,-15,-5,-8,-9,-10,-11],S=[14,15,23,1,18,19,n,n,20,21,16],O=[3,3,4,1,2,2,n,n,3,3,1],B=[n,3,-6,-4,-19,n],T=[n,n,2,3,n,6],z=[0,0,"racc_error",3,14,"_reduce_1",3,14,"_reduce_2",1,14,"_reduce_none",3,15,"_reduce_4",4,15,"_reduce_5",1,15,"_reduce_none",0,17,"_reduce_7",1,17,"_reduce_8",1,17,"_reduce_9",1,17,"_reduce_10",1,17,"_reduce_11",2,16,"_reduce_12",2,16,"_reduce_13",1,16,"_reduce_none",3,18,"_reduce_15",1,18,"_reduce_16"],P=$(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12),t.const_set(I[0],"Racc_arg",[E,N,A,D,S,O,T,B,13,z,P,28,17,!0]),t.const_set(I[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","add","mul","unary","round_type","term"]),t.const_set(I[0],"Racc_debug_parser",!1),t.def(C,"$_reduce_1",h=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"BinaryOp").$new(t["$[]"](0),"+",t["$[]"](2))},h.$$arity=3),t.def(C,"$_reduce_2",d=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"BinaryOp").$new(t["$[]"](0),"-",t["$[]"](2))},d.$$arity=3),t.def(C,"$_reduce_4",l=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"BinaryOp").$new(t["$[]"](0),"*",t["$[]"](2))},l.$$arity=3),t.def(C,"$_reduce_5",f=function(t,r,e){return t["$[]"](3).$new(t["$[]"](0),t["$[]"](2))},f.$$arity=3),t.def(C,"$_reduce_7",p=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},p.$$arity=3),t.def(C,"$_reduce_8",y=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"DivideWithCeil")},y.$$arity=3),t.def(C,"$_reduce_9",m=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"DivideWithCeil")},m.$$arity=3),t.def(C,"$_reduce_10",v=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"DivideWithRound")},v.$$arity=3),t.def(C,"$_reduce_11",g=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"DivideWithFloor")},g.$$arity=3),t.def(C,"$_reduce_12",b=function(t,r,e){return t["$[]"](1)},b.$$arity=3),t.def(C,"$_reduce_13",R=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"Negative").$new(t["$[]"](1))},R.$$arity=3),t.def(C,"$_reduce_15",k=function(t,r,e){return t["$[]"](1)},k.$$arity=3),t.def(C,"$_reduce_16",x=function(t,r,e){return i(i(c(I,"Arithmetic"),"Node"),"Number").$new(t["$[]"](0))},x.$$arity=3),t.def(C,"$_reduce_none",w=function(t,r,e){return t["$[]"](0)},w.$$arity=3)}(o[0],i(c(o,"Racc"),"Parser"),o)}(o[0],o)}(e[0],e)},Opal.modules["bcdice/arithmetic"]=function(t){var r=t.top,e=[],n=t.nil,i=t.$$,c=t.module,a=t.send;return r.$require("bcdice/arithmetic/node"),r.$require("bcdice/arithmetic/parser"),function(r,e){var s=[c(r,"BCDice")].concat(e);!function(r,e){var s=c(r,"Arithmetic"),$=[s].concat(e);!function(r,e){var c,s=[r].concat(e);t.def(r,"$eval",c=function(r,e){var c;try{return(c=i(s,"Parser").$parse(r))===n||null==c?n:a(c,"eval",[e])}catch($){if(!t.rescue($,[i(s,"ZeroDivisionError")]))throw $;try{return n}finally{t.pop_exception()}}},c.$$arity=2)}(t.get_singleton_class(s),$)}(s[0],s)}(e[0],e)},function(t){function r(t,r){return"number"==typeof t&&"number"==typeof r?t+r:t["$+"](r)}var e=t.top,n=[],i=t.nil,c=t.$$$,a=t.$$,s=t.module,$=t.klass,o=t.send2,u=t.truthy,_=t.send,h=t.hash2;e.$require("bcdice/dice_table/table"),e.$require("bcdice/dice_table/d66_grid_table"),e.$require("bcdice/arithmetic"),function(e,n){var d=[s(e,"BCDice")].concat(n);!function(e,n){var d=[s(e,"GameSystem")].concat(n);!function(e,n,s){var d,l,f,p=$(e,n,"AngelGear"),y=[p].concat(s);p.$$prototype.randomizer=i,t.const_set(y[0],"ID","AngelGear"),t.const_set(y[0],"NAME","\u30a8\u30f3\u30bc\u30eb\u30ae\u30a2 \u5929\u4f7f\u5927\u6226TRPG The 2nd Editon"),t.const_set(y[0],"SORT_KEY","\u3048\u3093\u305b\u308b\u304d\u30422"),t.const_set(y[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\u3000nAG[s][\xb1a]\n[]\u5185\u306f\u7701\u7565\u53ef\u80fd\u3002\nn:\u5224\u5b9a\u5024\ns:\u6280\u80fd\u5024\na:\u4fee\u6b63\n\uff08\u4f8b\uff09\n12AG 10AG3\xb120\n\n\u30fb\u611f\u60c5\u8868\u3000ET\n"),t.def(p,"$initialize",d=function(r){return d.$$p&&(d.$$p=null),o(this,t.find_super_dispatcher(this,"initialize",d,!1,!0),"initialize",[r],null),this.sort_barabara_dice=!0},d.$$arity=1),t.def(p,"$eval_game_system_specific_command",l=function(t){var r,e=i;return u(e=/^(\d+)AG(\d+)?(([+\-]\d+)*)$/.$match(t))?this.$resolute_action(e["$[]"](1).$to_i(),(r=e["$[]"](2))===i||null==r?i:_(r,"to_i",[]),e["$[]"](3),t):this.$roll_tables(t,a(y,"TABLES"))},l.$$arity=1),t.def(p,"$resolute_action",f=function(t,e,n,s){var $,o,h,d=i,l=i,f=i,p=i;return o=(d=this.randomizer.$roll_barabara(t,6).$sort()).$join(","),l=0,f=0,u(e)&&(f=_(d,"count",[],(($=function(t){var r,n;return null==t&&(t=i),n=e,"number"==typeof(r=t)&&"number"==typeof n?r<=n:r["$<="](n)}).$$s=this,$.$$arity=1,$)),u(n["$empty?"]())||(l=a(y,"Arithmetic").$eval(n,c(a(y,"RoundType"),"FLOOR")))),p="("+s+") \uff1e "+f+"["+o+"]"+this.$format("%+d",l)+" \uff1e \u6210\u529f\u6570: "+r(f,l),u("number"==typeof(h=r(f,l))?h>=100:h["$>="](100))&&(p=r(p,"(\u798f\u97f3\u767a\u751f)")),p},f.$$arity=4),t.const_set(y[0],"TABLES",h(["ET"],{ET:c(a(y,"DiceTable"),"D66GridTable").$new("\u611f\u60c5\u8868",[["\u597d\u5947\u5fc3\uff08\u597d\u5947\u5fc3\uff09","\u61a7\u308c\uff08\u3042\u3053\u304c\u308c\uff09","\u5c0a\u656c\uff08\u305d\u3093\u3051\u3044\uff09","\u4ef2\u9593\u610f\u8b58\uff08\u306a\u304b\u307e\u3044\u3057\u304d\uff09","\u6bcd\u6027\u611b\uff08\u307c\u305b\u3044\u3042\u3044\uff09","\u611f\u5fc3\uff08\u304b\u3093\u3057\u3093\uff09"],["\u7d14\u611b\uff08\u3058\u3085\u3093\u3042\u3044\uff09","\u53cb\u60c5\uff08\u3086\u3046\u3058\u3087\u3046\uff09","\u540c\u60c5\uff08\u3069\u3046\u3058\u3087\u3046\uff09","\u7236\u6027\u611b\uff08\u3075\u305b\u3044\u3042\u3044\uff09","\u5e78\u798f\u611f\uff08\u3053\u3046\u3075\u304f\u304b\u3093\uff09","\u4fe1\u983c\uff08\u3057\u3093\u3089\u3044\uff09"],["\u7af6\u4e89\u5fc3\uff08\u304d\u3087\u3046\u305d\u3046\u3057\u3093\uff09","\u89aa\u8fd1\u611f\uff08\u3057\u3093\u304d\u3093\u304b\u3093\uff09","\u307e\u3054\u3053\u308d","\u597d\u610f\uff08\u3053\u3046\u3044\uff09","\u6709\u70ba\uff08\u3086\u3046\u3044\uff09","\u5d07\u62dd\uff08\u3059\u3046\u306f\u3044\uff09"],["\u5927\u5acc\u3044\uff08\u3060\u3044\u304d\u3089\u3044\uff09","\u59ac\u307f\uff08\u306d\u305f\u307f\uff09","\u4fae\u8511\uff08\u3076\u3079\u3064\uff09","\u8150\u308c\u7e01\uff08\u304f\u3055\u308c\u3048\u3093\uff09","\u6050\u6016\uff08\u304d\u3087\u3046\u3075\uff09","\u52a3\u7b49\u611f\uff08\u308c\u3063\u3068\u3046\u304b\u3093\uff09"],["\u504f\u611b\uff08\u3078\u3093\u3042\u3044\uff09","\u5bc2\u3057\u3055\uff08\u3055\u3073\u3057\u3055\uff09","\u6190\u61ab\uff08\u308c\u3093\u3073\u3093\uff09","\u95d8\u4e89\u5fc3\uff08\u3068\u3046\u305d\u3046\u3057\u3093\uff09","\u98df\u50b7\uff08\u3057\u3087\u304f\u3057\u3087\u3046\uff09","\u5618\u3064\u304d\uff08\u3046\u305d\u3064\u304d\uff09"],["\u7518\u3048\uff08\u3042\u307e\u3048\uff09","\u82db\u7acb\u3061\uff08\u3044\u3089\u3060\u3061\uff09","\u4e0b\u5fc3\uff08\u3057\u305f\u3054\u3053\u308d\uff09","\u618e\u60aa\uff08\u305e\u3046\u304a\uff09","\u7591\u60d1\uff08\u304e\u308f\u304f\uff09","\u652f\u914d\uff08\u3057\u306f\u3044\uff09"]])}).$freeze()),p.$register_prefix("\\d+AG",a(y,"TABLES").$keys())}(d[0],a(d,"Base"),d)}(d[0],d)}(n[0],n)}(Opal)}}]);