(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[735],{7321:(ie,$e,te)=>{te(3986),Opal.modules["bcdice/dice_table/table"]=function(e){var j,g,o,E,A,W,z,v,S,T=e.module,h=e.klass,_=e.hash2,y=e.defs,R=e.truthy,b=e.def,u=e.rb_minus,l=[],d=e.nil;return j=l,g=S=[T(l[0],"BCDice")].concat(j),o=v=[T(S[0],"DiceTable")].concat(g),A=[E=h(v[0],null,"Table")].concat(o),W=e.$r(A),(z=E.$$prototype).times=z.sides=z.name=z.items=d,y(E,"$from_i18n",function(c,i){var $=d;return $=W("I18n").$t(c,_(["locale"],{locale:i})),this.$new($["$[]"]("name"),$["$[]"]("type"),$["$[]"]("items"))}),b(E,"$initialize",function(c,i,a){var $=this,f=d;return $.name=c,$.items=a.$freeze(),f=/(\d+)D(\d+)/i.$match(i),R(f)||$.$raise(W("ArgumentError"),"Unexpected table type: "+i),$.times=f["$[]"](1).$to_i(),$.sides=f["$[]"](2).$to_i()}),b(E,"$roll",function(c){var a,i=this;return a=c.$roll_sum(i.times,i.sides),i.$choice(a)}),b(E,"$choice",function(c){var a,i=this;return a=u(c,i.times),W("RollResult").$new(i.name,c,i.items["$[]"](a))})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var m,B,n,o,E,A,W,r,k,T=e.module,h=e.klass,_=e.def,y=e.rb_plus,R=e.rb_times,b=e.send,u=[],l=e.nil;return m=u,B=k=[T(u[0],"BCDice")].concat(m),n=r=[T(k[0],"DiceTable")].concat(B),E=[o=h(r[0],null,"D66RangeTable")].concat(n),A=e.$r(E),(W=o.$$prototype).items=W.name=l,_(o,"$initialize",function(D,c){return this.name=D,this.items=c.$freeze()}),_(o,"$roll",function(D){var i,a,$,f=l;return i=D.$roll_once(6),a=D.$roll_once(6),$=y(R(i,10),a),f=b(this.items,"find",[],function(F){return null==F&&(F=l),F["$[]"](0)["$include?"]($)}),A("RollResult").$new(this.name,$,f["$[]"](1))})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var k,r,E,A,W,z,D,w,B,T=e.module,h=e.klass,_=e.hash2,y=e.defs,R=e.def,b=e.rb_plus,u=e.rb_times,l=e.rb_minus,d=[],m=e.nil;return k=d,r=B=[T(d[0],"BCDice")].concat(k),E=w=[T(B[0],"DiceTable")].concat(r),W=[A=h(w[0],null,"D66GridTable")].concat(E),z=e.$r(W),(D=A.$$prototype).name=D.items=m,y(A,"$from_i18n",function(i,a){var f=m;return f=z("I18n").$t(i,_(["locale","raise"],{locale:a,raise:!0})),this.$new(f["$[]"]("name"),f["$[]"]("items"))}),R(A,"$initialize",function(i,a){return this.name=i,this.items=a.$freeze()}),R(A,"$roll",function(i){var $,f,J,F,q;return $=i.$roll_once(6),f=i.$roll_once(6),J=b(u($,10),f),F=l($,1),q=l(f,1),z("RollResult").$new(this.name,J,this.items["$[]"](F)["$[]"](q))})},Opal.modules["bcdice/format"]=function(e){var m,B,g,r,v,k,T=e.module,h=e.eqeqeq,_=e.def,y=e.truthy,R=e.eqeq,b=e.rb_gt,u=[],l=e.nil;return m=u,B=k=[T(u[0],"BCDice")].concat(m),r=[g=T(k[0],"Format")].concat(B),v=e.$r(r),g.$module_function(),_(g,"$comparison_operator",function(n){var o;return h("==",o=n)?"=":h("!=",o)?"<>":h(v("Symbol"),o)?n.$to_s():l}),_(g,"$modifier",function(n){return y(n["$nil?"]())?l:R(n,0)?"":y(b(n,0))?"+"+n:n.$to_s()})},Opal.queue(function(e){var A,c,F,L,t,U,s,q,I,C,a,$,z,T=e.module,h=e.klass,_=e.const_set,y=e.send2,R=e.find_super,b=e.def,u=e.truthy,l=e.rb_plus,d=e.rb_le,m=e.rb_ge,j=e.eqeq,k=e.thrower,S=e.hash2,B=e.defs,g=e.neqeq,r=e.range,v=e.top,w=[],n=e.nil,o=e.$$$;return v.$require("bcdice/dice_table/table"),v.$require("bcdice/dice_table/d66_range_table"),v.$require("bcdice/dice_table/d66_grid_table"),v.$require("bcdice/format"),A=w,c=z=[T(w[0],"BCDice")].concat(A),a=[T(z[0],"GameSystem")].concat(c),$=e.$r(a),F=a,I=[q=h(a[0],$("Base"),"MonotoneMuseum")].concat(F),C=e.$r(I),q.$$prototype.randomizer=n,_(I[0],"ID","MonotoneMuseum"),_(I[0],"NAME","\u30e2\u30ce\u30c8\u30fc\u30f3\u30df\u30e5\u30fc\u30b8\u30a2\u30e0RPG"),_(I[0],"SORT_KEY","\u3082\u306e\u3068\u304a\u3093\u307f\u3086\u3046\u3057\u3042\u3080RPG"),_(I[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\n\u3000\u30fb\u901a\u5e38\u5224\u5b9a\u3000\u3000\u3000\u3000\u3000\u30002D6+m>=t[c,f]\n\u3000\u3000\u4fee\u6b63\u5024m,\u76ee\u6a19\u5024t,\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024c,\u30d5\u30a1\u30f3\u30d6\u30eb\u5024f\u3067\u5224\u5b9a\u30ed\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306f\u7701\u7565\u53ef\u80fd\u3067\u3059\u3002([]\u3054\u3068\u7701\u7565\u3067\u304d\u307e\u3059)\n\u3000\u3000\u81ea\u52d5\u6210\u529f\u3001\u81ea\u52d5\u5931\u6557\u3001\u6210\u529f\u3001\u5931\u6557\u3092\u81ea\u52d5\u8868\u793a\u3057\u307e\u3059\u3002\n\u30fb\u5404\u7a2e\u8868\n\u3000\u30fb\u611f\u60c5\u8868\u3000ET\uff0f\u611f\u60c5\u8868 2.0\u3000ET2\n\u3000\u30fb\u5146\u5019\u8868\u3000OT\uff0f\u5146\u5019\u8868ver2.0\u3000OT2\uff0f\u5146\u5019\u8868ver3.0\u3000OT3\n\u3000\u30fb\u6b6a\u307f\u8868\u3000DT\uff0f\u6b6a\u307f\u8868ver2.0\u3000DT2\uff0f\u6b6a\u307f\u8868(\u91ce\u5916)\u3000DTO\uff0f\u6b6a\u307f\u8868(\u6d77)\u3000DTS\uff0f\u6b6a\u307f\u8868(\u9928\u30fb\u57ce)\u3000DTM\n\u3000\u30fb\u4e16\u754c\u6b6a\u66f2\u8868\u3000WDT\uff0f\u4e16\u754c\u6b6a\u66f2\u88682.0\u3000WDT2\n\u3000\u30fb\u6c38\u52ab\u6d88\u5931\u8868\u3000EDT\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),b(q,"$initialize",function G(x){var t=this;return G.$$p=null,y(t,R(t,"initialize",G,!1,!0),"initialize",[x],null),t.d66_sort_type=o(C("D66SortType"),"NO_SORT"),t.sort_add_dice=!0}),b(q,"$eval_game_system_specific_command",function(x){var t,L=this;return u(t=L.$check_roll(x))?t:L.$roll_tables(x,o(L.$class(),"TABLES"))}),q.$private(),b(q,"$check_roll",function(x){try{k("eval_return");var t,U,s=this,M=n,H=n,P=n,Y=n,N=n,K=n,O=n,X=n,Q=n,ee=n,Z=n,V=n,ne=n;return M=/^(\d+)D6([+\-\d]*)>=(\?|\d+)(\[(\d+)?(,(\d+))?\])?$/i.$match(x),u(M)?(H=M["$[]"](1).$to_i(),P=u(M["$[]"](2))?C("ArithmeticEvaluator").$eval(M["$[]"](2)):0,Y=M["$[]"](3).$to_i(),N=u(K=(t=M["$[]"](5))===n||null==t?n:t.$to_i())?K:12,O=u(K=(U=M["$[]"](7))===n||null==U?n:U.$to_i())?K:2,Q=(X=s.randomizer.$roll_barabara(H,6).$sort()).$sum(),ee=X.$join(","),Z=l(Q,P),V=u(d(Q,O))?C("Result").$fumble(s.$translate("MonotoneMuseum.automatic_failure")):u(m(Q,N))?C("Result").$critical(s.$translate("MonotoneMuseum.automatic_success")):j(Y,0)?C("Result").$success(n):u(m(Z,Y))?C("Result").$success(s.$translate("success")):C("Result").$failure(s.$translate("failure")),ne=["("+x+")",Q+"["+ee+"]"+C("Format").$modifier(P),Z.$to_s(),V.$text()].$compact(),V["$text="](ne.$join(" \uff1e ")),V):n}catch(p){if(p===e.t_eval_return)return p.$v;throw p}}),L=I,U=[t=h(I[0],o(C("DiceTable"),"D66RangeTable"),"MMTable")].concat(L),s=e.$r(U),B(t,"$from_i18n",function(H,P){var N=n;return N=s("I18n").$translate(H,S(["locale","raise"],{locale:P,raise:!0})),this.$new(N["$[]"]("name"),N["$[]"]("items"))}),b(t,"$initialize",function M(H,P){var K,N=this;return M.$$p=null,g(P.$size(),s("RANGE").$size())&&N.$raise(s("UnexpectedTableSize").$new(H,P.$size())),K=s("RANGE").$zip(P),y(N,R(N,"initialize",M,!1,!0),"initialize",[H,K],null)}),_(U[0],"RANGE",[r(11,12,!1),r(13,14,!1),r(15,16,!1),r(21,22,!1),r(23,24,!1),r(25,26,!1),r(31,32,!1),r(33,34,!1),r(35,36,!1),r(41,42,!1),r(43,44,!1),r(45,46,!1),r(51,52,!1),r(53,54,!1),r(55,56,!1),r(61,62,!1),r(63,64,!1),r(65,66,!1)].$freeze()),function(G,x){var L=[G].concat(x),t=e.$r(L);G.$private(),b(G,"$translate_tables",function(s){return S(["ET","ET2","OT","DT","DT2","WDT","WDT2","OT2","DTO","DTS","EDT","DTM","OT3"],{ET:o(t("DiceTable"),"D66GridTable").$from_i18n("MonotoneMuseum.table.ET",s),ET2:o(t("DiceTable"),"D66GridTable").$from_i18n("MonotoneMuseum.table.ET2",s),OT:o(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.OT",s),DT:o(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.DT",s),DT2:t("MMTable").$from_i18n("MonotoneMuseum.table.DT2",s),WDT:o(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.WDT",s),WDT2:t("MMTable").$from_i18n("MonotoneMuseum.table.WDT2",s),OT2:t("MMTable").$from_i18n("MonotoneMuseum.table.OT2",s),DTO:t("MMTable").$from_i18n("MonotoneMuseum.table.DTO",s),DTS:t("MMTable").$from_i18n("MonotoneMuseum.table.DTS",s),EDT:o(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.EDT",s),DTM:t("MMTable").$from_i18n("MonotoneMuseum.table.DTM",s),OT3:o(t("DiceTable"),"Table").$from_i18n("MonotoneMuseum.table.OT3",s)})})}(e.get_singleton_class(q),I),_(I[0],"TABLES",q.$translate_tables("ja_jp").$freeze()),q.$register_prefix("\\d+D6",C("TABLES").$keys())})}}]);