(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[7044],{8151:(p,O,K)=>{K(5151),Opal.queue(function(D){var q,P,W,N,Y,h,v,w,J,z,M=D.module,C=D.klass,g=D.const_set,X=D.def,u=D.truthy,Z=D.eqeq,A=D.rb_ge,m=D.rb_minus,c=D.rb_plus,k=D.to_ary,x=D.rb_gt,F=D.send,R=D.rb_lt,G=D.rb_le,y=[],t=D.nil;return q=y,P=z=[M(y[0],"BCDice")].concat(q),w=[M(z[0],"GameSystem")].concat(P),J=D.$r(w),W=w,Y=[N=C(w[0],J("Base"),"YearZeroEngine")].concat(W),h=D.$r(Y),(v=N.$$prototype).total_success_dice=v.total_botch_dice=v.base_botch_dice=v.push_dice=v.skill_botch_dice=v.gear_botch_dice=v.difficulty=v.randomizer=t,g(Y[0],"ID","YearZeroEngine"),g(Y[0],"NAME","YearZeroEngine"),g(Y[0],"SORT_KEY","\u3044\u3084\u3042\u305b\u308d\u3048\u3093\u3057\u3093"),g(Y[0],"HELP_MESSAGE","\u30fb\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nYZEx+x+x+m)\n  (\u96e3\u6613\u5ea6)YZE(\u80fd\u529b\u30c0\u30a4\u30b9\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u6570)+(\u30a2\u30a4\u30c6\u30e0\u30c0\u30a4\u30b9\u6570)+(\u4fee\u6b63\u5024)  # (6\u306e\u307f\u3092\u6570\u3048\u308b)\n  (\u96e3\u6613\u5ea6)YZE(\u80fd\u529b\u30c0\u30a4\u30b9\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u6570)+(\u30a2\u30a4\u30c6\u30e0\u30c0\u30a4\u30b9\u6570)-(\u4fee\u6b63\u5024)  # (6\u306e\u307f\u3092\u6570\u3048\u308b)\n\n\u30fb\u30c0\u30a4\u30b9\u30d7\u30fc\u30eb\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nMYZx+x+x)\n  (\u96e3\u6613\u5ea6)MYZ(\u80fd\u529b\u30c0\u30a4\u30b9\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u6570)+(\u30a2\u30a4\u30c6\u30e0\u30c0\u30a4\u30b9\u6570)  # (1\u30686\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a)\n  (\u96e3\u6613\u5ea6)MYZ(\u80fd\u529b\u30c0\u30a4\u30b9\u6570)-(\u6280\u80fd\u30c0\u30a4\u30b9\u6570)+(\u30a2\u30a4\u30c6\u30e0\u30c0\u30a4\u30b9\u6570)  # (1\u30686\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a\u3001\u6280\u80fd\u306e\u30de\u30a4\u30ca\u30b9\u6307\u5b9a)\n\n  \u203b \u96e3\u6613\u5ea6\u3068\u6280\u80fd\u3001\u30a2\u30a4\u30c6\u30e0\u30c0\u30a4\u30b9\u6570\u306f\u7701\u7565\u53ef\u80fd\n\n\u30fb\u30b9\u30c6\u30c3\u30d7\u30c0\u30a4\u30b9\u5224\u5b9a\u30b3\u30de\u30f3\u30c9(nYZSx+x+m+f)\n  (\u96e3\u6613\u5ea6)YZS(\u80fd\u529b\u30c0\u30a4\u30b9\u9762\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u9762\u6570)+(\u4fee\u6b63\u5024)   # (1,6\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a)\n  (\u96e3\u6613\u5ea6)YZS(\u80fd\u529b\u30c0\u30a4\u30b9\u9762\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u9762\u6570)-(\u4fee\u6b63\u5024)   # (1,6\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a)\n  (\u96e3\u6613\u5ea6)YZS(\u80fd\u529b\u30c0\u30a4\u30b9\u9762\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u9762\u6570)+(\u4fee\u6b63\u5024)A  # (1,6\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a\u3001\u6709\u5229)\n  (\u96e3\u6613\u5ea6)YZS(\u80fd\u529b\u30c0\u30a4\u30b9\u9762\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u9762\u6570)-(\u4fee\u6b63\u5024)A  # (1,6\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a\u3001\u6709\u5229)\n  (\u96e3\u6613\u5ea6)YZS(\u80fd\u529b\u30c0\u30a4\u30b9\u9762\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u9762\u6570)+(\u4fee\u6b63\u5024)D  # (1,6\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a\u3001\u4e0d\u5229)\n  (\u96e3\u6613\u5ea6)YZS(\u80fd\u529b\u30c0\u30a4\u30b9\u9762\u6570)+(\u6280\u80fd\u30c0\u30a4\u30b9\u9762\u6570)-(\u4fee\u6b63\u5024)D  # (1,6\u3092\u6570\u3048\u3001\u30d7\u30c3\u30b7\u30e5\u53ef\u80fd\u6570\u3092\u8868\u793a\u3001\u4e0d\u5229)\n"),g(Y[0],"DIFFICULTY_INDEX",1),g(Y[0],"COMMAND_TYPE_INDEX",2),g(Y[0],"ABILITY_INDEX",3),g(Y[0],"SKILL_SIGNED_INDEX",5),g(Y[0],"SKILL_INDEX",6),g(Y[0],"GEAR_INDEX",8),g(Y[0],"MODIFIER_SIGNED_INDEX",10),g(Y[0],"MODIFIER_INDEX",11),N.$register_prefix("(\\d+)?(YZE|MYZ|YZS)"),X(N,"$dice_info_init",function(){var s=this;return s.total_success_dice=0,s.total_botch_dice=0,s.base_botch_dice=0,s.skill_botch_dice=0,s.gear_botch_dice=0,s.push_dice=0,s.difficulty=0}),X(N,"$eval_game_system_specific_command",function(s){var i,e,_=this;return u(i=u(e=_.$resolute_action(s))?e:_.$resolute_push_action(s))?i:_.$resolute_step_action(s)}),X(N,"$resolute_action",function(s){var _,i,e=this,l=t,d=t,I=t,f=t,o=t,n=t,a=t,$=t,r=t,E=t,b=t,S=t,T=t;return l=/^(\d+)?(YZE)(\d+)((\+)(\d+))?(\+(\d+))?((\+|-)(\d+))?/.$match(s),u(l)?(e.$dice_info_init(),e.difficulty=l["$[]"](h("DIFFICULTY_INDEX")).$to_i(),d=l["$[]"](h("ABILITY_INDEX")).$to_i(),I=l["$[]"](h("SKILL_INDEX")).$to_i(),f=l["$[]"](h("GEAR_INDEX")).$to_i(),o=l["$[]"](h("MODIFIER_INDEX")).$to_i(),Z(l["$[]"](h("MODIFIER_SIGNED_INDEX")),"-")?u(A(I,o))?I=m(I,o):(o=m(o,I),I=0,u(A(f,o))?f=m(f,o):(o=m(o,f),f=0,d=u(A(d,o))?m(d,o):0)):I=c(I,o),e.total_success_dice=0,i=e.$make_dice_roll(n=d),a=null==(_=k(i))[0]?t:_[0],r=null==_[2]?t:_[2],e.total_success_dice=c(e.total_success_dice,$=null==_[1]?t:_[1]),e.total_botch_dice=c(e.total_botch_dice,r),e.base_botch_dice=c(e.base_botch_dice,r),e.push_dice=c(e.push_dice,m(n,c($,r))),E="("+n+"D6)",b=a,u(l["$[]"](h("SKILL_INDEX")))&&(i=e.$make_dice_roll(n=I),S=null==(_=k(i))[0]?t:_[0],r=null==_[2]?t:_[2],e.total_success_dice=c(e.total_success_dice,$=null==_[1]?t:_[1]),e.total_botch_dice=c(e.total_botch_dice,r),e.skill_botch_dice=c(e.skill_botch_dice,r),e.push_dice=c(e.push_dice,m(n,$)),E=c(E,"+("+n+"D6)"),b=c(b,"+"+S)),u(l["$[]"](h("GEAR_INDEX")))&&(i=e.$make_dice_roll(n=f),T=null==(_=k(i))[0]?t:_[0],r=null==_[2]?t:_[2],e.total_success_dice=c(e.total_success_dice,$=null==_[1]?t:_[1]),e.total_botch_dice=c(e.total_botch_dice,r),e.gear_botch_dice=c(e.gear_botch_dice,r),e.push_dice=c(e.push_dice,m(n,c($,r))),E=c(E,"+("+n+"D6)"),b=c(b,"+"+T)),e.$make_result_with_yze(E,b)):t}),X(N,"$resolute_push_action",function(s){var _,i,e=this,l=t,d=t,I=t,f=t,o=t,n=t,a=t,$=t,r=t,E=t;return l=/^(\d+)?(MYZ)(\d+)((\+|-)(\d+))?(\+(\d+))?/.$match(s),u(l)?(e.$dice_info_init(),e.difficulty=l["$[]"](h("DIFFICULTY_INDEX")).$to_i(),e.total_success_dice=0,d=l["$[]"](h("ABILITY_INDEX")).$to_i(),i=e.$make_dice_roll(d),I=null==(_=k(i))[0]?t:_[0],o=null==_[2]?t:_[2],e.total_success_dice=c(e.total_success_dice,f=null==_[1]?t:_[1]),e.total_botch_dice=c(e.total_botch_dice,o),e.base_botch_dice=c(e.base_botch_dice,o),e.push_dice=c(e.push_dice,m(d,c(f,o))),n="("+d+"D6)",a=I,u(l["$[]"](h("SKILL_INDEX")))&&(d=l["$[]"](h("SKILL_INDEX")).$to_i(),i=e.$make_dice_roll(d),$=null==(_=k(i))[0]?t:_[0],f=null==_[1]?t:_[1],o=null==_[2]?t:_[2],r=l["$[]"](h("SKILL_SIGNED_INDEX")),e.total_success_dice=Z(r,"-")?m(e.total_success_dice,f):c(e.total_success_dice,f),e.total_botch_dice=c(e.total_botch_dice,o),e.skill_botch_dice=c(e.skill_botch_dice,o),e.push_dice=c(e.push_dice,m(d,f)),n=c(n,r+"("+d+"D6)"),a=c(a,""+r+$)),u(l["$[]"](h("GEAR_INDEX")))&&(d=l["$[]"](h("GEAR_INDEX")).$to_i(),i=e.$make_dice_roll(d),E=null==(_=k(i))[0]?t:_[0],o=null==_[2]?t:_[2],e.total_success_dice=c(e.total_success_dice,f=null==_[1]?t:_[1]),e.total_botch_dice=c(e.total_botch_dice,o),e.gear_botch_dice=c(e.gear_botch_dice,o),e.push_dice=c(e.push_dice,m(d,c(f,o))),n=c(n,"+("+d+"D6)"),a=c(a,"+"+E)),e.$make_result_with_myz(n,a)):t}),X(N,"$make_result_with_yze",function(s,_){var e,i=this;return e=s+" \uff1e "+_+" \u6210\u529f\u6570:"+i.total_success_dice,u(x(i.difficulty,0))?u(A(i.total_success_dice,i.difficulty))?h("Result").$success(e+" \u96e3\u6613\u5ea6="+i.difficulty+":\u5224\u5b9a\u6210\u529f\uff01"):h("Result").$failure(e+" \u96e3\u6613\u5ea6="+i.difficulty+":\u5224\u5b9a\u5931\u6557\uff01"):e}),X(N,"$make_result_with_myz",function(s,_){var e,l,i=this;return e=s+" \uff1e "+_+" \u6210\u529f\u6570:"+i.total_success_dice,l="\n\u51fa\u76ee1\uff1a[\u80fd\u529b\uff1a"+i.base_botch_dice+",\u6280\u80fd\uff1a"+i.skill_botch_dice+",\u30a2\u30a4\u30c6\u30e0\uff1a"+i.gear_botch_dice+") \u30d7\u30c3\u30b7\u30e5\u53ef\u80fd="+i.push_dice+"\u30c0\u30a4\u30b9",u(x(i.difficulty,0))?u(A(i.total_success_dice,i.difficulty))?h("Result").$success(e+" \u96e3\u6613\u5ea6="+i.difficulty+":\u5224\u5b9a\u6210\u529f\uff01"+l):h("Result").$failure(e+" \u96e3\u6613\u5ea6="+i.difficulty+":\u5224\u5b9a\u5931\u6557\uff01"+l):""+e+l}),X(N,"$make_dice_roll",function(s){var e,l,i=t;return e=(i=this.randomizer.$roll_barabara(s,6)).$count(6),l=i.$count(1),["["+i.$join(",")+"]",e,l]}),X(N,"$make_dice_a_roll",function(s,_){var l,d,I,i=this,e=t;return l=(e=i.randomizer.$roll_barabara(s,_)).$count(1),d=F(e,"count",[],function(o){return null==o&&(o=t),A(o,6)}),I=c(d,F(e,"count",[],function(o){return null==o&&(o=t),A(o,10)})),i.total_success_dice=c(i.total_success_dice,I),i.total_botch_dice=c(i.total_botch_dice,l),i.push_dice=c(i.push_dice,m(s,c(d,l))),["["+e.$join(",")+"]",l]}),X(N,"$get_rolling_dice",function(s,_,i){for(u(R(s,4))&&(s=4),u(R(_,4))&&(_=4);u(x(i,0));)u(A(s,_))?u(R(_,12))&&(_=c(_,2)):u(R(s,12))&&(s=c(s,2)),i=m(i,1);for(;u(R(i,0));)u(G(s,_))?u(x(_,4))&&(_=m(_,2)):u(x(s,4))&&(s=m(s,2)),i=c(i,1);return Z(s,4)&&Z(_,4)&&(s=6),[s,_]}),X(N,"$resolute_step_action",function(s){var _,i,e=this,l=t,d=t,I=t,f=t,o=t,n=t,a=t,$=t,r=t,E=t,S=t;return l=/^(\d+)?(YZS)(\d+)((\+)(\d+))?((\+|-)(\d+))?(A|D)?/.$match(s),u(l)?(e.$dice_info_init(),e.difficulty=l["$[]"](h("DIFFICULTY_INDEX")).$to_i(),d=l["$[]"](h("ABILITY_INDEX")).$to_i(),I=l["$[]"](h("SKILL_INDEX")).$to_i(),f=l["$[]"](7).$to_i(),o=l["$[]"](10),n="",a="",i=e.$get_rolling_dice(d,I,f),_=k(i),u(G($=null==_[0]?t:_[0],r=null==_[1]?t:_[1]))?(u(o)?Z(o,"A")&&u(x($,4))&&(i=e.$make_dice_a_roll(2,$),E=null==(_=k(i))[0]?t:_[0],e.base_botch_dice=c(e.base_botch_dice,null==_[1]?t:_[1]),n="(2D"+$+")",a=E):u(x($,4))&&(i=e.$make_dice_a_roll(1,$),E=null==(_=k(i))[0]?t:_[0],e.base_botch_dice=c(e.base_botch_dice,null==_[1]?t:_[1]),n="(1D"+$+")",a=E),u(x(r,4))&&(i=e.$make_dice_a_roll(1,r),S=null==(_=k(i))[0]?t:_[0],e.skill_botch_dice=c(e.skill_botch_dice,null==_[1]?t:_[1]),Z(n,"")||(n=c(n,"+")),Z(a,"")||(a=c(a,"+")),n=c(n,"(1D"+r+")"),a=c(a,S))):(u(x($,4))&&(i=e.$make_dice_a_roll(1,$),E=null==(_=k(i))[0]?t:_[0],e.base_botch_dice=c(e.base_botch_dice,null==_[1]?t:_[1]),n="(1D"+$+")",a=E),u(o)?Z(o,"A")&&u(x(r,4))&&(i=e.$make_dice_a_roll(2,r),S=null==(_=k(i))[0]?t:_[0],e.skill_botch_dice=c(e.skill_botch_dice,null==_[1]?t:_[1]),n=c(n,"+(2D"+r+")"),a=c(a,"+"+S)):u(x(r,4))&&(i=e.$make_dice_a_roll(1,r),S=null==(_=k(i))[0]?t:_[0],e.skill_botch_dice=c(e.skill_botch_dice,null==_[1]?t:_[1]),n=c(n,"+(1D"+r+")"),a=c(a,"+"+S))),e.$make_result_with_myz(n,a)):t})})}}]);