(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[618],{618:function(e,t,r){r(93683),Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var t,r,n,i,a,$,o,c,u=[],s=e.nil,_=e.$$$,l=e.$$,d=e.module,f=e.hash2,p=e.truthy;return t=u,r=c=[d(u[0],"BCDice")].concat(t),o=[$=d(c[0],"ArithmeticEvaluator")].concat(r),n=e.get_singleton_class($),a=[n].concat(o),void e.def(n,"$eval",i=function(t,r){var n,i=s;if(null==r)r=f([],{});else if(!r.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(n=r.$$smap.round_type)&&(n=_(l(a,"RoundType"),"FLOOR")),p(t)&&p(i=l(a,"Arithmetic").$eval(t,n))?i:0},i.$$arity=-2)},Opal.modules["i18n/backend/fallbacks"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var r,n,i,a,$,o,c,u=[],s=e.nil,_=e.$$$,l=e.$$,d=e.module,f=e.truthy,p=e.send,m=e.send2,y=e.hash2;return r=u,c=[o=d(u[0],"I18n")].concat(r),e.class_variable_set(c[0],"@@fallbacks",s),n=e.get_singleton_class(o),$=[n].concat(c),e.def(n,"$fallbacks",i=function(){var t,r,n;return e.class_variable_set($[1],"@@fallbacks",f(n=null==(t=$[1].$$cvars["@@fallbacks"])?s:t)?n:_(_(l($,"I18n"),"Locale"),"Fallbacks").$new()),f(r=l($,"Thread").$current()["$[]"]("i18n_fallbacks"))?r:null==(t=$[1].$$cvars["@@fallbacks"])?s:t},i.$$arity=0),e.def(n,"$fallbacks=",a=function(r){var n,i;return e.class_variable_set($[1],"@@fallbacks",f(r["$is_a?"](l($,"Array")))?_(_(l($,"I18n"),"Locale"),"Fallbacks").$new(r):r),i=["i18n_fallbacks",null==(n=$[1].$$cvars["@@fallbacks"])?s:n],p(l($,"Thread").$current(),"[]=",e.to_a(i)),i[t(i.length,1)]},a.$$arity=1),void function(r,n){var i=[d(r,"Backend")].concat(n);!function(r,n){var i,a,$,o,c=d(r,"Fallbacks"),u=[c].concat(n);e.def(c,"$translate",i=function(t,r,n){try{var a,$=i.$$p,o=this,c=s,d=s,h=s,b=s,v=s,g=s;for($&&(i.$$p=null),v=0,g=arguments.length,b=new Array(g);v<g;v++)b[v]=arguments[v];return null==n&&(n=l(u,"EMPTY_HASH")),!f(n.$fetch("fallback",!0))||f(n["$[]"]("fallback_in_progress"))?m(o,e.find_super_dispatcher(o,"translate",i,!1,!0),"translate",b,$):(f(n["$[]"]("default"))&&(c=o["$extract_non_symbol_default!"](n)),d=n.$merge(y(["fallback_in_progress"],{fallback_in_progress:!0})),p(l(u,"I18n").$fallbacks()["$[]"](t),"each",[],((a=function($){var o,c=null==a.$$s?this:a.$$s;null==$&&($=s);try{return p(c,"catch",["exception"],((o=function(){var c=null==o.$$s?this:o.$$s,u=s;if(u=m(c,e.find_iter_super_dispatcher(c,"translate",o.$$def||a.$$def||i,!1,!1),"translate",[$,r,d],null),f(u["$nil?"]()))return s;f(t.$to_s()["$!="]($.$to_s()))&&c.$on_fallback(t,$,r,n),e.ret(u)}).$$s=c,o.$$arity=0,o))}catch(y){if(!e.rescue(y,[_(l(u,"I18n"),"InvalidLocale")]))throw y;try{return s}finally{e.pop_exception()}}}).$$s=o,a.$$arity=1,a)),f(f(h=n["$key?"]("default"))?n["$[]"]("default")["$nil?"]():h)?s:f(c)?m(o,e.find_super_dispatcher(o,"translate",i,!1,!0),"translate",[t,s,n.$merge(y(["default"],{default:c}))],null):o.$throw("exception",_(l(u,"I18n"),"MissingTranslation").$new(t,r,n)))}catch(x){if(x===e.returner)return x.$v;throw x}},i.$$arity=-3),e.def(c,"$extract_non_symbol_default!",a=function(r){var n,i,a=s,$=s;return a=[r["$[]"]("default")].$flatten(),i=p(a,"detect",[],((n=function(e){return null==e&&(e=s),e["$is_a?"](l(u,"Symbol"))["$!"]()}).$$s=this,n.$$arity=1,n)),f(i)&&($=["default",a["$[]"](0,a.$index(i))],p(r,"[]=",e.to_a($)),t($.length,1)),i},a.$$arity=1),e.def(c,"$exists?",$=function(t,r,n){try{var i,a=$.$$p,o=this,c=s,d=s,y=s;for(a&&($.$$p=null),d=0,y=arguments.length,c=new Array(y);d<y;d++)c[d]=arguments[d];return null==n&&(n=l(u,"EMPTY_HASH")),f(n.$fetch("fallback",!0))?(p(l(u,"I18n").$fallbacks()["$[]"](t),"each",[],((i=function(t){var n=null==i.$$s?this:i.$$s;null==t&&(t=s);try{if(!f(m(n,e.find_iter_super_dispatcher(n,"exists?",i.$$def||$,!1,!1),"exists?",[t,r],null)))return s;e.ret(!0)}catch(a){if(!e.rescue(a,[_(l(u,"I18n"),"InvalidLocale")]))throw a;try{return s}finally{e.pop_exception()}}}).$$s=o,i.$$arity=1,i)),!1):m(o,e.find_super_dispatcher(o,"exists?",$,!1,!0),"exists?",c,a)}catch(h){if(h===e.returner)return h.$v;throw h}},$.$$arity=-3),c.$private(),e.def(c,"$on_fallback",o=function(e,t,r,n){return s},o.$$arity=4)}(i[0],i)}(c[0],c)},Opal.modules["bcdice/randomizer"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}var $,o,c,u,s,_,l,d,f,p,m,y,h,b,v,g,x=[],R=e.nil,k=e.$$$,w=e.$$,T=e.klass,D=e.truthy,E=e.send;return $=x,o=g=[(0,e.module)(x[0],"BCDice")].concat($),b=T(g[0],null,"Randomizer"),v=[b].concat(o),b.$$prototype.rand_results=b.$$prototype.detailed_rand_results=R,e.const_set(v[0],"UPPER_LIMIT_DICE_TIMES",200),e.const_set(v[0],"UPPER_LIMIT_DICE_SIDES",1e3),e.const_set(v[0],"UPPER_LIMIT_RANDS",1e4),e.def(b,"$initialize",c=function(){return this.rand_results=[],this.detailed_rand_results=[]},c.$$arity=0),b.$attr_reader("rand_results"),b.$attr_reader("detailed_rand_results"),e.const_set(v[0],"DetailedRandResult",w(v,"Struct").$new("kind","sides","value")),e.def(b,"$roll_barabara",u=function(e,i){var a,$,o=this;return D(t(r(o.rand_results.$size(),e),w(v,"UPPER_LIMIT_RANDS")))&&o.$raise(w(v,"TooManyRandsError")),D(D($=n(e,0))?$:t(e,w(v,"UPPER_LIMIT_DICE_TIMES")))?[]:E(w(v,"Array"),"new",[e],((a=function(){return(null==a.$$s?this:a.$$s).$roll_once(i)}).$$s=o,a.$$arity=0,a))},u.$$arity=2),e.def(b,"$roll_sum",s=function(e,t){return this.$roll_barabara(e,t).$sum()},s.$$arity=2),e.def(b,"$roll_once",_=function(e){var r,i=R;return D(D(r=n(e,0))?r:t(e,w(v,"UPPER_LIMIT_DICE_SIDES")))?0:(i=this.$rand_inner(e),this.$push_to_detail("normal",e,i),i)},_.$$arity=1),e.def(b,"$roll_index",l=function(e){return i(this.$roll_once(e),1)},l.$$arity=1),e.def(b,"$roll_tens_d10",d=function(){var e,t=R;return(t=this.$rand_inner(10))["$=="](10)&&(t=0),e=a(t,10),this.$push_to_detail("tens_d10",10,e),e},d.$$arity=0),e.def(b,"$roll_d9",f=function(){var e;return e=i(this.$rand_inner(10),1),this.$push_to_detail("d9",10,e),e},f.$$arity=0),e.def(b,"$roll_d66",p=function(e){var t,n,i=R;return i=E(w(v,"Array"),"new",[2],((t=function(){return(null==t.$$s?this:t.$$s).$roll_once(6)}).$$s=this,t.$$arity=0,t)),n=e,k(w(v,"D66SortType"),"ASC")["$==="](n)?i["$sort!"]():k(w(v,"D66SortType"),"DESC")["$==="](n)&&i["$sort!"]()["$reverse!"](),r(a(i["$[]"](0),10),i["$[]"](1))},p.$$arity=1),b.$private(),e.def(b,"$rand_inner",m=function(e){var t,r=this;return D(function(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}(r.rand_results.$size(),w(v,"UPPER_LIMIT_RANDS")))&&r.$raise(w(v,"TooManyRandsError")),t=r.$random(e),r.rand_results["$<<"]([t,e]),t},m.$$arity=1),e.def(b,"$random",y=function(e){return r(w(v,"Kernel").$rand(e),1)},y.$$arity=1),e.def(b,"$push_to_detail",h=function(e,t,r){var n;return n=w(v,"DetailedRandResult").$new(e,t,r),this.detailed_rand_results.$push(n)},h.$$arity=3),void function(e,t,r){[T(e,t,"TooManyRandsError")].concat(r)}(g[0],w(g,"StandardError"),g)},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var t,r,n,i,a,$,o,c,u,s,_,l=[],d=e.nil,f=e.$$,p=e.module,m=e.klass,y=e.truthy;return t=l,r=_=[p(l[0],"BCDice")].concat(t),n=s=[p(_[0],"DiceTable")].concat(r),c=m(s[0],null,"RollResult"),u=[c].concat(n),c.$$prototype.table_name=c.$$prototype.value=c.$$prototype.body=d,e.def(c,"$initialize",i=function(e,t,r){var n=this;return n.table_name=e,n.value=t,n.body=r},i.$$arity=3),c.$attr_reader("table_name"),c.$attr_reader("value"),c.$attr_reader("body"),e.def(c,"$to_s",a=function(){var e=this;return e.table_name+"("+e.value+") \uff1e "+e.body},a.$$arity=0),e.def(c,"$last_body",$=function(){var e=this;return y(e.body["$is_a?"](f(u,"RollResult")))?e.body.$last_body():e.body},$.$$arity=0),void e.def(c,"$empty?",o=function(){return!1},o.$$arity=0)},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var t,r,n,i,a,$,o,c,u,s=[],_=e.nil,l=e.$$,d=e.module,f=e.klass,p=e.truthy;return t=s,r=u=[d(s[0],"BCDice")].concat(t),n=c=[d(u[0],"DiceTable")].concat(r),$=f(c[0],null,"ChainTable"),o=[$].concat(n),$.$$prototype.times=$.$$prototype.sides=$.$$prototype.items=$.$$prototype.name=_,e.def($,"$initialize",i=function(e,t,r){var n=this,i=_;return n.name=e,n.items=r.$freeze(),i=/(\d+)D(\d+)/i.$match(t),p(i)||n.$raise(l(o,"ArgumentError"),"Unexpected table type: "+t),n.times=i["$[]"](1).$to_i(),n.sides=i["$[]"](2).$to_i()},i.$$arity=3),void e.def($,"$roll",a=function(e){var t,r,n=this,i=_;return r=function(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}(t=e.$roll_sum(n.times,n.sides),n.times),i=n.items["$[]"](r),p(i["$respond_to?"]("roll"))&&(i=i.$roll(e)),l(o,"RollResult").$new(n.name,t,i)},a.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var r,n,i,a,$,o,c,u,s,_,l=[],d=e.nil,f=e.$$,p=e.module,m=e.klass,y=e.hash2;return r=l,n=_=[p(l[0],"BCDice")].concat(r),i=s=[p(_[0],"DiceTable")].concat(n),c=m(s[0],null,"D66GridTable"),u=[c].concat(i),c.$$prototype.name=c.$$prototype.items=d,e.defs(c,"$from_i18n",a=function(e,t){var r=d;return r=f(u,"I18n").$t(e,y(["locale","raise"],{locale:t,raise:!0})),this.$new(r["$[]"]("name"),r["$[]"]("items"))},a.$$arity=2),e.def(c,"$initialize",$=function(e,t){return this.name=e,this.items=t.$freeze()},$.$$arity=2),void e.def(c,"$roll",o=function(e){var r,n,i,a,$,o;return r=e.$roll_once(6),n=e.$roll_once(6),i=function(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}("number"==typeof(o=r)?10*o:o["$*"](10),n),a=t(r,1),$=t(n,1),f(u,"RollResult").$new(this.name,i,this.items["$[]"](a)["$[]"]($))},o.$$arity=1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var t,r,n,i,a,$,o,c,u,s=[],_=e.nil,l=e.$$,d=e.module,f=e.klass,p=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),t=s,r=u=[d(s[0],"BCDice")].concat(t),n=c=[d(u[0],"DiceTable")].concat(r),$=f(c[0],l(c,"D66GridTable"),"D66HalfGridTable"),o=[$].concat(n),e.defs($,"$from_i18n",i=function(e,t){var r=_;return r=l(o,"I18n").$t(e,p(["locale","raise"],{locale:t,raise:!0})),this.$new(r["$[]"]("name"),r["$[]"]("items_1_2_3"),r["$[]"]("items_4_5_6"))},i.$$arity=2),void e.def($,"$initialize",a=function(e,t,r){return this.name=e,this.items=[t,t,t,r,r,r].$freeze()},a.$$arity=3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var t,r,n,i,a,$,o,c,u,s=[],_=e.nil,l=e.$$,d=e.module,f=e.klass,p=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),t=s,r=u=[d(s[0],"BCDice")].concat(t),n=c=[d(u[0],"DiceTable")].concat(r),$=f(c[0],l(c,"D66GridTable"),"D66OneThirdTable"),o=[$].concat(n),e.defs($,"$from_i18n",i=function(e,t){var r=_;return r=l(o,"I18n").$t(e,p(["locale","raise"],{locale:t,raise:!0})),this.$new(r["$[]"]("name"),r["$[]"]("items_1_2"),r["$[]"]("items_3_4"),r["$[]"]("items_5_6"))},i.$$arity=2),void e.def($,"$initialize",a=function(e,t,r,n){return this.name=e,this.items=[t,t,r,r,n,n].$freeze()},a.$$arity=4)},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var t,r,n,i,a,$,o,c,u,s,_,l=[],d=e.nil,f=e.$$$,p=e.$$,m=e.module,y=e.klass,h=e.hash2,b=e.truthy;return t=l,r=_=[m(l[0],"BCDice")].concat(t),n=s=[m(_[0],"DiceTable")].concat(r),c=y(s[0],null,"D66Table"),u=[c].concat(n),c.$$prototype.sort_type=c.$$prototype.items=c.$$prototype.name=d,e.defs(c,"$from_i18n",i=function(e,t){var r,n=d;return n=p(u,"I18n").$t(e,h(["locale"],{locale:t})),r=p(u,"D66SortType").$const_get(n["$[]"]("d66_sort_type")),this.$new(n["$[]"]("name"),r,n["$[]"]("items"))},i.$$arity=2),e.def(c,"$initialize",a=function(e,t,r){var n=this;return n.name=e,n.sort_type=t,n.items=r.$freeze()},a.$$arity=3),e.def(c,"$roll",$=function(e){var t,r,n,i=this,a=d,$=d,o=d;return a=e.$roll_barabara(2,6),t=i.sort_type,f(p(u,"D66SortType"),"ASC")["$==="](t)?a["$sort!"]():f(p(u,"D66SortType"),"DESC")["$==="](t)&&a["$sort!"]()["$reverse!"](),$=function(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}("number"==typeof(n=a["$[]"](0))?10*n:n["$*"](10),a["$[]"](1)),o=b(r=i.items["$[]"]($))?r:i.items["$[]"]($.$to_s()),b(o["$respond_to?"]("roll"))&&(o=o.$roll(e)),p(u,"RollResult").$new(i.name,$,o)},$.$$arity=1),void e.def(c,"$choice",o=function(e){return p(u,"RollResult").$new(this.name,e,this.items["$[]"](e))},o.$$arity=1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}var r,n,i,a,$,o,c,u=[],s=e.nil,_=e.$$,l=e.module,d=e.klass,f=e.hash2,p=e.send,m=e.send2;return e.top.$require("bcdice/dice_table/d66_table"),r=u,$=c=[l(u[0],"BCDice")].concat(r),n=o=[l(c[0],"DiceTable")].concat($),[a=d(o[0],_(o,"D66Table"),"D66LeftRangeTable")].concat(n),void e.def(a,"$initialize",i=function(r,n,a){var $,o,c=this;return i.$$p&&(i.$$p=null),o=f([],{}),p(a,"each",[],(($=function(r){var n,i,a,c=null==$.$$s?this:$.$$s;return null==r&&(r=s),n=e.to_ary(r),a=null==n[1]?s:n[1],p(null==n[0]?s:n[0],"each",[],((i=function(r){var n;return null==r&&(r=s),p(a,"each_with_index",[],((n=function(n,i){var a,$,c;return null==n&&(n=s),null==i&&(i=s),a=t("number"==typeof(c=r)?10*c:c["$*"](10),t(i,1)),p(o,"[]=",e.to_a($=[a,n])),$[function(e,t){return"number"==typeof e?e-1:e["$-"](1)}($.length)]}).$$s=null==i.$$s?this:i.$$s,n.$$arity=2,n))}).$$s=c,i.$$arity=1,i))}).$$s=c,$.$$arity=1,$)),m(c,e.find_super_dispatcher(c,"initialize",i,!1,!0),"initialize",[r,n,o],null)},i.$$arity=3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var t,r,n,i,a,$,o,c,u,s=[],_=e.nil,l=e.$$,d=e.module,f=e.klass,p=e.truthy;return t=s,r=u=[d(s[0],"BCDice")].concat(t),n=c=[d(u[0],"DiceTable")].concat(r),$=f(c[0],null,"D66ParityTable"),o=[$].concat(n),$.$$prototype.odd=$.$$prototype.even=$.$$prototype.name=_,e.def($,"$initialize",i=function(e,t,r){var n=this;return n.name=e,n.odd=t.$freeze(),n.even=r.$freeze()},i.$$arity=3),void e.def($,"$roll",a=function(e){var t,r,n,i,a=this,$=_;return $=e.$roll_once(6),t=e.$roll_once(6),r=(p($["$odd?"]())?a.odd:a.even)["$[]"]("number"==typeof(i=t)?i-1:i["$-"](1)),n=function(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}(function(e,t){return"number"==typeof e?10*e:e["$*"](10)}($),t),l(o,"RollResult").$new(a.name,n,r)},a.$$arity=1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var t,r,n,i,a,$,o,c,u,s=[],_=e.nil,l=e.$$,d=e.module,f=e.klass,p=e.send;return t=s,r=u=[d(s[0],"BCDice")].concat(t),n=c=[d(u[0],"DiceTable")].concat(r),$=f(c[0],null,"D66RangeTable"),o=[$].concat(n),$.$$prototype.items=$.$$prototype.name=_,e.def($,"$initialize",i=function(e,t){return this.name=e,this.items=t.$freeze()},i.$$arity=2),void e.def($,"$roll",a=function(e){var t,r,n,i,a,$=this,c=_;return r=e.$roll_once(6),n=e.$roll_once(6),i=function(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}("number"==typeof(a=r)?10*a:a["$*"](10),n),c=p($.items,"find",[],((t=function(e){return null==e&&(e=_),e["$[]"](0)["$include?"](i)}).$$s=$,t.$$arity=1,t)),l(o,"RollResult").$new($.name,i,c["$[]"](1))},a.$$arity=1)},Opal.modules["bcdice/dice_table/range_table"]=function(e){var t,r,n,i,a,$,o,c,u,s,_,l,d,f,p,m,y=[],h=e.nil,b=e.$$,v=e.module,g=e.klass,x=e.send,R=e.truthy;return t=y,r=m=[v(y[0],"BCDice")].concat(t),n=p=[v(m[0],"DiceTable")].concat(r),d=g(p[0],null,"RangeTable"),f=[d].concat(n),d.$$prototype.name=d.$$prototype.items=d.$$prototype.num_of_dice=d.$$prototype.num_of_sides=d.$$prototype.formatter=h,e.const_set(f[0],"RollResult",x(b(f,"Struct"),"new",["sum","values","content","formatted"],((i=function(){return(null==i.$$s?this:i.$$s).$alias_method("to_s","formatted")}).$$s=d,i.$$arity=0,i))),e.const_set(f[0],"Item",b(f,"Struct").$new("range","content")),e.const_set(f[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),e.const_set(f[0],"DEFAULT_FORMATTER",x(d,"lambda",[],($$2=function(e,t){return null==$$2.$$s||$$2,null==e&&(e=h),null==t&&(t=h),e.$name()+"("+t.$sum()+") \uff1e "+t.$content()},$$2.$$s=d,$$2.$$arity=2,$$2))),d.$attr_reader("name"),d.$attr_reader("num_of_dice"),d.$attr_reader("num_of_sides"),e.def(d,"$initialize",a=function(e,t,r){var n,i=a.$$p,$=i||h,o=this,c=h;return i&&(a.$$p=null),i&&(a.$$p=null),o.name=e.$freeze(),o.formatter=R(n=$)?n:b(f,"DEFAULT_FORMATTER"),c=b(f,"DICE_ROLL_METHOD_RE").$match(t),R(c)||o.$raise(b(f,"ArgumentError"),o.name+": invalid dice roll method: "+t),o.num_of_dice=c["$[]"](1).$to_i(),o.num_of_sides=c["$[]"](2).$to_i(),o.$store(r)},a.$$arity=3),e.def(d,"$fetch",$=function(e){var t,r,n=this;return r=x(n.items,"find",[],((t=function(t){return null==t&&(t=h),t.$range()["$include?"](e)}).$$s=n,t.$$arity=1,t)),R(r)||n.$raise(b(f,"RangeError"),n.name+": value is out of range: "+e),r},$.$$arity=1),e.def(d,"$roll",o=function(t){var r,n,i,a,$=this,o=h;return r=(o=t.$roll_barabara($.num_of_dice,$.num_of_sides)).$sum(),n=b(f,"RollResult").$new(r,o,$.$fetch(r).$content()),i=[$.formatter["$[]"]($,n)],x(n,"formatted=",e.to_a(i)),"number"==typeof(a=i.length)||a["$-"](1),n},o.$$arity=1),d.$private(),e.def(d,"$store",c=function(e){var t,r,n,i,a,$=this;return i=x(e,"map",[],((t=function(e,r){return null==e&&(e=h),null==r&&(r=h),[(null==t.$$s?this:t.$$s).$coerce_to_int_range(e),r]}).$$s=$,t.$$arity=2,t)),a=x(i,"sort_by",[],((r=function(e,t){return null==e&&(e=h),null==t&&(t=h),e.$min()}).$$s=$,r.$$arity=2,r)),$.$assert_min_sum_is_covered(a),$.$assert_max_sum_is_covered(a),$.$assert_no_gap_or_overlap_in_ranges(a),$.items=x(a,"map",[],(n=function(e,t){return null==e&&(e=h),null==t&&(t=h),b(f,"Item").$new(e,t.$freeze()).$freeze()},n.$$s=$,n.$$arity=2,n)).$freeze(),$},c.$$arity=1),e.def(d,"$coerce_to_int_range",u=function(e){var t,r=h;return t=e,b(f,"Integer")["$==="](t)?b(f,"Range").$new(e,e):b(f,"Range")["$==="](t)&&R(R(r=e.$begin()["$is_a?"](b(f,"Integer")))?e.$end()["$is_a?"](b(f,"Integer")):r)?e:this.$raise(b(f,"TypeError"),this.name+": "+e+" ("+e.$class()+") must be an Integer or a Range with Integers ")},u.$$arity=1),e.def(d,"$assert_min_sum_is_covered",s=function(e){var t,r=this,n=h;return t=r.num_of_dice,n=e.$first()["$[]"](0),R(n["$include?"](t))||r.$raise(b(f,"RangeError"),r.name+": min value ("+t+") is not covered: "+n),r},s.$$arity=1),e.def(d,"$assert_max_sum_is_covered",_=function(e){var t,r=this,n=h;return t=function(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}(r.num_of_dice,r.num_of_sides),n=e.$last()["$[]"](0),R(n["$include?"](t))||r.$raise(b(f,"RangeError"),r.name+": max value ("+t+") is not covered: "+n),r},_.$$arity=1),void e.def(d,"$assert_no_gap_or_overlap_in_ranges",l=function(e){var t;return x(e,"each_cons",[2],((t=function(e,r){var n,i,a,$=null==t.$$s?this:t.$$s,o=h,c=h;return null==$.name&&($.name=h),null==e&&(e=h),null==r&&(r=h),o=e["$[]"](0),c=r["$[]"](0),i="number"==typeof(a=n=o.$max())?a+1:a["$+"](1),R(c["$include?"](n))&&$.$raise(b(f,"RangeError"),$.name+": Range overlap: "+o+" and "+c),R(c["$include?"](i))?h:$.$raise(b(f,"RangeError"),$.name+": Range gap: "+o+" and "+c)}).$$s=this,t.$$arity=2,t)),this},l.$$arity=1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var t,r,n,i,a,$,o,c,u,s,_,l,d=[],f=e.nil,p=e.$$$,m=e.$$,y=e.module,h=e.klass,b=e.send;return t=d,r=l=[y(d[0],"BCDice")].concat(t),n=_=[y(l[0],"DiceTable")].concat(r),i=s=[h(_[0],null,"SaiFicSkillTable")].concat(n),c=h(s[0],null,"Category"),u=[c].concat(i),c.$$prototype.name=f,e.def(c,"$initialize",a=function(e,t,r,n){var i,a=this;return a.name=e,a.skills=b(t.$map(),"with_index",[2],((i=function(t,i){return null==t&&(t=f),null==i&&(i=f),p(m(u,"SaiFicSkillTable"),"Skill").$new(e,t,r,i,n)}).$$s=a,i.$$arity=2,i)),a.dice=r},a.$$arity=4),e.def(c,"$roll",$=function(e){return this.$skills()["$[]"]("number"==typeof(t=e.$roll_sum(2,6))?t-2:t["$-"](2));var t},$.$$arity=1),e.def(c,"$to_s",o=function(){return this.name},o.$$arity=0),void c.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var t,r,n,i,a,$,o,c,u,s,_=[],l=e.nil,d=e.module,f=e.klass,p=e.hash2;return t=_,r=s=[d(_[0],"BCDice")].concat(t),o=u=[d(s[0],"DiceTable")].concat(r),n=c=[f(u[0],null,"SaiFicSkillTable")].concat(o),[$=f(c[0],null,"Skill")].concat(n),$.$$prototype.s_format=$.$$prototype.category_dice=$.$$prototype.row_dice=$.$$prototype.category_name=$.$$prototype.name=l,e.def($,"$initialize",i=function(e,t,r,n,i){var a=this;return a.category_name=e,a.name=t,a.category_dice=r,a.row_dice=n,a.s_format=i},i.$$arity=5),e.def($,"$to_s",a=function(){var e=this;return e.$format(e.s_format,p(["category_dice","row_dice","category_name","skill_name"],{category_dice:e.category_dice,row_dice:e.row_dice,category_name:e.category_name,skill_name:e.name}))},a.$$arity=0),void $.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var t,r,n,i,a,$,o,c,u,s,_,l,d,f,p=e.top,m=[],y=e.nil,h=e.$$$,b=e.$$,v=e.module,g=e.klass,x=e.hash2,R=e.send,k=e.truthy;return p.$require("bcdice/dice_table/sai_fic_skill_table/category"),p.$require("bcdice/dice_table/sai_fic_skill_table/skill"),t=m,r=f=[v(m[0],"BCDice")].concat(t),n=d=[v(f[0],"DiceTable")].concat(r),_=g(d[0],null,"SaiFicSkillTable"),l=[_].concat(n),_.$$prototype.rtt=_.$$prototype.rtt_format=_.$$prototype.rct=_.$$prototype.rct_format=_.$$prototype.rttn=_.$$prototype.rttn_format=_.$$prototype.categories=y,e.defs(_,"$from_i18n",i=function(t,r,n){var i,a,$,o,c,u=y;if(null==n)n=x([],{});else if(!n.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(i=n.$$smap.rtt)&&(i=y),null==(a=n.$$smap.rct)&&(a=y),null==($=n.$$smap.rttn)&&($=y),c=(u=b(l,"I18n").$t("RTT",x(["locale","raise","default"],{locale:r,raise:!1,default:x([],{})})).$merge(b(l,"I18n").$t(t,x(["locale","raise"],{locale:r,raise:!0}))))["$[]"]("items"),u=R(u,"select",[],((o=function(e,t){return null==e&&(e=y),null==t&&(t=y),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](e)}).$$s=this,o.$$arity=2,o)),this.$new(c,e.to_hash(u).$merge(x(["rtt","rct","rttn"],{rtt:i,rct:a,rttn:$})))},i.$$arity=-3),e.const_set(l[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),e.const_set(l[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),e.const_set(l[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),e.const_set(l[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),e.def(_,"$initialize",a=function(t,r){var n,i,a,$,o,c,u,s,_=this;if(null==r)r=x([],{});else if(!r.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(n=r.$$smap.rtt)&&(n=y),null==(i=r.$$smap.rct)&&(i=y),null==(a=r.$$smap.rttn)&&(a=y),null==($=r.$$smap.rtt_format)&&($=b(l,"DEFAULT_RTT")),null==(o=r.$$smap.rct_format)&&(o=b(l,"DEFAULT_RCT")),null==(c=r.$$smap.rttn_format)&&(c=b(l,"DEFAULT_RTTN")),null==(u=r.$$smap.s_format)&&(u=b(l,"DEFAULT_S")),_.categories=R(t.$map(),"with_index",[1],((s=function(t,r){var n,i,a;return null==t&&(t=y),null==r&&(r=y),i=null==(n=e.to_ary(t))[0]?y:n[0],a=null==n[1]?y:n[1],h(b(l,"SaiFicSkillTable"),"Category").$new(i,a,r,u)}).$$s=_,s.$$arity=2,s.$$has_top_level_mlhs_arg=!0,s)),_.rtt=n,_.rct=i,_.rttn=a.$to_a(),_.rtt_format=$,_.rct_format=o,_.rttn_format=c},a.$$arity=-2),e.const_set(l[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),_.$attr_reader("categories"),e.def(_,"$roll_command",$=function(e,t){var r,n=this,i=y,a=y,$=y;return k(["RTT",n.rtt]["$include?"](r=t))?n.$format_skill(n.rtt_format,n.$roll_skill(e)):k(["RCT",n.rct]["$include?"](r))?(i=n.$roll_category(e),n.$format(n.rct_format,x(["category_dice","category_name"],{category_dice:i.$dice(),category_name:i.$name()}))):k(k(a=$=b(l,"RTTN").$index(r))?a:$=n.rttn.$index(r))?n.$format_skill(n.rttn_format,n.categories["$[]"]($).$roll(e)):y},$.$$arity=2),e.def(_,"$roll_category",o=function(e){return this.categories["$[]"]("number"==typeof(t=e.$roll_once(6))?t-1:t["$-"](1));var t},o.$$arity=1),e.def(_,"$roll_skill",c=function(e){return this.$roll_category(e).$roll(e)},c.$$arity=1),e.def(_,"$prefixes",u=function(){var e=this;return function(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}(["RTT[1-6]?","RCT",e.rtt,e.rct],e.rttn).$compact()},u.$$arity=0),_.$private(),void e.def(_,"$format_skill",s=function(e,t){return this.$format(e,x(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:t.$category_dice(),row_dice:t.$row_dice(),category_name:t.$category_name(),skill_name:t.$name(),text:t.$to_s()}))},s.$$arity=2)},Opal.modules["bcdice/dice_table/table"]=function(e){var t,r,n,i,a,$,o,c,u,s,_,l=[],d=e.nil,f=e.$$,p=e.module,m=e.klass,y=e.hash2,h=e.truthy;return t=l,r=_=[p(l[0],"BCDice")].concat(t),n=s=[p(_[0],"DiceTable")].concat(r),c=m(s[0],null,"Table"),u=[c].concat(n),c.$$prototype.times=c.$$prototype.sides=c.$$prototype.name=c.$$prototype.items=d,e.defs(c,"$from_i18n",i=function(e,t){var r=d;return r=f(u,"I18n").$t(e,y(["locale"],{locale:t})),this.$new(r["$[]"]("name"),r["$[]"]("type"),r["$[]"]("items"))},i.$$arity=2),e.def(c,"$initialize",a=function(e,t,r){var n=this,i=d;return n.name=e,n.items=r.$freeze(),i=/(\d+)D(\d+)/i.$match(t),h(i)||n.$raise(f(u,"ArgumentError"),"Unexpected table type: "+t),n.times=i["$[]"](1).$to_i(),n.sides=i["$[]"](2).$to_i()},a.$$arity=3),e.def(c,"$roll",$=function(e){var t,r=this;return t=e.$roll_sum(r.times,r.sides),r.$choice(t)},$.$$arity=1),void e.def(c,"$choice",o=function(e){var t,r=this;return t=function(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}(e,r.times),f(u,"RollResult").$new(r.name,e,r.items["$[]"](t))},o.$$arity=1)},Opal.modules["bcdice/dice_table"]=function(e){var t=e.top;return t.$require("bcdice/dice_table/roll_result"),t.$require("bcdice/dice_table/chain_table"),t.$require("bcdice/dice_table/d66_grid_table"),t.$require("bcdice/dice_table/d66_half_grid_table"),t.$require("bcdice/dice_table/d66_one_third_table"),t.$require("bcdice/dice_table/d66_left_range_table"),t.$require("bcdice/dice_table/d66_parity_table"),t.$require("bcdice/dice_table/d66_range_table"),t.$require("bcdice/dice_table/d66_table"),t.$require("bcdice/dice_table/range_table"),t.$require("bcdice/dice_table/sai_fic_skill_table"),t.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var t,r,n,i,a=[],$=e.module;return t=a,r=i=[$(a[0],"BCDice")].concat(t),n=[$(i[0],"D66SortType")].concat(r),e.const_set(n[0],"NO_SORT","no_sort"),e.const_set(n[0],"ASC","asc"),e.const_set(n[0],"DESC","desc"),void function(t,r){var n=[$(t,"RoundType")].concat(r);e.const_set(n[0],"CEIL","ceil"),e.const_set(n[0],"FLOOR","floor"),e.const_set(n[0],"ROUND","round")}(i[0],i)},Opal.modules["bcdice/translate"]=function(e){var t,r,n,i,a,$,o=[],c=e.nil,u=e.$$,s=e.module,_=e.hash2;return t=o,r=$=[s(o[0],"BCDice")].concat(t),i=s($[0],"Translate"),a=[i].concat(r),void e.def(i,"$translate",n=function(t,r){var n,i=this;if(null==i.locale&&(i.locale=c),null==r)r=_([],{});else if(!r.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return n=e.kwrestargs(r,{}),u(a,"I18n").$translate(t,_(["locale","raise"],{locale:i.locale,raise:!0}).$merge(e.to_hash(n)))},n.$$arity=-2)},Opal.modules["bcdice/result"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var r,n,i,a,$,o,c,u,s,_,l,d,f,p,m,y,h,b,v=[],g=e.nil,x=e.klass,R=e.send;return r=v,u=b=[(0,e.module)(v[0],"BCDice")].concat(r),h=[y=x(b[0],null,"Result")].concat(u),y.$$prototype.secret=y.$$prototype.success=y.$$prototype.failure=y.$$prototype.critical=y.$$prototype.fumble=g,[n=e.get_singleton_class(y)].concat(h),e.def(n,"$success",i=function(r){var n;return R(this.$new(),"tap",[],((n=function(n){var i=g;return null==n&&(n=g),R(n,"text=",e.to_a(i=[r])),t(i.length,1),R(n,"success=",e.to_a(i=[!0])),i[t(i.length,1)]}).$$s=this,n.$$arity=1,n))},i.$$arity=1),e.def(n,"$failure",a=function(r){var n;return R(this.$new(),"tap",[],((n=function(n){var i=g;return null==n&&(n=g),R(n,"text=",e.to_a(i=[r])),t(i.length,1),R(n,"failure=",e.to_a(i=[!0])),i[t(i.length,1)]}).$$s=this,n.$$arity=1,n))},a.$$arity=1),e.def(n,"$critical",$=function(r){var n;return R(this.$new(),"tap",[],((n=function(n){var i=g;return null==n&&(n=g),R(n,"text=",e.to_a(i=[r])),t(i.length,1),R(n,"critical=",e.to_a(i=[!0])),t(i.length,1),R(n,"success=",e.to_a(i=[!0])),i[t(i.length,1)]}).$$s=this,n.$$arity=1,n))},$.$$arity=1),e.def(n,"$fumble",o=function(r){var n;return R(this.$new(),"tap",[],((n=function(n){var i=g;return null==n&&(n=g),R(n,"text=",e.to_a(i=[r])),t(i.length,1),R(n,"fumble=",e.to_a(i=[!0])),t(i.length,1),R(n,"failure=",e.to_a(i=[!0])),i[t(i.length,1)]}).$$s=this,n.$$arity=1,n))},o.$$arity=1),e.def(n,"$nothing",c=function(){return"nothing"},c.$$arity=0),e.def(y,"$initialize",s=function(e){var t=this;return null==e&&(e=g),t.text=e,t.rands=g,t.detailed_rands=g,t.secret=!1,t.success=!1,t.failure=!1,t.critical=!1,t.fumble=!1},s.$$arity=-1),y.$attr_accessor("text","rands","detailed_rands"),y.$attr_writer("secret","success","failure","critical","fumble"),e.def(y,"$secret?",_=function(){return this.secret},_.$$arity=0),e.def(y,"$success?",l=function(){return this.success},l.$$arity=0),e.def(y,"$failure?",d=function(){return this.failure},d.$$arity=0),e.def(y,"$critical?",f=function(){return this.critical},f.$$arity=0),e.def(y,"$fumble?",p=function(){return this.fumble},p.$$arity=0),void e.def(y,"$condition=",m=function(e){return this.success=e,this.failure=e["$!"]()},m.$$arity=1)},Opal.modules["racc/parser"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}var o,c,u,s,_,l=[],d=e.nil,f=e.$$$,p=e.$$,m=e.module,y=e.klass,h=e.truthy,b=e.gvars,v=e.send;return s=l,o=(_=[m(l[0],"Racc")].concat(s))[0],c=p(_,"StandardError"),u=_,[y(o,c,"ParseError")].concat(u),h(f("::","ParseError","skip_raise")?"constant":d)||e.const_set(l[0],"ParseError",f(p(l,"Racc"),"ParseError")),function(o,c){var u,s,_,l,g,x,R,k,w,T,D,E,S,A,P,N,z,O,C,I,L,B,q,M,U,F,K,H=[m(o,"Racc")].concat(c);h(p(H,"Racc_No_Extensions","skip_raise")?"constant":d)||e.const_set(H[0],"Racc_No_Extensions",!1),u=H,F=y(H[0],null,"Parser"),K=[F].concat(u),F.$$prototype.yydebug=F.$$prototype.racc_debug_out=F.$$prototype.racc_error_status=F.$$prototype.racc_t=F.$$prototype.racc_vstack=F.$$prototype.racc_val=F.$$prototype.racc_state=F.$$prototype.racc_tstack=d,e.const_set(K[0],"Racc_Runtime_Version","1.4.6"),e.const_set(K[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),e.const_set(K[0],"Racc_Runtime_Core_Version_R","1.4.6"),e.const_set(K[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),e.const_set(K[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),e.const_set(K[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),e.const_set(K[0],"Racc_Runtime_Core_Version",p(K,"Racc_Runtime_Core_Version_R")),e.const_set(K[0],"Racc_Runtime_Core_Revision",p(K,"Racc_Runtime_Core_Revision_R")),e.const_set(K[0],"Racc_Runtime_Type","ruby"),e.defs(p(K,"Parser"),"$racc_runtime_type",s=function(){return p(K,"Racc_Runtime_Type")},s.$$arity=0),e.def(F,"$_racc_setup",_=function(){var n,i,a=this,$=d,o=d,c=d;return null==b.stderr&&(b.stderr=d),h(f(a.$class(),"Racc_debug_parser"))||(a.yydebug=!1),h(null!=(n=a.yydebug)&&n!==d?"instance-variable":d)||(a.yydebug=!1),h(a.yydebug)&&(h(null!=(i=a.racc_debug_out)&&i!==d?"instance-variable":d)||(a.racc_debug_out=b.stderr),a.racc_debug_out=h($=a.racc_debug_out)?$:b.stderr),o=f(a.$class(),"Racc_arg"),h(t(o.$size(),14))&&(v(o,"[]=",e.to_a(c=[13,!0])),r(c.length,1)),o},_.$$arity=0),e.def(F,"$_racc_init_sysvars",l=function(){var e=this;return e.racc_state=[0],e.racc_tstack=[],e.racc_vstack=[],e.racc_t=d,e.racc_val=d,e.racc_read_next=!0,e.racc_user_yyerror=!1,e.racc_error_status=0},l.$$arity=0),e.def(F,"$do_parse",g=function(){return this.$__send__(p(K,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},g.$$arity=0),e.def(F,"$next_token",x=function(){return this.$raise(p(K,"NotImplementedError"),this.$class()+"#next_token is not defined")},x.$$arity=0),e.def(F,"$_racc_do_parse_rb",R=function(t,r){var a,$,o=this,c=d,u=d,s=d,_=d,l=d,f=d,p=d,m=d;return a=e.to_ary(t),c=null==a[0]?d:a[0],u=null==a[1]?d:a[1],s=null==a[2]?d:a[2],_=null==a[3]?d:a[3],l=null==a[10]?d:a[10],o.$_racc_init_sysvars(),f=p=m=d,v(o,"catch",["racc_end_parse"],(($=function(){var r,a,o=null==$.$$s?this:$.$$s,y=d,b=d,v=d;for(null==o.racc_state&&(o.racc_state=d),null==o.racc_read_next&&(o.racc_read_next=d),null==o.racc_t&&(o.racc_t=d),null==o.yydebug&&(o.yydebug=d),null==o.racc_val&&(o.racc_val=d);h(!0);)for(h(m=_["$[]"](o.racc_state["$[]"](-1)))?(h(o.racc_read_next)&&h(o.racc_t["$!="](0))&&(a=o.$next_token(),r=e.to_ary(a),f=null==r[0]?d:r[0],o.racc_val=null==r[1]?d:r[1],o.racc_t=h(f)?h(y=l["$[]"](f))?y:1:0,h(o.yydebug)&&o.$racc_read_token(o.racc_t,f,o.racc_val),o.racc_read_next=!1),m=n(m,o.racc_t),h(h(b=h(v=i(m,0))?p=c["$[]"](m):v)?u["$[]"](m)["$=="](o.racc_state["$[]"](-1)):b)||(p=s["$[]"](o.racc_state["$[]"](-1)))):p=s["$[]"](o.racc_state["$[]"](-1));h(p=o.$_racc_evalact(p,t)););}).$$s=o,$.$$arity=0,$))},R.$$arity=2),e.def(F,"$yyparse",k=function(e,t){return this.$__send__(p(K,"Racc_YY_Parse_Method"),e,t,this.$_racc_setup(),!0)},k.$$arity=2),e.def(F,"$_racc_yyparse_rb",w=function(t,r,a,$){var o,c,u=d,s=d,_=d,l=d,f=d,p=d,m=d;return o=e.to_ary(a),u=null==o[0]?d:o[0],s=null==o[1]?d:o[1],_=null==o[2]?d:o[2],l=null==o[3]?d:o[3],f=null==o[10]?d:o[10],this.$_racc_init_sysvars(),p=d,m=d,v(this,"catch",["racc_end_parse"],((c=function(){var e,$=null==c.$$s?this:c.$$s;for(null==$.racc_state&&($.racc_state=d);!h(m=l["$[]"]($.racc_state["$[]"](-1)));)for(;h(p=$.$_racc_evalact(_["$[]"]($.racc_state["$[]"](-1)),a)););return v(t,"__send__",[r],((e=function(t,r){var $,o,c=null==e.$$s?this:e.$$s,y=d,b=d,v=d,g=d,x=d,R=d,k=d;for(null==c.racc_t&&(c.racc_t=d),null==c.racc_state&&(c.racc_state=d),null==c.racc_read_next&&(c.racc_read_next=d),null==t&&(t=d),null==r&&(r=d),c.racc_t=h(t)?h(y=f["$[]"](t))?y:1:0,c.racc_val=r,c.racc_read_next=!1,m=n(m,c.racc_t),h(h($=h(o=i(m,0))?p=u["$[]"](m):o)?s["$[]"](m)["$=="](c.racc_state["$[]"](-1)):$)||(p=_["$[]"](c.racc_state["$[]"](-1)));h(p=c.$_racc_evalact(p,a)););for(;h(h(b=h(v=(m=l["$[]"](c.racc_state["$[]"](-1)))["$!"]())?v:c.racc_read_next["$!"]())?b:c.racc_t["$=="](0));)for(h(h(g=h(x=h(R=h(k=m)?m=n(m,c.racc_t):k)?i(m,0):R)?p=u["$[]"](m):x)?s["$[]"](m)["$=="](c.racc_state["$[]"](-1)):g)||(p=_["$[]"](c.racc_state["$[]"](-1)));h(p=c.$_racc_evalact(p,a)););}).$$s=$,e.$$arity=2,e))}).$$s=this,c.$$arity=0,c))},w.$$arity=4),e.def(F,"$_racc_evalact",T=function(o,c){var u,s,_,l,f=this,p=d,m=d,y=d,b=d,g=d,x=d,R=d,k=d,w=d,T=d;if(p=null==(u=e.to_ary(c))[0]?d:u[0],m=null==u[1]?d:u[1],y=null==u[3]?d:u[3],_=null==u[11]?d:u[11],b=null==u[12]?d:u[12],h(h(l=a(o,0))?t(o,_):l))h(a(f.racc_error_status,0))&&(f.racc_t["$=="](1)||(f.racc_error_status=r(f.racc_error_status,1))),f.racc_vstack.$push(f.racc_val),f.racc_state.$push(o),f.racc_read_next=!0,h(f.yydebug)&&(f.racc_tstack.$push(f.racc_t),f.$racc_shift(f.racc_t,f.racc_tstack,f.racc_vstack));else if(h(h(g=t(o,0))?a(o,b["$-@"]()):g)){if(x=v(f,"catch",["racc_jump"],((s=function(){var e=null==s.$$s?this:s.$$s;return null==e.racc_state&&(e.racc_state=d),e.racc_state.$push(e.$_racc_do_reduce(c,o)),!1}).$$s=f,s.$$arity=0,s)),h(x)){if(1["$==="](R=x))return f.racc_user_yyerror=!0,b["$-@"]();if(2["$==="](R))return _;f.$raise("[Racc Bug] unknown jump code")}}else if(o["$=="](_))h(f.yydebug)&&f.$racc_accept(),f.$throw("racc_end_parse",f.racc_vstack["$[]"](0));else{if(o["$=="](b["$-@"]())){for((0)["$==="](R=f.racc_error_status)?h(c["$[]"](21))||f.$on_error(f.racc_t,f.racc_val,f.racc_vstack):3["$==="](R)&&(f.racc_t["$=="](0)&&f.$throw("racc_end_parse",d),f.racc_read_next=!0),f.racc_user_yyerror=!1,f.racc_error_status=3;h(!0)&&(!h(k=y["$[]"](f.racc_state["$[]"](-1)))||(k=n(k,1),!h(h(w=h(T=i(k,0))?o=p["$[]"](k):T)?m["$[]"](k)["$=="](f.racc_state["$[]"](-1)):w)));)h($(f.racc_state.$size(),1))&&f.$throw("racc_end_parse",d),f.racc_state.$pop(),f.racc_vstack.$pop(),h(f.yydebug)&&(f.racc_tstack.$pop(),f.$racc_e_pop(f.racc_state,f.racc_tstack,f.racc_vstack));return o}f.$raise("[Racc Bug] unknown action "+o.$inspect())}return h(f.yydebug)&&f.$racc_next_state(f.racc_state["$[]"](-1),f.racc_state),d},T.$$arity=2),e.def(F,"$_racc_do_reduce",D=function(t,a){var $,o,c,u,s,_,l,f=this,p=d,m=d,y=d,b=d,g=d,x=d,R=d,k=d,w=d,T=d,D=d,E=d,S=d,A=d,P=d,N=d;return p=null==($=e.to_ary(t))[4]?d:$[4],m=null==$[5]?d:$[5],y=null==$[6]?d:$[6],b=null==$[7]?d:$[7],o=null==$[8]?d:$[8],g=null==$[9]?d:$[9],c=null==$[13]?d:$[13],x=f.racc_state,R=f.racc_vstack,k=f.racc_tstack,w=function(e,t){return"number"==typeof e?-3*e:e["$*"](-3)}(a),T=g["$[]"](w),u=g["$[]"](n(w,1)),s=g["$[]"](n(w,2)),_=[],h(f.yydebug)&&(D=k["$[]"](T["$-@"](),T)),E=R["$[]"](T["$-@"](),T),h(f.yydebug)&&(S=[T["$-@"](),T,_],v(k,"[]=",e.to_a(S)),r(S.length,1)),S=[T["$-@"](),T,_],v(R,"[]=",e.to_a(S)),r(S.length,1),S=[T["$-@"](),T,_],v(x,"[]=",e.to_a(S)),r(S.length,1),h(c)?R.$push(f.$__send__(s,E,R,E["$[]"](0))):R.$push(f.$__send__(s,E,R)),k.$push(u),h(f.yydebug)&&f.$racc_reduce(D,u,k,R),l=r(u,o),h(w=b["$[]"](l))&&(w=n(w,x["$[]"](-1)),h(h(A=h(P=i(w,0))?N=p["$[]"](w):P)?m["$[]"](w)["$=="](l):A))?N:y["$[]"](l)},D.$$arity=2),e.def(F,"$on_error",E=function(e,t,r){var n,i=this;return i.$raise(p(K,"ParseError"),i.$sprintf("\nparse error on value %s (%s)",t.$inspect(),h(n=i.$token_to_str(e))?n:"?"))},E.$$arity=3),e.def(F,"$yyerror",S=function(){return this.$throw("racc_jump",1)},S.$$arity=0),e.def(F,"$yyaccept",A=function(){return this.$throw("racc_jump",2)},A.$$arity=0),e.def(F,"$yyerrok",P=function(){return this.racc_error_status=0},P.$$arity=0),e.def(F,"$racc_read_token",N=function(e,t,r){var n=this;return n.racc_debug_out.$print("read    "),n.racc_debug_out.$print(t.$inspect(),"(",n.$racc_token2str(e),") "),n.racc_debug_out.$puts(r.$inspect()),n.racc_debug_out.$puts()},N.$$arity=3),e.def(F,"$racc_shift",z=function(e,t,r){var n=this;return n.racc_debug_out.$puts("shift   "+n.$racc_token2str(e)),n.$racc_print_stacks(t,r),n.racc_debug_out.$puts()},z.$$arity=3),e.def(F,"$racc_reduce",O=function(e,t,r,n){var i,a=this,$=d;return($=a.racc_debug_out).$print("reduce "),h(e["$empty?"]())?$.$print(" <none>"):v(e,"each",[],((i=function(e){return null==e&&(e=d),$.$print(" ",(null==i.$$s?this:i.$$s).$racc_token2str(e))}).$$s=a,i.$$arity=1,i)),$.$puts(" --\x3e "+a.$racc_token2str(t)),a.$racc_print_stacks(r,n),a.racc_debug_out.$puts()},O.$$arity=4),e.def(F,"$racc_accept",C=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},C.$$arity=0),e.def(F,"$racc_e_pop",I=function(e,t,r){var n=this;return n.racc_debug_out.$puts("error recovering mode: pop token"),n.$racc_print_states(e),n.$racc_print_stacks(t,r),n.racc_debug_out.$puts()},I.$$arity=3),e.def(F,"$racc_next_state",L=function(e,t){var r=this;return r.racc_debug_out.$puts("goto    "+e),r.$racc_print_states(t),r.racc_debug_out.$puts()},L.$$arity=2),e.def(F,"$racc_print_stacks",B=function(e,t){var r,n=d;return(n=this.racc_debug_out).$print("        ["),v(e,"each_index",[],((r=function(i){return null==i&&(i=d),n.$print(" (",(null==r.$$s?this:r.$$s).$racc_token2str(e["$[]"](i))," ",t["$[]"](i).$inspect(),")")}).$$s=this,r.$$arity=1,r)),n.$puts(" ]")},B.$$arity=2),e.def(F,"$racc_print_states",q=function(e){var t,r=d;return(r=this.racc_debug_out).$print("        ["),v(e,"each",[],((t=function(e){return null==e&&(e=d),r.$print(" ",e)}).$$s=this,t.$$arity=1,t)),r.$puts(" ]")},q.$$arity=1),e.def(F,"$racc_token2str",M=function(e){var t;return h(t=f(this.$class(),"Racc_token_to_s_table")["$[]"](e))?t:this.$raise("[Racc Bug] can't convert token "+e+" to string")},M.$$arity=1),e.def(F,"$token_to_str",U=function(e){return f(this.$class(),"Racc_token_to_s_table")["$[]"](e)},U.$$arity=1)}(l[0],l)},Opal.modules["bcdice/arithmetic/node"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e/t:e["$/"](t)}var r,n,i,a,$,o,c,u,s,_,l,d,f,p,m,y,h,b=[],v=e.nil,g=e.$$$,x=e.$$,R=e.module,k=e.klass,w=e.send2;return r=b,n=h=[R(b[0],"BCDice")].concat(r),i=y=[R(h[0],"Arithmetic")].concat(n),function(t,r,n){var i,a,$,o,c,u=k(t,null,"BinaryOp");[u].concat(n),u.$$prototype.lhs=u.$$prototype.rhs=u.$$prototype.op=v,e.def(u,"$initialize",i=function(e,t,r){var n=this;return n.lhs=e,n.op=t,n.rhs=r},i.$$arity=3),e.def(u,"$eval",a=function(e){var t,r=this,n=v;return n=r.lhs.$eval(e),t=r.rhs.$eval(e),n.$send(r.op,t)},a.$$arity=1),e.def(u,"$output",$=function(){var e=this;return""+e.lhs.$output()+e.op+e.rhs.$output()},$.$$arity=0),e.def(u,"$s_exp",o=function(){var e=this;return"("+e.$op_for_s_exp()+" "+e.lhs.$s_exp()+" "+e.rhs.$s_exp()+")"},o.$$arity=0),e.def(u,"$op_for_s_exp",c=function(){return this.op},c.$$arity=0)}((m=[R(y[0],"Node")].concat(i))[0],0,m),a=m[0],$=x(m,"BinaryOp"),o=m,f=k(a,$,"DivideBase"),p=[f].concat(o),f.$$prototype.lhs=f.$$prototype.rhs=f.$$prototype.op=v,e.def(f,"$initialize",c=function(t,r){return c.$$p&&(c.$$p=null),w(this,e.find_super_dispatcher(this,"initialize",c,!1,!0),"initialize",[t,"/",r],null)},c.$$arity=2),e.def(f,"$eval",u=function(e){var t,r=this,n=v;return t=r.lhs.$eval(e),(n=r.rhs.$eval(e))["$=="](0)&&r.$raise(x(p,"ZeroDivisionError")),r.$divide_and_round(t,n,e)},u.$$arity=1),e.def(f,"$output",s=function(){var t=s.$$p,r=this,n=v,i=v,a=v;for(t&&(s.$$p=null),i=0,a=arguments.length,n=new Array(a);i<a;i++)n[i]=arguments[i];return""+w(r,e.find_super_dispatcher(r,"output",s,!1,!0),"output",n,t)+r.$rounding_method()},s.$$arity=0),f.$private(),e.def(f,"$rounding_method",_=function(){return g(this.$class(),"ROUNDING_METHOD")},_.$$arity=0),e.def(f,"$op_for_s_exp",l=function(){return""+this.op+this.$rounding_method()},l.$$arity=0),e.def(f,"$divide_and_round",d=function(e,t,r){return this.$raise(x(p,"NotImplementedError"))},d.$$arity=3),function(r,n,i){var a,$=k(r,n,"DivideWithGameSystemDefault"),o=[$].concat(i);e.const_set(o[0],"ROUNDING_METHOD",""),$.$private(),e.def($,"$divide_and_round",a=function(e,r,n){var i;return i=n,g(x(o,"RoundType"),"CEIL")["$==="](i)?t(e.$to_f(),r).$ceil():g(x(o,"RoundType"),"ROUND")["$==="](i)?t(e.$to_f(),r).$round():t(e,r).$to_i()},a.$$arity=3)}(m[0],x(m,"DivideBase"),m),function(r,n,i){var a,$=k(r,n,"DivideWithCeil"),o=[$].concat(i);e.const_set(o[0],"ROUNDING_METHOD","C"),$.$private(),e.def($,"$divide_and_round",a=function(e,r,n){return t(e.$to_f(),r).$ceil()},a.$$arity=3)}(m[0],x(m,"DivideBase"),m),function(r,n,i){var a,$=k(r,n,"DivideWithRound"),o=[$].concat(i);e.const_set(o[0],"ROUNDING_METHOD","R"),$.$private(),e.def($,"$divide_and_round",a=function(e,r,n){return t(e.$to_f(),r).$round()},a.$$arity=3)}(m[0],x(m,"DivideBase"),m),function(r,n,i){var a,$=k(r,n,"DivideWithFloor"),o=[$].concat(i);e.const_set(o[0],"ROUNDING_METHOD","F"),$.$private(),e.def($,"$divide_and_round",a=function(e,r,n){return t(e,r).$to_i()},a.$$arity=3)}(m[0],x(m,"DivideBase"),m),function(t,r,n){var i,a,$,o,c=k(t,null,"Negative");[c].concat(n),c.$$prototype.body=v,e.def(c,"$initialize",i=function(e){return this.body=e},i.$$arity=1),e.def(c,"$eval",a=function(e){return this.body.$eval(e)["$-@"]()},a.$$arity=1),e.def(c,"$output",$=function(){return"-"+this.body.$output()},$.$$arity=0),e.def(c,"$s_exp",o=function(){return"(- "+this.body.$s_exp()+")"},o.$$arity=0)}(m[0],0,m),function(t,r,n){var i,a,$,o,c=k(t,null,"Parenthesis");[c].concat(n),c.$$prototype.expr=v,e.def(c,"$initialize",i=function(e){return this.expr=e},i.$$arity=1),e.def(c,"$eval",a=function(e){return this.expr.$eval(e)},a.$$arity=1),e.def(c,"$output",$=function(){return"("+this.expr.$output()+")"},$.$$arity=0),e.def(c,"$s_exp",o=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},o.$$arity=0)}(m[0],0,m),void function(t,r,n){var i,a,$,o=k(t,null,"Number");[o].concat(n),o.$$prototype.value=v,e.def(o,"$initialize",i=function(e){return this.value=e},i.$$arity=1),e.def(o,"$eval",a=function(e){return this.value},a.$$arity=1),e.def(o,"$output",$=function(){return this.value.$to_s()},$.$$arity=0),e.alias(o,"s_exp","output")}(m[0],0,m)},Opal.modules.strscan=function(e){var t,r,n,i,a,$,o,c,u,s,_,l,d,f,p,m,y,h,b,v,g,x,R,k,w,T,D,E,S=[],A=e.nil,P=e.$$,N=e.truthy,z=e.send;return t=S,D=(0,e.klass)(S[0],null,"StringScanner"),E=[D].concat(t),D.$$prototype.pos=D.$$prototype.string=D.$$prototype.working=D.$$prototype.matched=D.$$prototype.prev_pos=D.$$prototype.match=A,D.$attr_reader("pos"),D.$attr_reader("matched"),e.def(D,"$initialize",r=function(e){var t=this;return t.string=e,t.pos=0,t.matched=A,t.working=e,t.match=[]},r.$$arity=1),D.$attr_reader("string"),e.def(D,"$beginning_of_line?",n=function(){var e=this;return 0===e.pos||"\n"===e.string.charAt(e.pos-1)},n.$$arity=0),e.alias(D,"bol?","beginning_of_line?"),e.def(D,"$scan",i=function(e){var t=this,r=(e=t.$anchor(e)).exec(t.working);return null==r?t.matched=A:"object"==typeof r?(t.prev_pos=t.pos,t.pos+=r[0].length,t.working=t.working.substring(r[0].length),t.matched=r[0],t.match=r,r[0]):"string"==typeof r?(t.pos+=r.length,t.working=t.working.substring(r.length),r):A},i.$$arity=1),e.def(D,"$scan_until",a=function(e){var t=this;e=t.$anchor(e);for(var r,n=t.pos,i=t.working;;){if(r=e.exec(i),n+=1,i=i.substr(1),null!=r)return t.matched=t.string.substr(t.pos,n-t.pos-1+r[0].length),t.match=r,t.prev_pos=n-1,t.pos=n,t.working=i.substr(r[0].length),t.matched;if(0===i.length)return t.match=[],t.matched=A}},a.$$arity=1),e.def(D,"$[]",$=function(e){var t;if(N(this.match["$empty?"]()))return A;t=e,P(E,"Symbol")["$==="](t)?e=e.$to_s():P(E,"String")["$==="](t)||(e=P(E,"Opal")["$coerce_to!"](e,P(E,"Integer"),"to_int"));var r=this.match;return e<0&&(e+=r.length),e<0||e>=r.length||null==r[e]?A:r[e]},$.$$arity=1),e.def(D,"$check",o=function(e){var t=this,r=(e=t.$anchor(e)).exec(t.working);return t.matched=null==r?A:r[0]},o.$$arity=1),e.def(D,"$check_until",c=function(e){var t=this,r=t.prev_pos,n=t.pos,i=t.$scan_until(e);return i!==A&&(t.matched=i.substr(-1),t.working=t.string.substr(n)),t.prev_pos=r,t.pos=n,i},c.$$arity=1),e.def(D,"$peek",u=function(e){return this.working.substring(0,e)},u.$$arity=1),e.def(D,"$eos?",s=function(){return 0===this.working.length},s.$$arity=0),e.def(D,"$exist?",_=function(e){var t=e.exec(this.working);return null==t?A:0==t.index?0:t.index+1},_.$$arity=1),e.def(D,"$skip",l=function(e){var t=this,r=(e=t.$anchor(e)).exec(t.working);if(null==r)return t.match=[],t.matched=A;var n=r[0],i=n.length;return t.matched=n,t.match=r,t.prev_pos=t.pos,t.pos+=i,t.working=t.working.substring(i),i},l.$$arity=1),e.def(D,"$skip_until",d=function(e){var t=this.$scan_until(e);return t===A?A:(this.matched=t.substr(-1),t.length)},d.$$arity=1),e.def(D,"$get_byte",f=function(){var e=this,t=A;return e.pos<e.string.length?(e.prev_pos=e.pos,e.pos+=1,t=e.matched=e.working.substring(0,1),e.working=e.working.substring(1)):e.matched=A,t},f.$$arity=0),e.alias(D,"getch","get_byte"),e.def(D,"$match?",p=function(e){var t=this,r=(e=t.$anchor(e)).exec(t.working);return null==r?A:(t.prev_pos=t.pos,r[0].length)},p.$$arity=1),e.def(D,"$pos=",m=function(e){var t=this;return e<0&&(e+=t.string.$length()),t.pos=e,t.working=t.string.slice(e)},m.$$arity=1),e.def(D,"$matched_size",y=function(){return this.matched===A?A:this.matched.length},y.$$arity=0),e.def(D,"$post_match",h=function(){var e=this;return e.matched===A?A:e.string.substr(e.pos)},h.$$arity=0),e.def(D,"$pre_match",b=function(){var e=this;return e.matched===A?A:e.string.substr(0,e.prev_pos)},b.$$arity=0),e.def(D,"$reset",v=function(){var e=this;return e.working=e.string,e.matched=A,e.pos=0},v.$$arity=0),e.def(D,"$rest",g=function(){return this.working},g.$$arity=0),e.def(D,"$rest?",x=function(){return 0!==this.working.length},x.$$arity=0),e.def(D,"$rest_size",R=function(){return this.$rest().$size()},R.$$arity=0),e.def(D,"$terminate",k=function(){var t,r,n=this;return n.match=A,t=[n.string.$length()],z(n,"pos=",e.to_a(t)),t[(r=t.length,"number"==typeof r?r-1:r["$-"](1))]},k.$$arity=0),e.def(D,"$unscan",w=function(){var e=this;return e.pos=e.prev_pos,e.prev_pos=A,e.match=A,e},w.$$arity=0),D.$private(),e.def(D,"$anchor",T=function(e){var t=e.toString().match(/\/([^\/]+)$/);return t=t?t[1]:void 0,new RegExp("^(?:"+e.source+")",t)},T.$$arity=1),A&&"anchor"},Opal.modules["bcdice/normalize"]=function(e){var t,r,n,i,a,$,o=[],c=e.nil,u=e.module;return a=o,t=$=[u(o[0],"BCDice")].concat(a),[i=u($[0],"Normalize")].concat(t),i.$module_function(),e.def(i,"$comparison_operator",r=function(e){var t;return/<=|=</["$==="](t=e)?"<=":/>=|=>/["$==="](t)?">=":/<>|!=|=!/["$==="](t)?"!=":/</["$==="](t)?"<":/>/["$==="](t)?">":/=/["$==="](t)?"==":c},r.$$arity=1),void e.def(i,"$target_number",n=function(e){return e["$=="]("?")?e:e.$to_i()},n.$$arity=1)},Opal.modules["bcdice/command/lexer"]=function(e){var t,r,n,i,a,$,o,c,u,s,_=e.top,l=[],d=e.nil,f=e.$$,p=e.module,m=e.klass,y=e.hash2,h=e.truthy,b=e.send;return _.$require("strscan"),_.$require("bcdice/normalize"),t=l,r=s=[p(l[0],"BCDice")].concat(t),n=u=[p(s[0],"Command")].concat(r),o=m(u[0],null,"Lexer"),c=[o].concat(n),o.$$prototype.scanner=o.$$prototype.notations=d,e.const_set(c[0],"SYMBOLS",y(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),e.def(o,"$initialize",i=function(e,t){var r,n,i,a,$=this;return e=h(a=(n=(r=e)===d||null==r?d:b(r,"split",[" ",2]))===d||null==n?d:b(n,"first",[]))?a:"",$.scanner=f(c,"StringScanner").$new(e),$.notations=b(t,"map",[],((i=function(e){return null==e&&(e=d),h(e["$is_a?"](f(c,"String")))?f(c,"Regexp").$new(e):e}).$$s=$,i.$$arity=1,i))},i.$$arity=2),e.def(o,"$next_token",a=function(){try{var t,r=this,n=d,i=d,a=d,$=d;return h(r.scanner["$eos?"]())?[!1,"$"]:(b(r.notations,"each",[],((t=function(r){var n,i=null==t.$$s?this:t.$$s;if(null==i.scanner&&(i.scanner=d),null==r&&(r=d),n=i.scanner.$scan(r),!h(n))return d;e.ret(["NOTATION",n])}).$$s=r,t.$$arity=1,t)),h(n=r.scanner.$scan(/\d+/))?["NUMBER",n.$to_i()]:h(i=r.scanner.$scan(/[<>!=]+/))?(i=f(c,"Normalize").$comparison_operator(i),[h(i)?"CMP_OP":"ILLEGAL",i]):(a=r.scanner.$getch().$upcase(),[h($=f(c,"SYMBOLS")["$[]"](a))?$:a.$to_sym(),a]))}catch(o){if(o===e.returner)return o.$v;throw o}},a.$$arity=0),void e.def(o,"$source",$=function(){return this.scanner.$string()},$.$$arity=0)},Opal.modules["bcdice/command/parsed"]=function(e){var t,r,n,i,a,$,o,c,u,s,_=[],l=e.nil,d=e.$$,f=e.module,p=e.klass,m=e.truthy;return t=_,r=s=[f(_[0],"BCDice")].concat(t),n=u=[f(s[0],"Command")].concat(r),o=p(u[0],null,"Parsed"),c=[o].concat(n),o.$$prototype.question_target=o.$$prototype.critical=o.$$prototype.fumble=o.$$prototype.dollar=o.$$prototype.modify_number=o.$$prototype.target_number=o.$$prototype.prefix_number=o.$$prototype.command=o.$$prototype.suffix_number=o.$$prototype.cmp_op=l,o.$attr_accessor("command"),o.$attr_accessor("prefix_number"),o.$attr_accessor("suffix_number"),o.$attr_accessor("critical"),o.$attr_accessor("fumble"),o.$attr_accessor("dollar"),o.$attr_accessor("modify_number"),o.$attr_accessor("cmp_op"),o.$attr_accessor("target_number"),o.$attr_writer("question_target"),e.def(o,"$initialize",i=function(){var e=this;return e.prefix_number=l,e.suffix_number=l,e.critical=l,e.fumble=l,e.dollar=l,e.cmp_op=l,e.target_number=l,e.question_target=!1},i.$$arity=0),e.def(o,"$question_target?",a=function(){return this.question_target},a.$$arity=0),void e.def(o,"$to_s",$=function(e){var t,r=this,n=l,i=l,a=l,$=l,o=l;return null==e&&(e="after_command"),n=m(r.critical)?"@"+r.critical:l,i=m(r.fumble)?"#"+r.fumble:l,a=m(r.dollar)?"$"+r.dollar:l,$=d(c,"Format").$modifier(r.modify_number),o=m(r.question_target)?"?":r.target_number,"after_command"["$==="](t=e)?[r.prefix_number,r.command,r.suffix_number,n,i,a,$,r.cmp_op,o].$join():"after_modify_number"["$==="](t)?[r.prefix_number,r.command,r.suffix_number,$,n,i,a,r.cmp_op,o].$join():"after_target_number"["$==="](t)?[r.prefix_number,r.command,r.suffix_number,$,r.cmp_op,o,n,i,a].$join():l},$.$$arity=-1)},Opal.modules["bcdice/command/parser"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var r,n,i,a,$,o,c,u,s,_,l,d,f,p,m,y,h,b,v,g,x,R,k,w,T,D,E,S,A,P,N,z,O,C,I,L,B,q,M,U,F,K,H,G,j,W,Y,V,Q,Z,X,J,ee,te,re,ne,ie,ae,$e,oe,ce,ue,se,_e,le,de=e.top,fe=[],pe=e.nil,me=e.$$$,ye=e.$$,he=e.klass,be=e.module,ve=e.hash2,ge=e.send2,xe=e.send,Re=e.hash,ke=e.truthy;return de.$require("racc/parser.rb"),de.$require("bcdice/arithmetic/node"),de.$require("bcdice/command/lexer"),de.$require("bcdice/command/parsed"),function(e,t,r){[he(e,t,"Parser")].concat(r)}(me(ye(fe,"BCDice"),"Command"),me(ye(fe,"Racc"),"Parser"),fe),r=fe,n=le=[be(fe[0],"BCDice")].concat(r),i=(_e=[be(le[0],"Command")].concat(n))[0],a=me(ye(_e,"Racc"),"Parser"),$=_e,ue=he(i,a,"Parser"),se=[ue].concat($),ue.$$prototype.notations=ue.$$prototype.lexer=ue.$$prototype.modifier=ue.$$prototype.prefix_number=ue.$$prototype.suffix_number=ue.$$prototype.need_suffix_number=ue.$$prototype.need_prefix_number=ue.$$prototype.critical=ue.$$prototype.fumble=ue.$$prototype.dollar=ue.$$prototype.allowed_cmp_op=ue.$$prototype.question_target=pe,e.def(ue,"$initialize",o=function(t,r){var n,i,a,$,c=o.$$p,u=this;if(c&&(o.$$p=null),n=e.slice.call(arguments,0,arguments.length),null==(i=e.extract_kwargs(n)))i=ve([],{});else if(!i.$$is_hash)throw e.ArgumentError.$new("expected kwargs");if(a=n,!e.hasOwnProperty.call(i.$$smap,"round_type"))throw e.ArgumentError.$new("missing keyword: round_type");return $=i.$$smap.round_type,ge(u,e.find_super_dispatcher(u,"initialize",o,!1,!0),"initialize",[],null),u.notations=a,u.round_type=$,u.prefix_number=!1,u.suffix_number=!1,u.need_prefix_number=!1,u.need_suffix_number=!1,u.modifier=!0,u.critical=!1,u.fumble=!1,u.dollar=!1,u.allowed_cmp_op=[pe,">=",">","<=","<","==","!="],u.question_target=!1},o.$$arity=-2),e.def(ue,"$disable_modifier",c=function(){return this.modifier=!1,this},c.$$arity=0),e.def(ue,"$enable_prefix_number",u=function(){return this.prefix_number=!0,this},u.$$arity=0),e.def(ue,"$enable_suffix_number",s=function(){return this.suffix_number=!0,this},s.$$arity=0),e.def(ue,"$has_prefix_number",_=function(){var e=this;return e.prefix_number=!0,e.need_prefix_number=!0,e},_.$$arity=0),e.def(ue,"$has_suffix_number",l=function(){var e=this;return e.suffix_number=!0,e.need_suffix_number=!0,e},l.$$arity=0),e.def(ue,"$enable_critical",d=function(){return this.critical=!0,this},d.$$arity=0),e.def(ue,"$enable_fumble",f=function(){return this.fumble=!0,this},f.$$arity=0),e.def(ue,"$enable_dollar",p=function(){return this.dollar=!0,this},p.$$arity=0),e.def(ue,"$restrict_cmp_op_to",m=function(t){var r,n=this;return r=e.slice.call(arguments,0,arguments.length),n.allowed_cmp_op=r,n},m.$$arity=-1),e.def(ue,"$enable_question_target",y=function(){return this.question_target=!0,this},y.$$arity=0),e.def(ue,"$parse",h=function(t){try{return this.lexer=ye(se,"Lexer").$new(t,this.notations),this.$do_parse()}catch(r){if(!e.rescue(r,[ye(se,"ParseError"),ye(se,"ZeroDivisionError")]))throw r;try{return pe}finally{e.pop_exception()}}},h.$$arity=1),ue.$private(),e.def(ue,"$parsed",b=function(r,n,i,a){var $;return xe(ye(se,"Parsed").$new(),"tap",[],(($=function(o){var c,u,s,_,l,d,f=null==$.$$s?this:$.$$s,p=pe;return null==f.round_type&&(f.round_type=pe),null==o&&(o=pe),p=[r["$[]"]("command")],xe(o,"command=",e.to_a(p)),t(p.length,1),p=[(c=r["$[]"]("prefix"),c===pe||null==c?pe:xe(c,"eval",[f.round_type]))],xe(o,"prefix_number=",e.to_a(p)),t(p.length,1),p=[(u=r["$[]"]("suffix"),u===pe||null==u?pe:xe(u,"eval",[f.round_type]))],xe(o,"suffix_number=",e.to_a(p)),t(p.length,1),p=[(s=n["$[]"]("critical"),s===pe||null==s?pe:xe(s,"eval",[f.round_type]))],xe(o,"critical=",e.to_a(p)),t(p.length,1),p=[(_=n["$[]"]("fumble"),_===pe||null==_?pe:xe(_,"eval",[f.round_type]))],xe(o,"fumble=",e.to_a(p)),t(p.length,1),p=[(l=n["$[]"]("dollar"),l===pe||null==l?pe:xe(l,"eval",[f.round_type]))],xe(o,"dollar=",e.to_a(p)),t(p.length,1),p=[i.$eval(f.round_type)],xe(o,"modify_number=",e.to_a(p)),t(p.length,1),p=[a["$[]"]("cmp_op")],xe(o,"cmp_op=",e.to_a(p)),t(p.length,1),a["$[]"]("target")["$=="]("?")?(xe(o,"question_target=",e.to_a(p=[!0])),t(p.length,1),xe(o,"target_number=",e.to_a(p=[0])),p[t(p.length,1)]):(xe(o,"question_target=",e.to_a(p=[!1])),t(p.length,1),p=[(d=a["$[]"]("target"),d===pe||null==d?pe:xe(d,"eval",[f.round_type]))],xe(o,"target_number=",e.to_a(p)),p[t(p.length,1)])}).$$s=this,$.$$arity=1,$))},b.$$arity=4),e.def(ue,"$next_token",v=function(){return this.lexer.$next_token()},v.$$arity=0),J=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,pe,5,36,37,17,18,6,pe,5,36,37,17,18,6,pe,5,36,37,17,18,6,pe,5,33,34,17,18,6,pe,5,36,37,17,18,6,pe,5,36,37,17,18,6,pe,5,36,37,17,18,6,pe,5,36,37,17,18,6,pe,5,pe,pe,17,18,6,pe,5,pe,pe,17,18,pe,pe,5,23,24,25,26,56,54,55,57],ee=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,pe,17,15,15,18,18,23,pe,18,30,30,23,23,24,pe,23,31,31,24,24,25,pe,24,44,44,25,25,28,pe,25,47,47,28,28,29,pe,28,48,48,29,29,33,pe,29,49,49,33,33,34,pe,33,50,50,34,34,36,pe,34,pe,pe,36,36,37,pe,36,pe,pe,37,37,pe,pe,37,27,27,27,27,52,52,52,52],te=[-2,4,16,-3,-1,11,pe,33,13,35,23,30,1,pe,28,40,pe,37,44,pe,pe,-2,pe,51,58,65,0,106,72,79,47,54,pe,86,93,pe,100,107,pe,pe,pe,pe,pe,pe,63,pe,pe,68,75,82,89,pe,120,pe,pe,pe,pe,pe],re=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],ne=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,pe,pe,21,47,48,40,51,52,49,50,44,46,3,pe,pe,pe,13,pe,pe,pe,pe,pe,pe,pe,32],ie=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,pe,pe,4,8,8,5,7,7,8,8,9,5,6,pe,pe,pe,6,pe,pe,pe,pe,pe,pe,pe,6],ae=[pe,6,13,3,9,-1,27,-15,-10,-1,-38],$e=[pe,pe,pe,pe,pe,pe,19,16,15,pe,pe],oe=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],ce=Re(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),e.const_set(se[0],"Racc_arg",[J,ee,re,te,ne,ie,$e,ae,19,oe,ce,58,35,!0]),e.const_set(se[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),e.const_set(se[0],"Racc_debug_parser",!1),e.def(ue,"$_reduce_1",g=function(t,r,n){var i;return ke(this.modifier)||this.$raise(ye(se,"ParseError")),i=e.to_ary(t),this.$parsed(null==i[0]?pe:i[0],null==i[1]?pe:i[1],null==i[2]?pe:i[2],null==i[3]?pe:i[3])},g.$$arity=3),e.def(ue,"$_reduce_2",x=function(t,r,n){var i;return ke(this.modifier)||this.$raise(ye(se,"ParseError")),i=e.to_ary(t),this.$parsed(null==i[0]?pe:i[0],null==i[2]?pe:i[2],null==i[1]?pe:i[1],null==i[3]?pe:i[3])},x.$$arity=3),e.def(ue,"$_reduce_3",R=function(t,r,n){var i,a;return a=null==(i=e.to_ary(t))[2]?pe:i[2],this.$parsed(null==i[0]?pe:i[0],null==i[1]?pe:i[1],me(me(ye(se,"Arithmetic"),"Node"),"Number").$new(0),a)},R.$$arity=3),e.def(ue,"$_reduce_4",k=function(e,t,r){var n,i=this;return ke(ke(n=i.prefix_number)?i.suffix_number:n)||i.$raise(ye(se,"ParseError")),ve(["command","prefix","suffix"],{command:e["$[]"](1),prefix:e["$[]"](0),suffix:e["$[]"](2)})},k.$$arity=3),e.def(ue,"$_reduce_5",w=function(e,t,r){var n=this;return ke(n.prefix_number)||n.$raise(ye(se,"ParseError")),ke(n.need_suffix_number)&&n.$raise(ye(se,"ParseError")),ve(["command","prefix"],{command:e["$[]"](1),prefix:e["$[]"](0)})},w.$$arity=3),e.def(ue,"$_reduce_6",T=function(e,t,r){var n=this;return ke(n.suffix_number)||n.$raise(ye(se,"ParseError")),ke(n.need_prefix_number)&&n.$raise(ye(se,"ParseError")),ve(["command","suffix"],{command:e["$[]"](0),suffix:e["$[]"](1)})},T.$$arity=3),e.def(ue,"$_reduce_7",D=function(e,t,r){var n,i=this;return ke(ke(n=i.need_prefix_number)?n:i.need_suffix_number)&&i.$raise(ye(se,"ParseError")),ve(["command"],{command:e["$[]"](0)})},D.$$arity=3),e.def(ue,"$_reduce_8",E=function(e,t,r){return ve([],{})},E.$$arity=3),e.def(ue,"$_reduce_9",S=function(r,n,i){var a,$,o,c,u=pe;return u=null==(a=e.to_ary(r))[0]?pe:a[0],$=null==a[2]?pe:a[2],ke(ke(c=this.critical)?u["$[]"]("critical")["$nil?"]():c)||this.$raise(ye(se,"ParseError")),xe(u,"[]=",e.to_a(o=["critical",$])),t(o.length,1),u},S.$$arity=3),e.def(ue,"$_reduce_10",A=function(r,n,i){var a,$,o,c,u=pe;return u=null==(a=e.to_ary(r))[0]?pe:a[0],$=null==a[2]?pe:a[2],ke(ke(c=this.fumble)?u["$[]"]("fumble")["$nil?"]():c)||this.$raise(ye(se,"ParseError")),xe(u,"[]=",e.to_a(o=["fumble",$])),t(o.length,1),u},A.$$arity=3),e.def(ue,"$_reduce_11",P=function(r,n,i){var a,$,o,c,u=pe;return u=null==(a=e.to_ary(r))[0]?pe:a[0],$=null==a[2]?pe:a[2],ke(ke(c=this.dollar)?u["$[]"]("dollar")["$nil?"]():c)||this.$raise(ye(se,"ParseError")),xe(u,"[]=",e.to_a(o=["dollar",$])),t(o.length,1),u},P.$$arity=3),e.def(ue,"$_reduce_12",N=function(e,t,r){return e["$[]"](1)},N.$$arity=3),e.def(ue,"$_reduce_13",z=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"Negative").$new(e["$[]"](1))},z.$$arity=3),e.def(ue,"$_reduce_14",O=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"+",e["$[]"](2))},O.$$arity=3),e.def(ue,"$_reduce_15",C=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"-",e["$[]"](2))},C.$$arity=3),e.def(ue,"$_reduce_16",I=function(e,t,r){return ke(this.allowed_cmp_op["$include?"](pe))||this.$raise(ye(se,"ParseError")),ve([],{})},I.$$arity=3),e.def(ue,"$_reduce_17",L=function(t,r,n){var i,a,$;return $=null==(i=e.to_ary(t))[1]?pe:i[1],ke(this.allowed_cmp_op["$include?"](a=null==i[0]?pe:i[0]))||this.$raise(ye(se,"ParseError")),ve(["cmp_op","target"],{cmp_op:a,target:$})},L.$$arity=3),e.def(ue,"$_reduce_18",B=function(e,t,r){var n,i=this;return n=e["$[]"](0),ke(i.question_target)||i.$raise(ye(se,"ParseError")),ke(i.allowed_cmp_op["$include?"](n))||i.$raise(ye(se,"ParseError")),ve(["cmp_op","target"],{cmp_op:n,target:"?"})},B.$$arity=3),e.def(ue,"$_reduce_19",q=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"+",e["$[]"](2))},q.$$arity=3),e.def(ue,"$_reduce_20",M=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"-",e["$[]"](2))},M.$$arity=3),e.def(ue,"$_reduce_22",U=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"*",e["$[]"](2))},U.$$arity=3),e.def(ue,"$_reduce_23",F=function(e,t,r){return e["$[]"](3).$new(e["$[]"](0),e["$[]"](2))},F.$$arity=3),e.def(ue,"$_reduce_25",K=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},K.$$arity=3),e.def(ue,"$_reduce_26",H=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"DivideWithCeil")},H.$$arity=3),e.def(ue,"$_reduce_27",G=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"DivideWithCeil")},G.$$arity=3),e.def(ue,"$_reduce_28",j=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"DivideWithRound")},j.$$arity=3),e.def(ue,"$_reduce_29",W=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"DivideWithFloor")},W.$$arity=3),e.def(ue,"$_reduce_30",Y=function(e,t,r){return e["$[]"](1)},Y.$$arity=3),e.def(ue,"$_reduce_31",V=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"Negative").$new(e["$[]"](1))},V.$$arity=3),e.def(ue,"$_reduce_33",Q=function(e,t,r){return e["$[]"](1)},Q.$$arity=3),e.def(ue,"$_reduce_34",Z=function(e,t,r){return me(me(ye(se,"Arithmetic"),"Node"),"Number").$new(e["$[]"](0))},Z.$$arity=3),void e.def(ue,"$_reduce_none",X=function(e,t,r){return e["$[]"](0)},X.$$arity=3)},Opal.modules["bcdice/deprecated/checker"]=function(e){var t,r,n,i,a,$,o,c,u,s,_,l,d,f=[],p=e.nil,m=e.$$,y=e.module,h=e.send,b=e.truthy;return t=f,r=d=[y(f[0],"BCDice")].concat(t),n=l=[y(d[0],"Deprecated")].concat(r),s=y(l[0],"Checker"),_=[s].concat(n),s.$private(),e.def(s,"$check_result_legacy",i=function(e,t,r,n){var i,a,$=this,o=p,c=p,u=p,s=p,l=p;return o=h(t,"map",[],"sides".$to_proc()),i=(c=h(t,"map",[],"value".$to_proc())).$sum(),u=[100]["$==="](s=o)?$.$check_1D100(e,i,r,n):[20]["$==="](s)?$.$check_1D20(e,i,r,n):[6,6]["$==="](s)?$.$check_2D6(e,i,c,r,n):p,b(b(a=u["$nil?"]())?a:u["$empty?"]())&&(s=o.$uniq(),u=[10]["$==="](s)?$.$check_nD10(e,i,c,r,n):[6]["$==="](s)?$.$check_nD6(e,i,c,r,n):p,b(b(l=u["$nil?"]())?l:u["$empty?"]()))?p:m(_,"Result").$new(u.$delete_prefix(" \uff1e "))},i.$$arity=4),e.def(s,"$check_1D100",a=function(e,t,r,n){return p},a.$$arity=4),e.def(s,"$check_1D20",$=function(e,t,r,n){return p},$.$$arity=4),e.def(s,"$check_nD10",o=function(e,t,r,n,i){return p},o.$$arity=5),e.def(s,"$check_2D6",c=function(e,t,r,n,i){return p},c.$$arity=5),void e.def(s,"$check_nD6",u=function(e,t,r,n,i){return p},u.$$arity=5)},Opal.modules["bcdice/base"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n,i,a,$,o,c,u,s,_,l,d,f,p,m,y,h,b,v,g,x,R,k,w,T,D,E,S,A,P,N,z,O,C,I,L,B,q,M,U,F,K,H=e.top,G=[],j=e.nil,W=e.$$$,Y=e.$$,V=e.module,Q=e.klass,Z=e.truthy,X=e.send,J=e.range,ee=j;return H.$require("i18n"),H.$require("i18n/backend/fallbacks"),H.$require("bcdice/randomizer"),H.$require("bcdice/dice_table"),H.$require("bcdice/enum"),H.$require("bcdice/translate"),H.$require("bcdice/result"),H.$require("bcdice/command/parser"),H.$require("bcdice/deprecated/checker"),n=G,i=K=[V(G[0],"BCDice")].concat(n),U=Q(K[0],null,"Base"),F=[U].concat(i),U.$$prototype.sort_add_dice=U.$$prototype.sort_barabara_dice=U.$$prototype.enabled_d9=U.$$prototype.raw_input=U.$$prototype.randomizer=U.$$prototype.enabled_upcase_input=U.$$prototype.debug=j,O=e.get_singleton_class(U),M=[O].concat(F),O.$attr_reader("prefixes"),e.def(O,"$register_prefix",C=function(t){var r,n=this,i=j;return null==n.prefixes&&(n.prefixes=j),r=e.slice.call(arguments,0,arguments.length),n.prefixes=Z(i=n.prefixes)?i:[],n.prefixes.$concat(r.$flatten())},C.$$arity=-1),e.def(O,"$register_prefix_from_super_class",I=function(){return this.$register_prefix(this.$superclass().$prefixes())},I.$$arity=0),e.def(O,"$prefixes_pattern",L=function(){var t,r=this,n=j;return null==r.prefixes_pattern&&(r.prefixes_pattern=j),null==r.prefixes&&(r.prefixes=j),r.prefixes_pattern=Z(t=r.prefixes_pattern)?t:j,Z(r.prefixes_pattern)?r.prefixes_pattern:(r.prefixes=Z(n=r.prefixes)?n:[],r.prefixes.$freeze(),r.prefixes_pattern=(Z(r.prefixes["$empty?"]())?/(?!)/:e.regexp(["^(S)?(",r.prefixes.$join("|"),")"],"i")).$freeze())},L.$$arity=0),e.def(O,"$command_pattern",B=function(){var r,n,i=this,a=j,$=j;return null==i.command_pattern&&(i.command_pattern=j),null==i.prefixes&&(i.prefixes=j),i.command_pattern=Z(n=i.command_pattern)?n:j,Z(i.command_pattern)?i.command_pattern:(i.prefixes=Z(a=i.prefixes)?a:[],i.prefixes.$freeze(),$=t(X(W(Y(M,"CommonCommand"),"COMMANDS"),"map",[],((r=function(e){return null==e&&(e=j),W(e,"PREFIX_PATTERN").$source()}).$$s=i,r.$$arity=1,r)),i.prefixes),i.command_pattern=e.regexp(["^S?(",$.$join("|"),")"],"i").$freeze())},B.$$arity=0),e.def(O,"$eval",q=function(e){return this.$new(e).$eval()},q.$$arity=1),U.$include(Y(F,"Translate")),U.$include(W(Y(F,"Deprecated"),"Checker")),e.def(U,"$initialize",a=function(e){var t=this;return t.raw_input=e,t.sort_add_dice=!1,t.sort_barabara_dice=!1,t.d66_sort_type=W(Y(F,"D66SortType"),"NO_SORT"),t.enabled_d9=!1,t.round_type=W(Y(F,"RoundType"),"FLOOR"),t.sides_implicit_d=6,t.upper_dice_reroll_threshold=j,t.reroll_dice_reroll_threshold=j,t.default_cmp_op=j,t.default_target_number=j,t.enabled_upcase_input=!0,t.locale="ja_jp",t.randomizer=W(Y(F,"BCDice"),"Randomizer").$new(),t.debug=!1},a.$$arity=1),U.$attr_accessor("randomizer"),U.$attr_reader("d66_sort_type"),U.$attr_reader("round_type"),U.$attr_reader("sides_implicit_d"),U.$attr_reader("upper_dice_reroll_threshold"),U.$attr_reader("reroll_dice_reroll_threshold"),U.$attr_reader("default_cmp_op"),U.$attr_reader("default_target_number"),e.def(U,"$sort_add_dice?",$=function(){return this.sort_add_dice},$.$$arity=0),e.def(U,"$sort_barabara_dice?",o=function(){return this.sort_barabara_dice},o.$$arity=0),e.def(U,"$enabled_d9?",c=function(){return this.enabled_d9},c.$$arity=0),e.def(U,"$enable_debug",u=function(){return this.debug=!0},u.$$arity=0),e.def(U,"$eval",s=function(){var t,n,i,a=this,$=j;return t=W(Y(F,"BCDice"),"Preprocessor").$process(a.raw_input,a),n=Z(i=a.$dice_command(t))?i:a.$eval_common_command(a.raw_input),Z(n)?($=[a.randomizer.$rand_results()],X(n,"rands=",e.to_a($)),r($.length,1),$=[a.randomizer.$detailed_rand_results()],X(n,"detailed_rands=",e.to_a($)),r($.length,1),n):j},s.$$arity=0),e.def(U,"$change_text",_=function(e){return e},_.$$arity=1),e.def(U,"$check_result",l=function(e,t,r,n){var i=this,a=j,$=j,o=j,c=j,u=j;return a=i.$check_result_legacy(e,t,r,n),Z(a)?a:($=X(t,"map",[],"sides".$to_proc()),c=(o=X(t,"map",[],"value".$to_proc())).$sum(),(a=[100]["$==="](u=$)?i.$result_1d100(e,c,r,n):[20]["$==="](u)?i.$result_1d20(e,c,r,n):[6,6]["$==="](u)?i.$result_2d6(e,c,o,r,n):j)["$=="](Y(F,"Result").$nothing())?j:Z(a)?a:(u=$.$uniq(),(a=[10]["$==="](u)?i.$result_nd10(e,c,o,r,n):[6]["$==="](u)?i.$result_nd6(e,c,o,r,n):j)["$=="](Y(F,"Result").$nothing())?j:Z(a)?a:i.$result_ndx(e,r,n)))},l.$$arity=4),e.def(U,"$grich_text",d=function(e,t,r){return j},d.$$arity=3),U.$private(),e.def(U,"$eval_common_command",f=function(t){try{var r;return t=this.$change_text(t),X(W(Y(F,"CommonCommand"),"COMMANDS"),"each",[],((r=function(n){var i,a=null==r.$$s?this:r.$$s;if(null==a.randomizer&&(a.randomizer=j),null==n&&(n=j),i=n.$eval(t,a,a.randomizer),!Z(i))return j;e.ret(i)}).$$s=this,r.$$arity=1,r)),j}catch(I){if(I===e.returner)return I.$v;throw I}},f.$$arity=1),e.def(U,"$dice_command",p=function(t){var n,i=this,a=j,$=j,o=j,c=j,u=j,s=j,_=j;return Z(i.enabled_upcase_input)&&(t=t.$upcase()),a=i.$class().$prefixes_pattern().$match(t),Z(a)?($=a["$[]"](1)["$nil?"]()["$!"](),Z($)&&(t=t["$[]"](J(1,-1,!1))),o=i.$eval_game_system_specific_command(t),Z(o["$is_a?"](Y(F,"Result")))?(c=[Z(u=o["$secret?"]())?u:$],X(o,"secret=",e.to_a(c)),r(c.length,1),o):Z(Z(s=Z(_=o["$nil?"]())?_:o["$empty?"]())?s:o["$=="]("1"))?j:X(Y(F,"Result").$new(),"tap",[],((n=function(t){return null==t&&(t=j),c=[o.$to_s()],X(t,"text=",e.to_a(c)),r(c.length,1),X(t,"secret=",e.to_a(c=[$])),c[r(c.length,1)]}).$$s=i,n.$$arity=1,n))):j},p.$$arity=1),e.def(U,"$eval_game_system_specific_command",m=function(e){return j},m.$$arity=1),e.def(U,"$result_ndx",y=function(e,t,r){return Z(r["$is_a?"](Y(F,"String")))?j:Z(e.$send(t,r))?Y(F,"Result").$success(this.$translate("success")):Y(F,"Result").$failure(this.$translate("failure"))},y.$$arity=3),e.def(U,"$result_1d100",h=function(e,t,r,n){return j},h.$$arity=4),e.def(U,"$result_1d20",b=function(e,t,r,n){return j},b.$$arity=4),e.def(U,"$result_nd10",v=function(e,t,r,n,i){return j},v.$$arity=5),e.def(U,"$result_2d6",g=function(e,t,r,n,i){return j},g.$$arity=5),e.def(U,"$result_nd6",x=function(e,t,r,n,i){return j},x.$$arity=5),e.def(U,"$get_table_by_2d6",R=function(e){return this.$get_table_by_nD6(e,2)},R.$$arity=1),e.def(U,"$get_table_by_1d6",k=function(e){return this.$get_table_by_nD6(e,1)},k.$$arity=1),e.def(U,"$get_table_by_nD6",w=function(e,t){return this.$get_table_by_nDx(e,t,6)},w.$$arity=2),e.def(U,"$get_table_by_nDx",T=function(e,t,n){var i,a=j;return i=this.randomizer.$roll_sum(t,n),a=this.$get_table_value(e["$[]"](r(i,t))),Z(a["$nil?"]())?["1",0]:[a,i]},T.$$arity=3),e.def(U,"$get_table_by_1d3",D=function(e){var t,n,i,a=this,$=j;return a.$debug("get_table_by_1d3"),t=a.randomizer.$roll_sum(1,6),a.$debug("num",t),n=(i=r(t,1),"number"==typeof i?i/2:i["$/"](2)).$to_i(),a.$debug("index",n),$=e["$[]"](n),Z($["$nil?"]())?["1",0]:[$,t]},D.$$arity=1),e.def(U,"$get_table_by_d66_swap",E=function(e){var t;return t=this.randomizer.$roll_d66(W(Y(F,"D66SortType"),"ASC")),[this.$get_table_by_number(t,e),t]},E.$$arity=1),e.def(U,"$get_table_by_d66",S=function(e){var n,i,a,$,o,c=j;return n=this.randomizer.$roll_once(6),i=this.randomizer.$roll_once(6),a=t("number"==typeof(o=r(n,1))?6*o:o["$*"](6),r(i,1)),c=e["$[]"](a),$=""+n+i,Z(c["$nil?"]())?["1",$]:[c,$]},S.$$arity=1),e.def(U,"$get_table_by_number",A=function(t,r,n){try{var i;return null==n&&(n="1"),X(r,"each",[],((i=function(r){var n,a=null==i.$$s?this:i.$$s;if(null==r&&(r=j),n=r["$[]"](0),!Z(function(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}(n,t)))return j;e.ret(a.$get_table_value(r["$[]"](1)))}).$$s=this,i.$$arity=1,i)),this.$get_table_value(n)}catch(B){if(B===e.returner)return B.$v;throw B}},A.$$arity=-3),e.def(U,"$get_table_value",P=function(e){return Z(e["$is_a?"](Y(F,"Proc")))?e.$call():e},P.$$arity=1),e.def(U,"$roll_tables",N=function(e,t){var r=j;return r=t["$[]"](e),Z(r)?r.$roll(this.randomizer).$to_s():j},N.$$arity=2),e.def(U,"$debug",z=function(t,r){var n,i,a=this,$=j,o=j;return n=e.slice.call(arguments,1,arguments.length),Z(a.debug)?($=Z(t["$is_a?"](Y(F,"String")))?t:t.$inspect(),Z(n["$empty?"]())?a.$warn($):(o=X(n,"map",[],((i=function(e){return null==e&&(e=j),Z(e["$is_a?"](Y(F,"String")))?'"'+e+'"':e.$inspect()}).$$s=a,i.$$arity=1,i)),a.$warn($+": "+o.$join(", ")))):j},z.$$arity=-2),W(W(Y(G,"I18n"),"Backend"),"Simple").$include(W(W(Y(G,"I18n"),"Backend"),"Fallbacks")),Y(G,"I18n").$load_path()["$<<"](Y(G,"Dir")["$[]"](Y(G,"File").$join(H.$__dir__(),"../../i18n/**/*.yml"))),ee=["ja_jp"],X(Y(G,"I18n"),"default_locale=",e.to_a(ee)),r(ee.length,1),ee=[["ja_jp"]],X(Y(G,"I18n").$fallbacks(),"defaults=",e.to_a(ee)),ee[r(ee.length,1)]},Opal.modules["bcdice/game_system/sword_world/rating_lexer"]=function(e){var t,r,n,i,a,$,o,c,u,s,_,l,d=[],f=e.nil,p=e.$$,m=e.module,y=e.klass,h=e.hash2,b=e.truthy,v=e.send;return e.top.$require("strscan"),t=d,r=l=[m(d[0],"BCDice")].concat(t),n=_=[m(l[0],"GameSystem")].concat(r),i=s=[y(_[0],p(_,"Base"),"SwordWorld")].concat(n),c=y(s[0],null,"RatingLexer"),u=[c].concat(i),c.$$prototype.scanner=f,e.const_set(u[0],"SYMBOLS",h(["+","-","*","/","(",")","[","]","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),e.def(c,"$initialize",a=function(e){var t,r,n;return e=b(n=(r=(t=e)===f||null==t?f:v(t,"split",[" ",2]))===f||null==r?f:v(r,"first",[]))?n:"",this.scanner=p(u,"StringScanner").$new(e)},a.$$arity=1),e.def(c,"$next_token",$=function(){var e=this,t=f,r=f,n=f;return b(e.scanner["$eos?"]())?[!1,"$"]:b(t=e.scanner.$scan(/\d+/))?["NUMBER",t.$to_i()]:(r=e.scanner.$getch().$upcase(),[b(n=p(u,"SYMBOLS")["$[]"](r))?n:r.$to_sym(),r])},$.$$arity=0),void e.def(c,"$source",o=function(){return this.scanner.$string()},o.$$arity=0)},Opal.modules["bcdice/game_system/sword_world/rating_parsed"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e<t:e["$<"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}var i,a,$,o,c,u,s,_,l,d,f,p,m,y,h,b,v,g,x,R,k,w,T=[],D=e.nil,E=e.$$,S=e.module,A=e.klass,P=e.truthy;return i=T,a=w=[S(T[0],"BCDice")].concat(i),$=k=[S(w[0],"GameSystem")].concat(a),o=R=[A(k[0],E(k,"Base"),"SwordWorld")].concat($),g=A(R[0],null,"RatingParsed"),x=[g].concat(o),g.$$prototype.modifier_after_half=g.$$prototype.critical=g.$$prototype.semi_fixed_val=g.$$prototype.kept_modify=g.$$prototype.first_modify=g.$$prototype.first_to=g.$$prototype.rateup=g.$$prototype.tmp_fixed_val=g.$$prototype.rate=g.$$prototype.greatest_fortune=g.$$prototype.modifier=D,g.$attr_accessor("rate"),g.$attr_writer("critical"),g.$attr_writer("kept_modify"),g.$attr_writer("first_to"),g.$attr_writer("first_modify"),g.$attr_writer("rateup"),g.$attr_accessor("greatest_fortune"),g.$attr_writer("semi_fixed_val"),g.$attr_writer("tmp_fixed_val"),g.$attr_accessor("modifier"),g.$attr_writer("modifier_after_half"),e.def(g,"$initialize",c=function(){var e=this;return e.critical=D,e.min_critical=D,e.kept_modify=D,e.first_to=D,e.first_modify=D,e.greatest_fortune=!1,e.rateup=D,e.semi_fixed_val=D,e.tmp_fixed_val=D},c.$$arity=0),e.def(g,"$half",u=function(){return this.modifier_after_half["$nil?"]()["$!"]()},u.$$arity=0),e.def(g,"$critical",s=function(){var e;return P(e=this.critical)?e:P(this.$half())?13:10},s.$$arity=0),e.def(g,"$min_critical",_=function(){var e=this,i=D;return i=3,P(e.semi_fixed_val["$nil?"]())||(P(e.kept_modify["$nil?"]())?P(t(i,r(e.semi_fixed_val,2)))&&(i=r(e.semi_fixed_val,2)):P(t(i,r(r(e.semi_fixed_val,e.kept_modify),2)))&&(i=r(r(e.semi_fixed_val,e.kept_modify),2)),e.semi_fixed_val["$=="](1)&&(i=3)),P(n(i,13))&&(i=13),i},_.$$arity=0),e.def(g,"$first_modify",l=function(){var e;return P(e=this.first_modify)?e:0},l.$$arity=0),e.def(g,"$first_to",d=function(){var e;return P(e=this.first_to)?e:0},d.$$arity=0),e.def(g,"$rateup",f=function(){var e;return P(e=this.rateup)?e:0},f.$$arity=0),e.def(g,"$semi_fixed_val",p=function(){var e,t=D;return t=P(e=this.semi_fixed_val)?e:0,P(n(t,6))&&(t=6),t},p.$$arity=0),e.def(g,"$tmp_fixed_val",m=function(){var e,t=D;return t=P(e=this.tmp_fixed_val)?e:0,P(n(t,6))&&(t=6),t},m.$$arity=0),e.def(g,"$kept_modify",y=function(){var e;return P(e=this.kept_modify)?e:0},y.$$arity=0),e.def(g,"$modifier_after_half",h=function(){var e;return P(e=this.modifier_after_half)?e:0},h.$$arity=0),e.def(g,"$to_s",b=function(){var e=this,n=D;return n="KeyNo."+e.rate,P(t(e.$critical(),13))&&(n=r(n,"c["+e.$critical()+"]")),P(e.$first_modify()["$!="](0))&&(n=r(n,"m["+E(x,"Format").$modifier(e.$first_modify())+"]")),P(e.$first_to()["$!="](0))&&(n=r(n,"m["+e.$first_to()+"]")),P(e.$rateup()["$!="](0))&&(n=r(n,"r["+e.$rateup()+"]")),P(e.greatest_fortune)&&(n=r(n,"gf")),P(e.$semi_fixed_val()["$!="](0))&&(n=r(n,"sf["+e.$semi_fixed_val()+"]")),P(e.$tmp_fixed_val()["$!="](0))&&(n=r(n,"tf["+e.$tmp_fixed_val()+"]")),P(e.$kept_modify()["$!="](0))&&(n=r(n,"a["+E(x,"Format").$modifier(e.$kept_modify())+"]")),P(e.modifier["$!="](0))&&(n=r(n,E(x,"Format").$modifier(e.modifier))),n},b.$$arity=0),void e.def(g,"$infinite_roll?",v=function(){return t(this.$critical(),this.$min_critical())},v.$$arity=0)},Opal.modules["bcdice/game_system/sword_world/rating_parser"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var r,n,i,a,$,o,c,u,s,_,l,d,f,p,m,y,h,b,v,g,x,R,k,w,T,D,E,S,A,P,N,z,O,C,I,L,B,q,M,U,F,K,H,G,j,W,Y,V,Q,Z,X,J,ee,te,re=e.top,ne=[],ie=e.nil,ae=e.$$$,$e=e.$$,oe=e.module,ce=e.klass,ue=e.hash2,se=e.send2,_e=e.send,le=e.hash,de=e.truthy;return re.$require("racc/parser.rb"),re.$require("bcdice/arithmetic/node"),re.$require("bcdice/enum"),re.$require("bcdice/game_system/sword_world/rating_lexer"),re.$require("bcdice/game_system/sword_world/rating_parsed"),r=ne,n=te=[oe(ne[0],"BCDice")].concat(r),i=ee=[oe(te[0],"GameSystem")].concat(n),a=J=[ce(ee[0],$e(ee,"Base"),"SwordWorld")].concat(i),Z=ce(J[0],ae($e(J,"Racc"),"Parser"),"RatingParser"),X=[Z].concat(a),Z.$$prototype.lexer=Z.$$prototype.version=ie,e.def(Z,"$initialize",$=function(t){var r,n;if($.$$p&&($.$$p=null),null==t)t=ue([],{});else if(!t.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(r=t.$$smap.version)&&(r="v1_0"),null==(n=t.$$smap.round_type)&&(n=ae($e(X,"RoundType"),"CEIL")),se(this,e.find_super_dispatcher(this,"initialize",$,!1,!0),"initialize",[],null),this.version=r,this.round_type=n},$.$$arity=-1),e.def(Z,"$set_debug",o=function(){return this.yydebug=!0,this},o.$$arity=0),e.def(Z,"$parse",c=function(t){try{return this.lexer=$e(X,"RatingLexer").$new(t),this.$do_parse()}catch(r){if(!e.rescue(r,[$e(X,"ParseError"),$e(X,"ZeroDivisionError")]))throw r;try{return ie}finally{e.pop_exception()}}},c.$$arity=1),Z.$private(),e.def(Z,"$parsed",u=function(r,n,i){var a;return _e($e(X,"RatingParsed").$new(),"tap",[],((a=function($){var o,c,u,s,_=null==a.$$s?this:a.$$s,l=ie;return null==_.round_type&&(_.round_type=ie),null==$&&($=ie),_e($,"rate=",e.to_a(l=[r])),t(l.length,1),l=[(o=i["$[]"]("critical"),o===ie||null==o?ie:_e(o,"eval",[_.round_type]))],_e($,"critical=",e.to_a(l)),t(l.length,1),l=[(c=i["$[]"]("kept_modify"),c===ie||null==c?ie:_e(c,"eval",[_.round_type]))],_e($,"kept_modify=",e.to_a(l)),t(l.length,1),l=[i["$[]"]("first_to")],_e($,"first_to=",e.to_a(l)),t(l.length,1),l=[i["$[]"]("first_modify")],_e($,"first_modify=",e.to_a(l)),t(l.length,1),l=[(u=i["$[]"]("rateup"),u===ie||null==u?ie:_e(u,"eval",[_.round_type]))],_e($,"rateup=",e.to_a(l)),t(l.length,1),l=[i.$fetch("greatest_fortune",!1)],_e($,"greatest_fortune=",e.to_a(l)),t(l.length,1),l=[i["$[]"]("semi_fixed_val")],_e($,"semi_fixed_val=",e.to_a(l)),t(l.length,1),l=[i["$[]"]("tmp_fixed_val")],_e($,"tmp_fixed_val=",e.to_a(l)),t(l.length,1),l=[n.$eval(_.round_type)],_e($,"modifier=",e.to_a(l)),t(l.length,1),l=[(s=i["$[]"]("modifier_after_half"),s===ie||null==s?ie:_e(s,"eval",[_.round_type]))],_e($,"modifier_after_half=",e.to_a(l)),l[t(l.length,1)]}).$$s=this,a.$$arity=1,a))},u.$$arity=3),e.def(Z,"$next_token",s=function(){return this.lexer.$next_token()},s.$$arity=0),U=[15,14,16,5,17,18,20,21,57,58,23,24,11,59,12,19,13,15,14,16,4,17,18,20,21,4,30,3,30,11,8,12,19,13,26,27,26,27,29,30,29,30,55,56,55,56,30,26,27,26,27,29,30,29,26,27,9,30,29,30,26,27,55,56,29,26,27,26,27,29,30,29,30,55,56,55,56,30,26,27,26,27,29,30,29,26,27,37,30,29,30,26,27,55,56,29,26,27,26,27,29,30,29,30,55,56,38,39,32,26,27,26,27,29,46,29,33,34,51,52,53,54],F=[6,6,6,1,6,6,6,6,49,49,10,10,6,49,6,6,6,22,22,22,3,22,22,22,22,0,11,0,12,22,4,22,22,22,11,11,12,12,11,14,12,15,41,41,43,43,19,14,14,15,15,14,20,15,19,19,5,21,19,23,20,20,44,44,20,21,21,23,23,21,24,23,26,45,45,50,50,27,24,24,26,26,24,29,26,27,27,16,55,27,56,29,29,62,62,29,55,55,56,56,55,57,56,58,63,63,17,18,13,57,57,58,58,57,25,58,13,13,33,34,38,39],K=[22,3,ie,17,28,56,-4,ie,ie,ie,0,24,26,106,37,39,80,99,100,44,50,55,13,57,68,97,70,75,ie,81,ie,ie,ie,116,117,ie,ie,ie,118,119,ie,30,ie,32,50,61,ie,ie,ie,-2,63,ie,ie,ie,ie,86,88,99,101,ie,ie,ie,81,92],H=[-33,-33,-4,-33,-33,-33,-1,-4,-3,64,-5,-33,-33,-33,-11,-33,-33,-33,-33,-33,-33,-33,-2,-33,-33,-33,-33,-33,-30,-33,-32,-7,-8,-33,-33,-12,-13,-14,-33,-33,-17,-18,-27,-19,-20,-21,-6,-28,-29,-33,-24,-9,-10,-15,-16,-33,-33,-33,-33,-31,-25,-26,-22,-23],G=[25,31,6,35,36,1,49,22,40,41,43,2,44,45,7,47,48,ie,50,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,60,61,62,63],j=[5,5,3,5,5,1,7,3,5,6,6,2,6,6,2,5,5,ie,6,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,ie,5,5,6,6],W=[ie,5,11,0,ie,-11,-11,-23,ie],Y=[ie,ie,ie,ie,10,42,ie,ie,28],V=[0,0,"racc_error",2,22,"_reduce_1",3,22,"_reduce_2",2,23,"_reduce_3",0,24,"_reduce_4",2,24,"_reduce_5",4,24,"_reduce_6",3,24,"_reduce_7",3,24,"_reduce_8",4,24,"_reduce_9",4,24,"_reduce_10",2,24,"_reduce_11",3,24,"_reduce_12",3,24,"_reduce_13",3,24,"_reduce_14",4,24,"_reduce_15",4,24,"_reduce_16",3,24,"_reduce_17",2,25,"_reduce_18",2,25,"_reduce_19",3,25,"_reduce_20",3,25,"_reduce_21",3,28,"_reduce_22",3,28,"_reduce_23",1,28,"_reduce_none",3,27,"_reduce_25",3,27,"_reduce_26",1,27,"_reduce_none",2,26,"_reduce_28",2,26,"_reduce_29",1,26,"_reduce_none",3,29,"_reduce_31",1,29,"_reduce_32"],Q=le(!1,0,"error",1,"NUMBER",2,"K",3,"R",4,"H",5,"G",6,"F",7,"S",8,"T",9,"PLUS",10,"MINUS",11,"ASTERISK",12,"SLASH",13,"PARENL",14,"PARENR",15,"BRACKETL",16,"BRACKETR",17,"AT",18,"SHARP",19,"DOLLAR",20),e.const_set(X[0],"Racc_arg",[U,F,H,K,G,j,Y,W,21,V,Q,64,33,!0]),e.const_set(X[0],"Racc_token_to_s_table",["$end","error","NUMBER","K","R","H","G","F","S","T","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","BRACKETL","BRACKETR","AT","SHARP","DOLLAR","$start","expr","rate","option","modifier","unary","mul","add","term"]),e.const_set(X[0],"Racc_debug_parser",!1),e.def(Z,"$_reduce_1",_=function(t,r,n){var i,a,$,o,c=ie;return a=null==(i=e.to_ary(t))[0]?ie:i[0],$=de(o=(c=null==i[1]?ie:i[1])["$[]"]("modifier"))?o:ae(ae($e(X,"Arithmetic"),"Node"),"Number").$new(0),this.$parsed(a,$,c)},_.$$arity=3),e.def(Z,"$_reduce_2",l=function(r,n,i){var a,$,o,c,u=ie,s=ie;return $=null==(a=e.to_ary(r))[1]?ie:a[1],de((u=null==a[2]?ie:a[2])["$[]"]("modifier_after_half"))||(s=["modifier_after_half",ae(ae($e(X,"Arithmetic"),"Node"),"Number").$new(0)],_e(u,"[]=",e.to_a(s)),t(s.length,1)),o=de(c=u["$[]"]("modifier"))?c:ae(ae($e(X,"Arithmetic"),"Node"),"Number").$new(0),this.$parsed($,o,u)},l.$$arity=3),e.def(Z,"$_reduce_3",d=function(e,t,r){return e["$[]"](1).$to_i()},d.$$arity=3),e.def(Z,"$_reduce_4",f=function(e,t,r){return ue([],{})},f.$$arity=3),e.def(Z,"$_reduce_5",p=function(r,n,i){var a,$,o,c=ie;return $=null==(a=e.to_ary(r))[1]?ie:a[1],de((c=null==a[0]?ie:a[0])["$[]"]("modifier")["$nil?"]())||this.$raise($e(X,"ParseError")),_e(c,"[]=",e.to_a(o=["modifier",$])),t(o.length,1),c},p.$$arity=3),e.def(Z,"$_reduce_6",m=function(r,n,i){var a,$,o,c=ie;return $=null==(a=e.to_ary(r))[2]?ie:a[2],de((c=null==a[0]?ie:a[0])["$[]"]("critical")["$nil?"]())||this.$raise($e(X,"ParseError")),_e(c,"[]=",e.to_a(o=["critical",$])),t(o.length,1),c},m.$$arity=3),e.def(Z,"$_reduce_7",y=function(r,n,i){var a,$,o,c=ie;return $=null==(a=e.to_ary(r))[2]?ie:a[2],de((c=null==a[0]?ie:a[0])["$[]"]("critical")["$nil?"]())||this.$raise($e(X,"ParseError")),_e(c,"[]=",e.to_a(o=["critical",$])),t(o.length,1),c},y.$$arity=3),e.def(Z,"$_reduce_8",h=function(r,n,i){var a,$,o,c=ie,u=ie;return u=null==(a=e.to_ary(r))[2]?ie:a[2],de(de(o=(c=null==a[0]?ie:a[0])["$[]"]("first_to")["$nil?"]())?c["$[]"]("first_modify")["$nil?"]():o)||this.$raise($e(X,"ParseError")),$=["first_to",u.$to_i()],_e(c,"[]=",e.to_a($)),t($.length,1),c},h.$$arity=3),e.def(Z,"$_reduce_9",b=function(r,n,i){var a,$,o,c=ie,u=ie;return u=null==(a=e.to_ary(r))[3]?ie:a[3],de(de(o=(c=null==a[0]?ie:a[0])["$[]"]("first_to")["$nil?"]())?c["$[]"]("first_modify")["$nil?"]():o)||this.$raise($e(X,"ParseError")),$=["first_modify",u.$to_i()],_e(c,"[]=",e.to_a($)),t($.length,1),c},b.$$arity=3),e.def(Z,"$_reduce_10",v=function(r,n,i){var a,$,o,c=ie,u=ie;return u=null==(a=e.to_ary(r))[3]?ie:a[3],de(de(o=(c=null==a[0]?ie:a[0])["$[]"]("first_to")["$nil?"]())?c["$[]"]("first_modify")["$nil?"]():o)||this.$raise($e(X,"ParseError")),$=["first_modify",u.$to_i()["$-@"]()],_e(c,"[]=",e.to_a($)),t($.length,1),c},v.$$arity=3),e.def(Z,"$_reduce_11",g=function(r,n,i){var a,$,o=ie;return a=e.to_ary(r),de((o=null==a[0]?ie:a[0])["$[]"]("modifier_after_half")["$nil?"]())||this.$raise($e(X,"ParseError")),$=["modifier_after_half",ae(ae($e(X,"Arithmetic"),"Node"),"Number").$new(0)],_e(o,"[]=",e.to_a($)),t($.length,1),o},g.$$arity=3),e.def(Z,"$_reduce_12",x=function(r,n,i){var a,$,o,c=ie;return $=null==(a=e.to_ary(r))[2]?ie:a[2],de((c=null==a[0]?ie:a[0])["$[]"]("modifier_after_half")["$nil?"]())||this.$raise($e(X,"ParseError")),_e(c,"[]=",e.to_a(o=["modifier_after_half",$])),t(o.length,1),c},x.$$arity=3),e.def(Z,"$_reduce_13",R=function(r,n,i){var a,$,o,c,u=ie;return u=null==(a=e.to_ary(r))[0]?ie:a[0],$=null==a[2]?ie:a[2],de(de(c=["v2_5","v2_0"]["$include?"](this.version))?u["$[]"]("rateup")["$nil?"]():c)||this.$raise($e(X,"ParseError")),_e(u,"[]=",e.to_a(o=["rateup",$])),t(o.length,1),u},R.$$arity=3),e.def(Z,"$_reduce_14",k=function(r,n,i){var a,$,o=this,c=ie;return c=null==(a=e.to_ary(r))[0]?ie:a[0],de(["v2_5","v2_0"]["$include?"](o.version))||o.$raise($e(X,"ParseError")),de(c["$[]"]("greatest_fortune")["$nil?"]())||o.$raise($e(X,"ParseError")),de(c["$[]"]("semi_fixed_val")["$nil?"]())||o.$raise($e(X,"ParseError")),de(c["$[]"]("tmp_fixed_val")["$nil?"]())||o.$raise($e(X,"ParseError")),_e(c,"[]=",e.to_a($=["greatest_fortune",!0])),t($.length,1),c},k.$$arity=3),e.def(Z,"$_reduce_15",w=function(r,n,i){var a,$,o=this,c=ie,u=ie;return c=null==(a=e.to_ary(r))[0]?ie:a[0],u=null==a[3]?ie:a[3],de(["v2_5","v2_0"]["$include?"](o.version))||o.$raise($e(X,"ParseError")),de(c["$[]"]("greatest_fortune")["$nil?"]())||o.$raise($e(X,"ParseError")),de(c["$[]"]("semi_fixed_val")["$nil?"]())||o.$raise($e(X,"ParseError")),de(c["$[]"]("tmp_fixed_val")["$nil?"]())||o.$raise($e(X,"ParseError")),$=["semi_fixed_val",u.$to_i()],_e(c,"[]=",e.to_a($)),t($.length,1),c},w.$$arity=3),e.def(Z,"$_reduce_16",T=function(r,n,i){var a,$,o=this,c=ie,u=ie;return c=null==(a=e.to_ary(r))[0]?ie:a[0],u=null==a[3]?ie:a[3],de(["v2_5","v2_0"]["$include?"](o.version))||o.$raise($e(X,"ParseError")),de(c["$[]"]("greatest_fortune")["$nil?"]())||o.$raise($e(X,"ParseError")),de(c["$[]"]("semi_fixed_val")["$nil?"]())||o.$raise($e(X,"ParseError")),de(c["$[]"]("tmp_fixed_val")["$nil?"]())||o.$raise($e(X,"ParseError")),$=["tmp_fixed_val",u.$to_i()],_e(c,"[]=",e.to_a($)),t($.length,1),c},T.$$arity=3),e.def(Z,"$_reduce_17",D=function(r,n,i){var a,$,o,c,u=ie;return u=null==(a=e.to_ary(r))[0]?ie:a[0],$=null==a[2]?ie:a[2],de(de(c=this.version["$=="]("v2_5"))?u["$[]"]("kept_modify")["$nil?"]():c)||this.$raise($e(X,"ParseError")),_e(u,"[]=",e.to_a(o=["kept_modify",$])),t(o.length,1),u},D.$$arity=3),e.def(Z,"$_reduce_18",E=function(e,t,r){return e["$[]"](1)},E.$$arity=3),e.def(Z,"$_reduce_19",S=function(e,t,r){return ae(ae($e(X,"Arithmetic"),"Node"),"Negative").$new(e["$[]"](1))},S.$$arity=3),e.def(Z,"$_reduce_20",A=function(e,t,r){return ae(ae($e(X,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"+",e["$[]"](2))},A.$$arity=3),e.def(Z,"$_reduce_21",P=function(e,t,r){return ae(ae($e(X,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"-",e["$[]"](2))},P.$$arity=3),e.def(Z,"$_reduce_22",N=function(e,t,r){return ae(ae($e(X,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"+",e["$[]"](2))},N.$$arity=3),e.def(Z,"$_reduce_23",z=function(e,t,r){return ae(ae($e(X,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"-",e["$[]"](2))},z.$$arity=3),e.def(Z,"$_reduce_25",O=function(e,t,r){return ae(ae($e(X,"Arithmetic"),"Node"),"BinaryOp").$new(e["$[]"](0),"*",e["$[]"](2))},O.$$arity=3),e.def(Z,"$_reduce_26",C=function(e,t,r){return ae(ae($e(X,"Arithmetic"),"Node"),"DivideWithGameSystemDefault").$new(e["$[]"](0),e["$[]"](2))},C.$$arity=3),e.def(Z,"$_reduce_28",I=function(e,t,r){return e["$[]"](1)},I.$$arity=3),e.def(Z,"$_reduce_29",L=function(e,t,r){return ae(ae($e(X,"Arithmetic"),"Node"),"Negative").$new(e["$[]"](1))},L.$$arity=3),e.def(Z,"$_reduce_31",B=function(e,t,r){return e["$[]"](1)},B.$$arity=3),e.def(Z,"$_reduce_32",q=function(e,t,r){return ae(ae($e(X,"Arithmetic"),"Node"),"Number").$new(e["$[]"](0))},q.$$arity=3),void e.def(Z,"$_reduce_none",M=function(e,t,r){return e["$[]"](0)},M.$$arity=3)},Opal.modules["bcdice/game_system/SwordWorld"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e<=t:e["$<="](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}function i(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function a(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function $(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}var o,c,u,s,_,l,d,f,p,m,y,h,b,v,g,x,R=e.top,k=[],w=e.nil,T=e.$$,D=e.module,E=e.klass,S=e.send2,A=e.truthy,P=e.send;return R.$require("bcdice/base"),R.$require("bcdice/game_system/sword_world/rating_parser"),o=k,c=x=[D(k[0],"BCDice")].concat(o),u=g=[D(x[0],"GameSystem")].concat(c),b=E(g[0],T(g,"Base"),"SwordWorld"),v=[b].concat(u),b.$$prototype.rating_table=b.$$prototype.randomizer=w,e.const_set(v[0],"ID","SwordWorld"),e.const_set(v[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c9RPG"),e.const_set(v[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u3068"),e.const_set(v[0],"HELP_MESSAGE","\u30fbSW\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx[c]+m$f) (x:\u30ad\u30fc, c:\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024, m:\u30dc\u30fc\u30ca\u30b9, f:\u51fa\u76ee\u4fee\u6b63)\n"),b.$register_prefix("H?K"),e.def(b,"$initialize",s=function(t){var r=this;return s.$$p&&(s.$$p=null),S(r,e.find_super_dispatcher(r,"initialize",s,!1,!0),"initialize",[t],null),r.rating_table=0},s.$$arity=1),e.def(b,"$result_2d6",_=function(e,n,i,a,$){var o=w;return A(t(n,12))?T(v,"Result").$critical("\u81ea\u52d5\u7684\u6210\u529f"):A(r(n,2))?T(v,"Result").$fumble("\u81ea\u52d5\u7684\u5931\u6557"):A(A(o=a["$!="](">="))?o:$["$=="]("?"))?w:A(t(e,$))?T(v,"Result").$success("\u6210\u529f"):T(v,"Result").$failure("\u5931\u6557")},_.$$arity=5),e.def(b,"$eval_game_system_specific_command",l=function(e){return this.$rating(e)},l.$$arity=1),b.$private(),e.def(b,"$rating_parser",d=function(){return T(v,"RatingParser").$new()},d.$$arity=0),e.def(b,"$rating",f=function(o){var c,u,s,_,l=this,d=w,f=w,p=w,m=w,y=w,h=w,b=w,g=w,x=w,R=w,k=w,D=w,E=w,S=w,N=w,z=w;return l.$debug("rating string",o),d=l.$rating_parser().$parse(o),A(d)?(f=l.$getSW2_0_RatingTable(),p=n(f.$length(),1),l.$debug("keyMax",p),A(i(d.$rate(),p))?"\u30ad\u30fc\u30ca\u30f3\u30d0\u30fc\u306f"+p+"\u307e\u3067\u3067\u3059":A(d["$infinite_roll?"]())?T(v,"Result").$new("C\u5024\u3092"+d.$min_critical()+"\u4ee5\u4e0a\u306b\u3057\u3066\u304f\u3060\u3055\u3044"):(m=l.$getNewRates(f),y=d+" \uff1e ",h=[],b=[],g=[],x=0,R=0,k=0,D=0,E=d.$first_to(),S=d.$first_modify(),function(){var n=e.new_brk();try{P(l,"loop",[],((c=function(){var o,u,s,_,l,f,y=null==c.$$s?this:c.$$s,v=w,T=w;if(u=y.$rollDice(d,D),T=null==(o=e.to_ary(u))[1]?w:o[1],x=v=null==o[0]?w:o[0],A(E["$!="](0))?(x=v=E,E=0):A(S["$!="](0))&&(x=a(x,S),S=0),A(r(v,2))&&(h["$<<"](v.$to_s()),b["$<<"](T.$to_s()),g["$<<"]("**"),D=a(D,1),e.brk(w,n)),A(A(l=d.$kept_modify()["$!="](0))?x["$!="](2):l)&&(x=a(x,d.$kept_modify())),A("number"==typeof(f=x)?f<2:f["$<"](2))&&(x=2),A(i(x,12))&&(x=12),s=[a(d.$rate(),$(D,d.$rateup())),p].$min(),y.$debug("currentKey",s),_=m["$[]"](x)["$[]"](s),y.$debug("rateValue",_),k=a(k,_),R=a(R,x),h["$<<"](x.$to_s()),b["$<<"](T.$to_s()),g["$<<"](A(i(x,2))?_:"**"),D=a(D,1),A(t(x,d.$critical())))return w;e.brk(w,n)}).$$s=l,c.$$brk=n,c.$$arity=0,c))}catch(o){if(o===n)return o.$v;throw o}}(),s=l.$getResultText(k,d,b,h,g,R,D),u=e.to_ary(s),N=null==u[1]?w:u[1],z=null==u[2]?w:u[2],y=a(y,null==u[0]?w:u[0]),P(T(v,"Result").$new(),"tap",[],((_=function(t){var r=w;return null==t&&(t=w),P(t,"text=",e.to_a(r=[y])),n(r.length,1),P(t,"critical=",e.to_a(r=[N])),n(r.length,1),P(t,"fumble=",e.to_a(r=[z])),r[n(r.length,1)]}).$$s=l,_.$$arity=1,_)))):(l.$debug("not matched"),"1")},f.$$arity=1),e.def(b,"$getSW2_0_RatingTable",p=function(){return["*,0,0,0,1,2,2,3,3,4,4","*,0,0,0,1,2,3,3,3,4,4","*,0,0,0,1,2,3,4,4,4,4","*,0,0,1,1,2,3,4,4,4,5","*,0,0,1,2,2,3,4,4,5,5","*,0,1,1,2,2,3,4,5,5,5","*,0,1,1,2,3,3,4,5,5,5","*,0,1,1,2,3,4,4,5,5,6","*,0,1,2,2,3,4,4,5,6,6","*,0,1,2,3,3,4,4,5,6,7","*,1,1,2,3,3,4,5,5,6,7","*,1,2,2,3,3,4,5,6,6,7","*,1,2,2,3,4,4,5,6,6,7","*,1,2,3,3,4,4,5,6,7,7","*,1,2,3,4,4,4,5,6,7,8","*,1,2,3,4,4,5,5,6,7,8","*,1,2,3,4,4,5,6,7,7,8","*,1,2,3,4,5,5,6,7,7,8","*,1,2,3,4,5,6,6,7,7,8","*,1,2,3,4,5,6,7,7,8,9","*,1,2,3,4,5,6,7,8,9,10","*,1,2,3,4,6,6,7,8,9,10","*,1,2,3,5,6,6,7,8,9,10","*,2,2,3,5,6,7,7,8,9,10","*,2,3,4,5,6,7,7,8,9,10","*,2,3,4,5,6,7,8,8,9,10","*,2,3,4,5,6,8,8,9,9,10","*,2,3,4,6,6,8,8,9,9,10","*,2,3,4,6,6,8,9,9,10,10","*,2,3,4,6,7,8,9,9,10,10","*,2,4,4,6,7,8,9,10,10,10","*,2,4,5,6,7,8,9,10,10,11","*,3,4,5,6,7,8,10,10,10,11","*,3,4,5,6,8,8,10,10,10,11","*,3,4,5,6,8,9,10,10,11,11","*,3,4,5,7,8,9,10,10,11,12","*,3,5,5,7,8,9,10,11,11,12","*,3,5,6,7,8,9,10,11,12,12","*,3,5,6,7,8,10,10,11,12,13","*,4,5,6,7,8,10,11,11,12,13","*,4,5,6,7,9,10,11,11,12,13","*,4,6,6,7,9,10,11,12,12,13","*,4,6,7,7,9,10,11,12,13,13","*,4,6,7,8,9,10,11,12,13,14","*,4,6,7,8,10,10,11,12,13,14","*,4,6,7,9,10,10,11,12,13,14","*,4,6,7,9,10,10,12,13,13,14","*,4,6,7,9,10,11,12,13,13,15","*,4,6,7,9,10,12,12,13,13,15","*,4,6,7,10,10,12,12,13,14,15","*,4,6,8,10,10,12,12,13,15,15","*,5,7,8,10,10,12,12,13,15,15","*,5,7,8,10,11,12,12,13,15,15","*,5,7,9,10,11,12,12,14,15,15","*,5,7,9,10,11,12,13,14,15,16","*,5,7,10,10,11,12,13,14,16,16","*,5,8,10,10,11,12,13,15,16,16","*,5,8,10,11,11,12,13,15,16,17","*,5,8,10,11,12,12,13,15,16,17","*,5,9,10,11,12,12,14,15,16,17","*,5,9,10,11,12,13,14,15,16,18","*,5,9,10,11,12,13,14,16,17,18","*,5,9,10,11,13,13,14,16,17,18","*,5,9,10,11,13,13,15,17,17,18","*,5,9,10,11,13,14,15,17,17,18","*,5,9,10,12,13,14,15,17,18,18","*,5,9,10,12,13,15,15,17,18,19","*,5,9,10,12,13,15,16,17,19,19","*,5,9,10,12,14,15,16,17,19,19","*,5,9,10,12,14,16,16,17,19,19","*,5,9,10,12,14,16,17,18,19,19","*,5,9,10,13,14,16,17,18,19,20","*,5,9,10,13,15,16,17,18,19,20","*,5,9,10,13,15,16,17,19,20,21","*,6,9,10,13,15,16,18,19,20,21","*,6,9,10,13,16,16,18,19,20,21","*,6,9,10,13,16,17,18,19,20,21","*,6,9,10,13,16,17,18,20,21,22","*,6,9,10,13,16,17,19,20,22,23","*,6,9,10,13,16,18,19,20,22,23","*,6,9,10,13,16,18,20,21,22,23","*,6,9,10,13,17,18,20,21,22,23","*,6,9,10,14,17,18,20,21,22,24","*,6,9,11,14,17,18,20,21,23,24","*,6,9,11,14,17,19,20,21,23,24","*,6,9,11,14,17,19,21,22,23,24","*,7,10,11,14,17,19,21,22,23,25","*,7,10,12,14,17,19,21,22,24,25","*,7,10,12,14,18,19,21,22,24,25","*,7,10,12,15,18,19,21,22,24,26","*,7,10,12,15,18,19,21,23,25,26","*,7,11,13,15,18,19,21,23,25,26","*,7,11,13,15,18,20,21,23,25,27","*,8,11,13,15,18,20,22,23,25,27","*,8,11,13,16,18,20,22,23,25,28","*,8,11,14,16,18,20,22,23,26,28","*,8,11,14,16,19,20,22,23,26,28","*,8,12,14,16,19,20,22,24,26,28","*,8,12,15,16,19,20,22,24,27,28","*,8,12,15,17,19,20,22,24,27,29","*,8,12,15,18,19,20,22,24,27,30"]},p.$$arity=0),e.def(b,"$getNewRates",m=function(t){var r,i=w,a=w,$=w,o=w,c=w,u=w,s=w,_=w,l=w,d=w,f=w,p=w;return i=[],a=[],$=[],o=[],c=[],u=[],s=[],_=[],l=[],d=[],f=[],P(t,"each",[],((r=function(e){var t=w;return null==e&&(e=w),t=e.$split(/,/),f.$push(0),i.$push(t["$[]"](1).$to_i()),a.$push(t["$[]"](2).$to_i()),$.$push(t["$[]"](3).$to_i()),o.$push(t["$[]"](4).$to_i()),c.$push(t["$[]"](5).$to_i()),u.$push(t["$[]"](6).$to_i()),s.$push(t["$[]"](7).$to_i()),_.$push(t["$[]"](8).$to_i()),l.$push(t["$[]"](9).$to_i()),d.$push(t["$[]"](10).$to_i())}).$$s=this,r.$$arity=1,r)),this.rating_table["$=="](1)&&(p=[31,(p=[32,(p=[33,10],P(d,"[]=",e.to_a(p)),p[n(p.length,1)])],P(d,"[]=",e.to_a(p)),p[n(p.length,1)])],P(d,"[]=",e.to_a(p)),n(p.length,1)),[f,f,f,i,a,$,o,c,u,s,_,l,d]},m.$$arity=1),e.def(b,"$rollDice",y=function(e,t){var r=w;return[(r=this.randomizer.$roll_barabara(2,6)).$sum(),r.$join(",")]},y.$$arity=2),void e.def(b,"$getResultText",h=function(e,t,$,o,c,u,s){var _,l=w,d=w,f=w,p=w,m=w,y=w;return(l=[]).$push("2D:["+$.$join(" ")+"]="+o.$join(",")),A(r(u,2))?(l.$push(c.$join(",")),l.$push("\u81ea\u52d5\u7684\u5931\u6557"),[l.$join(" \uff1e "),!1,!0]):(A(A(d=i(c.$size(),1))?d:t.$modifier()["$!="](0))?(f=a(c.$join(","),T(v,"Format").$modifier(t.$modifier())),A(t.$half())&&(f="("+f+")/2",A(t.$modifier_after_half()["$!="](0))&&(f=a(f,T(v,"Format").$modifier(t.$modifier_after_half())))),l.$push(f)):A(t.$half())&&(f=c.$first()+"/2",A(t.$modifier_after_half()["$!="](0))&&(f=a(f,T(v,"Format").$modifier(t.$modifier_after_half()))),l.$push(f)),A(i(s,1))&&(p=n(s,1)+"\u56de\u8ee2",l.$push(p)),m=a(e,t.$modifier()),A(t.$half())&&(m=(_=m,"number"==typeof _?_/2:_["$/"](2)).$ceil(),A(t.$modifier_after_half()["$!="](0))&&(m=a(m,t.$modifier_after_half()))),y=m.$to_s(),l.$push(y),[l.$join(" \uff1e "),i(s,1),!1])},h.$$arity=7)},Opal.modules["bcdice/game_system/sword_world/transcendent_test"]=function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>=t:e["$>="](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e-t:e["$-"](t)}var n,i,a,$,o,c,u,s,_,l,d,f,p,m,y,h=[],b=e.nil,v=e.$$,g=e.module,x=e.klass,R=e.hash2,k=e.truthy,w=e.send;return e.top.$require("bcdice/result"),n=h,i=y=[g(h[0],"BCDice")].concat(n),a=m=[g(y[0],"GameSystem")].concat(i),$=p=[x(m[0],v(m,"SwordWorld"),"SwordWorld2_0")].concat(a),d=x(p[0],null,"TranscendentTest"),f=[d].concat($),d.$$prototype.modifier=d.$$prototype.critical_value=d.$$prototype.expression=d.$$prototype.modifier_str=d.$$prototype.target=d.$$prototype.cmp_op=b,e.const_set(f[0],"RESULT_STR",R(["success","failure","super_success","critical","fumble"],{success:"\u6210\u529f",failure:"\u5931\u6557",super_success:"\u8d85\u6210\u529f",critical:"\u81ea\u52d5\u7684\u6210\u529f",fumble:"\u81ea\u52d5\u7684\u5931\u6557"}).$freeze()),e.def(d,"$initialize",o=function(e,t,r,n){var i=this;return i.critical_value=e,i.modifier=t,i.cmp_op=r,i.target=n,i.modifier_str=v(f,"Format").$modifier(i.modifier),i.expression=i.$node_expression()},o.$$arity=4),e.def(d,"$execute",c=function(n){var i,a,$,o,c=this,u=b,s=b,_=b,l=b,d=b,p=b,m=b;if(k("number"==typeof(o=c.critical_value)?o<3:o["$<"](3)))return"("+c.expression+") \uff1e \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u304c\u5c0f\u3055\u3059\u304e\u307e\u3059\u30023\u4ee5\u4e0a\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002";if(s=[u=n.$roll_barabara(2,6)],_=u["$=="]([1,1]),l=u["$=="]([6,6]),k(k($=_["$!"]())?l["$!"]():$))for(;k(t(c.$sum_of_dice(s.$last()),c.critical_value));)s.$push(n.$roll_barabara(2,6));return d=function(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}(a=c.$sum_of_dice(s),c.modifier),p=c.$result_status(d,s.$length(),_,l),m=["("+c.expression+")",""+c.$dice_str(s,a)+c.modifier_str,d,v(f,"RESULT_STR")["$[]"](p)].$compact(),w(v(f,"Result").$new(),"tap",[],((i=function(t){var n=b;return null==t&&(t=b),n=[m.$join(" \uff1e ")],w(t,"text=",e.to_a(n)),r(n.length,1),n=[p["$=="]("fumble")],w(t,"fumble=",e.to_a(n)),r(n.length,1),n=[p["$=="]("critical")],w(t,"critical=",e.to_a(n)),r(n.length,1),n=[["success","super_success","critical"]["$include?"](p)],w(t,"success=",e.to_a(n)),r(n.length,1),n=[["failure","fumble"]["$include?"](p)],w(t,"failure=",e.to_a(n)),n[r(n.length,1)]}).$$s=c,i.$$arity=1,i))},c.$$arity=1),d.$private(),e.def(d,"$node_expression",u=function(){var e,t=this;return e="2D6@"+t.critical_value+t.modifier_str,k(t.target)?""+e+t.cmp_op+t.target:e},u.$$arity=0),e.def(d,"$sum_of_dice",s=function(e){return e.$flatten().$sum()},s.$$arity=1),e.def(d,"$dice_str",_=function(e,t){var r;return""+t+w(e,"map",[],(r=function(e){return null==e&&(e=b),"["+e.$join(",")+"]"},r.$$s=this,r.$$arity=1,r)).$join()},_.$$arity=2),void e.def(d,"$result_status",l=function(e,r,n,i){var a=this,$=b;return k(a.target)?k(n)?"fumble":k(i)?"critical":k(e.$send(a.cmp_op,a.target))?k(k($=t(r,2))?t(e,41):$)?"super_success":"success":"failure":"no_target"},l.$$arity=4)},function(e){function t(e,t){return"number"==typeof e&&"number"==typeof t?e>t:e["$>"](t)}function r(e,t){return"number"==typeof e&&"number"==typeof t?e+t:e["$+"](t)}function n(e,t){return"number"==typeof e&&"number"==typeof t?e*t:e["$*"](t)}var i,a,$,o,c,u,s,_,l,d,f,p,m,y,h,b,v=e.top,g=[],x=e.nil,R=e.$$$,k=e.$$,w=e.module,T=e.klass,D=e.send2,E=e.truthy,S=e.hash2,A=e.send;v.$require("bcdice/arithmetic_evaluator"),v.$require("bcdice/game_system/SwordWorld"),v.$require("bcdice/game_system/sword_world/transcendent_test"),i=g,a=b=[w(g[0],"BCDice")].concat(i),$=h=[w(b[0],"GameSystem")].concat(a),m=T(h[0],k(h,"SwordWorld"),"SwordWorld2_0"),y=[m].concat($),m.$$prototype.randomizer=x,e.const_set(y[0],"ID","SwordWorld2.0"),e.const_set(y[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.0"),e.const_set(y[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u30682.0"),e.const_set(y[0],"HELP_MESSAGE",'\u81ea\u52d5\u7684\u6210\u529f\u3001\u6210\u529f\u3001\u5931\u6557\u3001\u81ea\u52d5\u7684\u5931\u6557\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx)\n\u3000"K\u30ad\u30fc\u30ca\u30f3\u30d0\u30fc+\u30dc\u30fc\u30ca\u30b9"\u306e\u5f62\u3067\u8a18\u5165\u3057\u307e\u3059\u3002\n\u3000\u30dc\u30fc\u30ca\u30b9\u306e\u90e8\u5206\u306b\u300cK20+K30\u300d\u306e\u3088\u3046\u306b\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u53d6\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002\n\u3000\u307e\u305f\u3001\u30dc\u30fc\u30ca\u30b9\u306f\u8907\u6570\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3082\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3068\u540c\u69d8\u306b\u3001\u4ed6\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u96a0\u308c\u3066\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2\n\n\u30fb\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306e\u8a2d\u5b9a\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306f"[\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024]"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3000\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502410\u3068\u3057\u307e\u3059\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u51e6\u7406\u304c\u5fc5\u8981\u306a\u3044\u3068\u304d\u306f13\u306a\u3069\u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002(\u9632\u5fa1\u6642\u306a\u3069\u306e\u5bfe\u5fdc)\n\u3000\u307e\u305f\u30bf\u30a4\u30d7\u306e\u8efd\u6e1b\u5316\u306e\u305f\u3081\u306b\u672b\u5c3e\u306b\u300c@\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u300d\u3067\u3082\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3000\u4f8b\uff09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u534a\u6e1b (HKx, KxH+N)\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u5148\u982d\u307e\u305f\u306f\u672b\u5c3e\u306b"H"\u3092\u3064\u3051\u308b\u3068\u3001\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3092\u632f\u3063\u3066\u6700\u7d42\u7d50\u679c\u3092\u534a\u6e1b\u3055\u305b\u307e\u3059\u3002\n\u3000\u672b\u5c3e\u306b\u3064\u3051\u305f\u5834\u5408\u3001\u76f4\u5f8c\u306b\u4fee\u6b63\u3092\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u3001\u534a\u6e1b\u5f8c\u306e\u52a0\u6e1b\u7b97\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u3053\u306e\u969b\u3001\u8907\u6570\u306e\u9805\u306b\u3088\u308b\u4fee\u6b63\u306b\u306f\u30ab\u30c3\u30b3\u3067\u56f2\u3046\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\uff08\u30ab\u30c3\u30b3\u304c\u306a\u3044\u3068\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u307e\u3059\uff09\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u3057\u3068\u6271\u308f\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H(1+1)\n\n\u30fb\u30c0\u30a4\u30b9\u76ee\u306e\u4fee\u6b63\uff08\u904b\u547d\u5909\u8ee2\u3084\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30ec\u30a4\u7528\uff09\n\u3000\u672b\u5c3e\u306b\u300c$\u4fee\u6b63\u5024\u300d\u3067\u30c0\u30a4\u30b9\u76ee\u306b\u4fee\u6b63\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\u3000$\uff0b\uff11\u3068\u4fee\u6b63\u8868\u8a18\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u306b\uff0b\u4fee\u6b63\u3001\uff04\uff19\u306e\u3088\u3046\u306b\u56fa\u5b9a\u5024\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u3092\u305d\u306e\u51fa\u76ee\u306b\u5dee\u3057\u66ff\u3048\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3057\u305f\u5834\u5408\u3067\u3082\u56fa\u5b9a\u5024\u3084\u4fee\u6b63\u5024\u306e\u9069\u7528\u306f\u6700\u521d\u306e\u4e00\u56de\u3060\u3051\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9\n\n\u30fb\u9996\u5207\u308a\u5200\u7528\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u4e0a\u6607 r10\n\u3000\u4f8b\uff09K20r10\u3000K30+24@8R10\u3000K40+24@8$12r10\n\n\u30fb\u30b0\u30ec\u30a4\u30c6\u30b9\u30c8\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u306f\u672b\u5c3e\u306b gf\n\u3000\u4f8b\uff09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r10gf\n\n\u30fb\u5a01\u529b\u8868\u30921d+sf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u3082\u7d99\u7d9a sf4\n\u3000\u4f8b\uff09k10sf4\u3000k0+5SF4@13\u3000k70+26sf3@9\n\n\u30fb\u5a01\u529b\u8868\u30921d+tf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u306f2d\u3067\u53c2\u7167 tf3\n\u3000\u4f8b\uff09k10tf3\u3000k0+5TF4@13\u3000k70+26tf3@9\n\n\u30fb\u8d85\u8d8a\u5224\u5b9a\u7528\u306b2d6\u30ed\u30fc\u30eb\u306b 2D6@10 \u66f8\u5f0f\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u4ed8\u4e0e\u304c\u53ef\u80fd\u306b\u3002\n\u3000\u4f8b\uff092D6@10\u30002D6@10+11>=30\n\n\u30fb\u6210\u9577\u3000(Gr)\n\u3000\u672b\u5c3e\u306b\u6570\u5b57\u3092\u4ed8\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u56de\u306e\u6210\u9577\u3092\u307e\u3068\u3081\u3066\u884c\u3048\u307e\u3059\u3002\n\u3000\u4f8b\uff09Gr3\n\n\u30fb\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3000(FT)\n\u3000\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30fb\u7d61\u307f\u52b9\u679c\u8868\u3000(TT)\n\u3000\u7d61\u307f\u52b9\u679c\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n'),m.$register_prefix("H?K","Gr","2D6?@\\d+","FT","TT"),e.def(m,"$initialize",o=function(t){var r=this;return o.$$p&&(o.$$p=null),D(r,e.find_super_dispatcher(r,"initialize",o,!1,!0),"initialize",[t],null),r.rating_table=2},o.$$arity=1),e.def(m,"$eval_game_system_specific_command",c=function(t){var r,n=this,i=x;return c.$$p&&(c.$$p=null),/^Gr(\d+)?/i["$==="](r=t)?E(t["$=~"](/^Gr(\d+)/i))?n.$growth(k(y,"Regexp").$last_match(1).$to_i()):n.$growth():/^2D6?@\d+/i["$==="](r)?(i=R(k(y,"Command"),"Parser").$new(/2D6?/i,S(["round_type"],{round_type:R(R(k(y,"BCDice"),"RoundType"),"CEIL")})).$enable_critical().$restrict_cmp_op_to(x,">=",">").$parse(t),E(i)?k(y,"TranscendentTest").$new(i.$critical(),i.$modify_number(),i.$cmp_op(),i.$target_number()).$execute(n.randomizer):x):"FT"["$==="](r)?n.$get_fumble_table():"TT"["$==="](r)?n.$get_tangle_table():D(n,e.find_super_dispatcher(n,"eval_game_system_specific_command",c,!1,!0),"eval_game_system_specific_command",[t],null)},c.$$arity=1),e.def(m,"$rating_parser",u=function(){return k(y,"RatingParser").$new(S(["version"],{version:"v2_0"}))},u.$$arity=0),e.def(m,"$rollDice",s=function(i,a){var $=this,o=x,c=x;return s.$$p&&(s.$$p=null),E(t(i.$semi_fixed_val(),0))?[r(o=$.randomizer.$roll_once(6),i.$semi_fixed_val()),o+","+i.$semi_fixed_val()]:E(E(c=a["$=="](0))?t(i.$tmp_fixed_val(),0):c)?[r(o=$.randomizer.$roll_once(6),i.$tmp_fixed_val()),o+","+i.$tmp_fixed_val()]:E(i.$greatest_fortune())?E(i.$greatest_fortune())?[n(o=$.randomizer.$roll_once(6),2),o+","+o]:x:D($,e.find_super_dispatcher($,"rollDice",s,!1,!0),"rollDice",[i,a],null)},s.$$arity=2),e.def(m,"$growth",_=function(t){var r;return null==t&&(t=1),A(e.Range.$new(1,t,!1),"map",[],(r=function(){return(null==r.$$s?this:r.$$s).$growth_step()},r.$$s=this,r.$$arity=0,r)).$join(" | ")},_.$$arity=-1),e.def(m,"$growth_step",l=function(){var e,t,r,n=this,i=x;return e=n.randomizer.$roll_once(6),t=n.randomizer.$roll_once(6),i=n.$get_ability_by_dice(e),r=n.$get_ability_by_dice(t),E(i["$!="](r))?"["+e+","+t+"]->("+i+" or "+r+")":"["+e+","+t+"]->("+i+")"},l.$$arity=0),e.def(m,"$get_ability_by_dice",d=function(e){return["\u5668\u7528\u5ea6","\u654f\u6377\u5ea6","\u7b4b\u529b","\u751f\u547d\u529b","\u77e5\u529b","\u7cbe\u795e\u529b"]["$[]"]("number"==typeof(t=e)?t-1:t["$-"](1));var t},d.$$arity=1),e.def(m,"$get_fumble_table",f=function(){var t,r;return r=this.$get_table_by_1d6(["\u3053\u306e\u8868\u30922\u56de\u632f\u308a\u3001\u305d\u306e\u4e21\u65b9\u3092\u9069\u7528\u3059\u308b\u3002\uff08\u540c\u3058\u51fa\u76ee\u306b\u3088\u308b\u5f71\u97ff\u306f\u7d2f\u7a4d\u3057\u306a\u3044\uff09\u3002\u3053\u306e\u81ea\u52d5\u5931\u6557\u306b\u3088\u308a\u5f97\u3089\u308c\u308b\u7d4c\u9a13\u70b9\u306f\u3001+50\u70b9\u3055\u308c\u308b","\u30c0\u30e1\u30fc\u30b8\u306b\u3001\u653b\u6483\u8005\u3092\u5f37\u5316\u3057\u3066\u3044\u308b\u300c\u5263\u306e\u304b\u3051\u3089\u300d\u306e\u6570\u304c\u8ffd\u52a0\u3055\u308c\u308b","\u30c0\u30e1\u30fc\u30b8\u306b\u3001\u653b\u6483\u8005\u306e\u300c\u30ec\u30d9\u30eb\u300d\u304c\u8ffd\u52a0\u3055\u308c\u308b","\u30c0\u30e1\u30fc\u30b8\u6c7a\u5b9a\u30922\u56de\u884c\u3044\u3001\u3088\u308a\u9ad8\u3044\u65b9\u3092\u63a1\u7528\u3059\u308b","\u5408\u7b97\u30c0\u30e1\u30fc\u30b8\u30922\u500d\u3059\u308b","\u9632\u8b77\u70b9\u7121\u52b9"]),"\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868("+(null==(t=e.to_ary(r))[1]?x:t[1])+") \u2192 "+(null==t[0]?x:t[0])},f.$$arity=0),e.def(m,"$get_tangle_table",p=function(){var t,r;return r=this.$get_table_by_1d6(["\u982d\u3084\u9854\uff1a\u7259\u3084\u565b\u307f\u3064\u304d\u306a\u3069\u306b\u304a\u3051\u308b\u547d\u4e2d\u529b\u5224\u5b9a\u53ca\u3073\u3001\u9b54\u6cd5\u306e\u884c\u4f7f\u3084\u30d6\u30ec\u30b9\u306b-2\u306e\u30da\u30ca\u30eb\u30c6\u30a3\u4fee\u6b63\u3092\u53d7\u3051\u308b","\u6b66\u5668\u3084\u76fe\uff1a\u6b66\u5668\u306e\u4f7f\u7528\u4e0d\u53ef\u3001\u53c8\u306f\u76fe\u306e\u56de\u907f\u529b\u4fee\u6b63\u53ca\u3073\u9632\u8b77\u70b9\u3092\u7121\u52b9\u5316\u3059\u308b","\u8155\u3084\u624b\uff1a\u6b66\u5668\u3084\u722a\u306a\u3069\u306b\u304a\u3051\u308b\u547d\u4e2d\u529b\u5224\u5b9a\u306b-2\u306e\u30da\u30ca\u30eb\u30c6\u30a3\u4fee\u6b63\u3001\u76fe\u3092\u6301\u3064\u8155\u65b9\u306e\u8155\u306a\u3089\u305d\u306e\u76fe\u306e\u56de\u907f\u529b\u4fee\u6b63\u53ca\u3073\u9632\u8b77\u70b9\u3092\u7121\u52b9\u5316\u3059\u308b","\u811a\u3084\u8db3\uff1a\u79fb\u52d5\u4e0d\u53ef\u3001\u66f4\u306b\u56de\u907f\u529b\u5224\u5b9a\u306b-2\u306e\u30da\u30ca\u30eb\u30c6\u30a3\u4fee\u6b63\u3092\u53d7\u3051\u308b \u203b\u4e21\u8db3\u306b\u7d61\u3093\u3067\u3082\u7d2f\u7a4d\u3057\u306a\u3044","\u80f4\u4f53\uff1a\u751f\u547d\u30fb\u7cbe\u795e\u62b5\u6297\u529b\u3092\u57fa\u6e96\u5024\u306b\u7528\u3044\u308b\u5224\u5b9a\u3092\u9664\u304d\u3001\u3042\u3089\u3086\u308b\u884c\u70ba\u5224\u5b9a\u306b-1\u306e\u30da\u30ca\u30eb\u30c6\u30a3\u4fee\u6b63\u3092\u53d7\u3051\u308b","\u7279\u6b8a\uff1a\u5c3b\u5c3e\u3084\u7ffc\u306a\u3069\u306b\u547d\u4e2d\u3002\u7d61\u3081\u3089\u308c\u305f\u90e8\u4f4d\u3092\u4f7f\u7528\u3059\u308b\u5224\u5b9a\u306b\u304a\u3044\u3066-2\u306e\u30da\u30ca\u30eb\u30c6\u30a3\u4fee\u6b63\u3001\u307e\u305f\u306f\u305d\u3053\u304c\u4f7f\u3048\u3066\u3044\u305f\u3053\u3068\u306b\u3088\u308b\u30dc\u30fc\u30ca\u30b9\u4fee\u6b63\u3092\u5931\u3046 \u203b\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u6c7a\u3081\u76f4\u3057"]),"\u7d61\u307f\u52b9\u679c\u8868("+(null==(t=e.to_ary(r))[1]?x:t[1])+") \u2192 "+(null==t[0]?x:t[0])},p.$$arity=0)}(Opal)}}]);