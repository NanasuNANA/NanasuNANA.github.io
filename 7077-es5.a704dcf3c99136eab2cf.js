(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[7077],{57077:function(D,e,t){t(93683),function(D){function e(D,e){return"number"==typeof D&&"number"==typeof e?D+e:D["$+"](e)}function t(D,e){return"number"==typeof D&&"number"==typeof e?D/e:D["$/"](e)}function r(D,e){return"number"==typeof D&&"number"==typeof e?D-e:D["$-"](e)}function a(D,e){return"number"==typeof D&&"number"==typeof e?D*e:D["$*"](e)}var n,$,i,o,l,u,c,s,_,m,f,y,T,b,d,R,g,p,h,C,x,S,v,E,P,A,H,z=[],O=D.nil,k=D.$$$,w=D.$$,B=D.module,N=D.klass,F=D.send2,j=D.truthy,Y=D.send,G=D.hash2;n=z,$=H=[B(z[0],"BCDice")].concat(n),i=A=[B(H[0],"GameSystem")].concat($),E=N(A[0],w(A,"Base"),"Dracurouge"),P=[E].concat(i),E.$$prototype.randomizer=O,D.const_set(P[0],"ID","Dracurouge"),D.const_set(P[0],"NAME","\u30c9\u30e9\u30af\u30eb\u30fc\u30b8\u30e5"),D.const_set(P[0],"SORT_KEY","\u3068\u3089\u304f\u308b\u3046\u3057\u3086"),D.const_set(P[0],"HELP_MESSAGE","\u30fb\u884c\u3044\u5224\u5b9a\uff08DRx+y\uff09\n\u3000x\uff1a\u632f\u308b\u30b5\u30a4\u30b3\u30ed\u306e\u6570\uff08\u7701\u7565\u6642\uff14\uff09\u3001y\uff1a\u6e07\u304d\u4fee\u6b63\uff08\u7701\u7565\u6642\uff10\uff09\n\u3000\u4f8b\uff09 DR\u3000DR6\u3000DR+1\u3000DR5+2\n\u30fb\u6297\u3044\u5224\u5b9a\uff08DRRx\uff09\n\u3000x\uff1a\u632f\u308b\u30b5\u30a4\u30b3\u30ed\u306e\u6570\n\u3000\u4f8b\uff09 DRR3\n\u30fb\u539f\u98a8\u666f\u8868\uff08ST\uff09\u3001\u53d9\u52f2\u8868\uff08CO\uff09\u3001\u53d9\u52f2\u5f8c\u8868\uff08CA\uff09\u3001\u9065\u304b\u904e\u53bb\u8868\uff08EP\uff09\n\u3000\u539f\u7f6a\u8868\uff08OS\uff09\u3001\u53d7\u96e3\u8868\uff08PN\uff09\u3001\u8fd1\u6cc1\u8868\uff08RS\uff09\u3001\u5e73\u548c\u306a\u904e\u53bb\u8868\uff08PP\uff09\n\u30fb\u5815\u843d\u8868\uff08CTx\uff09 x\uff1a\u6e07\u304d \uff08\u4f8b\uff09 CT3\n\u30fb\u5815\u843d\u306e\u5146\u3057\u8868\uff08CS\uff09\u3001\u62e1\u5f35\u30fb\u5815\u843d\u306e\u5146\u3057\u8868\uff08ECS\uff09\n\u30fb\u7d46\u5185\u5bb9\u6c7a\u5b9a\u8868\uff08BT\uff09\n\u30fb\u53cd\u5fdc\u8868\uff08RTxy\uff09x\uff1a\u8840\u7d71\u3001y\uff1a\u9053\u3000xy\u7701\u7565\u3067\u4e00\u62ec\u8868\u793a\n\u3000\u8840\u7d71\u3000D\uff1a\u30c9\u30e9\u30af\u3001R\uff1a\u30ed\u30fc\u30bc\u30f3\u30d6\u30eb\u30af\u3001H\uff1a\u30d8\u30eb\u30ba\u30ac\u30eb\u30c9\u3001M\uff1a\u30c0\u30b9\u30c8\u30cf\u30a4\u30e0\n\u3000\u3000\u3000\u3000A\uff1a\u30a2\u30f4\u30a1\u30ed\u30fc\u30e0\u3000N\uff1a\u30ce\u30b9\u30d5\u30a7\u30e9\u30b9\u3001G\uff1a\u30b2\u30a4\u30ba\u30f4\u30a1\u30eb\u30c8\u3001K\uff1a\u30ab\u30a4\u30f3\u30b7\u30eb\u30c8\n\u3000\u9053\u3000F\uff1a\u9818\u4e3b\u3001G\uff1a\u8fd1\u885b\u3001R\uff1a\u904d\u6b74\u3001W\uff1a\u8ce2\u8005\u3001J\uff1a\u72e9\u4eba\u3001N\uff1a\u591c\u7363\n\u3000\u3000\u3000E\uff1a\u5c06\u8ecd\u3001B\uff1a\u50e7\u6b63\u3001H\uff1a\u7a7a\u99c6\u3001K\uff1a\u8239\u9577\u3001L\uff1a\u5bf5\u7ae5\u3001V\uff1a\u4ef2\u7acb\u3001U\uff1a\u6280\u5e2b\u3001D\uff1a\u535a\u58eb\n\u3000\u3000\u3000S\uff1a\u661f\u8aad\u3001G2\uff1a\u5f8c\u898b\n\u3000\u4f8b\uff09RT\uff08\u4e00\u62ec\u8868\u793a\uff09\u3001RTDF\uff08\u30c9\u30e9\u30af\u306e\u9818\u4e3b\uff09\u3001RTAG2\uff08\u30a2\u30f4\u30a1\u30ed\u30fc\u30e0\u306e\u5f8c\u898b\u4eba\uff09\n\u30fb\u7570\u7aef\u306e\u53cd\u5fdc\u8868\uff08HRTxy\uff09x\uff1a\u8840\u7d71\u3001y\uff1a\u9053\u3000xy\u7701\u7565\u3067\u4e00\u62ec\u8868\u793a\n\u3000\u8840\u7d71\u3000L\uff1a\u7570\u7aef\u537f\u3001V\uff1a\u30f4\u30eb\u30b3\u30e9\u30af\u3001N\uff1a\u30ca\u30cf\u30c4\u30a7\u30fc\u30e9\u3001K\uff1a\u30ab\u30eb\u30f3\u30b7\u30e5\u30bf\u30a4\u30f3\n\u3000\u3000\u3000\u3000G\uff1a\u30b0\u30ea\u30de\u30eb\u30ad\u30f3\u3001S\uff1a\u30b9\u30c8\u30ea\u30ac\u3001M\uff1a\u30e1\u30ea\u30e5\u30b8\u30fc\u30cc\u3001F\uff1a\u30d5\u30a9\u30fc\u30f3\n\u3000\u3000\u3000\u3000H\uff1a\u30db\u30e0\u30f3\u30af\u30eb\u30b9\u3001E\uff1a\u30a8\u30ca\u30e1\u30eb\u30e0\u3001S2\uff1a\u30b5\u30f3\u30b0\u30a3\u30ca\u30ea\u30a8\u3001A\uff1a\u30a2\u30fc\u30eb\u30f4\n\u3000\u3000\u3000\u3000V2\uff1a\u30f4\u30a3\u30fc\u30f4\u30eb\u3001L2\uff1a\u30eb\u30fc\u30ac\u30eb\u30fc\u3001A2\uff1a\u30a2\u30eb\u30e9\u30a6\u30cd\u3001F2\uff1a\u30d5\u30ea\u30c3\u30ac\n\u3000\u9053\u3000W\uff1a\u91ce\u4f0f\u3001N\uff1a\u6d41\u6d6a\u3001S\uff1a\u5bc6\u4f7f\u3001H\uff1a\u9b54\u5973\u3001F\uff1a\u5263\u58eb\u3001X\uff1a\u691c\u4f53\n\u3000\u4f8b\uff09HRT\uff08\u4e00\u62ec\u8868\u793a\uff09\u3001HRTVW\uff08\u30f4\u30eb\u30b3\u30e9\u30af\u306e\u91ce\u4f0f\uff09\u3001HRTF2X\uff08\u30d5\u30ea\u30c3\u30ac\u306e\u691c\u4f53\uff09\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),D.def(E,"$initialize",o=function(e){var t=this;return o.$$p&&(o.$$p=null),F(t,D.find_super_dispatcher(t,"initialize",o,!1,!0),"initialize",[e],null),t.d66_sort_type=k(w(P,"D66SortType"),"NO_SORT")},o.$$arity=1),D.def(E,"$eval_game_system_specific_command",l=function(D){var e,t,r,a,n,$=this;return j(e=j(t=j(r=j(a=j(n=$.$roll_conduct_dice(D))?n:$.$roll_resist_dice(D))?a:$.$getReactionDiceCommandResult(D))?r:$.$getHeresyReactionDiceCommandResult(D))?t:$.$getCorruptionDiceCommandResult(D))?e:$.$roll_tables(D,k($.$class(),"TABLES"))},l.$$arity=1),E.$private(),D.def(E,"$roll_conduct_dice",u=function(D){var t,r=this,a=O,n=O,$=O,i=O,o=O,l=O,u=O;return a=/^DR(\d*[1-9])?(\+\d+)?$/.$match(D),j(a)?(n=j($=(t=a["$[]"](1))===O||null==t?O:Y(t,"to_i",[]))?$:4,i=a["$[]"](2).$to_i(),o=r.randomizer.$roll_barabara(n,6).$sort(),l=r.$count_glory_dice(o),o=e(o,w(P,"Array").$new(l,10)),u=r.$apply_thirsty_point(o,i),["("+D+")",n+"D6"+w(P,"Format").$modifier(i),u,"[ "+o.$join(", ")+" ]"].$compact().$join(" \uff1e ")):O},u.$$arity=1),D.def(E,"$count_glory_dice",c=function(D){var r,a;return r=D.$count(1),a=D.$count(6),e(t(r,2).$to_i(),t(a,2).$to_i())},c.$$arity=1),D.def(E,"$apply_thirsty_point",s=function(t,a){var n,$=O,i=O,o=O;return a["$=="](0)?O:(o=[$=Y(t,"rindex",[],((n=function(D){return null==D&&(D=O),"number"==typeof(e=D)?e<=6:e["$<="](6);var e}).$$s=this,n.$$arity=1,n)),e((i=Y(t,"map",[],"to_s".$to_proc()))["$[]"]($),"+"+a)],Y(i,"[]=",D.to_a(o)),r(o.length,1),o=[$,e(t["$[]"]($),a)],Y(t,"[]=",D.to_a(o)),r(o.length,1),"[ "+i.$join(", ")+" ]")},s.$$arity=2),D.def(E,"$roll_resist_dice",_=function(D){var e=O,t=O,r=O,a=O;return e=/^DRR(\d+)$/.$match(D),j(e)?((t=e["$[]"](1).$to_i())["$=="](0)&&(t=4),a=(r=this.randomizer.$roll_barabara(t,6).$sort()).$sum(),"("+D+") \uff1e "+t+"D6 \uff1e [ "+r.$join(", ")+" ] \uff1e "+a):O},_.$$arity=1),D.def(E,"$getReactionDiceCommandResult",m=function(D){var e=this,t=O,r=O,a=O,n=O,$=O;return j(D["$=~"](/^RT((\w\d*)(\w\d*))?/))?(t=w(P,"Regexp").$last_match(2),r=w(P,"Regexp").$last_match(3),a=e.$translate("Dracurouge.RT.name"),n=e.$translate("Dracurouge.RT.blood"),$=e.$translate("Dracurouge.RT.style"),e.$getReactionText(a,t,r,n,$)):O},m.$$arity=1),D.def(E,"$getHeresyReactionDiceCommandResult",f=function(D){var e=this,t=O,r=O,a=O,n=O,$=O;return j(D["$=~"](/^HRT((\w\d*)(\w\d*))?/))?(t=w(P,"Regexp").$last_match(2),r=w(P,"Regexp").$last_match(3),a=e.$translate("Dracurouge.HRT.name"),n=e.$translate("Dracurouge.HRT.blood"),$=e.$translate("Dracurouge.HRT.style"),e.$getReactionText(a,t,r,n,$)):O},f.$$arity=1),D.def(E,"$getReactionText",y=function(D,t,n,$,i){var o,l,u,c,s,_,m=this,f=O,y=O,T=O,b=O;if(!j(m.$checkTypeText(t,$))||!j(m.$checkTypeText(n,i)))return O;if(u=""+(o=m.randomizer.$roll_once(6))+(l=m.randomizer.$roll_once(6)),c="number"==typeof(_=o)?_<4:_["$<"](4),f=j(c)?$:i,y=j(c)?t:n,s=e(r(l,1),a(j(c)?r(o,1):r(o,4),6)),m.$debug("index",s),j(y["$nil?"]()))T=m.$getReactionTextFull(f,s);else{if(b=f["$[]"](y.$to_sym()),j(b["$nil?"]()))return O;T=m.$getReactionTex(b,s)}return D+"("+u+") \uff1e "+T},y.$$arity=5),D.def(E,"$checkTypeText",T=function(D,e){return!!j(D["$nil?"]())||e.$keys()["$include?"](D.$to_sym())},T.$$arity=2),D.def(E,"$getReactionTextFull",b=function(D,e){var t,r=O;return r=[],Y(D,"each_value",[],((t=function(D){return null==D&&(D=O),r["$<<"]((null==t.$$s?this:t.$$s).$getReactionTex(D,e))}).$$s=this,t.$$arity=1,t)),r.$join("\uff0f")},b.$$arity=2),D.def(E,"$getReactionTex",d=function(D,e){return D["$[]"]("name")+"\uff1a"+D["$[]"]("table")["$[]"](e)},d.$$arity=2),D.def(E,"$getCorruptionDiceCommandResult",R=function(D){var e=this,t=O,a=O,n=O,$=O,i=O,o=O,l=O;return j(D["$=~"](/^CT(\d+)$/))?(t=w(P,"Regexp").$last_match(1).$to_i(),a=e.$translate("Dracurouge.CT.name"),n=[[0,e.$translate("Dracurouge.CT.table.0")],[1,e.$translate("Dracurouge.CT.table.1")],[3,e.$translate("Dracurouge.CT.table.3")],[5,e.$translate("Dracurouge.CT.table.5")],[6,e.$translate("Dracurouge.CT.table.6")],[7,e.$translate("Dracurouge.CT.table.7")],[8,e.$translate("Dracurouge.CT.table.8")],[99,e.$translate("Dracurouge.CT.table.99")]],i=($=e.randomizer.$roll_barabara(2,6)).$sum(),o=$.$join(","),l=r(i,t),e.$debug("index",l),"2D6["+o+"]-"+t+" \uff1e  "+a+"("+l+") \uff1e "+e.$get_table_by_number(l,n)):O},R.$$arity=1),g=P,S=N(P[0],null,"YearTable"),v=[S].concat(g),S.$$prototype.items=S.$$prototype.name=S.$$prototype.year_title=O,D.defs(S,"$from_i18n",p=function(D,e,t){var r,a=O;return r=(a=w(v,"I18n").$translate(D,G(["locale","raise"],{locale:e,raise:!0})))["$[]"]("items").$zip(t),this.$new(a["$[]"]("name"),a["$[]"]("year_title"),r)},p.$$arity=3),D.def(S,"$initialize",h=function(D,e,t){var r=this;return r.name=D,r.year_title=e,r.items=t.$freeze()},h.$$arity=3),D.def(S,"$roll",C=function(t){var n,$,i,o,l,u,c,s,_,m=this,f=O;return $=t.$roll_barabara(2,6),l=null==(n=D.to_ary($))[1]?O:n[1],u=e(a(r(o=null==n[0]?O:n[0],1),6),r(l,1)),$=m.items["$[]"](u),c=null==(n=D.to_ary($))[0]?O:n[0],f=Y(s=null==n[1]?O:n[1],"gsub",[/\d+D6+/],((i=function(D){return null==D&&(D=O),(null==i.$$s?this:i.$$s).$roll_d6x(D,t)}).$$s=m,i.$$arity=1,i)),_=w(v,"ArithmeticEvaluator").$eval(f.$gsub("\xd7","*")),m.name+"("+o+l+") \uff1e "+c+" \uff1e "+m.year_title+"\uff1a"+s+" \uff1e ("+f+") \uff1e "+m.year_title+"\uff1a"+_+"\u5e74"},C.$$arity=1),S.$private(),D.def(S,"$roll_d6x",x=function(e,t){var r,n,$,i=O,o=O;return n=e.$split("D",2),r=D.to_ary(n),o=null==r[1]?O:r[1],i=(i=null==r[0]?O:r[0]).$to_i(),Y(w(v,"Array"),"new",[i],(($=function(){var D,e=null==$.$$s?this:$.$$s;return Y(t.$roll_barabara(o.$length(),6).$reverse().$map(),"with_index",[],(D=function(D,e){return null==D&&(D=O),null==e&&(e=O),a(D,10["$**"](e).$to_i())},D.$$s=e,D.$$arity=2,D)).$sum()}).$$s=this,$.$$arity=0,$)).$sum()},x.$$arity=2),function(e,t){var r,a=[e].concat(t);e.$private(),D.def(e,"$translate_tables",r=function(D){return G(["CO","CA","EP","OS","RS","PP","ST","PN","CS","ECS","BT"],{CO:w(a,"YearTable").$from_i18n("Dracurouge.table.CO",D,["7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","7+1D6\xd71D6","10+1D6\xd71D6","7+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","10+2D6","7+1D6\xd71D6","14+1D6\xd71D6","18+1D6\xd71D6","10+2D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","30+1D6\xd71D6","14+1D6\xd71D6","7+1D6\xd71D6","14+1D6\xd71D6","10+2D6","14+1D6\xd71D6","14+1D6\xd71D6","7+4D6","14+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6"]),CA:w(a,"YearTable").$from_i18n("Dracurouge.table.CA",D,["2D6\xd710","1D6\xd71D6","1D6\xd71D6","2D6\xd75","2D6\xd710","1D6\xd71D6","2D6\xd710","1D6\xd75","2D6\xd710","2D6\xd73","1D6\xd71D6","1D6\xd71D6","2D6\xd710","2D6\xd710","2D6\xd720","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd73","1D6\xd71D6","1D6\xd75","2D6\xd710","1D6\xd71D6","2D6\xd710","2D6","1D6\xd71D6","2D6","1D6\xd71D6","2D6\xd720","2D6\xd710","1D6\xd71D6","2D6\xd750","2D6\xd710","1D6\xd71D6","2D6\xd75","1D6\xd71D6"]),EP:w(a,"YearTable").$from_i18n("Dracurouge.table.EP",D,["1D66+1300","1D666","1D666","1D666","1D66+1250","1D666","3D6\xd7100","2D6\xd7100","1D66+1210","1D666","2D6\xd7100","3D6\xd7100","1D66+1300","2D6\xd7100","1D6+1250","1D666","1D666","1D666","1D66+1250","2D6\xd7100","1D666","3D6\xd7100","2D6\xd7100","2D6\xd7100","1D6\xd7150","2D6\xd7100","1D66+1250","1D66+400","1212","2D6\xd7100","2D6\xd7100","1D66\xd710","3D6\xd7100","3D6\xd7100","1D66+1300","1D66+1833"]),OS:w(a,"YearTable").$from_i18n("Dracurouge.table.OS",D,["7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","13+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","10+1D6\xd71D6","7+1D6\xd71D6","15+1D6\xd71D6","6+2D6","7+1D6\xd71D6","7+1D6\xd71D6","13+1D6\xd71D6","35+1D6\xd71D6","9+2D6","13+1D6\xd71D6","9+2D6","6+2D6","7+1D6\xd71D6","7+2D6","7+1D6\xd71D5","7+1D6\xd71D6","13+1D6\xd71D6","7+1D6\xd71D6"]),RS:w(a,"YearTable").$from_i18n("Dracurouge.table.RS",D,["2D6\xd710","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","3D6\xd730","3D6\xd730","2D6\xd710","2D6\xd710","2D6\xd710","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1","2D6\xd710","2D6\xd720","1D6\xd71D6","1D6\xd71D6","3D6\xd730","3D6\xd720","1D6\xd71D6","3D6\xd730","3D6\xd720","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1D6\xd71D6","1D6\xd710","2D6\xd710","3D6\xd750","1D6\xd71D6","3D6\xd720","2D6\xd710","1D6\xd71D6","3D6\xd750"]),PP:w(a,"YearTable").$from_i18n("Dracurouge.table.PP",D,["8+2D6","6+2D6","7+1D6\xd71D6","15+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","6+2D6","7+1D6\xd71D6","9+2D6","15+1D6\xd71D6","9+3D6","7+1D6\xd71D6","10+1D6\xd71D6","9+2D6","9+2D6","9+3D6","6+2D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","6+2D6","10+1D6\xd71D6","7+1D6\xd71D6","12+1D6\xd71D6","15+1D6\xd71D6","9+3D6","7+1D6\xd71D6","7+1D6\xd71D6","7+1D6\xd71D6","12+4D6"]),ST:k(w(a,"DiceTable"),"D66Table").$from_i18n("Dracurouge.table.ST",D),PN:k(w(a,"DiceTable"),"D66Table").$from_i18n("Dracurouge.table.PN",D),CS:k(w(a,"DiceTable"),"Table").$from_i18n("Dracurouge.table.CS",D),ECS:k(w(a,"DiceTable"),"D66Table").$from_i18n("Dracurouge.table.ECS",D),BT:k(w(a,"DiceTable"),"Table").$from_i18n("Dracurouge.table.BT",D)})},r.$$arity=1)}(D.get_singleton_class(E),P),D.const_set(P[0],"TABLES",E.$translate_tables("ja_jp")),E.$register_prefix("DR","RT","HRT","CT",w(P,"TABLES").$keys())}(Opal)}}]);