(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2460],{2439:(l,ee,re)=>{"use strict";re.r(ee),re.d(ee,{default:()=>E});var $=re(5861),P=re(653),Q=re.n(P);class E extends(Q()){dynamicImportI18n(B,R){return(0,$.Z)(function*(){return(yield re(6507)(`./${B}.${R}.json`)).default})()}dynamicImport(B){return(0,$.Z)(function*(){yield re(85)(`./${B}`)})()}}},8547:(l,ee,re)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),re(709),re(3521),re(4496),re(8823);var $=re(4837),P=re(7324),Q=function(){function E(C,B){this.internal=B??$.BCDice.Base.$new(C)}return E.eval=function(C){var B=$.BCDice.Base.$eval(C);return P.parseResult(B)},Object.defineProperty(E.prototype,"randomizer",{get:function(){return this.internal.randomizer},enumerable:!1,configurable:!0}),E.prototype.eval=function(){var C=this.internal.$eval();return P.parseResult(C)},E}();ee.default=Q},709:(l,ee,re)=>{re(3986),Opal.queue(function($){var W,A,T,b,g,F,k,L,P=$.module,Q=$.ensure_kwargs,E=$.truthy,C=$.thrower,B=$.def,R=[],Y=$.nil,H=$.$$$;return W=R,A=L=[P(R[0],"BCDice")].concat(W),k=[F=P(L[0],"ArithmeticEvaluator")].concat(A),b=[T=$.get_singleton_class(F)].concat(k),g=$.$r(b),B(T,"$eval",function(S,_){try{C("eval_return");var f,z=Y;return null==(f=(_=Q(_)).$$smap.round_type)&&(f=H(g("RoundType"),"FLOOR")),E(S)&&E(z=g("Arithmetic").$eval(S,f))?z:0}catch(v){if(v===$.t_eval_return)return v.$v;throw v}},-2)})},4496:(l,ee,re)=>{re(3986),Opal.modules.json=function($){var k,F,P=$.module,Q=$.klass,E=$.send,C=$.Object,B=$.hash2,R=$.eqeqeq,Y=$.defs,H=$.truthy,Z=$.def,W=$.return_val,U=[],L=$.nil,w=$.$$$;return function(A,F){var T,k=P(A,"JSON"),I=[k].concat(F),b=$.$r(I);Q(I[0],b("StandardError"),"JSONError"),Q(I[0],b("JSONError"),"ParserError");var g=$.hasOwnProperty;function q(_){try{return JSON.parse(_)}catch(p){k.$raise(w(b("JSON"),"ParserError"),p.message)}}function S(_,p){var f,z,v,N,h,M;switch(typeof _){case"string":case"number":return _;case"boolean":return!!_;case"undefined":return L;case"object":if(!_)return L;if(_.$$is_array){for(z=p.array_class.$new(),N=0,h=_.length;N<h;N++)z.$push(S(_[N],p));return z}for(M in v=p.object_class.$new(),_)g.call(_,M)&&(T=[M,S(_[M],p)],E(v,"[]=",T));return p.parse||(f=v["$[]"](b("JSON").$create_id()))==L?v:C.$const_get(f).$json_create(v)}}$.get_singleton_class(k).$attr_accessor("create_id"),k["$create_id="]("json_class"),Y(k,"$[]",function(p,f){return null==f&&(f=B([],{})),R(b("String"),p)?this.$parse(p,f):this.$generate(p,f)},-2),Y(k,"$parse",function(p,f){return null==f&&(f=B([],{})),this.$from_object(q(p),f.$merge(B(["parse"],{parse:!0})))},-2),Y(k,"$parse!",function(p,f){return null==f&&(f=B([],{})),this.$parse(p,f)},-2),Y(k,"$load",function(p,f){return null==f&&(f=B([],{})),this.$from_object(q(p),f)},-2),Y(k,"$from_object",function(p,f){return null==f&&(f=B([],{})),H(f["$[]"]("object_class"))||f["$[]="]("object_class",b("Hash")),H(f["$[]"]("array_class"))||f["$[]="]("array_class",b("Array")),S(p,f.$$smap)},-2),Y(k,"$generate",function(p,f){return null==f&&(f=B([],{})),p.$to_json(f)},-2),Y(k,"$dump",function(p,f,z){var N;return null==f&&(f=L),null==z&&(z=L),N=this.$generate(p),H(f)?(H(f["$responds_to?"]("to_io"))&&(f=f.$to_io()),f.$write(N),f):N},-2)}(U[0],U),k=Q(U[0],null,"Object"),Z(k,"$to_json",function(){return this.$to_s().$to_json()}),F=P(U[0],"Enumerable"),Z(F,"$to_json",function(){return this.$to_a().$to_json()}),function(A,F){var k=Q(A,null,"Array");Z(k,"$to_json",function(){for(var b=[],g=0,q=this.length;g<q;g++)b.push(this[g].$to_json());return"["+b.join(",")+"]"})}(U[0]),function(A,F){var k=Q(A,null,"Boolean");Z(k,"$to_json",function(){return 1==this?"true":"false"})}(U[0]),function(A,F){var k=Q(A,null,"Hash");Z(k,"$to_json",function(){for(var _,p,b=[],g=0,q=this.$$keys,S=q.length;g<S;g++)(_=q[g]).$$is_string?p=this.$$smap[_]:(p=_.value,_=_.key),b.push(_.$to_s().$to_json()+":"+p.$to_json());return"{"+b.join(",")+"}"})}(U[0]),function(A,F){var k=Q(A,null,"NilClass");Z(k,"$to_json",W("null"))}(U[0]),function(A,F){var k=Q(A,null,"Numeric");Z(k,"$to_json",function(){return this.toString()})}(U[0]),function(A,F){var k=Q(A,null,"String");Z(k,"$to_json",function(){return JSON.stringify(this)})}(U[0]),function(A,F){var k=Q(A,null,"Time");Z(k,"$to_json",function(){return this.$strftime("%FT%T%z").$to_json()})}(U[0]),function(A,F){var k=Q(A,null,"Date");return Z(k,"$to_json",function(){return this.$to_s().$to_json()}),Z(k,"$as_json",function(){return this.$to_s()})}(U[0])},Opal.modules.i18n=function($){var g,_,f,z,q,S,P=$.module,Q=$.class_variable_set,E=$.class_variable_get,C=$.def,B=$.truthy,R=$.hash2,Y=$.send,H=$.ensure_kwargs,Z=$.kwrestargs,W=$.to_a,L=$.alias,w=$.klass,A=$.return_val,k=[],T=$.nil,I=$.$$$;return $.top.$require("json"),g=k,S=[q=P(k[0],"I18n")].concat(g),_=$.get_singleton_class(q),f=[_].concat(S),z=$.$r(f),Q(f[1],"@@load_path",[]),Q(f[1],"@@table",T),C(_,"$load_path",function(){return E(f[1],"@@load_path",!1)}),C(_,"$default_locale",function(){return E(f[1],"@@default_locale",!1)}),C(_,"$default_locale=",function(N){return Q(f[1],"@@default_locale",N)}),C(_,"$fallbacks",function(){return I(I(z("I18n"),"Locale"),"Fallbacks").$new()}),C(_,"$load_default_translation",function(){return B(E(f[1],"@@table",!1)["$nil?"]())?(Q(f[1],"@@table",R([],{})),this.$load_translation(JSON.stringify(re(6884)))):T}),C(_,"$load_translation",function(N){var M;return this.$load_default_translation(),M=z("JSON").$parse(N,R(["symbolize_names"],{symbolize_names:!0})),Q(f[1],"@@table",Y(E(f[1],"@@table",!1),"merge",[M],function(d,a,r){return null==d&&(d=T),null==a&&(a=T),null==r&&(r=T),a.$merge(r)}))}),C(_,"$clear_translate_table",function(){return Q(f[1],"@@table",T)}),C(_,"$translate",function(N,h){var M,m,a,r,e=T,s=T,t=T;null==(M=(h=H(h)).$$smap.locale)&&(M=T),m=Z(h,{locale:!0}),this.$load_default_translation(),a=Y(N.$split("."),"map",[],"to_sym".$to_proc()),r=E(f[1],"@@table",!1),e=E(f[1],"@@default_locale",!1),s=B(t=Y(r,"dig",[M].concat(W(a))))?t:Y(r,"dig",[e].concat(W(a)));try{B(s["$is_a?"](z("String")))&&(s=this.$format(s,$.to_hash(m)))}catch(n){if(!$.rescue(n,[z("ArgumentError"),z("KeyError")]))throw n;$.pop_exception()}return B(t=s)?t:m["$[]"]("default")},-2),L(_,"t","translate"),function(_,p){var N,h,M,z=[P(_,"Locale")].concat(p),v=$.$r(z);N=z[0],h=v("Hash"),M=w(N,h,"Fallbacks"),C(M,"$defaults=",A(T))}(S[0],S),function(_,p){var z=[P(_,"Backend")].concat(p);P(z[0],"Simple")}(S[0],S),function(_,p){var v,f=P(_,"Thread");return[f].concat(p),v=$.get_singleton_class(f),C(v,"$current",function(){return R(["i18n_fallbacks"],{i18n_fallbacks:T})})}(S[0],S)},Opal.modules["i18n/backend/fallbacks"]=function($){var I,q,_,p,b,g,P=$.module,Q=$.class_variable_set,E=$.truthy,C=$.class_variable_get,B=$.def,R=$.send,Y=$.send2,H=$.find_super,Z=$.hash2,W=$.find_block_super,U=$.neqeq,L=$.thrower,w=$.return_val,A=[],F=$.nil,k=$.$$$;return I=A,g=[b=P(A[0],"I18n")].concat(I),Q(g[0],"@@fallbacks",F),q=$.get_singleton_class(b),_=[q].concat(g),p=$.$r(_),B(q,"$fallbacks",function(){var v=F;return Q(_[1],"@@fallbacks",E(null!=_[1].$$cvars["@@fallbacks"]?"class variable":F)&&E(v=C(_[1],"@@fallbacks",!1))?v:k(k(p("I18n"),"Locale"),"Fallbacks").$new()),E(v=p("Thread").$current()["$[]"]("i18n_fallbacks"))?v:C(_[1],"@@fallbacks",!1)}),B(q,"$fallbacks=",function(z){var v;return Q(_[1],"@@fallbacks",E(z["$is_a?"](p("Array")))?k(k(p("I18n"),"Locale"),"Fallbacks").$new(z):z),v=["i18n_fallbacks",C(_[1],"@@fallbacks",!1)],R(p("Thread").$current(),"[]=",v),v[v.length-1]}),function(q,S){var z,v,N,h,p=[P(q,"Backend")].concat(S);return z=p,N=[v=P(p[0],"Fallbacks")].concat(z),h=$.$r(N),B(v,"$translate",function M(m,d,a){try{var r=L("return"),e=M.$$p||F,s=this,t=F,n=F;return M.$$p=null,null==a&&(a=h("EMPTY_HASH")),E(a.$fetch("fallback",!0))?E(a["$[]"]("fallback_in_progress"))?Y(s,H(s,"translate",M,!1,!0),"translate",[m,d,a],e):(E(a["$[]"]("default"))&&(t=s["$extract_non_symbol_default!"](a)),n=a.$merge(Z(["fallback_in_progress"],{fallback_in_progress:!0})),R(h("I18n").$fallbacks()["$[]"](m),"each",[],function i(c){var o=null==i.$$s?this:i.$$s;null==c&&(c=F);try{return R(o,"catch",["exception"],function x(){var j=null==x.$$s?this:x.$$s,O=F;if(O=Y(j,W(j,"translate",x.$$def||i.$$def||M,!1,!1),"translate",[c,d,n],null),E(O["$nil?"]()))return F;U(m.$to_s(),c.$to_s())&&j.$on_fallback(m,c,d,a),r.$throw(O)},{$$s:o,$$ret:r})}catch(x){if(!$.rescue(x,[k(h("I18n"),"InvalidLocale")]))throw x;try{return F}finally{$.pop_exception()}}},{$$s:s}),E(a["$key?"]("default"))&&E(a["$[]"]("default")["$nil?"]())?F:E(t)?Y(s,H(s,"translate",M,!1,!0),"translate",[m,F,a.$merge(Z(["default"],{default:t}))],null):s.$throw("exception",k(h("I18n"),"MissingTranslation").$new(m,d,a))):Y(s,H(s,"translate",M,!1,!0),"translate",[m,d,a],e)}catch(i){if(i===r)return i.$v;throw i}},-3),B(v,"$extract_non_symbol_default!",function(m){var a,d=F;return d=[m["$[]"]("default")].$flatten(),a=R(d,"detect",[],function(e){return null==e&&(e=F),e["$is_a?"](h("Symbol"))["$!"]()}),E(a)&&m["$[]="]("default",d["$[]"](0,d.$index(a))),a}),B(v,"$exists?",function M(m,d,a){try{var r=L("return"),e=M.$$p||F,s=this;return M.$$p=null,null==a&&(a=h("EMPTY_HASH")),E(a.$fetch("fallback",!0))?(R(h("I18n").$fallbacks()["$[]"](m),"each",[],function t(n){var i=null==t.$$s?this:t.$$s;null==n&&(n=F);try{if(!E(Y(i,W(i,"exists?",t.$$def||M,!1,!1),"exists?",[n,d],null)))return F;r.$throw(!0)}catch(c){if(!$.rescue(c,[k(h("I18n"),"InvalidLocale")]))throw c;try{return F}finally{$.pop_exception()}}},{$$s:s,$$ret:r}),!1):Y(s,H(s,"exists?",M,!1,!0),"exists?",[m,d,a],e)}catch(t){if(t===r)return t.$v;throw t}},-3),v.$private(),B(v,"$on_fallback",w(F))}(g[0],g)},Opal.modules["bcdice/randomizer"]=function($){var b,f,z,v,N,h,q,S,Q=$.klass,E=$.const_set,C=$.def,B=$.truthy,R=$.rb_gt,Y=$.rb_plus,H=$.rb_le,Z=$.send,W=$.rb_minus,U=$.eqeq,L=$.rb_times,w=$.eqeqeq,A=$.rb_ge,F=[],k=$.nil,T=$.$$$;return b=F,q=[(0,$.module)(F[0],"BCDice")].concat(b),S=$.$r(q),f=q,v=[z=Q(q[0],null,"Randomizer")].concat(f),N=$.$r(v),(h=z.$$prototype).rand_results=h.detailed_rand_results=k,E(v[0],"UPPER_LIMIT_DICE_TIMES",200),E(v[0],"UPPER_LIMIT_DICE_SIDES",1e4),E(v[0],"UPPER_LIMIT_RANDS",1e4),C(z,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),z.$attr_reader("rand_results"),z.$attr_reader("detailed_rand_results"),E(v[0],"DetailedRandResult",N("Struct").$new("kind","sides","value")),C(z,"$roll_barabara",function(m,d){var a=this;return B(R(Y(a.rand_results.$size(),m),N("UPPER_LIMIT_RANDS")))&&a.$raise(N("TooManyRandsError")),B(H(m,0))||B(R(m,N("UPPER_LIMIT_DICE_TIMES")))?[]:Z(N("Array"),"new",[m],function r(){return(null==r.$$s?this:r.$$s).$roll_once(d)},{$$s:a})}),C(z,"$roll_sum",function(m,d){return this.$roll_barabara(m,d).$sum()}),C(z,"$roll_once",function(m){var a=k;return B(H(m,0))||B(R(m,N("UPPER_LIMIT_DICE_SIDES")))?0:(a=this.$rand_inner(m),this.$push_to_detail("normal",m,a),a)}),C(z,"$roll_index",function(m){return W(this.$roll_once(m),1)}),C(z,"$roll_tens_d10",function(){var a,d=k;return d=this.$rand_inner(10),U(d,10)&&(d=0),a=L(d,10),this.$push_to_detail("tens_d10",10,a),a}),C(z,"$roll_d9",function(){var d;return d=W(this.$rand_inner(10),1),this.$push_to_detail("d9",10,d),d}),C(z,"$roll_d66",function(m){var r,a=k;return a=Z(N("Array"),"new",[2],function e(){return(null==e.$$s?this:e.$$s).$roll_once(6)},{$$s:this}),w(T(N("D66SortType"),"ASC"),r=m)?a["$sort!"]():w(T(N("D66SortType"),"DESC"),r)&&a["$sort!"]()["$reverse!"](),Y(L(a["$[]"](0),10),a["$[]"](1))}),z.$private(),C(z,"$rand_inner",function(m){var a,d=this;return B(A(d.rand_results.$size(),N("UPPER_LIMIT_RANDS")))&&d.$raise(N("TooManyRandsError")),a=d.$random(m),d.rand_results["$<<"]([a,m]),a}),C(z,"$random",function(m){return Y(N("Kernel").$rand(m),1)}),C(z,"$push_to_detail",function(m,d,a){var e;return e=N("DetailedRandResult").$new(m,d,a),this.detailed_rand_results.$push(e)}),Q(q[0],S("StandardError"),"TooManyRandsError"),k},Opal.modules["bcdice/dice_table/roll_result"]=function($){var Z,w,I,b,g,q,S,F,U,P=$.module,Q=$.klass,E=$.def,C=$.truthy,B=$.return_val,R=[],Y=$.nil;return Z=R,w=U=[P(R[0],"BCDice")].concat(Z),I=F=[P(U[0],"DiceTable")].concat(w),g=[b=Q(F[0],null,"RollResult")].concat(I),q=$.$r(g),(S=b.$$prototype).table_name=S.value=S.body=Y,E(b,"$initialize",function(p,f,z){var v=this;return v.table_name=p,v.value=f,v.body=z}),b.$attr_reader("table_name"),b.$attr_reader("value"),b.$attr_reader("body"),E(b,"$to_s",function(){var p=this;return p.table_name+"("+p.value+") \uff1e "+p.body}),E(b,"$last_body",function(){var p=this;return C(p.body["$is_a?"](q("RollResult")))?p.body.$last_body():p.body}),E(b,"$empty?",B(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function($){var Z,w,I,b,g,q,S,F,U,P=$.module,Q=$.klass,E=$.truthy,C=$.def,B=$.rb_minus,R=[],Y=$.nil;return Z=R,w=U=[P(R[0],"BCDice")].concat(Z),I=F=[P(U[0],"DiceTable")].concat(w),g=[b=Q(F[0],null,"ChainTable")].concat(I),q=$.$r(g),(S=b.$$prototype).times=S.sides=S.items=S.name=Y,C(b,"$initialize",function(p,f,z){var v=this,N=Y;return v.name=p,v.items=z.$freeze(),N=/(\d+)D(\d+)/i.$match(f),E(N)||v.$raise(q("ArgumentError"),"Unexpected table type: "+f),v.times=N["$[]"](1).$to_i(),v.sides=N["$[]"](2).$to_i()}),C(b,"$roll",function(p){var z,v,f=this,N=Y;return z=p.$roll_sum(f.times,f.sides),v=B(z,f.times),N=f.items["$[]"](v),E(N["$respond_to?"]("roll"))&&(N=N.$roll(p)),q("RollResult").$new(f.name,z,N)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function($){var L,k,q,S,_,p,f,I,A,P=$.module,Q=$.klass,E=$.hash2,C=$.defs,B=$.def,R=$.rb_plus,Y=$.rb_times,H=$.rb_minus,Z=[],W=$.nil;return L=Z,k=A=[P(Z[0],"BCDice")].concat(L),q=I=[P(A[0],"DiceTable")].concat(k),_=[S=Q(I[0],null,"D66GridTable")].concat(q),p=$.$r(_),(f=S.$$prototype).name=f.items=W,C(S,"$from_i18n",function(v,N){var M=W;return M=p("I18n").$t(v,E(["locale","raise"],{locale:N,raise:!0})),this.$new(M["$[]"]("name"),M["$[]"]("items"))}),B(S,"$initialize",function(v,N){return this.name=v,this.items=N.$freeze()}),B(S,"$roll",function(v){var h,M,m,d,a;return h=v.$roll_once(6),M=v.$roll_once(6),m=R(Y(h,10),M),d=H(h,1),a=H(M,1),p("RollResult").$new(this.name,m,this.items["$[]"](d)["$[]"](a))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function($){var W,A,g,q,S,_,k,T,L,P=$.module,Q=$.klass,E=$.hash2,C=$.defs,B=$.def,Y=[],H=$.nil;return $.top.$require("bcdice/dice_table/d66_grid_table"),W=Y,A=L=[P(Y[0],"BCDice")].concat(W),k=[P(L[0],"DiceTable")].concat(A),T=$.$r(k),g=k,S=[q=Q(k[0],T("D66GridTable"),"D66HalfGridTable")].concat(g),_=$.$r(S),C(q,"$from_i18n",function(f,z){var N=H;return N=_("I18n").$t(f,E(["locale","raise"],{locale:z,raise:!0})),this.$new(N["$[]"]("name"),N["$[]"]("items_1_2_3"),N["$[]"]("items_4_5_6"))}),B(q,"$initialize",function(f,z,v){return this.name=f,this.items=[z,z,z,v,v,v].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function($){var W,A,g,q,S,_,k,T,L,P=$.module,Q=$.klass,E=$.hash2,C=$.defs,B=$.def,Y=[],H=$.nil;return $.top.$require("bcdice/dice_table/d66_grid_table"),W=Y,A=L=[P(Y[0],"BCDice")].concat(W),k=[P(L[0],"DiceTable")].concat(A),T=$.$r(k),g=k,S=[q=Q(k[0],T("D66GridTable"),"D66OneThirdTable")].concat(g),_=$.$r(S),C(q,"$from_i18n",function(f,z){var N=H;return N=_("I18n").$t(f,E(["locale","raise"],{locale:z,raise:!0})),this.$new(N["$[]"]("name"),N["$[]"]("items_1_2"),N["$[]"]("items_3_4"),N["$[]"]("items_5_6"))}),B(q,"$initialize",function(f,z,v,N){return this.name=f,this.items=[z,z,v,v,N,N].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function($){var A,I,_,p,f,z,v,g,k,P=$.module,Q=$.klass,E=$.hash2,C=$.defs,B=$.def,R=$.eqeqeq,Y=$.rb_plus,H=$.rb_times,Z=$.truthy,W=[],U=$.nil,L=$.$$$;return A=W,I=k=[P(W[0],"BCDice")].concat(A),_=g=[P(k[0],"DiceTable")].concat(I),f=[p=Q(g[0],null,"D66Table")].concat(_),z=$.$r(f),(v=p.$$prototype).sort_type=v.items=v.name=U,C(p,"$from_i18n",function(h,M){var a,d=U;return d=z("I18n").$t(h,E(["locale"],{locale:M})),a=z("D66SortType").$const_get(d["$[]"]("d66_sort_type")),this.$new(d["$[]"]("name"),a,d["$[]"]("items"))}),B(p,"$initialize",function(h,M,m){var d=this;return d.name=h,d.sort_type=M,d.items=m.$freeze()}),B(p,"$roll",function(h){var M=this,m=U,d=U,a=U,r=U;return m=h.$roll_barabara(2,6),R(L(z("D66SortType"),"ASC"),d=M.sort_type)?m["$sort!"]():R(L(z("D66SortType"),"DESC"),d)&&m["$sort!"]()["$reverse!"](),a=Y(H(m["$[]"](0),10),m["$[]"](1)),r=Z(d=M.items["$[]"](a))?d:M.items["$[]"](a.$to_s()),Z(r["$respond_to?"]("roll"))&&(r=r.$roll(h)),z("RollResult").$new(M.name,a,r)}),B(p,"$choice",function(h){return z("RollResult").$new(this.name,h,this.items["$[]"](h))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function($){var F,b,q,S,T,P=$.module,Q=$.klass,E=$.hash2,C=$.send,B=$.to_ary,R=$.rb_plus,Y=$.rb_times,H=$.send2,Z=$.find_super,W=$.def,L=[],w=$.nil;return $.top.$require("bcdice/dice_table/d66_table"),F=L,b=T=[P(L[0],"BCDice")].concat(F),q=[P(T[0],"DiceTable")].concat(b),S=$.$r(q),W(Q(q[0],S("D66Table"),"D66LeftRangeTable"),"$initialize",function z(v,N,h){var d;return z.$$p=null,d=E([],{}),C(h,"each",[],function(r){var e,n;return null==r&&(r=w),e=B(r),n=null==e[1]?w:e[1],C(null==e[0]?w:e[0],"each",[],function(c){return null==c&&(c=w),C(n,"each_with_index",[],function(x,j){var O,te;return null==x&&(x=w),null==j&&(j=w),te=R(Y(c,10),R(j,1)),C(d,"[]=",O=[te,x]),O[O.length-1]})})}),H(this,Z(this,"initialize",z,!1,!0),"initialize",[v,N,d],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function($){var w,T,S,_,p,f,z,b,F,P=$.module,Q=$.klass,E=$.hash2,C=$.defs,B=$.def,R=$.truthy,Y=$.rb_minus,H=$.rb_plus,Z=$.rb_times,W=[],U=$.nil;return w=W,T=F=[P(W[0],"BCDice")].concat(w),S=b=[P(F[0],"DiceTable")].concat(T),p=[_=Q(b[0],null,"D66ParityTable")].concat(S),f=$.$r(p),(z=_.$$prototype).odd=z.even=z.name=U,C(_,"$from_i18n",function(N,h){var m=U;return m=f("I18n").$t(N,E(["locale","raise"],{locale:h,raise:!0})),this.$new(m["$[]"]("name"),m["$[]"]("odd"),m["$[]"]("even"))}),B(_,"$initialize",function(N,h,M){var m=this;return m.name=N,m.odd=h.$freeze(),m.even=M.$freeze()}),B(_,"$roll",function(N){var m,a,r,h=this,M=U;return M=N.$roll_once(6),m=N.$roll_once(6),a=(R(M["$odd?"]())?h.odd:h.even)["$[]"](Y(m,1)),r=H(Z(M,10),m),f("RollResult").$new(h.name,r,a)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function($){var W,A,b,g,q,S,_,k,L,P=$.module,Q=$.klass,E=$.def,C=$.rb_plus,B=$.rb_times,R=$.send,Y=[],H=$.nil;return W=Y,A=L=[P(Y[0],"BCDice")].concat(W),b=k=[P(L[0],"DiceTable")].concat(A),q=[g=Q(k[0],null,"D66RangeTable")].concat(b),S=$.$r(q),(_=g.$$prototype).items=_.name=H,E(g,"$initialize",function(f,z){return this.name=f,this.items=z.$freeze()}),E(g,"$roll",function(f){var v,N,h,M=H;return v=f.$roll_once(6),N=f.$roll_once(6),h=C(B(v,10),N),M=R(this.items,"find",[],function(d){return null==d&&(d=H),d["$[]"](0)["$include?"](h)}),S("RollResult").$new(this.name,h,M["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function($){var w,T,S,_,p,f,z,b,F,P=$.module,Q=$.klass,E=$.const_set,C=$.send,B=$.truthy,R=$.def,Y=$.eqeqeq,H=$.rb_times,Z=$.rb_plus,W=[],U=$.nil;return w=W,T=F=[P(W[0],"BCDice")].concat(w),S=b=[P(F[0],"DiceTable")].concat(T),p=[_=Q(b[0],null,"RangeTable")].concat(S),f=$.$r(p),(z=_.$$prototype).name=z.items=z.num_of_dice=z.num_of_sides=z.formatter=U,E(p[0],"RollResult",C(f("Struct"),"new",["sum","values","content","formatted"],function v(){return(null==v.$$s?this:v.$$s).$alias_method("to_s","formatted")},{$$s:_})),E(p[0],"Item",f("Struct").$new("range","content")),E(p[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),E(p[0],"DEFAULT_FORMATTER",C(_,"lambda",[],function(N,h){return null==N&&(N=U),null==h&&(h=U),N.$name()+"("+h.$sum()+") \uff1e "+h.$content()})),_.$attr_reader("name"),_.$attr_reader("num_of_dice"),_.$attr_reader("num_of_sides"),R(_,"$initialize",function v(N,h,M){var a,m=v.$$p||U,d=this,r=U;return v.$$p=null,d.name=N.$freeze(),d.formatter=B(a=m)?a:f("DEFAULT_FORMATTER"),r=f("DICE_ROLL_METHOD_RE").$match(h),B(r)||d.$raise(f("ArgumentError"),d.name+": invalid dice roll method: "+h),d.num_of_dice=r["$[]"](1).$to_i(),d.num_of_sides=r["$[]"](2).$to_i(),d.$store(M)}),R(_,"$fetch",function(N){var M,h=this;return M=C(h.items,"find",[],function(d){return null==d&&(d=U),d.$range()["$include?"](N)}),B(M)||h.$raise(f("RangeError"),h.name+": value is out of range: "+N),M}),R(_,"$roll",function(N){var m,h=this,M=U,d=U;return m=(M=N.$roll_barabara(h.num_of_dice,h.num_of_sides)).$sum(),(d=f("RollResult").$new(m,M,h.$fetch(m).$content()))["$formatted="](h.formatter["$[]"](h,d)),d}),_.$private(),R(_,"$store",function(N){var M,m,h=this;return M=C(N,"map",[],function d(a,r){return null==a&&(a=U),null==r&&(r=U),[(null==d.$$s?this:d.$$s).$coerce_to_int_range(a),r]},{$$s:h}),m=C(M,"sort_by",[],function(a,r){return null==a&&(a=U),null==r&&(r=U),a.$min()}),h.$assert_min_sum_is_covered(m),h.$assert_max_sum_is_covered(m),h.$assert_no_gap_or_overlap_in_ranges(m),h.items=C(m,"map",[],function(a,r){return null==a&&(a=U),null==r&&(r=U),f("Item").$new(a,r.$freeze()).$freeze()}).$freeze(),h}),R(_,"$coerce_to_int_range",function(N){var M;return Y(f("Integer"),M=N)?f("Range").$new(N,N):Y(f("Range"),M)&&B(N.$begin()["$is_a?"](f("Integer")))&&B(N.$end()["$is_a?"](f("Integer")))?N:this.$raise(f("TypeError"),this.name+": "+N+" ("+N.$class()+") must be an Integer or a Range with Integers ")}),R(_,"$assert_min_sum_is_covered",function(N){var M,h=this,m=U;return M=h.num_of_dice,m=N.$first()["$[]"](0),B(m["$include?"](M))||h.$raise(f("RangeError"),h.name+": min value ("+M+") is not covered: "+m),h}),R(_,"$assert_max_sum_is_covered",function(N){var M,h=this,m=U;return M=H(h.num_of_dice,h.num_of_sides),m=N.$last()["$[]"](0),B(m["$include?"](M))||h.$raise(f("RangeError"),h.name+": max value ("+M+") is not covered: "+m),h}),R(_,"$assert_no_gap_or_overlap_in_ranges",function(N){return C(N,"each_cons",[2],function M(m,d){var s,t,a=null==M.$$s?this:M.$$s,r=U,e=U;return null==a.name&&(a.name=U),null==m&&(m=U),null==d&&(d=U),r=m["$[]"](0),e=d["$[]"](0),s=r.$max(),t=Z(s,1),B(e["$include?"](s))&&a.$raise(f("RangeError"),a.name+": Range overlap: "+r+" and "+e),B(e["$include?"](t))?U:a.$raise(f("RangeError"),a.name+": Range gap: "+r+" and "+e)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function($){var U,F,g,f,z,v,N,S,T,w,P=$.module,Q=$.klass,E=$.send,C=$.def,B=$.rb_minus,R=$.return_ivar,Y=[],H=$.nil,Z=$.$$$;return U=Y,F=w=[P(Y[0],"BCDice")].concat(U),g=T=[P(w[0],"DiceTable")].concat(F),f=S=[Q(T[0],null,"SaiFicSkillTable")].concat(g),v=[z=Q(S[0],null,"Category")].concat(f),N=$.$r(v),C(z,"$initialize",function(M,m,d,a){var r=this;return r.name=M,r.skills=E(m.$map(),"with_index",[2],function(s,t){return null==s&&(s=H),null==t&&(t=H),Z(N("SaiFicSkillTable"),"Skill").$new(M,s,d,t,a)}),r.dice=d}),C(z,"$roll",function(M){return this.$skills()["$[]"](B(M.$roll_sum(2,6),2))}),C(z,"$to_s",R("name")),z.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function($){var H,L,T,S,_,b,A,W,P=$.module,Q=$.klass,E=$.def,C=$.hash2,B=[],R=$.nil;return H=B,L=W=[P(B[0],"BCDice")].concat(H),T=A=[P(W[0],"DiceTable")].concat(L),b=[Q(A[0],null,"SaiFicSkillTable")].concat(T),(_=(S=Q(b[0],null,"Skill")).$$prototype).s_format=_.category_dice=_.row_dice=_.category_name=_.name=R,E(S,"$initialize",function(f,z,v,N,h){var M=this;return M.category_name=f,M.name=z,M.category_dice=v,M.row_dice=N,M.s_format=h}),E(S,"$to_s",function(){var f=this;return f.$format(f.s_format,C(["category_dice","row_dice","category_name","skill_name"],{category_dice:f.category_dice,row_dice:f.row_dice,category_name:f.category_name,skill_name:f.name}))}),S.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function($){var b,_,N,h,M,m,d,f,q,P=$.module,Q=$.klass,E=$.ensure_kwargs,C=$.hash2,B=$.send,Y=$.defs,H=$.const_set,Z=$.to_ary,W=$.def,U=$.truthy,L=$.rb_minus,w=$.rb_plus,A=$.top,F=[],k=$.nil,T=$.$$$;return A.$require("bcdice/dice_table/sai_fic_skill_table/category"),A.$require("bcdice/dice_table/sai_fic_skill_table/skill"),b=F,_=q=[P(F[0],"BCDice")].concat(b),N=f=[P(q[0],"DiceTable")].concat(_),M=[h=Q(f[0],null,"SaiFicSkillTable")].concat(N),m=$.$r(M),(d=h.$$prototype).rtt=d.rtt_format=d.rct=d.rct_format=d.rttn=d.rttn_format=d.categories=k,Y(h,"$from_i18n",function(r,e,s){var t,n,i,j,x=k;return null==(t=(s=E(s)).$$smap.rtt)&&(t=k),null==(n=s.$$smap.rct)&&(n=k),null==(i=s.$$smap.rttn)&&(i=k),j=(x=m("I18n").$t("RTT",C(["locale","raise","default"],{locale:e,raise:!1,default:C([],{})})).$merge(m("I18n").$t(r,C(["locale","raise"],{locale:e,raise:!0}))))["$[]"]("items"),x=B(x,"select",[],function(te,ne){return null==te&&(te=k),null==ne&&(ne=k),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](te)}),this.$new(j,$.to_hash(x).$merge(C(["rtt","rct","rttn"],{rtt:t,rct:n,rttn:i})))},-3),H(M[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),H(M[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),H(M[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),H(M[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),W(h,"$initialize",function(r,e){var s,t,n,i,c,o,x,j=this;return null==(s=(e=E(e)).$$smap.rtt)&&(s=k),null==(t=e.$$smap.rct)&&(t=k),null==(n=e.$$smap.rttn)&&(n=k),null==(i=e.$$smap.rtt_format)&&(i=m("DEFAULT_RTT")),null==(c=e.$$smap.rct_format)&&(c=m("DEFAULT_RCT")),null==(o=e.$$smap.rttn_format)&&(o=m("DEFAULT_RTTN")),null==(x=e.$$smap.s_format)&&(x=m("DEFAULT_S")),j.categories=B(r.$map(),"with_index",[1],function(te,ne){var ae,oe,ue;return null==te&&(te=k),null==ne&&(ne=k),oe=null==(ae=Z(te))[0]?k:ae[0],ue=null==ae[1]?k:ae[1],T(m("SaiFicSkillTable"),"Category").$new(oe,ue,ne,x)},{$$has_top_level_mlhs_arg:!0}),j.rtt=s,j.rct=t,j.rttn=n.$to_a(),j.rtt_format=i,j.rct_format=c,j.rttn_format=o},-2),H(M[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),h.$attr_reader("categories"),W(h,"$roll_command",function(r,e){var t,s=this,n=k,i=k;return U(["RTT",s.rtt]["$include?"](t=e))?s.$format_skill(s.rtt_format,s.$roll_skill(r)):U(["RCT",s.rct]["$include?"](t))?(n=s.$roll_category(r),s.$format(s.rct_format,C(["category_dice","category_name"],{category_dice:n.$dice(),category_name:n.$name()}))):U(i=m("RTTN").$index(t))||U(i=s.rttn.$index(t))?s.$format_skill(s.rttn_format,s.categories["$[]"](i).$roll(r)):k}),W(h,"$roll_category",function(r){return this.categories["$[]"](L(r.$roll_once(6),1))}),W(h,"$roll_skill",function(r){return this.$roll_category(r).$roll(r)}),W(h,"$prefixes",function(){var r=this;return w(["RTT[1-6]?","RCT",r.rtt,r.rct],r.rttn).$compact()}),h.$private(),W(h,"$format_skill",function(r,e){return this.$format(r,C(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:e.$category_dice(),row_dice:e.$row_dice(),category_name:e.$category_name(),skill_name:e.$name(),text:e.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function($){var U,F,g,q,S,_,p,T,w,P=$.module,Q=$.klass,E=$.hash2,C=$.defs,B=$.truthy,R=$.def,Y=$.rb_minus,H=[],Z=$.nil;return U=H,F=w=[P(H[0],"BCDice")].concat(U),g=T=[P(w[0],"DiceTable")].concat(F),S=[q=Q(T[0],null,"Table")].concat(g),_=$.$r(S),(p=q.$$prototype).times=p.sides=p.name=p.items=Z,C(q,"$from_i18n",function(z,v){var h=Z;return h=_("I18n").$t(z,E(["locale"],{locale:v})),this.$new(h["$[]"]("name"),h["$[]"]("type"),h["$[]"]("items"))}),R(q,"$initialize",function(z,v,N){var h=this,M=Z;return h.name=z,h.items=N.$freeze(),M=/(\d+)D(\d+)/i.$match(v),B(M)||h.$raise(_("ArgumentError"),"Unexpected table type: "+v),h.times=M["$[]"](1).$to_i(),h.sides=M["$[]"](2).$to_i()}),R(q,"$roll",function(z){var N,v=this;return N=z.$roll_sum(v.times,v.sides),v.$choice(N)}),R(q,"$choice",function(z){var N,v=this;return N=Y(z,v.times),_("RollResult").$new(v.name,z,v.items["$[]"](N))})},Opal.modules["bcdice/dice_table"]=function($){var P=$.top;return P.$require("bcdice/dice_table/roll_result"),P.$require("bcdice/dice_table/chain_table"),P.$require("bcdice/dice_table/d66_grid_table"),P.$require("bcdice/dice_table/d66_half_grid_table"),P.$require("bcdice/dice_table/d66_one_third_table"),P.$require("bcdice/dice_table/d66_left_range_table"),P.$require("bcdice/dice_table/d66_parity_table"),P.$require("bcdice/dice_table/d66_range_table"),P.$require("bcdice/dice_table/d66_table"),P.$require("bcdice/dice_table/range_table"),P.$require("bcdice/dice_table/sai_fic_skill_table"),P.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function($){var R,W,L,H,P=$.module,Q=$.const_set,E=[];return R=E,W=H=[P(E[0],"BCDice")].concat(R),L=[P(H[0],"D66SortType")].concat(W),Q(L[0],"NO_SORT","no_sort"),Q(L[0],"ASC","asc"),Q(L[0],"DESC","desc"),function(Z,W){var L=[P(Z,"RoundType")].concat(W);return Q(L[0],"CEIL","ceil"),Q(L[0],"FLOOR","floor"),Q(L[0],"ROUND","round")}(H[0],H)},Opal.modules["bcdice/translate"]=function($){var W,A,F,k,T,L,P=$.module,Q=$.ensure_kwargs,E=$.kwrestargs,B=$.hash2,R=$.def,Y=[],H=$.nil;return W=Y,A=L=[P(Y[0],"BCDice")].concat(W),k=[F=P(L[0],"Translate")].concat(A),T=$.$r(k),R(F,"$translate",function(b,g){var q,S=this;return null==S.locale&&(S.locale=H),g=Q(g),q=E(g,{}),T("I18n").$translate(b,B(["locale","raise"],{locale:S.locale,raise:!0}).$merge($.to_hash(q)))},-2)},Opal.modules["bcdice/result"]=function($){var F,I,k,W,L,Q=$.klass,E=$.send,C=$.def,B=$.return_val,R=$.return_ivar,Y=[],H=$.nil;return W=Y,F=L=[(0,$.module)(Y[0],"BCDice")].concat(W),[k=Q(L[0],null,"Result")].concat(F),C(I=$.get_singleton_class(k),"$success",function(q){return E(this.$new(),"tap",[],function(p){var f;return null==p&&(p=H),p["$text="](q),E(p,"success=",f=[!0]),f[f.length-1]})}),C(I,"$failure",function(q){return E(this.$new(),"tap",[],function(p){var f;return null==p&&(p=H),p["$text="](q),E(p,"failure=",f=[!0]),f[f.length-1]})}),C(I,"$critical",function(q){return E(this.$new(),"tap",[],function(p){var f;return null==p&&(p=H),p["$text="](q),p["$critical="](!0),E(p,"success=",f=[!0]),f[f.length-1]})}),C(I,"$fumble",function(q){return E(this.$new(),"tap",[],function(p){var f;return null==p&&(p=H),p["$text="](q),p["$fumble="](!0),E(p,"failure=",f=[!0]),f[f.length-1]})}),C(I,"$nothing",B("nothing")),C(k,"$initialize",function(b){var g=this;return null==b&&(b=H),g.text=b,g.rands=H,g.detailed_rands=H,g.secret=!1,g.success=!1,g.failure=!1,g.critical=!1,g.fumble=!1},-1),k.$attr_accessor("text","rands","detailed_rands"),k.$attr_writer("secret","success","failure","critical","fumble"),C(k,"$secret?",R("secret")),C(k,"$success?",R("success")),C(k,"$failure?",R("failure")),C(k,"$critical?",R("critical")),C(k,"$fumble?",R("fumble")),C(k,"$condition=",function(b){return this.success=b,this.failure=b["$!"]()})},Opal.modules["racc/parser"]=function($){var z,N,h,P=$.module,Q=$.klass,E=$.truthy,C=$.const_set,B=$.defs,R=$.gvars,Y=$.rb_lt,H=$.def,Z=$.to_ary,W=$.send,U=$.neqeq,L=$.rb_plus,w=$.eqeq,A=$.rb_ge,F=$.rb_gt,k=$.rb_minus,T=$.rb_le,I=$.rb_times,b=$.assign_ivar_val,q=[],S=$.$r(q),_=$.nil,p=$.$$$;return z=q,N=[P(q[0],"Racc")].concat(z),h=$.$r(N),Q(N[0],h("StandardError"),"ParseError"),E(p("::","ParseError","skip_raise")?"constant":_)||C(q[0],"ParseError",p(S("Racc"),"ParseError")),function(f,z){var a,r,e,s,t,h=[P(f,"Racc")].concat(z),M=$.$r(h);return E(M("Racc_No_Extensions","skip_raise")?"constant":_)||C(h[0],"Racc_No_Extensions",!1),a=h,e=[r=Q(h[0],null,"Parser")].concat(a),s=$.$r(e),(t=r.$$prototype).yydebug=t.racc_debug_out=t.racc_error_status=t.racc_t=t.racc_vstack=t.racc_val=t.racc_state=t.racc_tstack=_,C(e[0],"Racc_Runtime_Version","1.4.6"),C(e[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),C(e[0],"Racc_Runtime_Core_Version_R","1.4.6"),C(e[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),C(e[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),C(e[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),C(e[0],"Racc_Runtime_Core_Version",s("Racc_Runtime_Core_Version_R")),C(e[0],"Racc_Runtime_Core_Revision",s("Racc_Runtime_Core_Revision_R")),C(e[0],"Racc_Runtime_Type","ruby"),B(s("Parser"),"$racc_runtime_type",function(){return s("Racc_Runtime_Type")}),H(r,"$_racc_setup",function(){var i,c,o=this,x=_,j=_;return null==R.stderr&&(R.stderr=_),E(p(o.$class(),"Racc_debug_parser"))||(o.yydebug=!1),E(null!=(i=o.yydebug)&&i!==_?"instance-variable":_)||(o.yydebug=!1),E(o.yydebug)&&(E(null!=(c=o.racc_debug_out)&&c!==_?"instance-variable":_)||(o.racc_debug_out=R.stderr),o.racc_debug_out=E(x=o.racc_debug_out)?x:R.stderr),j=p(o.$class(),"Racc_arg"),E(Y(j.$size(),14))&&j["$[]="](13,!0),j}),H(r,"$_racc_init_sysvars",function(){var i=this;return i.racc_state=[0],i.racc_tstack=[],i.racc_vstack=[],i.racc_t=_,i.racc_val=_,i.racc_read_next=!0,i.racc_user_yyerror=!1,i.racc_error_status=0}),H(r,"$do_parse",function(){return this.$__send__(s("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),H(r,"$next_token",function(){return this.$raise(s("NotImplementedError"),this.$class()+"#next_token is not defined")}),H(r,"$_racc_do_parse_rb",function(i,c){var o,j=this,O=_,te=_,ne=_,ae=_,oe=_,ue=_,ie=_,X=_;return o=Z(i),O=null==o[0]?_:o[0],te=null==o[1]?_:o[1],ne=null==o[2]?_:o[2],ae=null==o[3]?_:o[3],oe=null==o[10]?_:o[10],j.$_racc_init_sysvars(),ue=ie=X=_,W(j,"catch",["racc_end_parse"],function D(){var V,J,u=null==D.$$s?this:D.$$s,y=_;for(null==u.racc_state&&(u.racc_state=_),null==u.racc_read_next&&(u.racc_read_next=_),null==u.racc_t&&(u.racc_t=_),null==u.yydebug&&(u.yydebug=_),null==u.racc_val&&(u.racc_val=_);E(!0);)for(E(X=ae["$[]"](u.racc_state["$[]"](-1)))?(E(u.racc_read_next)&&U(u.racc_t,0)&&(J=u.$next_token(),V=Z(J),ue=null==V[0]?_:V[0],u.racc_val=null==V[1]?_:V[1],u.racc_t=E(ue)?E(y=oe["$[]"](ue))?y:1:0,E(u.yydebug)&&u.$racc_read_token(u.racc_t,ue,u.racc_val),u.racc_read_next=!1),X=L(X,u.racc_t),E(A(X,0))&&E(ie=O["$[]"](X))&&w(te["$[]"](X),u.racc_state["$[]"](-1))||(ie=ne["$[]"](u.racc_state["$[]"](-1)))):ie=ne["$[]"](u.racc_state["$[]"](-1));E(ie=u.$_racc_evalact(ie,i)););},{$$s:j})}),H(r,"$yyparse",function(i,c){return this.$__send__(s("Racc_YY_Parse_Method"),i,c,this.$_racc_setup(),!0)}),H(r,"$_racc_yyparse_rb",function(i,c,o,x){var j,ne=_,ae=_,le=_,oe=_,ie=_,X=_,D=_;return j=Z(o),ne=null==j[0]?_:j[0],ae=null==j[1]?_:j[1],le=null==j[2]?_:j[2],oe=null==j[3]?_:j[3],ie=null==j[10]?_:j[10],this.$_racc_init_sysvars(),X=_,D=_,W(this,"catch",["racc_end_parse"],function V(){var J=null==V.$$s?this:V.$$s;for(null==J.racc_state&&(J.racc_state=_);!E(D=oe["$[]"](J.racc_state["$[]"](-1)));)for(;E(X=J.$_racc_evalact(le["$[]"](J.racc_state["$[]"](-1)),o)););return W(i,"__send__",[c],function u(y,K){var G=null==u.$$s?this:u.$$s,se=_,$e=_;for(null==G.racc_t&&(G.racc_t=_),null==G.racc_state&&(G.racc_state=_),null==G.racc_read_next&&(G.racc_read_next=_),null==y&&(y=_),null==K&&(K=_),G.racc_t=E(y)?E(se=ie["$[]"](y))?se:1:0,G.racc_val=K,G.racc_read_next=!1,D=L(D,G.racc_t),E(A(D,0))&&E(X=ne["$[]"](D))&&w(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));E(X=G.$_racc_evalact(X,o)););for(;E(E(se=E($e=(D=oe["$[]"](G.racc_state["$[]"](-1)))["$!"]())?$e:G.racc_read_next["$!"]())?se:G.racc_t["$=="](0));)for(E(D)&&E(D=L(D,G.racc_t))&&E(A(D,0))&&E(X=ne["$[]"](D))&&w(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));E(X=G.$_racc_evalact(X,o)););},{$$s:J})},{$$s:this})}),H(r,"$_racc_evalact",function(i,c){var o,le,j=this,O=_,te=_,ae=_,oe=_,ue=_,ie=_;if(O=null==(o=Z(c))[0]?_:o[0],te=null==o[1]?_:o[1],ae=null==o[3]?_:o[3],le=null==o[11]?_:o[11],oe=null==o[12]?_:o[12],E(F(i,0))&&E(Y(i,le)))E(F(j.racc_error_status,0))&&(w(j.racc_t,1)||(j.racc_error_status=k(j.racc_error_status,1))),j.racc_vstack.$push(j.racc_val),j.racc_state.$push(i),j.racc_read_next=!0,E(j.yydebug)&&(j.racc_tstack.$push(j.racc_t),j.$racc_shift(j.racc_t,j.racc_tstack,j.racc_vstack));else if(E(Y(i,0))&&E(F(i,oe["$-@"]()))){if(ue=W(j,"catch",["racc_jump"],function X(){var D=null==X.$$s?this:X.$$s;return null==D.racc_state&&(D.racc_state=_),D.racc_state.$push(D.$_racc_do_reduce(c,i)),!1},{$$s:j}),E(ue))switch(ue.valueOf()){case 1:return j.racc_user_yyerror=!0,oe["$-@"]();case 2:return le;default:j.$raise("[Racc Bug] unknown jump code")}}else if(w(i,le))E(j.yydebug)&&j.$racc_accept(),j.$throw("racc_end_parse",j.racc_vstack["$[]"](0));else{if(w(i,oe["$-@"]())){switch(j.racc_error_status.valueOf()){case 0:E(c["$[]"](21))||j.$on_error(j.racc_t,j.racc_val,j.racc_vstack);break;case 3:w(j.racc_t,0)&&j.$throw("racc_end_parse",_),j.racc_read_next=!0}for(j.racc_user_yyerror=!1,j.racc_error_status=3;E(!0)&&!(E(ie=ae["$[]"](j.racc_state["$[]"](-1)))&&(ie=L(ie,1),E(A(ie,0))&&E(i=O["$[]"](ie))&&w(te["$[]"](ie),j.racc_state["$[]"](-1))));)E(T(j.racc_state.$size(),1))&&j.$throw("racc_end_parse",_),j.racc_state.$pop(),j.racc_vstack.$pop(),E(j.yydebug)&&(j.racc_tstack.$pop(),j.$racc_e_pop(j.racc_state,j.racc_tstack,j.racc_vstack));return i}j.$raise("[Racc Bug] unknown action "+i.$inspect())}return E(j.yydebug)&&j.$racc_next_state(j.racc_state["$[]"](-1),j.racc_state),_}),H(r,"$_racc_do_reduce",function(i,c){var o,oe,ie,y,K,G,ce,j=this,te=_,ne=_,ae=_,le=_,ue=_,X=_,D=_,V=_,J=_,u=_,se=_,$e=_,fe=_;return te=null==(o=Z(i))[4]?_:o[4],ne=null==o[5]?_:o[5],ae=null==o[6]?_:o[6],le=null==o[7]?_:o[7],oe=null==o[8]?_:o[8],ue=null==o[9]?_:o[9],ie=null==o[13]?_:o[13],X=j.racc_state,D=j.racc_vstack,V=j.racc_tstack,J=I(c,-3),u=ue["$[]"](J),y=ue["$[]"](L(J,1)),K=ue["$[]"](L(J,2)),G=[],E(j.yydebug)&&(se=V["$[]"](u["$-@"](),u)),$e=D["$[]"](u["$-@"](),u),E(j.yydebug)&&V["$[]="](u["$-@"](),u,G),D["$[]="](u["$-@"](),u,G),X["$[]="](u["$-@"](),u,G),E(ie)?D.$push(j.$__send__(K,$e,D,$e["$[]"](0))):D.$push(j.$__send__(K,$e,D)),V.$push(y),E(j.yydebug)&&j.$racc_reduce(se,y,V,D),ce=k(y,oe),E(J=le["$[]"](ce))&&(J=L(J,X["$[]"](-1)),E(A(J,0))&&E(fe=te["$[]"](J))&&w(ne["$[]"](J),ce))?fe:ae["$[]"](ce)}),H(r,"$on_error",function(i,c,o){var j,x=this;return x.$raise(s("ParseError"),x.$sprintf("\nparse error on value %s (%s)",c.$inspect(),E(j=x.$token_to_str(i))?j:"?"))}),H(r,"$yyerror",function(){return this.$throw("racc_jump",1)}),H(r,"$yyaccept",function(){return this.$throw("racc_jump",2)}),H(r,"$yyerrok",b("racc_error_status",0)),H(r,"$racc_read_token",function(i,c,o){var x=this;return x.racc_debug_out.$print("read    "),x.racc_debug_out.$print(c.$inspect(),"(",x.$racc_token2str(i),") "),x.racc_debug_out.$puts(o.$inspect()),x.racc_debug_out.$puts()}),H(r,"$racc_shift",function(i,c,o){var x=this;return x.racc_debug_out.$puts("shift   "+x.$racc_token2str(i)),x.$racc_print_stacks(c,o),x.racc_debug_out.$puts()}),H(r,"$racc_reduce",function(i,c,o,x){var j=this,O=_;return(O=j.racc_debug_out).$print("reduce "),E(i["$empty?"]())?O.$print(" <none>"):W(i,"each",[],function te(ne){return null==ne&&(ne=_),O.$print(" ",(null==te.$$s?this:te.$$s).$racc_token2str(ne))},{$$s:j}),O.$puts(" --\x3e "+j.$racc_token2str(c)),j.$racc_print_stacks(o,x),j.racc_debug_out.$puts()}),H(r,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),H(r,"$racc_e_pop",function(i,c,o){var x=this;return x.racc_debug_out.$puts("error recovering mode: pop token"),x.$racc_print_states(i),x.$racc_print_stacks(c,o),x.racc_debug_out.$puts()}),H(r,"$racc_next_state",function(i,c){var o=this;return o.racc_debug_out.$puts("goto    "+i),o.$racc_print_states(c),o.racc_debug_out.$puts()}),H(r,"$racc_print_stacks",function(i,c){var x=_;return(x=this.racc_debug_out).$print("        ["),W(i,"each_index",[],function j(O){return null==O&&(O=_),x.$print(" (",(null==j.$$s?this:j.$$s).$racc_token2str(i["$[]"](O))," ",c["$[]"](O).$inspect(),")")},{$$s:this}),x.$puts(" ]")}),H(r,"$racc_print_states",function(i){var o=_;return(o=this.racc_debug_out).$print("        ["),W(i,"each",[],function(j){return null==j&&(j=_),o.$print(" ",j)}),o.$puts(" ]")}),H(r,"$racc_token2str",function(i){var o;return E(o=p(this.$class(),"Racc_token_to_s_table")["$[]"](i))?o:this.$raise("[Racc Bug] can't convert token "+i+" to string")}),H(r,"$token_to_str",function(i){return p(this.$class(),"Racc_token_to_s_table")["$[]"](i)})}(q[0],q)},Opal.modules["bcdice/arithmetic/node"]=function($){var b,_,v,a,r,h,M,f,q,P=$.module,Q=$.klass,E=$.def,C=$.thrower,B=$.return_ivar,R=$.send2,Y=$.find_super,H=$.eqeq,Z=$.const_set,W=$.eqeqeq,U=$.rb_divide,L=$.truthy,w=$.assign_ivar,A=$.alias,F=[],k=$.nil,T=$.$$$;return b=F,_=q=[P(F[0],"BCDice")].concat(b),v=f=[P(q[0],"Arithmetic")].concat(_),h=[P(f[0],"Node")].concat(v),M=$.$r(h),(r=(a=Q(h[0],null,"BinaryOp")).$$prototype).lhs=r.rhs=r.op=k,E(a,"$initialize",function(s,t,n){var i=this;return i.lhs=s,i.op=t,i.rhs=n}),E(a,"$eval",function(s){try{C("eval_return");var c,n=this,i=k;return i=n.lhs.$eval(s),c=n.rhs.$eval(s),i.$send(n.op,c)}catch(o){if(o===$.t_eval_return)return o.$v;throw o}}),E(a,"$output",function(){var s=this;return""+s.lhs.$output()+s.op+s.rhs.$output()}),E(a,"$s_exp",function(){var s=this;return"("+s.$op_for_s_exp()+" "+s.lhs.$s_exp()+" "+s.rhs.$s_exp()+")"}),E(a,"$op_for_s_exp",B("op")),function(m,d,a){var r=Q(m,d,"DivideBase"),e=[r].concat(a),s=$.$r(e),t=r.$$prototype;t.lhs=t.rhs=t.op=k,E(r,"$initialize",function n(i,c){return n.$$p=null,R(this,Y(this,"initialize",n,!1,!0),"initialize",[i,"/",c],null)}),E(r,"$eval",function(i){try{C("eval_return");var x,j,o=this;return x=o.lhs.$eval(i),j=o.rhs.$eval(i),H(j,0)&&o.$raise(s("ZeroDivisionError")),o.$divide_and_round(x,j,i)}catch(O){if(O===$.t_eval_return)return O.$v;throw O}}),E(r,"$output",function n(){var i=n.$$p||k,c=this;return n.$$p=null,""+R(c,Y(c,"output",n,!1,!0),"output",[],i)+c.$rounding_method()}),r.$private(),E(r,"$rounding_method",function(){return T(this.$class(),"ROUNDING_METHOD")}),E(r,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),E(r,"$divide_and_round",function(i,c,o){return this.$raise(s("NotImplementedError"))})}(h[0],M("BinaryOp"),h),function(m,d,a){var r=Q(m,d,"DivideWithGameSystemDefault"),e=[r].concat(a),s=$.$r(e);Z(e[0],"ROUNDING_METHOD",""),r.$private(),E(r,"$divide_and_round",function(n,i,c){var o,x=k;return W(T(s("RoundType"),"CEIL"),o=c)?U(n.$to_f(),i).$ceil():W(T(s("RoundType"),"ROUND"),o)?(x=U(n.$to_f(),i),L(x["$negative?"]())?x.$abs().$round()["$-@"]():x.$round()):U(n,i).$floor()})}(h[0],M("DivideBase"),h),function(m,d,a){var r=Q(m,d,"DivideWithCeil"),e=[r].concat(a);Z(e[0],"ROUNDING_METHOD","C"),r.$private(),E(r,"$divide_and_round",function(t,n,i){return U(t.$to_f(),n).$ceil()})}(h[0],M("DivideBase"),h),function(m,d,a){var r=Q(m,d,"DivideWithRound"),e=[r].concat(a);Z(e[0],"ROUNDING_METHOD","R"),r.$private(),E(r,"$divide_and_round",function(t,n,i){var c=k;return c=U(t.$to_f(),n),L(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()})}(h[0],M("DivideBase"),h),function(m,d,a){var r=Q(m,d,"DivideWithFloor"),e=[r].concat(a);Z(e[0],"ROUNDING_METHOD","F"),r.$private(),E(r,"$divide_and_round",function(t,n,i){return U(t,n).$floor()})}(h[0],M("DivideBase"),h),function(m,d){var a=Q(m,null,"Negative");a.$$prototype.body=k,E(a,"$initialize",w("body")),E(a,"$eval",function(s){try{return C("eval_return"),this.body.$eval(s)["$-@"]()}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),E(a,"$output",function(){return"-"+this.body.$output()}),E(a,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(h[0]),function(m,d){var a=Q(m,null,"Parenthesis");a.$$prototype.expr=k,E(a,"$initialize",w("expr")),E(a,"$eval",function(s){try{return C("eval_return"),this.expr.$eval(s)}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),E(a,"$output",function(){return"("+this.expr.$output()+")"}),E(a,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(h[0]),function(m,d){var a=Q(m,null,"Number");return a.$$prototype.value=k,E(a,"$initialize",w("value")),E(a,"$eval",B("value")),E(a,"$output",function(){return this.value.$to_s()}),A(a,"s_exp","output")}(h[0])},Opal.modules.strscan=function($){var w,A,F,k,T,Q=$.def,E=$.truthy,C=$.eqeqeq,B=$.Opal,R=$.return_ivar,Y=$.send,H=$.alias,Z=[],W=$.nil;return w=Z,F=[A=(0,$.klass)(Z[0],null,"StringScanner")].concat(w),k=$.$r(F),(T=A.$$prototype).pos=T.string=T.working=T.matched=T.prev_pos=T.match=W,A.$attr_reader("pos","matched"),Q(A,"$initialize",function(b){var g=this;return g.string=b,g.pos=0,g.matched=W,g.working=b,g.match=[]}),A.$attr_reader("string"),Q(A,"$beginning_of_line?",function(){var b=this;return 0===b.pos||"\n"===b.string.charAt(b.pos-1)}),Q(A,"$scan",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?g.matched=W:(g.prev_pos=g.pos,g.pos+=q[0].length,g.working=g.working.substring(q[0].length),g.matched=q[0],g.match=q,q[0])}),Q(A,"$scan_until",function(b){var g=this;b=g.$anchor(b);for(var q=g.working,S=0;q.length!=S;++S){var _=b.exec(q.substr(S));if(null!==_){var p=S+_[0].length,f=q.substr(0,p);return g.matched=_[0],g.match=_,g.prev_pos=g.pos+S,g.pos+=p,g.working=q.substr(p),f}}return g.matched=W}),Q(A,"$[]",function(b){var q;if(E(this.match["$empty?"]()))return W;C(k("Symbol"),q=b)?b=b.$to_s():C(k("String"),q)||(b=B["$coerce_to!"](b,k("Integer"),"to_int"));var S=this.match;return b<0&&(b+=S.length),b<0||b>=S.length||null==S[b]?W:S[b]}),Q(A,"$check",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return g.matched=null==q?W:q[0]}),Q(A,"$check_until",function(b){var g=this,q=g.prev_pos,S=g.pos,_=g.working,p=g.$scan_until(b);return g.prev_pos=q,g.pos=S,g.working=_,p}),Q(A,"$peek",function(b){return this.working.substring(0,b)}),Q(A,"$eos?",function(){return 0===this.working.length}),Q(A,"$exist?",function(b){var q=b.exec(this.working);return null==q?W:0==q.index?0:q.index+1}),Q(A,"$skip",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);if(null==q)return g.match=[],g.matched=W;var S=q[0],_=S.length;return g.matched=S,g.match=q,g.prev_pos=g.pos,g.pos+=_,g.working=g.working.substring(_),_}),Q(A,"$skip_until",function(b){var q=this.$scan_until(b);return q===W?W:(this.matched=q.substr(-1),q.length)}),Q(A,"$get_byte",function(){var b=this,g=W;return b.pos<b.string.length?(b.prev_pos=b.pos,b.pos+=1,g=b.matched=b.working.substring(0,1),b.working=b.working.substring(1)):b.matched=W,g}),Q(A,"$match?",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?W:(g.prev_pos=g.pos,q[0].length)}),Q(A,"$pos=",function(b){var g=this;return b<0&&(b+=g.string.$length()),g.pos=b,g.working=g.string.slice(b)}),Q(A,"$matched_size",function(){return this.matched===W?W:this.matched.length}),Q(A,"$post_match",function(){var b=this;return b.matched===W?W:b.string.substr(b.pos)}),Q(A,"$pre_match",function(){var b=this;return b.matched===W?W:b.string.substr(0,b.prev_pos)}),Q(A,"$reset",function(){var b=this;return b.working=b.string,b.matched=W,b.pos=0}),Q(A,"$rest",R("working")),Q(A,"$rest?",function(){return 0!==this.working.length}),Q(A,"$rest_size",function(){return this.$rest().$size()}),Q(A,"$terminate",function(){var b,g=this;return g.match=W,b=[g.string.$length()],Y(g,"pos=",b),b[b.length-1]}),Q(A,"$unscan",function(){var b=this;return b.pos=b.prev_pos,b.prev_pos=W,b.match=W,b}),H(A,"bol?","beginning_of_line?"),H(A,"getch","get_byte"),A.$private(),Q(A,"$anchor",function(b){var g=b.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+b.source+")",g)})},Opal.modules["bcdice/normalize"]=function($){var H,L,W,P=$.module,Q=$.eqeqeq,E=$.def,C=$.eqeq,B=[],R=$.nil;return H=B,W=[P(B[0],"BCDice")].concat(H),(L=P(W[0],"Normalize")).$module_function(),E(L,"$comparison_operator",function(A){var F;return Q(/<=|=</,F=A)?"<=":Q(/>=|=>/,F)?">=":Q(/<>|!=|=!/,F)?"!=":Q(/</,F)?"<":Q(/>/,F)?">":Q(/=/,F)?"==":R}),E(L,"$target_number",function(A){return C(A,"?")?A:A.$to_i()})},Opal.modules["bcdice/command/lexer"]=function($){var w,T,S,_,p,f,z,b,F,P=$.module,Q=$.klass,E=$.const_set,C=$.hash2,B=$.truthy,R=$.send,Y=$.def,H=$.thrower,Z=$.top,W=[],U=$.nil;return Z.$require("strscan"),Z.$require("bcdice/normalize"),w=W,T=F=[P(W[0],"BCDice")].concat(w),S=b=[P(F[0],"Command")].concat(T),p=[_=Q(b[0],null,"Lexer")].concat(S),f=$.$r(p),(z=_.$$prototype).scanner=z.notations=U,E(p[0],"SYMBOLS",C(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),Y(_,"$initialize",function(N,h){var M,m,a;return N=B(a=(M=(m=N)===U||null==m?U:m.$split(" ",2))===U||null==M?U:M.$first())?a:"",this.scanner=f("StringScanner").$new(N),this.notations=R(h,"map",[],function(e){return null==e&&(e=U),B(e["$is_a?"](f("String")))?f("Regexp").$new(e):e})}),Y(_,"$next_token",function(){try{var N=H("return"),h=this,M=U,m=U,a=U,r=U;return B(h.scanner["$eos?"]())?[!1,"$"]:(R(h.notations,"each",[],function e(s){var n,t=null==e.$$s?this:e.$$s;if(null==t.scanner&&(t.scanner=U),null==s&&(s=U),n=t.scanner.$scan(s),!B(n))return U;N.$throw(["NOTATION",n])},{$$s:h,$$ret:N}),B(M=h.scanner.$scan(/\d+/))?["NUMBER",M.$to_i()]:B(m=h.scanner.$scan(/[<>!=]+/))?(m=f("Normalize").$comparison_operator(m),[B(m)?"CMP_OP":"ILLEGAL",m]):(a=h.scanner.$getch().$upcase(),[B(r=f("SYMBOLS")["$[]"](a))?r:a.$to_sym(),a]))}catch(e){if(e===N)return e.$v;throw e}}),Y(_,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function($){var Z,w,I,b,g,q,S,F,U,P=$.module,Q=$.klass,E=$.def,C=$.return_ivar,B=$.truthy,R=[],Y=$.nil;return Z=R,w=U=[P(R[0],"BCDice")].concat(Z),I=F=[P(U[0],"Command")].concat(w),g=[b=Q(F[0],null,"Parsed")].concat(I),q=$.$r(g),(S=b.$$prototype).critical=S.fumble=S.dollar=S.modify_number=S.question_target=S.target_number=S.prefix_number=S.command=S.suffix_number=S.cmp_op=Y,b.$attr_accessor("command"),b.$attr_accessor("prefix_number"),b.$attr_accessor("suffix_number"),b.$attr_accessor("critical"),b.$attr_accessor("fumble"),b.$attr_accessor("dollar"),b.$attr_accessor("modify_number"),b.$attr_accessor("cmp_op"),b.$attr_accessor("target_number"),b.$attr_writer("question_target"),E(b,"$initialize",function(){var p=this;return p.prefix_number=Y,p.suffix_number=Y,p.critical=Y,p.fumble=Y,p.dollar=Y,p.cmp_op=Y,p.target_number=Y,p.question_target=!1}),E(b,"$question_target?",C("question_target")),E(b,"$to_s",function(p){var f=this,z=Y,v=Y,N=Y,h=Y,M=Y;switch(null==p&&(p="after_command"),z=B(f.critical)?"@"+f.critical:Y,v=B(f.fumble)?"#"+f.fumble:Y,N=B(f.dollar)?"$"+f.dollar:Y,h=q("Format").$modifier(f.modify_number),M=B(f.question_target)?"?":f.target_number,p.valueOf()){case"after_command":return[f.prefix_number,f.command,f.suffix_number,z,v,N,h,f.cmp_op,M].$join();case"after_modify_number":return[f.prefix_number,f.command,f.suffix_number,h,z,v,N,f.cmp_op,M].$join();case"after_target_number":return[f.prefix_number,f.command,f.suffix_number,h,f.cmp_op,M,z,v,N].$join();default:return Y}},-1)},Opal.modules["bcdice/command/parser"]=function($){var p,N,r,c,o,x,j,O,te,ne,ae,le,ie,e,n,i,V,M,m,z,P=$.klass,Q=$.module,E=$.slice,C=$.extract_kwargs,B=$.ensure_kwargs,R=$.get_kwarg,Y=$.send2,H=$.find_super,Z=$.def,W=$.send,U=$.eqeq,L=$.thrower,w=$.hash,A=$.const_set,F=$.truthy,k=$.to_ary,T=$.hash2,I=$.top,b=[],g=$.$r(b),q=$.nil,S=$.$$$;return I.$require("racc/parser.rb"),I.$require("bcdice/arithmetic/node"),I.$require("bcdice/command/lexer"),I.$require("bcdice/command/parsed"),P(S(g("BCDice"),"Command"),S(g("Racc"),"Parser"),"Parser"),p=b,N=z=[Q(b[0],"BCDice")].concat(p),M=[Q(z[0],"Command")].concat(N),m=$.$r(M),r=M,n=[e=P(M[0],S(m("Racc"),"Parser"),"Parser")].concat(r),i=$.$r(n),(V=e.$$prototype).notations=V.lexer=V.modifier=V.suffix_number=V.prefix_number=V.need_suffix_number=V.need_prefix_number=V.critical=V.fumble=V.dollar=V.allowed_cmp_op=V.question_target=q,Z(e,"$initialize",function J(u,y){var K,G,se,$e,fe=this;return J.$$p=null,K=E(arguments),G=C(K),G=B(G),se=K,$e=R(G,"round_type"),Y(fe,H(fe,"initialize",J,!1,!0),"initialize",[],null),fe.notations=se,fe.round_type=$e,fe.prefix_number=!1,fe.suffix_number=!1,fe.need_prefix_number=!1,fe.need_suffix_number=!1,fe.modifier=!0,fe.critical=!1,fe.fumble=!1,fe.dollar=!1,fe.allowed_cmp_op=[q,">=",">","<=","<","==","!="],fe.question_target=!1},-2),Z(e,"$disable_modifier",function(){return this.modifier=!1,this}),Z(e,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),Z(e,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),Z(e,"$has_prefix_number",function(){var u=this;return u.prefix_number=!0,u.need_prefix_number=!0,u}),Z(e,"$has_suffix_number",function(){var u=this;return u.suffix_number=!0,u.need_suffix_number=!0,u}),Z(e,"$enable_critical",function(){return this.critical=!0,this}),Z(e,"$enable_fumble",function(){return this.fumble=!0,this}),Z(e,"$enable_dollar",function(){return this.dollar=!0,this}),Z(e,"$restrict_cmp_op_to",function(u){var y;return y=E(arguments),this.allowed_cmp_op=y,this},-1),Z(e,"$enable_question_target",function(){return this.question_target=!0,this}),Z(e,"$parse",function(u){var y=this;try{return y.lexer=i("Lexer").$new(u,y.notations),y.$do_parse()}catch(K){if(!$.rescue(K,[i("ParseError"),i("ZeroDivisionError")]))throw K;try{return q}finally{$.pop_exception()}}}),e.$private(),Z(e,"$parsed",function(u,y,K,G){try{return L("eval_return"),W(i("Parsed").$new(),"tap",[],function ce(fe){var _e,de,me,he,ge,ve,pe,be=null==ce.$$s?this:ce.$$s;return null==be.round_type&&(be.round_type=q),null==fe&&(fe=q),fe["$command="](u["$[]"]("command")),fe["$prefix_number="]((_e=u["$[]"]("prefix"))===q||null==_e?q:_e.$eval(be.round_type)),fe["$suffix_number="]((de=u["$[]"]("suffix"))===q||null==de?q:de.$eval(be.round_type)),fe["$critical="]((me=y["$[]"]("critical"))===q||null==me?q:me.$eval(be.round_type)),fe["$fumble="]((he=y["$[]"]("fumble"))===q||null==he?q:he.$eval(be.round_type)),fe["$dollar="]((ge=y["$[]"]("dollar"))===q||null==ge?q:ge.$eval(be.round_type)),fe["$modify_number="](K.$eval(be.round_type)),fe["$cmp_op="](G["$[]"]("cmp_op")),U(G["$[]"]("target"),"?")?(fe["$question_target="](!0),W(fe,"target_number=",ve=[0]),ve[ve.length-1]):(fe["$question_target="](!1),ve=[(pe=G["$[]"]("target"),pe===q||null==pe?q:pe.$eval(be.round_type))],W(fe,"target_number=",ve),ve[ve.length-1])},{$$s:this})}catch(ce){if(ce===$.t_eval_return)return ce.$v;throw ce}}),Z(e,"$next_token",function(){return this.lexer.$next_token()}),c=$.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),o=$.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),x=$.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),j=$.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),O=$.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),te=$.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),ne=[q,6,13,3,9,-1,27,-15,-10,-1,-38],ae=[q,q,q,q,q,q,19,16,15,q,q],le=$.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ie=w(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),A(n[0],"Racc_arg",[c,o,j,x,O,te,ae,ne,19,le,ie,58,35,!0]),F(i("Ractor","skip_raise")?"constant":q)&&i("Ractor").$make_shareable(i("Racc_arg")),A(n[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),F(i("Ractor","skip_raise")?"constant":q)&&i("Ractor").$make_shareable(i("Racc_token_to_s_table")),A(n[0],"Racc_debug_parser",!1),Z(e,"$_reduce_1",function(u,y,K){var G;return F(this.modifier)||this.$raise(i("ParseError")),G=k(u),this.$parsed(null==G[0]?q:G[0],null==G[1]?q:G[1],null==G[2]?q:G[2],null==G[3]?q:G[3])}),Z(e,"$_reduce_2",function(u,y,K){var G;return F(this.modifier)||this.$raise(i("ParseError")),G=k(u),this.$parsed(null==G[0]?q:G[0],null==G[2]?q:G[2],null==G[1]?q:G[1],null==G[3]?q:G[3])}),Z(e,"$_reduce_3",function(u,y,K){var G,_e;return _e=null==(G=k(u))[2]?q:G[2],this.$parsed(null==G[0]?q:G[0],null==G[1]?q:G[1],S(S(i("Arithmetic"),"Node"),"Number").$new(0),_e)}),Z(e,"$_reduce_4",function(u,y,K){var G=this;return F(G.prefix_number)&&F(G.suffix_number)||G.$raise(i("ParseError")),T(["command","prefix","suffix"],{command:u["$[]"](1),prefix:u["$[]"](0),suffix:u["$[]"](2)})}),Z(e,"$_reduce_5",function(u,y,K){var G=this;return F(G.prefix_number)||G.$raise(i("ParseError")),F(G.need_suffix_number)&&G.$raise(i("ParseError")),T(["command","prefix"],{command:u["$[]"](1),prefix:u["$[]"](0)})}),Z(e,"$_reduce_6",function(u,y,K){var G=this;return F(G.suffix_number)||G.$raise(i("ParseError")),F(G.need_prefix_number)&&G.$raise(i("ParseError")),T(["command","suffix"],{command:u["$[]"](0),suffix:u["$[]"](1)})}),Z(e,"$_reduce_7",function(u,y,K){var G=this;return(F(G.need_prefix_number)||F(G.need_suffix_number))&&G.$raise(i("ParseError")),T(["command"],{command:u["$[]"](0)})}),Z(e,"$_reduce_8",function(u,y,K){return T([],{})}),Z(e,"$_reduce_9",function(u,y,K){var G,_e,ce=q;return ce=null==(G=k(u))[0]?q:G[0],_e=null==G[2]?q:G[2],F(this.critical)&&F(ce["$[]"]("critical")["$nil?"]())||this.$raise(i("ParseError")),ce["$[]="]("critical",_e),ce}),Z(e,"$_reduce_10",function(u,y,K){var G,_e,ce=q;return ce=null==(G=k(u))[0]?q:G[0],_e=null==G[2]?q:G[2],F(this.fumble)&&F(ce["$[]"]("fumble")["$nil?"]())||this.$raise(i("ParseError")),ce["$[]="]("fumble",_e),ce}),Z(e,"$_reduce_11",function(u,y,K){var G,_e,ce=q;return ce=null==(G=k(u))[0]?q:G[0],_e=null==G[2]?q:G[2],F(this.dollar)&&F(ce["$[]"]("dollar")["$nil?"]())||this.$raise(i("ParseError")),ce["$[]="]("dollar",_e),ce}),Z(e,"$_reduce_12",function(u,y,K){return u["$[]"](1)}),Z(e,"$_reduce_13",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"Negative").$new(u["$[]"](1))}),Z(e,"$_reduce_14",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"+",u["$[]"](2))}),Z(e,"$_reduce_15",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"-",u["$[]"](2))}),Z(e,"$_reduce_16",function(u,y,K){return F(this.allowed_cmp_op["$include?"](q))||this.$raise(i("ParseError")),T([],{})}),Z(e,"$_reduce_17",function(u,y,K){var G,ce,fe;return fe=null==(G=k(u))[1]?q:G[1],F(this.allowed_cmp_op["$include?"](ce=null==G[0]?q:G[0]))||this.$raise(i("ParseError")),T(["cmp_op","target"],{cmp_op:ce,target:fe})}),Z(e,"$_reduce_18",function(u,y,K){var se,G=this;return se=u["$[]"](0),F(G.question_target)||G.$raise(i("ParseError")),F(G.allowed_cmp_op["$include?"](se))||G.$raise(i("ParseError")),T(["cmp_op","target"],{cmp_op:se,target:"?"})}),Z(e,"$_reduce_19",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"+",u["$[]"](2))}),Z(e,"$_reduce_20",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"-",u["$[]"](2))}),Z(e,"$_reduce_22",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"BinaryOp").$new(u["$[]"](0),"*",u["$[]"](2))}),Z(e,"$_reduce_23",function(u,y,K){return u["$[]"](3).$new(u["$[]"](0),u["$[]"](2))}),Z(e,"$_reduce_25",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),Z(e,"$_reduce_26",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"DivideWithCeil")}),Z(e,"$_reduce_27",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"DivideWithCeil")}),Z(e,"$_reduce_28",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"DivideWithRound")}),Z(e,"$_reduce_29",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"DivideWithFloor")}),Z(e,"$_reduce_30",function(u,y,K){return u["$[]"](1)}),Z(e,"$_reduce_31",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"Negative").$new(u["$[]"](1))}),Z(e,"$_reduce_33",function(u,y,K){return u["$[]"](1)}),Z(e,"$_reduce_34",function(u,y,K){return S(S(i("Arithmetic"),"Node"),"Number").$new(u["$[]"](0))}),Z(e,"$_reduce_none",function(u,y,K){return u["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function($){var W,A,I,b,g,q,k,L,P=$.module,Q=$.send,E=$.eqeqeq,C=$.truthy,B=$.def,R=$.return_val,Y=[],H=$.nil;return W=Y,A=L=[P(Y[0],"BCDice")].concat(W),I=k=[P(L[0],"Deprecated")].concat(A),g=[b=P(k[0],"Checker")].concat(I),q=$.$r(g),b.$private(),B(b,"$check_result_legacy",function(_,p,f,z){var M,v=this,N=H,h=H,m=H,d=H;return N=Q(p,"map",[],"sides".$to_proc()),M=(h=Q(p,"map",[],"value".$to_proc())).$sum(),m=E([100],d=N)?v.$check_1D100(_,M,f,z):E([20],d)?v.$check_1D20(_,M,f,z):E([6,6],d)?v.$check_2D6(_,M,h,f,z):H,(C(m["$nil?"]())||C(m["$empty?"]()))&&(m=E([10],d=N.$uniq())?v.$check_nD10(_,M,h,f,z):E([6],d)?v.$check_nD6(_,M,h,f,z):H,C(m["$nil?"]())||C(m["$empty?"]()))?H:q("Result").$new(m.$delete_prefix(" \uff1e "))}),B(b,"$check_1D100",R(H)),B(b,"$check_1D20",R(H)),B(b,"$check_nD10",R(H)),B(b,"$check_2D6",R(H)),B(b,"$check_nD6",R(H))},Opal.queue(function($){var g,v,d,t,i,c,a,r,e,s,h,P=$.module,Q=$.klass,E=$.slice,C=$.rb_plus,B=$.truthy,R=$.def,Y=$.regexp,H=$.send,Z=$.thrower,W=$.return_ivar,U=$.assign_ivar_val,L=$.eqeqeq,w=$.eqeq,A=$.return_val,F=$.range,k=$.rb_minus,T=$.rb_divide,I=$.rb_times,b=$.rb_ge,q=$.top,S=[],_=$.$r(S),p=$.nil,f=$.$$$;return q.$require("i18n"),q.$require("i18n/backend/fallbacks"),q.$require("bcdice/randomizer"),q.$require("bcdice/dice_table"),q.$require("bcdice/enum"),q.$require("bcdice/translate"),q.$require("bcdice/result"),q.$require("bcdice/command/parser"),q.$require("bcdice/deprecated/checker"),v=S,d=h=[P(S[0],"BCDice")].concat(v),r=[a=Q(h[0],null,"Base")].concat(d),e=$.$r(r),(s=a.$$prototype).raw_input=s.randomizer=s.enabled_upcase_input=s.debug=p,i=[t=$.get_singleton_class(a)].concat(r),c=$.$r(i),t.$attr_reader("prefixes"),R(t,"$register_prefix",function(x){var O,ne;return null==this.prefixes&&(this.prefixes=p),O=E(arguments),this.prefixes=C(B(ne=this.prefixes)?ne:[],O.$flatten())},-1),R(t,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),R(t,"$prefixes_pattern",function(){var x=this,j=p;return null==x.prefixes_pattern&&(x.prefixes_pattern=p),null==x.prefixes&&(x.prefixes=p),x.prefixes_pattern=B(j=x.prefixes_pattern)?j:p,B(x.prefixes_pattern)?x.prefixes_pattern:(x.prefixes=B(j=x.prefixes)?j:[],x.prefixes.$freeze(),x.prefixes_pattern=(B(x.prefixes["$empty?"]())?/(?!)/:Y(["^(S)?(",x.prefixes.$join("|"),")"],"i")).$freeze())}),R(t,"$command_pattern",function(){var x=this,j=p,O=p;return null==x.command_pattern&&(x.command_pattern=p),null==x.prefixes&&(x.prefixes=p),x.command_pattern=B(j=x.command_pattern)?j:p,B(x.command_pattern)?x.command_pattern:(x.prefixes=B(j=x.prefixes)?j:[],x.prefixes.$freeze(),O=C(H(f(c("CommonCommand"),"COMMANDS"),"map",[],function(ne){return null==ne&&(ne=p),f(ne,"PREFIX_PATTERN").$source()}),x.prefixes),x.command_pattern=Y(["^S?(",O.$join("|"),")"],"i").$freeze())}),R(t,"$eval",function(x){try{return Z("eval_return"),this.$new(x).$eval()}catch(te){if(te===$.t_eval_return)return te.$v;throw te}}),a.$include(e("Translate")),a.$include(f(e("Deprecated"),"Checker")),R(a,"$initialize",function(n){var i=this;return i.raw_input=n,i.sort_add_dice=!1,i.sort_barabara_dice=!1,i.d66_sort_type=f(e("D66SortType"),"NO_SORT"),i.enabled_d9=!1,i.round_type=f(e("RoundType"),"FLOOR"),i.sides_implicit_d=6,i.upper_dice_reroll_threshold=p,i.reroll_dice_reroll_threshold=p,i.default_cmp_op=p,i.default_target_number=p,i.enabled_upcase_input=!0,i.locale="ja_jp",i.randomizer=f(e("BCDice"),"Randomizer").$new(),i.debug=!1}),a.$attr_accessor("randomizer"),a.$attr_reader("d66_sort_type"),a.$attr_reader("round_type"),a.$attr_reader("sides_implicit_d"),a.$attr_reader("upper_dice_reroll_threshold"),a.$attr_reader("reroll_dice_reroll_threshold"),a.$attr_reader("default_cmp_op"),a.$attr_reader("default_target_number"),R(a,"$sort_add_dice?",W("sort_add_dice")),R(a,"$sort_barabara_dice?",W("sort_barabara_dice")),R(a,"$enabled_d9?",W("enabled_d9")),R(a,"$enable_debug",U("debug",!0)),R(a,"$eval",function(){var i,o,n=this,c=p;return i=f(e("BCDice"),"Preprocessor").$process(n.raw_input,n),c=B(o=n.$dice_command(i))?o:n.$eval_common_command(n.raw_input),B(c)?(c["$rands="](n.randomizer.$rand_results()),c["$detailed_rands="](n.randomizer.$detailed_rand_results()),c):p}),R(a,"$change_text",function(n){return n}),R(a,"$check_result",function(n,i,c,o){var x=this,j=p,O=p,te=p,ne=p,ae=p;return j=x.$check_result_legacy(n,i,c,o),B(j)?j:(O=H(i,"map",[],"sides".$to_proc()),ne=(te=H(i,"map",[],"value".$to_proc())).$sum(),j=L([100],ae=O)?x.$result_1d100(n,ne,c,o):L([20],ae)?x.$result_1d20(n,ne,c,o):L([6,6],ae)?x.$result_2d6(n,ne,te,c,o):p,w(j,e("Result").$nothing())?p:B(j)?j:(j=L([10],ae=O.$uniq())?x.$result_nd10(n,ne,te,c,o):L([6],ae)?x.$result_nd6(n,ne,te,c,o):p,w(j,e("Result").$nothing())?p:B(j)?j:x.$result_ndx(n,c,o)))}),R(a,"$grich_text",A(p)),a.$private(),R(a,"$eval_common_command",function(n){try{Z("eval_return");var c=Z("return");return n=this.$change_text(n),H(f(e("CommonCommand"),"COMMANDS"),"each",[],function x(j){var te,O=null==x.$$s?this:x.$$s;if(null==O.randomizer&&(O.randomizer=p),null==j&&(j=p),te=j.$eval(n,O,O.randomizer),!B(te))return p;c.$throw(te)},{$$s:this,$$ret:c}),p}catch(x){if(x===$.t_eval_return||x===c)return x.$v;throw x}}),R(a,"$dice_command",function(n){var i=this,c=p,o=p,x=p,j=p;return B(i.enabled_upcase_input)&&(n=n.$upcase()),c=i.$class().$prefixes_pattern().$match(n),B(c)?(o=c["$[]"](1)["$nil?"]()["$!"](),B(o)&&(n=n["$[]"](F(1,-1,!1))),x=i.$eval_game_system_specific_command(n),B(x["$is_a?"](e("Result")))?(x["$secret="](B(j=x["$secret?"]())?j:o),x):B(x["$nil?"]())||B(x["$empty?"]())||w(x,"1")?p:H(e("Result").$new(),"tap",[],function(te){var ne;return null==te&&(te=p),te["$text="](x.$to_s()),H(te,"secret=",ne=[o]),ne[ne.length-1]})):p}),R(a,"$eval_game_system_specific_command",A(p)),R(a,"$result_ndx",function(n,i,c){return B(c["$is_a?"](e("String")))?p:B(n.$send(i,c))?e("Result").$success(this.$translate("success")):e("Result").$failure(this.$translate("failure"))}),R(a,"$result_1d100",A(p)),R(a,"$result_1d20",A(p)),R(a,"$result_nd10",A(p)),R(a,"$result_2d6",A(p)),R(a,"$result_nd6",A(p)),R(a,"$get_table_by_2d6",function(n){return this.$get_table_by_nD6(n,2)}),R(a,"$get_table_by_1d6",function(n){return this.$get_table_by_nD6(n,1)}),R(a,"$get_table_by_nD6",function(n,i){return this.$get_table_by_nDx(n,i,6)}),R(a,"$get_table_by_nDx",function(n,i,c){var x,j=p;return x=this.randomizer.$roll_sum(i,c),j=this.$get_table_value(n["$[]"](k(x,i))),B(j["$nil?"]())?["1",0]:[j,x]}),R(a,"$get_table_by_1d3",function(n){var o,x,i=this,j=p;return i.$debug("get_table_by_1d3"),o=i.randomizer.$roll_sum(1,6),i.$debug("num",o),x=T(k(o,1),2).$to_i(),i.$debug("index",x),j=n["$[]"](x),B(j["$nil?"]())?["1",0]:[j,o]}),R(a,"$get_table_by_d66_swap",function(n){var c;return c=this.randomizer.$roll_d66(f(e("D66SortType"),"ASC")),[this.$get_table_by_number(c,n),c]}),R(a,"$get_table_by_d66",function(n){var c,o,x,O,j=p;return c=this.randomizer.$roll_once(6),o=this.randomizer.$roll_once(6),x=C(I(k(c,1),6),k(o,1)),j=n["$[]"](x),O=""+c+o,B(j["$nil?"]())?["1",O]:[j,O]}),R(a,"$get_table_by_number",function(n,i,c){try{var o=Z("return");return null==c&&(c="1"),H(i,"each",[],function j(O){var ne,te=null==j.$$s?this:j.$$s;if(null==O&&(O=p),ne=O["$[]"](0),!B(b(ne,n)))return p;o.$throw(te.$get_table_value(O["$[]"](1)))},{$$s:this,$$ret:o}),this.$get_table_value(c)}catch(j){if(j===o)return j.$v;throw j}},-3),R(a,"$get_table_value",function(n){return B(n["$is_a?"](e("Proc")))?n.$call():n}),R(a,"$roll_tables",function(n,i){var o=p;return o=i["$[]"](n),B(o)?o.$roll(this.randomizer).$to_s():p}),R(a,"$debug",function(n,i){var o,x=this,j=p,O=p;return o=E(arguments,1),B(x.debug)?(j=B(n["$is_a?"](e("String")))?n:n.$inspect(),B(o["$empty?"]())?x.$warn(j):(O=H(o,"map",[],function(ne){return null==ne&&(ne=p),B(ne["$is_a?"](e("String")))?'"'+ne+'"':ne.$inspect()}),x.$warn(j+": "+O.$join(", ")))):p},-2),f(f(_("I18n"),"Backend"),"Simple").$include(f(f(_("I18n"),"Backend"),"Fallbacks")),_("I18n").$load_path()["$<<"](_("Dir")["$[]"](_("File").$join("bcdice","../../i18n/**/*.yml"))),_("I18n")["$default_locale="]("ja_jp"),g=[["ja_jp"]],H(_("I18n").$fallbacks(),"defaults=",g),g[g.length-1]})},3521:(l,ee,re)=>{re(3986),Opal.modules["bcdice/normalize"]=function($){var H,L,W,P=$.module,Q=$.eqeqeq,E=$.def,C=$.eqeq,B=[],R=$.nil;return H=B,W=[P(B[0],"BCDice")].concat(H),(L=P(W[0],"Normalize")).$module_function(),E(L,"$comparison_operator",function(A){var F;return Q(/<=|=</,F=A)?"<=":Q(/>=|=>/,F)?">=":Q(/<>|!=|=!/,F)?"!=":Q(/</,F)?"<":Q(/>/,F)?">":Q(/=/,F)?"==":R}),E(L,"$target_number",function(A){return C(A,"?")?A:A.$to_i()})},Opal.modules["racc/parser"]=function($){var z,N,h,P=$.module,Q=$.klass,E=$.truthy,C=$.const_set,B=$.defs,R=$.gvars,Y=$.rb_lt,H=$.def,Z=$.to_ary,W=$.send,U=$.neqeq,L=$.rb_plus,w=$.eqeq,A=$.rb_ge,F=$.rb_gt,k=$.rb_minus,T=$.rb_le,I=$.rb_times,b=$.assign_ivar_val,q=[],S=$.$r(q),_=$.nil,p=$.$$$;return z=q,N=[P(q[0],"Racc")].concat(z),h=$.$r(N),Q(N[0],h("StandardError"),"ParseError"),E(p("::","ParseError","skip_raise")?"constant":_)||C(q[0],"ParseError",p(S("Racc"),"ParseError")),function(f,z){var a,r,e,s,t,h=[P(f,"Racc")].concat(z),M=$.$r(h);return E(M("Racc_No_Extensions","skip_raise")?"constant":_)||C(h[0],"Racc_No_Extensions",!1),a=h,e=[r=Q(h[0],null,"Parser")].concat(a),s=$.$r(e),(t=r.$$prototype).yydebug=t.racc_debug_out=t.racc_error_status=t.racc_t=t.racc_vstack=t.racc_val=t.racc_state=t.racc_tstack=_,C(e[0],"Racc_Runtime_Version","1.4.6"),C(e[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),C(e[0],"Racc_Runtime_Core_Version_R","1.4.6"),C(e[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),C(e[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),C(e[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),C(e[0],"Racc_Runtime_Core_Version",s("Racc_Runtime_Core_Version_R")),C(e[0],"Racc_Runtime_Core_Revision",s("Racc_Runtime_Core_Revision_R")),C(e[0],"Racc_Runtime_Type","ruby"),B(s("Parser"),"$racc_runtime_type",function(){return s("Racc_Runtime_Type")}),H(r,"$_racc_setup",function(){var i,c,o=this,x=_,j=_;return null==R.stderr&&(R.stderr=_),E(p(o.$class(),"Racc_debug_parser"))||(o.yydebug=!1),E(null!=(i=o.yydebug)&&i!==_?"instance-variable":_)||(o.yydebug=!1),E(o.yydebug)&&(E(null!=(c=o.racc_debug_out)&&c!==_?"instance-variable":_)||(o.racc_debug_out=R.stderr),o.racc_debug_out=E(x=o.racc_debug_out)?x:R.stderr),j=p(o.$class(),"Racc_arg"),E(Y(j.$size(),14))&&j["$[]="](13,!0),j}),H(r,"$_racc_init_sysvars",function(){var i=this;return i.racc_state=[0],i.racc_tstack=[],i.racc_vstack=[],i.racc_t=_,i.racc_val=_,i.racc_read_next=!0,i.racc_user_yyerror=!1,i.racc_error_status=0}),H(r,"$do_parse",function(){return this.$__send__(s("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),H(r,"$next_token",function(){return this.$raise(s("NotImplementedError"),this.$class()+"#next_token is not defined")}),H(r,"$_racc_do_parse_rb",function(i,c){var o,j=this,O=_,te=_,ne=_,ae=_,oe=_,ue=_,ie=_,X=_;return o=Z(i),O=null==o[0]?_:o[0],te=null==o[1]?_:o[1],ne=null==o[2]?_:o[2],ae=null==o[3]?_:o[3],oe=null==o[10]?_:o[10],j.$_racc_init_sysvars(),ue=ie=X=_,W(j,"catch",["racc_end_parse"],function D(){var V,J,u=null==D.$$s?this:D.$$s,y=_;for(null==u.racc_state&&(u.racc_state=_),null==u.racc_read_next&&(u.racc_read_next=_),null==u.racc_t&&(u.racc_t=_),null==u.yydebug&&(u.yydebug=_),null==u.racc_val&&(u.racc_val=_);E(!0);)for(E(X=ae["$[]"](u.racc_state["$[]"](-1)))?(E(u.racc_read_next)&&U(u.racc_t,0)&&(J=u.$next_token(),V=Z(J),ue=null==V[0]?_:V[0],u.racc_val=null==V[1]?_:V[1],u.racc_t=E(ue)?E(y=oe["$[]"](ue))?y:1:0,E(u.yydebug)&&u.$racc_read_token(u.racc_t,ue,u.racc_val),u.racc_read_next=!1),X=L(X,u.racc_t),E(A(X,0))&&E(ie=O["$[]"](X))&&w(te["$[]"](X),u.racc_state["$[]"](-1))||(ie=ne["$[]"](u.racc_state["$[]"](-1)))):ie=ne["$[]"](u.racc_state["$[]"](-1));E(ie=u.$_racc_evalact(ie,i)););},{$$s:j})}),H(r,"$yyparse",function(i,c){return this.$__send__(s("Racc_YY_Parse_Method"),i,c,this.$_racc_setup(),!0)}),H(r,"$_racc_yyparse_rb",function(i,c,o,x){var j,ne=_,ae=_,le=_,oe=_,ie=_,X=_,D=_;return j=Z(o),ne=null==j[0]?_:j[0],ae=null==j[1]?_:j[1],le=null==j[2]?_:j[2],oe=null==j[3]?_:j[3],ie=null==j[10]?_:j[10],this.$_racc_init_sysvars(),X=_,D=_,W(this,"catch",["racc_end_parse"],function V(){var J=null==V.$$s?this:V.$$s;for(null==J.racc_state&&(J.racc_state=_);!E(D=oe["$[]"](J.racc_state["$[]"](-1)));)for(;E(X=J.$_racc_evalact(le["$[]"](J.racc_state["$[]"](-1)),o)););return W(i,"__send__",[c],function u(y,K){var G=null==u.$$s?this:u.$$s,se=_,$e=_;for(null==G.racc_t&&(G.racc_t=_),null==G.racc_state&&(G.racc_state=_),null==G.racc_read_next&&(G.racc_read_next=_),null==y&&(y=_),null==K&&(K=_),G.racc_t=E(y)?E(se=ie["$[]"](y))?se:1:0,G.racc_val=K,G.racc_read_next=!1,D=L(D,G.racc_t),E(A(D,0))&&E(X=ne["$[]"](D))&&w(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));E(X=G.$_racc_evalact(X,o)););for(;E(E(se=E($e=(D=oe["$[]"](G.racc_state["$[]"](-1)))["$!"]())?$e:G.racc_read_next["$!"]())?se:G.racc_t["$=="](0));)for(E(D)&&E(D=L(D,G.racc_t))&&E(A(D,0))&&E(X=ne["$[]"](D))&&w(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));E(X=G.$_racc_evalact(X,o)););},{$$s:J})},{$$s:this})}),H(r,"$_racc_evalact",function(i,c){var o,le,j=this,O=_,te=_,ae=_,oe=_,ue=_,ie=_;if(O=null==(o=Z(c))[0]?_:o[0],te=null==o[1]?_:o[1],ae=null==o[3]?_:o[3],le=null==o[11]?_:o[11],oe=null==o[12]?_:o[12],E(F(i,0))&&E(Y(i,le)))E(F(j.racc_error_status,0))&&(w(j.racc_t,1)||(j.racc_error_status=k(j.racc_error_status,1))),j.racc_vstack.$push(j.racc_val),j.racc_state.$push(i),j.racc_read_next=!0,E(j.yydebug)&&(j.racc_tstack.$push(j.racc_t),j.$racc_shift(j.racc_t,j.racc_tstack,j.racc_vstack));else if(E(Y(i,0))&&E(F(i,oe["$-@"]()))){if(ue=W(j,"catch",["racc_jump"],function X(){var D=null==X.$$s?this:X.$$s;return null==D.racc_state&&(D.racc_state=_),D.racc_state.$push(D.$_racc_do_reduce(c,i)),!1},{$$s:j}),E(ue))switch(ue.valueOf()){case 1:return j.racc_user_yyerror=!0,oe["$-@"]();case 2:return le;default:j.$raise("[Racc Bug] unknown jump code")}}else if(w(i,le))E(j.yydebug)&&j.$racc_accept(),j.$throw("racc_end_parse",j.racc_vstack["$[]"](0));else{if(w(i,oe["$-@"]())){switch(j.racc_error_status.valueOf()){case 0:E(c["$[]"](21))||j.$on_error(j.racc_t,j.racc_val,j.racc_vstack);break;case 3:w(j.racc_t,0)&&j.$throw("racc_end_parse",_),j.racc_read_next=!0}for(j.racc_user_yyerror=!1,j.racc_error_status=3;E(!0)&&!(E(ie=ae["$[]"](j.racc_state["$[]"](-1)))&&(ie=L(ie,1),E(A(ie,0))&&E(i=O["$[]"](ie))&&w(te["$[]"](ie),j.racc_state["$[]"](-1))));)E(T(j.racc_state.$size(),1))&&j.$throw("racc_end_parse",_),j.racc_state.$pop(),j.racc_vstack.$pop(),E(j.yydebug)&&(j.racc_tstack.$pop(),j.$racc_e_pop(j.racc_state,j.racc_tstack,j.racc_vstack));return i}j.$raise("[Racc Bug] unknown action "+i.$inspect())}return E(j.yydebug)&&j.$racc_next_state(j.racc_state["$[]"](-1),j.racc_state),_}),H(r,"$_racc_do_reduce",function(i,c){var o,oe,ie,y,K,G,ce,j=this,te=_,ne=_,ae=_,le=_,ue=_,X=_,D=_,V=_,J=_,u=_,se=_,$e=_,fe=_;return te=null==(o=Z(i))[4]?_:o[4],ne=null==o[5]?_:o[5],ae=null==o[6]?_:o[6],le=null==o[7]?_:o[7],oe=null==o[8]?_:o[8],ue=null==o[9]?_:o[9],ie=null==o[13]?_:o[13],X=j.racc_state,D=j.racc_vstack,V=j.racc_tstack,J=I(c,-3),u=ue["$[]"](J),y=ue["$[]"](L(J,1)),K=ue["$[]"](L(J,2)),G=[],E(j.yydebug)&&(se=V["$[]"](u["$-@"](),u)),$e=D["$[]"](u["$-@"](),u),E(j.yydebug)&&V["$[]="](u["$-@"](),u,G),D["$[]="](u["$-@"](),u,G),X["$[]="](u["$-@"](),u,G),E(ie)?D.$push(j.$__send__(K,$e,D,$e["$[]"](0))):D.$push(j.$__send__(K,$e,D)),V.$push(y),E(j.yydebug)&&j.$racc_reduce(se,y,V,D),ce=k(y,oe),E(J=le["$[]"](ce))&&(J=L(J,X["$[]"](-1)),E(A(J,0))&&E(fe=te["$[]"](J))&&w(ne["$[]"](J),ce))?fe:ae["$[]"](ce)}),H(r,"$on_error",function(i,c,o){var j,x=this;return x.$raise(s("ParseError"),x.$sprintf("\nparse error on value %s (%s)",c.$inspect(),E(j=x.$token_to_str(i))?j:"?"))}),H(r,"$yyerror",function(){return this.$throw("racc_jump",1)}),H(r,"$yyaccept",function(){return this.$throw("racc_jump",2)}),H(r,"$yyerrok",b("racc_error_status",0)),H(r,"$racc_read_token",function(i,c,o){var x=this;return x.racc_debug_out.$print("read    "),x.racc_debug_out.$print(c.$inspect(),"(",x.$racc_token2str(i),") "),x.racc_debug_out.$puts(o.$inspect()),x.racc_debug_out.$puts()}),H(r,"$racc_shift",function(i,c,o){var x=this;return x.racc_debug_out.$puts("shift   "+x.$racc_token2str(i)),x.$racc_print_stacks(c,o),x.racc_debug_out.$puts()}),H(r,"$racc_reduce",function(i,c,o,x){var j=this,O=_;return(O=j.racc_debug_out).$print("reduce "),E(i["$empty?"]())?O.$print(" <none>"):W(i,"each",[],function te(ne){return null==ne&&(ne=_),O.$print(" ",(null==te.$$s?this:te.$$s).$racc_token2str(ne))},{$$s:j}),O.$puts(" --\x3e "+j.$racc_token2str(c)),j.$racc_print_stacks(o,x),j.racc_debug_out.$puts()}),H(r,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),H(r,"$racc_e_pop",function(i,c,o){var x=this;return x.racc_debug_out.$puts("error recovering mode: pop token"),x.$racc_print_states(i),x.$racc_print_stacks(c,o),x.racc_debug_out.$puts()}),H(r,"$racc_next_state",function(i,c){var o=this;return o.racc_debug_out.$puts("goto    "+i),o.$racc_print_states(c),o.racc_debug_out.$puts()}),H(r,"$racc_print_stacks",function(i,c){var x=_;return(x=this.racc_debug_out).$print("        ["),W(i,"each_index",[],function j(O){return null==O&&(O=_),x.$print(" (",(null==j.$$s?this:j.$$s).$racc_token2str(i["$[]"](O))," ",c["$[]"](O).$inspect(),")")},{$$s:this}),x.$puts(" ]")}),H(r,"$racc_print_states",function(i){var o=_;return(o=this.racc_debug_out).$print("        ["),W(i,"each",[],function(j){return null==j&&(j=_),o.$print(" ",j)}),o.$puts(" ]")}),H(r,"$racc_token2str",function(i){var o;return E(o=p(this.$class(),"Racc_token_to_s_table")["$[]"](i))?o:this.$raise("[Racc Bug] can't convert token "+i+" to string")}),H(r,"$token_to_str",function(i){return p(this.$class(),"Racc_token_to_s_table")["$[]"](i)})}(q[0],q)},Opal.modules.strscan=function($){var w,A,F,k,T,Q=$.def,E=$.truthy,C=$.eqeqeq,B=$.Opal,R=$.return_ivar,Y=$.send,H=$.alias,Z=[],W=$.nil;return w=Z,F=[A=(0,$.klass)(Z[0],null,"StringScanner")].concat(w),k=$.$r(F),(T=A.$$prototype).pos=T.string=T.working=T.matched=T.prev_pos=T.match=W,A.$attr_reader("pos","matched"),Q(A,"$initialize",function(b){var g=this;return g.string=b,g.pos=0,g.matched=W,g.working=b,g.match=[]}),A.$attr_reader("string"),Q(A,"$beginning_of_line?",function(){var b=this;return 0===b.pos||"\n"===b.string.charAt(b.pos-1)}),Q(A,"$scan",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?g.matched=W:(g.prev_pos=g.pos,g.pos+=q[0].length,g.working=g.working.substring(q[0].length),g.matched=q[0],g.match=q,q[0])}),Q(A,"$scan_until",function(b){var g=this;b=g.$anchor(b);for(var q=g.working,S=0;q.length!=S;++S){var _=b.exec(q.substr(S));if(null!==_){var p=S+_[0].length,f=q.substr(0,p);return g.matched=_[0],g.match=_,g.prev_pos=g.pos+S,g.pos+=p,g.working=q.substr(p),f}}return g.matched=W}),Q(A,"$[]",function(b){var q;if(E(this.match["$empty?"]()))return W;C(k("Symbol"),q=b)?b=b.$to_s():C(k("String"),q)||(b=B["$coerce_to!"](b,k("Integer"),"to_int"));var S=this.match;return b<0&&(b+=S.length),b<0||b>=S.length||null==S[b]?W:S[b]}),Q(A,"$check",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return g.matched=null==q?W:q[0]}),Q(A,"$check_until",function(b){var g=this,q=g.prev_pos,S=g.pos,_=g.working,p=g.$scan_until(b);return g.prev_pos=q,g.pos=S,g.working=_,p}),Q(A,"$peek",function(b){return this.working.substring(0,b)}),Q(A,"$eos?",function(){return 0===this.working.length}),Q(A,"$exist?",function(b){var q=b.exec(this.working);return null==q?W:0==q.index?0:q.index+1}),Q(A,"$skip",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);if(null==q)return g.match=[],g.matched=W;var S=q[0],_=S.length;return g.matched=S,g.match=q,g.prev_pos=g.pos,g.pos+=_,g.working=g.working.substring(_),_}),Q(A,"$skip_until",function(b){var q=this.$scan_until(b);return q===W?W:(this.matched=q.substr(-1),q.length)}),Q(A,"$get_byte",function(){var b=this,g=W;return b.pos<b.string.length?(b.prev_pos=b.pos,b.pos+=1,g=b.matched=b.working.substring(0,1),b.working=b.working.substring(1)):b.matched=W,g}),Q(A,"$match?",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?W:(g.prev_pos=g.pos,q[0].length)}),Q(A,"$pos=",function(b){var g=this;return b<0&&(b+=g.string.$length()),g.pos=b,g.working=g.string.slice(b)}),Q(A,"$matched_size",function(){return this.matched===W?W:this.matched.length}),Q(A,"$post_match",function(){var b=this;return b.matched===W?W:b.string.substr(b.pos)}),Q(A,"$pre_match",function(){var b=this;return b.matched===W?W:b.string.substr(0,b.prev_pos)}),Q(A,"$reset",function(){var b=this;return b.working=b.string,b.matched=W,b.pos=0}),Q(A,"$rest",R("working")),Q(A,"$rest?",function(){return 0!==this.working.length}),Q(A,"$rest_size",function(){return this.$rest().$size()}),Q(A,"$terminate",function(){var b,g=this;return g.match=W,b=[g.string.$length()],Y(g,"pos=",b),b[b.length-1]}),Q(A,"$unscan",function(){var b=this;return b.pos=b.prev_pos,b.prev_pos=W,b.match=W,b}),H(A,"bol?","beginning_of_line?"),H(A,"getch","get_byte"),A.$private(),Q(A,"$anchor",function(b){var g=b.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+b.source+")",g)})},Opal.modules["bcdice/common_command/lexer"]=function($){var U,F,g,q,S,_,T,w,P=$.module,Q=$.klass,E=$.const_set,C=$.hash2,B=$.truthy,R=$.def,Y=$.top,H=[],Z=$.nil;return Y.$require("strscan"),Y.$require("bcdice/normalize"),U=H,F=w=[P(H[0],"BCDice")].concat(U),g=T=[P(w[0],"CommonCommand")].concat(F),S=[q=Q(T[0],null,"Lexer")].concat(g),_=$.$r(S),q.$$prototype.scanner=Z,E(S[0],"SYMBOLS",C(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),R(q,"$initialize",function(z){var N;return z=B(N=z.$split(" ",2).$first())?N:"",this.scanner=_("StringScanner").$new(z)}),R(q,"$next_token",function(){var z=this,v=Z,N=Z,h=Z,m=Z;return B(z.scanner["$eos?"]())?[!1,"$"]:B(v=z.scanner.$scan(/\d+/))?["NUMBER",v.$to_i()]:B(N=z.scanner.$scan(/[<>!=]+/))?["CMP_OP",_("Normalize").$comparison_operator(N)]:(h=z.scanner.$getch().$upcase(),[B(m=_("SYMBOLS")["$[]"](h))?m:h.$to_sym(),h])}),R(q,"$source",function(){return this.scanner.$string()})},Opal.modules.singleton=function($){var U,k,T,I,b,L,w,A,P=$.module,Q=$.def,E=$.send2,C=$.find_super,B=$.send,R=$.truthy,Y=$.defs,H=[],Z=$.nil;return U=H,w=[L=P(H[0],"Singleton")].concat(U),A=$.$r(w),Q(L,"$clone",function(){return this.$raise(A("TypeError"),"can't clone instance of singleton "+this.$class())}),Q(L,"$dup",function(){return this.$raise(A("TypeError"),"can't dup instance of singleton "+this.$class())}),k=w,I=[T=P(w[0],"SingletonClassMethods")].concat(k),b=$.$r(I),Q(T,"$clone",function g(){var q=g.$$p||Z;return g.$$p=null,b("Singleton").$__init__(E(this,C(this,"clone",g,!1,!0),"clone",[],q))}),Q(T,"$inherited",function g(q){var S=g.$$p||Z;return g.$$p=null,E(this,C(this,"inherited",g,!1,!0),"inherited",[q],S),b("Singleton").$__init__(q)}),function(F,k){var T=[F].concat(k),I=$.$r(T);return Q(F,"$__init__",function(g){return B(g,"instance_eval",[],function S(){return(null==S.$$s?this:S.$$s).singleton__instance__=Z},{$$s:this}),Y(g,"$instance",function(){var _=this;return null==_.singleton__instance__&&(_.singleton__instance__=Z),R(_.singleton__instance__)?_.singleton__instance__:_.singleton__instance__=_.$new()}),g}),Q(F,"$included",function b(g){var q=b.$$p||Z;return b.$$p=null,E(this,C(this,"included",b,!1,!0),"included",[g],q),g.$extend(I("SingletonClassMethods")),I("Singleton").$__init__(g)})}($.get_singleton_class(A("Singleton")),w)},Opal.modules["bcdice/common_command/add_dice/node"]=function($){var f,h,a,t,j,O,te,ne,ae,i,c,e,m,v,P=$.module,Q=$.klass,E=$.def,C=$.rb_plus,B=$.thrower,R=$.truthy,Y=$.rb_le,H=$.send,Z=$.return_val,W=$.alias,U=$.return_ivar,L=$.send2,w=$.find_super,A=$.const_set,F=$.eqeqeq,k=$.rb_divide,T=$.assign_ivar,I=$.not,b=$.neqeq,q=[],S=$.nil,_=$.$$$;return $.top.$require("singleton"),f=q,h=v=[P(q[0],"BCDice")].concat(f),a=m=[P(v[0],"CommonCommand")].concat(h),t=e=[P(m[0],"AddDice")].concat(a),i=[P(e[0],"Node")].concat(t),c=$.$r(i),j=i,te=[O=Q(i[0],null,"Command")].concat(j),ne=$.$r(te),(ae=O.$$prototype).lhs=ae.rhs=ae.cmp_op=S,O.$attr_reader("lhs"),O.$attr_reader("cmp_op"),O.$attr_reader("rhs"),E(O,"$initialize",function(oe,ue,ie,X){var D=this;return null==ie&&(ie=S),null==X&&(X=S),D.secret=oe,D.lhs=ue,D.cmp_op=ie,D.rhs=X},-3),E(O,"$expr",function(oe){try{B("eval_return");var ie,X=this;return C(C(X.lhs.$expr(oe),X.$cmp_op_text()),(ie=X.rhs,ie===S||null==ie?S:ie.$eval(oe,S)).$to_s())}catch(D){if(D===$.t_eval_return)return D.$v;throw D}}),E(O,"$s_exp",function(){var oe=this;return R(oe.cmp_op)?"(Command ("+oe.cmp_op+" "+oe.lhs.$s_exp()+" "+oe.rhs.$s_exp()+"))":"(Command "+oe.lhs.$s_exp()+")"}),E(O,"$eval",function(oe,ue){try{B("eval_return");var X,K,D=this,V=S,J=S,u=S,y=S,G=S;return ue=ne("Randomizer").$new(ue,oe),V=D.lhs.$eval(oe,ue),J=R(Y(ue.$rand_results().$size(),1))&&R(D.lhs["$is_a?"](_(ne("Node"),"DiceRoll")))?S:D.lhs.$output(),u=R(D.cmp_op)?(y=D.rhs.$eval(oe,S),oe.$check_result(V,ue.$rand_results(),D.cmp_op,y)):S,u=R(K=u)?K:ne("Result").$new(),G=["("+D.$expr(oe)+")",J,V,(X=u,X===S||null==X?S:X.$text())].$compact(),H(u,"tap",[],function se($e){var ce,fe=null==se.$$s?this:se.$$s;return null==fe.secret&&(fe.secret=S),null==$e&&($e=S),$e["$secret="](fe.secret),ce=[G.$join(" \uff1e ")],H($e,"text=",ce),ce[ce.length-1]},{$$s:D})}catch(se){if(se===$.t_eval_return)return se.$v;throw se}}),O.$private(),E(O,"$cmp_op_text",function(){switch(this.cmp_op.valueOf()){case"!=":return"<>";case"==":return"=";default:return this.cmp_op.$to_s()}}),function(o,x,j){var O=Q(o,null,"UndecidedTarget"),te=[O].concat(j),ne=$.$r(te);O.$include(ne("Singleton")),E(O,"$eval",Z("?")),E(O,"$include_dice?",Z(!1)),E(O,"$expr",Z("?")),E(O,"$output",Z("?")),W(O,"s_exp","output")}(i[0],0,i),function(o,x){var j=Q(o,null,"BinaryOp"),O=j.$$prototype;O.lhs=O.rhs=O.op=S,E(j,"$initialize",function(ne,ae,le){return this.lhs=ne,this.op=ae,this.rhs=le}),E(j,"$eval",function(ne,ae){try{var ue,ie;return B("eval_return"),ue=this.lhs.$eval(ne,ae),ie=this.rhs.$eval(ne,ae),this.$calc(ue,ie,ne.$round_type()).$to_i()}catch(X){if(X===$.t_eval_return)return X.$v;throw X}}),E(j,"$include_dice?",function(){var ae;return R(ae=this.lhs["$include_dice?"]())?ae:this.rhs["$include_dice?"]()}),E(j,"$expr",function(ne){var le,oe;return le=this.lhs.$expr(ne),oe=this.rhs.$expr(ne),""+le+this.op+oe}),E(j,"$output",function(){return""+this.lhs.$output()+this.op+this.rhs.$output()}),E(j,"$s_exp",function(){return"("+this.$op_for_s_exp()+" "+this.lhs.$s_exp()+" "+this.rhs.$s_exp()+")"}),j.$private(),E(j,"$calc",function(ne,ae,le){return ne.$send(this.op,ae).$to_i()}),E(j,"$op_for_s_exp",U("op"))}(i[0]),function(o,x,j){var O=Q(o,x,"DivideBase"),te=[O].concat(j),ne=$.$r(te);O.$$prototype.op=S,E(O,"$initialize",function le(oe,ue){return le.$$p=null,L(this,w(this,"initialize",le,!1,!0),"initialize",[oe,"/",ue],null)}),E(O,"$expr",function le(oe){return le.$$p=null,""+L(this,w(this,"expr",le,!1,!0),"expr",[oe],null)+this.$rounding_method()}),E(O,"$output",function le(){var oe=le.$$p||S;return le.$$p=null,""+L(this,w(this,"output",le,!1,!0),"output",[],oe)+this.$rounding_method()}),O.$private(),E(O,"$rounding_method",function(){return _(this.$class(),"ROUNDING_METHOD")}),E(O,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),E(O,"$calc",function(oe,ue,ie){return R(ue["$zero?"]())?1:this.$divide_and_round(oe,ue,ie).$to_i()}),E(O,"$divide_and_round",function(oe,ue,ie){return this.$raise(ne("NotImplementedError"))})}(i[0],c("BinaryOp"),i),function(o,x,j){var O=Q(o,x,"DivideWithGameSystemDefault"),te=[O].concat(j),ne=$.$r(te);A(te[0],"ROUNDING_METHOD",""),O.$private(),E(O,"$divide_and_round",function(le,oe,ue){var ie,X=S;return F(_(ne("RoundType"),"CEIL"),ie=ue)?k(le.$to_f(),oe).$ceil():F(_(ne("RoundType"),"ROUND"),ie)?(X=k(le.$to_f(),oe),R(X["$negative?"]())?X.$abs().$round()["$-@"]():X.$round()):k(le,oe).$floor()})}(i[0],c("DivideBase"),i),function(o,x,j){var O=Q(o,x,"DivideWithRoundingUp"),te=[O].concat(j);A(te[0],"ROUNDING_METHOD","U"),O.$private(),E(O,"$divide_and_round",function(ae,le,oe){return k(ae.$to_f(),le).$ceil()})}(i[0],c("DivideBase"),i),function(o,x,j){var O=Q(o,x,"DivideWithRoundingOff"),te=[O].concat(j);A(te[0],"ROUNDING_METHOD","R"),O.$private(),E(O,"$divide_and_round",function(ae,le,oe){var ue=S;return ue=k(ae.$to_f(),le),R(ue["$negative?"]())?ue.$abs().$round()["$-@"]():ue.$round()})}(i[0],c("DivideBase"),i),function(o,x,j){var O=Q(o,x,"DivideWithRoundingDown"),te=[O].concat(j);A(te[0],"ROUNDING_METHOD","F"),O.$private(),E(O,"$divide_and_round",function(ae,le,oe){return k(ae,le).$floor()})}(i[0],c("DivideBase"),i),function(o,x){var j=Q(o,null,"Negate");j.$$prototype.body=S,j.$attr_reader("body"),E(j,"$initialize",T("body")),E(j,"$eval",function(ne,ae){try{return B("eval_return"),this.body.$eval(ne,ae).$to_i()["$-@"]()}catch(ue){if(ue===$.t_eval_return)return ue.$v;throw ue}}),E(j,"$include_dice?",function(){return this.body["$include_dice?"]()}),E(j,"$expr",function(ne){return"-"+this.body.$expr(ne)}),E(j,"$output",function(){return"-"+this.body.$output()}),E(j,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(i[0]),function(o,x){var j=Q(o,null,"DiceRoll"),O=j.$$prototype;O.times=O.sides=S,E(j,"$initialize",function(ne,ae){return this.times=ne,this.sides=ae,this.text=S}),E(j,"$eval",function(ne,ae){try{B("eval_return");var ue,ie,X=S,D=S;return ue=this.times.$eval(ne,S),ie=this.$eval_sides(ne),D=(X=ae.$roll(ue,ie)).$sum(),this.text=D+"["+X.$join(",")+"]",D.$to_i()}catch(V){if(V===$.t_eval_return)return V.$v;throw V}}),E(j,"$include_dice?",Z(!0)),E(j,"$expr",function(ne){try{return B("eval_return"),this.times.$eval(ne,S)+"D"+this.$eval_sides(ne)}catch(ie){if(ie===$.t_eval_return)return ie.$v;throw ie}}),E(j,"$output",U("text")),E(j,"$s_exp",function(){return"(DiceRoll "+this.times.$s_exp()+" "+this.sides.$s_exp()+")"}),j.$private(),E(j,"$eval_sides",function(ne){try{return B("eval_return"),this.sides.$eval(ne,S)}catch(oe){if(oe===$.t_eval_return)return oe.$v;throw oe}})}(i[0]),function(o,x){var j=Q(o,x,"ImplicitSidesDiceRoll");j.$$prototype.times=S,E(j,"$initialize",function(ne){return this.times=ne,this.text=S}),E(j,"$s_exp",function(){return"(ImplicitSidesDiceRoll "+this.times.$s_exp()+")"}),j.$private(),E(j,"$eval_sides",function(ne){return ne.$sides_implicit_d()})}(i[0],c("DiceRoll")),function(o,x,j){var O=Q(o,null,"DiceRollWithFilter"),te=[O].concat(j),ne=$.$r(te),ae=O.$$prototype;ae.times=ae.n_filtering=ae.filter=ae.sides=S,A(te[0],"Filter",ne("Struct").$new("abbr","apply")),A(te[0],"KEEP_HIGHEST",ne("Filter").$new("KH",H(O,"lambda",[],function(oe,ue){return null==oe&&(oe=S),null==ue&&(ue=S),oe.$reverse().$take(ue)})).$freeze()),A(te[0],"KEEP_LOWEST",ne("Filter").$new("KL",H(O,"lambda",[],function(oe,ue){return null==oe&&(oe=S),null==ue&&(ue=S),oe.$take(ue)})).$freeze()),A(te[0],"DROP_HIGHEST",ne("Filter").$new("DH",H(O,"lambda",[],function(oe,ue){return null==oe&&(oe=S),null==ue&&(ue=S),oe.$reverse().$drop(ue)})).$freeze()),A(te[0],"DROP_LOWEST",ne("Filter").$new("DL",H(O,"lambda",[],function(oe,ue){return null==oe&&(oe=S),null==ue&&(ue=S),oe.$drop(ue)})).$freeze()),E(O,"$initialize",function(oe,ue,ie,X){var D=this;return b(ue,"implicit")&&I(ue["$respond_to?"]("eval"))&&D.$raise(ne("TypeError"),"sides must be a Node or :implicit ("+ue.$inspect()+")"),D.times=oe,D.sides=ue,D.n_filtering=ie,D.filter=X,D.text=S}),E(O,"$eval",function(oe,ue){try{B("eval_return");var D,V,J,X=this,u=S,y=S;return D=X.times.$eval(oe,S),V=X.$eval_sides(oe),J=X.n_filtering.$eval(oe,S),u=ue.$roll(D,V).$sort(),y=X.filter.$apply()["$[]"](u,J).$sum(),X.text=y+"["+u.$join(",")+"]",y.$to_i()}catch(K){if(K===$.t_eval_return)return K.$v;throw K}}),E(O,"$include_dice?",Z(!0)),E(O,"$implicit_sides?",function(){return this.sides["$=="]("implicit")}),E(O,"$expr",function(oe){try{var X,D,V;return B("eval_return"),X=this.times.$eval(oe,S),D=this.$eval_sides(oe),V=this.n_filtering.$eval(oe,S),X+"D"+D+this.filter.$abbr()+V}catch(J){if(J===$.t_eval_return)return J.$v;throw J}}),E(O,"$output",U("text")),E(O,"$s_exp",function(){var ue,oe=this;return ue=R(oe["$implicit_sides?"]())?oe.sides.$inspect():oe.sides.$s_exp(),"(DiceRollWithFilter "+oe.times.$s_exp()+" "+ue+" "+oe.filter.$abbr().$inspect()+" "+oe.n_filtering.$s_exp()+")"}),O.$private(),E(O,"$eval_sides",function(oe){try{return B("eval_return"),R(this["$implicit_sides?"]())?oe.$sides_implicit_d():this.sides.$eval(oe,S)}catch(X){if(X===$.t_eval_return)return X.$v;throw X}})}(i[0],0,i),function(o,x){var j=Q(o,null,"Parenthesis");j.$$prototype.expr=S,E(j,"$initialize",T("expr")),E(j,"$eval",function(ne,ae){try{return B("eval_return"),this.expr.$eval(ne,ae).$to_i()}catch(ue){if(ue===$.t_eval_return)return ue.$v;throw ue}}),E(j,"$include_dice?",function(){return this.expr["$include_dice?"]()}),E(j,"$expr",function(ne){return"("+this.expr.$expr(ne)+")"}),E(j,"$output",function(){return"("+this.expr.$output()+")"}),E(j,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(i[0]),function(o,x,j){var O=Q(o,null,"Number"),te=[O].concat(j),ne=$.$r(te);return O.$$prototype.literal=S,O.$attr_reader("literal"),E(O,"$initialize",function(oe){return this.literal=oe.$to_i()}),E(O,"$negate",function(){return ne("Number").$new(this.literal["$-@"]())}),E(O,"$eval",function(oe,ue){return this.literal.$to_i()}),E(O,"$include_dice?",Z(!1)),E(O,"$expr",function(oe){return this.literal.$to_s()}),E(O,"$output",function(){return this.literal.$to_s()}),W(O,"s_exp","output")}(i[0],0,i)},Opal.modules["bcdice/common_command/add_dice/parser"]=function($){var b,_,v,a,i,c,o,x,j,O,te,ne,ae,ue,r,t,n,h,M,f,q,P=$.module,Q=$.klass,E=$.defs,C=$.def,B=$.truthy,R=$.eqeq,Y=$.hash,H=$.const_set,Z=$.to_ary,W=$.not,U=$.return_val,L=$.neqeq,w=$.hash2,A=$.top,F=[],k=$.nil,T=$.$$$;return A.$require("racc/parser.rb"),A.$require("bcdice/common_command/lexer"),A.$require("bcdice/common_command/add_dice/node"),b=F,_=q=[P(F[0],"BCDice")].concat(b),v=f=[P(q[0],"CommonCommand")].concat(_),h=[P(f[0],"AddDice")].concat(v),M=$.$r(h),a=h,t=[r=Q(h[0],T(M("Racc"),"Parser"),"Parser")].concat(a),n=$.$r(t),r.$$prototype.lexer=k,E(r,"$parse",function(J){return this.$new().$parse(J)}),C(r,"$parse",function(J){try{return this.lexer=n("Lexer").$new(J),this.$do_parse()}catch(y){if(!$.rescue(y,[n("ParseError")]))throw y;try{return k}finally{$.pop_exception()}}}),r.$private(),C(r,"$next_token",function(){return this.lexer.$next_token()}),C(r,"$expand_negate",function(J,u){if(B(u["$is_a?"](T(n("Node"),"Negate")))){if(R(J,"+"))return["-",u.$body()];if(R(J,"-"))return["+",u.$body()]}return[J,u]}),i=$.large_array_unpack("14,14,50,12,51,19,20,14,14,14,12,3,12,17,18,14,8,9,12,4,13,13,28,8,9,8,9,13,13,13,14,8,9,12,15,13,14,23,14,12,56,12,19,20,57,14,8,9,12,,13,,8,9,8,9,13,14,13,,12,8,9,14,16,13,-27,-27,19,20,-27,17,18,8,9,,42,13,,17,18,40,39,13,,38,-28,-28,40,39,-28,,38,45,47,44,46,52,53,54,55"),c=$.large_array_unpack("16,12,38,16,38,6,6,2,36,8,2,0,8,27,27,9,16,16,9,1,16,12,16,2,2,8,8,2,36,8,13,9,9,13,4,9,17,11,18,17,50,18,29,29,51,19,13,13,19,,13,,17,17,18,18,17,20,18,,20,19,19,23,5,19,23,23,30,30,23,25,25,20,20,,25,20,,5,5,24,24,23,,24,33,33,34,34,33,,34,32,32,32,32,39,39,40,40"),o=$.large_array_unpack("7,19,5,,34,61,-15,,7,13,,32,-1,28,,,-2,34,36,43,55,,,61,76,53,,-5,,22,48,,79,81,83,,6,,-8,90,92,,,,,,,,,,29,31,,,,,,"),x=$.large_array_unpack("-3,-41,-41,-4,-41,-1,-9,-12,-41,-41,-20,-26,-41,-41,-40,58,-41,-41,-41,-41,-41,-18,-19,-22,-24,-41,-2,-5,-6,-7,-8,-10,-13,-21,-41,-25,-37,-30,-41,-41,-41,-38,-39,-11,-14,-15,-16,-17,-23,-29,-41,-41,-33,-34,-35,-36,-31,-32"),j=[24,5,21,22,29,30,35,1,2,26,43,33,25,31,32,27,48,34,k,k,k,k,k,k,49],O=[9,3,6,6,5,5,11,1,2,4,7,9,3,6,6,3,11,10,k,k,k,k,k,k,9],te=[k,7,8,-1,-7,-13,-6,-22,k,-12,-6,-18,k,k,k],ne=[k,k,k,k,k,6,7,k,10,11,k,k,36,37,41],ae=$.large_array_unpack("0,0,racc_error,2,26,_reduce_1,4,26,_reduce_2,0,27,_reduce_3,1,27,_reduce_4,1,29,_reduce_none,1,29,_reduce_6,3,28,_reduce_7,3,28,_reduce_8,1,28,_reduce_none,3,30,_reduce_10,4,30,_reduce_11,1,30,_reduce_none,0,32,_reduce_13,1,32,_reduce_14,1,32,_reduce_15,1,32,_reduce_16,1,32,_reduce_17,2,31,_reduce_18,2,31,_reduce_19,1,31,_reduce_none,3,33,_reduce_21,2,33,_reduce_22,4,33,_reduce_23,2,33,_reduce_24,3,33,_reduce_25,1,33,_reduce_none,0,35,_reduce_27,1,35,_reduce_28,2,36,_reduce_29,1,36,_reduce_30,3,39,_reduce_31,3,39,_reduce_32,2,37,_reduce_33,2,37,_reduce_34,2,37,_reduce_35,2,37,_reduce_36,1,38,_reduce_none,1,38,_reduce_none,3,34,_reduce_39,1,34,_reduce_40"),ue=Y(!1,0,"error",1,"NUMBER",2,"CMP_OP",3,"S",4,"D",5,"K",6,"H",7,"L",8,"M",9,"A",10,"X",11,"I",12,"N",13,"U",14,"R",15,"F",16,"C",17,"PLUS",18,"MINUS",19,"ASTERISK",20,"SLASH",21,"PARENL",22,"PARENR",23,"QUESTION",24),H(t[0],"Racc_arg",[i,c,x,o,j,O,ne,te,25,ae,ue,58,41,!0]),B(n("Ractor","skip_raise")?"constant":k)&&n("Ractor").$make_shareable(n("Racc_arg")),H(t[0],"Racc_token_to_s_table",$.large_array_unpack("$end,error,NUMBER,CMP_OP,S,D,K,H,L,M,A,X,I,N,U,R,F,C,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,QUESTION,$start,command,secret,add,target,mul,unary,round_type,dice,term,explicit_or_implicit_sides,filter,filter_type,filter_type_with_shorthand,filter_shorthand")),B(n("Ractor","skip_raise")?"constant":k)&&n("Ractor").$make_shareable(n("Racc_token_to_s_table")),H(t[0],"Racc_debug_parser",!1),C(r,"$_reduce_1",function(J,u,y){var K,$e,ce=k;return $e=null==(K=Z(J))[0]?k:K[0],B((ce=null==K[1]?k:K[1])["$include_dice?"]())||this.$raise(n("ParseError")),T(n("Node"),"Command").$new($e,ce)}),C(r,"$_reduce_2",function(J,u,y){var K,$e,ce=k,fe=k,_e=k;return $e=null==(K=Z(J))[0]?k:K[0],fe=null==K[2]?k:K[2],_e=null==K[3]?k:K[3],(W((ce=null==K[1]?k:K[1])["$include_dice?"]())||B(_e["$include_dice?"]())||B(fe["$nil?"]()))&&this.$raise(n("ParseError")),T(n("Node"),"Command").$new($e,ce,fe,_e)}),C(r,"$_reduce_3",U(!1)),C(r,"$_reduce_4",U(!0)),C(r,"$_reduce_6",function(J,u,y){return T(n("Node"),"UndecidedTarget").$instance()}),C(r,"$_reduce_7",function(J,u,y){var K,G,$e,ce,fe;return $e=J["$[]"](0),G=this.$expand_negate("+",J["$[]"](2)),ce=null==(K=Z(G))[0]?k:K[0],fe=null==K[1]?k:K[1],T(n("Node"),"BinaryOp").$new($e,ce,fe)}),C(r,"$_reduce_8",function(J,u,y){var K,G,$e,ce,fe;return $e=J["$[]"](0),G=this.$expand_negate("-",J["$[]"](2)),ce=null==(K=Z(G))[0]?k:K[0],fe=null==K[1]?k:K[1],T(n("Node"),"BinaryOp").$new($e,ce,fe)}),C(r,"$_reduce_10",function(J,u,y){var K,G;return K=J["$[]"](0),G=J["$[]"](2),T(n("Node"),"BinaryOp").$new(K,"*",G)}),C(r,"$_reduce_11",function(J,u,y){var K,G;return K=J["$[]"](0),G=J["$[]"](2),J["$[]"](3).$new(K,G)}),C(r,"$_reduce_13",function(J,u,y){return T(n("Node"),"DivideWithGameSystemDefault")}),C(r,"$_reduce_14",function(J,u,y){return T(n("Node"),"DivideWithRoundingDown")}),C(r,"$_reduce_15",function(J,u,y){return T(n("Node"),"DivideWithRoundingUp")}),C(r,"$_reduce_16",function(J,u,y){return T(n("Node"),"DivideWithRoundingUp")}),C(r,"$_reduce_17",function(J,u,y){return T(n("Node"),"DivideWithRoundingOff")}),C(r,"$_reduce_18",function(J,u,y){return J["$[]"](1)}),C(r,"$_reduce_19",function(J,u,y){var K=k;return K=J["$[]"](1),B(K["$is_a?"](T(n("Node"),"Negate")))?K.$body():T(n("Node"),"Negate").$new(K)}),C(r,"$_reduce_21",function(J,u,y){var G=k,se=k;return G=J["$[]"](0),se=J["$[]"](2),(B(G["$include_dice?"]())||B(se["$include_dice?"]()))&&this.$raise(n("ParseError")),T(n("Node"),"DiceRoll").$new(G,se)}),C(r,"$_reduce_22",function(J,u,y){var G=k;return G=J["$[]"](0),B(G["$include_dice?"]())&&this.$raise(n("ParseError")),T(n("Node"),"ImplicitSidesDiceRoll").$new(G)}),C(r,"$_reduce_23",function(J,u,y){var $e,G=k,se=k,ce=k;return G=J["$[]"](0),se=J["$[]"](2),$e=J["$[]"](3)["$[]"]("filter"),ce=J["$[]"](3)["$[]"]("n_filtering"),L(se,"implicit")&&B(se["$include_dice?"]())&&this.$raise(n("ParseError")),(B(G["$include_dice?"]())||B(ce["$include_dice?"]()))&&this.$raise(n("ParseError")),T(n("Node"),"DiceRollWithFilter").$new(G,se,ce,$e)}),C(r,"$_reduce_24",function(J,u,y){var G,se=k;return G=T(n("Node"),"Number").$new(1),se=J["$[]"](1),B(se["$include_dice?"]())&&this.$raise(n("ParseError")),B(se["$instance_of?"](T(n("Node"),"Number")))&&R(se.$literal(),66)&&this.$raise(n("ParseError")),T(n("Node"),"DiceRoll").$new(G,se)}),C(r,"$_reduce_25",function(J,u,y){var G,$e,K=this,se=k,ce=k;return G=T(n("Node"),"Number").$new(1),se=J["$[]"](1),$e=J["$[]"](2)["$[]"]("filter"),ce=J["$[]"](2)["$[]"]("n_filtering"),L(se,"implicit")&&B(se["$include_dice?"]())&&K.$raise(n("ParseError")),B(ce["$include_dice?"]())&&K.$raise(n("ParseError")),B(se["$instance_of?"](T(n("Node"),"Number")))&&R(se.$literal(),66)&&K.$raise(n("ParseError")),T(n("Node"),"DiceRollWithFilter").$new(G,se,ce,$e)}),C(r,"$_reduce_27",U("implicit")),C(r,"$_reduce_28",function(J,u,y){return J["$[]"](0)}),C(r,"$_reduce_29",function(J,u,y){return w(["filter","n_filtering"],{filter:J["$[]"](0),n_filtering:J["$[]"](1)})}),C(r,"$_reduce_30",function(J,u,y){return w(["filter","n_filtering"],{filter:J["$[]"](0),n_filtering:T(n("Node"),"Number").$new(1)})}),C(r,"$_reduce_31",function(J,u,y){return T(T(n("Node"),"DiceRollWithFilter"),"KEEP_HIGHEST")}),C(r,"$_reduce_32",function(J,u,y){return T(T(n("Node"),"DiceRollWithFilter"),"KEEP_LOWEST")}),C(r,"$_reduce_33",function(J,u,y){return T(T(n("Node"),"DiceRollWithFilter"),"KEEP_HIGHEST")}),C(r,"$_reduce_34",function(J,u,y){return T(T(n("Node"),"DiceRollWithFilter"),"KEEP_LOWEST")}),C(r,"$_reduce_35",function(J,u,y){return T(T(n("Node"),"DiceRollWithFilter"),"DROP_HIGHEST")}),C(r,"$_reduce_36",function(J,u,y){return T(T(n("Node"),"DiceRollWithFilter"),"DROP_LOWEST")}),C(r,"$_reduce_39",function(J,u,y){return T(n("Node"),"Parenthesis").$new(J["$[]"](1))}),C(r,"$_reduce_40",function(J,u,y){return T(n("Node"),"Number").$new(J["$[]"](0))}),C(r,"$_reduce_none",function(J,u,y){return J["$[]"](0)})},Opal.modules["bcdice/common_command/add_dice/randomizer"]=function($){var U,F,b,p,f,z,v,N,q,T,w,P=$.module,Q=$.klass,E=$.const_set,C=$.def,B=$.eqeq,R=$.send,Y=$.truthy,H=[],Z=$.nil;return U=H,F=w=[P(H[0],"BCDice")].concat(U),b=T=[P(w[0],"CommonCommand")].concat(F),p=q=[P(T[0],"AddDice")].concat(b),z=[f=Q(q[0],null,"Randomizer")].concat(p),v=$.$r(z),(N=f.$$prototype).game_system=N.rand_source=N.rand_results=Z,f.$attr_reader("rand_results"),E(z[0],"RandResult",v("Struct").$new("sides","value")),C(f,"$initialize",function(M,m){var d=this;return d.rand_source=M,d.game_system=m,d.rand_results=[]}),C(f,"$roll",function(M,m){var r,d=this,a=Z;return a=B(m,66)?R(v("Array"),"new",[M],function e(){var s=null==e.$$s?this:e.$$s;return null==s.rand_source&&(s.rand_source=Z),null==s.game_system&&(s.game_system=Z),s.rand_source.$roll_d66(s.game_system.$d66_sort_type())},{$$s:d}):B(m,9)&&Y(d.game_system["$enabled_d9?"]())?R(v("Array"),"new",[M],function e(){var s=null==e.$$s?this:e.$$s;return null==s.rand_source&&(s.rand_source=Z),s.rand_source.$roll_d9()},{$$s:d}):d.rand_source.$roll_barabara(M,m),Y(d.game_system["$sort_add_dice?"]())&&a["$sort!"](),r=R(a,"map",[],function(s){return null==s&&(s=Z),v("RandResult").$new(m,s)}),d.rand_results.$concat(r),a})},Opal.modules["bcdice/common_command/add_dice"]=function($){var Z,w,T,g,S,_,I,b,F,U,P=$.module,Q=$.const_set,E=$.thrower,C=$.def,B=$.top,R=[],Y=$.nil;return B.$require("bcdice/normalize"),B.$require("bcdice/common_command/add_dice/parser"),B.$require("bcdice/common_command/add_dice/randomizer"),Z=R,w=U=[P(R[0],"BCDice")].concat(Z),T=F=[P(U[0],"CommonCommand")].concat(w),Q((b=[I=P(F[0],"AddDice")].concat(T))[0],"PREFIX_PATTERN",/[+\-(]*(\d+|D\d+)/.$freeze()),S=[g=$.get_singleton_class(I)].concat(b),_=$.$r(S),C(g,"$eval",function(f,z,v){try{var h;return E("eval_return"),(h=_("Parser").$parse(f))===Y||null==h?Y:h.$eval(z,v)}catch(m){if(m===$.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/reroll_dice/node"]=function($){var I,S,z,M,e,s,t,n,i,d,N,p,g,P=$.module,Q=$.klass,E=$.ensure_kwargs,C=$.get_kwarg,B=$.def,R=$.truthy,Y=$.send,H=$.thrower,Z=$.rb_lt,W=$.rb_plus,U=$.rb_gt,L=$.eqeq,w=$.rb_le,A=$.rb_ge,F=[],k=$.nil;return I=F,S=g=[P(F[0],"BCDice")].concat(I),z=p=[P(g[0],"CommonCommand")].concat(S),M=N=[P(p[0],"RerollDice")].concat(z),e=d=[P(N[0],"Node")].concat(M),t=[s=Q(d[0],null,"Command")].concat(e),n=$.$r(t),(i=s.$$prototype).cmp_op=i.reroll_cmp_op=i.target_number_node=i.reroll_threshold_node=i.notations=i.source=k,B(s,"$initialize",function(o){var x,j,O,te,ne,ae,le,oe=this;return o=E(o),x=C(o,"secret"),j=C(o,"notations"),O=C(o,"source"),null==(te=o.$$smap.cmp_op)&&(te=k),null==(ne=o.$$smap.target_number)&&(ne=k),null==(ae=o.$$smap.reroll_cmp_op)&&(ae=k),null==(le=o.$$smap.reroll_threshold)&&(le=k),oe.secret=x,oe.notations=j,oe.cmp_op=te,oe.target_number_node=ne,oe.reroll_cmp_op=ae,oe.reroll_threshold_node=le,oe.source=O}),B(s,"$eval",function(o,x){try{H("eval_return");var O,te,ae,le,ue,X,D,J,ne=this,oe=k,ie=k,V=k,u=k,y=k,K=k,G=k,se=k;return ae=o.$round_type(),le=R(oe=ne.cmp_op)?oe:o.$default_cmp_op(),ue=R(oe=R(ie=ne.reroll_cmp_op)?ie:le)?oe:">=",X=R(oe=(O=ne.target_number_node)===k||null==O?k:O.$eval(ae))?oe:o.$default_target_number(),D=R(oe=R(ie=(te=ne.reroll_threshold_node)===k||null==te?k:te.$eval(ae))?ie:o.$reroll_dice_reroll_threshold())?oe:X,V=n("RerollCondition").$new(ue,D),J=Y(ne.notations,"map",[],function(ce){return null==ce&&(ce=k),ce.$to_dice(ae)}),R(Y(J,"all?",[],function(ce){return null==ce&&(ce=k),V["$valid?"](ce.$sides())}))?(y=(u=ne.$roll(J,x,V,o["$sort_barabara_dice?"]())).$flatten(),K=u.$take(ne.notations.$size()).$flatten().$count(1),G=R(le)?Y(y,"count",[],function(ce){return null==ce&&(ce=k),ce.$send(le,X)}):0,se=[ne.$expr(ae,V,le,X),Y(u,"map",[],function(ce){return null==ce&&(ce=k),ce.$join(",")}).$join(" + "),"\u6210\u529f\u6570"+G,o.$grich_text(K,y.$size(),G)].$compact(),ne.$result_with_text(se.$join(" \uff1e "))):ne.$result_with_text(ne.source+" \uff1e \u6761\u4ef6\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059\u30022R6>=5 \u3042\u308b\u3044\u306f 2R6[5] \u306e\u3088\u3046\u306b\u632f\u308a\u8db3\u3057\u76ee\u6a19\u5024\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002")}catch($e){if($e===$.t_eval_return)return $e.$v;throw $e}}),s.$private(),B(s,"$roll",function(o,x,j,O){var te=k,ne=k,ae=k,le=k,oe=k,ue=k;for(te=[],ne=0;R(R(ae=o["$empty?"]()["$!"]())?Z(ne,n("REROLL_LIMIT")):ae);)le=o.$shift(),ne=W(ne,1),oe=le.$roll(x),R(O)&&oe["$sort!"](),te.$push(oe),ue=Y(oe,"count",[],function(X){return null==X&&(X=k),j["$reroll?"](X)}),R(U(ue,0))&&o.$push(n("Dice").$new(ue,le.$sides()));return te}),B(s,"$expr",function(o,x,j,O){var ne,ae,le;return ne=Y(this.notations,"map",[],function(ue){return null==ue&&(ue=k),ue.$to_dice(o)}).$join("+"),ae=L(x.$cmp_op(),j)?"":n("Format").$comparison_operator(x.$cmp_op()),le=n("Format").$comparison_operator(j),"("+ne+"["+ae+x.$threshold()+"]"+le+O+")"}),B(s,"$result_with_text",function(o){return Y(n("Result").$new(),"tap",[],function j(O){var te,ne=null==j.$$s?this:j.$$s;return null==ne.secret&&(ne.secret=k),null==O&&(O=k),O["$secret="](ne.secret),Y(O,"text=",te=[o]),te[te.length-1]},{$$s:this})}),function(a,r){var e=Q(a,null,"RerollCondition"),s=e.$$prototype;s.threshold=s.cmp_op=k,e.$attr_reader("cmp_op"),e.$attr_reader("threshold"),B(e,"$initialize",function(n,i){return this.cmp_op=n,this.threshold=i}),B(e,"$valid?",function(n){var i=this;if(!R(i.threshold))return!1;switch(i.cmp_op.valueOf()){case"<=":return Z(i.threshold,n);case"<":return w(i.threshold,n);case">=":return U(i.threshold,1);case">":return A(i.threshold,1);case"!=":return $.Range.$new(1,n,!1)["$include?"](i.threshold);default:return!0}}),B(e,"$reroll?",function(n){return n.$send(this.cmp_op,this.threshold)})}(d[0]),function(a,r,e){var s=Q(a,null,"Notation"),t=[s].concat(e),n=$.$r(t),i=s.$$prototype;i.times=i.sides=k,B(s,"$initialize",function(o,x){return this.times=o,this.sides=x}),B(s,"$to_dice",function(o){try{var O,te;return H("eval_return"),O=this.times.$eval(o),te=this.sides.$eval(o),n("Dice").$new(O,te)}catch(ne){if(ne===$.t_eval_return)return ne.$v;throw ne}})}(d[0],0,d),function(a,r){var e=Q(a,null,"Dice");return e.$attr_reader("times","sides"),B(e,"$initialize",function(t,n){return this.times=t,this.sides=n}),B(e,"$roll",function(t){return t.$roll_barabara(this.$times(),this.$sides())}),B(e,"$to_s",function(){return this.$times()+"R"+this.$sides()})}(d[0])},Opal.modules["bcdice/arithmetic/node"]=function($){var b,_,v,a,r,h,M,f,q,P=$.module,Q=$.klass,E=$.def,C=$.thrower,B=$.return_ivar,R=$.send2,Y=$.find_super,H=$.eqeq,Z=$.const_set,W=$.eqeqeq,U=$.rb_divide,L=$.truthy,w=$.assign_ivar,A=$.alias,F=[],k=$.nil,T=$.$$$;return b=F,_=q=[P(F[0],"BCDice")].concat(b),v=f=[P(q[0],"Arithmetic")].concat(_),h=[P(f[0],"Node")].concat(v),M=$.$r(h),(r=(a=Q(h[0],null,"BinaryOp")).$$prototype).lhs=r.rhs=r.op=k,E(a,"$initialize",function(s,t,n){var i=this;return i.lhs=s,i.op=t,i.rhs=n}),E(a,"$eval",function(s){try{C("eval_return");var c,n=this,i=k;return i=n.lhs.$eval(s),c=n.rhs.$eval(s),i.$send(n.op,c)}catch(o){if(o===$.t_eval_return)return o.$v;throw o}}),E(a,"$output",function(){var s=this;return""+s.lhs.$output()+s.op+s.rhs.$output()}),E(a,"$s_exp",function(){var s=this;return"("+s.$op_for_s_exp()+" "+s.lhs.$s_exp()+" "+s.rhs.$s_exp()+")"}),E(a,"$op_for_s_exp",B("op")),function(m,d,a){var r=Q(m,d,"DivideBase"),e=[r].concat(a),s=$.$r(e),t=r.$$prototype;t.lhs=t.rhs=t.op=k,E(r,"$initialize",function n(i,c){return n.$$p=null,R(this,Y(this,"initialize",n,!1,!0),"initialize",[i,"/",c],null)}),E(r,"$eval",function(i){try{C("eval_return");var x,j,o=this;return x=o.lhs.$eval(i),j=o.rhs.$eval(i),H(j,0)&&o.$raise(s("ZeroDivisionError")),o.$divide_and_round(x,j,i)}catch(O){if(O===$.t_eval_return)return O.$v;throw O}}),E(r,"$output",function n(){var i=n.$$p||k,c=this;return n.$$p=null,""+R(c,Y(c,"output",n,!1,!0),"output",[],i)+c.$rounding_method()}),r.$private(),E(r,"$rounding_method",function(){return T(this.$class(),"ROUNDING_METHOD")}),E(r,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),E(r,"$divide_and_round",function(i,c,o){return this.$raise(s("NotImplementedError"))})}(h[0],M("BinaryOp"),h),function(m,d,a){var r=Q(m,d,"DivideWithGameSystemDefault"),e=[r].concat(a),s=$.$r(e);Z(e[0],"ROUNDING_METHOD",""),r.$private(),E(r,"$divide_and_round",function(n,i,c){var o,x=k;return W(T(s("RoundType"),"CEIL"),o=c)?U(n.$to_f(),i).$ceil():W(T(s("RoundType"),"ROUND"),o)?(x=U(n.$to_f(),i),L(x["$negative?"]())?x.$abs().$round()["$-@"]():x.$round()):U(n,i).$floor()})}(h[0],M("DivideBase"),h),function(m,d,a){var r=Q(m,d,"DivideWithCeil"),e=[r].concat(a);Z(e[0],"ROUNDING_METHOD","C"),r.$private(),E(r,"$divide_and_round",function(t,n,i){return U(t.$to_f(),n).$ceil()})}(h[0],M("DivideBase"),h),function(m,d,a){var r=Q(m,d,"DivideWithRound"),e=[r].concat(a);Z(e[0],"ROUNDING_METHOD","R"),r.$private(),E(r,"$divide_and_round",function(t,n,i){var c=k;return c=U(t.$to_f(),n),L(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()})}(h[0],M("DivideBase"),h),function(m,d,a){var r=Q(m,d,"DivideWithFloor"),e=[r].concat(a);Z(e[0],"ROUNDING_METHOD","F"),r.$private(),E(r,"$divide_and_round",function(t,n,i){return U(t,n).$floor()})}(h[0],M("DivideBase"),h),function(m,d){var a=Q(m,null,"Negative");a.$$prototype.body=k,E(a,"$initialize",w("body")),E(a,"$eval",function(s){try{return C("eval_return"),this.body.$eval(s)["$-@"]()}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),E(a,"$output",function(){return"-"+this.body.$output()}),E(a,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(h[0]),function(m,d){var a=Q(m,null,"Parenthesis");a.$$prototype.expr=k,E(a,"$initialize",w("expr")),E(a,"$eval",function(s){try{return C("eval_return"),this.expr.$eval(s)}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),E(a,"$output",function(){return"("+this.expr.$output()+")"}),E(a,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(h[0]),function(m,d){var a=Q(m,null,"Number");return a.$$prototype.value=k,E(a,"$initialize",w("value")),E(a,"$eval",B("value")),E(a,"$output",function(){return this.value.$to_s()}),A(a,"s_exp","output")}(h[0])},Opal.modules["bcdice/common_command/barabara_dice/parser"]=function($){var k,g,p,M,s,t,n,i,c,o,x,j,O,ae,m,r,e,z,v,S,I,P=$.module,Q=$.klass,E=$.defs,C=$.def,B=$.hash,R=$.const_set,Y=$.truthy,H=$.hash2,Z=$.return_val,W=$.to_ary,U=$.top,L=[],w=$.nil,A=$.$$$;return U.$require("racc/parser.rb"),U.$require("bcdice/common_command/lexer"),U.$require("bcdice/common_command/reroll_dice/node"),U.$require("bcdice/arithmetic/node"),k=L,g=I=[P(L[0],"BCDice")].concat(k),p=S=[P(I[0],"CommonCommand")].concat(g),z=[P(S[0],"BarabaraDice")].concat(p),v=$.$r(z),M=z,r=[m=Q(z[0],A(v("Racc"),"Parser"),"Parser")].concat(M),e=$.$r(r),m.$$prototype.lexer=w,E(m,"$parse",function(X){return this.$new().$parse(X)}),C(m,"$parse",function(X){try{return this.lexer=e("Lexer").$new(X),this.$do_parse()}catch(V){if(!$.rescue(V,[e("ParseError")]))throw V;try{return w}finally{$.pop_exception()}}}),m.$private(),C(m,"$next_token",function(){return this.lexer.$next_token()}),s=$.large_array_unpack("13,9,3,9,24,25,9,9,9,26,18,19,8,12,8,18,19,8,8,8,9,4,9,38,36,37,39,18,19,18,19,8,9,8,9,27,28,24,25,18,19,18,19,8,9,8,9,27,28,27,28,18,19,18,19,8,10,8,14"),t=$.large_array_unpack("5,2,0,8,15,15,13,14,12,15,8,8,2,5,8,12,12,13,14,12,18,1,19,34,34,34,34,18,18,19,19,18,24,19,25,16,16,21,21,24,24,25,25,24,27,25,28,31,31,32,32,27,27,28,28,27,4,28,7"),n=$.large_array_unpack("-6,21,-1,,56,-9,,55,1,,,,6,4,5,-5,24,,18,20,,28,,,30,32,,42,44,,,36,38,,19,,,,,"),i=$.large_array_unpack("-2,-25,-25,-3,-25,-4,-7,-25,-25,-24,40,-1,-25,-25,-25,-25,-11,-14,-25,-25,-22,-5,-6,-8,-25,-25,-23,-25,-25,-20,-21,-9,-10,-12,-15,-13,-16,-17,-18,-19"),c=[7,1,6,15,2,29,30,21,31,32,5,7,23,22,33,34,11,35],o=[7,1,6,5,2,9,9,5,8,8,3,7,7,6,9,9,4,10],x=[w,1,4,8,11,-5,0,-2,-16,-13,-17],j=[w,w,w,w,w,w,w,20,16,17,w],O=$.large_array_unpack("0,0,racc_error,3,24,_reduce_1,0,25,_reduce_2,1,25,_reduce_3,0,27,_reduce_4,2,27,_reduce_5,3,26,_reduce_6,1,26,_reduce_7,3,29,_reduce_8,3,28,_reduce_9,3,28,_reduce_10,1,28,_reduce_none,3,31,_reduce_12,4,31,_reduce_13,1,31,_reduce_none,0,33,_reduce_15,1,33,_reduce_16,1,33,_reduce_17,1,33,_reduce_18,1,33,_reduce_19,2,32,_reduce_20,2,32,_reduce_21,1,32,_reduce_none,3,30,_reduce_23,1,30,_reduce_24"),ae=B(!1,0,"error",1,"NUMBER",2,"B",3,"R",4,"U",5,"C",6,"F",7,"S",8,"PLUS",9,"MINUS",10,"ASTERISK",11,"SLASH",12,"PARENL",13,"PARENR",14,"BRACKETL",15,"BRACKETR",16,"LESS",17,"GREATER",18,"EQUAL",19,"NOT",20,"AT",21,"CMP_OP",22),R(r[0],"Racc_arg",[s,t,i,n,c,o,j,x,23,O,ae,40,25,!0]),Y(e("Ractor","skip_raise")?"constant":w)&&e("Ractor").$make_shareable(e("Racc_arg")),R(r[0],"Racc_token_to_s_table",$.large_array_unpack("$end,error,NUMBER,B,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,target,add,dice,term,mul,unary,round_type")),Y(e("Ractor","skip_raise")?"constant":w)&&e("Ractor").$make_shareable(e("Racc_token_to_s_table")),R(r[0],"Racc_debug_parser",!1),C(m,"$_reduce_1",function(X,D,V){return A(e("Node"),"Command").$new(H(["secret","notations","cmp_op","target_number"],{secret:X["$[]"](0),notations:X["$[]"](1),cmp_op:X["$[]"](2)["$[]"]("cmp_op"),target_number:X["$[]"](2)["$[]"]("target")}))}),C(m,"$_reduce_2",Z(!1)),C(m,"$_reduce_3",Z(!0)),C(m,"$_reduce_4",function(X,D,V){return H([],{})}),C(m,"$_reduce_5",function(X,D,V){var J,K,G;return G=null==(J=W(X))[1]?w:J[1],Y(K=null==J[0]?w:J[0])||this.$raise(e("ParseError")),H(["cmp_op","target"],{cmp_op:K,target:G})}),C(m,"$_reduce_6",function(X,D,V){var J=w;return(J=X["$[]"](0)).$push(X["$[]"](2)),J}),C(m,"$_reduce_7",function(X,D,V){return[X["$[]"](0)]}),C(m,"$_reduce_8",function(X,D,V){var J,u;return J=X["$[]"](0),u=X["$[]"](2),A(e("Node"),"Notation").$new(J,u)}),C(m,"$_reduce_9",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"+",X["$[]"](2))}),C(m,"$_reduce_10",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"-",X["$[]"](2))}),C(m,"$_reduce_12",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"*",X["$[]"](2))}),C(m,"$_reduce_13",function(X,D,V){return X["$[]"](3).$new(X["$[]"](0),X["$[]"](2))}),C(m,"$_reduce_15",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),C(m,"$_reduce_16",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),C(m,"$_reduce_17",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),C(m,"$_reduce_18",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithRound")}),C(m,"$_reduce_19",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithFloor")}),C(m,"$_reduce_20",function(X,D,V){return X["$[]"](1)}),C(m,"$_reduce_21",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Negative").$new(X["$[]"](1))}),C(m,"$_reduce_23",function(X,D,V){return X["$[]"](1)}),C(m,"$_reduce_24",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Number").$new(X["$[]"](0))}),C(m,"$_reduce_none",function(X,D,V){return X["$[]"](0)})},Opal.modules["bcdice/common_command/barabara_dice"]=function($){var Z,w,T,g,S,_,I,b,F,U,P=$.module,Q=$.const_set,E=$.thrower,C=$.def,R=[],Y=$.nil;return $.top.$require("bcdice/common_command/barabara_dice/parser"),Z=R,w=U=[P(R[0],"BCDice")].concat(Z),T=F=[P(U[0],"CommonCommand")].concat(w),Q((b=[I=P(F[0],"BarabaraDice")].concat(T))[0],"PREFIX_PATTERN",/\d+B\d+/.$freeze()),S=[g=$.get_singleton_class(I)].concat(b),_=$.$r(S),C(g,"$eval",function(f,z,v){try{var h;return E("eval_return"),(h=_("Parser").$parse(f))===Y||null==h?Y:h.$eval(z,v)}catch(m){if(m===$.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/result"]=function($){var F,I,k,W,L,Q=$.klass,E=$.send,C=$.def,B=$.return_val,R=$.return_ivar,Y=[],H=$.nil;return W=Y,F=L=[(0,$.module)(Y[0],"BCDice")].concat(W),[k=Q(L[0],null,"Result")].concat(F),C(I=$.get_singleton_class(k),"$success",function(q){return E(this.$new(),"tap",[],function(p){var f;return null==p&&(p=H),p["$text="](q),E(p,"success=",f=[!0]),f[f.length-1]})}),C(I,"$failure",function(q){return E(this.$new(),"tap",[],function(p){var f;return null==p&&(p=H),p["$text="](q),E(p,"failure=",f=[!0]),f[f.length-1]})}),C(I,"$critical",function(q){return E(this.$new(),"tap",[],function(p){var f;return null==p&&(p=H),p["$text="](q),p["$critical="](!0),E(p,"success=",f=[!0]),f[f.length-1]})}),C(I,"$fumble",function(q){return E(this.$new(),"tap",[],function(p){var f;return null==p&&(p=H),p["$text="](q),p["$fumble="](!0),E(p,"failure=",f=[!0]),f[f.length-1]})}),C(I,"$nothing",B("nothing")),C(k,"$initialize",function(b){var g=this;return null==b&&(b=H),g.text=b,g.rands=H,g.detailed_rands=H,g.secret=!1,g.success=!1,g.failure=!1,g.critical=!1,g.fumble=!1},-1),k.$attr_accessor("text","rands","detailed_rands"),k.$attr_writer("secret","success","failure","critical","fumble"),C(k,"$secret?",R("secret")),C(k,"$success?",R("success")),C(k,"$failure?",R("failure")),C(k,"$critical?",R("critical")),C(k,"$fumble?",R("fumble")),C(k,"$condition=",function(b){return this.success=b,this.failure=b["$!"]()})},Opal.modules["bcdice/common_command/tally_dice/node"]=function($){var b,_,v,m,s,t,n,i,a,h,f,q,P=$.module,Q=$.klass,E=$.const_set,C=$.ensure_kwargs,B=$.get_kwarg,R=$.def,Y=$.truthy,H=$.rb_gt,Z=$.send,W=$.not,U=$.eqeq,L=$.hash2,w=$.thrower,A=$.alias,k=[],T=$.nil;return $.top.$require("bcdice/result"),b=k,_=q=[P(k[0],"BCDice")].concat(b),v=f=[P(q[0],"CommonCommand")].concat(_),m=h=[P(f[0],"TallyDice")].concat(v),s=a=[P(h[0],"Node")].concat(m),n=[t=Q(a[0],null,"Command")].concat(s),i=$.$r(n),t.$$prototype.notation=T,E(n[0],"MAX_SIDES",20),R(t,"$initialize",function(x){var j,O;return x=C(x),j=B(x,"secret"),O=B(x,"notation"),this.secret=j,this.notation=O}),R(t,"$eval",function(x,j){var te=T,ne=T,ae=T,le=T,oe=T,ue=T;return te=this.notation.$to_dice(x.$round_type()),Y(te["$valid?"]())?Y(H(te.$sides(),i("MAX_SIDES")))?i("Result").$new("("+te+") \uff1e \u9762\u6570\u306f1\u4ee5\u4e0a\u3001"+i("MAX_SIDES")+"\u4ee5\u4e0b\u3068\u3057\u3066\u304f\u3060\u3055\u3044"):(ne=te.$roll(j),ae=(Y(x["$sort_barabara_dice?"]())?ne.$sort():ne).$join(","),le=Z(Z(ne,"group_by",[],"itself".$to_proc()),"transform_values",[],"length".$to_proc()),oe=Z($.Range.$new(1,te.$sides(),!1),"map",[],function(X){var D;return null==X&&(X=T),D=le.$fetch(X,0),U(D,0)&&W(te["$show_zeros?"]())?T:"["+X+"]\xd7"+le.$fetch(X,0)}),ue=["("+te+")",ae,oe.$compact().$join(", ")].$compact(),Z(i("Result").$new(),"tap",[],function ie(X){var D,V=null==ie.$$s?this:ie.$$s;return null==V.secret&&(V.secret=T),null==X&&(X=T),X["$secret="](V.secret),D=[ue.$join(" \uff1e ")],Z(X,"text=",D),D[D.length-1]},{$$s:this})):T}),function(r,e,s){var t=Q(r,null,"Notation"),n=[t].concat(s),i=$.$r(n),c=t.$$prototype;c.times=c.sides=c.show_zeros=T,t.$attr_reader("times"),t.$attr_reader("sides"),t.$attr_reader("show_zeros"),R(t,"$initialize",function(x){var j,O,te;return x=C(x),j=B(x,"times"),O=B(x,"sides"),te=B(x,"show_zeros"),this.times=j,this.sides=O,this.show_zeros=te}),R(t,"$to_dice",function(x){try{w("eval_return");var te,ne,O=this;return te=O.times.$eval(x),ne=O.sides.$eval(x),i("Dice").$new(L(["times","sides","show_zeros"],{times:te,sides:ne,show_zeros:O.show_zeros}))}catch(ae){if(ae===$.t_eval_return)return ae.$v;throw ae}})}(a[0],0,a),function(r,e){var s=Q(r,null,"Dice"),t=s.$$prototype;return t.times=t.sides=t.show_zeros=T,s.$attr_reader("times"),s.$attr_reader("sides"),s.$attr_reader("show_zeros"),A(s,"show_zeros?","show_zeros"),R(s,"$initialize",function(i){var c,o,x,j=this;return i=C(i),c=B(i,"times"),o=B(i,"sides"),x=B(i,"show_zeros"),j.times=c,j.sides=o,j.show_zeros=x}),R(s,"$valid?",function(){var c;return Y(c=H(this.times,0))?H(this.sides,0):c}),R(s,"$roll",function(i){return i.$roll_barabara(this.times,this.sides)}),R(s,"$to_s",function(){var c,i=this;return c=Y(i.show_zeros)?"Z":"Y",i.times+"T"+c+i.sides})}(a[0])},Opal.modules["bcdice/common_command/tally_dice/parser"]=function($){var F,b,_,h,e,s,t,n,i,c,o,x,j,ne,M,a,r,f,z,q,T,P=$.module,Q=$.klass,E=$.defs,C=$.def,B=$.hash,R=$.const_set,Y=$.truthy,H=$.hash2,Z=$.return_val,W=$.top,U=[],L=$.nil,w=$.$$$;return W.$require("racc/parser.rb"),W.$require("bcdice/common_command/lexer"),W.$require("bcdice/common_command/tally_dice/node"),W.$require("bcdice/arithmetic/node"),F=U,b=T=[P(U[0],"BCDice")].concat(F),_=q=[P(T[0],"CommonCommand")].concat(b),f=[P(q[0],"TallyDice")].concat(_),z=$.$r(f),h=f,a=[M=Q(f[0],w(z("Racc"),"Parser"),"Parser")].concat(h),r=$.$r(a),M.$$prototype.lexer=L,E(M,"$parse",function(ie){return this.$new().$parse(ie)}),C(M,"$parse",function(ie){try{return this.lexer=r("Lexer").$new(ie),this.$do_parse()}catch(D){if(!$.rescue(D,[r("ParseError")]))throw D;try{return L}finally{$.pop_exception()}}}),M.$private(),C(M,"$next_token",function(){return this.lexer.$next_token()}),e=$.large_array_unpack("8,8,18,19,20,21,8,8,8,22,14,15,3,7,7,14,15,14,15,7,7,7,8,4,8,35,33,34,36,8,9,14,15,14,15,7,8,7,14,15,23,24,7,23,24,14,15,23,24,7,10"),s=$.large_array_unpack("2,7,10,10,11,11,14,17,15,11,7,7,0,2,7,14,14,15,15,14,17,15,20,1,21,31,31,31,31,23,4,20,20,21,21,20,24,21,23,23,12,12,23,28,28,24,24,29,29,24,6"),t=$.large_array_unpack("2,23,-2,,30,,47,-1,,,-2,-7,27,,4,6,,5,,,20,22,,27,34,,,,30,34,,19,,,,,"),n=$.large_array_unpack("-2,-23,-23,-3,-23,-1,-23,-23,-22,37,-23,-23,-9,-12,-23,-23,-20,-23,-5,-6,-23,-23,-21,-23,-23,-18,-19,-4,-7,-8,-10,-13,-11,-14,-15,-16,-17"),i=[6,25,26,12,1,2,5,17,11,32,30,31,L,L,L,27,28,29],c=[4,8,8,7,1,2,3,5,6,9,8,8,L,L,L,4,7,7],o=[L,4,5,4,-2,-3,1,-4,-13,-22],x=[L,L,L,L,16,L,L,L,13,L],j=$.large_array_unpack("0,0,racc_error,2,18,_reduce_1,0,19,_reduce_2,1,19,_reduce_3,4,20,_reduce_4,1,22,_reduce_5,1,22,_reduce_6,3,23,_reduce_7,3,23,_reduce_8,1,23,_reduce_none,3,24,_reduce_10,4,24,_reduce_11,1,24,_reduce_none,0,26,_reduce_13,1,26,_reduce_14,1,26,_reduce_15,1,26,_reduce_16,1,26,_reduce_17,2,25,_reduce_18,2,25,_reduce_19,1,25,_reduce_none,3,21,_reduce_21,1,21,_reduce_22"),ne=B(!1,0,"error",1,"NUMBER",2,"T",3,"Y",4,"Z",5,"R",6,"U",7,"C",8,"F",9,"S",10,"PLUS",11,"MINUS",12,"ASTERISK",13,"SLASH",14,"PARENL",15,"PARENR",16),R(a[0],"Racc_arg",[e,s,n,t,i,c,x,o,17,j,ne,37,23,!0]),Y(r("Ractor","skip_raise")?"constant":L)&&r("Ractor").$make_shareable(r("Racc_arg")),R(a[0],"Racc_token_to_s_table",["$end","error","NUMBER","T","Y","Z","R","U","C","F","S","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","expr","secret","notation","term","show_zeros","add","mul","unary","round_type"]),Y(r("Ractor","skip_raise")?"constant":L)&&r("Ractor").$make_shareable(r("Racc_token_to_s_table")),R(a[0],"Racc_debug_parser",!1),C(M,"$_reduce_1",function(ie,X,D){return w(r("Node"),"Command").$new(H(["secret","notation"],{secret:ie["$[]"](0),notation:ie["$[]"](1)}))}),C(M,"$_reduce_2",Z(!1)),C(M,"$_reduce_3",Z(!0)),C(M,"$_reduce_4",function(ie,X,D){return w(r("Node"),"Notation").$new(H(["times","sides","show_zeros"],{times:ie["$[]"](0),sides:ie["$[]"](3),show_zeros:ie["$[]"](2)}))}),C(M,"$_reduce_5",Z(!1)),C(M,"$_reduce_6",Z(!0)),C(M,"$_reduce_7",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"+",ie["$[]"](2))}),C(M,"$_reduce_8",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"-",ie["$[]"](2))}),C(M,"$_reduce_10",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"*",ie["$[]"](2))}),C(M,"$_reduce_11",function(ie,X,D){return ie["$[]"](3).$new(ie["$[]"](0),ie["$[]"](2))}),C(M,"$_reduce_13",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),C(M,"$_reduce_14",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithCeil")}),C(M,"$_reduce_15",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithCeil")}),C(M,"$_reduce_16",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithRound")}),C(M,"$_reduce_17",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithFloor")}),C(M,"$_reduce_18",function(ie,X,D){return ie["$[]"](1)}),C(M,"$_reduce_19",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"Negative").$new(ie["$[]"](1))}),C(M,"$_reduce_21",function(ie,X,D){return ie["$[]"](1)}),C(M,"$_reduce_22",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"Number").$new(ie["$[]"](0))}),C(M,"$_reduce_none",function(ie,X,D){return ie["$[]"](0)})},Opal.modules["bcdice/common_command/tally_dice"]=function($){var Z,w,T,g,S,_,I,b,F,U,P=$.module,Q=$.const_set,E=$.thrower,C=$.def,R=[],Y=$.nil;return $.top.$require("bcdice/common_command/tally_dice/parser"),Z=R,w=U=[P(R[0],"BCDice")].concat(Z),T=F=[P(U[0],"CommonCommand")].concat(w),Q((b=[I=P(F[0],"TallyDice")].concat(T))[0],"PREFIX_PATTERN",/\d+T[YZ]\d+/.$freeze()),S=[g=$.get_singleton_class(I)].concat(b),_=$.$r(S),C(g,"$eval",function(f,z,v){try{var h;return E("eval_return"),(h=_("Parser").$parse(f))===Y||null==h?Y:h.$eval(z,v)}catch(m){if(m===$.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/calc/node"]=function($){var A,I,S,z,m,d,a,r,N,p,g,k,P=$.module,Q=$.klass,E=$.ensure_kwargs,C=$.get_kwarg,B=$.def,R=$.truthy,Y=$.send,H=$.thrower,W=[],U=$.nil,L=$.$$$;return $.top.$require("bcdice/arithmetic/node"),A=W,I=k=[P(W[0],"BCDice")].concat(A),S=g=[P(k[0],"CommonCommand")].concat(I),z=p=[P(g[0],"Calc")].concat(S),m=N=[P(p[0],"Node")].concat(z),a=[d=Q(N[0],null,"Command")].concat(m),r=$.$r(a),d.$$prototype.expr=U,B(d,"$initialize",function(t){var n,i;return t=E(t),n=C(t,"secret"),i=C(t,"expr"),this.secret=n,this.expr=i}),B(d,"$eval",function(t){try{H("eval_return");var c,o,i=this;return c=function(){try{return i.expr.$eval(t).$to_i()}catch(x){if(!$.rescue(x,[r("ZeroDivisionError")]))throw x;try{return"\u30bc\u30ed\u9664\u7b97\u304c\u767a\u751f\u3057\u305f\u305f\u3081\u8a08\u7b97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"}finally{$.pop_exception()}}}(),o=R(i.expr["$is_a?"](L(L(r("Arithmetic"),"Node"),"Parenthesis")))?i.expr.$output():"("+i.expr.$output()+")",Y(r("Result").$new(),"tap",[],function x(j){var O,te=null==x.$$s?this:x.$$s;return null==te.secret&&(te.secret=U),null==j&&(j=U),j["$secret="](te.secret),Y(j,"text=",O=["c"+o+" \uff1e "+c]),O[O.length-1]},{$$s:i})}catch(x){if(x===$.t_eval_return)return x.$v;throw x}})},Opal.modules["bcdice/common_command/calc/parser"]=function($){var F,b,_,h,e,s,t,n,i,c,o,x,j,ne,M,a,r,f,z,q,T,P=$.module,Q=$.klass,E=$.defs,C=$.def,B=$.hash,R=$.const_set,Y=$.truthy,H=$.hash2,Z=$.return_val,W=$.top,U=[],L=$.nil,w=$.$$$;return W.$require("racc/parser.rb"),W.$require("bcdice/common_command/lexer"),W.$require("bcdice/common_command/calc/node"),W.$require("bcdice/arithmetic/node"),F=U,b=T=[P(U[0],"BCDice")].concat(F),_=q=[P(T[0],"CommonCommand")].concat(b),f=[P(q[0],"Calc")].concat(_),z=$.$r(f),h=f,a=[M=Q(f[0],w(z("Racc"),"Parser"),"Parser")].concat(h),r=$.$r(a),M.$$prototype.lexer=L,E(M,"$parse",function(ie){return this.$new().$parse(ie)}),C(M,"$parse",function(ie){try{return this.lexer=r("Lexer").$new(ie),this.$do_parse()}catch(D){if(!$.rescue(D,[r("ParseError")]))throw D;try{return L}finally{$.pop_exception()}}}),M.$private(),C(M,"$next_token",function(){return this.lexer.$next_token()}),e=$.large_array_unpack("14,3,14,15,16,4,10,11,10,11,13,14,13,14,17,18,5,10,11,10,11,13,14,13,14,17,18,6,10,11,10,11,13,14,13,14,17,18,,10,11,10,11,13,,13,15,16,,,,26,30,28,29,31"),s=$.large_array_unpack("5,0,10,7,7,1,5,5,10,10,5,11,10,13,8,8,2,11,11,13,13,11,15,13,16,22,22,4,15,15,16,16,15,17,16,18,23,23,,17,17,18,18,17,,18,21,21,,,,21,25,25,25,25"),t=[-6,5,11,L,27,-2,L,-5,4,L,0,9,L,11,L,20,22,31,33,L,L,38,15,26,L,49,L,L,L,L,L,L],n=[-2,-20,-20,-3,-20,-20,32,-1,-6,-9,-20,-20,-17,-20,-19,-20,-20,-20,-20,-15,-16,-20,-4,-5,-7,-10,-18,-8,-11,-12,-13,-14],i=[7,1,19,20,22,23,2,27,21,24,25],c=[3,1,5,5,4,4,2,6,3,5,5],o=[L,1,6,-5,-11,-8,-18,L],x=[L,L,L,L,8,9,L,12],j=$.large_array_unpack("0,0,racc_error,3,15,_reduce_1,0,16,_reduce_2,1,16,_reduce_3,3,17,_reduce_4,3,17,_reduce_5,1,17,_reduce_none,3,18,_reduce_7,4,18,_reduce_8,1,18,_reduce_none,0,20,_reduce_10,1,20,_reduce_11,1,20,_reduce_12,1,20,_reduce_13,1,20,_reduce_14,2,19,_reduce_15,2,19,_reduce_16,1,19,_reduce_none,3,21,_reduce_18,1,21,_reduce_19"),ne=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13),R(a[0],"Racc_arg",[e,s,n,t,i,c,x,o,14,j,ne,32,20,!0]),Y(r("Ractor","skip_raise")?"constant":L)&&r("Ractor").$make_shareable(r("Racc_arg")),R(a[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","S","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","expr","secret","add","mul","unary","round_type","term"]),Y(r("Ractor","skip_raise")?"constant":L)&&r("Ractor").$make_shareable(r("Racc_token_to_s_table")),R(a[0],"Racc_debug_parser",!1),C(M,"$_reduce_1",function(ie,X,D){return w(r("Node"),"Command").$new(H(["secret","expr"],{secret:ie["$[]"](0),expr:ie["$[]"](2)}))}),C(M,"$_reduce_2",Z(!1)),C(M,"$_reduce_3",Z(!0)),C(M,"$_reduce_4",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"+",ie["$[]"](2))}),C(M,"$_reduce_5",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"-",ie["$[]"](2))}),C(M,"$_reduce_7",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"BinaryOp").$new(ie["$[]"](0),"*",ie["$[]"](2))}),C(M,"$_reduce_8",function(ie,X,D){return ie["$[]"](3).$new(ie["$[]"](0),ie["$[]"](2))}),C(M,"$_reduce_10",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),C(M,"$_reduce_11",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithCeil")}),C(M,"$_reduce_12",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithCeil")}),C(M,"$_reduce_13",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithRound")}),C(M,"$_reduce_14",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"DivideWithFloor")}),C(M,"$_reduce_15",function(ie,X,D){return ie["$[]"](1)}),C(M,"$_reduce_16",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"Negative").$new(ie["$[]"](1))}),C(M,"$_reduce_18",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"Parenthesis").$new(ie["$[]"](1))}),C(M,"$_reduce_19",function(ie,X,D){return w(w(r("Arithmetic"),"Node"),"Number").$new(ie["$[]"](0))}),C(M,"$_reduce_none",function(ie,X,D){return ie["$[]"](0)})},Opal.modules["bcdice/common_command/calc"]=function($){var Z,w,T,g,S,_,I,b,F,U,P=$.module,Q=$.const_set,E=$.thrower,C=$.def,R=[],Y=$.nil;return $.top.$require("bcdice/common_command/calc/parser"),Z=R,w=U=[P(R[0],"BCDice")].concat(Z),T=F=[P(U[0],"CommonCommand")].concat(w),Q((b=[I=P(F[0],"Calc")].concat(T))[0],"PREFIX_PATTERN",/C[+\-(]*\d+/.$freeze()),S=[g=$.get_singleton_class(I)].concat(b),_=$.$r(S),C(g,"$eval",function(f,z,v){try{var h;return E("eval_return"),(h=_("Parser").$parse(f))===Y||null==h?Y:h.$eval(z.$round_type())}catch(m){if(m===$.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/choice"]=function($){var g,p,h,e,t,M,m,d,a,z,S,P=$.module,Q=$.klass,E=$.const_set,C=$.hash2,B=$.def,R=$.truthy,Y=$.eqeq,H=$.eqeqeq,Z=$.send,W=$.rb_lt,U=$.thrower,L=$.rb_gt,w=$.ensure_kwargs,A=$.get_kwarg,k=[],T=$.nil,I=$.$$$;return $.top.$require("strscan"),g=k,p=S=[P(k[0],"BCDice")].concat(g),h=z=[P(S[0],"CommonCommand")].concat(p),m=[M=Q(z[0],null,"Choice")].concat(h),d=$.$r(m),(a=M.$$prototype).items=a.takes=a.block_delimiter=T,E(m[0],"PREFIX_PATTERN",/choice/.$freeze()),e=m,E((t=[P(m[0],"BlockDelimiter")].concat(e))[0],"BRACKET","bracket"),E(t[0],"PAREN","paren"),E(t[0],"SPACE","space"),E(m[0],"DELIMITER",C(["bracket","paren","space"],{bracket:/,/,paren:/,/,space:/\s+/}).$freeze()),E(m[0],"DELIMITER_CHAR",C(["bracket","paren","space"],{bracket:", ",paren:", ",space:" "}).$freeze()),E(m[0],"TERMINATION",C(["bracket","paren","space"],{bracket:/\]/,paren:/\)/,space:/$/}).$freeze()),E(m[0],"SUFFIX",C(["bracket","paren","space"],{bracket:"]",paren:")",space:""}).$freeze()),function(r,e){var s=[r].concat(e),t=$.$r(s);B(r,"$eval",function(i,c,o){var x;return(x=this.$parse(i))===T||null==x?T:x.$roll(o)}),r.$private(),B(r,"$parse",function(i){try{var o,O,ae,le,oe,c=U("return"),j=T,te=T,ne=T,ue=T,ie=T,X=T;if((j=t("StringScanner").$new(i)).$skip(/\s+/),O=j.$scan(/S/i)["$nil?"]()["$!"](),!R(j.$scan(/choice/i))||(te=R(ne=(o=j.$scan(/\d+/))===T||null==o?T:o.$to_i())?ne:1,Y(te,0)))return T;for(ae=H("[",ne=j.$scan(/\(|\[|\s+/))?I(t("BlockDelimiter"),"BRACKET"):H("(",ne)?I(t("BlockDelimiter"),"PAREN"):H(t("String"),ne)?I(t("BlockDelimiter"),"SPACE"):void c.$throw(),le=t("DELIMITER")["$[]"](ae),oe=t("TERMINATION")["$[]"](ae),ue=[];R(ie=j.$scan_until(le));)ue.$push(ie.$delete_suffix(","));return X=j.$scan_until(oe),!R(X)||(ue.$push(X.$delete_suffix(t("SUFFIX")["$[]"](ae))),ue=Z(Z(ue,"map",[],"strip".$to_proc()),"reject",[],"empty?".$to_proc()),Y(ue.$size(),1)&&(ue=this.$parse_multi_item_shorthand(ue.$first())),R(ue["$empty?"]())||R(W(ue.$size(),te)))?T:this.$new(C(["secret","block_delimiter","takes","items"],{secret:O,block_delimiter:ae,takes:te,items:ue}))}catch(D){if(D===c)return D.$v;throw D}}),B(r,"$parse_multi_item_shorthand",function(i){var o,x;return R(o=R(x=this.$parse_multi_nums_shorthand(i))?x:this.$parse_multi_chars_shorthand(i))?o:[]}),B(r,"$parse_multi_nums_shorthand",function(i){var c=T,o=T,x=T;return c=/^(\d+)-(\d+)$/.$match(i),!R(c)||(o=c["$[]"](1).$to_i(),x=c["$[]"](2).$to_i(),R(L(o,x)))?T:o.$upto(x).$to_a()}),B(r,"$parse_multi_chars_shorthand",function(i){var o,c=T,x=T,j=T;return c=R(o=/^([a-z])-([a-z])$/.$match(i))?o:/^([A-Z])-([A-Z])$/.$match(i),!R(c)||(x=c["$[]"](1),j=c["$[]"](2),R(L(x,j)))?T:x.$upto(j).$to_a()})}($.get_singleton_class(M),m),B(M,"$initialize",function(e){var s,t,n,i,c=this;return e=w(e),s=A(e,"secret"),t=A(e,"block_delimiter"),n=A(e,"takes"),i=A(e,"items"),c.secret=s,c.block_delimiter=t,c.takes=n,c.items=i}),B(M,"$roll",function(e){var s=this,t=T,n=T;return R(L(s.items.$size(),100))?d("Result").$new("\u9805\u76ee\u6570\u306f100\u4ee5\u4e0b\u3068\u3057\u3066\u304f\u3060\u3055\u3044"):(t=s.items.$dup(),n=[],Z(s.takes,"times",[],function(){var c;return c=e.$roll_index(t.$size()),n["$<<"](t.$delete_at(c))}),Z(d("Result").$new(),"tap",[],function i(c){var o,j,x=null==i.$$s?this:i.$$s;return null==x.block_delimiter&&(x.block_delimiter=T),null==x.secret&&(x.secret=T),null==c&&(c=T),j=n.$join(d("DELIMITER_CHAR")["$[]"](x.block_delimiter)),c["$secret="](x.secret),o=["("+x.$expr()+") \uff1e "+j],Z(c,"text=",o),o[o.length-1]},{$$s:s}))}),B(M,"$expr",function(){var s,t,e=this;return s=Y(e.takes,1)?T:e.takes,H(I(d("BlockDelimiter"),"SPACE"),t=e.block_delimiter)?"choice"+s+" "+e.items.$join(" "):H(I(d("BlockDelimiter"),"BRACKET"),t)?"choice"+s+"["+e.items.$join(",")+"]":H(I(d("BlockDelimiter"),"PAREN"),t)?"choice"+s+"("+e.items.$join(",")+")":T})},Opal.modules["bcdice/common_command/d66_dice"]=function($){var I,S,v,d,r,e,N,h,M,p,g,P=$.module,Q=$.klass,E=$.const_set,C=$.thrower,B=$.def,R=$.truthy,Y=$.hash2,H=$.ensure_kwargs,Z=$.get_kwarg,W=$.send,U=$.eqeqeq,L=$.rb_plus,w=$.rb_times,A=[],F=$.nil,k=$.$$$;return I=A,S=g=[P(A[0],"BCDice")].concat(I),v=p=[P(g[0],"CommonCommand")].concat(S),h=[N=Q(p[0],null,"D66Dice")].concat(v),M=$.$r(h),N.$$prototype.sort_type=F,E(h[0],"PREFIX_PATTERN",/D66/.$freeze()),r=[d=$.get_singleton_class(N)].concat(h),e=$.$r(r),B(d,"$eval",function(t,n,i){try{var o;return C("eval_return"),(o=this.$parse(t,n))===F||null==o?F:o.$eval(i)}catch(O){if(O===$.t_eval_return)return O.$v;throw O}}),d.$private(),B(d,"$parse",function(t,n){var c=F,o=F;return t=t.$split(" ",2).$first(),c=/^(S)?D66([ANSD])?$/i.$match(t.$upcase()),R(c)?this.$new(Y(["secret","sort_type","suffix"],{secret:c["$[]"](1)["$nil?"]()["$!"](),sort_type:R(o=this.$sort_type_from_suffix(c["$[]"](2)))?o:n.$d66_sort_type(),suffix:c["$[]"](2)})):F}),B(d,"$sort_type_from_suffix",function(t){switch(t.valueOf()){case"A":case"S":return k(e("D66SortType"),"ASC");case"D":return k(e("D66SortType"),"DESC");case"N":return k(e("D66SortType"),"NO_SORT");default:return F}}),B(N,"$initialize",function(a){var r,e,s,t=this;return a=H(a),r=Z(a,"secret"),e=Z(a,"sort_type"),s=Z(a,"suffix"),t.secret=r,t.sort_type=e,t.suffix=s}),B(N,"$eval",function(a){var e;return e=this.$roll(a),W(M("Result").$new(),"tap",[],function s(t){var n,i=null==s.$$s?this:s.$$s;return null==i.secret&&(i.secret=F),null==i.suffix&&(i.suffix=F),null==t&&(t=F),t["$secret="](i.secret),W(t,"text=",n=["(D66"+i.suffix+") \uff1e "+e]),n[n.length-1]},{$$s:this})}),N.$private(),B(N,"$roll",function(a){var s,e=F;return e=W(M("Array"),"new",[2],function(){return a.$roll_once(6)}),U(k(M("D66SortType"),"ASC"),s=this.sort_type)?e["$sort!"]():U(k(M("D66SortType"),"DESC"),s)&&e["$sort!"]()["$reverse!"](),L(w(e["$[]"](0),10),e["$[]"](1))})},Opal.modules["bcdice/common_command/repeat"]=function($){var T,q,z,m,a,r,v,N,h,M,_,b,P=$.module,Q=$.klass,E=$.const_set,C=$.def,B=$.truthy,R=$.hash2,Y=$.ensure_kwargs,H=$.get_kwarg,Z=$.send,W=$.eqeq,U=$.thrower,L=$.rb_lt,A=[],F=$.nil;return $.top.$require("strscan"),T=A,q=b=[P(A[0],"BCDice")].concat(T),z=_=[P(b[0],"CommonCommand")].concat(q),N=[v=Q(_[0],null,"Repeat")].concat(z),h=$.$r(N),(M=v.$$prototype).times=M.trailer=M.secret=F,E(N[0],"PREFIX_PATTERN",/(repeat|rep|x)\d+/.$freeze()),E(N[0],"REPEAT_LIMIT",100),a=[m=$.get_singleton_class(v)].concat(N),r=$.$r(a),C(m,"$eval",function(s,t,n){var i;return(i=this.$parse(s))===F||null==i?F:i.$roll(t,n)}),m.$private(),C(m,"$parse",function(s){var t,c,i=F,o=F,x=F,j=F,O=F;return c=(i=r("StringScanner").$new(s)).$scan(/s/i)["$nil?"]()["$!"](),o=i.$scan(/repeat|rep|x/i),x=(t=i.$scan(/\d+/))===F||null==t?F:t.$to_i(),j=i.$scan(/\s+/),B(o["$nil?"]())||B(x["$nil?"]())||B(j["$nil?"]())||(O=i.$post_match(),B(O["$nil?"]())||B(O["$empty?"]()))?F:this.$new(R(["secret","times","trailer"],{secret:c,times:x,trailer:O}))}),C(v,"$initialize",function(d){var a,r,e,s=this;return d=Y(d),a=H(d,"secret"),r=H(d,"times"),e=H(d,"trailer"),s.secret=a,s.times=r,s.trailer=e}),C(v,"$roll",function(d,a){try{U("eval_return");var s,e=this,t=F,n=F,i=F,c=F;return s=e.$validate(),B(s)?s:(t=Z(h("Array"),"new",[e.times],function o(){var x=null==o.$$s?this:o.$$s,j=F;return null==x.trailer&&(x.trailer=F),(j=d.$class().$new(x.trailer))["$randomizer="](a),j.$eval()},{$$s:e}),W(Z(t,"count",[],function(x){return null==x&&(x=F),x["$=="](F)}),e.times)?e.$result_with_text("\u7e70\u308a\u8fd4\u3057\u5bfe\u8c61\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f ("+e.trailer+")"):(n=Z(t.$map(),"with_index",[1],function(x,j){return null==x&&(x=F),null==j&&(j=F),"#"+j+"\n"+x.$text()}).$join("\n\n"),i=B(c=e.secret)?c:Z(t,"any?",[],"secret?".$to_proc()),Z(h("Result").$new(),"tap",[],function(x){var j;return null==x&&(x=F),x["$secret="](i),Z(x,"text=",j=[n]),j[j.length-1]})))}catch(o){if(o===$.t_eval_return)return o.$v;throw o}}),v.$private(),C(v,"$validate",function(){var d=this;return B(/^(repeat|rep|x)\d+/["$match?"](d.trailer))?d.$result_with_text("Repeat\u30b3\u30de\u30f3\u30c9\u306e\u91cd\u8907\u306f\u3067\u304d\u307e\u305b\u3093"):B(L(d.times,1))||B(L(h("REPEAT_LIMIT"),d.times))?d.$result_with_text("\u7e70\u308a\u8fd4\u3057\u56de\u6570\u306f1\u4ee5\u4e0a\u3001"+h("REPEAT_LIMIT")+"\u4ee5\u4e0b\u3068\u3057\u3066\u304f\u3060\u3055\u3044"):F}),C(v,"$result_with_text",function(d){return Z(h("Result").$new(),"tap",[],function r(e){var s,t=null==r.$$s?this:r.$$s;return null==t.secret&&(t.secret=F),null==e&&(e=F),e["$secret="](t.secret),Z(e,"text=",s=[d]),s[s.length-1]},{$$s:this})})},Opal.modules["bcdice/format"]=function($){var W,A,F,k,T,L,P=$.module,Q=$.eqeqeq,E=$.def,C=$.truthy,B=$.eqeq,R=$.rb_gt,Y=[],H=$.nil;return W=Y,A=L=[P(Y[0],"BCDice")].concat(W),k=[F=P(L[0],"Format")].concat(A),T=$.$r(k),F.$module_function(),E(F,"$comparison_operator",function(b){var g;return Q("==",g=b)?"=":Q("!=",g)?"<>":Q(T("Symbol"),g)?b.$to_s():H}),E(F,"$modifier",function(b){return C(b["$nil?"]())?H:B(b,0)?"":C(R(b,0))?"+"+b:b.$to_s()})},Opal.modules["bcdice/common_command/barabara_dice/result"]=function($){var U,F,b,p,T,w,P=$.module,Q=$.klass,E=$.send2,C=$.find_super,B=$.def,Y=[],H=$.nil,Z=$.$$$;return $.top.$require("bcdice/result"),U=Y,F=w=[P(Y[0],"BCDice")].concat(U),b=T=[P(w[0],"CommonCommand")].concat(F),(p=Q([P(T[0],"BarabaraDice")].concat(b)[0],Z(Z("BCDice"),"Result"),"Result")).$attr_accessor("last_dice_list_list"),p.$attr_accessor("last_dice_list"),p.$attr_accessor("success_num"),B(p,"$initialize",function f(z){var N=this;return f.$$p=null,null==z&&(z=H),E(N,C(N,"initialize",f,!1,!0),"initialize",[z],null),N.last_dice_list_list=[],N.last_dice_list=[],N.success_num=0},-1)},Opal.modules["bcdice/common_command/barabara_dice/node"]=function($){var w,T,q,f,M,m,d,a,r,v,_,b,F,P=$.module,Q=$.klass,E=$.ensure_kwargs,C=$.get_kwarg,B=$.def,R=$.send,Y=$.truthy,H=$.thrower,Z=$.top,W=[],U=$.nil;return Z.$require("bcdice/format"),Z.$require("bcdice/common_command/barabara_dice/result"),w=W,T=F=[P(W[0],"BCDice")].concat(w),q=b=[P(F[0],"CommonCommand")].concat(T),f=_=[P(b[0],"BarabaraDice")].concat(q),M=v=[P(_[0],"Node")].concat(f),d=[m=Q(v[0],null,"Command")].concat(M),a=$.$r(d),(r=m.$$prototype).notations=r.cmp_op=r.target_number=U,B(m,"$initialize",function(s){var t,n,i,c,o=this;return s=E(s),t=C(s,"secret"),n=C(s,"notations"),i=C(s,"cmp_op"),c=C(s,"target_number"),o.secret=t,o.notations=n,o.cmp_op=i,o.target_number=c}),B(m,"$eval",function(s,t){try{H("eval_return");var i,o,j,te,le,oe,c=this,x=U,O=U,ne=U,ae=U,ue=U,ie=U;return o=s.$round_type(),x=R(c.notations,"map",[],function(D){return null==D&&(D=U),D.$to_dice(o)}),j=Y(O=c.cmp_op)?O:s.$default_cmp_op(),te=Y(O=(i=c.target_number)===U||null==i?U:i.$eval(o))?O:s.$default_target_number(),ne=R(x,"map",[],function(D){return null==D&&(D=U),D.$roll(t)}),Y(s["$sort_barabara_dice?"]())&&R(ne,"map!",[],"sort".$to_proc()),le=(ae=ne.$flatten()).$count(1),oe=Y(j)?R(ae,"count",[],function(D){return null==D&&(D=U),D.$send(j,te)}):0,Y(j)&&(ue="\u6210\u529f\u6570"+oe),ie=["("+x.$join("+")+a("Format").$comparison_operator(j)+te+")",ae.$join(","),ue,s.$grich_text(le,ae.$size(),oe)].$compact(),R(a("Result").$new(),"tap",[],function X(D){var V,J=null==X.$$s?this:X.$$s;return null==J.secret&&(J.secret=U),null==D&&(D=U),D["$secret="](J.secret),D["$text="](ie.$join(" \uff1e ")),D["$last_dice_list_list="](ne),D["$last_dice_list="](ae),R(D,"success_num=",V=[oe]),V[V.length-1]},{$$s:c})}catch(X){if(X===$.t_eval_return)return X.$v;throw X}}),function(N,h,M){var m=Q(N,null,"Notation"),d=[m].concat(M),a=$.$r(d),r=m.$$prototype;r.times=r.sides=U,B(m,"$initialize",function(s,t){return this.times=s,this.sides=t}),B(m,"$to_dice",function(s){try{var i,c;return H("eval_return"),i=this.times.$eval(s),c=this.sides.$eval(s),a("Dice").$new(i,c)}catch(o){if(o===$.t_eval_return)return o.$v;throw o}})}(v[0],0,v),function(N,h){var M=Q(N,null,"Dice"),m=M.$$prototype;return m.times=m.sides=U,B(M,"$initialize",function(a,r){return this.times=a,this.sides=r}),B(M,"$roll",function(a){return a.$roll_barabara(this.times,this.sides)}),B(M,"$to_s",function(){return this.times+"B"+this.sides})}(v[0])},Opal.modules["bcdice/common_command/reroll_dice/parser"]=function($){var k,g,p,M,s,t,n,i,c,o,x,j,O,ae,m,r,e,z,v,S,I,P=$.module,Q=$.klass,E=$.defs,C=$.def,B=$.hash,R=$.const_set,Y=$.truthy,H=$.hash2,Z=$.return_val,W=$.to_ary,U=$.top,L=[],w=$.nil,A=$.$$$;return U.$require("racc/parser.rb"),U.$require("bcdice/common_command/lexer"),U.$require("bcdice/common_command/barabara_dice/node"),U.$require("bcdice/arithmetic/node"),k=L,g=I=[P(L[0],"BCDice")].concat(k),p=S=[P(I[0],"CommonCommand")].concat(g),z=[P(S[0],"RerollDice")].concat(p),v=$.$r(z),M=z,r=[m=Q(z[0],A(v("Racc"),"Parser"),"Parser")].concat(M),e=$.$r(r),m.$$prototype.lexer=w,E(m,"$parse",function(X){return this.$new().$parse(X)}),C(m,"$parse",function(X){try{return this.lexer=e("Lexer").$new(X),this.$do_parse()}catch(V){if(!$.rescue(V,[e("ParseError")]))throw V;try{return w}finally{$.pop_exception()}}}),m.$private(),C(m,"$next_token",function(){return this.lexer.$next_token()}),s=$.large_array_unpack("9,3,9,9,9,15,20,21,20,21,8,14,8,8,8,9,9,4,13,28,10,39,20,21,9,8,8,31,32,9,20,21,33,16,8,20,21,9,24,8,34,35,9,20,21,31,32,8,20,21,9,13,8,31,32,9,20,21,34,35,8,20,21,9,,8,34,35,9,20,21,31,32,8,20,21,9,,8,,31,32,20,21,31,32,8,40,,,,47,51,49,50,52"),t=$.large_array_unpack("14,0,24,2,15,5,14,14,24,24,14,5,24,2,15,16,8,1,5,14,4,24,8,8,13,16,8,17,17,20,13,13,17,7,13,20,20,21,11,20,18,18,28,21,21,26,26,21,28,28,31,12,28,38,38,32,31,31,42,42,31,32,32,34,,32,43,43,35,34,34,46,46,34,35,35,39,,35,,27,27,39,39,41,41,39,27,,,,41,45,45,45,45"),n=$.large_array_unpack("-6,17,1,,20,-3,,30,14,,,18,30,22,-2,2,13,19,30,,27,35,,,0,,37,72,40,,,48,53,,61,66,,,45,74,,76,48,56,,89,63,,,,,,"),i=$.large_array_unpack("-4,-31,-31,-5,-31,-6,-13,-31,-31,-30,53,-1,-6,-31,-31,-31,-31,-31,-17,-20,-31,-31,-28,-3,-31,-2,-7,-31,-31,-12,-14,-31,-31,-29,-31,-31,-26,-27,-10,-31,-8,-31,-15,-16,-18,-21,-11,-9,-19,-22,-23,-24,-25"),c=[17,7,11,36,37,26,27,1,6,25,42,43,2,5,7,30,38,44,45,12,41,29,23,48,w,w,w,w,w,w,w,46],o=[7,9,4,11,11,7,7,1,8,4,10,10,2,3,9,9,7,11,11,5,7,8,6,12,w,w,w,w,w,w,w,7],x=[w,7,12,11,-3,14,11,-8,6,-1,-21,-17,-22],j=[w,w,w,w,w,w,w,w,w,22,18,19,w],O=$.large_array_unpack("0,0,racc_error,3,23,_reduce_1,4,23,_reduce_2,4,23,_reduce_3,0,24,_reduce_4,1,24,_reduce_5,0,26,_reduce_6,2,26,_reduce_7,3,27,_reduce_8,4,27,_reduce_9,2,28,_reduce_10,3,28,_reduce_11,3,25,_reduce_12,1,25,_reduce_13,3,30,_reduce_14,3,29,_reduce_15,3,29,_reduce_16,1,29,_reduce_none,3,32,_reduce_18,4,32,_reduce_19,1,32,_reduce_none,0,34,_reduce_21,1,34,_reduce_22,1,34,_reduce_23,1,34,_reduce_24,1,34,_reduce_25,2,33,_reduce_26,2,33,_reduce_27,1,33,_reduce_none,3,31,_reduce_29,1,31,_reduce_30"),ae=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13,"BRACKETL",14,"BRACKETR",15,"LESS",16,"GREATER",17,"EQUAL",18,"NOT",19,"AT",20,"CMP_OP",21),R(r[0],"Racc_arg",[s,t,i,n,c,o,j,x,22,O,ae,53,31,!0]),Y(e("Ractor","skip_raise")?"constant":w)&&e("Ractor").$make_shareable(e("Racc_arg")),R(r[0],"Racc_token_to_s_table",$.large_array_unpack("$end,error,NUMBER,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,target,bracket,at,add,dice,term,mul,unary,round_type")),Y(e("Ractor","skip_raise")?"constant":w)&&e("Ractor").$make_shareable(e("Racc_token_to_s_table")),R(r[0],"Racc_debug_parser",!1),C(m,"$_reduce_1",function(X,D,V){return A(e("Node"),"Command").$new(H(["secret","notations","cmp_op","target_number","source"],{secret:X["$[]"](0),notations:X["$[]"](1),cmp_op:X["$[]"](2)["$[]"]("cmp_op"),target_number:X["$[]"](2)["$[]"]("target"),source:this.lexer.$source()}))}),C(m,"$_reduce_2",function(X,D,V){var u=w,y=w;return u=X["$[]"](3),y=X["$[]"](2),A(e("Node"),"Command").$new(H(["secret","notations","cmp_op","target_number","reroll_cmp_op","reroll_threshold","source"],{secret:X["$[]"](0),notations:X["$[]"](1),cmp_op:u["$[]"]("cmp_op"),target_number:u["$[]"]("target"),reroll_cmp_op:y["$[]"]("cmp_op"),reroll_threshold:y["$[]"]("threshold"),source:this.lexer.$source()}))}),C(m,"$_reduce_3",function(X,D,V){var u=w,y=w;return u=X["$[]"](2),y=X["$[]"](3),A(e("Node"),"Command").$new(H(["secret","notations","cmp_op","target_number","reroll_cmp_op","reroll_threshold","source"],{secret:X["$[]"](0),notations:X["$[]"](1),cmp_op:u["$[]"]("cmp_op"),target_number:u["$[]"]("target"),reroll_cmp_op:y["$[]"]("cmp_op"),reroll_threshold:y["$[]"]("threshold"),source:this.lexer.$source()}))}),C(m,"$_reduce_4",Z(!1)),C(m,"$_reduce_5",Z(!0)),C(m,"$_reduce_6",function(X,D,V){return H([],{})}),C(m,"$_reduce_7",function(X,D,V){var J,K,G;return G=null==(J=W(X))[1]?w:J[1],Y(K=null==J[0]?w:J[0])||this.$raise(e("ParseError")),H(["cmp_op","target"],{cmp_op:K,target:G})}),C(m,"$_reduce_8",function(X,D,V){return H(["threshold"],{threshold:X["$[]"](1)})}),C(m,"$_reduce_9",function(X,D,V){var u,y;return u=X["$[]"](1),y=X["$[]"](2),Y(u)||this.$raise(e("ParseError")),H(["cmp_op","threshold"],{cmp_op:u,threshold:y})}),C(m,"$_reduce_10",function(X,D,V){return H(["threshold"],{threshold:X["$[]"](1)})}),C(m,"$_reduce_11",function(X,D,V){var u,y;return u=X["$[]"](1),y=X["$[]"](2),Y(u)||this.$raise(e("ParseError")),H(["cmp_op","threshold"],{cmp_op:u,threshold:y})}),C(m,"$_reduce_12",function(X,D,V){var J=w;return(J=X["$[]"](0)).$push(X["$[]"](2)),J}),C(m,"$_reduce_13",function(X,D,V){return[X["$[]"](0)]}),C(m,"$_reduce_14",function(X,D,V){var J,u;return J=X["$[]"](0),u=X["$[]"](2),A(e("Node"),"Notation").$new(J,u)}),C(m,"$_reduce_15",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"+",X["$[]"](2))}),C(m,"$_reduce_16",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"-",X["$[]"](2))}),C(m,"$_reduce_18",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"*",X["$[]"](2))}),C(m,"$_reduce_19",function(X,D,V){return X["$[]"](3).$new(X["$[]"](0),X["$[]"](2))}),C(m,"$_reduce_21",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),C(m,"$_reduce_22",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),C(m,"$_reduce_23",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),C(m,"$_reduce_24",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithRound")}),C(m,"$_reduce_25",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithFloor")}),C(m,"$_reduce_26",function(X,D,V){return X["$[]"](1)}),C(m,"$_reduce_27",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Negative").$new(X["$[]"](1))}),C(m,"$_reduce_29",function(X,D,V){return X["$[]"](1)}),C(m,"$_reduce_30",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Number").$new(X["$[]"](0))}),C(m,"$_reduce_none",function(X,D,V){return X["$[]"](0)})},Opal.modules["bcdice/common_command/reroll_dice"]=function($){var Z,w,T,g,S,_,I,b,F,U,P=$.module,Q=$.const_set,E=$.thrower,C=$.def,B=$.top,R=[],Y=$.nil;return B.$require("bcdice/normalize"),B.$require("bcdice/format"),B.$require("bcdice/common_command/reroll_dice/parser"),Z=R,w=U=[P(R[0],"BCDice")].concat(Z),T=F=[P(U[0],"CommonCommand")].concat(w),Q((b=[I=P(F[0],"RerollDice")].concat(T))[0],"PREFIX_PATTERN",/\d+R\d+/.$freeze()),Q(b[0],"REROLL_LIMIT",1e4),S=[g=$.get_singleton_class(I)].concat(b),_=$.$r(S),C(g,"$eval",function(f,z,v){try{var h;return E("eval_return"),(h=_("Parser").$parse(f))===Y||null==h?Y:h.$eval(z,v)}catch(m){if(m===$.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/upper_dice/node"]=function($){var T,q,f,h,r,e,s,t,n,m,v,_,b,P=$.module,Q=$.klass,E=$.ensure_kwargs,C=$.get_kwarg,B=$.def,R=$.send,Y=$.truthy,H=$.rb_le,Z=$.thrower,W=$.rb_plus,U=$.eqeq,L=$.hash2,w=$.rb_lt,A=[],F=$.nil;return T=A,q=b=[P(A[0],"BCDice")].concat(T),f=_=[P(b[0],"CommonCommand")].concat(q),h=v=[P(_[0],"UpperDice")].concat(f),r=m=[P(v[0],"Node")].concat(h),s=[e=Q(m[0],null,"Command")].concat(r),t=$.$r(s),(n=e.$$prototype).notations=n.reroll_threshold=n.modifier=n.target_number=n.cmp_op=F,B(e,"$initialize",function(c){var o,x,j,O,te,ne,ae=this;return c=E(c),o=C(c,"secret"),x=C(c,"notations"),j=C(c,"modifier"),O=C(c,"cmp_op"),te=C(c,"target_number"),null==(ne=c.$$smap.reroll_threshold)&&(ne=F),ae.secret=o,ae.notations=x,ae.modifier=j,ae.cmp_op=O,ae.target_number=te,ae.reroll_threshold=ne}),B(e,"$eval",function(c,o){try{Z("eval_return");var j,O,te,ae,le,oe,X,V,ie,D,ne=this,ue=F,J=F,u=F,y=F;return ae=c.$round_type(),le=R(ne.notations,"map",[],function(G){return null==G&&(G=F),G.$to_dice(ae)}),oe=Y(ue=Y(ie=(j=ne.reroll_threshold)===F||null==j?F:j.$eval(ae))?ie:c.$upper_dice_reroll_threshold())?ue:0,X=Y(ue=(O=ne.modifier)===F||null==O?F:O.$eval(ae))?ue:0,D=(te=ne.target_number)===F||null==te?F:te.$eval(ae),V=ne.$expr(le,oe,X,D),Y(H(oe,1))?ne.$result_with_text("("+V+") \uff1e \u7121\u9650\u30ed\u30fc\u30eb\u306e\u6761\u4ef6\u304c\u307e\u3061\u304c\u3063\u3066\u3044\u307e\u3059"):(J=R(le,"map",[],function(G){return null==G&&(G=F),G.$roll(o,oe,c["$sort_barabara_dice?"]())}).$reduce([],"concat"),u=Y(ne.cmp_op)?ne.$result_success_count(J,X,D):ne.$result_max_sum(J,X),y=["("+V+")",ne.$interlim_expr(J,X),u],ne.$result_with_text(y.$join(" \uff1e ")))}catch(K){if(K===$.t_eval_return)return K.$v;throw K}}),e.$private(),B(e,"$result_success_count",function(c,o,x){return"\u6210\u529f\u6570"+R(c,"count",[],function te(ne){var ae=null==te.$$s?this:te.$$s;return null==ae.cmp_op&&(ae.cmp_op=F),null==ne&&(ne=F),W(ne["$[]"]("sum"),o).$send(ae.cmp_op,x)},{$$s:this})}),B(e,"$result_max_sum",function(c,o){var j,x=F;return x=R(c,"map",[],function(ne){return null==ne&&(ne=F),ne["$[]"]("sum")}),j=W(x.$sum(),o),R(x,"map",[],function(ne){return null==ne&&(ne=F),W(ne,o)}).$max()+"/"+j+"(\u6700\u5927/\u5408\u8a08)"}),B(e,"$interlim_expr",function(c,o){var x;return x=R(c,"map",[],function(O){return null==O&&(O=F),U(O["$[]"]("list").$size(),1)?O["$[]"]("sum"):O["$[]"]("sum")+"["+O["$[]"]("list").$join(",")+"]"}).$join(","),W(x,t("Format").$modifier(o))}),B(e,"$expr",function(c,o,x,j){var te,ne;return te=t("Format").$comparison_operator(this.cmp_op),ne=t("Format").$modifier(x),c.$join("+")+"["+o+"]"+ne+te+j}),B(e,"$result_with_text",function(c){return R(t("Result").$new(),"tap",[],function x(j){var O,te=null==x.$$s?this:x.$$s;return null==te.secret&&(te.secret=F),null==j&&(j=F),j["$secret="](te.secret),R(j,"text=",O=[c]),O[O.length-1]},{$$s:this})}),function(d,a,r){var e=Q(d,null,"Notation"),s=[e].concat(r),t=$.$r(s),n=e.$$prototype;n.roll_times=n.sides=F,B(e,"$initialize",function(c,o){return this.roll_times=c,this.sides=o}),B(e,"$to_dice",function(c){try{var j,O;return Z("eval_return"),j=this.roll_times.$eval(c),O=this.sides.$eval(c),t("Dice").$new(j,O)}catch(te){if(te===$.t_eval_return)return te.$v;throw te}})}(m[0],0,m),function(d,a,r){var e=Q(d,null,"Dice"),s=[e].concat(r),t=$.$r(s),n=e.$$prototype;return n.roll_times=n.sides=F,B(e,"$initialize",function(c,o){return this.roll_times=c,this.sides=o}),B(e,"$roll",function(c,o,x){var O=F;return O=R(t("Array"),"new",[this.roll_times],function te(){var ae=F;return ae=(null==te.$$s?this:te.$$s).$roll_ones(c,o),L(["sum","list"],{sum:ae.$sum(),list:ae})},{$$s:this}),Y(x)&&(O=R(O,"sort_by",[],function(ne){return null==ne&&(ne=F),ne["$[]"]("sum")})),O}),B(e,"$to_s",function(){return this.roll_times+"U"+this.sides}),e.$private(),B(e,"$roll_ones",function(c,o){var x=this,j=F;return j=[],function(){try{var O=Z("break");return R(x,"loop",[],function te(){var ae,ne=null==te.$$s?this:te.$$s;if(null==ne.sides&&(ne.sides=F),ae=c.$roll_once(ne.sides),j.$push(ae),!Y(w(ae,o)))return F;O.$throw()},{$$s:x})}catch(te){if(te===O)return te.$v;throw te}}(),j})}(m[0],0,m)},Opal.modules["bcdice/common_command/upper_dice/parser"]=function($){var k,g,p,M,s,t,n,i,c,o,x,j,O,ae,m,r,e,z,v,S,I,P=$.module,Q=$.klass,E=$.defs,C=$.def,B=$.hash,R=$.const_set,Y=$.truthy,H=$.hash2,Z=$.return_val,W=$.to_ary,U=$.top,L=[],w=$.nil,A=$.$$$;return U.$require("racc/parser.rb"),U.$require("bcdice/common_command/lexer"),U.$require("bcdice/common_command/upper_dice/node"),U.$require("bcdice/arithmetic/node"),k=L,g=I=[P(L[0],"BCDice")].concat(k),p=S=[P(I[0],"CommonCommand")].concat(g),z=[P(S[0],"UpperDice")].concat(p),v=$.$r(z),M=z,r=[m=Q(z[0],A(v("Racc"),"Parser"),"Parser")].concat(M),e=$.$r(r),m.$$prototype.lexer=w,E(m,"$parse",function(X){return this.$new().$parse(X)}),C(m,"$parse",function(X){try{return this.lexer=e("Lexer").$new(X),this.$do_parse()}catch(V){if(!$.rescue(V,[e("ParseError")]))throw V;try{return w}finally{$.pop_exception()}}}),m.$private(),C(m,"$next_token",function(){return this.lexer.$next_token()}),s=$.large_array_unpack("9,9,36,37,3,9,9,21,22,49,8,8,21,22,9,8,8,14,15,9,21,22,4,16,8,21,22,9,10,8,36,37,9,21,22,38,17,8,21,22,9,25,8,27,15,9,21,22,28,29,8,21,22,9,44,8,39,40,9,21,22,39,40,8,21,22,9,25,8,39,40,9,21,22,36,37,8,21,22,9,17,8,39,40,9,21,22,39,40,8,21,22,9,,8,39,40,,21,22,39,40,8,58,56,57,59,36,37"),t=$.large_array_unpack("2,8,34,34,0,17,14,8,8,34,2,8,14,14,15,17,14,5,5,16,15,15,1,5,15,16,16,21,4,16,18,18,22,21,21,18,7,21,22,22,25,11,22,12,12,27,25,25,13,13,25,27,27,28,24,27,19,19,29,28,28,30,30,28,29,29,36,26,29,33,33,37,36,36,45,45,36,37,37,39,32,37,47,47,40,39,39,48,48,39,40,40,44,,40,50,50,,44,44,51,51,44,53,53,53,53,54,54"),n=$.large_array_unpack("-3,22,-2,,28,9,,32,-1,,,20,35,40,4,12,17,3,22,46,,25,30,,34,38,46,43,51,56,51,,76,59,-6,,64,69,,77,82,,,,90,66,,72,77,,85,90,,100,99,,,,,"),i=$.large_array_unpack("-4,-35,-35,-5,-35,-6,-17,-35,-35,-34,60,-12,-6,-7,-35,-35,-35,-35,-35,-21,-24,-35,-35,-32,-1,-35,-12,-35,-35,-35,-8,-16,-32,-9,-35,-18,-35,-35,-33,-35,-35,-30,-31,-3,-35,-13,-2,-10,-11,-14,-19,-20,-22,-25,-15,-23,-26,-27,-28,-29"),c=$.large_array_unpack("18,30,33,41,42,24,6,1,34,2,5,12,11,7,30,47,48,45,31,26,46,52,53,50,51,32,43,55,35,,,,,,,,54"),o=$.large_array_unpack("10,9,9,13,13,5,11,1,10,2,3,6,4,12,9,9,9,10,11,4,5,13,13,9,9,12,7,14,12,,,,,,,,10"),x=[w,7,9,8,7,-6,6,2,w,-13,-8,4,11,-18,-26],j=[w,w,w,w,w,w,w,w,13,19,w,w,23,20,w],O=$.large_array_unpack("0,0,racc_error,4,23,_reduce_1,5,23,_reduce_2,5,23,_reduce_3,0,24,_reduce_4,1,24,_reduce_5,0,26,_reduce_6,1,26,_reduce_7,2,30,_reduce_8,2,30,_reduce_9,3,30,_reduce_10,3,30,_reduce_11,0,27,_reduce_12,2,27,_reduce_13,3,28,_reduce_14,2,29,_reduce_15,3,25,_reduce_16,1,25,_reduce_17,3,33,_reduce_18,3,32,_reduce_19,3,32,_reduce_20,1,32,_reduce_none,3,31,_reduce_22,4,31,_reduce_23,1,31,_reduce_none,0,36,_reduce_25,1,36,_reduce_26,1,36,_reduce_27,1,36,_reduce_28,1,36,_reduce_29,2,35,_reduce_30,2,35,_reduce_31,1,35,_reduce_none,3,34,_reduce_33,1,34,_reduce_34"),ae=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13,"BRACKETL",14,"BRACKETR",15,"LESS",16,"GREATER",17,"EQUAL",18,"NOT",19,"AT",20,"CMP_OP",21),R(r[0],"Racc_arg",[s,t,i,n,c,o,j,x,22,O,ae,60,35,!0]),Y(e("Ractor","skip_raise")?"constant":w)&&e("Ractor").$make_shareable(e("Racc_arg")),R(r[0],"Racc_token_to_s_table",$.large_array_unpack("$end,error,NUMBER,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,modifier,target,bracket,at,modifier_expr,mul,add,dice,term,unary,round_type")),Y(e("Ractor","skip_raise")?"constant":w)&&e("Ractor").$make_shareable(e("Racc_token_to_s_table")),R(r[0],"Racc_debug_parser",!1),C(m,"$_reduce_1",function(X,D,V){return A(A(e("UpperDice"),"Node"),"Command").$new(H(["secret","notations","modifier","cmp_op","target_number"],{secret:X["$[]"](0),notations:X["$[]"](1),modifier:X["$[]"](2),cmp_op:X["$[]"](3)["$[]"]("cmp_op"),target_number:X["$[]"](3)["$[]"]("target")}))}),C(m,"$_reduce_2",function(X,D,V){return A(A(e("UpperDice"),"Node"),"Command").$new(H(["secret","notations","modifier","cmp_op","target_number","reroll_threshold"],{secret:X["$[]"](0),notations:X["$[]"](1),modifier:X["$[]"](3),cmp_op:X["$[]"](4)["$[]"]("cmp_op"),target_number:X["$[]"](4)["$[]"]("target"),reroll_threshold:X["$[]"](2)}))}),C(m,"$_reduce_3",function(X,D,V){return A(A(e("UpperDice"),"Node"),"Command").$new(H(["secret","notations","modifier","cmp_op","target_number","reroll_threshold"],{secret:X["$[]"](0),notations:X["$[]"](1),modifier:X["$[]"](2),cmp_op:X["$[]"](3)["$[]"]("cmp_op"),target_number:X["$[]"](3)["$[]"]("target"),reroll_threshold:X["$[]"](4)}))}),C(m,"$_reduce_4",Z(!1)),C(m,"$_reduce_5",Z(!0)),C(m,"$_reduce_6",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Number").$new(0)}),C(m,"$_reduce_7",function(X,D,V){return X["$[]"](0)}),C(m,"$_reduce_8",function(X,D,V){return X["$[]"](1)}),C(m,"$_reduce_9",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Negative").$new(X["$[]"](1))}),C(m,"$_reduce_10",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"+",X["$[]"](2))}),C(m,"$_reduce_11",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"-",X["$[]"](2))}),C(m,"$_reduce_12",function(X,D,V){return H([],{})}),C(m,"$_reduce_13",function(X,D,V){var J,K,G;return G=null==(J=W(X))[1]?w:J[1],Y(K=null==J[0]?w:J[0])||this.$raise(e("ParseError")),H(["cmp_op","target"],{cmp_op:K,target:G})}),C(m,"$_reduce_14",function(X,D,V){return X["$[]"](1)}),C(m,"$_reduce_15",function(X,D,V){return X["$[]"](1)}),C(m,"$_reduce_16",function(X,D,V){var J=w;return(J=X["$[]"](0)).$push(X["$[]"](2)),J}),C(m,"$_reduce_17",function(X,D,V){return[X["$[]"](0)]}),C(m,"$_reduce_18",function(X,D,V){var J,u;return J=X["$[]"](0),u=X["$[]"](2),A(A(e("UpperDice"),"Node"),"Notation").$new(J,u)}),C(m,"$_reduce_19",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"+",X["$[]"](2))}),C(m,"$_reduce_20",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"-",X["$[]"](2))}),C(m,"$_reduce_22",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"BinaryOp").$new(X["$[]"](0),"*",X["$[]"](2))}),C(m,"$_reduce_23",function(X,D,V){return X["$[]"](3).$new(X["$[]"](0),X["$[]"](2))}),C(m,"$_reduce_25",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),C(m,"$_reduce_26",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),C(m,"$_reduce_27",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithCeil")}),C(m,"$_reduce_28",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithRound")}),C(m,"$_reduce_29",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"DivideWithFloor")}),C(m,"$_reduce_30",function(X,D,V){return X["$[]"](1)}),C(m,"$_reduce_31",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Negative").$new(X["$[]"](1))}),C(m,"$_reduce_33",function(X,D,V){return X["$[]"](1)}),C(m,"$_reduce_34",function(X,D,V){return A(A(e("Arithmetic"),"Node"),"Number").$new(X["$[]"](0))}),C(m,"$_reduce_none",function(X,D,V){return X["$[]"](0)})},Opal.modules["bcdice/common_command/upper_dice"]=function($){var Z,w,T,g,S,_,I,b,F,U,P=$.module,Q=$.const_set,E=$.thrower,C=$.def,R=[],Y=$.nil;return $.top.$require("bcdice/common_command/upper_dice/parser"),Z=R,w=U=[P(R[0],"BCDice")].concat(Z),T=F=[P(U[0],"CommonCommand")].concat(w),Q((b=[I=P(F[0],"UpperDice")].concat(T))[0],"PREFIX_PATTERN",/\d+U\d+/.$freeze()),S=[g=$.get_singleton_class(I)].concat(b),_=$.$r(S),C(g,"$eval",function(f,z,v){try{var h;return E("eval_return"),(h=_("Parser").$parse(f))===Y||null==h?Y:h.$eval(z,v)}catch(m){if(m===$.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/version"]=function($){var W,A,I,q,_,p,b,g,k,L,P=$.module,Q=$.const_set,E=$.truthy,C=$.send,B=$.def,R=[],Y=$.nil,H=$.$$$;return W=R,A=L=[P(R[0],"BCDice")].concat(W),I=k=[P(L[0],"CommonCommand")].concat(A),Q((g=[b=P(k[0],"Version")].concat(I))[0],"PREFIX_PATTERN",/BCDiceVersion/.$freeze()),_=[q=$.get_singleton_class(b)].concat(g),p=$.$r(_),B(q,"$eval",function(z,v,N){return z=z.$split(" ",2).$first(),E(z["$match?"](/^BCDiceVersion$/i))?C(p("Result").$new(),"tap",[],function(M){var m;return null==M&&(M=Y),m=["BCDice "+H(p("BCDice"),"VERSION")],C(M,"text=",m),m[m.length-1]}):Y})},Opal.queue(function($){var Y,U,w,A,Z,P=$.module,Q=$.const_set,E=$.top,C=[];return E.$require("bcdice/common_command/add_dice"),E.$require("bcdice/common_command/barabara_dice"),E.$require("bcdice/common_command/tally_dice"),E.$require("bcdice/common_command/calc"),E.$require("bcdice/common_command/choice"),E.$require("bcdice/common_command/d66_dice"),E.$require("bcdice/common_command/repeat"),E.$require("bcdice/common_command/reroll_dice"),E.$require("bcdice/common_command/upper_dice"),E.$require("bcdice/common_command/version"),Y=C,U=Z=[P(C[0],"BCDice")].concat(Y),w=[P(Z[0],"CommonCommand")].concat(U),A=$.$r(w),Q(w[0],"COMMANDS",[A("AddDice"),A("BarabaraDice"),A("TallyDice"),A("Calc"),A("Choice"),A("D66Dice"),A("Repeat"),A("RerollDice"),A("UpperDice"),A("Version")].$freeze())})},3986:function(){(function(l){"use strict";var ee;if(typeof globalThis<"u"?l=globalThis:typeof global<"u"?l=global:typeof window<"u"&&(l=window),null==l.console&&(l.console={}),"log"in(ee="object"==typeof l.console?l.console:{})||(ee.log=function(){}),"warn"in ee||(ee.warn=ee.log),typeof l.Opal<"u")return ee.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),l.Opal;var re,$,P,Q,E,C,B,R=l.Opal={};R.global=l,R.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var Y=Function.prototype.call,H=Function.prototype.bind,Z=Object.hasOwn||Y.bind(Object.prototype.hasOwnProperty),W=Object.setPrototypeOf,U=Y.bind(Array.prototype.slice),L=Y.bind(Array.prototype.splice),A=4;function F(){return A+=2}R.uid=F,R.id=function(u){return u.$$is_number?2*u+1:(null==u.$$id&&I(u,"$$id",F()),u.$$id)};var k=R.gvars={};function T(u,y){if(u||(u=R.Exception||Error),!B||!B.$raise)throw u.$new?u.$new(y):new u(y);arguments.length>2?B.$raise(u.$new.apply(u,U(arguments,1))):B.$raise(u,y)}function I(u,y,K){"string"==typeof u?u[y]=K:Object.defineProperty(u,y,{value:K,enumerable:!1,configurable:!0,writable:!0})}R.exit=function(u){k.DEBUG&&ee.log("Exited with status "+u)},R.exceptions=[],R.pop_exception=function(){var u=R.exceptions.pop();u?(k["!"]=u,k["@"]=u.$backtrace()):k["!"]=k["@"]=re},R.prop=I,R.defineProperty=R.prop,R.slice=U;var b=R.truthy=function(u){return!(!1===u||re===u||null==u||u instanceof Boolean&&!0!==u.valueOf())};function g(u){var y,K,G;for(y=0,K=R.tracers_for_class.length;y<K;y++)(G=R.tracers_for_class[y]).trace_object=u,G.block.$call(G)}function q(u,y){if(u.$$autoload[y].loaded){if(u.$$autoload[y].loaded&&!u.$$autoload[y].required&&u.$$autoload[y].exception)throw u.$$autoload[y].exception}else{u.$$autoload[y].loaded=!0;try{R.Kernel.$require(u.$$autoload[y].path)}catch(K){throw u.$$autoload[y].exception=K,K}if(u.$$autoload[y].required=!0,null!=u.$$const[y])return u.$$autoload[y].success=!0,u.$$const[y]}}function S(u,y){if(u){if(null!=u.$$const[y])return u.$$const[y];if(u.$$autoload&&u.$$autoload[y])return q(u,y)}}function p(u,y){var K,G,se;if(null!=u)for(K=0,G=(se=j(u)).length;K<G;K++){if(se[K].$$const&&Z(se[K].$$const,y))return se[K].$$const[y];if(se[K].$$autoload&&se[K].$$autoload[y])return q(se[K],y)}}function z(u,y){return(u||P).$const_missing(y)}function v(u,y,K){var G=!0;return(null==u||"::"===u)&&(u=P),K.$$is_a_module&&((null==K.$$name||K.$$name===re)&&(K.$$name=y),null==K.$$base_module&&(K.$$base_module=u)),u.$$const=u.$$const||Object.create(null),(y in u.$$const||"$$autoload"in u&&y in u.$$autoload)&&(G=!1),u.$$const[y]=K,u.$$=u.$$const,R.const_cache_version++,u===P&&(R[y]=K),I(u,y,K),G&&u.$const_added&&!u.$const_added.$$pristine&&u.$const_added(y),K}function N(u,y,K){var G;if(G=null!=y&&y.$$bridge?function(){var fe=U(arguments),_e=new(H.apply(y.$$constructor,[null].concat(fe)));return W(_e,G.$$prototype),_e}:function(){},u&&u!==re&&I(G,"displayName","::"+u),I(G,"$$name",u),I(G,"$$constructor",G),I(G,"$$prototype",G.prototype),I(G,"$$const",{}),I(G,"$$is_class",!0),I(G,"$$is_a_module",!0),I(G,"$$super",y),I(G,"$$cvars",{}),I(G,"$$own_included_modules",[]),I(G,"$$own_prepended_modules",[]),I(G,"$$ancestors",[]),I(G,"$$ancestors_cache_version",null),I(G,"$$subclasses",[]),I(G.$$prototype,"$$class",G),R.Class&&W(G,R.Class.prototype),null!=y){if(W(G.$$prototype,y.$$prototype),!0!==K)if(typeof WeakRef<"u"){var se,$e,ce=[];for(se=0;se<y.$$subclasses.length;se++)void 0!==($e=y.$$subclasses[se]).deref()&&ce.push($e);ce.push(new WeakRef(G)),y.$$subclasses=ce}else y.$$subclasses.push(G);y.$$meta&&R.build_class_singleton_class(G)}return G}function m(u){var y=function(){},K=y;return u&&I(y,"displayName",u+".constructor"),I(K,"$$name",u),I(K,"$$prototype",y.prototype),I(K,"$$const",{}),I(K,"$$is_module",!0),I(K,"$$is_a_module",!0),I(K,"$$cvars",{}),I(K,"$$iclasses",[]),I(K,"$$own_included_modules",[]),I(K,"$$own_prepended_modules",[]),I(K,"$$ancestors",[K]),I(K,"$$ancestors_cache_version",null),W(K,R.Module.prototype),K}function a(u,y){u.hasOwnProperty("$$meta")?u.$$meta=y:I(u,"$$meta",y),u.$$frozen?u.$$meta.$freeze():W(u,y.$$prototype)}function r(u){return u.hasOwnProperty("$$iclass")&&u.hasOwnProperty("$$root")}function n(u){var y=i(u);return u.$$is_module&&u.$$iclasses.push(y),y}function i(u){var y={},K=u.$$prototype;K.hasOwnProperty("$$dummy")&&(K=K.$$define_methods_on);var $e,G=Object.getOwnPropertyNames(K),se=G.length;for($e=0;$e<se;$e++){var ce=G[$e];I(y,ce,K[ce])}return I(y,"$$iclass",!0),I(y,"$$module",u),y}function c(u){var y=u.length,K=u[0];if(I(K,"$$root",!0),1===y)return{first:K,last:K};for(var G=K,se=1;se<y;se++){var $e=u[se];W(G,$e),G=$e}return{first:u[0],last:u[y-1]}}function o(u){if(!u.hasOwnProperty("$$dummy")){if(u.hasOwnProperty("$$iclass"))return u.$$module;if(u.hasOwnProperty("$$class"))return u.$$class}}function j(u){if(!u)return[];if(u.$$ancestors_cache_version===R.const_cache_version)return u.$$ancestors;var K,G,se,y=[];for(K=0,G=function x(u){return u.$$own_prepended_modules.concat([u]).concat(u.$$own_included_modules)}(u),se=G.length;K<se;K++)y.push(G[K]);if(u.$$super)for(K=0,se=(G=j(u.$$super)).length;K<se;K++)y.push(G[K]);return u.$$ancestors_cache_version=R.const_cache_version,u.$$ancestors=y,y}function O(u){return u.hasOwnProperty("$$meta")&&null!==u.$$meta?j(u.$$meta):j(u.$$class)}function te(u,y){"number"==typeof y?u.$$arity=y:"object"==typeof y&&Object.assign(u,y)}R.falsy=function(u){return!b(u)},R.type_error=function(u,y,K,G){u=u.$$class,T(R.TypeError,G&&K?"can't convert "+u+" into "+y+" ("+u+"#"+K+" gives "+(G=G.$$class)+")":"no implicit conversion of "+u+" into "+y)},R.coerce_to=function(u,y,K,G){var se;return"to_int"===K&&y===R.Integer&&u.$$is_number?u<0?Math.ceil(u):Math.floor(u):"to_str"===K&&y===R.String&&u.$$is_string||R.is_a(u,y)?u:u["$respond_to?"].$$pristine&&u.$method_missing.$$pristine?((null==(se=u[ae(K)])||se.$$stub)&&R.type_error(u,y),se.apply(u,G)):(u["$respond_to?"](K)||R.type_error(u,y),null==G&&(G=[]),R.send(u,K,G))},R.respond_to=function(u,y,K){if(null==u||!u.$$class)return!1;K=!!K;var G=u[y];return u["$respond_to?"].$$pristine?"function"==typeof G&&!G.$$stub||(u["$respond_to_missing?"].$$pristine?void 0:R.send(u,u["$respond_to_missing?"],[y.substr(1),K])):R.send(u,u["$respond_to?"],[y.substr(1),K])},R.trace_class=!1,R.tracers_for_class=[],R.const_get_local=function(u,y,K){var G;if(null!=u)return"::"===u&&(u=P),!u.$$is_module&&!u.$$is_class&&T(R.TypeError,u.toString()+" is not a class/module"),null!=(G=S(u,y))||K?G:z(u,y)},R.const_get_qualified=function(u,y,K){var G,se,$e,ce=R.const_cache_version;return null==y?(G=S(P,u))??R.const_get_qualified(P,u,K):null!=u?("::"===u&&(u=P),!u.$$is_module&&!u.$$is_class&&T(R.TypeError,u.toString()+" is not a class/module"),null==(se=u.$$const_cache)&&(I(u,"$$const_cache",Object.create(null)),se=u.$$const_cache),null==($e=se[y])||$e[0]!==ce?(null!=(G=S(u,y))||(G=p(u,y)),se[y]=[ce,G]):G=$e[1],null!=G||K?G:z(u,y)):void 0},R.const_cache_version=1,R.const_get_relative=function(u,y,K){var se,ce,fe,G=u[0],$e=R.const_cache_version;return null==(ce=u.$$const_cache)&&(I(u,"$$const_cache",Object.create(null)),ce=u.$$const_cache),null==(fe=ce[y])||fe[0]!==$e?(null!=(se=S(G,y))||null!=(se=function _(u,y){var K,G,se;if(0!==u.length)for(K=0,G=u.length;K<G;K++){if(null!=(se=u[K].$$const[y]))return se;if(u[K].$$autoload&&u[K].$$autoload[y])return q(u[K],y)}}(u,y))||null!=(se=p(G,y))||(se=function f(u,y){if(null==u||u.$$is_module)return p(P,y)}(G,y)),ce[y]=[$e,se]):se=fe[1],null!=se||K?se:z(G,y)},R.const_set=v,R.constants=function(u,y){null==y&&(y=!0);var K,se,$e,fe,G=[u],ce={};for(y&&(G=G.concat(j(u))),y&&u.$$is_module&&(G=G.concat([R.Object]).concat(j(R.Object))),se=0,$e=G.length;se<$e&&(K=G[se],u===P||K!=P);se++){for(fe in K.$$const)ce[fe]=!0;if(K.$$autoload)for(fe in K.$$autoload)ce[fe]=!0}return Object.keys(ce)},R.const_remove=function(u,y){if(R.const_cache_version++,null!=u.$$const[y]){var K=u.$$const[y];return delete u.$$const[y],K}if(u.$$autoload&&u.$$autoload[y])return delete u.$$autoload[y],re;T(R.NameError,"constant "+u+"::"+u.$name()+" not defined")},R.const_get_relative_factory=function(u){return function(y,K){return R.$$(u,y,K)}},R.$$=R.const_get_relative,R.$$$=R.const_get_qualified,R.$r=R.const_get_relative_factory,R.allocate_class=N,R.klass=function(u,y,K){var G;null==u||"::"==u?u=P:!u.$$is_class&&!u.$$is_module&&(u=u.$$class),null!=y&&(!y.hasOwnProperty||y.hasOwnProperty&&!y.hasOwnProperty("$$is_class"))&&(y.constructor&&"Function"==y.constructor.name?(G=y,y=P):T(R.TypeError,"superclass must be a Class ("+(y.constructor&&(y.constructor.name||y.constructor.$$name)||typeof y)+" given)"));var se=function h(u,y){var K=S(u,y);if(K)return K.$$is_class||T(R.TypeError,y+" is not a class"),K}(u,K);return null!=se?y&&function M(u,y){u.$$super!==y&&T(R.TypeError,"superclass mismatch for class "+u.$$name)}(se,y):(null==y&&(y=P),v(u,K,se=N(K,y)),y.$inherited&&y.$inherited(se),G&&R.bridge(G,se)),R.trace_class&&g(se),se},R.allocate_module=m,R.module=function(u,y){var K;return null==u||"::"==u?u=P:!u.$$is_class&&!u.$$is_module&&(u=u.$$class),K=function d(u,y){var K=S(u,y);return null==K&&u===P&&(K=p(P,y)),K&&!K.$$is_module&&K!==P&&T(R.TypeError,y+" is not a module"),K}(u,y),null==K&&v(u,y,K=m(y)),R.trace_class&&g(K),K},R.get_singleton_class=function(u){return u.$$is_number&&T(R.TypeError,"can't define singleton"),u.$$meta?u.$$meta:u.hasOwnProperty("$$is_class")?R.build_class_singleton_class(u):u.hasOwnProperty("$$is_module")?R.build_module_singleton_class(u):R.build_object_singleton_class(u)},R.build_class_singleton_class=function(u){if(u.$$meta)return u.$$meta;var K=N(null,u===$?E:R.get_singleton_class(u.$$super),!0);return I(K,"$$is_singleton",!0),I(K,"$$singleton_of",u),a(u,K),I(u,"$$class",R.Class),K},R.build_module_singleton_class=function(u){if(u.$$meta)return u.$$meta;var y=N(null,R.Module,!0);return I(y,"$$is_singleton",!0),I(y,"$$singleton_of",u),a(u,y),I(u,"$$class",R.Module),y},R.build_object_singleton_class=function(u){var K=N(re,u.$$class,!0);return I(K,"$$is_singleton",!0),I(K,"$$singleton_of",u),delete K.$$prototype.$$class,a(u,K),K},R.is_method=function(u){return"$"===u[0]&&"$"!==u[1]},R.instance_methods=function(u){for(var y=[],K=[],G=j(u),se=0,$e=G.length;se<$e;se++){var fe=G[se].$$prototype;fe.hasOwnProperty("$$dummy")&&(fe=fe.$$define_methods_on);for(var _e=Object.getOwnPropertyNames(fe),de=0,me=_e.length;de<me;de++){var he=_e[de];if(R.is_method(he)){var ge=he.slice(1),ve=fe[he];ve.$$stub&&-1===y.indexOf(ge)&&y.push(ge),!ve.$$stub&&-1===K.indexOf(ge)&&-1===y.indexOf(ge)&&K.push(ge)}}}return K},R.own_instance_methods=function(u){var y=[],K=u.$$prototype;K.hasOwnProperty("$$dummy")&&(K=K.$$define_methods_on);for(var G=Object.getOwnPropertyNames(K),se=0,$e=G.length;se<$e;se++){var ce=G[se];if(R.is_method(ce)&&!K[ce].$$stub){var _e=ce.slice(1);y.push(_e)}}return y},R.methods=function(u){return R.instance_methods(u.$$meta||u.$$class)},R.own_methods=function(u){return u.$$meta?R.own_instance_methods(u.$$meta):[]},R.receiver_methods=function(u){var y=R.get_singleton_class(u),K=R.own_instance_methods(y),G=R.own_instance_methods(y.$$super);return K.concat(G)},R.class_variables=function(u){var K,y=j(u),se={};for(K=y.length-1;K>=0;K--){var $e=y[K];for(var ce in $e.$$cvars)se[ce]=$e.$$cvars[ce]}return se},R.class_variable_set=function(u,y,K){var se,G=j(u);for(se=G.length-2;se>=0;se--){var ce=G[se];if(Z(ce.$$cvars,y))return ce.$$cvars[y]=K,K}return u.$$cvars[y]=K,K},R.class_variable_get=function(u,y,K){if(Z(u.$$cvars,y))return u.$$cvars[y];var se,G=j(u),$e=G.length;for(se=0;se<$e;se++){var ce=G[se];if(Z(ce.$$cvars,y))return ce.$$cvars[y]}return K||T(R.NameError,"uninitialized class variable "+y+" in "+u.$name()),re},R.append_features=function(u,y){var K=j(u),G=[];-1!==K.indexOf(y)&&T(R.ArgumentError,"cyclic include detected");for(var se=0,$e=K.length;se<$e;se++){var fe=n(K[se]);I(fe,"$$included",!0),G.push(fe)}var me,he,_e=j(y),de=c(G);if(-1===_e.indexOf(u))me=y.$$prototype,he=Object.getPrototypeOf(y.$$prototype);else{for(var ge=y.$$prototype,ve=Object.getPrototypeOf(ge);null!=ve&&(ve.$$module!==u||!r(ve));)ge=ve,ve=Object.getPrototypeOf(ve);if(ve){for(var pe=Object.getPrototypeOf(ve);pe.hasOwnProperty("$$iclass")&&!r(pe);)pe=Object.getPrototypeOf(pe);me=ge,he=pe}else me=y.$$prototype,he=Object.getPrototypeOf(y.$$prototype)}W(me,de.first),W(de.last,he),y.$$own_included_modules=function e(u){for(var K,y=[],G=Object.getPrototypeOf(u.$$prototype);G&&!G.hasOwnProperty("$$class");)(K=o(G))&&y.push(K),G=Object.getPrototypeOf(G);return y}(y),R.const_cache_version++},R.prepend_features=function(u,y){var K=j(u),G=[];-1!==K.indexOf(y)&&T(R.ArgumentError,"cyclic prepend detected");for(var se=0,$e=K.length;se<$e;se++){var fe=n(K[se]);I(fe,"$$prepended",!0),G.push(fe)}var he,ge,ve,_e=c(G),de=y.$$prototype,me=Object.getPrototypeOf(de);if(de.hasOwnProperty("$$dummy")?he=de.$$define_methods_on:(he=i(y),function t(u){for(var y=u.$$prototype,K=Object.getOwnPropertyNames(y),G=0;G<K.length;G++){var se=K[G];R.is_method(se)&&delete y[se]}}(y),I(de,"$$dummy",!0),I(de,"$$define_methods_on",he),W(de,he),W(he,me)),-1===j(y).indexOf(u))for(ge=de,ve=Object.getPrototypeOf(de);null!=ve&&!ve.hasOwnProperty("$$root")&&ve!==he&&ve.hasOwnProperty("$$iclass");)ve=Object.getPrototypeOf(ve);else T(R.RuntimeError,"Prepending a module multiple times is not supported");W(ge,_e.first),W(_e.last,ve),y.$$own_prepended_modules=function s(u){var K,y=[],G=Object.getPrototypeOf(u.$$prototype);if(u.$$prototype.hasOwnProperty("$$dummy"))for(;G&&G!==u.$$prototype.$$define_methods_on;)(K=o(G))&&y.push(K),G=Object.getPrototypeOf(G);return y}(y),R.const_cache_version++},R.bridge=function(u,y){u.hasOwnProperty("$$bridge")&&T(R.ArgumentError,"already bridged"),I(u,"$$bridge",y),W(u.prototype,(y.$$super||R.Object).$$prototype),I(y,"$$prototype",u.prototype),I(y.$$prototype,"$$class",y),I(y,"$$constructor",u),I(y,"$$bridge",!0)},R.ancestors=j,R.included_modules=function(u){for(var y=[],K=null,G=Object.getPrototypeOf(u.$$prototype);G&&Object.getPrototypeOf(G);G=Object.getPrototypeOf(G))(K=o(G))&&K.$$is_module&&G.$$iclass&&G.$$included&&y.push(K);return y},R.add_stubs=function(u){for(var K,G,y=R.BasicObject.$$prototype,se=0,$e=(u=u.split(",")).length;se<$e;se++)(null==(G=y[K=ae(u[se])])||G.$$stub)&&R.add_stub_for(y,K)},R.add_stub_for=function(u,y){I(u,y,R.stub_for(y))},R.stub_for=function(u){function y(){this.$method_missing.$$p=y.$$p,y.$$p=null;for(var K=new Array(arguments.length),G=0,se=K.length;G<se;G++)K[G]=arguments[G];return this.$method_missing.apply(this,[u.slice(1)].concat(K))}return y.$$stub=!0,y},R.ac=function(u,y,K,G){var se="";se+=K.$$is_a_module?K.$$name+".":K.$$class.$$name+"#",T(R.ArgumentError,"["+(se+=G)+"] wrong number of arguments (given "+u+", expected "+y+")")},R.block_ac=function(u,y,K){T(R.ArgumentError,"`block in "+K+"': wrong number of arguments (given "+u+", expected "+y+")")},R.find_super=function(u,y,K,G,se){for(var ce,fe,$e=ae(y),de=(ce=O(u)).indexOf(K.$$owner)+1;de<ce.length;de++){var he=ce[de].$$prototype;if(he.hasOwnProperty("$$dummy")&&(he=he.$$define_methods_on),he.hasOwnProperty($e)){fe=he[$e];break}}return!G&&fe&&fe.$$stub&&u.$method_missing.$$pristine&&T(R.NoMethodError,"super: no superclass method `"+y+"' for "+u,y),fe.$$stub&&!se?null:fe},R.find_block_super=function(u,y,K,G,se){var $e=y;return K||T(R.RuntimeError,"super called outside of method"),se&&K.$$define_meth&&T(R.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),K.$$def&&($e=K.$$jsid),R.find_super(u,$e,K,G)},R.find_super_dispatcher=R.find_super,R.find_iter_super_dispatcher=R.find_block_super,R.yield1=function(u,y){"function"!=typeof u&&T(R.LocalJumpError,"no block given");var G=u.$$has_trailing_comma_in_args;return(u.length>1||(u.$$has_top_level_mlhs_arg||G)&&1===u.length)&&(y=R.to_ary(y)),(u.length>1||G&&1===u.length)&&y.$$is_array?u.apply(null,y):u(y)},R.yieldX=function(u,y){if("function"!=typeof u&&T(R.LocalJumpError,"no block given"),u.length>1&&1===y.length&&y[0].$$is_array)return u.apply(null,y[0]);if(!y.$$is_array){for(var K=new Array(y.length),G=0,se=K.length;G<se;G++)K[G]=y[G];return u.apply(null,K)}return u.apply(null,y)},R.rescue=function(u,y){for(var K=0;K<y.length;K++){var G=y[K];if(G.$$is_array){var se=R.rescue(u,G);if(se)return se}else if(G===R.JS.Error||G["$==="](u))return G}return null},R.is_a=function(u,y){return null!=y&&u.$$meta===y||u.$$class===y||(u.$$is_number&&y.$$is_number_class?!y.$$is_integer_class||u%1==0:-1!==j(u.$$is_class?R.get_singleton_class(u):u.$$meta||u.$$class).indexOf(y))},R.to_hash=function(u){if(u.$$is_hash)return u;if(u["$respond_to?"]("to_hash",!0)){var y=u.$to_hash();if(y.$$is_hash)return y;T(R.TypeError,"Can't convert "+u.$$class+" to Hash ("+u.$$class+"#to_hash gives "+y.$$class+")")}else T(R.TypeError,"no implicit conversion of "+u.$$class+" into Hash")},R.to_ary=function(u){if(u.$$is_array)return u;if(!u["$respond_to?"]("to_ary",!0))return[u];var y=u.$to_ary();return y===re?[u]:y.$$is_array?y:void T(R.TypeError,"Can't convert "+u.$$class+" to Array ("+u.$$class+"#to_ary gives "+y.$$class+")")},R.to_a=function(u){if(u.$$is_array)return u.slice();if(!u["$respond_to?"]("to_a",!0))return[u];var y=u.$to_a();return y===re?[u]:y.$$is_array?y:void T(R.TypeError,"Can't convert "+u.$$class+" to Array ("+u.$$class+"#to_a gives "+y.$$class+")")},R.extract_kwargs=function(u){var y=u[u.length-1];if(null!=y&&R.respond_to(y,"$to_hash",!0))return L(u,u.length-1),y},R.kwrestargs=function(u,y){var se,K=[],G={},$e=u.$$smap;for(se in $e)y[se]||(K.push(se),G[se]=$e[se]);return R.hash2(K,G)};var ne=new Map;function ae(u){var y=ne.get(u);return y||ne.set(u,y="$"+u),y}function le(u){return"function"==typeof u&&!u.$$stub}R.jsid=ae,R.send=function(u,y,K,G,se){var $e;return"function"==typeof y?($e=y,y=null):"string"==typeof y?$e=u[ae(y)]:T(R.NameError,"Passed method should be a string or a function"),R.send2(u,$e,y,K,G,se)},R.send2=function(u,y,K,G,se,$e){return null==y&&null!=K&&u.$method_missing&&(y=u.$method_missing,G=[K].concat(G)),te(se,$e),"function"==typeof se&&(y.$$p=se),y.apply(u,G)},R.refined_send=function(u,y,K,G,se,$e){var ce,fe,_e,de,me,he,ge,ve,pe,be;for(de=O(y),ce=0;ce<de.length;ce++)for(me=R.id(de[ce]),fe=0;fe<u.length;fe++)for(_e=(he=u[fe]).length-1;_e>=0;_e--)if(!(typeof(ge=he[_e]).$$refine_modules>"u")&&!(typeof(ve=ge.$$refine_modules)[me]>"u")&&typeof(pe=ve[me]).$$prototype[ae(K)]<"u")return be=pe.$$prototype[ae(K)],R.send2(y,be,K,G,se,$e);return R.send(y,K,G,se,$e)},R.lambda=function(u,y){return u.$$is_lambda=!0,te(u,y),u},R.def=function(u,y,K,G){return te(K,G),u===R.top?R.defn(R.Object,y,K):!u.$$eval&&u.$$is_a_module?R.defn(u,y,K):R.defs(u,y,K)},R.defn=function(u,y,K){ue(u),K.displayName=y,K.$$owner=u;var G=y.substr(1),se=u.$$prototype;if(se.hasOwnProperty("$$dummy")&&(se=se.$$define_methods_on),I(se,y,K),u.$$is_module){u.$$module_function&&R.defs(u,y,K);for(var $e=0,ce=u.$$iclasses,fe=ce.length;$e<fe;$e++)I(ce[$e],y,K)}var de=u.$$singleton_of;return!u.$method_added||u.$method_added.$$stub||de?de&&de.$singleton_method_added&&!de.$singleton_method_added.$$stub&&de.$singleton_method_added(G):u.$method_added(G),G},R.defs=function(u,y,K,G){return te(K,G),(u.$$is_string||u.$$is_number)&&T(R.TypeError,"can't define singleton"),R.defn(R.get_singleton_class(u),y,K)},R.rdef=function(u,y){Z(u.$$prototype,y)||T(R.NameError,"method '"+y.substr(1)+"' not defined in "+u.$name()),delete u.$$prototype[y],u.$$is_singleton?u.$$prototype.$singleton_method_removed&&!u.$$prototype.$singleton_method_removed.$$stub&&u.$$prototype.$singleton_method_removed(y.substr(1)):u.$method_removed&&!u.$method_removed.$$stub&&u.$method_removed(y.substr(1))},R.udef=function(u,y){(!u.$$prototype[y]||u.$$prototype[y].$$stub)&&T(R.NameError,"method '"+y.substr(1)+"' not defined in "+u.$name()),R.add_stub_for(u.$$prototype,y),u.$$is_singleton?u.$$prototype.$singleton_method_undefined&&!u.$$prototype.$singleton_method_undefined.$$stub&&u.$$prototype.$singleton_method_undefined(y.substr(1)):u.$method_undefined&&!u.$method_undefined.$$stub&&u.$method_undefined(y.substr(1))},R.alias=function(u,y,K){var $e,ce,G=ae(y),se=ae(K);if(typeof u.$$prototype>"u"&&(u=R.Object),$e=u.$$prototype[se],u.$$eval)return R.alias(R.get_singleton_class(u),y,K);if(!le($e)){for(var fe=u.$$super;"function"!=typeof $e&&fe;)$e=fe[se],fe=fe.$$super;!le($e)&&u.$$is_module&&($e=R.Object.$$prototype[se]),le($e)||T(R.NameError,"undefined method `"+K+"' for class `"+u.$name()+"'")}$e.$$alias_of&&($e=$e.$$alias_of),ce=function(){var de,me,he,_e=ce.$$p;for(de=new Array(arguments.length),me=0,he=arguments.length;me<he;me++)de[me]=arguments[me];return ce.$$p=null,R.send(this,$e,de,_e)};try{Object.defineProperty(ce,"length",{value:$e.length})}catch{}return ce.displayName=y,ce.$$arity=null==$e.$$arity?$e.length:$e.$$arity,ce.$$parameters=$e.$$parameters,ce.$$source_location=$e.$$source_location,ce.$$alias_of=$e,ce.$$alias_name=y,R.defn(u,G,ce),u},R.alias_gvar=function(u,y){return Object.defineProperty(k,u,{configurable:!0,enumerable:!0,get:function(){return k[y]},set:function(K){k[y]=K}}),re},R.alias_native=function(u,y,K){var G=ae(y),se=u.$$prototype[K];return("function"!=typeof se||se.$$stub)&&T(R.NameError,"undefined native method `"+K+"' for class `"+u.$name()+"'"),R.defn(u,G,se),u},R.hash_init=function(u){u.$$smap=Object.create(null),u.$$map=Object.create(null),u.$$keys=[]},R.hash_clone=function(u,y){y.$$none=u.$$none,y.$$proc=u.$$proc;for(var ce,fe,K=0,G=u.$$keys,se=u.$$smap,$e=G.length;K<$e;K++)(ce=G[K]).$$is_string?fe=se[ce]:(fe=ce.value,ce=ce.key),R.hash_put(y,ce,fe)},R.hash_put=function(u,y,K){if(y.$$is_string)return Z(u.$$smap,y)||u.$$keys.push(y),void(u.$$smap[y]=K);var G,se,$e;if(G=u.$$by_identity?R.id(y):y.$hash(),!Z(u.$$map,G))return u.$$keys.push(se={key:y,key_hash:G,value:K}),void(u.$$map[G]=se);for(se=u.$$map[G];se;){if(y===se.key||y["$eql?"](se.key)){$e=void 0,se.value=K;break}$e=se,se=se.next}$e&&(u.$$keys.push(se={key:y,key_hash:G,value:K}),$e.next=se)},R.hash_get=function(u,y){if(y.$$is_string)return Z(u.$$smap,y)?u.$$smap[y]:void 0;var K,G;if(K=u.$$by_identity?R.id(y):y.$hash(),Z(u.$$map,K))for(G=u.$$map[K];G;){if(y===G.key||y["$eql?"](G.key))return G.value;G=G.next}},R.hash_delete=function(u,y){var K,$e,ce,G=u.$$keys,se=G.length;if(y.$$is_string){if("string"!=typeof y&&(y=y.valueOf()),!Z(u.$$smap,y))return;for(K=0;K<se;K++)if((ce=G[K]).$$is_string&&"string"!=typeof ce&&(ce=ce.valueOf()),ce===y){G.splice(K,1);break}return $e=u.$$smap[y],delete u.$$smap[y],$e}var fe=y.$hash();if(Z(u.$$map,fe))for(var de,_e=u.$$map[fe];_e;){if(y===_e.key||y["$eql?"](_e.key)){for($e=_e.value,K=0;K<se;K++)if(G[K]===_e){G.splice(K,1);break}return de&&_e.next?de.next=_e.next:de?delete de.next:_e.next?u.$$map[fe]=_e.next:delete u.$$map[fe],$e}de=_e,_e=_e.next}},R.hash_rehash=function(u){for(var G,se,$e,y=0,K=u.$$keys.length;y<K;y++)if(!u.$$keys[y].$$is_string&&(G=u.$$keys[y].key.$hash())!==u.$$keys[y].key_hash){for(se=u.$$map[u.$$keys[y].key_hash],$e=void 0;se;){if(se===u.$$keys[y]){$e&&se.next?$e.next=se.next:$e?delete $e.next:se.next?u.$$map[u.$$keys[y].key_hash]=se.next:delete u.$$map[u.$$keys[y].key_hash];break}$e=se,se=se.next}if(u.$$keys[y].key_hash=G,!Z(u.$$map,G)){u.$$map[G]=u.$$keys[y];continue}for(se=u.$$map[G],$e=void 0;se;){if(se===u.$$keys[y]){$e=void 0;break}$e=se,se=se.next}$e&&($e.next=u.$$keys[y])}},R.hash=function(){var y,K,G,se,$e,u=arguments.length;if(1===u&&arguments[0].$$is_hash)return arguments[0];if(K=new R.Hash,R.hash_init(K),1===u){if(y=arguments[0],arguments[0].$$is_array){for(se=y.length,G=0;G<se;G++)2!==y[G].length&&T(R.ArgumentError,"value not of length 2: "+y[G].$inspect()),R.hash_put(K,$e=y[G][0],y[G][1]);return K}for($e in y=arguments[0])Z(y,$e)&&R.hash_put(K,$e,y[$e]);return K}for(u%2!=0&&T(R.ArgumentError,"odd number of arguments for Hash"),G=0;G<u;G+=2)R.hash_put(K,$e=arguments[G],arguments[G+1]);return K},R.hash2=function(u,y){var K=new R.Hash;return K.$$smap=y,K.$$map=Object.create(null),K.$$keys=u,K},R.range=function(u,y,K){var G=new R.Range;return G.begin=u,G.end=y,G.excl=K,G};var oe=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];function ue(u){u.$$frozen&&T(R.FrozenError,"can't modify frozen "+u.$class()+": "+u,R.hash2(["receiver"],{receiver:u}))}function ie(u,y){return"number"==typeof u&&"number"==typeof y}function X(u,y){return"number"==typeof u&&"number"==typeof y||"string"==typeof u&&"string"==typeof y}function V(u){return function(){return u}}R.ivar=function(u){return-1!==oe.indexOf(u)&&(u+="$"),u},R.deny_frozen_access=ue,R.freeze=function(u){return I(u,"$$frozen",!0),u.hasOwnProperty("$$id")||I(u,"$$id",F()),u.hasOwnProperty("$$meta")?u.$$meta.$freeze():I(u,"$$meta",null),u.hasOwnProperty("$$comparable")||I(u,"$$comparable",null),Object.seal(u),u},R.freeze_props=function(u){var y,K,G;for(y in u)("string"!=(K=typeof y)&&"object"!==K||"$"!==y[0])&&(G=Object.getOwnPropertyDescriptor(u,y))&&G.enumerable&&G.writable&&function(){var se=u[y];Object.defineProperty(u,y,{get:function(){return se},set:function($e){ue(u)},enumerable:!0})}()},R.escape_regexp=function(u){return u.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},R.global_regexp=function(u){return u.global?u:(null==u.$$g?u.$$g=new RegExp(u.source,(u.multiline?"gm":"g")+(u.ignoreCase?"i":"")):u.$$g.lastIndex=null,u.$$g)},R.global_multiline_regexp=function(u){var y,K;return u.global&&u.multiline?u:(K="gm"+(u.ignoreCase?"i":""),u.multiline?(null==u.$$g&&(u.$$g=new RegExp(u.source,K)),y=u.$$g):(null==u.$$gm&&(u.$$gm=new RegExp(u.source,K)),y=u.$$gm),y.lastIndex=null,y)},R.regexp=function(u,y){for(var K,G=typeof y<"u"&&y&&y.indexOf("i")>=0,se=0,$e=u.length;se<$e;se++)(K=u[se])instanceof RegExp&&(K.ignoreCase!==G&&R.Kernel.$warn("ignore case doesn't match for "+K.source.$inspect(),R.hash({uplevel:1})),K=K.source),""===K&&(K="(?:"+K+")"),u[se]=K;return y?new RegExp(u.join(""),y):new RegExp(u.join(""))},R.modules={},R.loaded_features=["corelib/runtime"],R.current_dir=".",R.require_table={"corelib/runtime":!0},R.normalize=function(u){var y,K,G=[];"."!==R.current_dir&&(u=R.current_dir.replace(/\/*$/,"/")+u);for(var $e=0,ce=(y=(u=(u=u.replace(/^\.\//,"")).replace(/\.(rb|opal|js)$/,"")).split("/")).length;$e<ce;$e++)""!==(K=y[$e])&&(".."===K?G.pop():G.push(K));return G.join("/")},R.loaded=function(u){var y,K,G;for(y=0,K=u.length;y<K;y++)G=R.normalize(u[y]),!R.require_table[G]&&(R.loaded_features.push(G),R.require_table[G]=!0)},R.load_normalized=function(u){R.loaded([u]);var y=R.modules[u];if(y){var K=y(R);if(typeof Promise<"u"&&K instanceof Promise)return K.then(V(!0))}else{var G=R.config.missing_require_severity,se="cannot load such file -- "+u;"error"===G?T(R.LoadError,se):"warning"===G&&ee.warn("WARNING: LoadError: "+se)}return!0},R.load=function(u){return u=R.normalize(u),R.load_normalized(u)},R.require=function(u){return u=R.normalize(u),!R.require_table[u]&&R.load_normalized(u)},R.encodings=Object.create(null),R.set_encoding=function(u,y,K){typeof K>"u"&&(K="encoding"),("string"==typeof u||!0===u.$$frozen)&&T(R.FrozenError,"can't modify frozen String");var G=R.find_encoding(y);return G===u[K]||(u[K]=G),u},R.find_encoding=function(u){var y=R.encodings,K=y[u]||y[u.toUpperCase()];return K||T(R.ArgumentError,"unknown encoding name - "+u),K},R.enc=function(u,y){var K=new String(u);return(K=R.set_encoding(K,y)).internal_encoding=K.encoding,K},R.binary=function(u){var y=new String(u);return R.set_encoding(y,"binary","internal_encoding")},R.last_promise=null,R.promise_unhandled_exception=!1,R.queue=function(u){if(R.last_promise)return R.last_promise=R.last_promise.then(function(){if(!R.promise_unhandled_exception)return u(R)}).catch(function(K){R.respond_to(K,"$full_message")&&(K=K.$full_message()),ee.error(K),R.promise_unhandled_exception=!0,R.exit(1)}),R.last_promise;var y=u(R);return"function"==typeof Promise&&"object"==typeof y&&y instanceof Promise&&(R.last_promise=y),y},R.rb_plus=function(u,y){return ie(u,y)?u+y:u["$+"](y)},R.rb_minus=function(u,y){return ie(u,y)?u-y:u["$-"](y)},R.rb_times=function(u,y){return ie(u,y)?u*y:u["$*"](y)},R.rb_divide=function(u,y){return ie(u,y)?u/y:u["$/"](y)},R.rb_lt=function(u,y){return ie(u,y)?u<y:u["$<"](y)},R.rb_gt=function(u,y){return ie(u,y)?u>y:u["$>"](y)},R.rb_le=function(u,y){return ie(u,y)?u<=y:u["$<="](y)},R.rb_ge=function(u,y){return ie(u,y)?u>=y:u["$>="](y)},R.eqeq=function D(u,y){return X(u,y)?u===y:b(u["$=="](y))},R.eqeqeq=function(u,y){return X(u,y)?u===y:b(u["$==="](y))},R.neqeq=function(u,y){return X(u,y)?u!==y:b(u["$!="](y))},R.not=function(u){return null==u||!1===u||re===u||!0!==u&&!u["$!"].$$pristine&&b(u["$!"]())},R.return_val=V,R.return_self=function(){return this},R.return_ivar=function(u){return function(){return null==this[u]?re:this[u]}},R.assign_ivar=function(u){return function(y){return ue(this),this[u]=y}},R.assign_ivar_val=function(u,y){return function(){return ue(this),this[u]=y}},R.ensure_kwargs=function(u){return null==u?R.hash2([],{}):u.$$is_hash?u:void T(R.ArgumentError,"expected kwargs")},R.get_kwarg=function(u,y){return Z(u.$$smap,y)||T(R.ArgumentError,"missing keyword: "+y),u.$$smap[y]},R.large_array_unpack=function(u){var G,y=u.split(","),K=y.length;for(G=0;G<K;G++)switch(y[G][0]){case void 0:y[G]=re;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":y[G]=+y[G]}return y},R.BasicObject=$=N("BasicObject",null),R.Object=P=N("Object",R.BasicObject),R.Module=Q=N("Module",R.Object),R.Class=E=N("Class",R.Module),R.Opal=C=m("Opal"),R.Kernel=B=m("Kernel"),W(R.BasicObject,R.Class.$$prototype),W(R.Object,R.Class.$$prototype),W(R.Module,R.Class.$$prototype),W(R.Class,R.Class.$$prototype),$.$$const.BasicObject=$,v(P,"BasicObject",$),v(P,"Object",P),v(P,"Module",Q),v(P,"Class",E),v(P,"Opal",C),v(P,"Kernel",B),$.$$class=E,P.$$class=E,Q.$$class=E,E.$$class=E,C.$$class=Q,B.$$class=Q,I(P.$$prototype,"toString",function(){var u=this.$to_s();return u.$$is_string&&"object"==typeof u?u.valueOf():u}),I(P.$$prototype,"$require",R.require),R.top=new P,R.top.$to_s=R.top.$inspect=V("main"),R.top.$define_method=function J(){var u=U(arguments),y=J.$$p;return J.$$p=null,R.send(P,"define_method",u,y)},R.NilClass=N("NilClass",R.Object),v(P,"NilClass",R.NilClass),(re=R.nil=new R.NilClass).$$id=4,re.call=re.apply=function(){T(R.LocalJumpError,"no block given")},re.$$frozen=!0,re.$$comparable=!1,Object.seal(re),R.thrower=function(u){var y=new Error("unexpected "+u);return y.$thrower_type=u,y.$throw=function(K){throw null==K&&(K=re),y.$v=K,y},y},R.t_eval_return=R.thrower("return"),TypeError.$$super=Error,R.file_sources={}}).call(this),Opal.loaded(["corelib/runtime.js"]),Opal.modules["corelib/helpers"]=function(l){var ee=l.type_error,re=l.coerce_to,$=l.module,P=l.defs,Q=l.slice,E=l.eqeqeq,C=l.Kernel,B=l.truthy,R=l.Opal,Y=l.nil,H=l.$$$;return function(Z){var W=$("::","Opal");P(W,"$bridge",function(w,A){return l.bridge(w,A)}),P(W,"$coerce_to!",function(w,A,F,k){var T,b;return T=Q(arguments,3),b=re(w,A,F,T),E(A,b)||C.$raise(ee(w,A,F,b)),b},-4),P(W,"$coerce_to?",function(w,A,F,k){var I,b=Y;return I=Q(arguments,3),!B(w["$respond_to?"](F))||(b=re(w,A,F,I),B(b["$nil?"]()))?Y:(E(A,b)||C.$raise(ee(w,A,F,b)),b)},-4),P(W,"$try_convert",function(w,A,F){return E(A,w)?w:B(w["$respond_to?"](F))?w.$__send__(F):Y}),P(W,"$compare",function(w,A){var F;return F=w["$<=>"](A),B(F===Y)&&C.$raise(H("ArgumentError"),"comparison of "+w.$class()+" with "+A.$class()+" failed"),F}),P(W,"$destructure",function(w){if(1==w.length)return w[0];if(w.$$is_array)return w;for(var A=new Array(w.length),F=0,k=A.length;F<k;F++)A[F]=w[F];return A}),P(W,"$respond_to?",function(w,A,F){return null==F&&(F=!1),!(null==w||!w.$$class)&&w["$respond_to?"](A,F)},-3),P(W,"$instance_variable_name!",function(w){return w=R["$coerce_to!"](w,H("String"),"to_str"),B(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(w))||C.$raise(H("NameError").$new("'"+w+"' is not allowed as an instance variable name",w)),w}),P(W,"$class_variable_name!",function(w){return w=R["$coerce_to!"](w,H("String"),"to_str"),B(w.length<3||"@@"!==w.slice(0,2))&&C.$raise(H("NameError").$new("`"+w+"' is not allowed as a class variable name",w)),w}),P(W,"$const_name?",function(w){return"string"!=typeof w&&(w=R["$coerce_to!"](w,H("String"),"to_str")),w[0]===w[0].toUpperCase()}),P(W,"$const_name!",function(w){return B(H("::","String","skip_raise")?"constant":Y)&&(w=R["$coerce_to!"](w,H("String"),"to_str")),(!w||w[0]!=w[0].toUpperCase())&&this.$raise(H("NameError"),"wrong constant name "+w),w}),P(W,"$pristine",function(w,A){for(var k,I,b=(k=Q(arguments,1)).length-1;b>=0;b--)(I=w.$$prototype[l.jsid(k[b])])&&!I.$$stub&&(I.$$pristine=!0);return Y},-2);var U=[];return P(W,"$inspect",function(w){var F=!1;return function(){try{try{return null===w?"null":void 0===w?"undefined":typeof w.$$class>"u"?Object.prototype.toString.apply(w):"function"!=typeof w.$inspect||w.$inspect.$$stub||-1!==U.indexOf(w.$__id__())?"#<"+w.$$class+":0x"+w.$__id__().$to_s(16)+">":(U.push(w.$__id__()),F=!0,w.$inspect())}catch(k){if(!l.rescue(k,[H("Exception")]))throw k;try{return"#<"+w.$$class+":0x"+w.$__id__().$to_s(16)+">"}finally{l.pop_exception()}}}finally{F&&U.pop()}}()},-1)}()},Opal.modules["corelib/module"]=function(l){var r,e,s,t,ee=l.truthy,re=l.coerce_to,$=l.const_set,P=l.Object,Q=l.return_ivar,E=l.assign_ivar,C=l.ivar,B=l.deny_frozen_access,R=l.freeze,Y=l.prop,H=l.jsid,Z=l.klass,W=l.defs,U=l.send,L=l.def,w=l.eqeqeq,A=l.Module,F=l.Kernel,k=l.rb_lt,T=l.rb_gt,I=l.slice,b=l.to_a,g=l.hash2,q=l.Opal,S=l.return_val,_=l.eqeq,p=l.lambda,f=l.range,z=l.send2,v=l.find_super,N=l.alias,M=l.nil,m=l.$$$;return r=[],e=Z("::",null,"Module"),s=[e].concat(r),t=l.$r(s),W(e,"$allocate",function(){var c=l.allocate_module(M,function(){});return this!==l.Module&&Object.setPrototypeOf(c,this.$$prototype),c}),L(e,"$initialize",function n(){var i=n.$$p||M;return n.$$p=null,i!==M?U(this,"module_eval",[],i.$to_proc()):M}),L(e,"$===",function(i){return!ee(null==i)&&l.is_a(i,this)}),L(e,"$<",function(i){var x,j,O,c=this;if(w(A,i)||F.$raise(m("TypeError"),"compared with non class/module"),c===i)return!1;for(j=0,O=(x=l.ancestors(c)).length;j<O;j++)if(x[j]===i)return!0;for(j=0,O=(x=l.ancestors(i)).length;j<O;j++)if(x[j]===c)return!1;return M}),L(e,"$<=",function(i){var o;return ee(o=this["$equal?"](i))?o:k(this,i)}),L(e,"$>",function(i){return w(A,i)||F.$raise(m("TypeError"),"compared with non class/module"),k(i,this)}),L(e,"$>=",function(i){var o;return ee(o=this["$equal?"](i))?o:T(this,i)}),L(e,"$<=>",function(i){var o=M;return this===i?0:!w(A,i)||(o=k(this,i),ee(o["$nil?"]()))?M:ee(o)?-1:1}),L(e,"$alias_method",function(i,c){var o=this;return B(o),i=re(i,m("String"),"to_str"),c=re(c,m("String"),"to_str"),l.alias(o,i,c),o}),L(e,"$alias_native",function(i,c){var o=this;return null==c&&(c=i),B(o),l.alias_native(o,i,c),o},-2),L(e,"$ancestors",function(){return l.ancestors(this)}),L(e,"$append_features",function(i){return B(i),l.append_features(this,i),this}),L(e,"$attr_accessor",function(i){var c,o;return c=I(arguments),U(this,"attr_reader",b(o=c)),U(this,"attr_writer",b(o))},-1),L(e,"$attr",function(i){var o,x=this;return 2!=(o=I(arguments)).length||!0!==o[1]&&!1!==o[1]?U(x,"attr_reader",b(o)):(x.$warn("optional boolean argument is obsoleted",g(["uplevel"],{uplevel:1})),o[1]?x.$attr_accessor(o[0]):x.$attr_reader(o[0]),M)},-1),L(e,"$attr_reader",function(i){var o,x=this;o=I(arguments),B(x);for(var j=x.$$prototype,O=o.length-1;O>=0;O--){var te=o[O],ne=H(te),ae=C(te),le=Q(ae);l.prop(j,ae,M),le.$$parameters=[],le.$$arity=0,l.defn(x,ne,le)}return M},-1),L(e,"$attr_writer",function(i){var o,x=this;o=I(arguments),B(x);for(var j=x.$$prototype,O=o.length-1;O>=0;O--){var te=o[O],ne=H(te+"="),ae=C(te),le=E(ae);le.$$parameters=[["req"]],le.$$arity=1,l.prop(j,ae,M),l.defn(x,ne,le)}return M},-1),L(e,"$autoload",function(i,c){var o=this;return B(o),t("Opal")["$const_name?"](i)||F.$raise(m("NameError"),"autoload must be constant name: "+i),""==c&&F.$raise(m("ArgumentError"),"empty file name"),o.$$const.hasOwnProperty(i)||(o.$$autoload||(o.$$autoload={}),l.const_cache_version++,o.$$autoload[i]={path:c,loaded:!1,required:!1,success:!1,exception:!1},o.$const_added&&!o.$const_added.$$pristine&&o.$const_added(i)),M}),L(e,"$autoload?",function(i){var c=this;if(c.$$autoload&&c.$$autoload[i]&&!c.$$autoload[i].required&&!c.$$autoload[i].success)return c.$$autoload[i].path;for(var o=c.$ancestors(),x=0,j=o.length;x<j;x++)if(o[x].$$autoload&&o[x].$$autoload[i]&&!o[x].$$autoload[i].required&&!o[x].$$autoload[i].success)return o[x].$$autoload[i].path;return M}),L(e,"$class_variables",function(){return Object.keys(l.class_variables(this))}),L(e,"$class_variable_get",function(i){return i=q["$class_variable_name!"](i),l.class_variable_get(this,i,!1)}),L(e,"$class_variable_set",function(i,c){return B(this),i=q["$class_variable_name!"](i),l.class_variable_set(this,i,c)}),L(e,"$class_variable_defined?",function(i){return i=q["$class_variable_name!"](i),l.class_variables(this).hasOwnProperty(i)}),L(e,"$const_added",S(M)),q.$pristine(e,"const_added"),L(e,"$remove_class_variable",function(i){var c=this;if(B(c),i=q["$class_variable_name!"](i),l.hasOwnProperty.call(c.$$cvars,i)){var o=c.$$cvars[i];return delete c.$$cvars[i],o}F.$raise(m("NameError"),"cannot remove "+i+" for "+c)}),L(e,"$constants",function(i){return null==i&&(i=!0),l.constants(this,i)},-1),W(e,"$constants",function(i){if(null==i){var x,O,te,o=(this.$$nesting||[]).concat(P),j={};for(O=0,te=o.length;O<te;O++)for(x in o[O].$$const)j[x]=!0;return Object.keys(j)}return l.constants(this,i)},-1),W(e,"$nesting",function(){return this.$$nesting||[]}),L(e,"$const_defined?",function(i,c){var o=this;null==c&&(c=!0),i=t("Opal")["$const_name!"](i),ee(i["$=~"](m(q,"CONST_NAME_REGEXP")))||F.$raise(m("NameError").$new("wrong constant name "+i,i));var x,te,ne,j=[o];for(c&&(j=j.concat(l.ancestors(o)),o.$$is_module&&(j=j.concat([P]).concat(l.ancestors(P)))),te=0,ne=j.length;te<ne;te++)if(null!=(x=j[te]).$$const[i]||x.$$autoload&&x.$$autoload[i]&&!x.$$autoload[i].required&&!x.$$autoload[i].success)return!0;return!1},-2),L(e,"$const_get",function(i,c){var o=this;return null==c&&(c=!0),0===(i=t("Opal")["$const_name!"](i)).indexOf("::")&&"::"!==i&&(i=i.slice(2)),ee(-1!=i.indexOf("::")&&"::"!=i)?U(i.$split("::"),"inject",[o],function(j,O){return null==j&&(j=M),null==O&&(O=M),j.$const_get(O)}):(ee(i["$=~"](m(q,"CONST_NAME_REGEXP")))||F.$raise(m("NameError").$new("wrong constant name "+i,i)),c?l.$$([o],i):l.const_get_local(o,i))},-2),L(e,"$const_missing",function(i){var o;return o=_(this,P)?i:this+"::"+i,F.$raise(m("NameError").$new("uninitialized constant "+o,i))}),L(e,"$const_set",function(i,c){return B(this),i=q["$const_name!"](i),(ee(i["$!~"](m(q,"CONST_NAME_REGEXP")))||ee(i["$start_with?"]("::")))&&F.$raise(m("NameError").$new("wrong constant name "+i,i)),$(this,i,c),c}),L(e,"$public_constant",S(M)),L(e,"$define_method",function n(i,c){var j,o=n.$$p||M,x=this,O=M;return n.$$p=null,B(x),void 0===c&&o===M&&F.$raise(m("ArgumentError"),"tried to create a Proc object without a block"),o=ee(j=o)?j:w(m("Proc"),O=c)?c:w(m("Method"),O)?c.$to_proc().$$unbound:w(m("UnboundMethod"),O)?p(function ne(ae){var oe,ie,ue=null==ne.$$s?this:ne.$$s;return oe=I(arguments),ie=c.$bind(ue),U(ie,"call",b(oe))},{$$arity:-1,$$s:x}):F.$raise(m("TypeError"),"wrong argument type "+o.$class()+" (expected Proc/Method)"),typeof Proxy<"u"&&(o.$$proxy_target=o,o=new Proxy(o,{apply:function(ne,ae,le){var oe=ne.$$jsid;ne.$$jsid=i;try{return ne.apply(ae,le)}catch(ue){if(ue===ne.$$brk||ue===ne.$$ret)return ue.$v;throw ue}finally{ne.$$jsid=oe}}})),o.$$jsid=i,o.$$s=null,o.$$def=o,o.$$define_meth=!0,l.defn(x,H(i),o)},-2),L(e,"$freeze",function(){var i=this;return ee(i["$frozen?"]())?i:(i.hasOwnProperty("$$base_module")||Y(i,"$$base_module",null),R(i))}),L(e,"$remove_method",function(i){var o,x=this;o=I(arguments);for(var j=0;j<o.length;j++){var O=o[j];"string"==typeof O||O.$$is_string||x.$raise(m("TypeError"),x.$name()+" is not a symbol nor a string"),B(x),l.rdef(x,"$"+O)}return x},-1),L(e,"$singleton_class?",function(){return!!this.$$is_singleton}),L(e,"$include",function(i){for(var o,x=this,j=(o=I(arguments)).length-1;j>=0;j--){var O=o[j];O.$$is_module||F.$raise(m("TypeError"),"wrong argument type "+O.$class()+" (expected Module)"),O.$append_features(x),O.$included(x)}return x},-1),L(e,"$included_modules",function(){return l.included_modules(this)}),L(e,"$include?",function(i){i.$$is_module||F.$raise(m("TypeError"),"wrong argument type "+i.$class()+" (expected Module)");var o,x,j,O=l.ancestors(this);for(o=0,x=O.length;o<x;o++)if((j=O[o])===i&&j!==this)return!0;return!1}),L(e,"$instance_method",function(i){var c=this,o=c.$$prototype[H(i)];return(!o||o.$$stub)&&F.$raise(m("NameError").$new("undefined method `"+i+"' for class `"+c.$name()+"'",i)),m("UnboundMethod").$new(c,o.$$owner||c,o,i)}),L(e,"$instance_methods",function(i){return null==i&&(i=!0),ee(i)?l.instance_methods(this):l.own_instance_methods(this)},-1),L(e,"$included",S(M)),L(e,"$extended",S(M)),L(e,"$extend_object",function(i){return B(i),M}),L(e,"$method_added",function(i){return I(arguments),M},-1),L(e,"$method_removed",function(i){return I(arguments),M},-1),L(e,"$method_undefined",function(i){return I(arguments),M},-1),L(e,"$module_eval",function n(i){var x,j,c=n.$$p||M,O=this,te=M,le=M,oe=M,ue=M,ie=M;n.$$p=null,x=I(arguments),ee(c["$nil?"]())&&ee(!!l.compile)?(ee(f(1,3,!1)["$cover?"](x.$size()))||F.$raise(m("ArgumentError"),"wrong number of arguments (0 for 1..3)"),te=null==(j=[].concat(b(x)))[0]?M:j[0],le=g(["file","eval"],{file:ee(oe=null==j[1]?M:j[1])?oe:"(eval)",eval:!0}),ue=l.hash({arity_check:!1}).$merge(le),ie=q.$compile(te,ue),c=U(F,"proc",[],function V(){var J=null==V.$$s?this:V.$$s;return new Function("Opal,self","return "+ie)(l,J)},{$$s:O})):ee(x["$any?"]())&&F.$raise(m("ArgumentError"),"wrong number of arguments ("+x.$size()+" for 0)\n\n  NOTE:If you want to enable passing a String argument please add \"require 'opal-parser'\" to your script\n");var D,X=c.$$s;return c.$$s=null,D=c.apply(O,[O]),c.$$s=X,D},-1),L(e,"$module_exec",function n(i){var x,c=n.$$p||M;n.$$p=null,x=I(arguments),c===M&&F.$raise(m("LocalJumpError"),"no block given");var te,O=c.$$s;return c.$$s=null,te=c.apply(this,x),c.$$s=O,te},-1),L(e,"$method_defined?",function(i){var o=this.$$prototype[H(i)];return!!o&&!o.$$stub}),L(e,"$module_function",function(i){var o,x=this;if(o=I(arguments),B(x),0===o.length)return x.$$module_function=!0,M;for(var j=0,O=o.length;j<O;j++){var ne=H(o[j]);l.defs(x,ne,x.$$prototype[ne])}return 1===o.length?o[0]:o},-1),L(e,"$name",function(){var i=this;if(i.$$full_name)return i.$$full_name;for(var c=[],o=i;o;){if(o.$$name===M||null==o.$$name)return M;if(c.unshift(o.$$name),(o=o.$$base_module)===P)break}return 0===c.length?M:i.$$full_name=c.join("::")}),L(e,"$prepend",function(i){var o,x=this;0===(o=I(arguments)).length&&F.$raise(m("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var j=o.length-1;j>=0;j--){var O=o[j];O.$$is_module||F.$raise(m("TypeError"),"wrong argument type "+O.$class()+" (expected Module)"),O.$prepend_features(x),O.$prepended(x)}return x},-1),L(e,"$prepend_features",function(i){var c=this;return B(i),c.$$is_module||F.$raise(m("TypeError"),"wrong argument type "+c.$class()+" (expected Module)"),l.prepend_features(c,i),c}),L(e,"$prepended",S(M)),L(e,"$remove_const",function(i){return B(this),l.const_remove(this,i)}),L(e,"$to_s",function(){var c,i=this;return ee(c=l.Module.$name.call(i))?c:"#<"+(i.$$is_module?"Module":"Class")+":0x"+i.$__id__().$to_s(16)+">"}),L(e,"$undef_method",function(i){var o,x=this;o=I(arguments);for(var j=0;j<o.length;j++){var O=o[j];"string"==typeof O||O.$$is_string||x.$raise(m("TypeError"),x.$name()+" is not a symbol nor a string"),B(x),l.udef(x,"$"+o[j])}return x},-1),L(e,"$instance_variables",function(){var i=this,c=M;l.Module.$$nesting=s,c=i.$constants();var o=[];for(var x in i)i.hasOwnProperty(x)&&"$"!==x.charAt(0)&&"constructor"!==x&&!c["$include?"](x)&&o.push("@"+x);return o}),L(e,"$dup",function n(){var i=n.$$p||M,c=this,o=M;return n.$$p=null,(o=z(c,v(c,"dup",n,!1,!0),"dup",[],i)).$copy_class_variables(c),o.$copy_constants(c),o}),L(e,"$copy_class_variables",function(i){for(var o in i.$$cvars)this.$$cvars[o]=i.$$cvars[o]}),L(e,"$copy_constants",function(i){var o,x=i.$$const;for(o in x)$(this,o,x[o])}),L(e,"$refine",function n(i){var o,j,te,c=n.$$p||M,x=this,O=M;return n.$$p=null,j=(o=[x,M,M])[0],O=o[1],te=l.id(i),typeof x.$$refine_modules>"u"&&(x.$$refine_modules=Object.create(null)),(O=typeof x.$$refine_modules[te]>"u"?x.$$refine_modules[te]=m("Refinement").$new():x.$$refine_modules[te]).refinement_module=j,O.refined_class=i,U(O,"class_exec",[],c.$to_proc()),O}),L(e,"$refinements",function(){var c=this.$$refine_modules,o=g([],{});if(typeof c>"u")return o;for(var x in c)o["$[]="](c[x].refined_class,c[x]);return o}),L(e,"$using",function(i){return F.$raise("Module#using is not permitted in methods")}),N(e,"class_eval","module_eval"),N(e,"class_exec","module_exec"),N(e,"inspect","to_s"),function(d,a){var r=Z("::",a,"Refinement"),e=r.$$prototype;return e.refinement_module=e.refined_class=M,r.$attr_reader("refined_class"),L(r,"$inspect",function s(){var t=s.$$p||M,n=this;return s.$$p=null,ee(n.refinement_module)?"#<refinement:"+n.refined_class.$inspect()+"@"+n.refinement_module.$inspect()+">":z(n,v(n,"inspect",s,!1,!0),"inspect",[],t)})}(0,A)},Opal.modules["corelib/class"]=function(l){var F,k,T,I,ee=l.klass,re=l.send,$=l.defs,P=l.def,Q=l.rb_plus,E=l.return_val,C=l.slice,B=l.send2,R=l.find_super,Y=l.Kernel,H=l.alias,U=l.nil,L=l.$$$;return l.top.$require("corelib/module"),F=[],T=[k=ee("::",null,"Class")].concat(F),I=l.$r(T),$(k,"$new",function b(g){var q=b.$$p||U;if(b.$$p=null,null==g&&(g=I("Object")),!g.$$is_class)throw l.TypeError.$new("superclass must be a Class");var S=l.allocate_class(U,g);return g.$inherited(S),q!==U&&re(S,"class_eval",[],q.$to_proc()),S},-1),P(k,"$allocate",function(){var q=new this.$$constructor;return q.$$id=l.uid(),q}),P(k,"$descendants",function(){return Q(this.$subclasses(),re(this.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),P(k,"$inherited",E(U)),P(k,"$initialize_dup",function(g){var q=this;q.$initialize_copy(g),q.$$name=null,q.$$full_name=null}),P(k,"$new",function b(g){var _,q=b.$$p||U;b.$$p=null,_=C(arguments);var f=this.$allocate();return l.send(f,f.$initialize,_,q),f},-1),P(k,"$subclasses",function(){var g=this;if(typeof WeakRef<"u"){var q,S,_=[];for(q=0;q<g.$$subclasses.length;q++)void 0!==(S=g.$$subclasses[q].deref())&&_.push(S);return _}return g.$$subclasses}),P(k,"$superclass",function(){return this.$$super||U}),P(k,"$to_s",function b(){var q=this;b.$$p=null;var S=q.$$singleton_of;return S&&S.$$is_a_module?"#<Class:"+S.$name()+">":S?"#<Class:#<"+S.$$class.$name()+":0x"+l.id(S).$to_s(16)+">>":B(q,R(q,"to_s",b,!1,!0),"to_s",[],null)}),P(k,"$attached_object",function(){var g=this;if(null!=g.$$singleton_of)return g.$$singleton_of;Y.$raise(L("TypeError"),"`"+g+"' is not a singleton class")}),H(k,"inspect","to_s")},Opal.modules["corelib/basic_object"]=function(l){"use strict";var k,re=l.slice,$=l.def,P=l.alias,Q=l.return_val,E=l.Opal,C=l.truthy,B=l.range,R=l.Kernel,Y=l.to_a,H=l.hash2,Z=l.send,W=l.eqeq,U=l.rb_ge,L=l.nil,w=l.$$$;return $(k=(0,l.klass)("::",null,"BasicObject"),"$initialize",function(I){return re(arguments),L},-1),$(k,"$==",function(I){return this===I}),$(k,"$eql?",function(I){return this["$=="](I)}),P(k,"equal?","=="),$(k,"$__id__",function(){var I=this;return null!=I.$$id||l.prop(I,"$$id",l.uid()),I.$$id}),$(k,"$__send__",function T(I,b){var S,g=T.$$p||L,_=this;T.$$p=null,S=re(arguments,1),I.$$is_string||_.$raise(w("TypeError"),_.$inspect()+" is not a symbol nor a string");var p=_[l.jsid(I)];return p?(g!==L&&(p.$$p=g),p.apply(_,S)):(g!==L&&(_.$method_missing.$$p=g),_.$method_missing.apply(_,[I].concat(S)))},-2),$(k,"$!",Q(!1)),E.$pristine("!"),$(k,"$!=",function(I){return this["$=="](I)["$!"]()}),$(k,"$instance_eval",function T(I){var q,S,b=T.$$p||L,_=this,p=L,v=L,N=L,h=L,M=L;if(T.$$p=null,q=re(arguments),C(b["$nil?"]())&&C(!!l.compile))C(B(1,3,!1)["$cover?"](q.$size()))||R.$raise(w("ArgumentError"),"wrong number of arguments (0 for 1..3)"),p=null==(S=[].concat(Y(q)))[0]?L:S[0],v=H(["file","eval"],{file:C(N=null==S[1]?L:S[1])?N:"(eval)",eval:!0}),h=l.hash({arity_check:!1}).$merge(v),M=E.$compile(p,h),b=Z(R,"proc",[],function a(){var r=null==a.$$s?this:a.$$s;return new Function("Opal,self","return "+M)(l,r)},{$$s:_});else{if(C(b["$nil?"]())&&C(U(q.$length(),1))&&W(q.$first()["$[]"](0),"@"))return _.$instance_variable_get(q.$first());C(q["$any?"]())&&R.$raise(w("ArgumentError"),"wrong number of arguments ("+q.$size()+" for 0)")}var d,m=b.$$s;if(b.$$s=null,_.$$is_a_module){_.$$eval=!0;try{d=b.call(_,_)}finally{_.$$eval=!1}}else d=b.call(_,_);return b.$$s=m,d},-1),$(k,"$instance_exec",function T(I){var q,b=T.$$p||L,S=this;T.$$p=null,q=re(arguments),C(b)||R.$raise(w("ArgumentError"),"no block given");var p,_=b.$$s;if(b.$$s=null,S.$$is_a_module){S.$$eval=!0;try{p=b.apply(S,q)}finally{S.$$eval=!1}}else p=b.apply(S,q);return b.$$s=_,p},-1),$(k,"$singleton_method_added",function(I){return re(arguments),L},-1),$(k,"$singleton_method_removed",function(I){return re(arguments),L},-1),$(k,"$singleton_method_undefined",function(I){return re(arguments),L},-1),$(k,"$method_missing",function T(I,b){var S,p;return T.$$p=null,S=re(arguments,1),p=E.$inspect(this),R.$raise(w("NoMethodError").$new("undefined method `"+I+"' for "+p,I,S),L,R.$caller(1))},-2),E.$pristine(k,"method_missing"),$(k,"$respond_to_missing?",function(I,b){return null==b&&(b=!1),!1},-2)},Opal.modules["corelib/kernel"]=function(l){"use strict";var m,ee=l.truthy,re=l.coerce_to,$=l.respond_to,P=l.Opal,Q=l.deny_frozen_access,E=l.freeze,C=l.freeze_props,B=l.jsid,R=l.module,Y=l.return_val,H=l.def,Z=l.Kernel,W=l.gvars,U=l.slice,L=l.send,w=l.to_a,A=l.ensure_kwargs,F=l.eqeq,k=l.hash2,T=l.rb_plus,I=l.eqeqeq,b=l.return_self,g=l.rb_le,q=l.extract_kwargs,S=l.rb_lt,_=l.Object,p=l.alias,f=l.klass,v=l.nil,N=l.$$$;return function(h,M){var m=R("::","Kernel"),d=[m].concat([]),a=l.$r(d);H(m,"$=~",Y(!1)),H(m,"$!~",function(s){return this["$=~"](s)["$!"]()}),H(m,"$===",function(s){var n;return ee(n=this.$object_id()["$=="](s.$object_id()))?n:this["$=="](s)}),H(m,"$<=>",function(s){this.$$comparable=!0;var n=this["$=="](s);return n&&n!==v?0:v}),H(m,"$method",function(s){var t=this,n=t[B(s)];return(!n||n.$$stub)&&Z.$raise(N("NameError").$new("undefined method `"+s+"' for class `"+t.$class()+"'",s)),N("Method").$new(t,n.$$owner||t.$class(),n,s)}),H(m,"$methods",function(s){return null==s&&(s=!0),ee(s)?l.methods(this):l.own_methods(this)},-1),H(m,"$public_methods",function(s){return null==s&&(s=!0),ee(s)?l.methods(this):l.receiver_methods(this)},-1),H(m,"$Array",function(s){var t;return s===v?[]:s.$$is_array?s:(t=P["$coerce_to?"](s,N("Array"),"to_ary"))!==v||(t=P["$coerce_to?"](s,N("Array"),"to_a"))!==v?t:[s]}),H(m,"$at_exit",function e(){var t,s=e.$$p||v;return null==W.__at_exit__&&(W.__at_exit__=v),e.$$p=null,W.__at_exit__=ee(t=W.__at_exit__)?t:[],W.__at_exit__["$<<"](s),s}),H(m,"$caller",function(s,t){var n,i;null==s&&(s=1),null==t&&(t=v),i=[];for(var c=s+1,o=(n=(new Error).$backtrace()).length;c<o;c++)n[c].match(/runtime\.js/)||i.push(n[c]);return t!=v&&(i=i.slice(0,t)),i},-1),H(m,"$caller_locations",function(s){var t;return t=U(arguments),L(L(this,"caller",w(t)),"map",[],function(o){return null==o&&(o=v),N(N(N("Thread"),"Backtrace"),"Location").$new(o)})},-1),H(m,"$class",function(){return this.$$class}),H(m,"$copy_instance_variables",function(s){var i,c,o,n=Object.keys(s);for(i=0,c=n.length;i<c;i++)"$"!==(o=n[i]).charAt(0)&&s.hasOwnProperty(o)&&(this[o]=s[o])}),H(m,"$copy_singleton_methods",function(s){var n,i,c,o;if(s.hasOwnProperty("$$meta")&&null!==s.$$meta){var x=l.get_singleton_class(s),j=l.get_singleton_class(this);for(n=0,o=(c=Object.getOwnPropertyNames(x.$$prototype)).length;n<o;n++)l.is_method(i=c[n])&&(j.$$prototype[i]=x.$$prototype[i]);j.$$const=Object.assign({},x.$$const),Object.setPrototypeOf(j.$$prototype,Object.getPrototypeOf(x.$$prototype))}for(n=0,o=(c=Object.getOwnPropertyNames(s)).length;n<o;n++)"$"===(i=c[n]).charAt(0)&&"$"!==i.charAt(1)&&s.hasOwnProperty(i)&&(this[i]=s[i])}),H(m,"$clone",function(s){var t,n=this,i=v;return null==(t=(s=A(s)).$$smap.freeze)&&(t=v),ee(t["$nil?"]())||F(t,!0)||F(t,!1)||n.$raise(a("ArgumentError"),"unexpected value for freeze: "+t.$class()),(i=n.$class().$allocate()).$copy_instance_variables(n),i.$copy_singleton_methods(n),i.$initialize_clone(n,k(["freeze"],{freeze:t})),(F(t,!0)||ee(t["$nil?"]())&&ee(n["$frozen?"]()))&&i.$freeze(),i},-1),H(m,"$initialize_clone",function(s,t){return t=A(t),this.$initialize_copy(s),this},-2),H(m,"$define_singleton_method",function e(s,t){var n=e.$$p||v;return e.$$p=null,L(this.$singleton_class(),"define_method",[s,t],n.$to_proc())},-2),H(m,"$dup",function(){var s=this,t=v;return(t=s.$class().$allocate()).$copy_instance_variables(s),t.$initialize_dup(s),t}),H(m,"$initialize_dup",function(s){return this.$initialize_copy(s)}),H(m,"$enum_for",function e(s,t){var i,c,o,n=e.$$p||v,x=this;return e.$$p=null,(i=U(arguments)).length>0&&(c=i.shift()),null==c&&(c="each"),o=i,L(N("Enumerator"),"for",[x,c].concat(w(o)),n.$to_proc())},-1),H(m,"$equal?",function(s){return this===s}),H(m,"$exit",function(s){var t;for(null==W.__at_exit__&&(W.__at_exit__=v),null==s&&(s=!0),W.__at_exit__=ee(t=W.__at_exit__)?t:[];!ee(W.__at_exit__["$empty?"]());)W.__at_exit__.$pop().$call();return s=s.$$is_boolean?s?0:1:re(s,N("Integer"),"to_int"),l.exit(s),v},-1),H(m,"$extend",function(s){var n,i=this;0==(n=U(arguments)).length&&i.$raise(N("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),Q(i);for(var c=i.$singleton_class(),o=n.length-1;o>=0;o--){var x=n[o];x.$$is_module||Z.$raise(N("TypeError"),"wrong argument type "+x.$class()+" (expected Module)"),x.$append_features(c),x.$extend_object(i),x.$extended(i)}return i},-1),H(m,"$freeze",function(){var s=this;return ee(s["$frozen?"]())?s:"object"==typeof s?(C(s),E(s)):s}),H(m,"$frozen?",function(){switch(typeof this){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return this.$$frozen||!1;default:return!1}}),H(m,"$gets",function(s){var t;return null==W.stdin&&(W.stdin=v),t=U(arguments),L(W.stdin,"gets",w(t))},-1),H(m,"$hash",function(){return this.$__id__()}),H(m,"$initialize_copy",Y(v));var r=[];H(m,"$inspect",function(){var s=this,t=v,n=v,i=v;return function(){try{try{return t="",n=s.$__id__(),ee(r["$include?"](n))?t=" ...":(r["$<<"](n),i=!0,L(s.$instance_variables(),"each",[],function o(x){var O,te;return null==x&&(x=v),O=(null==o.$$s?this:o.$$s).$instance_variable_get(x),te=a("Opal").$inspect(O),t=T(t," "+x+"="+te)},{$$s:s})),"#<"+s.$class()+":0x"+n.$to_s(16)+t+">"}catch(o){if(!l.rescue(o,[a("StandardError")]))throw o;try{return"#<"+s.$class()+":0x"+n.$to_s(16)+">"}finally{l.pop_exception()}}}finally{ee(i)&&r.$pop()}}()}),H(m,"$instance_of?",function(s){return!s.$$is_class&&!s.$$is_module&&Z.$raise(N("TypeError"),"class or module required"),this.$$class===s}),H(m,"$instance_variable_defined?",function(s){return s=P["$instance_variable_name!"](s),l.hasOwnProperty.call(this,s.substr(1))}),H(m,"$instance_variable_get",function(s){return s=P["$instance_variable_name!"](s),this[l.ivar(s.substr(1))]??v}),H(m,"$instance_variable_set",function(s,t){return Q(this),s=P["$instance_variable_name!"](s),this[l.ivar(s.substr(1))]=t}),H(m,"$remove_instance_variable",function(s){var t=this;s=P["$instance_variable_name!"](s);var i,n=l.ivar(s.substr(1));return t.hasOwnProperty(n)?(i=t[n],delete t[n],i):Z.$raise(N("NameError"),"instance variable "+s+" not defined")}),H(m,"$instance_variables",function(){var n,t=[];for(var i in this)this.hasOwnProperty(i)&&"$"!==i.charAt(0)&&(n="$"===i.substr(-1)?i.slice(0,i.length-1):i,t.push("@"+n));return t}),H(m,"$Integer",function(s,t){var n,i,c;return s.$$is_string?"0"===s?0:(void 0===t?t=0:(1===(t=re(t,N("Integer"),"to_int"))||t<0||t>36)&&Z.$raise(N("ArgumentError"),"invalid radix "+t),i=(i=(i=s.toLowerCase()).replace(/(\d)_(?=\d)/g,"$1")).replace(/^(\s*[+-]?)(0[bodx]?)/,function(o,x,j){switch(j){case"0b":if(0===t||2===t)return t=2,x;case"0":case"0o":if(0===t||8===t)return t=8,x;case"0d":if(0===t||10===t)return t=10,x;case"0x":if(0===t||16===t)return t=16,x}Z.$raise(N("ArgumentError"),'invalid value for Integer(): "'+s+'"')}),c="0-"+((t=0===t?10:t)<=10?t-1:"9a-"+String.fromCharCode(t-11+97)),new RegExp("^\\s*[+-]?["+c+"]+\\s*$").test(i)||Z.$raise(N("ArgumentError"),'invalid value for Integer(): "'+s+'"'),n=parseInt(i,t),isNaN(n)&&Z.$raise(N("ArgumentError"),'invalid value for Integer(): "'+s+'"'),n):(void 0!==t&&Z.$raise(N("ArgumentError"),"base specified for non string value"),s===v&&Z.$raise(N("TypeError"),"can't convert nil into Integer"),s.$$is_number?((s===1/0||s===-1/0||isNaN(s))&&Z.$raise(N("FloatDomainError"),s),Math.floor(s)):s["$respond_to?"]("to_int")&&(n=s.$to_int())!==v?n:P["$coerce_to!"](s,N("Integer"),"to_i"))},-2),H(m,"$Float",function(s){var t;return s===v&&Z.$raise(N("TypeError"),"can't convert nil into Float"),s.$$is_string?(t=(t=s.toString()).replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(t)?Z.$Integer(t):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(t)||Z.$raise(N("ArgumentError"),'invalid value for Float(): "'+s+'"'),parseFloat(t))):P["$coerce_to!"](s,N("Float"),"to_f")}),H(m,"$Hash",function(s){return ee(s["$nil?"]())||F(s,[])?k([],{}):I(N("Hash"),s)?s:P["$coerce_to!"](s,N("Hash"),"to_hash")}),H(m,"$is_a?",function(s){return!s.$$is_class&&!s.$$is_module&&Z.$raise(N("TypeError"),"class or module required"),l.is_a(this,s)}),H(m,"$itself",b),H(m,"$lambda",function e(){var s=e.$$p||v;return e.$$p=null,l.lambda(s)}),H(m,"$load",function(s){return s=P["$coerce_to!"](s,N("String"),"to_str"),l.load(s)}),H(m,"$loop",function e(){var s=e.$$p||v,n=v;if(e.$$p=null,s===v)return L(this,"enum_for",["loop"],function(){return N(N("Float"),"INFINITY")});for(;ee(!0);)try{l.yieldX(s,[])}catch(i){if(!l.rescue(i,[N("StopIteration")]))throw i;n=i;try{return n.$result()}finally{l.pop_exception()}}return this}),H(m,"$nil?",Y(!1)),H(m,"$printf",function(s){var t,n;return t=U(arguments),ee((n=t)["$any?"]())&&this.$print(L(this,"format",w(n))),v},-1),H(m,"$proc",function e(){var s=e.$$p||v;return e.$$p=null,ee(s)||Z.$raise(N("ArgumentError"),"tried to create Proc object without a block"),s.$$is_lambda=!1,s}),H(m,"$puts",function(s){var t;return null==W.stdout&&(W.stdout=v),t=U(arguments),L(W.stdout,"puts",w(t))},-1),H(m,"$p",function(s){var t,n;return t=U(arguments),L(n=t,"each",[],function(c){return null==W.stdout&&(W.stdout=v),null==c&&(c=v),W.stdout.$puts(c.$inspect())}),ee(g(n.$length(),1))?n["$[]"](0):n},-1),H(m,"$print",function(s){var t;return null==W.stdout&&(W.stdout=v),t=U(arguments),L(W.stdout,"print",w(t))},-1),H(m,"$readline",function(s){var t;return null==W.stdin&&(W.stdin=v),t=U(arguments),L(W.stdin,"readline",w(t))},-1),H(m,"$warn",function(s,t){var n,i,c,o,x,j,te=v;return null==W.VERBOSE&&(W.VERBOSE=v),null==W.stderr&&(W.stderr=v),n=U(arguments),i=q(n),c=n,null==(o=(i=A(i)).$$smap.uplevel)&&(o=v),ee(o)&&(o=P["$coerce_to!"](o,N("Integer"),"to_str"),ee(S(o,0))&&Z.$raise(N("ArgumentError"),"negative level ("+o+")"),x=(j=this.$caller(T(o,1),1).$first())===v||null==j?v:j.$split(":in `"),te=x===v||null==x?v:x.$first(),ee(te)&&(te+=": "),c=L(c,"map",[],function(ae){return null==ae&&(ae=v),te+"warning: "+ae})),ee(W.VERBOSE["$nil?"]())||ee(c["$empty?"]())?v:L(W.stderr,"puts",w(c))},-1),H(m,"$raise",function(s,t,n){throw null==W["!"]&&(W["!"]=v),null==W["@"]&&(W["@"]=v),null==t&&(t=v),null==n&&(n=v),null==s&&W["!"]!==v?W["!"]:(null==s?s=N("RuntimeError").$new(""):$(s,"$to_str")?s=N("RuntimeError").$new(s.$to_str()):s.$$is_class&&$(s,"$exception")?s=s.$exception(t):s.$$is_exception||(s=N("TypeError").$new("exception class/object expected")),n!==v&&s.$set_backtrace(n),W["!"]!==v&&l.exceptions.push(W["!"]),W["!"]=s,W["@"]=s.$backtrace(),s)},-1),H(m,"$rand",function(s){return void 0===s?N(N("Random"),"DEFAULT").$rand():(s.$$is_number&&(s<0&&(s=Math.abs(s)),s%1!=0&&(s=s.$to_i()),0===s&&(s=void 0)),N(N("Random"),"DEFAULT").$rand(s))},-1),H(m,"$respond_to?",function(s,t){var n=this;null==t&&(t=!1);var i=n[B(s)];return"function"==typeof i&&!i.$$stub||!0!==n["$respond_to_missing?"].$$pristine&&n["$respond_to_missing?"](s,t)},-2),H(m,"$respond_to_missing?",function(s,t){return null==t&&(t=!1),!1},-2),P.$pristine(m,"respond_to?","respond_to_missing?"),H(m,"$require",function(s){return"string"!=typeof s&&l.String&&l.Array&&(s=P["$coerce_to!"](s,N("String"),"to_str")),l.require(s)}),H(m,"$require_relative",function(s){return P["$try_convert!"](s,N("String"),"to_str"),s=N("File").$expand_path(N("File").$join(l.current_file,"..",s)),l.require(s)}),H(m,"$require_tree",function(s,t){var n;null==(n=(t=A(t)).$$smap.autoload)&&(n=!1);var i=[];for(var c in s=N("File").$expand_path(s),"."===(s=l.normalize(s))&&(s=""),l.modules)c["$start_with?"](s)&&i.push(n?[c,!0]:[c,l.require(c)]);return i},-2),H(m,"$singleton_class",function(){return l.get_singleton_class(this)}),H(m,"$sleep",function(s){null==s&&(s=v),s===v&&Z.$raise(N("TypeError"),"can't convert NilClass into time interval"),s.$$is_number||Z.$raise(N("TypeError"),"can't convert "+s.$class()+" into time interval"),s<0&&Z.$raise(N("ArgumentError"),"time interval must be positive");for(var t=l.global.performance?function(){return performance.now()}:function(){return new Date},n=t();t()-n<=1e3*s;);return Math.round(s)},-1),H(m,"$srand",function(s){return null==s&&(s=a("Random").$new_seed()),N("Random").$srand(s)},-1),H(m,"$String",function(s){var t;return ee(t=P["$coerce_to?"](s,N("String"),"to_str"))?t:P["$coerce_to!"](s,N("String"),"to_s")}),H(m,"$tap",function e(){var s=e.$$p||v;return e.$$p=null,l.yield1(s,this),this}),H(m,"$to_proc",b),H(m,"$to_s",function(){return"#<"+this.$class()+":0x"+this.$__id__().$to_s(16)+">"}),H(m,"$catch",function e(s){var t=e.$$p||v,n=v,i=v;e.$$p=null,null==s&&(s=v);try{return s=ee(n=s)?n:_.$new(),l.yield1(t,s)}catch(c){if(!l.rescue(c,[N("UncaughtThrowError")]))throw c;i=c;try{return F(i.$tag(),s)?i.$value():Z.$raise()}finally{l.pop_exception()}}},-1),H(m,"$throw",function(s,t){return null==t&&(t=v),Z.$raise(N("UncaughtThrowError").$new(s,t))},-2),H(m,"$open",function e(s){var i,t=e.$$p||v;return e.$$p=null,i=U(arguments),L(N("File"),"open",w(i),t.$to_proc())},-1),H(m,"$yield_self",function e(){var s=e.$$p||v;return e.$$p=null,s===v?L(this,"enum_for",["yield_self"],Y(1)):l.yield1(s,this)}),p(m,"fail","raise"),p(m,"kind_of?","is_a?"),p(m,"object_id","__id__"),p(m,"public_send","__send__"),p(m,"send","__send__"),p(m,"then","yield_self"),p(m,"to_enum","enum_for")}(),m=f("::",null,"Object"),delete _.$$prototype.$require,m.$include(Z)},Opal.modules["corelib/main"]=function(l){var R,ee=l.return_val,re=l.def,$=l.Object,P=l.slice,Q=l.Kernel;return re(R=l.get_singleton_class(l.top),"$to_s",ee("main")),re(R,"$include",function(Z){return $.$include(Z)}),re(R,"$autoload",function(Z){var W;return W=P(arguments),l.Object.$autoload.apply(l.Object,W)},-1),re(R,"$using",function(Z){return Q.$raise("main.using is permitted only at toplevel")})},Opal.modules["corelib/error/errno"]=function(l){var Z,W,U,ee=l.module,re=l.truthy,$=l.rb_plus,P=l.send2,Q=l.find_super,E=l.def,C=l.klass,B=[],R=l.nil,Y=l.$$$;return function(H,Z){var L,A,W=ee("::","Errno"),w=([W].concat(Z),R);for(L=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],w=R,A=0;A<L.length;A++)!function(){var I,k=L[A][1],T=L[A][2];(w=l.klass(W,l.SystemCallError,L[A][0])).errno=T,I=l.get_singleton_class(w),E(I,"$new",function g(q){var p=R;return g.$$p=null,null==q&&(q=R),p=k,re(q)&&(p=$(p," - "+q)),P(this,Q(this,"new",g,!1,!0),"new",[p],null)},-1)}()}(0,B),Z=Y("StandardError"),W=B,[U=C("::",Z,"SystemCallError")].concat(W),E(U,"$errno",function(){return this.$class().$errno()}),l.get_singleton_class(U).$attr_reader("errno")},Opal.modules["corelib/error"]=function(l){var g,q,ee=l.klass,re=l.slice,$=l.gvars,P=l.defs,Q=l.send,E=l.to_a,C=l.def,B=l.truthy,R=l.hash2,Y=l.Kernel,H=l.not,Z=l.rb_plus,W=l.eqeq,U=l.Object,L=l.ensure_kwargs,w=l.send2,A=l.find_super,F=l.module,k=[],T=l.nil,I=l.$$$;return function(b,g,q){var z,S=ee("::",g,"Exception"),_=[S].concat(q),p=l.$r(_);function v(N){for(var M,h=[],m=0;m<N.length;m++){var d=N[m];!d||!d.$$is_string||((M=d.match(/^    at (.*?) \((.*?)\)$/))?h.push(M[2]+":in `"+M[1]+"'"):(M=d.match(/^    at (.*?)$/))?h.push(M[1]+":in `undefined'"):(M=d.match(/^  from (.*?)$/))?h.push(M[1]):(M=d.match(/^(.*?)@(.*?)$/))&&h.push(M[2]+":in `"+M[1]+"'"))}return h}S.$$prototype.message=T,l.prop(S.$$prototype,"$$is_exception",!0),Error.stackTraceLimit=100,P(S,"$new",function(h){var m;null==$["!"]&&($["!"]=T);var a=(m=re(arguments)).length>0?m[0]:T,r=new this.$$constructor(a);return r.name=this.$$name,r.message=a,r.cause=$["!"],l.send(r,r.$initialize,m),l.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(r,z),r},-1),z=S.$new,P(S,"$exception",function(h){var M;return M=re(arguments),Q(this,"new",E(M))},-1),C(S,"$initialize",function(h){var M,m;return M=re(arguments),this.message=(m=M).length>0?m[0]:T},-1),C(S,"$backtrace",function(){var h=this;if(h.backtrace)return h.backtrace;var M=h.stack;return typeof M<"u"&&M.$$is_string?h.backtrace=v(M.split("\n")):M?h.backtrace=v(M):[]}),C(S,"$backtrace_locations",function(){var h,M=this;return M.backtrace_locations||(M.backtrace_locations=(h=M.$backtrace())===T||null==h?T:Q(h,"map",[],function(d){return null==d&&(d=T),I(I(I("Thread"),"Backtrace"),"Location").$new(d)})),M.backtrace_locations}),C(S,"$cause",function(){return this.cause||T}),C(S,"$exception",function(h){var M=this;if(null==h&&(h=T),h===T||M===h)return M;var m=M.$clone();return m.message=h,M.backtrace&&(m.backtrace=M.backtrace.$dup()),m.stack=M.stack,m.cause=M.cause,m},-1),C(S,"$message",function(){return this.$to_s()}),C(S,"$full_message",function(h){var m,d=this,a=T,r=T,e=T,s=T,t=T,n=T,i=T,c=T,o=T;return null==$.stderr&&($.stderr=T),null==h&&(h=T),B(p("Hash","skip_raise")?"constant":T)?(e=(m=[(h=R(["highlight","order"],{highlight:$.stderr["$tty?"](),order:"top"}).$merge(B(a=h)?a:R([],{})))["$[]"]("highlight"),h["$[]"]("order")])[1],B([!0,!1]["$include?"](r=m[0]))||Y.$raise(I("ArgumentError"),"expected true or false as highlight: "+r),B(["top","bottom"]["$include?"](e))||Y.$raise(I("ArgumentError"),"expected :top or :bottom as order: "+e),B(r)?(s="\x1b[1;4m",t="\x1b[1m",n="\x1b[m"):s=t=n="",i=d.$backtrace().$dup(),(H(i)||B(i["$empty?"]()))&&(i=d.$caller()),c=i.$shift(),o=Z(o=c+": ",""+t+d.$to_s()+" ("+s+d.$class()+n+t+")"+n+"\n"),o=Z(o,Q(i,"map",[],function(j){return null==j&&(j=T),"\tfrom "+j+"\n"}).$join()),B(d.$cause())&&(o=Z(o,d.$cause().$full_message(R(["highlight"],{highlight:r})))),W(e,"bottom")&&(o=o.$split("\n").$reverse().$join("\n"),o=Z(t+"Traceback"+n+" (most recent call last):\n",o)),o):d.message+"\n"+d.stack},-1),C(S,"$inspect",function(){var h=this,M=T;return M=h.$to_s(),B(M["$empty?"]())?h.$class().$to_s():"#<"+h.$class().$to_s()+": "+h.$to_s()+">"}),C(S,"$set_backtrace",function(h){var d,a,M=this,m=!0;if(h===T)M.backtrace=T,M.stack="";else if(h.$$is_string)M.backtrace=[h],M.stack="  from "+h;else{if(h.$$is_array){for(d=0,a=h.length;d<a;d++)if(!h[d].$$is_string){m=!1;break}}else m=!1;!1===m&&Y.$raise(I("TypeError"),"backtrace must be Array of String"),M.backtrace=h,M.stack=Q(h,"map",[],function(e){return null==e&&(e=T),Z("  from ",e)}).join("\n")}return h}),C(S,"$to_s",function(){var M,m,h=this;return B(M=B(m=h.message)?h.message.$to_s():m)?M:h.$class().$to_s()})}(0,Error,k),ee("::",I("Exception"),"ScriptError"),ee("::",I("ScriptError"),"SyntaxError"),ee("::",I("ScriptError"),"LoadError"),ee("::",I("ScriptError"),"NotImplementedError"),ee("::",I("Exception"),"SystemExit"),ee("::",I("Exception"),"NoMemoryError"),ee("::",I("Exception"),"SignalException"),ee("::",I("SignalException"),"Interrupt"),ee("::",I("Exception"),"SecurityError"),ee("::",I("Exception"),"SystemStackError"),ee("::",I("Exception"),"StandardError"),ee("::",I("StandardError"),"EncodingError"),ee("::",I("StandardError"),"ZeroDivisionError"),ee("::",I("StandardError"),"NameError"),ee("::",I("NameError"),"NoMethodError"),ee("::",I("StandardError"),"RuntimeError"),ee("::",I("RuntimeError"),"FrozenError"),ee("::",I("StandardError"),"LocalJumpError"),ee("::",I("StandardError"),"TypeError"),ee("::",I("StandardError"),"ArgumentError"),ee("::",I("ArgumentError"),"UncaughtThrowError"),ee("::",I("StandardError"),"IndexError"),ee("::",I("IndexError"),"StopIteration"),ee("::",I("StopIteration"),"ClosedQueueError"),ee("::",I("IndexError"),"KeyError"),ee("::",I("StandardError"),"RangeError"),ee("::",I("RangeError"),"FloatDomainError"),ee("::",I("StandardError"),"IOError"),ee("::",I("IOError"),"EOFError"),ee("::",I("StandardError"),"SystemCallError"),ee("::",I("StandardError"),"RegexpError"),ee("::",I("StandardError"),"ThreadError"),ee("::",I("StandardError"),"FiberError"),U.$autoload("Errno","corelib/error/errno"),g=I("RuntimeError"),(q=ee("::",g,"FrozenError")).$attr_reader("receiver"),C(q,"$initialize",function S(_,p){var f,v=this;return S.$$p=null,null==(f=(p=L(p)).$$smap.receiver)&&(f=T),w(v,A(v,"initialize",S,!1,!0),"initialize",[_],null),v.receiver=f},-2),function(b,g){var q=ee("::",g,"UncaughtThrowError");q.$$prototype.tag=T,q.$attr_reader("tag","value"),C(q,"$initialize",function _(p,f){var v=this;return _.$$p=null,null==f&&(f=T),v.tag=p,v.value=f,w(v,A(v,"initialize",_,!1,!0),"initialize",["uncaught throw "+v.tag.$inspect()],null)},-2)}(0,I("ArgumentError")),function(b,g){var q=ee("::",null,"NameError");q.$attr_reader("name"),C(q,"$initialize",function S(_,p){var z=this;return S.$$p=null,null==p&&(p=T),w(z,A(z,"initialize",S,!1,!0),"initialize",[_],null),z.name=p},-2)}(),function(b,g){var q=ee("::",null,"NoMethodError");q.$attr_reader("args"),C(q,"$initialize",function S(_,p,f){var v=this;return S.$$p=null,null==p&&(p=T),null==f&&(f=[]),w(v,A(v,"initialize",S,!1,!0),"initialize",[_,p],null),v.args=f},-2)}(),ee("::",null,"StopIteration").$attr_reader("result"),function(b,g){var q=ee("::",null,"KeyError"),S=q.$$prototype;S.receiver=S.key=T,C(q,"$initialize",function _(p,f){var z,v,h=this;return _.$$p=null,null==(z=(f=L(f)).$$smap.receiver)&&(z=T),null==(v=f.$$smap.key)&&(v=T),w(h,A(h,"initialize",_,!1,!0),"initialize",[p],null),h.receiver=z,h.key=v},-2),C(q,"$receiver",function(){var f;return B(f=this.receiver)?f:Y.$raise(I("ArgumentError"),"no receiver is available")}),C(q,"$key",function(){var f;return B(f=this.key)?f:Y.$raise(I("ArgumentError"),"no key is available")})}(),function(b,g){var S=[F("::","JS")].concat(g);return ee(S[0],null,"Error"),T}(0,k)},Opal.modules["corelib/constants"]=function(l){var ee=l.const_set,$=l.$$$;return ee("::","RUBY_PLATFORM","opal"),ee("::","RUBY_ENGINE","opal"),ee("::","RUBY_VERSION","3.2.0"),ee("::","RUBY_ENGINE_VERSION","1.7.4"),ee("::","RUBY_RELEASE_DATE","2023-09-14"),ee("::","RUBY_PATCHLEVEL",0),ee("::","RUBY_REVISION","0"),ee("::","RUBY_COPYRIGHT","opal - Copyright (C) 2011-2023 Adam Beynon and the Opal contributors"),ee("::","RUBY_DESCRIPTION","opal "+$("RUBY_ENGINE_VERSION")+" ("+$("RUBY_RELEASE_DATE")+" revision "+$("RUBY_REVISION")+")")},Opal.modules["opal/base"]=function(l){var ee=l.Object;return ee.$require("corelib/runtime"),ee.$require("corelib/helpers"),ee.$require("corelib/module"),ee.$require("corelib/class"),ee.$require("corelib/basic_object"),ee.$require("corelib/kernel"),ee.$require("corelib/main"),ee.$require("corelib/error"),ee.$require("corelib/constants")},Opal.modules["corelib/nil"]=function(l){var k,A,re=l.Kernel,$=l.def,P=l.return_val,Q=l.ensure_kwargs,E=l.NilClass,C=l.slice,B=l.truthy,R=l.rb_gt,Y=l.alias,Z=l.nil,W=l.$$$;return[A=(0,l.klass)("::",null,"NilClass")].concat([]),A.$$prototype.$$meta=A,k=l.get_singleton_class(A),$(k,"$allocate",function(){return re.$raise(W("TypeError"),"allocator undefined for "+this.$name())}),l.udef(k,"$new"),$(A,"$!",P(!0)),$(A,"$&",P(!1)),$(A,"$|",function(T){return!1!==T&&T!==Z}),$(A,"$^",function(T){return!1!==T&&T!==Z}),$(A,"$==",function(T){return T===Z}),$(A,"$dup",P(Z)),$(A,"$clone",function(T){return T=Q(T),Z},-1),$(A,"$inspect",P("nil")),$(A,"$nil?",P(!0)),$(A,"$singleton_class",function(){return E}),$(A,"$to_a",function(){return[]}),$(A,"$to_h",function(){return l.hash()}),$(A,"$to_i",P(0)),$(A,"$to_s",P("")),$(A,"$to_c",function(){return W("Complex").$new(0,0)}),$(A,"$rationalize",function(T){var I;return I=C(arguments),B(R(I.$length(),1))&&re.$raise(W("ArgumentError")),re.$Rational(0,1)},-1),$(A,"$to_r",function(){return re.$Rational(0,1)}),$(A,"$instance_variables",function(){return[]}),Y(A,"to_f","to_i")},Opal.modules["corelib/boolean"]=function(l){"use strict";var ee=l.klass,re=l.Kernel,$=l.def,P=l.return_self,Q=l.ensure_kwargs,E=l.slice,C=l.truthy,B=l.send2,R=l.find_super,Y=l.to_a,H=l.alias,W=l.nil,U=l.$$$;return function(L,w,A){var b,F=ee("::",w,"Boolean");[F].concat([]),l.prop(F.$$prototype,"$$is_boolean",!0);for(var T=["$$class","$$meta"],I=0;I<T.length;I++)Object.defineProperty(F.$$prototype,T[I],{configurable:!0,enumerable:!1,get:function(){return 1==this?l.TrueClass:0==this?l.FalseClass:l.Boolean}});Object.defineProperty(F.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return 1==this?2:0==this?0:W}}),b=l.get_singleton_class(F),$(b,"$allocate",function(){return re.$raise(U("TypeError"),"allocator undefined for "+this.$name())}),l.udef(b,"$new"),$(F,"$__id__",function(){return this.valueOf()?2:0}),$(F,"$!",function(){return 1!=this}),$(F,"$&",function(g){return 1==this&&!1!==g&&g!==W}),$(F,"$|",function(g){return 1==this||!1!==g&&g!==W}),$(F,"$^",function(g){return 1==this?!1===g||g===W:!1!==g&&g!==W}),$(F,"$==",function(g){return 1==this===g.valueOf()}),$(F,"$singleton_class",function(){return this.$$meta}),$(F,"$to_s",function(){return 1==this?"true":"false"}),$(F,"$dup",P),$(F,"$clone",function(g){return g=Q(g),this},-1),$(F,"$method_missing",function b(g,q){var p,S=b.$$p||W,f=this;b.$$p=null,p=E(arguments,1);var z=f.$$class.$$prototype[l.jsid(g)];return C(typeof z<"u"&&!z.$$stub)||B(f,R(f,"method_missing",b,!1,!0),"method_missing",[g].concat(Y(p)),S),l.send(f,z,p,S)},-2),$(F,"$respond_to_missing?",function(g,q){null==q&&(q=!1);var _=this.$$class.$$prototype[l.jsid(g)];return typeof _<"u"&&!_.$$stub},-2),H(F,"eql?","=="),H(F,"equal?","=="),H(F,"inspect","to_s"),H(F,"object_id","__id__")}(0,Boolean),ee("::",U("Boolean"),"TrueClass"),ee("::",U("Boolean"),"FalseClass"),W},Opal.modules["corelib/comparable"]=function(l){var ee=l.truthy,re=l.module,$=l.rb_gt,P=l.rb_lt,Q=l.eqeqeq,E=l.Kernel,C=l.def,B=l.nil,R=l.$$$;return function(Y){var H=re("::","Comparable"),Z=B;function W(w){return l.is_a(w,l.Integer)?w:$(w,0)?1:P(w,0)?-1:0}function L(w,A){var F=w["$<=>"](A);return ee(F)||function U(w,A){var F;F=Q(B,Z=A)||Q(!0,Z)||Q(!1,Z)||Q(R("Integer"),Z)||Q(R("Float"),Z)?A.$inspect():A.$$class,E.$raise(R("ArgumentError"),"comparison of "+w.$class()+" with "+F+" failed")}(w,A),W(F)}return C(H,"$==",function(A){var F=this,k=B;return!!ee(F["$equal?"](A))||F["$<=>"]!=l.Kernel["$<=>"]&&(F.$$comparable?(F.$$comparable=!1,!1):!!ee(k=F["$<=>"](A))&&0==W(k))}),C(H,"$>",function(A){return L(this,A)>0}),C(H,"$>=",function(A){return L(this,A)>=0}),C(H,"$<",function(A){return L(this,A)<0}),C(H,"$<=",function(A){return L(this,A)<=0}),C(H,"$between?",function(A,F){return!(P(this,A)||$(this,F))}),C(H,"$clamp",function(A,F){var T,I,k=this;if(null==F&&(F=B),F===B&&(l.is_a(A,l.Range)||E.$raise(R("TypeError"),"wrong argument type "+A.$class()+" (expected Range)"),I=A.excl,F=A.end,A=A.begin,F!==B&&I&&E.$raise(R("ArgumentError"),"cannot clamp with an exclusive range")),A!==B&&F!==B&&L(A,F)>0&&E.$raise(R("ArgumentError"),"min argument must be smaller than max argument"),A!==B){if(0==(T=L(k,A)))return k;if(T<0)return A}return F!==B&&(T=L(k,F))>0?F:k},-2)}()},Opal.modules["corelib/regexp"]=function(l){var f,z,M,d,a,v,N,h,ee=l.coerce_to,re=l.prop,$=l.freeze,P=l.klass,Q=l.const_set,E=l.send2,C=l.find_super,B=l.def,R=l.truthy,Y=l.gvars,H=l.slice,Z=l.Kernel,W=l.Opal,U=l.alias,L=l.send,w=l.hash2,A=l.rb_plus,F=l.ensure_kwargs,k=l.rb_ge,T=l.to_a,I=l.eqeqeq,b=l.rb_minus,g=l.return_ivar,q=[],S=l.nil,_=l.$$$;return P("::",_("StandardError"),"RegexpError"),f=RegExp,z=q,N=[v=P("::",f,"Regexp")].concat(z),h=l.$r(N),Q(v,"IGNORECASE",1),Q(v,"EXTENDED",2),Q(v,"MULTILINE",4),l.prop(v.$$prototype,"$$is_regexp",!0),d=[M=l.get_singleton_class(v)].concat(N),a=l.$r(d),B(M,"$allocate",function r(){var e=r.$$p||S,t=S;return r.$$p=null,(t=E(this,C(this,"allocate",r,!1,!0),"allocate",[],e)).uninitialized=!0,t}),B(M,"$escape",function(e){return e=ee(e,_("String"),"to_str"),l.escape_regexp(e)}),B(M,"$last_match",function(e){return null==Y["~"]&&(Y["~"]=S),null==e&&(e=S),R(e["$nil?"]())?Y["~"]:R(Y["~"])?Y["~"]["$[]"](e):S},-1),B(M,"$union",function(e){var t,i,c,o,x,j,n=this;if(0==(t=H(arguments)).length)return/(?!)/;if(1==t.length&&t[0].$$is_regexp)return t[0];i=t[0].$$is_array,t.length>1&&i&&Z.$raise(_("TypeError"),"no implicit conversion of Array into String"),i&&(t=t[0]),x=void 0,c=[];for(var O=0;O<t.length;O++)(o=t[O]).$$is_string?c.push(n.$escape(o)):o.$$is_regexp?(j=o.$options(),null!=x&&x!=j&&Z.$raise(_("TypeError"),"All expressions must use the same options"),x=j,c.push("("+o.source+")")):c.push(n.$escape(o.$to_str()));return n.$new(c.$join("|"),x)},-1),B(M,"$new",function(e,s){if(e.$$is_regexp)return new RegExp(e);if("\\"===(e=W["$coerce_to!"](e,_("String"),"to_str")).charAt(e.length-1)&&"\\"!==e.charAt(e.length-2)&&Z.$raise(_("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),void 0===s||s["$!"]())return new RegExp(e);if(s.$$is_number){var t="";a("IGNORECASE")&s&&(t+="i"),a("MULTILINE")&s&&(t+="m"),s=t}else s="i";return new RegExp(e,s)},-2),U(M,"compile","new"),U(M,"quote","escape"),B(v,"$==",function(m){return m instanceof RegExp&&this.toString()===m.toString()}),B(v,"$===",function(m){return this.$match(W["$coerce_to?"](m,_("String"),"to_str"))!==S}),B(v,"$=~",function(m){var a;return null==Y["~"]&&(Y["~"]=S),R(a=this.$match(m))?Y["~"].$begin(0):a}),B(v,"$freeze",function(){var m=this;return R(m["$frozen?"]())?m:(m.hasOwnProperty("$$g")||re(m,"$$g",null),m.hasOwnProperty("$$gm")||re(m,"$$gm",null),$(m))}),B(v,"$inspect",function(){var a=this.toString(),r=/^\/(.*)\/([^\/]*)$/.exec(a);if(r){for(var s=r[2],t=r[1].split(""),n=t.length,i=!1,c="",o=0;o<n;o++){var x=t[o];!i&&"/"==x&&(c=c.concat("\\")),c=c.concat(x),i="\\"==x&&!i}return"/"+c+"/"+s}return a}),B(v,"$match",function M(m,d){var a=M.$$p||S,r=this;if(null==Y["~"]&&(Y["~"]=S),M.$$p=null,r.uninitialized&&Z.$raise(_("TypeError"),"uninitialized Regexp"),void 0===d){if(m===S)return Y["~"]=S;var e=r.exec(ee(m,_("String"),"to_str"));return e?(Y["~"]=_("MatchData").$new(r,e),a===S?Y["~"]:l.yield1(a,Y["~"])):Y["~"]=S}if(d=ee(d,_("Integer"),"to_int"),m===S||(m=ee(m,_("String"),"to_str"),d<0&&(d+=m.length)<0))return Y["~"]=S;for(var s,t=l.global_regexp(r);;){if(null===(s=t.exec(m)))return Y["~"]=S;if(s.index>=d)return Y["~"]=_("MatchData").$new(t,s),a===S?Y["~"]:l.yield1(a,Y["~"]);t.lastIndex=s.index+1}},-2),B(v,"$match?",function(m,d){var r,a=this;return a.uninitialized&&Z.$raise(_("TypeError"),"uninitialized Regexp"),void 0===d?m!==S&&a.test(ee(m,_("String"),"to_str")):(d=ee(d,_("Integer"),"to_int"),!(m===S||(m=ee(m,_("String"),"to_str"),d<0&&(d+=m.length)<0)||null===(r=l.global_regexp(a).exec(m))||r.index<d))},-2),B(v,"$names",function(){return L(this.$source().$scan(/\(?<(\w+)>/,w(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$uniq()}),B(v,"$named_captures",function(){return L(L(L(this.$source().$scan(/\(?<(\w+)>/,w(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function(a){return null==a&&(a=S),L(a,"map",[],function(e){return null==e&&(e=S),A(e.$last(),1)})})}),B(v,"$~",function(){return null==Y._&&(Y._=S),this["$=~"](Y._)}),B(v,"$source",function(){return this.source}),B(v,"$options",function(){var m=this;m.uninitialized&&Z.$raise(_("TypeError"),"uninitialized Regexp");var d=0;return m.multiline&&(d|=h("MULTILINE")),m.ignoreCase&&(d|=h("IGNORECASE")),d}),B(v,"$casefold?",function(){return this.ignoreCase}),U(v,"eql?","=="),U(v,"to_s","source"),function(p,f,z){var v=P(p,null,"MatchData"),N=[v].concat(z),h=l.$r(N);return v.$$prototype.matches=S,v.$attr_reader("post_match","pre_match","regexp","string"),B(v,"$initialize",function(d,a,r){var e,s=this;null==(e=(r=F(r)).$$smap.no_matchdata)&&(e=!1),R(e)||(Y["~"]=s),s.regexp=d,s.begin=a.index,s.string=a.input,s.pre_match=a.input.slice(0,a.index),s.post_match=a.input.slice(a.index+a[0].length),s.matches=[];for(var t=0,n=a.length;t<n;t++){var i=a[t];s.matches.push(null==i?S:i)}},-3),B(v,"$match",function(d){var r;return R(r=this["$[]"](d))?r:R(d["$is_a?"](h("Integer")))&&R(k(d,this.$length()))?Z.$raise(_("IndexError"),"index "+d+" out of matches"):S}),B(v,"$match_length",function(d){var a;return(a=this.$match(d))===S||null==a?S:a.$length()}),B(v,"$[]",function(d){var r,e=this;return(r=H(arguments))[0].$$is_string?(e.$regexp().$names()["$include?"](r["$[]"](0))["$!"]()&&Z.$raise(_("IndexError"),"undefined group name reference: "+r["$[]"](0)),e.$named_captures()["$[]"](r["$[]"](0))):L(e.matches,"[]",T(r))},-1),B(v,"$offset",function(d){var a=this;return 0!==d&&Z.$raise(_("ArgumentError"),"MatchData#offset only supports 0th element"),[a.begin,a.begin+a.matches[d].length]}),B(v,"$==",function(d){var a=this,r=S,e=S,s=S,t=S;return!!I(_("MatchData"),d)&&(R(r=R(e=R(s=R(t=a.string==d.string)?a.regexp.toString()==d.regexp.toString():t)?a.pre_match==d.pre_match:s)?a.post_match==d.post_match:e)?a.begin==d.begin:r)}),B(v,"$begin",function(d){return 0!==d&&Z.$raise(_("ArgumentError"),"MatchData#begin only supports 0th element"),this.begin}),B(v,"$end",function(d){return 0!==d&&Z.$raise(_("ArgumentError"),"MatchData#end only supports 0th element"),this.begin+this.matches[d].length}),B(v,"$captures",function(){return this.matches.slice(1)}),B(v,"$named_captures",function(){var a=S;return a=this.$captures(),L(this.$regexp().$named_captures(),"transform_values",[],function(e){return null==e&&(e=S),a["$[]"](b(e.$last(),1))})}),B(v,"$names",function(){return this.$regexp().$names()}),B(v,"$inspect",function(){var d=this,a="#<MatchData "+d.matches[0].$inspect();if(d.$regexp().$names()["$empty?"]())for(var r=1,e=d.matches.length;r<e;r++)a+=" "+r+":"+d.matches[r].$inspect();else L(d.$named_captures(),"each",[],function(t,n){return null==t&&(t=S),null==n&&(n=S),a+=" "+t+":"+n.$inspect()});return a+">"}),B(v,"$length",function(){return this.matches.length}),B(v,"$to_a",g("matches")),B(v,"$to_s",function(){return this.matches[0]}),B(v,"$values_at",function(d){var r;r=H(arguments);var s,t,n,i=[];for(s=0;s<r.length;s++)r[s].$$is_range&&((t=r[s].$to_a()).unshift(s,1),Array.prototype.splice.apply(r,t)),(n=W["$coerce_to!"](r[s],_("Integer"),"to_int"))<0&&(n+=this.matches.length)<0?i.push(S):i.push(this.matches[n]);return i},-1),U(v,"eql?","=="),U(v,"size","length")}(q[0],0,q)},Opal.modules["corelib/string"]=function(l){var ee=l.coerce_to,re=l.respond_to,$=l.global_multiline_regexp,P=l.prop,Q=l.klass,E=l.def,C=l.Opal,B=l.defs,R=l.slice,Y=l.send,H=l.to_a,Z=l.extract_kwargs,W=l.ensure_kwargs,U=l.eqeqeq,L=l.Kernel,w=l.truthy,A=l.gvars,F=l.rb_divide,k=l.rb_plus,T=l.eqeq,I=l.hash2,b=l.alias,g=l.const_set,q=l.top,S=[],_=l.$r(S),p=l.nil,f=l.$$$;return q.$require("corelib/comparable"),q.$require("corelib/regexp"),function(z,v,N){var h=Q("::",String,"String"),M=[h].concat(N),m=l.$r(M);function d(a){function r(O){var ne,le,oe,ue,ie,X,te="",ae=O.length;for(ne=0;ne<ae;ne++)if("-"===(le=O.charAt(ne))&&ne>0&&ne<ae-1&&!oe){for((ue=O.charCodeAt(ne-1))>(ie=O.charCodeAt(ne+1))&&L.$raise(f("ArgumentError"),'invalid range "'+ue+"-"+ie+'" in string transliteration'),X=ue+1;X<ie+1;X++)te+=String.fromCharCode(X);oe=!0,ne++}else oe="\\"===le,te+=le;return te}function e(O,te){if(0===O.length)return te;var ae,oe,ne="",le=O.length;for(ae=0;ae<le;ae++)oe=O.charAt(ae),-1!==te.indexOf(oe)&&(ne+=oe);return ne}var s,t,n,i,c,o,x="",j="";for(s=0,t=a.length;s<t;s++)i="^"===(n=ee(a[s],f("String"),"to_str")).charAt(0)&&n.length>1,n=r(i?n.slice(1):n),i?j=e(j,n):x=e(x,n);if(x.length>0&&j.length>0){for(o="",s=0,t=x.length;s<t;s++)c=x.charAt(s),-1===j.indexOf(c)&&(o+=c);x=o,j=""}return x.length>0?"["+f("Regexp").$escape(x)+"]":j.length>0?"[^"+f("Regexp").$escape(j)+"]":null}h.$include(f("Comparable")),l.prop(h.$$prototype,"$$is_string",!0),E(h,"$__id__",function(){return this.toString()}),B(h,"$try_convert",function(r){return C["$coerce_to?"](r,f("String"),"to_str")}),B(h,"$new",function(r){var s,n=(s=R(arguments))[0]||"",i=s[s.length-1];return n=ee(n,f("String"),"to_str"),i&&i.$$is_hash&&i.$$smap.encoding&&(n=n.$force_encoding(i.$$smap.encoding)),(n=new this.$$constructor(n)).$initialize.$$pristine||Y(n,"initialize",H(s)),n},-1),E(h,"$initialize",function(r,e){var s,t;return s=R(arguments),t=Z(s),t=W(t),s.length>0&&s.shift(),p},-1),E(h,"$%",function(r){var e=this;return U(f("Array"),r)?Y(e,"format",[e].concat(H(r))):e.$format(e,r)}),E(h,"$*",function(r){if((r=ee(r,f("Integer"),"to_int"))<0&&L.$raise(f("ArgumentError"),"negative argument"),0===r)return"";var s="",t=this.toString();for(t.length*r>=1<<28&&L.$raise(f("RangeError"),"multiply count must not overflow maximum string size");1==(1&r)&&(s+=t),0!=(r>>>=1);)t+=t;return s}),E(h,"$+",function(r){var e=this;if(""==(r=ee(r,f("String"),"to_str"))&&e.$$class===l.String)return e;if(""==e&&r.$$class===l.String)return r;var s=e+r;return e.encoding===s.encoding&&r.encoding===s.encoding||"UTF-8"===e.encoding.name||"UTF-8"===r.encoding.name?s:l.enc(s,e.encoding)}),E(h,"$<=>",function(r){var e=this;if(w(r["$respond_to?"]("to_str")))return e>(r=r.$to_str().$to_s())?1:e<r?-1:0;var s=r["$<=>"](e);return s===p?p:s>0?-1:s<0?1:0}),E(h,"$==",function(r){return r.$$is_string?this.toString()===r.toString():!!re(r,"$to_str")&&r["$=="](this)}),E(h,"$=~",function(r){return r.$$is_string&&L.$raise(f("TypeError"),"type mismatch: String given"),r["$=~"](this)}),E(h,"$[]",function(r,e){var n,i,s=this,t=s.length;if(r.$$is_range)return n=r.excl,i=r,e=r.end===p?-1:ee(r.end,f("Integer"),"to_int"),r=r.begin===p?0:ee(r.begin,f("Integer"),"to_int"),Math.abs(r)>t?p:(r<0&&(r+=t),e<0&&(e+=t),(!n||i.end===p)&&(e+=1),(e-=r)<0&&(e=0),s.substr(r,e));if(r.$$is_string)return null!=e&&L.$raise(f("TypeError")),-1!==s.indexOf(r)?r:p;if(r.$$is_regexp){var c=s.match(r);return null===c?(A["~"]=p,p):(A["~"]=f("MatchData").$new(r,c),null==e?c[0]:(e=ee(e,f("Integer"),"to_int"))<0&&-e<c.length?c[e+=c.length]:e>=0&&e<c.length?c[e]:p)}return(r=ee(r,f("Integer"),"to_int"))<0&&(r+=t),null==e?r>=t||r<0?p:s.substr(r,1):(e=ee(e,f("Integer"),"to_int"))<0||r>t||r<0?p:s.substr(r,e)},-2),E(h,"$b",function(){return new String(this).$force_encoding("binary")}),E(h,"$capitalize",function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()}),E(h,"$casecmp",function(r){var e=this;if(!w(r["$respond_to?"]("to_str")))return p;r=ee(r,f("String"),"to_str").$to_s();var s=/^[\x00-\x7F]*$/;return s.test(e)&&s.test(r)&&(e=e.toLowerCase(),r=r.toLowerCase()),e["$<=>"](r)}),E(h,"$casecmp?",function(r){var s=this.$casecmp(r);return s===p?p:0===s}),E(h,"$center",function(r,e){var s=this;if(null==e&&(e=" "),r=ee(r,f("Integer"),"to_int"),e=ee(e,f("String"),"to_str").$to_s(),w(e["$empty?"]())&&L.$raise(f("ArgumentError"),"zero width padding"),w(r<=s.length))return s;var t=s.$ljust(F(k(r,s.length),2).$ceil(),e);return s.$rjust(F(k(r,s.length),2).$floor(),e)+t.slice(s.length)},-2),E(h,"$chomp",function(r){var s,e=this;return null==A["/"]&&(A["/"]=p),null==r&&(r=A["/"]),w(r===p||0===e.length)?e:("\n"===(r=C["$coerce_to!"](r,f("String"),"to_str").$to_s())?s=e.replace(/\r?\n?$/,""):""===r?s=e.replace(/(\r?\n)+$/,""):e.length>=r.length&&e.substr(e.length-r.length,r.length)===r&&(s=e.substr(0,e.length-r.length)),s??e)},-1),E(h,"$chop",function(){var r=this,e=r.length;return e<=1?"":"\n"===r.charAt(e-1)&&"\r"===r.charAt(e-2)?r.substr(0,e-2):r.substr(0,e-1)}),E(h,"$chr",function(){return this.charAt(0)}),E(h,"$clone",function(r){var e,s=this,t=p;return null==(e=(r=W(r)).$$smap.freeze)&&(e=p),w(e["$nil?"]())||T(e,!0)||T(e,!1)||s.$raise(m("ArgumentError"),"unexpected value for freeze: "+e.$class()),(t=new String(s)).$copy_singleton_methods(s),t.$initialize_clone(s,I(["freeze"],{freeze:e})),T(e,!0)?t.$$frozen||(t.$$frozen=!0):w(e["$nil?"]())&&s.$$frozen&&(t.$$frozen=!0),t},-1),E(h,"$dup",function(){var e=p;return(e=new String(this)).$initialize_dup(this),e}),E(h,"$count",function(r){var s;0===(s=R(arguments)).length&&L.$raise(f("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var n=d(s);return null===n?0:this.length-this.replace(new RegExp(n,"g"),"").length},-1),E(h,"$delete",function(r){var s;0===(s=R(arguments)).length&&L.$raise(f("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var n=d(s);return null===n?this:this.replace(new RegExp(n,"g"),"")},-1),E(h,"$delete_prefix",function(r){var e=this;return r.$$is_string||(r=ee(r,f("String"),"to_str")),e.slice(0,r.length)===r?e.slice(r.length):e}),E(h,"$delete_suffix",function(r){var e=this;return r.$$is_string||(r=ee(r,f("String"),"to_str")),e.slice(e.length-r.length)===r?e.slice(0,e.length-r.length):e}),E(h,"$downcase",function(){return this.toLowerCase()}),E(h,"$each_line",function a(r,e){var t,n,i,c,x,j,O,te,ne,ae,le,oe,s=a.$$p||p,o=this;if(null==A["/"]&&(A["/"]=p),a.$$p=null,t=R(arguments),n=Z(t),n=W(n),t.length>0&&(i=t.shift()),null==i&&(i=A["/"]),null==(c=n.$$smap.chomp)&&(c=!1),s===p)return o.$enum_for("each_line",i,I(["chomp"],{chomp:c}));if(i===p)return l.yield1(s,o),o;if(0===(i=ee(i,f("String"),"to_str")).length){for(j=0,O=(x=o.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/)).length;j<O;j+=2)(x[j]||x[j+1])&&(oe=(x[j]||"")+(x[j+1]||""),c&&(oe=oe.$chomp("\n")),l.yield1(s,oe));return o}for(ne=o.$chomp(i),ae=o.length!=ne.length,j=0,te=(le=ne.split(i)).length;j<te;j++)oe=le[j],(j<te-1||ae)&&(oe+=i),c&&(oe=oe.$chomp(i)),l.yield1(s,oe);return o},-1),E(h,"$empty?",function(){return 0===this.length}),E(h,"$end_with?",function(r){for(var s,t=this,n=0,i=(s=R(arguments)).length;n<i;n++){var c=ee(s[n],f("String"),"to_str").$to_s();if(t.length>=c.length&&t.substr(t.length-c.length,c.length)==c)return!0}return!1},-1),E(h,"$gsub",function a(r,e){var s=a.$$p||p,t=this;if(a.$$p=null,void 0===e&&s===p)return t.$enum_for("gsub",r);var o,x,j,n="",i=p,c=0;for(r.$$is_regexp?r=$(r):(r=ee(r,f("String"),"to_str"),r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));;){if(null===(o=r.exec(t))){A["~"]=p,n+=t.slice(c);break}i=f("MatchData").$new(r,o),void 0===e?(j=r.lastIndex,x=s(o[0]),r.lastIndex=j):e.$$is_hash?x=e["$[]"](o[0]).$to_s():(e.$$is_string||(e=ee(e,f("String"),"to_str")),x=e.replace(/([\\]+)([0-9+&`'])/g,function(O,te,ne){if(te.length%2==0)return O;switch(ne){case"+":for(var ae=o.length-1;ae>0;ae--)if(void 0!==o[ae])return te.slice(1)+o[ae];return"";case"&":return te.slice(1)+o[0];case"`":return te.slice(1)+t.slice(0,o.index);case"'":return te.slice(1)+t.slice(o.index+o[0].length);default:return te.slice(1)+(o[ne]||"")}}).replace(/\\\\/g,"\\")),r.lastIndex===o.index?(n+=t.slice(c,o.index)+x+(t[o.index]||""),r.lastIndex+=1):n+=t.slice(c,o.index)+x,c=r.lastIndex}return A["~"]=i,n},-2),E(h,"$hash",function(){return this.toString()}),E(h,"$hex",function(){return this.$to_i(16)}),E(h,"$include?",function(r){return r.$$is_string||(r=ee(r,f("String"),"to_str")),-1!==this.indexOf(r)}),E(h,"$index",function(r,e){var t,n,i,s=this;if(void 0===e)e=0;else if((e=ee(e,f("Integer"),"to_int"))<0&&(e+=s.length)<0)return p;if(r.$$is_regexp)for(i=$(r);;){if(null===(n=i.exec(s))){A["~"]=p,t=-1;break}if(n.index>=e){A["~"]=f("MatchData").$new(i,n),t=n.index;break}i.lastIndex=n.index+1}else t=0===(r=ee(r,f("String"),"to_str")).length&&e>s.length?-1:s.indexOf(r,e);return-1===t?p:t},-2),E(h,"$inspect",function(){var r=this,s={"\x07":"\\a","\x1b":"\\e","\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"};return'"'+r.replace(/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,function(n){return s[n]?s[n]:(n=n.charCodeAt(0))<=255&&(r.encoding["$binary?"]()||r.internal_encoding["$binary?"]())?"\\x"+("00"+n.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+n.toString(16).toUpperCase()).slice(-4)}).replace(/\#[\$\@\{]/g,"\\$&")+'"'}),E(h,"$intern",function(){return this.toString()}),E(h,"$length",function(){return this.length}),b(h,"size","length"),E(h,"$lines",function a(r,e){var t,n,i,c,s=a.$$p||p,x=p;return null==A["/"]&&(A["/"]=p),a.$$p=null,t=R(arguments),n=Z(t),n=W(n),t.length>0&&(i=t.shift()),null==i&&(i=A["/"]),null==(c=n.$$smap.chomp)&&(c=!1),x=Y(this,"each_line",[i,I(["chomp"],{chomp:c})],s.$to_proc()),w(s)?this:x.$to_a()},-1),E(h,"$ljust",function(r,e){var s=this;if(null==e&&(e=" "),r=ee(r,f("Integer"),"to_int"),e=ee(e,f("String"),"to_str").$to_s(),w(e["$empty?"]())&&L.$raise(f("ArgumentError"),"zero width padding"),w(r<=s.length))return s;var t=-1,n="";for(r-=s.length;++t<r;)n+=e;return s+n.slice(0,r)},-2),E(h,"$lstrip",function(){return this.replace(/^[\u0000\s]*/,"")}),E(h,"$ascii_only?",function(){return!!this.encoding.ascii&&/^[\x00-\x7F]*$/.test(this)}),E(h,"$match",function a(r,e){var s=a.$$p||p;return a.$$p=null,(U(m("String"),r)||w(r["$respond_to?"]("to_str")))&&(r=f("Regexp").$new(r.$to_str())),U(f("Regexp"),r)||L.$raise(f("TypeError"),"wrong argument type "+r.$class()+" (expected Regexp)"),Y(r,"match",[this,e],s.$to_proc())},-2),E(h,"$match?",function(r,e){return(U(m("String"),r)||w(r["$respond_to?"]("to_str")))&&(r=f("Regexp").$new(r.$to_str())),U(f("Regexp"),r)||L.$raise(f("TypeError"),"wrong argument type "+r.$class()+" (expected Regexp)"),r["$match?"](this,e)},-2),E(h,"$next",function(){var r=this,e=r.length;if(0===e)return"";for(var i,s=r,t=r.search(/[a-zA-Z0-9]/),n=!1;e--;){if((i=r.charCodeAt(e))>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122)switch(i){case 57:n=!0,i=48;break;case 90:n=!0,i=65;break;case 122:n=!0,i=97;break;default:n=!1,i+=1}else-1===t?255===i?(n=!0,i=0):(n=!1,i+=1):n=!0;if(s=s.slice(0,e)+String.fromCharCode(i)+s.slice(e+1),n&&(0===e||e===t)){switch(i){case 65:case 97:break;default:i+=1}s=0===e?String.fromCharCode(i)+s:s.slice(0,e)+String.fromCharCode(i)+s.slice(e),n=!1}if(!n)break}return s}),E(h,"$oct",function(){var e,s=this,t=8;return/^\s*_/.test(s)?0:(s=s.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(n,i,c,o){switch(o.charAt(0)){case"+":case"-":return n;case"0":if("x"===o.charAt(1)&&"0x"===c)return n}switch(c){case"0b":t=2;break;case"0":case"0o":t=8;break;case"0d":t=10;break;case"0x":t=16}return i+o}),e=parseInt(s.replace(/_(?!_)/g,""),t),isNaN(e)?0:e)}),E(h,"$ord",function(){var r=this;return"function"==typeof r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}),E(h,"$partition",function(r){var s,t,e=this;return r.$$is_regexp?null===(t=r.exec(e))?s=-1:(f("MatchData").$new(r,t),r=t[0],s=t.index):(r=ee(r,f("String"),"to_str"),s=e.indexOf(r)),-1===s?[e,"",""]:[e.slice(0,s),e.slice(s,s+r.length),e.slice(s+r.length)]}),E(h,"$reverse",function(){return this.split("").reverse().join("")}),E(h,"$rindex",function(r,e){var t,n,i,c,s=this;if(void 0===e)e=s.length;else if((e=ee(e,f("Integer"),"to_int"))<0&&(e+=s.length)<0)return p;if(r.$$is_regexp){for(n=null,i=$(r);!(null===(c=i.exec(s))||c.index>e);)i.lastIndex=(n=c).index+1;null===n?(A["~"]=p,t=-1):(f("MatchData").$new(i,n),t=n.index)}else r=ee(r,f("String"),"to_str"),t=s.lastIndexOf(r,e);return-1===t?p:t},-2),E(h,"$rjust",function(r,e){var s=this;if(null==e&&(e=" "),r=ee(r,f("Integer"),"to_int"),e=ee(e,f("String"),"to_str").$to_s(),w(e["$empty?"]())&&L.$raise(f("ArgumentError"),"zero width padding"),w(r<=s.length))return s;var t=Math.floor(r-s.length),n=Math.floor(t/e.length),i=Array(n+1).join(e);return i+e.slice(0,t-i.length)+s},-2),E(h,"$rpartition",function(r){var s,t,n,i,e=this;if(r.$$is_regexp){for(t=null,n=$(r);null!==(i=n.exec(e));)n.lastIndex=(t=i).index+1;null===t?s=-1:(f("MatchData").$new(n,t),r=t[0],s=t.index)}else r=ee(r,f("String"),"to_str"),s=e.lastIndexOf(r);return-1===s?["","",e]:[e.slice(0,s),e.slice(s,s+r.length),e.slice(s+r.length)]}),E(h,"$rstrip",function(){return this.replace(/[\s\u0000]*$/,"")}),E(h,"$scan",function a(r,e){var t,s=a.$$p||p;a.$$p=null,null==(t=(e=W(e)).$$smap.no_matchdata)&&(t=!1);var o,i=[],c=p;for(r.$$is_regexp?r=$(r):(r=ee(r,f("String"),"to_str"),r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));null!=(o=r.exec(this));)c=f("MatchData").$new(r,o,I(["no_matchdata"],{no_matchdata:t})),s===p?i.push(1==o.length?o[0]:c.$captures()):l.yield1(s,1==o.length?o[0]:c.$captures()),r.lastIndex===o.index&&(r.lastIndex+=1);return t||(A["~"]=c),s!==p?this:i},-2),E(h,"$singleton_class",function(){return l.get_singleton_class(this)}),E(h,"$split",function(r,e){var s=this,t=p;if(null==A[";"]&&(A[";"]=p),0===s.length)return[];if(void 0===e)e=0;else if(1===(e=C["$coerce_to!"](e,f("Integer"),"to_int")))return[s];(void 0===r||r===p)&&(r=w(t=A[";"])?t:" ");var o,x,j,n=[],i=s.toString(),c=0;if(r.$$is_regexp?r=$(r):" "===(r=ee(r,f("String"),"to_str").$to_s())?(r=/\s+/gm,i=i.replace(/^\s+/,"")):r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"),1===(n=i.split(r)).length&&n[0]===i)return[n[0]];for(;-1!==(x=n.indexOf(void 0));)n.splice(x,1);if(0===e){for(;""===n[n.length-1];)n.length-=1;return n}if(o=r.exec(i),e<0){if(null!==o&&""===o[0]&&-1===r.source.indexOf("(?="))for(x=0,j=o.length;x<j;x++)n.push("");return n}if(null!==o&&""===o[0])return n.splice(e-1,n.length-1,n.slice(e-1).join("")),n;if(e>=n.length)return n;for(x=0;null!==o&&(x++,c=r.lastIndex,x+1!==e);)o=r.exec(i);return n.splice(e-1,n.length-1,i.slice(c)),n},-1),E(h,"$squeeze",function(r){var s,t=this;if(0===(s=R(arguments)).length)return t.replace(/(.)\1+/g,"$1");var n=d(s);return null===n?t:t.replace(new RegExp("("+n+")\\1+","g"),"$1")},-1),E(h,"$start_with?",function(r){for(var s,n=0,i=(s=R(arguments)).length;n<i;n++)if(s[n].$$is_regexp){var c=s[n],o=c.exec(this);if(null!=o&&0===o.index)return A["~"]=f("MatchData").$new(c,o),!0;A["~"]=p}else{var x=ee(s[n],f("String"),"to_str").$to_s();if(0===this.indexOf(x))return!0}return!1},-1),E(h,"$strip",function(){return this.replace(/^[\s\u0000]*|[\s\u0000]*$/g,"")}),E(h,"$sub",function a(r,e){var s=a.$$p||p,t=this;a.$$p=null,r.$$is_regexp||(r=ee(r,f("String"),"to_str"),r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var n,i=r.exec(t);return null===i?(A["~"]=p,n=t.toString()):(f("MatchData").$new(r,i),void 0===e?(s===p&&L.$raise(f("ArgumentError"),"wrong number of arguments (1 for 2)"),n=t.slice(0,i.index)+s(i[0])+t.slice(i.index+i[0].length)):e.$$is_hash?n=t.slice(0,i.index)+e["$[]"](i[0]).$to_s()+t.slice(i.index+i[0].length):(e=(e=ee(e,f("String"),"to_str")).replace(/([\\]+)([0-9+&`'])/g,function(c,o,x){if(o.length%2==0)return c;switch(x){case"+":for(var j=i.length-1;j>0;j--)if(void 0!==i[j])return o.slice(1)+i[j];return"";case"&":return o.slice(1)+i[0];case"`":return o.slice(1)+t.slice(0,i.index);case"'":return o.slice(1)+t.slice(i.index+i[0].length);default:return o.slice(1)+(i[x]||"")}}).replace(/\\\\/g,"\\"),n=t.slice(0,i.index)+e+t.slice(i.index+i[0].length))),n},-2),E(h,"$sum",function(r){null==r&&(r=16),r=ee(r,f("Integer"),"to_int");for(var s=0,t=this.length,n=0;n<t;n++)s+=this.charCodeAt(n);return r<=0?s:s&Math.pow(2,r)-1},-1),E(h,"$swapcase",function(){return this.replace(/([a-z]+)|([A-Z]+)/g,function(s,t,n){return t?s.toUpperCase():s.toLowerCase()})}),E(h,"$to_f",function(){if("_"===this.charAt(0))return 0;var e=parseFloat(this.replace(/_/g,""));return isNaN(e)||e==1/0||e==-1/0?0:e}),E(h,"$to_i",function(r){null==r&&(r=10);var s,t=this.toLowerCase(),n=ee(r,f("Integer"),"to_int");return(1===n||n<0||n>36)&&L.$raise(f("ArgumentError"),"invalid radix "+n),/^\s*_/.test(t)?0:(t=t.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(i,c,o,x){switch(x.charAt(0)){case"+":case"-":return i;case"0":if("x"===x.charAt(1)&&"0x"===o&&(0===n||16===n))return i}switch(o){case"0b":if(0===n||2===n)return n=2,c+x;break;case"0":case"0o":if(0===n||8===n)return n=8,c+x;break;case"0d":if(0===n||10===n)return n=10,c+x;break;case"0x":if(0===n||16===n)return n=16,c+x}return i}),s=parseInt(t.replace(/_(?!_)/g,""),n),isNaN(s)?0:s)},-1),E(h,"$to_proc",function a(){var s,t,n=p;return a.$$p=null,s=this.valueOf(),t=l.jsid(s),n=Y(L,"proc",[],function i(c){var j,o=i.$$p||p;i.$$p=null,0===(j=R(arguments)).length&&L.$raise(f("ArgumentError"),"no receiver given");var O=j[0];null==O&&(O=p);var te=O[t];return te?j=j.slice(1):(te=O.$method_missing,j[0]=s),"function"==typeof o&&(te.$$p=o),0===j.length?te.call(O):te.apply(O,j)},-1),n.$$source_location=p,n}),E(h,"$to_s",function(){return this.toString()}),E(h,"$tr",function(r,e){var s=this;if(r=ee(r,f("String"),"to_str").$to_s(),e=ee(e,f("String"),"to_str").$to_s(),0==r.length||r===e)return s;var t,n,i,c,o,x,j,O={},te=r.split(""),ne=te.length,ae=e.split(""),le=ae.length,oe=!1,ue=null;"^"===te[0]&&te.length>1&&(oe=!0,te.shift(),ue=ae[le-1],ne-=1);var ie=[],X=null;for(n=!1,t=0;t<ne;t++)if(c=te[t],null==X)X=c,ie.push(c);else if("-"===c)"-"===X?(ie.push("-"),ie.push("-")):t==ne-1?ie.push("-"):n=!0;else if(n){for((o=X.charCodeAt(0))>(x=c.charCodeAt(0))&&L.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(x)+'" in string transliteration'),i=o+1;i<x;i++)ie.push(String.fromCharCode(i));ie.push(c),n=null,X=null}else ie.push(c);if(ne=(te=ie).length,oe)for(t=0;t<ne;t++)O[te[t]]=!0;else{if(le>0){var D=[],V=null;for(n=!1,t=0;t<le;t++)if(c=ae[t],null==V)V=c,D.push(c);else if("-"===c)"-"===V?(D.push("-"),D.push("-")):t==le-1?D.push("-"):n=!0;else if(n){for((o=V.charCodeAt(0))>(x=c.charCodeAt(0))&&L.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(x)+'" in string transliteration'),i=o+1;i<x;i++)D.push(String.fromCharCode(i));D.push(c),n=null,V=null}else D.push(c);le=(ae=D).length}var J=ne-le;if(J>0){var u=le>0?ae[le-1]:"";for(t=0;t<J;t++)ae.push(u)}for(t=0;t<ne;t++)O[te[t]]=ae[t]}var y="";for(t=0,j=s.length;t<j;t++){var K=O[c=s.charAt(t)];y+=oe?null==K?ue:c:K??c}return y}),E(h,"$tr_s",function(r,e){var s=this;if(r=ee(r,f("String"),"to_str").$to_s(),e=ee(e,f("String"),"to_str").$to_s(),0==r.length)return s;var t,n,i,c,o,x,j,O={},te=r.split(""),ne=te.length,ae=e.split(""),le=ae.length,oe=!1,ue=null;"^"===te[0]&&te.length>1&&(oe=!0,te.shift(),ue=ae[le-1],ne-=1);var ie=[],X=null;for(n=!1,t=0;t<ne;t++)if(c=te[t],null==X)X=c,ie.push(c);else if("-"===c)"-"===X?(ie.push("-"),ie.push("-")):t==ne-1?ie.push("-"):n=!0;else if(n){for((o=X.charCodeAt(0))>(x=c.charCodeAt(0))&&L.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(x)+'" in string transliteration'),i=o+1;i<x;i++)ie.push(String.fromCharCode(i));ie.push(c),n=null,X=null}else ie.push(c);if(ne=(te=ie).length,oe)for(t=0;t<ne;t++)O[te[t]]=!0;else{if(le>0){var D=[];for(n=!1,t=0;t<le;t++)if(c=ae[t],null==X)X=c,D.push(c);else if("-"===c)t==le-1?D.push("-"):n=!0;else if(n){for((o=X.charCodeAt(0))>(x=c.charCodeAt(0))&&L.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(o)+"-"+String.fromCharCode(x)+'" in string transliteration'),i=o+1;i<x;i++)D.push(String.fromCharCode(i));D.push(c),n=null,X=null}else D.push(c);le=(ae=D).length}var J=ne-le;if(J>0){var u=le>0?ae[le-1]:"";for(t=0;t<J;t++)ae.push(u)}for(t=0;t<ne;t++)O[te[t]]=ae[t]}var y="",K=null;for(t=0,j=s.length;t<j;t++){var G=O[c=s.charAt(t)];oe?null==G?null==K&&(y+=ue,K=!0):(y+=c,K=null):null!=G?(null==K||K!==G)&&(y+=G,K=G):(y+=c,K=null)}return y}),E(h,"$upcase",function(){return this.toUpperCase()}),E(h,"$upto",function a(r,e){var s=a.$$p||p,t=this;if(a.$$p=null,null==e&&(e=!1),s===p)return t.$enum_for("upto",r,e);var n,i,c=t.toString();if(r=ee(r,f("String"),"to_str"),1===c.length&&1===r.length)for(n=c.charCodeAt(0),i=r.charCodeAt(0);n<=i&&(!e||n!==i);)s(String.fromCharCode(n)),n+=1;else if(parseInt(c,10).toString()===c&&parseInt(r,10).toString()===r)for(n=parseInt(c,10),i=parseInt(r,10);n<=i&&(!e||n!==i);)s(n.toString()),n+=1;else for(;c.length<=r.length&&c<=r&&(!e||c!==r);)s(c),c=c.$succ();return t},-2),E(h,"$instance_variables",function(){return[]}),B(h,"$_load",function(r){var e;return e=R(arguments),Y(this,"new",H(e))},-1),E(h,"$unicode_normalize",function(r){return null==r&&(r="nfc"),w(["nfc","nfd","nfkc","nfkd"]["$include?"](r))||L.$raise(f("ArgumentError"),"Invalid normalization form "+r),this.normalize(r.$upcase())},-1),E(h,"$unicode_normalized?",function(r){return null==r&&(r="nfc"),this.$unicode_normalize(r)["$=="](this)},-1),E(h,"$unpack",function(r){return L.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),E(h,"$unpack1",function(r){return L.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),E(h,"$freeze",function(){var r=this;return"string"==typeof r||P(r,"$$frozen",!0),r}),E(h,"$-@",function(){var r=this;return"string"==typeof r||r.$$frozen?r:"UTF-8"==r.encoding.name&&"UTF-8"==r.internal_encoding.name?r.toString():r.$dup().$freeze()}),E(h,"$frozen?",function(){return"string"==typeof this||!0===this.$$frozen}),b(h,"+@","dup"),b(h,"===","=="),b(h,"byteslice","[]"),b(h,"eql?","=="),b(h,"equal?","==="),b(h,"object_id","__id__"),b(h,"slice","[]"),b(h,"succ","next"),b(h,"to_str","to_s"),b(h,"to_sym","intern"),C.$pristine(h,"initialize")}(0,0,S),g(S[0],"Symbol",_("String"))},Opal.modules["corelib/enumerable"]=function(l){var ee=l.truthy,re=l.coerce_to,$=l.yield1,P=l.yieldX,Q=l.deny_frozen_access,E=l.module,C=l.send,B=l.slice,R=l.to_a,Y=l.Opal,H=l.thrower,Z=l.def,W=l.Kernel,U=l.return_val,L=l.rb_gt,w=l.rb_times,A=l.rb_lt,F=l.eqeq,k=l.rb_plus,T=l.rb_minus,I=l.rb_divide,b=l.rb_le,g=l.hash2,q=l.lambda,S=l.not,_=l.alias,f=l.nil,z=l.$$$;return function(v,N){var h=E("::","Enumerable"),M=[h].concat([]),m=l.$r(M);function d(a){return 0===a.length&&(a=[f]),a.length>1&&(a=[a]),a}return Z(h,"$all?",function a(r){try{var e=H("return"),s=a.$$p||f;return a.$$p=null,ee(void 0!==r)?C(this,"each",[],function(i){var x;if(x=d(B(arguments)),ee(C(r,"public_send",["==="].concat(R(x)))))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}):C(this,"each",[],s!==f?function(i){var c;if(c=B(arguments),ee(l.yieldX(s,R(c))))return f;e.$throw(!1)}:function(i){var c;if(c=B(arguments),ee(Y.$destructure(c)))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}),!0}catch(n){if(n===e)return n.$v;throw n}},-1),Z(h,"$any?",function a(r){try{var e=H("return"),s=a.$$p||f;return a.$$p=null,ee(void 0!==r)?C(this,"each",[],function(i){var x;if(x=d(B(arguments)),!ee(C(r,"public_send",["==="].concat(R(x)))))return f;e.$throw(!0)},{$$arity:-1,$$ret:e}):C(this,"each",[],s!==f?function(i){var c;if(c=B(arguments),!ee(l.yieldX(s,R(c))))return f;e.$throw(!0)}:function(i){var c;if(c=B(arguments),!ee(Y.$destructure(c)))return f;e.$throw(!0)},{$$arity:-1,$$ret:e}),!1}catch(n){if(n===e)return n.$v;throw n}},-1),Z(h,"$chunk",function a(){var r=a.$$p||f,e=this;return a.$$p=null,r===f?C(e,"to_enum",["chunk"],function s(){return(null==s.$$s?this:s.$$s).$enumerator_size()},{$$s:e}):C(z("Enumerator"),"new",[],function s(t){var n=null==s.$$s?this:s.$$s;null==t&&(t=f);var i=f,c=[];function o(){c.length>0&&t.$yield(i,c)}n.$each.$$p=function(x){var j=$(r,x);j===f?(o(),c=[],i=f):(i===f||i===j?c.push(x):(o(),c=[x]),i=j)},n.$each(),o()},{$$s:e})}),Z(h,"$chunk_while",function a(){var r=a.$$p||f;return a.$$p=null,r===f&&W.$raise(z("ArgumentError"),"no block given"),C(this,"slice_when",[],function(t,n){return null==t&&(t=f),null==n&&(n=f),l.yieldX(r,[t,n])["$!"]()})}),Z(h,"$collect",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return C(e,"enum_for",["collect"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e});var s=[];return e.$each.$$p=function(){var t=P(r,arguments);s.push(t)},e.$each(),s}),Z(h,"$collect_concat",function a(){var r=a.$$p||f,e=this;return a.$$p=null,r===f?C(e,"enum_for",["collect_concat"],function s(){return(null==s.$$s?this:s.$$s).$enumerator_size()},{$$s:e}):C(e,"map",[],r.$to_proc()).$flatten(1)}),Z(h,"$compact",function(){return this.$to_a().$compact()}),Z(h,"$count",function a(r){var e=a.$$p||f,t=f;return a.$$p=null,t=0,null!=r&&e!==f&&this.$warn("warning: given block not used"),ee(null!=r)?e=C(W,"proc",[],function(i){var c;return c=B(arguments),Y.$destructure(c)["$=="](r)},-1):ee(e["$nil?"]())&&(e=C(W,"proc",[],U(!0))),C(this,"each",[],function(i){var c;return c=B(arguments),ee(P(e,c))?t++:f},-1),t},-1),Z(h,"$cycle",function a(r){var e=a.$$p||f,s=this;if(a.$$p=null,null==r&&(r=f),e===f)return C(s,"enum_for",["cycle",r],function o(){var x=null==o.$$s?this:o.$$s;return ee(r["$nil?"]())?ee(x["$respond_to?"]("size"))?z(z("Float"),"INFINITY"):f:(r=Y["$coerce_to!"](r,z("Integer"),"to_int"),ee(L(r,0))?w(x.$enumerator_size(),r):0)},{$$s:s});if(!ee(r["$nil?"]())&&(r=Y["$coerce_to!"](r,z("Integer"),"to_int"),ee(r<=0)))return f;var n,i,t=[];if(s.$each.$$p=function(){var o=Y.$destructure(arguments);$(e,o),t.push(o)},s.$each(),0===t.length)return f;if(r===f)for(;;)for(n=0,i=t.length;n<i;n++)$(e,t[n]);else for(;r>1;){for(n=0,i=t.length;n<i;n++)$(e,t[n]);r--}},-1),Z(h,"$detect",function a(r){try{var e=H("return"),s=a.$$p||f;return a.$$p=null,s===f?this.$enum_for("detect",r):(C(this,"each",[],function(i){var c,x;if(c=B(arguments),x=Y.$destructure(c),!ee(l.yield1(s,x)))return f;e.$throw(x)},{$$arity:-1,$$ret:e}),void 0!==r?"function"==typeof r?r():r:f)}catch(n){if(n===e)return n.$v;throw n}},-1),Z(h,"$drop",function(r){r=re(r,z("Integer"),"to_int"),ee(r<0)&&W.$raise(z("ArgumentError"),"attempt to drop negative size");var s=[],t=0;return this.$each.$$p=function(){r<=t&&s.push(Y.$destructure(arguments)),t++},this.$each(),s}),Z(h,"$drop_while",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return e.$enum_for("drop_while");var s=[],t=!0;return e.$each.$$p=function(){var n=Y.$destructure(arguments);if(t){var i=$(r,n);ee(i)||(t=!1,s.push(n))}else s.push(n)},e.$each(),s}),Z(h,"$each_cons",function a(r){var e=a.$$p||f,s=this;if(a.$$p=null,ee(1!=arguments.length)&&W.$raise(z("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),r=Y.$try_convert(r,z("Integer"),"to_int"),ee(r<=0)&&W.$raise(z("ArgumentError"),"invalid size"),e===f)return C(s,"enum_for",["each_cons",r],function n(){var c=f;return c=(null==n.$$s?this:n.$$s).$enumerator_size(),ee(c["$nil?"]())?f:F(c,0)||ee(A(c,r))?0:k(T(c,r),1)},{$$s:s});var t=[];return s.$each.$$p=function(){var n=Y.$destructure(arguments);t.push(n),t.length>r&&t.shift(),t.length==r&&$(e,t.slice(0,r))},s.$each(),s}),Z(h,"$each_entry",function a(r){var t,e=a.$$p||f,n=this;return a.$$p=null,t=B(arguments),e===f?C(n,"to_enum",["each_entry"].concat(R(t)),function i(){return(null==i.$$s?this:i.$$s).$enumerator_size()},{$$s:n}):(n.$each.$$p=function(){var i=Y.$destructure(arguments);$(e,i)},n.$each.apply(n,t),n)},-1),Z(h,"$each_slice",function a(r){var e=a.$$p||f,s=this;if(a.$$p=null,r=re(r,z("Integer"),"to_int"),ee(r<=0)&&W.$raise(z("ArgumentError"),"invalid slice size"),e===f)return C(s,"enum_for",["each_slice",r],function n(){var i=null==n.$$s?this:n.$$s;return ee(i["$respond_to?"]("size"))?I(i.$size(),r).$ceil():f},{$$s:s});var t=[];return s.$each.$$p=function(){var n=Y.$destructure(arguments);t.push(n),t.length===r&&($(e,t),t=[])},s.$each(),t.length>0&&$(e,t),s}),Z(h,"$each_with_index",function a(r){var t,e=a.$$p||f,n=this;if(a.$$p=null,t=B(arguments),e===f)return C(n,"enum_for",["each_with_index"].concat(R(t)),function c(){return(null==c.$$s?this:c.$$s).$enumerator_size()},{$$s:n});var i=0;return n.$each.$$p=function(){var c=Y.$destructure(arguments);e(c,i),i++},n.$each.apply(n,t),n},-1),Z(h,"$each_with_object",function a(r){var e=a.$$p||f,s=this;return a.$$p=null,e===f?C(s,"enum_for",["each_with_object",r],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:s}):(s.$each.$$p=function(){var t=Y.$destructure(arguments);e(t,r)},s.$each(),r)}),Z(h,"$entries",function(r){var s,t=this;s=B(arguments);var n=[];return t.$each.$$p=function(){n.push(Y.$destructure(arguments))},t.$each.apply(t,s),n},-1),Z(h,"$filter_map",function a(){var r=a.$$p||f,e=this;return a.$$p=null,r===f?C(e,"enum_for",["filter_map"],function s(){return(null==s.$$s?this:s.$$s).$enumerator_size()},{$$s:e}):C(C(e,"map",[],r.$to_proc()),"select",[],"itself".$to_proc())}),Z(h,"$find_all",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return C(e,"enum_for",["find_all"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e});var s=[];return e.$each.$$p=function(){var t=Y.$destructure(arguments),n=$(r,t);ee(n)&&s.push(t)},e.$each(),s}),Z(h,"$find_index",function a(r){try{var e=H("return"),s=a.$$p||f,t=this,n=f;return a.$$p=null,ee(void 0===r&&s===f)?t.$enum_for("find_index"):(null!=r&&s!==f&&t.$warn("warning: given block not used"),n=0,ee(null!=r)?C(t,"each",[],function(c){var o;return o=B(arguments),F(Y.$destructure(o),r)&&e.$throw(n),n+=1},{$$arity:-1,$$ret:e}):C(t,"each",[],function(c){var o;return o=B(arguments),ee(l.yieldX(s,R(o)))&&e.$throw(n),n+=1},{$$arity:-1,$$ret:e}),f)}catch(i){if(i===e)return i.$v;throw i}},-1),Z(h,"$first",function(r){try{var e=H("return"),t=f,n=f;return ee(void 0===r)?C(this,"each",[],function(c){null==c&&(c=f),e.$throw(c)},{$$ret:e}):(t=[],r=re(r,z("Integer"),"to_int"),ee(r<0)&&W.$raise(z("ArgumentError"),"attempt to take negative size"),ee(0==r)?[]:(n=0,C(this,"each",[],function(c){var o;if(o=B(arguments),t.push(Y.$destructure(o)),!ee(r<=++n))return f;e.$throw(t)},{$$arity:-1,$$ret:e}),t))}catch(i){if(i===e)return i.$v;throw i}},-1),Z(h,"$grep",function a(r){var e=a.$$p||f,t=f;return a.$$p=null,t=[],C(this,"each",[],function(i){var o,x;return x=d(o=B(arguments)),ee(C(r,"__send__",["==="].concat(R(x))))?(e!==f?(ee(L(o.$length(),1))&&(o=[o]),o=l.yieldX(e,R(o))):ee(b(o.$length(),1))&&(o=o["$[]"](0)),t.$push(o)):f},-1),t}),Z(h,"$grep_v",function a(r){var e=a.$$p||f,t=f;return a.$$p=null,t=[],C(this,"each",[],function(i){var o,x;return x=d(o=B(arguments)),ee(C(r,"__send__",["==="].concat(R(x))))?f:(e!==f?(ee(L(o.$length(),1))&&(o=[o]),o=l.yieldX(e,R(o))):ee(b(o.$length(),1))&&(o=o["$[]"](0)),t.$push(o))},-1),t}),Z(h,"$group_by",function a(){var e,r=a.$$p||f,s=this,t=f,n=f;return a.$$p=null,r===f?C(s,"enum_for",["group_by"],function c(){return(null==c.$$s?this:c.$$s).$enumerator_size()},{$$s:s}):(t=g([],{}),s.$each.$$p=function(){var c=Y.$destructure(arguments),o=$(r,c);(ee(n=t["$[]"](o))?n:(e=[o,[]],C(t,"[]=",e),e[e.length-1]))["$<<"](c)},s.$each(),t)}),Z(h,"$include?",function(r){try{var e=H("return");return C(this,"each",[],function(n){var i;if(i=B(arguments),!F(Y.$destructure(i),r))return f;e.$throw(!0)},{$$arity:-1,$$ret:e}),!1}catch(t){if(t===e)return t.$v;throw t}}),Z(h,"$inject",function a(r,e){var s=a.$$p||f,t=this;a.$$p=null;var n=r;return s!==f&&void 0===e?t.$each.$$p=function(){var i=Y.$destructure(arguments);void 0!==n?(i=P(s,[n,i]),n=i):n=i}:(void 0===e&&(z("Symbol")["$==="](r)||W.$raise(z("TypeError"),r.$inspect()+" is not a Symbol"),e=r,n=void 0),t.$each.$$p=function(){var i=Y.$destructure(arguments);n=void 0!==n?n.$__send__(e,i):i}),t.$each(),n??f},-1),Z(h,"$lazy",function(){return C(z(z("Enumerator"),"Lazy"),"new",[this,this.$enumerator_size()],function(s,t){var n;return null==s&&(s=f),n=B(arguments,1),C(s,"yield",R(n))},-2)}),Z(h,"$enumerator_size",function(){return ee(this["$respond_to?"]("size"))?this.$size():f}),Z(h,"$max",function a(r){var t,n,e=a.$$p||f,s=this;return a.$$p=null,void 0===r||r===f?(s.$each.$$p=function(){var i=Y.$destructure(arguments);void 0!==t?((n=e!==f?P(e,[i,t]):i["$<=>"](t))===f&&W.$raise(z("ArgumentError"),"comparison failed"),n>0&&(t=i)):t=i},s.$each(),void 0===t?f:t):(r=re(r,z("Integer"),"to_int"),C(s,"sort",[],e.$to_proc()).$reverse().$first(r))},-1),Z(h,"$max_by",function a(r){var t,n,e=a.$$p||f,s=this;return a.$$p=null,null==r&&(r=f),ee(e)?ee(r["$nil?"]())?(s.$each.$$p=function(){var i=Y.$destructure(arguments),c=$(e,i);if(void 0===t)return t=i,void(n=c);c["$<=>"](n)>0&&(t=i,n=c)},s.$each(),void 0===t?f:t):C(s,"sort_by",[],e.$to_proc()).$reverse().$take(r):C(s,"enum_for",["max_by",r],function i(){return(null==i.$$s?this:i.$$s).$enumerator_size()},{$$s:s})},-1),Z(h,"$min",function a(r){var t,e=a.$$p||f,s=this;return a.$$p=null,null==r&&(r=f),ee(r["$nil?"]())?(s.$each.$$p=e!==f?function(){var n=Y.$destructure(arguments);if(void 0!==t){var i=e(n,t);i===f&&W.$raise(z("ArgumentError"),"comparison failed"),i<0&&(t=n)}else t=n}:function(){var n=Y.$destructure(arguments);void 0!==t?Y.$compare(n,t)<0&&(t=n):t=n},s.$each(),void 0===t?f:t):e!==f?C(s,"sort",[],function(i,c){return null==i&&(i=f),null==c&&(c=f),l.yieldX(e,[i,c])}).$take(r):s.$sort().$take(r)},-1),Z(h,"$min_by",function a(r){var t,n,e=a.$$p||f,s=this;return a.$$p=null,null==r&&(r=f),ee(e)?ee(r["$nil?"]())?(s.$each.$$p=function(){var i=Y.$destructure(arguments),c=$(e,i);if(void 0===t)return t=i,void(n=c);c["$<=>"](n)<0&&(t=i,n=c)},s.$each(),void 0===t?f:t):C(s,"sort_by",[],e.$to_proc()).$take(r):C(s,"enum_for",["min_by",r],function i(){return(null==i.$$s?this:i.$$s).$enumerator_size()},{$$s:s})},-1),Z(h,"$minmax",function a(){var s,r=a.$$p||f;a.$$p=null,r=ee(s=r)?s:C(W,"proc",[],function(o,x){return null==o&&(o=f),null==x&&(x=f),o["$<=>"](x)});var t=f,n=f,i=!0;return this.$each.$$p=function(){var c=Y.$destructure(arguments);if(i)t=n=c,i=!1;else{var o=r.$call(t,c);o===f?W.$raise(z("ArgumentError"),"comparison failed"):o>0&&(t=c);var x=r.$call(n,c);x===f?W.$raise(z("ArgumentError"),"comparison failed"):x<0&&(n=c)}},this.$each(),[t,n]}),Z(h,"$minmax_by",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,!ee(r))return C(e,"enum_for",["minmax_by"],function c(){return(null==c.$$s?this:c.$$s).$enumerator_size()},{$$s:e});var n,i,s=f,t=f;return e.$each.$$p=function(){var c=Y.$destructure(arguments),o=$(r,c);(void 0===n||o["$<=>"](n)<0)&&(s=c,n=o),(void 0===i||o["$<=>"](i)>0)&&(t=c,i=o)},e.$each(),[s,t]}),Z(h,"$none?",function a(r){try{var e=H("return"),s=a.$$p||f;return a.$$p=null,ee(void 0!==r)?C(this,"each",[],function(i){var x;if(x=d(B(arguments)),!ee(C(r,"public_send",["==="].concat(R(x)))))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}):C(this,"each",[],s!==f?function(i){var c;if(c=B(arguments),!ee(l.yieldX(s,R(c))))return f;e.$throw(!1)}:function(i){var c,x;if(c=B(arguments),x=Y.$destructure(c),!ee(x))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}),!0}catch(n){if(n===e)return n.$v;throw n}},-1),Z(h,"$one?",function a(r){try{var e=H("return"),s=a.$$p||f,n=f;return a.$$p=null,n=0,ee(void 0!==r)?C(this,"each",[],function(c){var j;return j=d(B(arguments)),ee(C(r,"public_send",["==="].concat(R(j))))?(n=k(n,1),ee(L(n,1))?void e.$throw(!1):f):f},{$$arity:-1,$$ret:e}):C(this,"each",[],s!==f?function(c){var o;return o=B(arguments),ee(l.yieldX(s,R(o)))?(n=k(n,1),ee(L(n,1))?void e.$throw(!1):f):f}:function(c){var o;return o=B(arguments),ee(Y.$destructure(o))?(n=k(n,1),ee(L(n,1))?void e.$throw(!1):f):f},{$$arity:-1,$$ret:e}),n["$=="](1)}catch(i){if(i===e)return i.$v;throw i}},-1),Z(h,"$partition",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return C(e,"enum_for",["partition"],function i(){return(null==i.$$s?this:i.$$s).$enumerator_size()},{$$s:e});var s=[],t=[];return e.$each.$$p=function(){var i=Y.$destructure(arguments),c=$(r,i);ee(c)?s.push(i):t.push(i)},e.$each(),[s,t]}),Z(h,"$reject",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return C(e,"enum_for",["reject"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e});var s=[];return e.$each.$$p=function(){var t=Y.$destructure(arguments),n=$(r,t);ee(n)||s.push(t)},e.$each(),s}),Z(h,"$reverse_each",function a(){var r=a.$$p||f,e=this;if(a.$$p=null,r===f)return C(e,"enum_for",["reverse_each"],function n(){return(null==n.$$s?this:n.$$s).$enumerator_size()},{$$s:e});var s=[];e.$each.$$p=function(){s.push(arguments)},e.$each();for(var t=s.length-1;t>=0;t--)P(r,s[t]);return s}),Z(h,"$slice_before",function a(r){var e=a.$$p||f;return a.$$p=null,ee(void 0===r&&e===f)&&W.$raise(z("ArgumentError"),"both pattern and block are given"),ee(void 0!==r&&e!==f||arguments.length>1)&&W.$raise(z("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),C(z("Enumerator"),"new",[],function t(n){var i=null==t.$$s?this:t.$$s;null==n&&(n=f);var c=[];i.$each.$$p=e!==f?void 0===r?function(){var o=Y.$destructure(arguments),x=$(e,o);ee(x)&&c.length>0&&(n["$<<"](c),c=[]),c.push(o)}:function(){var o=Y.$destructure(arguments),x=e(o,r.$dup());ee(x)&&c.length>0&&(n["$<<"](c),c=[]),c.push(o)}:function(){var o=Y.$destructure(arguments),x=r["$==="](o);ee(x)&&c.length>0&&(n["$<<"](c),c=[]),c.push(o)},i.$each(),c.length>0&&n["$<<"](c)},{$$s:this})},-1),Z(h,"$slice_after",function a(r){var e=a.$$p||f;return a.$$p=null,ee(void 0===r&&e===f)&&W.$raise(z("ArgumentError"),"both pattern and block are given"),ee(void 0!==r&&e!==f||arguments.length>1)&&W.$raise(z("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),ee(void 0!==r)&&(e=C(W,"proc",[],function(n){return null==n&&(n=f),r["$==="](n)})),C(z("Enumerator"),"new",[],function t(n){var c,i=null==t.$$s?this:t.$$s;null==n&&(n=f),i.$each.$$p=function(){var o=Y.$destructure(arguments),x=$(e,o);null==c&&(c=[]),ee(x)?(c.push(o),n.$yield(c),c=null):c.push(o)},i.$each(),null!=c&&n.$yield(c)},{$$s:this})},-1),Z(h,"$slice_when",function a(){var r=a.$$p||f;return a.$$p=null,r===f&&W.$raise(z("ArgumentError"),"wrong number of arguments (0 for 1)"),C(z("Enumerator"),"new",[],function s(t){var n=null==s.$$s?this:s.$$s;null==t&&(t=f);var i=f,c=f;n.$each_cons.$$p=function(){var o=Y.$destructure(arguments),x=o[0],j=o[1],O=P(r,[x,j]);c=j,i===f&&(i=[]),ee(O)?(i.push(x),t.$yield(i),i=[]):i.push(x)},n.$each_cons(2),i!==f&&(i.push(c),t.$yield(i))},{$$s:this})}),Z(h,"$sort",function a(){var s,r=a.$$p||f;return a.$$p=null,s=this.$to_a(),r===f&&(r=q(function(n,i){return null==n&&(n=f),null==i&&(i=f),n["$<=>"](i)})),C(s,"sort",[],r.$to_proc())}),Z(h,"$sort_by",function a(){var r=a.$$p||f,e=this,s=f;return a.$$p=null,r===f?C(e,"enum_for",["sort_by"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e}):(s=C(e,"map",[],function(){var n;return n=Y.$destructure(arguments),[l.yield1(r,n),n]}),C(s,"sort!",[],function(n,i){return null==n&&(n=f),null==i&&(i=f),n[0]["$<=>"](i[0])}),C(s,"map!",[],function(n){return null==n&&(n=f),n[1]}))}),Z(h,"$sum",function a(r){var e=a.$$p||f,t=f,n=f;return a.$$p=null,null==r&&(r=0),t=r,n=0,C(this,"each",[],function(c){var x,j=f,O=f,te=f;return x=B(arguments),j=e!==f?l.yieldX(e,R(x)):Y.$destructure(x),S([z(z("Float"),"INFINITY"),z(z("Float"),"INFINITY")["$-@"]()]["$include?"](j))&&ee(j["$respond_to?"]("-"))?(O=T(j,n),te=k(t,O),n=T(T(te,t),O),t=te):t=k(t,j)},-1),t},-1),Z(h,"$take",function(r){return this.$first(r)}),Z(h,"$take_while",function a(){try{var r=H("return"),e=a.$$p||f,t=f;return a.$$p=null,ee(e)?(t=[],C(this,"each",[],function(i){var c,x;return c=B(arguments),x=Y.$destructure(c),ee(l.yield1(e,x))||r.$throw(t),t.push(x)},{$$arity:-1,$$ret:r})):this.$enum_for("take_while")}catch(n){if(n===r)return n.$v;throw n}}),Z(h,"$uniq",function a(){var r=a.$$p||f,s=f;return a.$$p=null,s=g([],{}),C(this,"each",[],function(n){var i,o,x,j;return i=B(arguments),x=Y.$destructure(i),j=r!==f?l.yield1(r,x):x,ee(s["$key?"](j))?f:(C(s,"[]=",o=[j,x]),o[o.length-1])},-1),s.$values()}),Z(h,"$tally",function(r){var s;return r&&r!==f&&Q(r),s=C(C(this,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),ee(r)?(C(s,"each",[],function(n,i){var c;return null==n&&(n=f),null==i&&(i=f),c=[n,k(r.$fetch(n,0),i)],C(r,"[]=",c),c[c.length-1]}),r):s},-1),Z(h,"$to_h",function a(r){var t,e=a.$$p||f,n=this;if(a.$$p=null,t=B(arguments),e!==f)return C(C(n,"map",[],e.$to_proc()),"to_h",R(t));var i=g([],{});return n.$each.$$p=function(){var c=Y.$destructure(arguments),o=Y["$coerce_to?"](c,z("Array"),"to_ary");o.$$is_array||W.$raise(z("TypeError"),"wrong element type "+o.$class()+" (expected array)"),2!==o.length&&W.$raise(z("ArgumentError"),"wrong array length (expected 2, was "+o.$length()+")"),l.hash_put(i,o[0],o[1])},n.$each.apply(n,t),i},-1),Z(h,"$to_set",function a(r,e){var t,n,s=a.$$p||f,c=this;return a.$$p=null,(t=B(arguments)).length>0&&(n=t.shift()),null==n&&(n=m("Set")),C(n,"new",[c].concat(R(t)),s.$to_proc())},-1),Z(h,"$zip",function a(r){var t;return a.$$p=null,t=B(arguments),C(this.$to_a(),"zip",R(t))},-1),_(h,"find","detect"),_(h,"filter","find_all"),_(h,"flat_map","collect_concat"),_(h,"map","collect"),_(h,"member?","include?"),_(h,"reduce","inject"),_(h,"select","find_all"),_(h,"to_a","entries")}()},Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(l){var g,q,S,ee=l.klass,re=l.truthy,$=l.to_a,P=l.eqeq,Q=l.Kernel,E=l.def,C=l.rb_gt,B=l.rb_lt,R=l.rb_le,Y=l.rb_ge,H=l.rb_plus,Z=l.rb_minus,W=l.eqeqeq,U=l.not,L=l.rb_times,w=l.rb_divide,A=l.alias,k=l.nil,T=l.$$$;return g=[],S=[q=ee("::",null,"Enumerator")].concat(g),function(_,p,f){var z=ee(_,p,"ArithmeticSequence"),v=[z].concat(f),N=l.$r(v),h=z.$$prototype;h.step_arg2=h.receiver_num=h.step_arg1=h.step=h.range=h.topfx=h.bypfx=h.creation_method=h.skipped_arg=k,l.prop(z.$$prototype,"$$is_arithmetic_seq",!0);var M=1/0;return E(z,"$initialize",function(d,a,r){var e,s=this,t=k;return null==r&&(r="step"),s.creation_method=r,re(d["$is_a?"](T("Array")))?(e=[].concat($(d)),s.step_arg1=null==e[0]?k:e[0],s.step_arg2=null==e[1]?k:e[1],s.topfx=null==e[2]?k:e[2],s.bypfx=null==e[3]?k:e[3],s.receiver_num=a,s.step=1,s.range=re(s.step_arg2)?(s.step=s.step_arg2,l.Range.$new(s.receiver_num,s.step_arg1,!1)):re(s.step_arg1)?l.Range.$new(s.receiver_num,s.step_arg1,!1):l.Range.$new(s.receiver_num,k,!1)):(re(a)||(s.skipped_arg=!0),e=[d,re(t=a)?t:1],s.range=e[0],s.step=e[1]),s.object=s,P(s.step,0)&&Q.$raise(N("ArgumentError"),"step can't be 0"),re(s.step["$respond_to?"]("to_int"))?k:Q.$raise(N("ArgumentError"),"no implicit conversion of "+s.step.$class()+" into Integer")},-2),z.$attr_reader("step"),E(z,"$begin",function(){return this.range.$begin()}),E(z,"$end",function(){return this.range.$end()}),E(z,"$exclude_end?",function(){return this.range["$exclude_end?"]()}),E(z,"$_lesser_than_end?",function(d){var r,e,a=this;return r=re(e=a.$end())?e:M,re(C(a.$step(),0))?re(a["$exclude_end?"]())?B(d,r):R(d,r):re(a["$exclude_end?"]())?C(d,r):Y(d,r)}),E(z,"$_greater_than_begin?",function(d){var r,e;return r=re(e=this.$begin())?e:M["$-@"](),re(C(this.$step(),0))?C(d,r):B(d,r)}),E(z,"$first",function(d){var a=this,r=k,e=k,s=k;if(r=re(e=a.$begin())?e:M["$-@"](),!re(d))return re(a["$_lesser_than_end?"](r))?r:k;for(s=[];re(re(e=a["$_lesser_than_end?"](r))?C(d,0):e);)s["$<<"](r),r=H(r,a.$step()),d=Z(d,1);return s},-1),E(z,"$each",function m(){var r,d=m.$$p||k,a=this,e=k;if(m.$$p=null,d===k)return a;for(W(k,a.$begin())&&Q.$raise(N("TypeError"),"nil can't be coerced into Integer"),e=re(r=a.$begin())?r:M["$-@"]();re(a["$_lesser_than_end?"](e));)l.yield1(d,e),e=H(e,a.$step());return a}),E(z,"$last",function(d){var a=this,r=k,e=k,s=k;if(W(M,r=a.$end())||W(M["$-@"](),r)?Q.$raise(T("FloatDomainError"),a.$end()):W(k,r)&&Q.$raise(T("RangeError"),"cannot get the last element of endless arithmetic sequence"),e=Z(a.$end(),Z(a.$end(),a.$begin())["$%"](a.$step())),re(a["$_lesser_than_end?"](e))||(e=Z(e,a.$step())),!re(d))return re(a["$_greater_than_begin?"](e))?e:k;for(s=[];re(re(r=a["$_greater_than_begin?"](e))?C(d,0):r);)s["$<<"](e),e=Z(e,a.$step()),d=Z(d,1);return s.$reverse()},-1),E(z,"$size",function(){var a,d=this,r=k;return a=re(C(d.$step(),0))?1:-1,U(d["$_lesser_than_end?"](d.$begin()))?0:re([M["$-@"](),M]["$include?"](d.$step()))?1:re([L(M["$-@"](),a),k]["$include?"](d.$begin()))||re([L(M,a),k]["$include?"](d.$end()))?M:(r=Z(d.$end(),Z(d.$end(),d.$begin())["$%"](d.$step())),re(d["$_lesser_than_end?"](r))||(r=Z(r,d.$step())),H(w(Z(r,d.$begin()),d.$step()).$abs().$to_i(),1))}),E(z,"$==",function(d){var r,e,s,t,a=this;return re(r=re(e=re(s=re(t=a.$class()["$=="](d.$class()))?a.$begin()["$=="](d.$begin()):t)?a.$end()["$=="](d.$end()):s)?a.$step()["$=="](d.$step()):e)?a["$exclude_end?"]()["$=="](d["$exclude_end?"]()):r}),E(z,"$hash",function(){var d=this;return[d.$begin(),d.$end(),d.$step(),d["$exclude_end?"]()].$hash()}),E(z,"$inspect",function(){var d=this,a=k;return re(d.receiver_num)?(a=re(d.step_arg2)?"("+d.topfx+d.step_arg1.$inspect()+", "+d.bypfx+d.step_arg2.$inspect()+")":re(d.step_arg1)?"("+d.topfx+d.step_arg1.$inspect()+")":k,"("+d.receiver_num.$inspect()+"."+d.creation_method+a+")"):(a=re(d.skipped_arg)?k:"("+d.step+")","(("+d.range.$inspect()+")."+d.creation_method+a+")")}),A(z,"===","=="),A(z,"eql?","==")}(q,q,S)},Opal.modules["corelib/enumerator/chain"]=function(l){var A,F,U,ee=l.deny_frozen_access,re=l.klass,$=l.slice,P=l.def,Q=l.send,E=l.to_a,C=l.truthy,B=l.rb_plus,R=l.thrower,Y=l.nil,H=l.$$$;return U=re("::",null,"Enumerator"),(F=(A=re(U,U,"Chain")).$$prototype).enums=F.iterated=Y,P(A,"$initialize",function(T){var b,g=this;return b=$(arguments),ee(g),g.enums=b,g.iterated=[],g.object=g},-1),P(A,"$each",function k(T){var b,g,I=k.$$p||Y,q=this;return k.$$p=null,b=$(arguments),g=b,I===Y?Q(q,"to_enum",["each"].concat(E(g)),function S(){return(null==S.$$s?this:S.$$s).$size()},{$$s:q}):(Q(q.enums,"each",[],function S(_){var p=null==S.$$s?this:S.$$s;return null==p.iterated&&(p.iterated=Y),null==_&&(_=Y),p.iterated["$<<"](_),Q(_,"each",E(g),I.$to_proc())},{$$s:q}),q)},-1),P(A,"$size",function(T){try{var b,g,I=R("return"),S=Y;return b=$(arguments),g=b,S=0,Q(this.enums,"each",[],function(p){var f;return null==p&&(p=Y),f=Q(p,"size",E(g)),C([Y,H(H("Float"),"INFINITY")]["$include?"](f))&&I.$throw(f),S=B(S,f)},{$$ret:I}),S}catch(_){if(_===I)return _.$v;throw _}},-1),P(A,"$rewind",function(){var T=this;return Q(T.iterated,"reverse_each",[],function(b){return null==b&&(b=Y),C(b["$respond_to?"]("rewind"))?b.$rewind():Y}),T.iterated=[],T}),P(A,"$inspect",function(){return"#<Enumerator::Chain: "+this.enums.$inspect()+">"})},Opal.modules["corelib/enumerator/generator"]=function(l){var W,F,k,T,I,L,ee=l.deny_frozen_access,re=l.klass,$=l.truthy,P=l.Kernel,Q=l.def,E=l.slice,C=l.send,B=[],R=l.nil,Y=l.$$$;return W=B,F=L=[re(B[0],null,"Enumerator")].concat(W),T=[k=re(L[0],null,"Generator")].concat(F),I=l.$r(T),k.$$prototype.block=R,k.$include(Y("Enumerable")),Q(k,"$initialize",function g(){var q=g.$$p||R;return g.$$p=null,ee(this),$(q)||P.$raise(Y("LocalJumpError"),"no block given"),this.block=q}),Q(k,"$each",function g(q){var p,z,S=g.$$p||R;g.$$p=null,p=E(arguments),z=C(I("Yielder"),"new",[],S.$to_proc());try{p.unshift(z),l.yieldX(this.block,p)}catch(v){if(v&&"breaker"==v.$thrower_type)return v.$v;throw v}return this},-1)},Opal.modules["corelib/enumerator/lazy"]=function(l){var _,N,h,M,m,p,ee=l.truthy,re=l.coerce_to,$=l.yield1,P=l.yieldX,Q=l.deny_frozen_access,E=l.klass,C=l.slice,B=l.send2,R=l.find_super,Y=l.to_a,H=l.defs,Z=l.Kernel,W=l.send,U=l.def,L=l.return_self,w=l.Opal,A=l.rb_lt,F=l.eqeqeq,k=l.rb_plus,T=l.alias,b=l.nil,g=l.$$$;return _=[],N=[p=E("::",null,"Enumerator")].concat(_),M=[h=E(p,p,"Lazy")].concat(N),m=l.$r(M),h.$$prototype.enumerator=b,E(h,g("Exception"),"StopLazyError"),H(h,"$for",function a(r,e){var t,n=a.$$p||b,c=b;return a.$$p=null,t=C(arguments,1),(c=B(this,R(this,"for",a,!1,!0),"for",[r].concat(Y(t)),n)).enumerator=r,c},-2),U(h,"$initialize",function a(r,e){var s=a.$$p||b,t=this;return a.$$p=null,null==e&&(e=b),Q(t),s===b&&Z.$raise(g("ArgumentError"),"tried to call lazy new without a block"),t.enumerator=r,B(t,R(t,"initialize",a,!1,!0),"initialize",[e],function(i,c){var x;null==i&&(i=b),x=C(arguments,1);try{return W(r,"each",Y(x),function(O){var ne;(ne=C(arguments)).unshift(i),P(s,ne)},-1)}catch(j){if(!l.rescue(j,[m("StopLazyError")]))throw j;try{return b}finally{l.pop_exception()}}},-2)},-2),U(h,"$lazy",L),U(h,"$collect",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||Z.$raise(g("ArgumentError"),"tried to call lazy map without a block"),W(m("Lazy"),"new",[this,this.$enumerator_size()],function(t,n){var i;null==t&&(t=b),i=C(arguments,1);var o=P(r,i);t.$yield(o)},-2)}),U(h,"$collect_concat",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||Z.$raise(g("ArgumentError"),"tried to call lazy map without a block"),W(m("Lazy"),"new",[this,b],function(t,n){var i;null==t&&(t=b),i=C(arguments,1);var o=P(r,i);o["$respond_to?"]("force")&&o["$respond_to?"]("each")?W(o,"each",[],function(O){return null==O&&(O=b),t.$yield(O)}):w.$try_convert(o,g("Array"),"to_ary")===b?t.$yield(o):W(o,"each",[],function(O){return null==O&&(O=b),t.$yield(O)})},-2)}),U(h,"$drop",function(r){var s,t,n=b;return r=re(r,g("Integer"),"to_int"),ee(A(r,0))&&Z.$raise(g("ArgumentError"),"attempt to drop negative size"),s=this.$enumerator_size(),t=F(g("Integer"),s)&&ee(A(r,s))?r:s,n=0,W(m("Lazy"),"new",[this,t],function(c,o){var j;return null==c&&(c=b),j=C(arguments,1),ee(A(n,r))?n=k(n,1):W(c,"yield",Y(j))},-2)}),U(h,"$drop_while",function a(){var r=a.$$p||b,s=b;return a.$$p=null,ee(r)||Z.$raise(g("ArgumentError"),"tried to call lazy drop_while without a block"),s=!0,W(m("Lazy"),"new",[this,b],function(n,i){var o;if(null==n&&(n=b),o=C(arguments,1),!ee(s))return W(n,"yield",Y(o));var x=P(r,o);ee(x)||(s=!1,W(n,"yield",Y(o)))},-2)}),U(h,"$enum_for",function a(r,e){var t,n,i,s=a.$$p||b,c=this;return a.$$p=null,(t=C(arguments)).length>0&&(n=t.shift()),null==n&&(n="each"),i=t,W(c.$class(),"for",[c,n].concat(Y(i)),s.$to_proc())},-1),U(h,"$find_all",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||Z.$raise(g("ArgumentError"),"tried to call lazy select without a block"),W(m("Lazy"),"new",[this,b],function(t,n){var i,c;null==t&&(t=b),i=C(arguments,1);var o=P(r,c=i);ee(o)&&W(t,"yield",Y(c))},-2)}),U(h,"$grep",function a(r){var e=a.$$p||b;return a.$$p=null,ee(e)?W(m("Lazy"),"new",[this,b],function(n,i){var c;null==n&&(n=b),c=C(arguments,1);var x=w.$destructure(c),j=r["$==="](x);ee(j)&&(j=$(e,x),n.$yield($(e,x)))},-2):W(m("Lazy"),"new",[this,b],function(n,i){var c;null==n&&(n=b),c=C(arguments,1);var x=w.$destructure(c),j=r["$==="](x);ee(j)&&n.$yield(x)},-2)}),U(h,"$reject",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||Z.$raise(g("ArgumentError"),"tried to call lazy reject without a block"),W(m("Lazy"),"new",[this,b],function(t,n){var i,c;null==t&&(t=b),i=C(arguments,1);var o=P(r,c=i);ee(o)||W(t,"yield",Y(c))},-2)}),U(h,"$take",function(r){var s,t,n=b;return r=re(r,g("Integer"),"to_int"),ee(A(r,0))&&Z.$raise(g("ArgumentError"),"attempt to take negative size"),s=this.$enumerator_size(),t=F(g("Integer"),s)&&ee(A(r,s))?r:s,n=0,W(m("Lazy"),"new",[this,t],function(c,o){var j;return null==c&&(c=b),j=C(arguments,1),ee(A(n,r))?(W(c,"yield",Y(j)),n=k(n,1)):Z.$raise(m("StopLazyError"))},-2)}),U(h,"$take_while",function a(){var r=a.$$p||b;return a.$$p=null,ee(r)||Z.$raise(g("ArgumentError"),"tried to call lazy take_while without a block"),W(m("Lazy"),"new",[this,b],function(t,n){var i,c;null==t&&(t=b),i=C(arguments,1);var o=P(r,c=i);ee(o)?W(t,"yield",Y(c)):Z.$raise(m("StopLazyError"))},-2)}),U(h,"$inspect",function(){return"#<"+this.$class()+": "+this.enumerator.$inspect()+">"}),T(h,"force","to_a"),T(h,"filter","find_all"),T(h,"flat_map","collect_concat"),T(h,"map","collect"),T(h,"select","find_all"),T(h,"to_enum","enum_for")},Opal.modules["corelib/enumerator/yielder"]=function(l){var Y,L,Z,ee=l.klass,re=l.def,$=l.slice,P=l.send,Q=l.to_a,E=[],C=l.nil;return Y=E,Z=[ee(E[0],null,"Enumerator")].concat(Y),(L=ee(Z[0],null,"Yielder")).$$prototype.block=C,re(L,"$initialize",function A(){var F=A.$$p||C;return A.$$p=null,this.block=F,this}),re(L,"$yield",function(F){var k;k=$(arguments);var b=l.yieldX(this.block,k);if(b&&"break"==b.$thrower_type)throw b;return b},-1),re(L,"$<<",function(F){return this.$yield(F),this}),re(L,"$to_proc",function(){return P(this,"proc",[],function k(T){var I,g=null==k.$$s?this:k.$$s;return I=$(arguments),P(g,"yield",Q(I))},{$$arity:-1,$$s:this})})},Opal.modules["corelib/enumerator"]=function(l){var S,_,p,f,z,ee=l.slice,re=l.coerce_to,$=l.deny_frozen_access,P=l.klass,Q=l.defs,E=l.truthy,C=l.send,B=l.not,R=l.def,Y=l.rb_plus,H=l.to_a,Z=l.Opal,W=l.send2,U=l.find_super,L=l.rb_ge,w=l.Kernel,A=l.rb_le,F=l.alias,I=l.nil,b=l.$$$;return l.top.$require("corelib/enumerable"),S=[],p=[_=P("::",null,"Enumerator")].concat(S),f=l.$r(p),(z=_.$$prototype).size=z.args=z.object=z.method=z.values=z.cursor=I,_.$include(b("Enumerable")),_.$$prototype.$$is_enumerator=!0,Q(_,"$for",function v(N,h,M){var d,a,r,m=v.$$p||I;v.$$p=null,(d=ee(arguments,1)).length>0&&(a=d.shift()),null==a&&(a="each"),r=d;var s=this.$allocate();return s.object=N,s.size=m,s.method=a,s.args=r,s.cursor=0,s},-2),R(_,"$initialize",function v(N){var h=v.$$p||I,d=this;return v.$$p=null,ee(arguments),$(d),d.cursor=0,E(h)?(d.object=C(f("Generator"),"new",[],h.$to_proc()),d.method="each",d.args=[],d.size=arguments[0]||I,E(d.size)&&B(d.size["$respond_to?"]("call"))?d.size=re(d.size,b("Integer"),"to_int"):I):(d.object=arguments[0],d.method=arguments[1]||"each",d.args=ee(arguments,2),d.size=I)},-1),R(_,"$each",function v(N){var m,h=v.$$p||I,d=this;return v.$$p=null,m=ee(arguments),E(h["$nil?"]())&&E(m["$empty?"]())?d:(m=Y(d.args,m),E(h["$nil?"]())?C(d.$class(),"new",[d.object,d.method].concat(H(m))):C(d.object,"__send__",[d.method].concat(H(m)),h.$to_proc()))},-1),R(_,"$size",function(){var N=this;return E(N.size["$respond_to?"]("call"))?C(N.size,"call",H(N.args)):N.size}),R(_,"$with_index",function v(N){var h=v.$$p||I,M=this;if(v.$$p=null,null==N&&(N=0),N=E(N)?re(N,b("Integer"),"to_int"):0,!E(h))return C(M,"enum_for",["with_index",N],function a(){return(null==a.$$s?this:a.$$s).$size()},{$$s:M});var d=N;return M.$each.$$p=function(){var a=Z.$destructure(arguments),r=h(a,d);return d++,r},M.$each()},-1),R(_,"$each_with_index",function v(){var N=v.$$p||I,h=this;return v.$$p=null,N===I?C(h,"enum_for",["each_with_index"],function M(){return(null==M.$$s?this:M.$$s).$size()},{$$s:h}):(W(h,U(h,"each_with_index",v,!1,!0),"each_with_index",[],N),h.object)}),R(_,"$rewind",function(){return this.cursor=0,this}),R(_,"$peek_values",function(){var h,N=this;return N.values=E(h=N.values)?h:C(N,"map",[],function(m){return ee(arguments)},-1),E(L(N.cursor,N.values.$length()))&&w.$raise(b("StopIteration"),"iteration reached an end"),N.values["$[]"](N.cursor)}),R(_,"$peek",function(){var h=I;return h=this.$peek_values(),E(A(h.$length(),1))?h["$[]"](0):h}),R(_,"$next_values",function(){var h,N=this;return h=N.$peek_values(),N.cursor=Y(N.cursor,1),h}),R(_,"$next",function(){var h=I;return h=this.$next_values(),E(A(h.$length(),1))?h["$[]"](0):h}),R(_,"$feed",function(N){return this.$raise(f("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),R(_,"$+",function(N){return b(b("Enumerator"),"Chain").$new(this,N)}),R(_,"$inspect",function(){var N=this,h=I;return h="#<"+N.$class()+": "+N.object.$inspect()+":"+N.method,E(N.args["$any?"]())&&(h=Y(h,"("+N.args.$inspect()["$[]"](b("Range").$new(1,-2))+")")),Y(h,">")}),F(_,"with_object","each_with_object"),_.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),_.$autoload("Chain","corelib/enumerator/chain"),_.$autoload("Generator","corelib/enumerator/generator"),_.$autoload("Lazy","corelib/enumerator/lazy"),_.$autoload("Yielder","corelib/enumerator/yielder")},Opal.modules["corelib/numeric"]=function(l){var z,ee=l.klass,re=l.truthy,$=l.Kernel,P=l.def,Q=l.to_ary,E=l.return_self,C=l.rb_minus,B=l.rb_times,R=l.rb_lt,Y=l.eqeq,H=l.rb_divide,Z=l.return_val,W=l.Opal,U=l.slice,L=l.extract_kwargs,w=l.ensure_kwargs,A=l.not,F=l.send,k=l.rb_ge,T=l.rb_le,I=l.rb_plus,b=l.rb_gt,g=l.alias,S=l.nil,_=l.$$$;return l.top.$require("corelib/comparable"),(z=ee("::",null,"Numeric")).$include(_("Comparable")),P(z,"$coerce",function(N){var h=this;return re(N["$instance_of?"](h.$class()))?[N,h]:[$.$Float(N),$.$Float(h)]}),P(z,"$__coerced__",function(N,h){var M,m;if(re(h["$respond_to?"]("coerce")))return m=h.$coerce(this),(null==(M=Q(m))[0]?S:M[0]).$__send__(N,null==M[1]?S:M[1]);switch(N.valueOf()){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return $.$raise(_("TypeError"),h.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return $.$raise(_("ArgumentError"),"comparison of "+this.$class()+" with "+h.$class()+" failed");default:return S}}),P(z,"$<=>",function(N){return re(this["$equal?"](N))?0:S}),P(z,"$+@",E),P(z,"$-@",function(){return C(0,this)}),P(z,"$%",function(N){return C(this,B(N,this.$div(N)))}),P(z,"$abs",function(){var N=this;return R(N,0)?N["$-@"]():N}),P(z,"$abs2",function(){return B(this,this)}),P(z,"$angle",function(){return R(this,0)?_(_("Math"),"PI"):0}),P(z,"$ceil",function(N){return null==N&&(N=0),this.$to_f().$ceil(N)},-1),P(z,"$conj",E),P(z,"$denominator",function(){return this.$to_r().$denominator()}),P(z,"$div",function(N){return Y(N,0)&&$.$raise(_("ZeroDivisionError"),"divided by o"),H(this,N).$floor()}),P(z,"$divmod",function(N){return[this.$div(N),this["$%"](N)]}),P(z,"$fdiv",function(N){return H(this.$to_f(),N)}),P(z,"$floor",function(N){return null==N&&(N=0),this.$to_f().$floor(N)},-1),P(z,"$i",function(){return $.$Complex(0,this)}),P(z,"$imag",Z(0)),P(z,"$integer?",Z(!1)),P(z,"$nonzero?",function(){return re(this["$zero?"]())?S:this}),P(z,"$numerator",function(){return this.$to_r().$numerator()}),P(z,"$polar",function(){return[this.$abs(),this.$arg()]}),P(z,"$quo",function(N){return H(W["$coerce_to!"](this,_("Rational"),"to_r"),N)}),P(z,"$real",E),P(z,"$real?",Z(!0)),P(z,"$rect",function(){return[this,0]}),P(z,"$round",function(N){return this.$to_f().$round(N)},-1),P(z,"$step",function v(N,h,M){var d,a,r,e,s,t,m=v.$$p||S,n=this,i=S;function c(){e===S&&$.$raise(_("TypeError"),"step must be numeric"),null!=e&&e["$=="](0)&&$.$raise(_("ArgumentError"),"step can't be 0"),(e===S||null==e)&&(e=1);var ue=e["$<=>"](0);ue===S&&$.$raise(_("ArgumentError"),"0 can't be coerced into "+e.$class()),(r===S||null==r)&&(r=ue>0?_(_("Float"),"INFINITY"):_(_("Float"),"INFINITY")["$-@"]()),W.$compare(n,r)}function o(){if(e>0&&n>r||e<0&&n<r)return 0;if(e===1/0||e===-1/0)return 1;var ue=Math.abs,ie=Math.floor,X=(ue(n)+ue(r)+ue(r-n))/ue(e)*_(_("Float"),"EPSILON");return X===1/0||X===-1/0?0:(X>.5&&(X=.5),ie((r-n)/e+X)+1)}if(v.$$p=null,d=U(arguments),a=L(d),a=w(a),d.length>0&&(r=d.shift()),d.length>0&&(e=d.shift()),s=a.$$smap.to,t=a.$$smap.by,void 0!==r&&void 0!==s&&$.$raise(_("ArgumentError"),"to is given twice"),void 0!==e&&void 0!==t&&$.$raise(_("ArgumentError"),"step is given twice"),void 0!==s&&(r=s),void 0!==t&&(e=t),void 0===r&&(r=S),m===S)return(A(r)||re(r["$is_a?"](_("Numeric"))))&&(A(e)||re(e["$is_a?"](_("Numeric"))))?_(_("Enumerator"),"ArithmeticSequence").$new([r,e,re(s)?"to: ":S,re(t)?"by: ":S],n):F(n,"enum_for",["step",r,e],function x(){if(c(),0===e)return 1/0;if(e%1!=0)return o();if(e>0&&n>r||e<0&&n<r)return 0;var ue=Math.ceil,ie=Math.abs;return ue((ie(n-r)+1)/ie(e))}.$to_proc());c();var j=e["$negative?"](),O=e["$=="](0)||r===1/0&&!j||r===-1/0&&j;if(n.$$is_number&&e.$$is_number&&r.$$is_number){if(n%1!=0||!O&&r%1!=0||e%1!=0){var ne=n.$to_f().valueOf();e=e.$to_f().valueOf(),r=r.$to_f().valueOf();var ae=o();if(isFinite(e))if(0===e)for(;;)m(ne);else for(var le=0;le<ae;le++){var oe=le*e+n;(e>=0?r<oe:r>oe)&&(oe=r),m(oe)}else 0!==ae&&m(ne);return n}var te=n;if(O)for(;;te+=e)m(te);else if(j)for(;te>=r;te+=e)m(te);else for(;te<=r;te+=e)m(te);return n}for(i=n;re(j?k(i,r):T(i,r));)l.yield1(m,i),i=I(i,e)},-1),P(z,"$to_c",function(){return $.$Complex(this,0)}),P(z,"$to_int",function(){return this.$to_i()}),P(z,"$truncate",function(N){return null==N&&(N=0),this.$to_f().$truncate(N)},-1),P(z,"$zero?",function(){return this["$=="](0)}),P(z,"$positive?",function(){return b(this,0)}),P(z,"$negative?",function(){return R(this,0)}),P(z,"$dup",E),P(z,"$clone",function(N){return N=w(N),this},-1),P(z,"$finite?",Z(!0)),P(z,"$infinite?",Z(S)),g(z,"arg","angle"),g(z,"conjugate","conj"),g(z,"imaginary","imag"),g(z,"magnitude","abs"),g(z,"modulo","%"),g(z,"phase","arg"),g(z,"rectangular","rect")},Opal.modules["corelib/array"]=function(l){var ee=l.truthy,re=l.falsy,$=l.hash_ids,P=l.yield1,Q=l.hash_get,E=l.hash_put,C=l.hash_delete,B=l.coerce_to,R=l.respond_to,Y=l.deny_frozen_access,H=l.freeze,Z=l.klass,W=l.slice,U=l.defs,L=l.Kernel,w=l.def,A=l.Opal,F=l.eqeqeq,k=l.hash2,T=l.send2,I=l.find_super,b=l.send,g=l.rb_gt,q=l.rb_times,S=l.eqeq,_=l.rb_minus,p=l.to_a,f=l.to_ary,z=l.gvars,v=l.rb_ge,N=l.assign_ivar,h=l.rb_lt,M=l.return_self,m=l.neqeq,d=l.alias,a=l.top,e=l.nil,s=l.$$$;return a.$require("corelib/enumerable"),a.$require("corelib/numeric"),function(t,n,i){var c=Z("::",Array,"Array"),o=[c].concat([]),x=l.$r(o);function te(X,D,V){for(var J,u=null,y=new Array(X.length),K=0,G=0,se=X.length;K<se;K++){if(!u)try{J=P(V,X[K])}catch($e){u=$e}(u||D(J))&&(y[G]=X[K],G+=1)}if(G!==K&&(X.splice.apply(X,[0,y.length].concat(y)),X.splice(G,y.length)),u)throw u}function ne(X,D){var J,u,y,V=X.length;return J=D.excl,u=D.begin===e?0:B(D.begin,l.Integer,"to_int"),y=D.end===e?-1:B(D.end,l.Integer,"to_int"),u<0&&(u+=V)<0||(D.excl_rev&&D.begin!==e&&(u+=1),u>V)?e:y<0&&(y+=V)<0?[]:((!J||D.end===e)&&(y+=1),X.slice(u,y))}function oe(X,D){return X===D||0===D?1:D>0&&X>D?oe(X-1,D-1)+oe(X-1,D):0}c.$include(s("Enumerable")),l.prop(c.$$prototype,"$$is_array",!0),U(c,"$[]",function(D){return function O(X,D){return D.$$name===l.Array?X:D.$allocate().$replace(X.$to_a())}(W(arguments),this)},-1),w(c,"$initialize",function X(D,V){var y,K,J=X.$$p||e,u=this;if(X.$$p=null,null==D&&(D=e),null==V&&(V=e),Y(u),V!==e&&J!==e&&L.$warn("warning: block supersedes default value argument"),D>s(s("Integer"),"MAX")&&L.$raise(s("ArgumentError"),"array size too big"),arguments.length>2&&L.$raise(s("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),0===arguments.length)return u.splice(0,u.length),u;if(1===arguments.length){if(D.$$is_array)return u.$replace(D.$to_a()),u;if(D["$respond_to?"]("to_ary"))return u.$replace(D.$to_ary()),u}if((D=B(D,s("Integer"),"to_int"))<0&&L.$raise(s("ArgumentError"),"negative array size"),u.splice(0,u.length),J===e)for(y=0;y<D;y++)u.push(V);else for(y=0;y<D;y++)K=J(y),u[y]=K;return u},-1),U(c,"$try_convert",function(D){return A["$coerce_to?"](D,s("Array"),"to_ary")}),w(c,"$&",function(D){D=F(s("Array"),D)?D.$to_a():B(D,s("Array"),"to_ary").$to_a();var y,K,G,J=[],u=k([],{});for(y=0,K=D.length;y<K;y++)E(u,D[y],!0);for(y=0,K=this.length;y<K;y++)void 0!==C(u,G=this[y])&&J.push(G);return J}),w(c,"$|",function(D){D=F(s("Array"),D)?D.$to_a():B(D,s("Array"),"to_ary").$to_a();var u,y,J=k([],{});for(u=0,y=this.length;u<y;u++)E(J,this[u],!0);for(u=0,y=D.length;u<y;u++)E(J,D[u],!0);return J.$keys()}),w(c,"$*",function(D){if(ee(D["$respond_to?"]("to_str")))return this.$join(D.$to_str());D=B(D,s("Integer"),"to_int"),ee(D<0)&&L.$raise(s("ArgumentError"),"negative argument");for(var J=[],u=this.$to_a(),y=0;y<D;y++)J=J.concat(u);return J}),w(c,"$+",function(D){return D=F(s("Array"),D)?D.$to_a():B(D,s("Array"),"to_ary").$to_a(),this.concat(D)}),w(c,"$-",function(D){var V=this;if(D=F(s("Array"),D)?D.$to_a():B(D,s("Array"),"to_ary").$to_a(),ee(0===V.length))return[];if(ee(0===D.length))return V.slice();var y,K,G,J=[],u=k([],{});for(y=0,K=D.length;y<K;y++)E(u,D[y],!0);for(y=0,K=V.length;y<K;y++)void 0===Q(u,G=V[y])&&J.push(G);return J}),w(c,"$<<",function(D){var V=this;return Y(V),V.push(D),V}),w(c,"$<=>",function(D){var V=this;if(F(s("Array"),D))D=D.$to_a();else{if(!ee(D["$respond_to?"]("to_ary")))return e;D=D.$to_ary().$to_a()}if(V.$hash()===D.$hash())return 0;for(var J=Math.min(V.length,D.length),u=0;u<J;u++){var y=V[u]["$<=>"](D[u]);if(0!==y)return y}return V.length["$<=>"](D.length)}),w(c,"$==",function(D){var J={};return function u(y,K){var G,se,$e,ce;if(y===K)return!0;if(!K.$$is_array)return!!R(K,"$to_ary")&&K["$=="](y);if(y.$$constructor!==Array&&(y=y.$to_a()),K.$$constructor!==Array&&(K=K.$to_a()),y.length!==K.length)return!1;for(J[y.$object_id()]=!0,G=0,se=y.length;G<se;G++)if(ce=K[G],($e=y[G]).$$is_array){if(ce.$$is_array&&ce.length!==$e.length||!J.hasOwnProperty($e.$object_id())&&!u($e,ce))return!1}else if(!$e["$=="](ce))return!1;return!0}(this,D)}),w(c,"$[]",function(D,V){var J=this;return D.$$is_range?ne(J,D):D.$$is_arithmetic_seq?function ae(X,D){var V,J=[],u=0;for(V=D.step<0?ne(X,{begin:D.range.end,end:D.range.begin,excl:!1,excl_rev:D.range.excl}).$reverse():ne(X,D.range);u<V.length;)J.push(V[u]),u+=Math.abs(D.step);return J}(J,D):function le(X,D,V){var J=X.length;return(D=B(D,l.Integer,"to_int"))<0&&(D+=J)<0?e:void 0===V?D>=J||D<0?e:X[D]:(V=B(V,l.Integer,"to_int"))<0||D>J||D<0?e:X.slice(D,D+V)}(J,D,V)},-2),w(c,"$[]=",function(D,V,J){var u=this,y=e,K=e;Y(u),y=e;var G,_e,se=u.length;if(D.$$is_range){y=V.$$is_array?V.$to_a():V["$respond_to?"]("to_ary")?V.$to_ary().$to_a():[V];var $e=D.excl,ce=D.begin===e?0:B(D.begin,l.Integer,"to_int"),fe=D.end===e?-1:B(D.end,l.Integer,"to_int");if(ce<0&&(ce+=se)<0&&L.$raise(s("RangeError"),D.$inspect()+" out of range"),fe<0&&(fe+=se),(!$e||D.end===e)&&(fe+=1),ce>se)for(G=se;G<ce;G++)u[G]=e;return u.splice.apply(u,fe<0?[ce,0].concat(y):[ce,fe-ce].concat(y)),V}if(void 0===J?K=1:(K=V,y=(V=J).$$is_array?V.$to_a():V["$respond_to?"]("to_ary")?V.$to_ary().$to_a():[V]),D=B(D,s("Integer"),"to_int"),K=B(K,s("Integer"),"to_int"),D<0&&(_e=D,(D+=se)<0&&L.$raise(s("IndexError"),"index "+_e+" too small for array; minimum "+-u.length)),K<0&&L.$raise(s("IndexError"),"negative length ("+K+")"),D>se)for(G=se;G<D;G++)u[G]=e;return void 0===J?u[D]=V:u.splice.apply(u,[D,K].concat(y)),V},-3),w(c,"$any?",function X(D){var V=X.$$p||e,J=this;return X.$$p=null,0!==J.length&&T(J,I(J,"any?",X,!1,!0),"any?",[D],V)},-1),w(c,"$assoc",function(D){for(var y,J=0,u=this.length;J<u;J++)if((y=this[J]).length&&y[0]["$=="](D))return y;return e}),w(c,"$at",function(D){var V=this;return(D=B(D,s("Integer"),"to_int"))<0&&(D+=V.length),D<0||D>=V.length?e:V[D]}),w(c,"$bsearch_index",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return V.$enum_for("bsearch_index");for(var y,G,J=0,u=V.length,se=!1,$e=e;J<u;){if(y=J+Math.floor((u-J)/2),!0===(G=P(D,V[y])))$e=y,se=!0;else if(!1===G||G===e)se=!1;else if(G.$$is_number){if(0===G)return y;se=G<0}else L.$raise(s("TypeError"),"wrong argument type "+G.$class()+" (must be numeric, true, false or nil)");se?u=y:J=y+1}return $e}),w(c,"$bsearch",function X(){var D=X.$$p||e,V=this,J=e;return X.$$p=null,D===e?V.$enum_for("bsearch"):null!=(J=b(V,"bsearch_index",[],D.$to_proc()))&&J.$$is_number?V[J]:J}),w(c,"$cycle",function X(D){var u,y,V=X.$$p||e,J=this;if(X.$$p=null,null==D&&(D=e),V===e)return b(J,"enum_for",["cycle",D],function G(){var se=null==G.$$s?this:G.$$s;return ee(D["$nil?"]())?s(s("Float"),"INFINITY"):(D=A["$coerce_to!"](D,s("Integer"),"to_int"),ee(g(D,0))?q(se.$enumerator_size(),D):0)},{$$s:J});if(ee(J["$empty?"]())||S(D,0))return e;if(D===e)for(;;)for(u=0,y=J.length;u<y;u++)P(V,J[u]);else{if((D=A["$coerce_to!"](D,s("Integer"),"to_int"))<=0)return J;for(;D>0;){for(u=0,y=J.length;u<y;u++)P(V,J[u]);D--}}return J},-1),w(c,"$clear",function(){var D=this;return Y(D),D.splice(0,D.length),D}),w(c,"$count",function X(D){var V=X.$$p||e,J=this;return X.$$p=null,ee(void 0!==D)||ee(V)?T(J,I(J,"count",X,!1,!0),"count",[D],V):J.$size()},-1),w(c,"$initialize_copy",function(D){return this.$replace(D)}),w(c,"$collect",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["collect"],function G(){return(null==G.$$s?this:G.$$s).$size()},{$$s:V});for(var J=[],u=0,y=V.length;u<y;u++){var K=P(D,V[u]);J.push(K)}return J}),w(c,"$collect!",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["collect!"],function K(){return(null==K.$$s?this:K.$$s).$size()},{$$s:V});Y(V);for(var J=0,u=V.length;J<u;J++){var y=P(D,V[J]);V[J]=y}return V}),w(c,"$combination",function X(D){var u,y,K,G,se,$e,ce,fe,V=X.$$p||e,J=this;if(X.$$p=null,u=A["$coerce_to!"](D,s("Integer"),"to_int"),V===e)return b(J,"enum_for",["combination",u],function _e(){return oe((null==_e.$$s?this:_e.$$s).length,u)},{$$s:J});if(0===u)l.yield1(V,[]);else if(1===u)for(y=0,K=J.length;y<K;y++)l.yield1(V,[J[y]]);else if(u===J.length)l.yield1(V,J.slice());else if(u>=0&&u<J.length){for(G=[],y=0;y<=u+1;y++)G.push(0);for(se=[],$e=0,ce=!1,G[0]=-1;!ce;){for(se[$e]=J[G[$e+1]];$e<u-1;)fe=G[1+ ++$e]=G[$e]+1,se[$e]=J[fe];l.yield1(V,se.slice()),$e++;do{ce=0===$e,G[$e]++,$e--}while(G[$e+1]+u===J.length+$e+1)}}return J}),w(c,"$repeated_combination",function X(D){var u,V=X.$$p||e,J=this;return X.$$p=null,u=A["$coerce_to!"](D,s("Integer"),"to_int"),V===e?b(J,"enum_for",["repeated_combination",u],function K(){return oe((null==K.$$s?this:K.$$s).length+u-1,u)},{$$s:J}):(u>=0&&function y(K,G,se,$e){if(se.length!=K)for(var fe=G;fe<$e.length;fe++)se.push($e[fe]),y(K,fe,se,$e),se.pop();else{var ce=se.slice();l.yield1(V,ce)}}(u,0,[],J),J)}),w(c,"$compact",function(){for(var y,V=[],J=0,u=this.length;J<u;J++)(y=this[J])!==e&&V.push(y);return V}),w(c,"$compact!",function(){var D=this;Y(D);for(var V=D.length,J=0,u=D.length;J<u;J++)D[J]===e&&(D.splice(J,1),u--,J--);return D.length===V?e:D}),w(c,"$concat",function(D){var J,u=this;return J=W(arguments),Y(u),J=b(J,"map",[],function y(K){var G=null==y.$$s?this:y.$$s;return null==K&&(K=e),K=F(s("Array"),K)?K.$to_a():B(K,s("Array"),"to_ary").$to_a(),ee(K["$equal?"](G))&&(K=K.$dup()),K},{$$s:u}),b(J,"each",[],function y(K){var G=null==y.$$s?this:y.$$s;null==K&&(K=e);for(var se=0,$e=K.length;se<$e;se++)G.push(K[se])},{$$s:u}),u},-1),w(c,"$delete",function X(D){var V=X.$$p||e,J=this;X.$$p=null;for(var u=J.length,y=0,K=u;y<K;y++)J[y]["$=="](D)&&(Y(J),J.splice(y,1),K--,y--);return J.length===u?V!==e?l.yieldX(V,[]):e:D}),w(c,"$delete_at",function(D){var V=this;if(Y(V),(D=B(D,s("Integer"),"to_int"))<0&&(D+=V.length),D<0||D>=V.length)return e;var J=V[D];return V.splice(D,1),J}),w(c,"$delete_if",function X(){var D=X.$$p||e,V=this;return X.$$p=null,D===e?b(V,"enum_for",["delete_if"],function J(){return(null==J.$$s?this:J.$$s).$size()},{$$s:V}):(Y(V),te(V,re,D),V)}),w(c,"$difference",function(D){var V;return V=W(arguments),b(V,"reduce",[this.$to_a().$dup()],function(K,G){return null==K&&(K=e),null==G&&(G=e),_(K,G)})},-1),w(c,"$dig",function(D,V){var u,K=e;return u=W(arguments,1),(K=this["$[]"](D))===e||0===u.length?K:(ee(K["$respond_to?"]("dig"))||L.$raise(s("TypeError"),K.$class()+" does not have #dig method"),b(K,"dig",p(u)))},-2),w(c,"$drop",function(D){return(D=B(D,s("Integer"),"to_int"))<0&&L.$raise(s("ArgumentError")),this.slice(D)}),w(c,"$dup",function X(){var D=X.$$p||e,V=this;return X.$$p=null,V.$$class===l.Array&&V.$$class.$allocate.$$pristine&&V.$copy_instance_variables.$$pristine&&V.$initialize_dup.$$pristine?V.slice(0):T(V,I(V,"dup",X,!1,!0),"dup",[],D)}),w(c,"$each",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["each"],function K(){return(null==K.$$s?this:K.$$s).$size()},{$$s:V});for(var J=0,u=V.length;J<u;J++)P(D,V[J]);return V}),w(c,"$each_index",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["each_index"],function K(){return(null==K.$$s?this:K.$$s).$size()},{$$s:V});for(var J=0,u=V.length;J<u;J++)P(D,J);return V}),w(c,"$empty?",function(){return 0===this.length}),w(c,"$eql?",function(D){var J={};return function u(y,K){var G,se,$e,ce;if(!K.$$is_array||(K=K.$to_a(),y.length!==K.length))return!1;for(J[y.$object_id()]=!0,G=0,se=y.length;G<se;G++)if(ce=K[G],($e=y[G]).$$is_array){if(ce.$$is_array&&ce.length!==$e.length||!J.hasOwnProperty($e.$object_id())&&!u($e,ce))return!1}else if(!$e["$eql?"](ce))return!1;return!0}(this,D)}),w(c,"$fetch",function X(D,V){var J=X.$$p||e,u=this;X.$$p=null;var y=D;return(D=B(D,s("Integer"),"to_int"))<0&&(D+=u.length),D>=0&&D<u.length?u[D]:(J!==e&&null!=V&&u.$warn("warning: block supersedes default value argument"),J!==e?J(y):null!=V?V:void L.$raise(s("IndexError"),0===u.length?"index "+y+" outside of array bounds: 0...0":"index "+y+" outside of array bounds: -"+u.length+"..."+u.length))},-2),w(c,"$fill",function X(D){var u,y,de,he,V=X.$$p||e,G=this,se=e,$e=e,ce=e,fe=e,_e=e;if(X.$$p=null,u=W(arguments),Y(G),ee(V)?(ee(u.length>2)&&L.$raise(s("ArgumentError"),"wrong number of arguments ("+u.$length()+" for 0..2)"),se=null==(y=f(u))[0]?e:y[0],$e=null==y[1]?e:y[1]):(ee(0==u.length)?L.$raise(s("ArgumentError"),"wrong number of arguments (0 for 1..3)"):ee(u.length>3)&&L.$raise(s("ArgumentError"),"wrong number of arguments ("+u.$length()+" for 1..3)"),ce=null==(y=f(u))[0]?e:y[0],se=null==y[1]?e:y[1],$e=null==y[2]?e:y[2]),F(s("Range"),se)){if(ee($e)&&L.$raise(s("TypeError"),"length invalid with range"),fe=se.begin===e?0:B(se.begin,s("Integer"),"to_int"),ee(fe<0)&&(fe+=this.length),ee(fe<0)&&L.$raise(s("RangeError"),se.$inspect()+" out of range"),_e=se.end===e?-1:B(se.end,s("Integer"),"to_int"),ee(_e<0)&&(_e+=this.length),ee(se["$exclude_end?"]())||(_e+=1),ee(_e<=fe))return G}else if(ee(se))if(fe=B(se,s("Integer"),"to_int"),ee(fe<0)&&(fe+=this.length),ee(fe<0)&&(fe=0),ee($e)){if(_e=B($e,s("Integer"),"to_int"),ee(0==_e))return G;_e+=fe}else _e=this.length;else fe=0,_e=this.length;if(ee(fe>this.length))for(de=this.length;de<_e;de++)G[de]=e;if(ee(_e>this.length)&&(this.length=_e),ee(V))for(;fe<_e;fe++)he=V(fe),G[fe]=he;else for(;fe<_e;fe++)G[fe]=ce;return G},-1),w(c,"$first",function(D){var V=this;return null==D?0===V.length?e:V[0]:((D=B(D,s("Integer"),"to_int"))<0&&L.$raise(s("ArgumentError"),"negative array size"),V.slice(0,D))},-1),w(c,"$flatten",function(D){var V=this;return void 0!==D&&(D=B(D,s("Integer"),"to_int")),function J(u,y){var G,se,$e,ce,K=[];for(G=0,se=(u=u.$to_a()).length;G<se;G++)if(R($e=u[G],"$to_ary",!0))if((ce=$e.$to_ary())!==e)switch(ce.$$is_array||L.$raise(s("TypeError")),ce===V&&L.$raise(s("ArgumentError")),y){case void 0:K=K.concat(J(ce));break;case 0:K.push(ce);break;default:K.push.apply(K,J(ce,y-1))}else K.push($e);else K.push($e);return K}(V,D)},-1),w(c,"$flatten!",function(D){var V=this;Y(V);var J=V.$flatten(D);if(V.length==J.length){for(var u=0,y=V.length;u<y&&V[u]===J[u];u++);if(u==y)return e}return V.$replace(J),V},-1),w(c,"$freeze",function(){var D=this;return ee(D["$frozen?"]())?D:H(D)}),w(c,"$hash",function(){var K,G,D=this,V=void 0===$,J=["A"],u=D.$object_id();try{if(V&&($=Object.create(null)),$[u])return"self";for(G in $)if(D["$eql?"]($[G]))return"self";for($[u]=D,K=0;K<D.length;K++)J.push(D[K].$hash());return J.join(",")}finally{V&&($=void 0)}}),w(c,"$include?",function(D){for(var J=0,u=this.length;J<u;J++)if(this[J]["$=="](D))return!0;return!1}),w(c,"$index",function X(D){var u,y,K,V=X.$$p||e,J=this;if(X.$$p=null,null!=D&&V!==e&&J.$warn("warning: given block not used"),null!=D){for(u=0,y=J.length;u<y;u++)if(J[u]["$=="](D))return u}else{if(V===e)return J.$enum_for("index");for(u=0,y=J.length;u<y;u++)if(!1!==(K=V(J[u]))&&K!==e)return u}return e},-1),w(c,"$insert",function(D,V){var u,y=this;if(u=W(arguments,1),Y(y),D=B(D,s("Integer"),"to_int"),u.length>0){if(D<0&&(D+=y.length+1)<0&&L.$raise(s("IndexError"),D+" is out of bounds"),D>y.length)for(var K=y.length;K<D;K++)y.push(e);y.splice.apply(y,[D,0].concat(u))}return y},-2);var V,ue=[];return w(c,"$inspect",function(){var D=this,V=[],J=D.$__id__(),u=!0;return function(){try{if(-1!==ue.indexOf(J))return u=!1,"[...]";ue.push(J);for(var y=0,K=D.length;y<K;y++){var G=D["$[]"](y);V.push(x("Opal").$inspect(G))}return"["+V.join(", ")+"]"}finally{u&&ue.pop()}}()}),w(c,"$intersection",function(D){var V;return V=W(arguments),b(V,"reduce",[this.$to_a().$dup()],function(K,G){return null==K&&(K=e),null==G&&(G=e),K["$&"](G)})},-1),w(c,"$intersect?",function(D){return this.$intersection(D)["$empty?"]()["$!"]()}),w(c,"$join",function(D){var V=this;if(null==z[","]&&(z[","]=e),null==D&&(D=e),ee(0===V.length))return"";ee(D===e)&&(D=z[","]);var u,y,K,G,J=[];for(u=0,y=V.length;u<y;u++)R(K=V[u],"$to_str")&&(G=K.$to_str())!==e?J.push(G.$to_s()):R(K,"$to_ary")&&((G=K.$to_ary())===V&&L.$raise(s("ArgumentError")),G!==e)?J.push(G.$join(D)):R(K,"$to_s")&&(G=K.$to_s())!==e?J.push(G):L.$raise(s("NoMethodError").$new(x("Opal").$inspect(V.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"));return J.join(D===e?"":A["$coerce_to!"](D,s("String"),"to_str").$to_s())},-1),w(c,"$keep_if",function X(){var D=X.$$p||e,V=this;return X.$$p=null,D===e?b(V,"enum_for",["keep_if"],function J(){return(null==J.$$s?this:J.$$s).$size()},{$$s:V}):(Y(V),te(V,ee,D),V)}),w(c,"$last",function(D){var V=this;return null==D?0===V.length?e:V[V.length-1]:((D=B(D,s("Integer"),"to_int"))<0&&L.$raise(s("ArgumentError"),"negative array size"),D>V.length&&(D=V.length),V.slice(V.length-D,V.length))},-1),w(c,"$length",function(){return this.length}),w(c,"$max",function X(D){var V=X.$$p||e;return X.$$p=null,b(this.$each(),"max",[D],V.$to_proc())},-1),w(c,"$min",function X(){var D=X.$$p||e;return X.$$p=null,b(this.$each(),"min",[],D.$to_proc())}),w(c,"$permutation",function X(D){var K,G,se,V=X.$$p||e,J=this,u=e,y=e;if(X.$$p=null,V===e)return b(J,"enum_for",["permutation",D],function ce(){var fe=null==ce.$$s?this:ce.$$s;return function ie(X,D){for(var V=D>=0?1:0;D;)V*=X,X--,D--;return V}(fe.length,void 0===D?fe.length:D)},{$$s:J});if(!((D=void 0===D?J.length:B(D,s("Integer"),"to_int"))<0||J.length<D))if(0===D)l.yield1(V,[]);else if(1===D)for(var $e=0;$e<J.length;$e++)l.yield1(V,[J[$e]]);else u=x("Array").$new(D),y=x("Array").$new(J.length,!1),K=function(ce,fe,_e,de,me){J=this;for(var he=0;he<J.length;he++)if(de["$[]"](he)["$!"]())if(fe[_e]=he,_e<ce-1)de[he]=!0,K.call(J,ce,fe,_e+1,de,me),de[he]=!1;else{se=[];for(var ge=0;ge<fe.length;ge++)se.push(J[fe[ge]]);P(me,se)}},V!==e?(G=J.slice(),K.call(G,D,u,0,y,V)):K.call(J,D,u,0,y,V);return J},-1),w(c,"$repeated_permutation",function X(D){var u,V=X.$$p||e,J=this;return X.$$p=null,u=A["$coerce_to!"](D,s("Integer"),"to_int"),V===e?b(J,"enum_for",["repeated_permutation",u],function K(){var G=null==K.$$s?this:K.$$s;return ee(v(u,0))?G.$size()["$**"](u):0},{$$s:J}):(function y(K,G,se){if(G.length!=K)for(var ce=0;ce<se.length;ce++)G.push(se[ce]),y(K,G,se),G.pop();else{var $e=G.slice();l.yield1(V,$e)}}(u,[],J.slice()),J)}),w(c,"$pop",function(D){var V=this;return Y(V),ee(void 0===D)?ee(0===V.length)?e:V.pop():(D=B(D,s("Integer"),"to_int"),ee(D<0)&&L.$raise(s("ArgumentError"),"negative array size"),ee(0===V.length)?[]:ee(1===D)?[V.pop()]:ee(D>V.length)?V.splice(0,V.length):V.splice(V.length-D,V.length))},-1),w(c,"$product",function X(D){var J,u,V=X.$$p||e,y=this;X.$$p=null,J=W(arguments);var fe,_e,de,me,K=V!==e?null:[],G=(u=J).length+1,se=new Array(G),$e=new Array(G),ce=new Array(G),he=1;for(ce[0]=y,fe=1;fe<G;fe++)ce[fe]=B(u[fe-1],s("Array"),"to_ary");for(fe=0;fe<G;fe++){if(0===(me=ce[fe].length))return K||y;(he*=me)>2147483647&&L.$raise(s("RangeError"),"too big to product"),$e[fe]=me,se[fe]=0}e:for(;;){for(de=[],fe=0;fe<G;fe++)de.push(ce[fe][se[fe]]);for(K?K.push(de):l.yield1(V,de),se[_e=G-1]++;se[_e]===$e[_e];){if(se[_e]=0,--_e<0)break e;se[_e]++}}return K||y},-1),w(c,"$push",function(D){var J,u=this;J=W(arguments),Y(u);for(var y=0,K=J.length;y<K;y++)u.push(J[y]);return u},-1),w(c,"$rassoc",function(D){for(var y,J=0,u=this.length;J<u;J++)if((y=this[J]).length&&void 0!==y[1]&&y[1]["$=="](D))return y;return e}),w(c,"$reject",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["reject"],function G(){return(null==G.$$s?this:G.$$s).$size()},{$$s:V});for(var K,J=[],u=0,y=V.length;u<y;u++)(!1===(K=D(V[u]))||K===e)&&J.push(V[u]);return J}),w(c,"$reject!",function X(){var D=X.$$p||e,V=this,J=e;return X.$$p=null,D===e?b(V,"enum_for",["reject!"],function u(){return(null==u.$$s?this:u.$$s).$size()},{$$s:V}):(Y(V),J=V.$length(),b(V,"delete_if",[],D.$to_proc()),S(V.$length(),J)?e:V)}),w(c,"$replace",function(D){var V=this;return Y(V),D=F(s("Array"),D)?D.$to_a():B(D,s("Array"),"to_ary").$to_a(),V.splice(0,V.length),V.push.apply(V,D),V}),w(c,"$reverse",function(){return this.slice(0).reverse()}),w(c,"$reverse!",function(){return Y(this),this.reverse()}),w(c,"$reverse_each",function X(){var D=X.$$p||e,V=this;return X.$$p=null,D===e?b(V,"enum_for",["reverse_each"],function J(){return(null==J.$$s?this:J.$$s).$size()},{$$s:V}):(b(V.$reverse(),"each",[],D.$to_proc()),V)}),w(c,"$rindex",function X(D){var u,y,V=X.$$p||e,J=this;if(X.$$p=null,null!=D&&V!==e&&J.$warn("warning: given block not used"),null!=D){for(u=J.length-1;u>=0&&!(u>=J.length);u--)if(J[u]["$=="](D))return u}else if(V!==e){for(u=J.length-1;u>=0&&!(u>=J.length);u--)if(!1!==(y=V(J[u]))&&y!==e)return u}else if(null==D)return J.$enum_for("rindex");return e},-1),w(c,"$rotate",function(D){var J,u,y,K,V=this;return null==D&&(D=1),D=B(D,s("Integer"),"to_int"),1===V.length?V.slice():0===V.length?[]:(y=(J=V.slice()).slice(u=D%J.length),K=J.slice(0,u),y.concat(K))},-1),w(c,"$rotate!",function(D){var V=this,J=e;return null==D&&(D=1),Y(V),0===V.length||1===V.length?V:(D=B(D,s("Integer"),"to_int"),J=V.$rotate(D),V.$replace(J))},-1),(V=Z(c,null,"SampleRandom")).$$prototype.rng=e,w(V,"$initialize",N("rng")),w(V,"$rand",function(y){var G;return G=B(this.rng.$rand(y),s("Integer"),"to_int"),ee(G<0)&&L.$raise(s("RangeError"),"random value must be >= 0"),ee(G<y)||L.$raise(s("RangeError"),"random value must be less than Array size"),G}),w(c,"$sample",function(D,V){var K,G,se,$e,ce,fe,_e,de,J=this,u=e,y=e;if(ee(void 0===D))return J.$at(L.$rand(J.length));if(ee(void 0===V)?ee(u=A["$coerce_to?"](D,s("Hash"),"to_hash"))?(V=u,D=e):(V=e,D=B(D,s("Integer"),"to_int")):(D=B(D,s("Integer"),"to_int"),V=B(V,s("Hash"),"to_hash")),ee(D)&&ee(D<0)&&L.$raise(s("ArgumentError"),"count must be greater than 0"),ee(V)&&(y=V["$[]"]("random")),y=ee(y)&&ee(y["$respond_to?"]("rand"))?x("SampleRandom").$new(y):L,!ee(D))return J[y.$rand(J.length)];switch(D>J.length&&(D=J.length),D){case 0:return[];case 1:return[J[y.$rand(J.length)]];case 2:return($e=y.$rand(J.length))<=(ce=y.$rand(J.length-1))&&ce++,[J[$e],J[ce]];default:if(J.length/D>3){for(K=!1,G=0,$e=1,(se=x("Array").$new(D))[0]=y.$rand(J.length);$e<D;){for(fe=y.$rand(J.length),ce=0;ce<$e;){for(;fe===se[ce];){if(++G>100){K=!0;break}fe=y.$rand(J.length)}if(K)break;ce++}if(K)break;se[$e]=fe,$e++}if(!K){for($e=0;$e<D;)se[$e]=J[se[$e]],$e++;return se}}se=J.slice();for(var me=0;me<D;me++)_e=y.$rand(J.length-me)+me,de=se[me],se[me]=se[_e],se[_e]=de;return D===J.length?se:se["$[]"](0,D)}},-1),w(c,"$select",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["select"],function se(){return(null==se.$$s?this:se.$$s).$size()},{$$s:V});for(var K,G,J=[],u=0,y=V.length;u<y;u++)G=P(D,K=V[u]),ee(G)&&J.push(K);return J}),w(c,"$select!",function X(){var D=X.$$p||e,V=this;if(X.$$p=null,D===e)return b(V,"enum_for",["select!"],function u(){return(null==u.$$s?this:u.$$s).$size()},{$$s:V});Y(V);var J=V.length;return b(V,"keep_if",[],D.$to_proc()),V.length===J?e:V}),w(c,"$shift",function(D){var V=this;return Y(V),ee(void 0===D)?ee(0===V.length)?e:function j(X){for(var D=X[0],V=1,J=X.length;V<J;V++)X[V-1]=X[V];return X.pop(),D}(V):(D=B(D,s("Integer"),"to_int"),ee(D<0)&&L.$raise(s("ArgumentError"),"negative array size"),ee(0===V.length)?[]:V.splice(0,D))},-1),w(c,"$shuffle",function(D){return this.$dup().$to_a()["$shuffle!"](D)},-1),w(c,"$shuffle!",function(D){var V=this;Y(V);var J,y,K,u=V.length;for(void 0!==D&&(D=A["$coerce_to?"](D,s("Hash"),"to_hash"))!==e&&(D=D["$[]"]("random"))!==e&&D["$respond_to?"]("rand")&&(J=D);u;)J?((y=J.$rand(u).$to_int())<0&&L.$raise(s("RangeError"),"random number too small "+y),y>=u&&L.$raise(s("RangeError"),"random number too big "+y)):y=V.$rand(u),K=V[--u],V[u]=V[y],V[y]=K;return V},-1),w(c,"$slice!",function(D,V){var J=this,u=e,y=e,K=e,G=e,se=e;if(Y(J),u=e,ee(void 0===V))if(F(s("Range"),D)){u=J["$[]"](y=D),K=y.begin===e?0:B(y.begin,s("Integer"),"to_int"),G=y.end===e?-1:B(y.end,s("Integer"),"to_int"),K<0&&(K+=J.length),G<0?G+=J.length:G>=J.length&&(G=J.length-1,y.excl&&(G+=1));var $e=G-K;y.excl&&y.end!==e?G-=1:$e+=1,K<J.length&&K>=0&&G<J.length&&G>=0&&$e>0&&J.splice(K,$e)}else{if((se=B(D,s("Integer"),"to_int"))<0&&(se+=J.length),se<0||se>=J.length)return e;u=J[se],0===se?J.shift():J.splice(se,1)}else{if(se=B(D,s("Integer"),"to_int"),(V=B(V,s("Integer"),"to_int"))<0)return e;u=J["$[]"](se,V),se<0&&(se+=J.length),se+V>J.length&&(V=J.length-se),se<J.length&&se>=0&&J.splice(se,V)}return u},-2),w(c,"$sort",function X(){var D=X.$$p||e,V=this;return X.$$p=null,ee(V.length>1)?(D===e&&(D=function(J,u){return J["$<=>"](u)}),V.slice().sort(function(J,u){var y=D(J,u);return y===e&&L.$raise(s("ArgumentError"),"comparison of "+J.$inspect()+" with "+u.$inspect()+" failed"),g(y,0)?1:h(y,0)?-1:0})):V}),w(c,"$sort!",function X(){var J,D=X.$$p||e,V=this;X.$$p=null,Y(V),J=D!==e?b(V.slice(),"sort",[],D.$to_proc()):V.slice().$sort(),V.length=0;for(var u=0,y=J.length;u<y;u++)V.push(J[u]);return V}),w(c,"$sort_by!",function X(){var D=X.$$p||e,V=this;return X.$$p=null,D===e?b(V,"enum_for",["sort_by!"],function J(){return(null==J.$$s?this:J.$$s).$size()},{$$s:V}):(Y(V),V.$replace(b(V,"sort_by",[],D.$to_proc())))}),w(c,"$take",function(D){return D<0&&L.$raise(s("ArgumentError")),this.slice(0,D)}),w(c,"$take_while",function X(){var D=X.$$p||e;X.$$p=null;for(var K,G,J=[],u=0,y=this.length;u<y;u++){if(!1===(G=D(K=this[u]))||G===e)return J;J.push(K)}return J}),w(c,"$to_a",function(){var D=this;return D.$$class===l.Array?D:l.Array.$new(D)}),w(c,"$to_ary",M),w(c,"$to_h",function X(){var D=X.$$p||e,J=e;X.$$p=null,J=this,D!==e&&(J=b(J,"map",[],D.$to_proc()));var u,K,y=J.length,$e=k([],{});for(u=0;u<y;u++)(K=A["$coerce_to?"](J[u],s("Array"),"to_ary")).$$is_array||L.$raise(s("TypeError"),"wrong element type "+K.$class()+" at "+u+" (expected array)"),2!==K.length&&L.$raise(s("ArgumentError"),"wrong array length at "+u+" (expected 2, was "+K.$length()+")"),E($e,K[0],K[1]);return $e}),w(c,"$transpose",function(){var V=e,J=e;return ee(this["$empty?"]())?[]:(V=[],J=e,b(this,"each",[],function(y){var K=e;return null==y&&(y=e),y=F(s("Array"),y)?y.$to_a():B(y,s("Array"),"to_ary").$to_a(),J=ee(K=J)?K:y.length,m(y.length,J)&&L.$raise(s("IndexError"),"element size differs ("+y.length+" should be "+J+")"),b(y.length,"times",[],function(se){var $e;return null==se&&(se=e),(ee(K=V["$[]"](se))?K:(b(V,"[]=",$e=[se,[]]),$e[$e.length-1]))["$<<"](y.$at(se))})}),V)}),w(c,"$union",function(D){var V;return V=W(arguments),b(V,"reduce",[this.$uniq()],function(K,G){return null==K&&(K=e),null==G&&(G=e),K["$|"](G)})},-1),w(c,"$uniq",function X(){var D=X.$$p||e,V=this;X.$$p=null;var u,y,K,G,J=k([],{});if(D===e)for(u=0,y=V.length;u<y;u++)void 0===Q(J,K=V[u])&&E(J,K,K);else for(u=0,y=V.length;u<y;u++)G=P(D,K=V[u]),void 0===Q(J,G)&&E(J,G,K);return J.$values()}),w(c,"$uniq!",function X(){var D=X.$$p||e,V=this;X.$$p=null,Y(V);var y,K,G,se,J=V.length,u=k([],{});for(y=0,K=J;y<K;y++)G=V[y],se=D===e?G:P(D,G),void 0!==Q(u,se)?(V.splice(y,1),K--,y--):E(u,se,G);return V.length===J?e:V}),w(c,"$unshift",function(D){var J,u=this;J=W(arguments),Y(u);var y=u.length,K=J.length;if(0==K)return u;for(var G=y-K,se=0;se<K;se++)u.push(u[G+se]);for(var $e=y-1;$e-K>=0;)u[$e]=u[$e-K],$e--;for(var ce=0;ce<K;ce++)u[ce]=J[ce];return u},-1),w(c,"$values_at",function(D){var V,y=e;return V=W(arguments),y=[],b(V,"each",[],function K(G){var se=null==K.$$s?this:K.$$s,$e=e,ce=e,fe=e;return null==G&&(G=e),ee(G["$is_a?"](s("Range")))?($e=G.$end()===e?-1:B(G.$end(),s("Integer"),"to_int"),(ce=G.$begin()===e?0:B(G.$begin(),s("Integer"),"to_int"))<0?(ce+=se.length,e):($e<0&&($e+=se.length),G["$exclude_end?"]()&&G.$end()!==e&&$e--,$e<ce?e:b(ce,"upto",[$e],function _e(de){return null==de&&(de=e),y["$<<"]((null==_e.$$s?this:_e.$$s).$at(de))},{$$s:se}))):(fe=B(G,s("Integer"),"to_int"),y["$<<"](se.$at(fe)))},{$$s:this}),y},-1),w(c,"$zip",function X(D){var J,u,V=X.$$p||e,K=e;X.$$p=null,J=W(arguments);var $e,ce,fe,_e,de,G=[],se=this.length;for(_e=0,de=(u=J).length;_e<de;_e++)if(!(ce=u[_e]).$$is_array){if(ce.$$is_range||ce.$$is_enumerator){u[_e]=ce.$take(se);continue}u[_e]=(ee(K=A["$coerce_to?"](ce,s("Array"),"to_ary"))?K:A["$coerce_to!"](ce,s("Enumerator"),"to_enum","each")).$to_a()}for(fe=0;fe<se;fe++){for($e=[this[fe]],_e=0,de=u.length;_e<de;_e++)null==(ce=u[_e][fe])&&(ce=e),$e[_e+1]=ce;G[fe]=$e}if(V!==e){for(fe=0;fe<se;fe++)l.yield1(V,G[fe]);return e}return G},-1),U(c,"$inherited",function(D){D.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),w(c,"$instance_variables",function X(){var D=X.$$p||e;return X.$$p=null,b(T(this,I(this,"instance_variables",X,!1,!0),"instance_variables",[],D),"reject",[],function(u){var y;return null==u&&(u=e),ee(y=/^@\d+$/.test(u))?y:u["$=="]("@length")})}),w(c,"$pack",function(D){return W(arguments),L.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),d(c,"append","push"),d(c,"filter","select"),d(c,"filter!","select!"),d(c,"map","collect"),d(c,"map!","collect!"),d(c,"prepend","unshift"),d(c,"size","length"),d(c,"slice","[]"),d(c,"to_s","inspect"),A.$pristine(c.$singleton_class(),"allocate"),A.$pristine(c,"copy_instance_variables","initialize_dup")}()},Opal.modules["corelib/hash"]=function(l){var z,M,v,N,h,ee=l.yield1,re=l.hash,$=l.hash_init,P=l.hash_get,Q=l.hash_put,E=l.hash_delete,C=l.deny_frozen_access,B=l.freeze,R=l.klass,Y=l.slice,H=l.Opal,Z=l.Kernel,W=l.defs,U=l.def,L=l.send,w=l.rb_ge,A=l.rb_gt,F=l.hash2,k=l.truthy,T=l.to_a,I=l.return_self,b=l.alias,S=l.nil,_=l.$$$;return l.top.$require("corelib/enumerable"),z=[],N=[v=R("::",null,"Hash")].concat(z),h=l.$r(N),v.$include(_("Enumerable")),v.$$prototype.$$is_hash=!0,W(v,"$[]",function(d){var r,s,n,e=this,t=(r=Y(arguments)).length;if(1===t){if((s=H["$coerce_to?"](r["$[]"](0),_("Hash"),"to_hash"))!==S)return e.$allocate()["$merge!"](s);for((r=H["$coerce_to?"](r["$[]"](0),_("Array"),"to_ary"))===S&&Z.$raise(_("ArgumentError"),"odd number of arguments for Hash"),t=r.length,s=e.$allocate(),n=0;n<t;n++)if(r[n].$$is_array)switch(r[n].length){case 1:s.$store(r[n][0],S);break;case 2:s.$store(r[n][0],r[n][1]);break;default:Z.$raise(_("ArgumentError"),"invalid number of elements ("+r[n].length+" for 1..2)")}return s}for(t%2!=0&&Z.$raise(_("ArgumentError"),"odd number of arguments for Hash"),s=e.$allocate(),n=0;n<t;n+=2)s.$store(r[n],r[n+1]);return s},-1),W(v,"$allocate",function(){var a=new this.$$constructor;return $(a),a.$$none=S,a.$$proc=S,a}),W(v,"$try_convert",function(d){return H["$coerce_to?"](d,_("Hash"),"to_hash")}),U(v,"$initialize",function m(d){var a=m.$$p||S,r=this;return m.$$p=null,C(r),void 0!==d&&a!==S&&Z.$raise(_("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=void 0===d?S:d,r.$$proc=a,r},-1),U(v,"$==",function(d){var a=this;if(a===d)return!0;if(!d.$$is_hash||a.$$keys.length!==d.$$keys.length)return!1;for(var t,n,i,r=0,e=a.$$keys,s=e.length;r<s;r++)if((t=e[r]).$$is_string?(n=a.$$smap[t],i=d.$$smap[t]):(n=t.value,i=P(d,t.key)),void 0===i||!n["$eql?"](i))return!1;return!0}),U(v,"$>=",function(d){var r=S;return d=H["$coerce_to!"](d,_("Hash"),"to_hash"),!(this.$$keys.length<d.$$keys.length)&&(r=!0,L(d,"each",[],function e(s,t){var i;null==s&&(s=S),null==t&&(t=S),null!=(i=(null==e.$$s?this:e.$$s).$fetch(s,null))&&i===t||(r=!1)},{$$s:this}),r)}),U(v,"$>",function(d){return d=H["$coerce_to!"](d,_("Hash"),"to_hash"),!(this.$$keys.length<=d.$$keys.length)&&w(this,d)}),U(v,"$<",function(d){return d=H["$coerce_to!"](d,_("Hash"),"to_hash"),A(d,this)}),U(v,"$<=",function(d){return d=H["$coerce_to!"](d,_("Hash"),"to_hash"),w(d,this)}),U(v,"$[]",function(d){var r=P(this,d);return void 0!==r?r:this.$default(d)}),U(v,"$[]=",function(d,a){return C(this),Q(this,d,a),a}),U(v,"$assoc",function(d){for(var t,r=0,e=this.$$keys,s=e.length;r<s;r++)if((t=e[r]).$$is_string){if(t["$=="](d))return[t,this.$$smap[t]]}else if(t.key["$=="](d))return[t.key,t.value];return S}),U(v,"$clear",function(){var d=this;return C(d),$(d),d}),U(v,"$clone",function(){var a=new this.$$class;return $(a),l.hash_clone(this,a),a}),U(v,"$compact",function(){for(var t,n,a=re(),r=0,e=this.$$keys,s=e.length;r<s;r++)(t=e[r]).$$is_string?n=this.$$smap[t]:(n=t.value,t=t.key),n!==S&&Q(a,t,n);return a}),U(v,"$compact!",function(){var d=this;C(d);for(var t,n,a=!1,r=0,e=d.$$keys,s=e.length;r<s;r++)(t=e[r]).$$is_string?n=d.$$smap[t]:(n=t.value,t=t.key),n===S&&void 0!==E(d,t)&&(a=!0,s--,r--);return a?d:S}),U(v,"$compare_by_identity",function(){var d=this;C(d);var a,r,e,t,s=d.$$keys;if(d.$$by_identity)return d;if(0===d.$$keys.length)return d.$$by_identity=!0,d;for(t=F([],{}).$compare_by_identity(),a=0,r=s.length;a<r;a++)(e=s[a]).$$is_string||(e=e.key),Q(t,e,P(d,e));return d.$$by_identity=!0,d.$$map=t.$$map,d.$$smap=t.$$smap,d}),U(v,"$compare_by_identity?",function(){return!0===this.$$by_identity}),U(v,"$default",function(d){var a=this;return void 0!==d&&a.$$proc!==S&&void 0!==a.$$proc?a.$$proc.$call(a,d):void 0===a.$$none?S:a.$$none},-1),U(v,"$default=",function(d){var a=this;return C(a),a.$$proc=S,a.$$none=d,d}),U(v,"$default_proc",function(){return void 0!==this.$$proc?this.$$proc:S}),U(v,"$default_proc=",function(d){var a=this;C(a);var r=d;return r!==S&&(r=H["$coerce_to!"](r,_("Proc"),"to_proc"))["$lambda?"]()&&2!==r.$arity().$abs()&&Z.$raise(_("TypeError"),"default_proc takes two arguments"),a.$$none=S,a.$$proc=r,d}),U(v,"$delete",function m(d){var a=m.$$p||S;m.$$p=null,C(this);var e=E(this,d);return void 0!==e?e:a!==S?l.yield1(a,d):S}),U(v,"$delete_if",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["delete_if"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});C(a);for(var t,n,i,r=0,e=a.$$keys,s=e.length;r<s;r++)(t=e[r]).$$is_string?n=a.$$smap[t]:(n=t.value,t=t.key),!1!==(i=d(t,n))&&i!==S&&void 0!==E(a,t)&&(s--,r--);return a}),U(v,"$dig",function(d,a){var e,t=S;return e=Y(arguments,1),(t=this["$[]"](d))===S||0===e.length?t:(k(t["$respond_to?"]("dig"))||Z.$raise(_("TypeError"),t.$class()+" does not have #dig method"),L(t,"dig",T(e)))},-2),U(v,"$each",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["each"],function i(){return(null==i.$$s?this:i.$$s).$size()},{$$s:a});for(var t,n,r=0,e=a.$$keys.slice(),s=e.length;r<s;r++)(t=e[r]).$$is_string?n=a.$$smap[t]:(n=t.value,t=t.key),ee(d,[t,n]);return a}),U(v,"$each_key",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["each_key"],function n(){return(null==n.$$s?this:n.$$s).$size()},{$$s:a});for(var t,r=0,e=a.$$keys.slice(),s=e.length;r<s;r++)d((t=e[r]).$$is_string?t:t.key);return a}),U(v,"$each_value",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["each_value"],function n(){return(null==n.$$s?this:n.$$s).$size()},{$$s:a});for(var t,r=0,e=a.$$keys.slice(),s=e.length;r<s;r++)d((t=e[r]).$$is_string?a.$$smap[t]:t.value);return a}),U(v,"$empty?",function(){return 0===this.$$keys.length}),U(v,"$except",function(d){var r;return r=Y(arguments),L(this.$dup(),"except!",T(r))},-1),U(v,"$except!",function(d){var a;return a=Y(arguments),L(a,"each",[],function s(t){return null==t&&(t=S),(null==s.$$s?this:s.$$s).$delete(t)},{$$s:this}),this},-1),U(v,"$fetch",function m(d,a){var r=m.$$p||S;m.$$p=null;var s=P(this,d);return void 0!==s?s:r!==S?r(d):void 0!==a?a:Z.$raise(_("KeyError").$new("key not found: "+d.$inspect(),F(["key","receiver"],{key:d,receiver:this})))},-2),U(v,"$fetch_values",function m(d){var r,a=m.$$p||S;return m.$$p=null,r=Y(arguments),L(r,"map",[],function t(n){return null==n&&(n=S),L(null==t.$$s?this:t.$$s,"fetch",[n],a.$to_proc())},{$$s:this})},-1),U(v,"$flatten",function(d){null==d&&(d=1),d=H["$coerce_to!"](d,_("Integer"),"to_int");for(var n,i,r=[],e=0,s=this.$$keys,t=s.length;e<t;e++)if((n=s[e]).$$is_string?i=this.$$smap[n]:(i=n.value,n=n.key),r.push(n),i.$$is_array){if(1===d){r.push(i);continue}r=r.concat(i.$flatten(d-2))}else r.push(i);return r},-1),U(v,"$freeze",function(){var d=this;return k(d["$frozen?"]())?d:B(d)}),U(v,"$has_key?",function(d){return void 0!==P(this,d)}),U(v,"$has_value?",function(d){for(var t,r=0,e=this.$$keys,s=e.length;r<s;r++)if(((t=e[r]).$$is_string?this.$$smap[t]:t.value)["$=="](d))return!0;return!1}),U(v,"$hash",function(){var s,d=this,a=void 0===l.hash_ids,r=d.$object_id(),e=["Hash"];try{if(a&&(l.hash_ids=Object.create(null)),l[r])return"self";for(s in l.hash_ids)if(d["$eql?"](l.hash_ids[s]))return"self";l.hash_ids[r]=d;for(var n=0,i=d.$$keys,c=i.length;n<c;n++)e.push((s=i[n]).$$is_string?[s,d.$$smap[s].$hash()]:[s.key_hash,s.value.$hash()]);return e.sort().join()}finally{a&&(l.hash_ids=void 0)}}),U(v,"$index",function(d){for(var t,n,r=0,e=this.$$keys,s=e.length;r<s;r++)if((t=e[r]).$$is_string?n=this.$$smap[t]:(n=t.value,t=t.key),n["$=="](d))return t;return S}),U(v,"$indexes",function(d){for(var r,c,s=[],t=0,n=(r=Y(arguments)).length;t<n;t++)void 0!==(c=P(this,r[t]))?s.push(c):s.push(this.$default());return s},-1),U(v,"$inspect",function(){var d=this,a=void 0===M,r=d.$object_id(),e=[];return function(){try{if(a&&(M={}),M.hasOwnProperty(r))return"{...}";M[r]=!0;for(var i,c,s=0,t=d.$$keys,n=t.length;s<n;s++)(i=t[s]).$$is_string?c=d.$$smap[i]:(c=i.value,i=i.key),i=h("Opal").$inspect(i),c=h("Opal").$inspect(c),e.push(i+"=>"+c);return"{"+e.join(", ")+"}"}finally{a&&(M=void 0)}}()}),U(v,"$invert",function(){for(var t,n,a=re(),r=0,e=this.$$keys,s=e.length;r<s;r++)(t=e[r]).$$is_string?n=this.$$smap[t]:(n=t.value,t=t.key),Q(a,n,t);return a}),U(v,"$keep_if",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["keep_if"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});C(a);for(var t,n,i,r=0,e=a.$$keys,s=e.length;r<s;r++)(t=e[r]).$$is_string?n=a.$$smap[t]:(n=t.value,t=t.key),(!1===(i=d(t,n))||i===S)&&void 0!==E(a,t)&&(s--,r--);return a}),U(v,"$keys",function(){for(var t,a=[],r=0,e=this.$$keys,s=e.length;r<s;r++)a.push((t=e[r]).$$is_string?t:t.key);return a}),U(v,"$length",function(){return this.$$keys.length}),U(v,"$merge",function m(d){var e,a=m.$$p||S;return m.$$p=null,e=Y(arguments),L(this.$dup(),"merge!",T(e),a.$to_proc())},-1),U(v,"$merge!",function m(d){var e,t,n,i,c,o,x,j,O,a=m.$$p||S,s=this;for(m.$$p=null,e=Y(arguments),C(s),t=0;t<e.length;++t)if(o=(c=(i=H["$coerce_to!"](e[t],_("Hash"),"to_hash")).$$keys).length,a===S)for(n=0;n<o;n++)(x=c[n]).$$is_string?O=i.$$smap[x]:(O=x.value,x=x.key),Q(s,x,O);else for(n=0;n<o;n++)(x=c[n]).$$is_string?O=i.$$smap[x]:(O=x.value,x=x.key),void 0!==(j=P(s,x))?Q(s,x,a(x,j,O)):Q(s,x,O);return s},-1),U(v,"$rassoc",function(d){for(var t,n,r=0,e=this.$$keys,s=e.length;r<s;r++)if((t=e[r]).$$is_string?n=this.$$smap[t]:(n=t.value,t=t.key),n["$=="](d))return[t,n];return S}),U(v,"$rehash",function(){var d=this;return C(d),l.hash_rehash(d),d}),U(v,"$reject",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["reject"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:a});for(var n,i,c,r=re(),e=0,s=a.$$keys,t=s.length;e<t;e++)(n=s[e]).$$is_string?i=a.$$smap[n]:(i=n.value,n=n.key),(!1===(c=d(n,i))||c===S)&&Q(r,n,i);return r}),U(v,"$reject!",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["reject!"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:a});C(a);for(var n,i,c,r=!1,e=0,s=a.$$keys,t=s.length;e<t;e++)(n=s[e]).$$is_string?i=a.$$smap[n]:(i=n.value,n=n.key),!1!==(c=d(n,i))&&c!==S&&void 0!==E(a,n)&&(r=!0,t--,e--);return r?a:S}),U(v,"$replace",function(d){var a=this;C(a),d=H["$coerce_to!"](d,_("Hash"),"to_hash"),$(a);for(var t,i,r=0,e=d.$$keys,s=e.length;r<s;r++)(t=e[r]).$$is_string?i=d.$$smap[t]:(i=t.value,t=t.key),Q(a,t,i);return k(d.$default_proc())?a["$default_proc="](d.$default_proc()):a["$default="](d.$default()),a}),U(v,"$select",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["select"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:a});for(var n,i,c,r=re(),e=0,s=a.$$keys,t=s.length;e<t;e++)(n=s[e]).$$is_string?i=a.$$smap[n]:(i=n.value,n=n.key),!1!==(c=d(n,i))&&c!==S&&Q(r,n,i);return r}),U(v,"$select!",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["select!"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:a});C(a);for(var n,i,c,r=S,e=0,s=a.$$keys,t=s.length;e<t;e++)(n=s[e]).$$is_string?i=a.$$smap[n]:(i=n.value,n=n.key),(!1===(c=d(n,i))||c===S)&&(void 0!==E(a,n)&&(t--,e--),r=a);return r}),U(v,"$shift",function(){var d=this;C(d);var r,a=d.$$keys;return a.length>0?[r=(r=a[0]).$$is_string?r:r.key,E(d,r)]:S}),U(v,"$slice",function(d){var r;r=Y(arguments);for(var s=re(),t=0,n=r.length;t<n;t++){var i=r[t],c=P(this,i);void 0!==c&&Q(s,i,c)}return s},-1),U(v,"$to_a",function(){for(var t,n,a=[],r=0,e=this.$$keys,s=e.length;r<s;r++)(t=e[r]).$$is_string?n=this.$$smap[t]:(n=t.value,t=t.key),a.push([t,n]);return a}),U(v,"$to_h",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,d!==S)return L(a,"map",[],d.$to_proc()).$to_h();if(a.$$class===l.Hash)return a;var r=new l.Hash;return $(r),l.hash_clone(a,r),r}),U(v,"$to_hash",I),U(v,"$to_proc",function(){return L(this,"proc",[],function a(r){var e=null==a.$$s?this:a.$$s;return null==r&&Z.$raise(_("ArgumentError"),"no key given"),e["$[]"](r)},{$$arity:-1,$$s:this})}),U(v,"$transform_keys",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["transform_keys"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});for(var n,i,r=re(),e=0,s=a.$$keys,t=s.length;e<t;e++)(n=s[e]).$$is_string?i=a.$$smap[n]:(i=n.value,n=n.key),n=ee(d,n),Q(r,n,i);return r}),U(v,"$transform_keys!",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["transform_keys!"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});C(a);var e,t,n,i,r=l.slice(a.$$keys),s=r.length;for(e=0;e<s;e++)(t=r[e]).$$is_string?n=a.$$smap[t]:(n=t.value,t=t.key),i=ee(d,t),E(a,t),Q(a,i,n);return a}),U(v,"$transform_values",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["transform_values"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:a});for(var n,i,r=re(),e=0,s=a.$$keys,t=s.length;e<t;e++)(n=s[e]).$$is_string?i=a.$$smap[n]:(i=n.value,n=n.key),i=ee(d,i),Q(r,n,i);return r}),U(v,"$transform_values!",function m(){var d=m.$$p||S,a=this;if(m.$$p=null,!k(d))return L(a,"enum_for",["transform_values!"],function i(){return(null==i.$$s?this:i.$$s).$size()},{$$s:a});C(a);for(var t,n,r=0,e=a.$$keys,s=e.length;r<s;r++)(t=e[r]).$$is_string?n=a.$$smap[t]:(n=t.value,t=t.key),n=ee(d,n),Q(a,t,n);return a}),U(v,"$values",function(){for(var t,a=[],r=0,e=this.$$keys,s=e.length;r<s;r++)a.push((t=e[r]).$$is_string?this.$$smap[t]:t.value);return a}),b(v,"dup","clone"),b(v,"each_pair","each"),b(v,"eql?","=="),b(v,"filter","select"),b(v,"filter!","select!"),b(v,"include?","has_key?"),b(v,"indices","indexes"),b(v,"key","index"),b(v,"key?","has_key?"),b(v,"member?","has_key?"),b(v,"size","length"),b(v,"store","[]="),b(v,"to_s","inspect"),b(v,"update","merge!"),b(v,"value?","has_value?"),b(v,"values_at","indexes")},Opal.modules["corelib/number"]=function(l){var v,N,m,a,r,h,M,ee=l.klass,re=l.Opal,$=l.Kernel,P=l.def,Q=l.eqeqeq,E=l.truthy,C=l.rb_gt,B=l.not,R=l.rb_lt,Y=l.alias,H=l.send2,Z=l.find_super,W=l.send,U=l.rb_plus,L=l.rb_minus,w=l.eqeq,A=l.return_self,F=l.rb_divide,k=l.to_ary,T=l.rb_times,I=l.rb_le,b=l.rb_ge,g=l.return_val,q=l.const_set,_=[],p=l.nil,f=l.$$$;return l.top.$require("corelib/numeric"),function(z,v,N){var s,h=ee("::",v,"Number");function d(s){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,s,!0),t}function a(s){return new DataView(s.buffer).getFloat64(0,!0)}function r(s){for(var t=d(s),n=0;n<t.length;n++){if(255!==t[n]){t[n]++;break}t[n]=0}return a(t)}function e(s){for(var t=d(s),n=0;n<t.length;n++){if(0!==t[n]){t[n]--;break}t[n]=255}return a(t)}[h].concat(N),re.$bridge(Number,h),l.prop(h.$$prototype,"$$is_number",!0),h.$$is_number_class=!0,s=l.get_singleton_class(h),P(s,"$allocate",function(){return $.$raise(f("TypeError"),"allocator undefined for "+this.$name())}),l.udef(s,"$new"),P(h,"$coerce",function(t){var n=this;if(t===p)$.$raise(f("TypeError"),"can't convert "+t.$class()+" into Float");else{if(t.$$is_string)return[$.$Float(t),n];if(t["$respond_to?"]("to_f"))return[re["$coerce_to!"](t,f("Float"),"to_f"),n];if(t.$$is_number)return[t,n];$.$raise(f("TypeError"),"can't convert "+t.$class()+" into Float")}}),P(h,"$__id__",function(){return 2*this+1}),P(h,"$+",function(t){return t.$$is_number?this+t:this.$__coerced__("+",t)}),P(h,"$-",function(t){return t.$$is_number?this-t:this.$__coerced__("-",t)}),P(h,"$*",function(t){return t.$$is_number?this*t:this.$__coerced__("*",t)}),P(h,"$/",function(t){return t.$$is_number?this/t:this.$__coerced__("/",t)}),P(h,"$%",function(t){var n=this;return t.$$is_number?t==-1/0?t:0!=t?t<0||n<0?(n%t+t)%t:n%t:void $.$raise(f("ZeroDivisionError"),"divided by 0"):n.$__coerced__("%",t)}),P(h,"$&",function(t){return t.$$is_number?this&t:this.$__coerced__("&",t)}),P(h,"$|",function(t){return t.$$is_number?this|t:this.$__coerced__("|",t)}),P(h,"$^",function(t){return t.$$is_number?this^t:this.$__coerced__("^",t)}),P(h,"$<",function(t){return t.$$is_number?this<t:this.$__coerced__("<",t)}),P(h,"$<=",function(t){return t.$$is_number?this<=t:this.$__coerced__("<=",t)}),P(h,"$>",function(t){return t.$$is_number?this>t:this.$__coerced__(">",t)}),P(h,"$>=",function(t){return t.$$is_number?this>=t:this.$__coerced__(">=",t)}),P(h,"$<=>",function(t){try{return function(s,t){return t.$$is_number?isNaN(s)||isNaN(t)?p:s>t?1:s<t?-1:0:s.$__coerced__("<=>",t)}(this,t)}catch(i){if(!l.rescue(i,[f("ArgumentError")]))throw i;try{return p}finally{l.pop_exception()}}}),P(h,"$<<",function(t){return(t=re["$coerce_to!"](t,f("Integer"),"to_int"))>0?this<<t:this>>-t}),P(h,"$>>",function(t){return(t=re["$coerce_to!"](t,f("Integer"),"to_int"))>0?this>>t:this<<-t}),P(h,"$[]",function(t){return(t=re["$coerce_to!"](t,f("Integer"),"to_int"))<0?0:t>=32?this<0?1:0:this>>t&1}),P(h,"$+@",function(){return+this}),P(h,"$-@",function(){return-this}),P(h,"$~",function(){return~this}),P(h,"$**",function(t){var n=this;return Q(f("Integer"),t)?B(f("Integer")["$==="](n))||E(C(t,0))?Math.pow(n,t):f("Rational").$new(n,1)["$**"](t):R(n,0)&&(Q(f("Float"),t)||Q(f("Rational"),t))?f("Complex").$new(n,0)["$**"](t.$to_f()):E(null!=t.$$is_number)?Math.pow(n,t):n.$__coerced__("**",t)}),P(h,"$==",function(t){return t.$$is_number?this.valueOf()===t.valueOf():!!t["$respond_to?"]("==")&&t["$=="](this)}),Y(h,"===","=="),P(h,"$abs",function(){return Math.abs(this)}),P(h,"$abs2",function(){return Math.abs(this*this)}),P(h,"$allbits?",function(t){return(this&(t=re["$coerce_to!"](t,f("Integer"),"to_int")))==t}),P(h,"$anybits?",function(t){return 0!=(this&re["$coerce_to!"](t,f("Integer"),"to_int"))}),P(h,"$angle",function(){var t=this;return E(t["$nan?"]())?t:0==t?1/t>0?0:Math.PI:t<0?Math.PI:0}),P(h,"$bit_length",function(){var t=this;if(Q(f("Integer"),t)||$.$raise(f("NoMethodError").$new("undefined method `bit_length` for "+t+":Float","bit_length")),0===t||-1===t)return 0;for(var n=0,i=t<0?~t:t;0!=i;)n+=1,i>>>=1;return n}),P(h,"$ceil",function(t){null==t&&(t=0);var i=this.$to_f();if(i%1==0&&t>=0)return i;var c=Math.pow(10,t),o=Math.ceil(i*c)/c;return i%1==0&&(o=Math.round(o)),o},-1),P(h,"$chr",function(t){return l.enc(String.fromCharCode(this),t||"BINARY")},-1),P(h,"$denominator",function s(){var t=s.$$p||p,n=this;return s.$$p=null,E(n["$nan?"]())||E(n["$infinite?"]())?1:H(n,Z(n,"denominator",s,!1,!0),"denominator",[],t)}),P(h,"$downto",function s(t){var n=s.$$p||p,i=this;if(s.$$p=null,n===p)return W(i,"enum_for",["downto",t],function o(){var x=null==o.$$s?this:o.$$s;return Q(f("Numeric"),t)||$.$raise(f("ArgumentError"),"comparison of "+x.$class()+" with "+t.$class()+" failed"),E(C(t,x))?0:U(L(x,t),1)},{$$s:i});t.$$is_number||$.$raise(f("ArgumentError"),"comparison of "+i.$class()+" with "+t.$class()+" failed");for(var c=i;c>=t;c--)n(c);return i}),P(h,"$equal?",function(t){var i;return E(i=this["$=="](t))?i:isNaN(this)&&isNaN(t)}),P(h,"$even?",function(){return this%2==0}),P(h,"$floor",function(t){null==t&&(t=0);var i=this.$to_f();if(i%1==0&&t>=0)return i;var c=Math.pow(10,t),o=Math.floor(i*c)/c;return i%1==0&&(o=Math.round(o)),o},-1),P(h,"$gcd",function(t){Q(f("Integer"),t)||$.$raise(f("TypeError"),"not an integer");for(var i=Math.abs(this),c=Math.abs(t);i>0;){var o=i;i=c%i,c=o}return c}),P(h,"$gcdlcm",function(t){return[this.$gcd(t),this.$lcm(t)]}),P(h,"$integer?",function(){return this%1==0}),P(h,"$is_a?",function s(t){var n=s.$$p||p,i=this;return s.$$p=null,!!(w(t,f("Integer"))&&Q(f("Integer"),i)||w(t,f("Integer"))&&Q(f("Integer"),i)||w(t,f("Float"))&&Q(f("Float"),i))||H(i,Z(i,"is_a?",s,!1,!0),"is_a?",[t],n)}),P(h,"$instance_of?",function s(t){var n=s.$$p||p,i=this;return s.$$p=null,!!(w(t,f("Integer"))&&Q(f("Integer"),i)||w(t,f("Integer"))&&Q(f("Integer"),i)||w(t,f("Float"))&&Q(f("Float"),i))||H(i,Z(i,"instance_of?",s,!1,!0),"instance_of?",[t],n)}),P(h,"$lcm",function(t){var n=this;return Q(f("Integer"),t)||$.$raise(f("TypeError"),"not an integer"),0==n||0==t?0:Math.abs(n*t/n.$gcd(t))}),P(h,"$next",function(){return this+1}),P(h,"$nobits?",function(t){return 0==(this&re["$coerce_to!"](t,f("Integer"),"to_int"))}),P(h,"$nonzero?",function(){return 0==this?p:this}),P(h,"$numerator",function s(){var t=s.$$p||p,n=this;return s.$$p=null,E(n["$nan?"]())||E(n["$infinite?"]())?n:H(n,Z(n,"numerator",s,!1,!0),"numerator",[],t)}),P(h,"$odd?",function(){return this%2!=0}),P(h,"$ord",A),P(h,"$pow",function(t,n){var i=this;return 0==i&&$.$raise(f("ZeroDivisionError"),"divided by 0"),void 0===n?i["$**"](t):(f("Integer")["$==="](t)||$.$raise(f("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),t<0&&$.$raise(f("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),f("Integer")["$==="](n)||$.$raise(f("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),0===n&&$.$raise(f("ZeroDivisionError"),"divided by 0"),i["$**"](t)["$%"](n))},-2),P(h,"$pred",function(){return this-1}),P(h,"$quo",function s(t){var n=s.$$p||p,i=this;return s.$$p=null,Q(f("Integer"),i)?H(i,Z(i,"quo",s,!1,!0),"quo",[t],n):F(i,t)}),P(h,"$rationalize",function(t){var n,i,c=this,o=p,x=p;return arguments.length>1&&$.$raise(f("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),Q(f("Integer"),c)?f("Rational").$new(c,1):E(c["$infinite?"]())?$.$raise(f("FloatDomainError"),"Infinity"):E(c["$nan?"]())?$.$raise(f("FloatDomainError"),"NaN"):E(null==t)?(i=f("Math").$frexp(c),o=null==(n=k(i))[0]?p:n[0],x=null==n[1]?p:n[1],o=f("Math").$ldexp(o,f(f("Float"),"MANT_DIG")).$to_i(),x=L(x,f(f("Float"),"MANT_DIG")),f("Rational").$new(T(2,o),1["$<<"](L(1,x))).$rationalize(f("Rational").$new(1,1["$<<"](L(1,x))))):c.$to_r().$rationalize(t)},-1),P(h,"$remainder",function(t){return L(this,T(t,F(this,t).$truncate()))}),P(h,"$round",function(t){var n,i,x,c=this;if(Q(f("Integer"),c)){if(E(null==t)||(Q(f("Float"),t)&&E(t["$infinite?"]())&&$.$raise(f("RangeError"),"Infinity"),t=re["$coerce_to!"](t,f("Integer"),"to_int"),E(R(t,f(f("Integer"),"MIN")))&&$.$raise(f("RangeError"),"out of bounds"),E(t>=0)))return c;if(.415241*(t=t["$-@"]())-.125>c.$size())return 0;var j=Math.pow(10,t),O=Math.floor((Math.abs(c)+j/2)/j)*j;return c<0?-O:O}if(E(c["$nan?"]())&&E(null==t)&&$.$raise(f("FloatDomainError"),"NaN"),t=re["$coerce_to!"](t||0,f("Integer"),"to_int"),E(I(t,0)))E(c["$nan?"]())?$.$raise(f("RangeError"),"NaN"):E(c["$infinite?"]())&&$.$raise(f("FloatDomainError"),"Infinity");else{if(w(t,0))return Math.round(c);if(E(c["$nan?"]())||E(c["$infinite?"]()))return c}return i=f("Math").$frexp(c),x=null==(n=k(i))[1]?p:n[1],E(b(t,L(U(f(f("Float"),"DIG"),2),E(C(x,0))?F(x,4):L(F(x,3),1))))?c:E(R(t,(E(C(x,0))?U(F(x,3),1):F(x,4))["$-@"]()))?0:Math.round(c*Math.pow(10,t))/Math.pow(10,t)},-1),P(h,"$times",function s(){var t=s.$$p||p,n=this;if(s.$$p=null,!E(t))return W(n,"enum_for",["times"],function c(){return null==c.$$s?this:c.$$s},{$$s:n});for(var i=0;i<n;i++)t(i);return n}),P(h,"$to_f",A),P(h,"$to_i",function(){var t=this;return t<0?Math.ceil(t):Math.floor(t)}),P(h,"$to_r",function(){var t,n,i=this,c=p,o=p;return Q(f("Integer"),i)?f("Rational").$new(i,1):(n=f("Math").$frexp(i),c=null==(t=k(n))[0]?p:t[0],o=null==t[1]?p:t[1],c=f("Math").$ldexp(c,f(f("Float"),"MANT_DIG")).$to_i(),o=L(o,f(f("Float"),"MANT_DIG")),T(c,f(f("Float"),"RADIX")["$**"](o)).$to_r())}),P(h,"$to_s",function(t){var n=this;return null==t&&(t=10),t=re["$coerce_to!"](t,f("Integer"),"to_int"),(E(R(t,2))||E(C(t,36)))&&$.$raise(f("ArgumentError"),"invalid radix "+t),w(n,0)&&E(1/n==-1/0)?"-0.0":n.toString(t)},-1),P(h,"$truncate",function(t){null==t&&(t=0);var i=this.$to_f();if(i%1==0&&t>=0)return i;var c=Math.pow(10,t),o=parseInt(i*c,10)/c;return i%1==0&&(o=Math.round(o)),o},-1),P(h,"$digits",function(t){var n=this;null==t&&(t=10),R(n,0)&&$.$raise(f(f("Math"),"DomainError"),"out of domain"),t=re["$coerce_to!"](t,f("Integer"),"to_int"),E(R(t,2))&&$.$raise(f("ArgumentError"),"invalid radix "+t),n!=parseInt(n)&&$.$raise(f("NoMethodError"),"undefined method `digits' for "+n.$inspect());var i=n,c=[];if(0==n)return[0];for(;0!=i;)c.push(i%t),i=parseInt(i/t,10);return c},-1),P(h,"$divmod",function s(t){var n=s.$$p||p,i=this;return s.$$p=null,E(i["$nan?"]())||E(t["$nan?"]())?$.$raise(f("FloatDomainError"),"NaN"):E(i["$infinite?"]())?$.$raise(f("FloatDomainError"),"Infinity"):H(i,Z(i,"divmod",s,!1,!0),"divmod",[t],n)}),P(h,"$upto",function s(t){var n=s.$$p||p,i=this;if(s.$$p=null,n===p)return W(i,"enum_for",["upto",t],function o(){var x=null==o.$$s?this:o.$$s;return Q(f("Numeric"),t)||$.$raise(f("ArgumentError"),"comparison of "+x.$class()+" with "+t.$class()+" failed"),E(R(t,x))?0:U(L(t,x),1)},{$$s:i});t.$$is_number||$.$raise(f("ArgumentError"),"comparison of "+i.$class()+" with "+t.$class()+" failed");for(var c=i;c<=t;c++)n(c);return i}),P(h,"$zero?",function(){return 0==this}),P(h,"$size",g(4)),P(h,"$nan?",function(){return isNaN(this)}),P(h,"$finite?",function(){var t=this;return t!=1/0&&t!=-1/0&&!isNaN(t)}),P(h,"$infinite?",function(){return this==1/0?1:this==-1/0?-1:p}),P(h,"$positive?",function(){var t=this;return 0!=t&&(t==1/0||1/t>0)}),P(h,"$negative?",function(){return this==-1/0||1/this<0}),P(h,"$next_float",function(){var t=this;return w(t,f(f("Float"),"INFINITY"))?f(f("Float"),"INFINITY"):E(t["$nan?"]())?f(f("Float"),"NAN"):b(t,0)?r(Math.abs(t)):e(t)}),P(h,"$prev_float",function(){var t=this;return w(t,f(f("Float"),"INFINITY")["$-@"]())?f(f("Float"),"INFINITY")["$-@"]():E(t["$nan?"]())?f(f("Float"),"NAN"):C(t,0)?e(t):-r(Math.abs(t))}),Y(h,"arg","angle"),Y(h,"eql?","=="),Y(h,"fdiv","/"),Y(h,"inspect","to_s"),Y(h,"kind_of?","is_a?"),Y(h,"magnitude","abs"),Y(h,"modulo","%"),Y(h,"object_id","__id__"),Y(h,"phase","angle"),Y(h,"succ","next"),Y(h,"to_int","to_i")}(0,f("Numeric"),_),q("::","Fixnum",f("Number")),v=f("Numeric"),N=_,M=[h=ee("::",v,"Integer")].concat(N),h.$$is_number_class=!0,h.$$is_integer_class=!0,a=[m=l.get_singleton_class(h)].concat(M),r=l.$r(a),P(m,"$allocate",function(){return $.$raise(f("TypeError"),"allocator undefined for "+this.$name())}),l.udef(m,"$new"),P(m,"$sqrt",function(s){return(s=re["$coerce_to!"](s,f("Integer"),"to_int"))<0&&$.$raise(f(f("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(s),10)}),P(m,"$try_convert",function(s){return r("Opal")["$coerce_to?"](s,this,"to_int")}),q(h,"MAX",Math.pow(2,30)-1),q(h,"MIN",-Math.pow(2,30)),function(z,v,N){var h=ee("::",v,"Float");return[h].concat(N),h.$$is_number_class=!0,function(m,d){P(m,"$allocate",function(){return $.$raise(f("TypeError"),"allocator undefined for "+this.$name())}),l.udef(m,"$new"),P(m,"$===",function(r){return!!r.$$is_number})}(l.get_singleton_class(h)),q(h,"INFINITY",1/0),q(h,"MAX",Number.MAX_VALUE),q(h,"MIN",Number.MIN_VALUE),q(h,"NAN",NaN),q(h,"DIG",15),q(h,"MANT_DIG",53),q(h,"RADIX",2),q(h,"EPSILON",Number.EPSILON||2220446049250313e-31)}(0,f("Numeric"),_)},Opal.modules["corelib/range"]=function(l){var ee=l.klass,re=l.truthy,$=l.Kernel,P=l.def,Q=l.not,E=l.send2,C=l.find_super,B=l.rb_lt,R=l.rb_le,Y=l.send,H=l.eqeq,Z=l.eqeqeq,W=l.return_ivar,U=l.rb_gt,L=l.rb_minus,w=l.Opal,A=l.rb_divide,F=l.rb_plus,k=l.rb_times,T=l.rb_ge,I=l.thrower,b=l.alias,S=l.nil,_=l.$$$;return l.top.$require("corelib/enumerable"),function(p,f,z){var v=ee("::",null,"Range"),N=[v].concat([]),h=l.$r(N),M=v.$$prototype;function m(d){return d.begin===S||d.end===S||d.begin===-1/0||d.end===1/0||d.begin===1/0||d.end===-1/0}return M.begin=M.end=M.excl=S,v.$include(_("Enumerable")),v.$$prototype.$$is_range=!0,v.$attr_reader("begin","end"),P(v,"$initialize",function(a,r,e){var s=this;return null==e&&(e=!1),re(s.begin)&&$.$raise(_("NameError"),"'initialize' called twice"),re(a["$<=>"](r))||re(a["$nil?"]())||re(r["$nil?"]())||$.$raise(_("ArgumentError"),"bad value for range"),s.begin=a,s.end=r,s.excl=e},-3),P(v,"$===",function(a){return this["$include?"](a)}),P(v,"$count",function d(){var a=d.$$p||S,r=this;return d.$$p=null,Q(a!==S)&&re(m(r))?_(_("Float"),"INFINITY"):E(r,C(r,"count",d,!1,!0),"count",[],a)}),P(v,"$to_a",function d(){var a=d.$$p||S,r=this;return d.$$p=null,re(m(r))&&$.$raise(_("TypeError"),"cannot convert endless range to an array"),E(r,C(r,"to_a",d,!1,!0),"to_a",[],a)}),P(v,"$cover?",function(a){var e,i,r=this,s=S,t=S,n=S;return e=re(s=re(t=re(n=r.begin["$nil?"]())?-1:n)?t:r.begin["$<=>"](a))&&s,i=re(s=re(t=re(n=r.end["$nil?"]())?-1:n)?t:a["$<=>"](r.end))&&s,re(s=re(t=re(r.excl)?re(n=i)?B(i,0):n:re(n=i)?R(i,0):n)?e:t)?R(e,0):s}),P(v,"$each",function d(){var s,n,i,a=d.$$p||S,r=this,e=S,t=S;if(d.$$p=null,a===S)return Y(r,"enum_for",["each"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:r});if(r.begin.$$is_number&&r.end.$$is_number){for((r.begin%1!=0||r.end%1!=0)&&$.$raise(_("TypeError"),"can't iterate from Float"),n=r.begin,i=r.end+(re(r.excl)?0:1);n<i;n++)a(n);return r}if(r.begin.$$is_string&&r.end.$$is_string)return Y(r.begin,"upto",[r.end,r.excl],a.$to_proc()),r;for(s=r.end,re((e=r.begin)["$respond_to?"]("succ"))||$.$raise(_("TypeError"),"can't iterate from "+e.$class());re(re(t=r.end["$nil?"]())?t:B(e["$<=>"](s),0));)l.yield1(a,e),e=e.$succ();return Q(r.excl)&&H(e,s)&&l.yield1(a,e),r}),P(v,"$eql?",function(a){var r=this,e=S,s=S;return!!Z(_("Range"),a)&&(re(e=re(s=r.excl["$==="](a["$exclude_end?"]()))?r.begin["$eql?"](a.$begin()):s)?r.end["$eql?"](a.$end()):e)}),P(v,"$exclude_end?",W("excl")),P(v,"$first",function d(a){var r=d.$$p||S,e=this;return d.$$p=null,re(e.begin["$nil?"]())&&$.$raise(_("RangeError"),"cannot get the minimum of beginless range"),re(null==a)?e.begin:E(e,C(e,"first",d,!1,!0),"first",[a],r)},-1),P(v,"$last",function(a){var r=this;return re(r.end["$nil?"]())&&$.$raise(_("RangeError"),"cannot get the maximum of endless range"),re(null==a)?r.end:r.$to_a().$last(a)},-1),P(v,"$max",function d(){var a=d.$$p||S,r=this;return d.$$p=null,re(r.end["$nil?"]())?$.$raise(_("RangeError"),"cannot get the maximum of endless range"):a!==S?E(r,C(r,"max",d,!1,!0),"max",[],a):Q(r.begin["$nil?"]())&&(re(U(r.begin,r.end))||re(r.excl)&&H(r.begin,r.end))?S:r.excl?r.end-1:r.end}),P(v,"$min",function d(){var a=d.$$p||S,r=this;return d.$$p=null,re(r.begin["$nil?"]())?$.$raise(_("RangeError"),"cannot get the minimum of beginless range"):a!==S?E(r,C(r,"min",d,!1,!0),"min",[],a):Q(r.end["$nil?"]())&&(re(U(r.begin,r.end))||re(r.excl)&&H(r.begin,r.end))?S:r.begin}),P(v,"$size",function(){var a=this,r=S,e=S,s=S;return r=_(_("Float"),"INFINITY"),H(a.begin,r)&&Q(a.end["$nil?"]())||H(a.end,r["$-@"]())&&Q(a.begin["$nil?"]())?0:re(m(a))?r:Z(_("Numeric"),a.begin)&&Z(_("Numeric"),a.end)?(e=a.begin,s=a.end,re(a.excl)&&(s=L(s,1)),re(B(s,e))?0:(Math.abs(s-e)+1).$to_i()):S}),P(v,"$step",function d(a){var r=d.$$p||S,e=this,s=S,t=S;function n(){null==a?a=1:a.$$is_number||(a=w["$coerce_to!"](a,_("Integer"),"to_int")),a<0?$.$raise(_("ArgumentError"),"step can't be negative"):0===a&&$.$raise(_("ArgumentError"),"step can't be 0")}return d.$$p=null,r===S?(re(e.begin["$is_a?"](h("Numeric")))||re(e.begin["$nil?"]()))&&(re(e.end["$is_a?"](h("Numeric")))||re(e.end["$nil?"]()))&&Q(re(s=e.begin["$nil?"]())?e.end["$nil?"]():s)?_(_("Enumerator"),"ArithmeticSequence").$new(e,a,"step"):Y(e,"enum_for",["step",a],function(){return n(),function i(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return S;if(a%1==0)return A(e.$size(),a).$ceil();var te,c=e.begin,o=e.end,x=Math.abs,j=Math.floor,O=(x(c)+x(o)+x(o-c))/x(a)*_(_("Float"),"EPSILON");return O>.5&&(O=.5),e.excl?(te=j((o-c)/a-O))*a+c<o&&te++:te=j((o-c)/a+O)+1,te}()}):(n(),re(e.begin.$$is_number&&e.end.$$is_number)?(t=0,function(){try{var c=I("break");return Y(e,"loop",[],function o(){var j,x=null==o.$$s?this:o.$$s;return null==x.begin&&(x.begin=S),null==x.excl&&(x.excl=S),null==x.end&&(x.end=S),j=F(x.begin,k(t,a)),re(x.excl)?re(T(j,x.end))&&c.$throw():re(U(j,x.end))&&c.$throw(),l.yield1(r,j),t=F(t,1)},{$$s:e})}catch(o){if(o===c)return o.$v;throw o}}()):(e.begin.$$is_string&&e.end.$$is_string&&a%1!=0&&$.$raise(_("TypeError"),"no implicit conversion to float from string"),Y(e,"each_with_index",[],function(o,x){return null==o&&(o=S),null==x&&(x=S),H(x["$%"](a),0)?l.yield1(r,o):S})),e)},-1),P(v,"$%",function(a){var r=this;return re(r.begin["$is_a?"](h("Numeric")))&&re(r.end["$is_a?"](h("Numeric")))?_(_("Enumerator"),"ArithmeticSequence").$new(r,a,"%"):r.$step(a)}),P(v,"$bsearch",function d(){var a=d.$$p||S,r=this;return d.$$p=null,a===S?r.$enum_for("bsearch"):(re(m(r)&&(r.begin.$$is_number||r.end.$$is_number))&&$.$raise(_("NotImplementedError"),"Can't #bsearch an infinite range"),re(r.begin.$$is_number&&r.end.$$is_number)||$.$raise(_("TypeError"),"can't do binary search for "+r.begin.$class()),Y(r.$to_a(),"bsearch",[],a.$to_proc()))}),P(v,"$to_s",function(){var a=this,r=S;return(re(r=a.begin)?r:"")+(re(a.excl)?"...":"..")+(re(r=a.end)?r:"")}),P(v,"$inspect",function(){var a=this,r=S;return(re(r=a.begin)?a.begin.$inspect():r)+(re(a.excl)?"...":"..")+(re(r=a.end)?a.end.$inspect():r)}),P(v,"$marshal_load",function(a){var r=this;return r.begin=a["$[]"]("begin"),r.end=a["$[]"]("end"),r.excl=a["$[]"]("excl")}),P(v,"$hash",function(){var a=this;return[a.begin,a.end,a.excl].$hash()}),b(v,"==","eql?"),b(v,"include?","cover?"),b(v,"member?","cover?")}()},Opal.modules["corelib/proc"]=function(l){var A,ee=l.slice,$=l.truthy,P=l.Kernel,Q=l.defs,E=l.def,C=l.send,B=l.to_a,R=l.return_self,Y=l.ensure_kwargs,H=l.Opal,Z=l.alias,W=l.nil,U=l.$$$;return A=(0,l.klass)("::",Function,"Proc"),l.prop(A.$$prototype,"$$is_proc",!0),l.prop(A.$$prototype,"$$is_lambda",!1),Q(A,"$new",function F(){var k=F.$$p||W;return F.$$p=null,$(k)||P.$raise(U("ArgumentError"),"tried to create a Proc object without a block"),k}),E(A,"$call",function F(k){var b,T=F.$$p||W,g=this;F.$$p=null,b=ee(arguments),T!==W&&(g.$$p=T);var q,S=g.$$brk,_=g.$$ret;if(S||_&&g.$$is_lambda)try{q=g.$$is_lambda?g.apply(null,b):l.yieldX(g,b)}catch(p){if(p===S)return p.$v;if(g.$$is_lambda&&p===_)return p.$v;throw p}else q=g.$$is_lambda?g.apply(null,b):l.yieldX(g,b);return q},-1),E(A,"$>>",function F(k){return F.$$p=null,C(P,"proc",[],function b(g){var S,f,q=b.$$p||W,p=null==b.$$s?this:b.$$s;return b.$$p=null,S=ee(arguments),f=C(p,"call",B(S),q.$to_proc()),k.$call(f)},{$$arity:-1,$$s:this})}),E(A,"$<<",function F(k){return F.$$p=null,C(P,"proc",[],function b(g){var S,f,q=b.$$p||W,p=null==b.$$s?this:b.$$s;return b.$$p=null,S=ee(arguments),f=C(k,"call",B(S),q.$to_proc()),p.$call(f)},{$$arity:-1,$$s:this})}),E(A,"$to_proc",R),E(A,"$lambda?",function(){return!!this.$$is_lambda}),E(A,"$arity",function(){var k=this;return k.$$is_curried?-1:null!=k.$$arity?k.$$arity:k.length}),E(A,"$source_location",function(){var T=W;return this.$$is_curried?W:$(T=this.$$source_location)?T:W}),E(A,"$binding",function(){var T=this;return T.$$is_curried&&P.$raise(U("ArgumentError"),"Can't create Binding"),$(U("::","Binding","skip_raise")?"constant":W)?U("Binding").$new(W,[],T.$$s,T.$source_location()):W}),E(A,"$parameters",function(k){var I=this;if(k=Y(k),I.$$is_curried)return[["rest"]];if(I.$$parameters){if(k.$$smap.lambda??I.$$is_lambda)return I.$$parameters;var g,q,b=[];for(g=0,q=I.$$parameters.length;g<q;g++){var S=I.$$parameters[g];"req"===S[0]&&(S=["opt",S[1]]),b.push(S)}return b}return[]},-1),E(A,"$curry",function(k){var T=this;function I(){var q,b=ee(arguments),g=b.length;return g>k&&T.$$is_lambda&&!T.$$is_curried&&P.$raise(U("ArgumentError"),"wrong number of arguments ("+g+" for "+k+")"),g>=k?T.$call.apply(T,b):(q=function(){return I.apply(null,b.concat(ee(arguments)))},q.$$is_lambda=T.$$is_lambda,q.$$is_curried=!0,q)}return void 0===k?k=T.length:(k=H["$coerce_to!"](k,U("Integer"),"to_int"),T.$$is_lambda&&k!==T.length&&P.$raise(U("ArgumentError"),"wrong number of arguments ("+k+" for "+T.length+")")),I.$$is_lambda=T.$$is_lambda,I.$$is_curried=!0,I},-1),E(A,"$dup",function(){var k=this,T=k.$$original_proc||k,I=function(){return T.apply(this,arguments)};for(var b in k)k.hasOwnProperty(b)&&(I[b]=k[b]);return I}),Z(A,"===","call"),Z(A,"clone","dup"),Z(A,"yield","call"),Z(A,"[]","call")},Opal.modules["corelib/method"]=function(l){var W,U,ee=l.klass,re=l.def,$=l.truthy,P=l.slice,Q=l.alias,E=l.Kernel,C=l.send,B=l.to_a,R=l.nil,Y=l.$$$;return(U=(W=ee("::",null,"Method")).$$prototype).method=U.receiver=U.owner=U.name=R,W.$attr_reader("owner","receiver","name"),re(W,"$initialize",function(w,A,F,k){var T=this;return T.receiver=w,T.owner=A,T.name=k,T.method=F}),re(W,"$arity",function(){return this.method.$arity()}),re(W,"$parameters",function(){return this.method.$$parameters}),re(W,"$source_location",function(){var A;return $(A=this.method.$$source_location)?A:["(eval)",0]}),re(W,"$comments",function(){var A;return $(A=this.method.$$comments)?A:[]}),re(W,"$call",function L(w){var k,A=L.$$p||R,T=this;return L.$$p=null,k=P(arguments),T.method.$$p=A,T.method.apply(T.receiver,k)},-1),re(W,"$curry",function(w){return this.method.$curry(w)},-1),re(W,"$>>",function(w){return this.method["$>>"](w)}),re(W,"$<<",function(w){return this.method["$<<"](w)}),re(W,"$unbind",function(){var w=this;return Y("UnboundMethod").$new(w.receiver.$class(),w.owner,w.method,w.name)}),re(W,"$to_proc",function(){var w=this,A=w.$call.bind(w);return A.$$unbound=w.method,A.$$is_lambda=!0,A.$$arity=null==w.method.$$arity?w.method.length:w.method.$$arity,A.$$parameters=w.method.$$parameters,A}),re(W,"$inspect",function(){var w=this;return"#<"+w.$class()+": "+w.receiver.$class()+"#"+w.name+" (defined in "+w.owner+" in "+w.$source_location().$join(":")+")>"}),Q(W,"[]","call"),Q(W,"===","call"),function(H,Z){var W=ee("::",null,"UnboundMethod"),U=W.$$prototype;return U.method=U.owner=U.name=U.source=R,W.$attr_reader("source","owner","name"),re(W,"$initialize",function(w,A,F,k){var T=this;return T.source=w,T.owner=A,T.method=F,T.name=k}),re(W,"$arity",function(){return this.method.$arity()}),re(W,"$parameters",function(){return this.method.$$parameters}),re(W,"$source_location",function(){var A;return $(A=this.method.$$source_location)?A:["(eval)",0]}),re(W,"$comments",function(){var A;return $(A=this.method.$$comments)?A:[]}),re(W,"$bind",function(w){var A=this;if(A.owner.$$is_module||l.is_a(w,A.owner))return Y("Method").$new(w,A.owner,A.method,A.name);E.$raise(Y("TypeError"),"can't bind singleton method to a different class (expected "+w+".kind_of?("+A.owner+" to be true)")}),re(W,"$bind_call",function L(w,A){var T,F=L.$$p||R;return L.$$p=null,T=P(arguments,1),C(this.$bind(w),"call",B(T),F.$to_proc())},-2),re(W,"$inspect",function(){var w=this;return"#<"+w.$class()+": "+w.source+"#"+w.name+" (defined in "+w.owner+" in "+w.$source_location().$join(":")+")>"})}()},Opal.modules["corelib/variables"]=function(l){var ee=l.gvars,re=l.const_set,$=l.Object,P=l.hash2,Q=l.nil;return ee["&"]=ee["~"]=ee["`"]=ee["'"]=Q,ee.LOADED_FEATURES=ee['"']=l.loaded_features,ee.LOAD_PATH=ee[":"]=[],ee["/"]="\n",ee[","]=Q,re("::","ARGV",[]),re("::","ARGF",$.$new()),re("::","ENV",P([],{})),ee.VERBOSE=!1,ee.DEBUG=!1,ee.SAFE=0},Opal.modules["corelib/io"]=function(l){var b,f,z,re=l.const_set,$=l.not,P=l.truthy,Q=l.def,E=l.return_ivar,C=l.return_val,B=l.slice,R=l.Kernel,Y=l.gvars,H=l.send,Z=l.to_a,W=l.rb_plus,U=l.neqeq,L=l.range,w=l.hash2,A=l.eqeq,F=l.to_ary,k=l.rb_gt,T=l.assign_ivar_val,I=l.alias,g=l.nil,q=l.$$$;(z=(f=(0,l.klass)("::",null,"IO")).$$prototype).read_buffer=z.closed=g,re(f,"SEEK_SET",0),re(f,"SEEK_CUR",1),re(f,"SEEK_END",2),re(f,"SEEK_DATA",3),re(f,"SEEK_HOLE",4),re(f,"READABLE",1),re(f,"WRITABLE",4),f.$attr_reader("eof"),f.$attr_accessor("read_proc","sync","tty","write_proc"),Q(f,"$initialize",function(N,h){var M=this;return null==h&&(h="r"),M.fd=N,M.flags=h,M.eof=!1,P(h["$include?"]("r"))&&$(h["$match?"](/[wa+]/))?M.closed="write":P(h["$match?"](/[wa]/))&&$(h["$match?"](/[r+]/))?M.closed="read":g},-2),Q(f,"$fileno",E("fd")),Q(f,"$tty?",function(){return 1==this.tty}),Q(f,"$write",function(N){return this.write_proc(N),N.$size()}),Q(f,"$flush",C(g)),Q(f,"$<<",function(N){return this.$write(N),this}),Q(f,"$print",function(N){var M;null==Y[","]&&(Y[","]=g);for(var d=0,a=(M=B(arguments)).length;d<a;d++)M[d]=R.$String(M[d]);return this.$write(M.join(Y[","])),g},-1),Q(f,"$puts",function(N){var M,d,m=this;if(0===(M=B(arguments)).length)return m.$write("\n"),g;for(var a=0,r=M.length;a<r;a++)if(M[a].$$is_array){var e=M[a].$flatten();e.length>0&&H(m,"puts",Z(e))}else(d=M[a].$$is_string?M[a].valueOf():R.$String(M[a])).endsWith("\n")||(d+="\n"),m.$write(d);return g},-1),Q(f,"$getc",function(){var h,N=this,M=g,m=g;N.read_buffer=P(h=N.read_buffer)?h:"",M="";do{if(N.read_buffer=W(N.read_buffer,M),U(N.read_buffer,""))return m=N.read_buffer["$[]"](0),N.read_buffer=N.read_buffer["$[]"](L(1,-1,!1)),m}while(P(M=N.$sysread_noraise(1)));return g}),Q(f,"$getbyte",function(){var N;return(N=this.$getc())===g||null==N?g:N.$ord()}),Q(f,"$readbyte",function(){return this.$readchar().$ord()}),Q(f,"$readchar",function(){var h;return P(h=this.$getc())?h:R.$raise(q("EOFError"),"end of file reached")}),Q(f,"$readline",function(N){var h,d;return h=B(arguments),P(d=H(this,"gets",Z(h)))?d:R.$raise(q("EOFError"),"end of file reached")},-1),Q(f,"$gets",function(N,h,M){var m,d,r,s,a=this,e=g,t=g,n=g,i=g;null==Y["/"]&&(Y["/"]=g),null==N&&(N=!1),null==h&&(h=g),null==M&&(M=w([],{})),P(N.$$is_number)&&$(h)&&(N=(m=[!1,N,h])[0],h=m[1],M=m[2]),P(N.$$is_hash)&&$(h)&&A(M,w([],{}))?(N=(m=[!1,g,N])[0],h=m[1],M=m[2]):P(h.$$is_hash)&&A(M,w([],{}))&&(N=(m=[N,g,h])[0],h=m[1],M=m[2]),r=N,A(N,!1)&&(N=Y["/"]),A(N,"")&&(N=/\r?\n\r?\n/),N=P(e=N)?e:"",A(r,"")||(N=N.$to_str()),s=A(r,"")?2:N.$length(),A(N," ")&&(N=/ /),a.read_buffer=P(e=a.read_buffer)?e:"",t="",n=g;do{if(a.read_buffer=W(a.read_buffer,t),U(N,"")&&P(P(N.$$is_regexp)?a.read_buffer["$match?"](N):a.read_buffer["$include?"](N))){i=a.read_buffer,d=a.read_buffer.$split(N,2),n=null==(m=F(d))[0]?g:m[0],a.read_buffer=null==m[1]?g:m[1],U(n,i)&&(n=W(n,i["$[]"](n.$length(),s)));break}}while(P(t=a.$sysread_noraise(A(N,"")?65536:1)));return P(n)||(n=(m=[P(e=a.read_buffer)?e:"",""])[0],a.read_buffer=m[1],A(n,"")&&(n=g)),P(n)&&(P(h)&&(n=n["$[]"](l.Range.$new(0,h,!0)),a.read_buffer=W(n["$[]"](l.Range.$new(h,-1,!1)),a.read_buffer)),P(M["$[]"]("chomp"))&&(n=n.$sub(/\r?\n$/,"")),A(r,"")&&(n=n.$sub(/^[\r\n]+/,""))),A(r,!1)&&(Y._=n),n},-1),Q(f,"$sysread",function(N){var M;return P(M=this.read_proc(N))?M:(this.eof=!0,R.$raise(q("EOFError"),"end of file reached"))}),Q(f,"$sysread_noraise",function(N){try{return this.$sysread(N)}catch(M){if(!l.rescue(M,[q("EOFError")]))throw M;try{return g}finally{l.pop_exception()}}}),Q(f,"$readpartial",function(N){var h,d,M=this,m=g,a=g;return M.read_buffer=P(m=M.read_buffer)?m:"",d=M.$sysread(N),a=(h=[W(M.read_buffer,P(m=d)?m:""),""])[0],M.read_buffer=h[1],A(a,"")&&(a=g),a}),Q(f,"$read",function(N){var h,M=this,m=g,d=g,a=g;null==N&&(N=g),M.read_buffer=P(m=M.read_buffer)?m:"",d="",a=g;do{if(M.read_buffer=W(M.read_buffer,d),P(N)&&P(k(M.read_buffer.$length(),N)))return a=(h=[M.read_buffer["$[]"](l.Range.$new(0,N,!0)),M.read_buffer["$[]"](l.Range.$new(N,-1,!1))])[0],M.read_buffer=h[1],a}while(P(d=M.$sysread_noraise(P(m=N)?m:65536)));return a=(h=[M.read_buffer,""])[0],M.read_buffer=h[1],a},-1),Q(f,"$readlines",function(N){return null==Y["/"]&&(Y["/"]=g),null==N&&(N=Y["/"]),this.$each_line(N).$to_a()},-1),Q(f,"$each",function v(N,h){var m,d,a,M=v.$$p||g,r=this,e=g;if(null==Y["/"]&&(Y["/"]=g),v.$$p=null,(m=B(arguments)).length>0&&(d=m.shift()),null==d&&(d=Y["/"]),a=m,M===g)return H(r,"enum_for",["each",d].concat(Z(a)));for(;P(e=H(r,"gets",[d].concat(Z(a))));)l.yield1(M,e);return r},-1),Q(f,"$each_byte",function v(){var N=v.$$p||g,h=this,M=g;if(v.$$p=null,N===g)return h.$enum_for("each_byte");for(;P(M=h.$getbyte());)l.yield1(N,M);return h}),Q(f,"$each_char",function v(){var N=v.$$p||g,h=this,M=g;if(v.$$p=null,N===g)return h.$enum_for("each_char");for(;P(M=h.$getc());)l.yield1(N,M);return h}),Q(f,"$close",T("closed","both")),Q(f,"$close_read",function(){return this.closed=A(this.closed,"write")?"both":"read"}),Q(f,"$close_write",function(){return this.closed=A(this.closed,"read")?"both":"write"}),Q(f,"$closed?",function(){return this.closed["$=="]("both")}),Q(f,"$closed_read?",function(){var h;return P(h=this.closed["$=="]("read"))?h:this.closed["$=="]("both")}),Q(f,"$closed_write?",function(){var h;return P(h=this.closed["$=="]("write"))?h:this.closed["$=="]("both")}),Q(f,"$check_writable",function(){return P(this["$closed_write?"]())?R.$raise(q("IOError"),"not opened for writing"):g}),Q(f,"$check_readable",function(){return P(this["$closed_read?"]())?R.$raise(q("IOError"),"not opened for reading"):g}),I(f,"each_line","each"),I(f,"eof?","eof"),re("::","STDIN",Y.stdin=q("IO").$new(0,"r")),re("::","STDOUT",Y.stdout=q("IO").$new(1,"w")),re("::","STDERR",Y.stderr=q("IO").$new(2,"w"));var S=l.global.console;return q("STDOUT")["$write_proc="]("object"==typeof process&&"object"==typeof process.stdout?function(_){process.stdout.write(_)}:function(_){S.log(_)}),q("STDERR")["$write_proc="]("object"==typeof process&&"object"==typeof process.stderr?function(_){process.stderr.write(_)}:function(_){S.warn(_)}),b=[function(_){var p=prompt();return null!==p?p+"\n":g}],H(q("STDIN"),"read_proc=",b),b[b.length-1]},Opal.modules["opal/regexp_anchors"]=function(l){var C,B,R,Y,re=l.const_set,$=[],Q=l.$$$;return C=$,R=[B=(0,l.module)($[0],"Opal")].concat(C),Y=l.$r(R),re(B,"REGEXP_START","^"),re(B,"REGEXP_END","$"),re(B,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),re(B,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),re(B,"INLINE_IDENTIFIER_REGEXP",Y("Regexp").$new("[^"+Q(B,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+Q(B,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),re(B,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),re(B,"CONST_NAME_REGEXP",Y("Regexp").$new(Q(B,"REGEXP_START")+"(::)?[A-Z][^"+Q(B,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+Q(B,"REGEXP_END")))},Opal.modules["opal/mini"]=function(l){var ee=l.Object;return ee.$require("opal/base"),ee.$require("corelib/nil"),ee.$require("corelib/boolean"),ee.$require("corelib/string"),ee.$require("corelib/comparable"),ee.$require("corelib/enumerable"),ee.$require("corelib/enumerator"),ee.$require("corelib/array"),ee.$require("corelib/hash"),ee.$require("corelib/number"),ee.$require("corelib/range"),ee.$require("corelib/proc"),ee.$require("corelib/method"),ee.$require("corelib/regexp"),ee.$require("corelib/variables"),ee.$require("corelib/io"),ee.$require("opal/regexp_anchors")},Opal.modules["corelib/kernel/format"]=function(l){var U,ee=l.coerce_to,$=l.slice,P=l.truthy,Q=l.eqeq,E=l.Opal,C=l.Kernel,B=l.gvars,Y=l.alias,H=l.nil,Z=l.$$$;return(0,l.def)(U=(0,l.module)("::","Kernel"),"$format",function(w,A){var F,k,T=H;null==B.DEBUG&&(B.DEBUG=H),F=$(arguments,1),Q((k=F).$length(),1)&&P(k["$[]"](0)["$respond_to?"]("to_ary"))&&(T=E["$coerce_to?"](k["$[]"](0),Z("Array"),"to_ary"),P(T["$nil?"]())||(k=T.$to_a()));var g,q,_,p,f,z,v,N,h,M,m,d,a,r,e,n,I="",b=0,S=w.length,s=1,t=0,O=16;function le(){32&n&&C.$raise(Z("ArgumentError"),"flag after width"),128&n&&C.$raise(Z("ArgumentError"),"flag after precision")}function oe(){32&n&&C.$raise(Z("ArgumentError"),"width given twice"),128&n&&C.$raise(Z("ArgumentError"),"width after precision")}function ue(u){return u>=k.length&&C.$raise(Z("ArgumentError"),"too few arguments"),k[u]}function ie(){switch(t){case-1:C.$raise(Z("ArgumentError"),"unnumbered("+s+") mixed with numbered");case-2:C.$raise(Z("ArgumentError"),"unnumbered("+s+") mixed with named")}return ue((t=s++)-1)}function X(u){return t>0&&C.$raise(Z("ArgumentError"),"numbered("+u+") after unnumbered("+t+")"),-2===t&&C.$raise(Z("ArgumentError"),"numbered("+u+") after named"),u<1&&C.$raise(Z("ArgumentError"),"invalid index - "+u+"$"),t=-1,ue(u-1)}function D(){return void 0===e?ie():e}function V(u){for(var y,K="";;q++){if(q===S&&C.$raise(Z("ArgumentError"),"malformed format string - %*[0-9]"),w.charCodeAt(q)<48||w.charCodeAt(q)>57)return q--,(y=parseInt(K,10)||0)>2147483647&&C.$raise(Z("ArgumentError"),u+" too big"),y;K+=w.charAt(q)}}function J(u){var y,K=V(u);return"$"===w.charAt(q+1)?(q++,y=X(K)):y=ie(),y.$to_int()}for(q=w.indexOf("%");-1!==q;q=w.indexOf("%",q)){switch(p=void 0,n=0,z=-1,v=-1,e=void 0,g=q,q++,w.charAt(q)){case"%":b=q;case"":case"\n":case"\0":q++;continue}e:for(;q<S;q++)switch(w.charAt(q)){case" ":le(),n|=O;continue e;case"#":le(),n|=1;continue e;case"+":le(),n|=4;continue e;case"-":le(),n|=2;continue e;case"0":le(),n|=8;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(N=V("width"),"$"===w.charAt(q+1)){if(q+2===S){p="%",q++;break e}void 0!==e&&C.$raise(Z("ArgumentError"),"value given twice - %"+N+"$"),e=X(N),q++}else oe(),n|=32,z=N;continue e;case"<":case"{":for(M="<"===w.charAt(q)?">":"}",h="",q++;;q++){if(q===S&&C.$raise(Z("ArgumentError"),"malformed name - unmatched parenthesis"),w.charAt(q)===M){if(t>0&&C.$raise(Z("ArgumentError"),"named "+h+" after unnumbered("+t+")"),-1===t&&C.$raise(Z("ArgumentError"),"named "+h+" after numbered"),t=-2,(void 0===k[0]||!k[0].$$is_hash)&&C.$raise(Z("ArgumentError"),"one hash required"),e=k[0].$fetch(h),">"===M)continue e;if(p=e.toString(),-1!==v&&(p=p.slice(0,v)),2&n)for(;p.length<z;)p+=" ";else for(;p.length<z;)p=" "+p;break e}h+=w.charAt(q)}case"*":q++,oe(),n|=32,(z=J("width"))<0&&(n|=2,z=-z);continue e;case".":if(128&n&&C.$raise(Z("ArgumentError"),"precision given twice"),n|=192,v=0,q++,"*"===w.charAt(q)){q++,(v=J("precision"))<0&&(n&=-65);continue e}v=V("precision");continue e;case"d":case"i":case"u":if((_=C.$Integer(D()))>=0){for(p=_.toString();p.length<v;)p="0"+p;if(2&n)for((4&n||n&O)&&(p=(4&n?"+":" ")+p);p.length<z;)p+=" ";else if(8&n&&-1===v){for(;p.length<z-(4&n||n&O?1:0);)p="0"+p;(4&n||n&O)&&(p=(4&n?"+":" ")+p)}else for((4&n||n&O)&&(p=(4&n?"+":" ")+p);p.length<z;)p=" "+p}else{for(p=(-_).toString();p.length<v;)p="0"+p;if(2&n)for(p="-"+p;p.length<z;)p+=" ";else if(8&n&&-1===v){for(;p.length<z-1;)p="0"+p;p="-"+p}else for(p="-"+p;p.length<z;)p=" "+p}break e;case"b":case"B":case"o":case"x":case"X":switch(w.charAt(q)){case"b":case"B":m=2,d="0b",a=/^1+/,r="1";break;case"o":m=8,d="0",a=/^3?7+/,r="7";break;case"x":case"X":m=16,d="0x",a=/^f+/,r="f"}if((_=C.$Integer(D()))>=0){for(p=_.toString(m);p.length<v;)p="0"+p;if(2&n)for((4&n||n&O)&&(p=(4&n?"+":" ")+p),1&n&&0!==_&&(p=d+p);p.length<z;)p+=" ";else if(8&n&&-1===v){for(;p.length<z-(4&n||n&O?1:0)-(1&n&&0!==_?d.length:0);)p="0"+p;1&n&&0!==_&&(p=d+p),(4&n||n&O)&&(p=(4&n?"+":" ")+p)}else for(1&n&&0!==_&&(p=d+p),(4&n||n&O)&&(p=(4&n?"+":" ")+p);p.length<z;)p=" "+p}else if(4&n||n&O){for(p=(-_).toString(m);p.length<v;)p="0"+p;if(2&n)for(1&n&&(p=d+p),p="-"+p;p.length<z;)p+=" ";else if(8&n&&-1===v){for(;p.length<z-1-(1&n?2:0);)p="0"+p;1&n&&(p=d+p),p="-"+p}else for(1&n&&(p=d+p),p="-"+p;p.length<z;)p=" "+p}else{for(p=(_>>>0).toString(m).replace(a,r);p.length<v-2;)p=r+p;if(2&n)for(p=".."+p,1&n&&(p=d+p);p.length<z;)p+=" ";else if(8&n&&-1===v){for(;p.length<z-2-(1&n?d.length:0);)p=r+p;p=".."+p,1&n&&(p=d+p)}else for(p=".."+p,1&n&&(p=d+p);p.length<z;)p=" "+p}w.charAt(q)===w.charAt(q).toUpperCase()&&(p=p.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if((_=C.$Float(D()))>=0||isNaN(_)){if(_===1/0)p="Inf";else switch(w.charAt(q)){case"f":p=_.toFixed(-1===v?6:v);break;case"e":case"E":p=_.toExponential(-1===v?6:v);break;case"g":case"G":p=_.toExponential(),(f=parseInt(p.split("e")[1],10))<-4||f>=(-1===v?6:v)||(p=_.toPrecision(-1===v?1&n?6:void 0:v))}if(2&n)for((4&n||n&O)&&(p=(4&n?"+":" ")+p);p.length<z;)p+=" ";else if(8&n&&_!==1/0&&!isNaN(_)){for(;p.length<z-(4&n||n&O?1:0);)p="0"+p;(4&n||n&O)&&(p=(4&n?"+":" ")+p)}else for((4&n||n&O)&&(p=(4&n?"+":" ")+p);p.length<z;)p=" "+p}else{if(_===-1/0)p="Inf";else switch(w.charAt(q)){case"f":p=(-_).toFixed(-1===v?6:v);break;case"e":case"E":p=(-_).toExponential(-1===v?6:v);break;case"g":case"G":p=(-_).toExponential(),(f=parseInt(p.split("e")[1],10))<-4||f>=(-1===v?6:v)||(p=(-_).toPrecision(-1===v?1&n?6:void 0:v))}if(2&n)for(p="-"+p;p.length<z;)p+=" ";else if(8&n&&_!==-1/0){for(;p.length<z-1;)p="0"+p;p="-"+p}else for(p="-"+p;p.length<z;)p=" "+p}w.charAt(q)===w.charAt(q).toUpperCase()&&_!==1/0&&_!==-1/0&&!isNaN(_)&&(p=p.toUpperCase()),p=p.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":C.$raise(Z("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if((_=D())["$respond_to?"]("to_ary")&&(_=_.$to_ary()[0]),1!==(p=_["$respond_to?"]("to_str")?_.$to_str():String.fromCharCode(ee(_,Z("Integer"),"to_int"))).length&&C.$raise(Z("ArgumentError"),"%c requires a character"),2&n)for(;p.length<z;)p+=" ";else for(;p.length<z;)p=" "+p;break e;case"p":if(p=D().$inspect(),-1!==v&&(p=p.slice(0,v)),2&n)for(;p.length<z;)p+=" ";else for(;p.length<z;)p=" "+p;break e;case"s":if(p=D().$to_s(),-1!==v&&(p=p.slice(0,v)),2&n)for(;p.length<z;)p+=" ";else for(;p.length<z;)p=" "+p;break e;default:C.$raise(Z("ArgumentError"),"malformed format string - %"+w.charAt(q))}void 0===p&&C.$raise(Z("ArgumentError"),"malformed format string - %"),I+=w.slice(b,g)+p,b=q+1}return B.DEBUG&&t>=0&&s<k.length&&C.$raise(Z("ArgumentError"),"too many arguments for format string"),I+w.slice(b)},-2),Y(U,"sprintf","format")},Opal.modules["corelib/string/encoding"]=function(l){var L,g,q,ee=l.klass,re=l.hash2,$=l.rb_plus,P=l.truthy,Q=l.send,E=l.defs,C=l.eqeq,B=l.def,R=l.return_ivar,Y=l.return_val,H=l.slice,Z=l.Kernel,W=l.Opal,U=l.rb_lt,w=l.top,F=l.$r([]),k=l.nil,T=l.$$$;return w.$require("corelib/string"),(q=(g=ee("::",null,"Encoding")).$$prototype).name=q.dummy=k,E(g,"$register",function S(_,p){var v,h,M,f=S.$$p||k,N=k,m=k,d=k;return S.$$p=null,null==p&&(p=re([],{})),v=$([_],P(N=p["$[]"]("aliases"))?N:[]),h=P(N=p["$[]"]("ascii"))&&N,M=P(N=p["$[]"]("dummy"))&&N,P(p["$[]"]("inherits"))?(m=p["$[]"]("inherits").$clone()).$initialize(_,v,h,M):m=this.$new(_,v,h,M),f!==k&&Q(m,"instance_eval",[],f.$to_proc()),d=l.encodings,Q(v,"each",[],function a(r){return null==r&&(r=k),(null==a.$$s?this:a.$$s).$const_set(r.$tr("-","_"),m),d[r]=m},{$$s:this})},-2),E(g,"$find",function(_){return C(_,"default_external")?this.$default_external():l.find_encoding(_)}),g.$singleton_class().$attr_accessor("default_external"),g.$attr_reader("name","names"),B(g,"$initialize",function(_,p,f,z){var v=this;return v.name=_,v.names=p,v.ascii=f,v.dummy=z}),B(g,"$ascii_compatible?",R("ascii")),B(g,"$dummy?",R("dummy")),B(g,"$binary?",Y(!1)),B(g,"$to_s",R("name")),B(g,"$inspect",function(){return"#<Encoding:"+this.name+(P(this.dummy)?" (dummy)":k)+">"}),B(g,"$charsize",function(_){for(var p=0,f=0,z=_.length;f<z;f++){var v=_.charCodeAt(f);v>=55296&&v<=56319||p++}return p}),B(g,"$each_char",function S(_){var p=S.$$p||k;S.$$p=null;for(var f="",z=0,v=_.length;z<v;z++){var N=_.charCodeAt(z),h=_.charAt(z);N>=56320&&N<=57343?f=h:(N>=55296&&N<=56319&&(h=f+h),"UTF-8"!=_.encoding.name&&((h=new String(h)).encoding=_.encoding),l.yield1(p,h))}}),B(g,"$each_byte",function(_){return H(arguments),Z.$raise(T("NotImplementedError"))},-1),B(g,"$bytesize",function(_){return H(arguments),Z.$raise(T("NotImplementedError"))},-1),ee("::",T("StandardError"),"EncodingError"),ee("::",T("EncodingError"),"CompatibilityError"),Q(T("Encoding"),"register",["UTF-8",re(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})],function I(){var b=null==I.$$s?this:I.$$s;return B(b,"$each_byte",function g(q){var S=g.$$p||k;g.$$p=null;for(var p,_=1/0,f=q.length,z=null,v=0;v<f;++v){if((p=q.charCodeAt(v))>55295&&p<57344){if(!z){if(p>56319){(_-=3)>-1&&(l.yield1(S,239),l.yield1(S,191),l.yield1(S,189));continue}if(v+1===f){(_-=3)>-1&&(l.yield1(S,239),l.yield1(S,191),l.yield1(S,189));continue}z=p;continue}if(p<56320){(_-=3)>-1&&(l.yield1(S,239),l.yield1(S,191),l.yield1(S,189)),z=p;continue}p=65536+(z-55296<<10|p-56320)}else z&&(_-=3)>-1&&(l.yield1(S,239),l.yield1(S,191),l.yield1(S,189));if(z=null,p<128){if((_-=1)<0)break;l.yield1(S,p)}else if(p<2048){if((_-=2)<0)break;l.yield1(S,p>>6|192),l.yield1(S,63&p|128)}else if(p<65536){if((_-=3)<0)break;l.yield1(S,p>>12|224),l.yield1(S,p>>6&63|128),l.yield1(S,63&p|128)}else if(p<1114112){if((_-=4)<0)break;l.yield1(S,p>>18|240),l.yield1(S,p>>12&63|128),l.yield1(S,p>>6&63|128),l.yield1(S,63&p|128)}}}),B(b,"$bytesize",function(q){return q.$bytes().$length()})},{$$s:w}),Q(T("Encoding"),"register",["UTF-16LE"],function I(){var b=null==I.$$s?this:I.$$s;return B(b,"$each_byte",function g(q){var S=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(S,255&f),l.yield1(S,f>>8)}}),B(b,"$bytesize",function(q){return 2*q.length})},{$$s:w}),Q(T("Encoding"),"register",["UTF-16BE",re(["inherits"],{inherits:T(T("Encoding"),"UTF_16LE")})],function I(){return B(null==I.$$s?this:I.$$s,"$each_byte",function g(q){var S=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(S,f>>8),l.yield1(S,255&f)}})},{$$s:w}),Q(T("Encoding"),"register",["UTF-32LE"],function I(){var b=null==I.$$s?this:I.$$s;return B(b,"$each_byte",function g(q){var S=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(S,255&f),l.yield1(S,f>>8),l.yield1(S,0),l.yield1(S,0)}}),B(b,"$bytesize",function(q){return 4*q.length})},{$$s:w}),Q(T("Encoding"),"register",["UTF-32BE",re(["inherits"],{inherits:T(T("Encoding"),"UTF_32LE")})],function I(){return B(null==I.$$s?this:I.$$s,"$each_byte",function g(q){var S=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(S,0),l.yield1(S,0),l.yield1(S,f>>8),l.yield1(S,255&f)}})},{$$s:w}),Q(T("Encoding"),"register",["ASCII-8BIT",re(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})],function I(){var b=null==I.$$s?this:I.$$s;return B(b,"$each_char",function g(q){var S=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=new String(q.charAt(_));f.encoding=q.encoding,l.yield1(S,f)}}),B(b,"$charsize",function(q){return q.length}),B(b,"$each_byte",function g(q){var S=g.$$p||k;g.$$p=null;for(var _=0,p=q.length;_<p;_++){var f=q.charCodeAt(_);l.yield1(S,255&f)}}),B(b,"$bytesize",function(q){return q.length}),B(b,"$binary?",Y(!0))},{$$s:w}),T("Encoding").$register("ISO-8859-1",re(["aliases","ascii","inherits"],{aliases:["ISO8859-1"],ascii:!0,inherits:T(T("Encoding"),"ASCII_8BIT")})),T("Encoding").$register("US-ASCII",re(["aliases","ascii","inherits"],{aliases:["ASCII"],ascii:!0,inherits:T(T("Encoding"),"ASCII_8BIT")})),function(I,b){var g=ee("::",null,"String"),q=g.$$prototype;q.internal_encoding=q.bytes=q.encoding=k,g.$attr_reader("encoding"),g.$attr_reader("internal_encoding"),l.prop(String.prototype,"bytes",k),l.prop(String.prototype,"encoding",T(T("Encoding"),"UTF_8")),l.prop(String.prototype,"internal_encoding",T(T("Encoding"),"UTF_8")),B(g,"$b",function(){return this.$dup().$force_encoding("binary")}),B(g,"$bytesize",function(){return this.internal_encoding.$bytesize(this)}),B(g,"$each_byte",function S(){var _=S.$$p||k,p=this;return S.$$p=null,_===k?Q(p,"enum_for",["each_byte"],function f(){return(null==f.$$s?this:f.$$s).$bytesize()},{$$s:p}):(Q(p.internal_encoding,"each_byte",[p],_.$to_proc()),p)}),B(g,"$bytes",function(){var _=this,p=k;return"string"==typeof _?new String(_).$each_byte().$to_a():(_.bytes=P(p=_.bytes)?p:_.$each_byte().$to_a(),_.bytes.$dup())}),B(g,"$each_char",function S(){var _=S.$$p||k,p=this;return S.$$p=null,_===k?Q(p,"enum_for",["each_char"],function f(){return(null==f.$$s?this:f.$$s).$length()},{$$s:p}):(Q(p.encoding,"each_char",[p],_.$to_proc()),p)}),B(g,"$chars",function S(){var _=S.$$p||k;return S.$$p=null,P(_)?Q(this,"each_char",[],_.$to_proc()):this.$each_char().$to_a()}),B(g,"$each_codepoint",function S(){var _=S.$$p||k,p=this;if(S.$$p=null,_===k)return p.$enum_for("each_codepoint");for(var f=0,z=p.length;f<z;f++)l.yield1(_,p.codePointAt(f));return p}),B(g,"$codepoints",function S(){var _=S.$$p||k;return S.$$p=null,_!==k?Q(this,"each_codepoint",[],_.$to_proc()):this.$each_codepoint().$to_a()}),B(g,"$encode",function(_){return l.enc(this,_)}),B(g,"$force_encoding",function(_){var f=this;return _===f.encoding||(_=W["$coerce_to!"](_,T("String"),"to_s"),(_=T("Encoding").$find(_))===f.encoding)||(f=l.set_encoding(f,_)),f}),B(g,"$getbyte",function(_){var f=k;return f=this.$bytes(),_=W["$coerce_to!"](_,T("Integer"),"to_int"),P(U(f.$length(),_))?k:f["$[]"](_)}),B(g,"$initialize_copy",function(_){return"\n      self.encoding = other.encoding;\n      self.internal_encoding = other.internal_encoding;\n    "}),B(g,"$valid_encoding?",Y(!0))}(),L=[T(F("Encoding"),"UTF_8")],Q(T("Encoding"),"default_external=",L),L[L.length-1]},Opal.modules["corelib/math"]=function(l){var F,k,T,I,ee=l.type_error,$=l.const_set,P=l.Class,Q=l.slice,E=l.Kernel,C=l.defs,B=l.truthy,R=l.send,Y=l.def,H=l.rb_minus,Z=l.eqeqeq,W=l.rb_divide,L=l.nil,w=l.$$$;return F=[],T=[k=(0,l.module)("::","Math")].concat(F),I=l.$r(T),$(k,"E",Math.E),$(k,"PI",Math.PI),$(k,"DomainError",P.$new(w("StandardError"))),C(k,"$checked",function(g,q){var _;if(_=Q(arguments,1),isNaN(_[0])||2==_.length&&isNaN(_[1]))return NaN;var p=Math[g].apply(null,_);return isNaN(p)&&E.$raise(I("DomainError"),'Numerical argument is out of domain - "'+g+'"'),p},-2),C(k,"$float!",function(g){try{return E.$Float(g)}catch(q){if(!l.rescue(q,[w("ArgumentError")]))throw q;try{return E.$raise(ee(g,w("Float")))}finally{l.pop_exception()}}}),C(k,"$integer!",function(g){try{return E.$Integer(g)}catch(q){if(!l.rescue(q,[w("ArgumentError")]))throw q;try{return E.$raise(ee(g,w("Integer")))}finally{l.pop_exception()}}}),k.$module_function(),B(typeof Math.erf<"u")||l.prop(Math,"erf",function(b){var z=1;b<0&&(z=-1);var v=1/(1+.3275911*(b=Math.abs(b)));return z*(1-((((1.061405429*v-1.453152027)*v+1.421413741)*v-.284496736)*v+.254829592)*v*Math.exp(-b*b))}),B(typeof Math.erfc<"u")||l.prop(Math,"erfc",function(b){var g=Math.abs(b),q=1/(.5*g+1),d=q*Math.exp(-g*g-1.26551223+q*(q*(q*(q*(q*(q*(q*(q*(.17087277*q-.82215223)+1.48851587)-1.13520398)+.27886807)-.18628806)+.09678418)+.37409196)+1.00002368));return b<0?2-d:d}),R(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function b(g){return null==g&&(g=L),R(null==b.$$s?this:b.$$s,"define_method",[g],function(_){return null==_&&(_=L),w("Math").$checked(g,w("Math")["$float!"](_))})},{$$s:k}),Y(k,"$atan2",function(g,q){return w("Math").$checked("atan2",w("Math")["$float!"](g),w("Math")["$float!"](q))}),Y(k,"$hypot",function(g,q){return w("Math").$checked("hypot",w("Math")["$float!"](g),w("Math")["$float!"](q))}),Y(k,"$frexp",function(g){if(g=I("Math")["$float!"](g),isNaN(g))return[NaN,0];var q=Math.floor(Math.log(Math.abs(g))/Math.log(2))+1;return[g/Math.pow(2,q),q]}),Y(k,"$gamma",function(g){g=I("Math")["$float!"](g);var q,S,_,p,f,z,v,N,h,m=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(g))return NaN;if(0===g&&1/g<0)return-1/0;if((-1===g||g===-1/0)&&E.$raise(I("DomainError"),'Numerical argument is out of domain - "gamma"'),I("Integer")["$==="](g)){if(g<=0)return isFinite(g)?1/0:NaN;if(g>171)return 1/0;for(p=g-2,f=g-1;p>1;)f*=p,p--;return 0==f&&(f=1),f}if(g<.5)return Math.PI/(Math.sin(Math.PI*g)*w("Math").$gamma(H(1,g)));if(g>=171.35)return 1/0;if(g>85)return h=(N=(v=(z=g*g)*g)*g)*g,Math.sqrt(2*Math.PI/g)*Math.pow(g/Math.E,g)*(1+1/(12*g)+1/(288*z)-139/(51840*v)-571/(2488320*N)+163879/(209018880*h)+5246819/(75246796800*h*g));for(g-=1,_=m[0],q=1;q<m.length;++q)_+=m[q]/(g+q);return S=g+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(S,g+.5)*Math.exp(-S)*_}),Y(k,"$ldexp",function(g,q){return g=I("Math")["$float!"](g),q=I("Math")["$integer!"](q),isNaN(q)&&E.$raise(w("RangeError"),"float NaN out of range of integer"),g*Math.pow(2,q)}),Y(k,"$lgamma",function(g){return-1==g?[1/0,1]:[Math.log(Math.abs(w("Math").$gamma(g))),w("Math").$gamma(g)<0?-1:1]}),Y(k,"$log",function(g,q){return Z(w("String"),g)&&E.$raise(ee(g,w("Float"))),B(null==q)?w("Math").$checked("log",w("Math")["$float!"](g)):(Z(w("String"),q)&&E.$raise(ee(q,w("Float"))),W(w("Math").$checked("log",w("Math")["$float!"](g)),w("Math").$checked("log",w("Math")["$float!"](q))))},-2),Y(k,"$log10",function(g){return Z(w("String"),g)&&E.$raise(ee(g,w("Float"))),w("Math").$checked("log10",w("Math")["$float!"](g))}),Y(k,"$log2",function(g){return Z(w("String"),g)&&E.$raise(ee(g,w("Float"))),w("Math").$checked("log2",w("Math")["$float!"](g))}),Y(k,"$tan",function(g){return g=w("Math")["$float!"](g),B(g["$infinite?"]())?w(w("Float"),"NAN"):w("Math").$checked("tan",w("Math")["$float!"](g))})},Opal.modules["corelib/complex/base"]=function(l){var B,R,Y,H,re=l.truthy,$=l.def,P=l.klass,Q=[],E=l.nil;return B=Q,Y=[R=(0,l.module)("::","Kernel")].concat(B),H=l.$r(Y),$(R,"$Complex",function(W,U){return null==U&&(U=E),re(U)?H("Complex").$new(W,U):H("Complex").$new(W,0)},-2),function(C,B,R){var Y=P("::",null,"String"),H=[Y].concat(R),Z=l.$r(H);return $(Y,"$to_c",function(){return Z("Complex").$from_string(this)})}(0,0,Q)},Opal.modules["corelib/complex"]=function(l){var q,S,_,p,f,ee=l.klass,re=l.truthy,$=l.eqeqeq,P=l.Kernel,Q=l.defs,E=l.rb_times,C=l.def,B=l.rb_plus,R=l.rb_minus,Y=l.rb_divide,H=l.eqeq,Z=l.to_ary,W=l.rb_gt,U=l.neqeq,L=l.return_val,w=l.const_set,A=l.alias,F=l.top,T=l.nil,I=l.$$$;return F.$require("corelib/numeric"),F.$require("corelib/complex/base"),q=[],_=[S=ee("::",I("Numeric"),"Complex")].concat(q),p=l.$r(_),(f=S.$$prototype).real=f.imag=T,Q(S,"$rect",function(v,N){return null==N&&(N=0),$(I("Numeric"),v)&&re(v["$real?"]())&&$(I("Numeric"),N)&&re(N["$real?"]())||P.$raise(I("TypeError"),"not a real"),this.$new(v,N)},-2),Q(S,"$polar",function(v,N){return null==N&&(N=0),$(I("Numeric"),v)&&re(v["$real?"]())&&$(I("Numeric"),N)&&re(N["$real?"]())||P.$raise(I("TypeError"),"not a real"),this.$new(E(v,I("Math").$cos(N)),E(v,I("Math").$sin(N)))},-2),S.$attr_reader("real","imag"),C(S,"$initialize",function(v,N){var h=this;return null==N&&(N=0),h.real=v,h.imag=N,h.$freeze()},-2),C(S,"$coerce",function(v){return $(I("Complex"),v)?[v,this]:$(I("Numeric"),v)&&re(v["$real?"]())?[I("Complex").$new(v,0),this]:P.$raise(I("TypeError"),v.$class()+" can't be coerced into Complex")}),C(S,"$==",function(v){var N=this,h=T;return $(I("Complex"),v)?re(h=N.real["$=="](v.$real()))?N.imag["$=="](v.$imag()):h:$(I("Numeric"),v)&&re(v["$real?"]())?re(h=N.real["$=="](v))?N.imag["$=="](0):h:v["$=="](N)}),C(S,"$-@",function(){return P.$Complex(this.real["$-@"](),this.imag["$-@"]())}),C(S,"$+",function(v){var N=this;return $(I("Complex"),v)?P.$Complex(B(N.real,v.$real()),B(N.imag,v.$imag())):$(I("Numeric"),v)&&re(v["$real?"]())?P.$Complex(B(N.real,v),N.imag):N.$__coerced__("+",v)}),C(S,"$-",function(v){var N=this;return $(I("Complex"),v)?P.$Complex(R(N.real,v.$real()),R(N.imag,v.$imag())):$(I("Numeric"),v)&&re(v["$real?"]())?P.$Complex(R(N.real,v),N.imag):N.$__coerced__("-",v)}),C(S,"$*",function(v){var N=this;return $(I("Complex"),v)?P.$Complex(R(E(N.real,v.$real()),E(N.imag,v.$imag())),B(E(N.real,v.$imag()),E(N.imag,v.$real()))):$(I("Numeric"),v)&&re(v["$real?"]())?P.$Complex(E(N.real,v),E(N.imag,v)):N.$__coerced__("*",v)}),C(S,"$/",function(v){var N=this;return $(I("Complex"),v)?$(I("Number"),N.real)&&re(N.real["$nan?"]())||$(I("Number"),N.imag)&&re(N.imag["$nan?"]())||$(I("Number"),v.$real())&&re(v.$real()["$nan?"]())||$(I("Number"),v.$imag())&&re(v.$imag()["$nan?"]())?I("Complex").$new(I(I("Float"),"NAN"),I(I("Float"),"NAN")):Y(E(N,v.$conj()),v.$abs2()):$(I("Numeric"),v)&&re(v["$real?"]())?P.$Complex(N.real.$quo(v),N.imag.$quo(v)):N.$__coerced__("/",v)}),C(S,"$**",function(v){var N,h,M=this,m=T,d=T,a=T,r=T,e=T,s=T,t=T,n=T,i=T,c=T,o=T;if(H(v,0))return I("Complex").$new(1,0);if($(I("Complex"),v))return h=M.$polar(),m=null==(N=Z(h))[0]?T:N[0],d=null==N[1]?T:N[1],a=v.$real(),r=v.$imag(),e=I("Math").$exp(R(E(a,I("Math").$log(m)),E(r,d))),s=B(E(d,a),E(r,I("Math").$log(m))),I("Complex").$polar(e,s);if($(I("Integer"),v)){if(re(W(v,0))){for(n=t=M,i=R(v,1);U(i,0);){for(h=i.$divmod(2),c=null==(N=Z(h))[0]?T:N[0],o=null==N[1]?T:N[1];H(o,0);)t=P.$Complex(R(E(t.$real(),t.$real()),E(t.$imag(),t.$imag())),E(E(2,t.$real()),t.$imag())),h=(i=c).$divmod(2),c=null==(N=Z(h))[0]?T:N[0],o=null==N[1]?T:N[1];n=E(n,t),i=R(i,1)}return n}return Y(I("Rational").$new(1,1),M)["$**"](v["$-@"]())}return $(I("Float"),v)||$(I("Rational"),v)?(h=M.$polar(),m=null==(N=Z(h))[0]?T:N[0],d=null==N[1]?T:N[1],I("Complex").$polar(m["$**"](v),E(d,v))):M.$__coerced__("**",v)}),C(S,"$abs",function(){return I("Math").$hypot(this.real,this.imag)}),C(S,"$abs2",function(){var v=this;return B(E(v.real,v.real),E(v.imag,v.imag))}),C(S,"$angle",function(){return I("Math").$atan2(this.imag,this.real)}),C(S,"$conj",function(){return P.$Complex(this.real,this.imag["$-@"]())}),C(S,"$denominator",function(){return this.real.$denominator().$lcm(this.imag.$denominator())}),C(S,"$eql?",function(v){var h,M,N=this;return re(h=re(M=p("Complex")["$==="](v))?N.real.$class()["$=="](N.imag.$class()):M)?N["$=="](v):h}),C(S,"$fdiv",function(v){return $(I("Numeric"),v)||P.$raise(I("TypeError"),v.$class()+" can't be coerced into Complex"),Y(this,v)}),C(S,"$finite?",function(){var N;return re(N=this.real["$finite?"]())?this.imag["$finite?"]():N}),C(S,"$hash",function(){return"Complex:"+this.real+":"+this.imag}),C(S,"$infinite?",function(){var N;return re(N=this.real["$infinite?"]())?N:this.imag["$infinite?"]()}),C(S,"$inspect",function(){return"("+this+")"}),C(S,"$numerator",function(){var N,v=this;return N=v.$denominator(),P.$Complex(E(v.real.$numerator(),Y(N,v.real.$denominator())),E(v.imag.$numerator(),Y(N,v.imag.$denominator())))}),C(S,"$polar",function(){return[this.$abs(),this.$arg()]}),C(S,"$rationalize",function(v){var N=this;return arguments.length>1&&P.$raise(I("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),U(N.imag,0)&&P.$raise(I("RangeError"),"can't convert "+N+" into Rational"),N.$real().$rationalize(v)},-1),C(S,"$real?",L(!1)),C(S,"$rect",function(){return[this.real,this.imag]}),C(S,"$to_f",function(){var v=this;return H(v.imag,0)||P.$raise(I("RangeError"),"can't convert "+v+" into Float"),v.real.$to_f()}),C(S,"$to_i",function(){var v=this;return H(v.imag,0)||P.$raise(I("RangeError"),"can't convert "+v+" into Integer"),v.real.$to_i()}),C(S,"$to_r",function(){var v=this;return H(v.imag,0)||P.$raise(I("RangeError"),"can't convert "+v+" into Rational"),v.real.$to_r()}),C(S,"$to_s",function(){var v=this,N=T;return N=v.real.$inspect(),N=B(N,$(I("Number"),v.imag)&&re(v.imag["$nan?"]())||re(v.imag["$positive?"]())||re(v.imag["$zero?"]())?"+":"-"),N=B(N,v.imag.$abs().$inspect()),$(I("Number"),v.imag)&&(re(v.imag["$nan?"]())||re(v.imag["$infinite?"]()))&&(N=B(N,"*")),B(N,"i")}),w(_[0],"I",S.$new(0,1)),Q(S,"$from_string",function(v){var M,m,N=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;function a(){return N.test(v)}function r(){var t=v.match(N)[0];return v=v.slice(t.length),t.replace(/_/g,"")}function e(){if(a()){var s=parseFloat(r());if("/"===v[0]){if(v=v.slice(1),a()){var t=parseFloat(r());return P.$Rational(s,t)}return v="/"+v,s}return s}return null}return v.match(N),(M=e())?(m=e())?P.$Complex(M,m):"i"===v[0]?P.$Complex(0,M):P.$Complex(M,0):P.$Complex(0,"i"===v[0]?1:"-"===v[0]&&"i"===v[1]?-1:"+"===v[0]&&"i"===v[1]?1:0)}),A(l.get_singleton_class(S),"rectangular","rect"),A(S,"arg","angle"),A(S,"conjugate","conj"),A(S,"divide","/"),A(S,"imaginary","imag"),A(S,"magnitude","abs"),A(S,"phase","arg"),A(S,"quo","/"),A(S,"rectangular","rect"),l.udef(S,"$negative?"),l.udef(S,"$positive?"),l.udef(S,"$step"),T},Opal.modules["corelib/rational/base"]=function(l){var re=l.def,$=l.klass,Q=l.$$$;return re((0,l.module)("::","Kernel"),"$Rational",function(R,Y){return null==Y&&(Y=1),Q("Rational").$convert(R,Y)},-2),re($("::",null,"String"),"$to_r",function(){return Q("Rational").$from_string(this)})},Opal.modules["corelib/rational"]=function(l){var S,_,ee=l.klass,re=l.eqeq,$=l.Kernel,P=l.truthy,Q=l.rb_lt,E=l.rb_divide,C=l.defs,B=l.eqeqeq,R=l.not,Y=l.Opal,H=l.def,Z=l.return_ivar,W=l.rb_minus,U=l.rb_times,L=l.rb_plus,w=l.rb_gt,A=l.rb_le,F=l.return_self,k=l.alias,T=l.top,I=l.nil,b=l.$$$;return T.$require("corelib/numeric"),T.$require("corelib/rational/base"),(_=(S=ee("::",b("Numeric"),"Rational")).$$prototype).num=_.den=I,C(S,"$reduce",function(f,z){var N;if(f=f.$to_i(),z=z.$to_i(),re(z,0))$.$raise(b("ZeroDivisionError"),"divided by 0");else if(P(Q(z,0)))f=f["$-@"](),z=z["$-@"]();else if(re(z,1))return this.$new(f,z);return N=f.$gcd(z),this.$new(E(f,N),E(z,N))}),C(S,"$convert",function(f,z){return(P(f["$nil?"]())||P(z["$nil?"]()))&&$.$raise(b("TypeError"),"cannot convert nil into Rational"),B(b("Integer"),f)&&B(b("Integer"),z)?this.$reduce(f,z):((B(b("Float"),f)||B(b("String"),f)||B(b("Complex"),f))&&(f=f.$to_r()),(B(b("Float"),z)||B(b("String"),z)||B(b("Complex"),z))&&(z=z.$to_r()),P(z["$equal?"](1))&&R(b("Integer")["$==="](f))?Y["$coerce_to!"](f,b("Rational"),"to_r"):B(b("Numeric"),f)&&B(b("Numeric"),z)?E(f,z):this.$reduce(f,z))}),H(S,"$initialize",function(f,z){var v=this;return v.num=f,v.den=z,v.$freeze()}),H(S,"$numerator",Z("num")),H(S,"$denominator",Z("den")),H(S,"$coerce",function(f){var v,z=this;return B(b("Rational"),v=f)?[f,z]:B(b("Integer"),v)?[f.$to_r(),z]:B(b("Float"),v)?[f,z.$to_f()]:I}),H(S,"$==",function(f){var v,z=this,N=I;return B(b("Rational"),v=f)?P(N=z.num["$=="](f.$numerator()))?z.den["$=="](f.$denominator()):N:B(b("Integer"),v)?P(N=z.num["$=="](f))?z.den["$=="](1):N:B(b("Float"),v)?z.$to_f()["$=="](f):f["$=="](z)}),H(S,"$<=>",function(f){var v,z=this;return B(b("Rational"),v=f)?W(U(z.num,f.$denominator()),U(z.den,f.$numerator()))["$<=>"](0):B(b("Integer"),v)?W(z.num,U(z.den,f))["$<=>"](0):B(b("Float"),v)?z.$to_f()["$<=>"](f):z.$__coerced__("<=>",f)}),H(S,"$+",function(f){var v,z=this,N=I,h=I;return B(b("Rational"),v=f)?(N=L(U(z.num,f.$denominator()),U(z.den,f.$numerator())),h=U(z.den,f.$denominator()),$.$Rational(N,h)):B(b("Integer"),v)?$.$Rational(L(z.num,U(f,z.den)),z.den):B(b("Float"),v)?L(z.$to_f(),f):z.$__coerced__("+",f)}),H(S,"$-",function(f){var v,z=this,N=I,h=I;return B(b("Rational"),v=f)?(N=W(U(z.num,f.$denominator()),U(z.den,f.$numerator())),h=U(z.den,f.$denominator()),$.$Rational(N,h)):B(b("Integer"),v)?$.$Rational(W(z.num,U(f,z.den)),z.den):B(b("Float"),v)?W(z.$to_f(),f):z.$__coerced__("-",f)}),H(S,"$*",function(f){var v,z=this,N=I,h=I;return B(b("Rational"),v=f)?(N=U(z.num,f.$numerator()),h=U(z.den,f.$denominator()),$.$Rational(N,h)):B(b("Integer"),v)?$.$Rational(U(z.num,f),z.den):B(b("Float"),v)?U(z.$to_f(),f):z.$__coerced__("*",f)}),H(S,"$/",function(f){var v,z=this,N=I,h=I;return B(b("Rational"),v=f)?(N=U(z.num,f.$denominator()),h=U(z.den,f.$numerator()),$.$Rational(N,h)):B(b("Integer"),v)?re(f,0)?E(z.$to_f(),0):$.$Rational(z.num,U(z.den,f)):B(b("Float"),v)?E(z.$to_f(),f):z.$__coerced__("/",f)}),H(S,"$**",function(f){var v,z=this;return B(b("Integer"),v=f)?re(z,0)&&P(Q(f,0))?b(b("Float"),"INFINITY"):P(w(f,0))?$.$Rational(z.num["$**"](f),z.den["$**"](f)):P(Q(f,0))?$.$Rational(z.den["$**"](f["$-@"]()),z.num["$**"](f["$-@"]())):$.$Rational(1,1):B(b("Float"),v)?z.$to_f()["$**"](f):B(b("Rational"),v)?re(f,0)?$.$Rational(1,1):re(f.$denominator(),1)?P(Q(f,0))?$.$Rational(z.den["$**"](f.$numerator().$abs()),z.num["$**"](f.$numerator().$abs())):$.$Rational(z.num["$**"](f.$numerator()),z.den["$**"](f.$numerator())):re(z,0)&&P(Q(f,0))?$.$raise(b("ZeroDivisionError"),"divided by 0"):z.$to_f()["$**"](f):z.$__coerced__("**",f)}),H(S,"$abs",function(){return $.$Rational(this.num.$abs(),this.den.$abs())}),H(S,"$ceil",function(f){var z=this;return null==f&&(f=0),re(f,0)?E(z.num["$-@"](),z.den)["$-@"]().$ceil():z.$with_precision("ceil",f)},-1),H(S,"$floor",function(f){var z=this;return null==f&&(f=0),re(f,0)?E(z.num["$-@"](),z.den)["$-@"]().$floor():z.$with_precision("floor",f)},-1),H(S,"$hash",function(){return"Rational:"+this.num+":"+this.den}),H(S,"$inspect",function(){return"("+this+")"}),H(S,"$rationalize",function(f){var z=this;if(arguments.length>1&&$.$raise(b("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),null==f)return z;for(var r,e,s,t,n,v=f.$abs(),N=W(z,v),h=L(z,v),M=0,m=1,d=1,a=0;s=N.$ceil(),!A(s,h);)r=(t=s-1)*m+M,e=t*a+d,n=E(1,W(h,t)),h=E(1,W(N,t)),N=n,M=m,d=a,m=r,a=e;return $.$Rational(s*m+M,s*a+d)},-1),H(S,"$round",function(f){var z=this,v=I,N=I,h=I;return null==f&&(f=0),re(f,0)?re(z.num,0)?0:re(z.den,1)?z.num:(v=L(U(z.num.$abs(),2),z.den),N=U(z.den,2),h=E(v,N).$truncate(),P(Q(z.num,0))?h["$-@"]():h):z.$with_precision("round",f)},-1),H(S,"$to_f",function(){return E(this.num,this.den)}),H(S,"$to_i",function(){return this.$truncate()}),H(S,"$to_r",F),H(S,"$to_s",function(){return this.num+"/"+this.den}),H(S,"$truncate",function(f){var z=this;return null==f&&(f=0),re(f,0)?P(Q(z.num,0))?z.$ceil():z.$floor():z.$with_precision("truncate",f)},-1),H(S,"$with_precision",function(f,z){var N,h=I;return B(b("Integer"),z)||$.$raise(b("TypeError"),"not an Integer"),N=10["$**"](z),h=U(this,N),P(Q(z,1))?E(h.$send(f),N).$to_i():$.$Rational(h.$send(f),N)}),C(S,"$from_string",function(f){var h,M,z=f.trimLeft(),v=/^[+-]?[\d_]+(\.[\d_]+)?/;function m(){return v.test(z)}function d(){var r=z.match(v)[0];return z=z.slice(r.length),r.replace(/_/g,"")}return z.match(v),m()?(h=parseFloat(d()),"/"===z[0]?(z=z.slice(1),m()?(M=parseFloat(d()),$.$Rational(h,M)):$.$Rational(h,1)):$.$Rational(h,1)):$.$Rational(0,1)}),k(S,"divide","/"),k(S,"quo","/")},Opal.modules["corelib/time"]=function(l){var ee=l.slice,re=l.deny_frozen_access,$=l.klass,P=l.Kernel,Q=l.Opal,E=l.defs,C=l.eqeqeq,B=l.def,R=l.truthy,Y=l.rb_gt,H=l.rb_lt,Z=l.send,W=l.rb_plus,U=l.rb_divide,L=l.rb_minus,w=l.range,A=l.neqeq,F=l.rb_le,k=l.eqeq,T=l.alias,g=l.nil,q=l.$$$;return l.top.$require("corelib/comparable"),function(S,_,p){var f=$("::",_,"Time"),z=[f].concat([]),v=l.$r(z);f.$include(q("Comparable"));var a,N=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(a,r,e,s,t,n){if(a=a.$$is_string?parseInt(a,10):Q["$coerce_to!"](a,q("Integer"),"to_int"),r===g)r=1;else if(!r.$$is_number)if(r["$respond_to?"]("to_str"))switch(r=r.$to_str(),r.toLowerCase()){case"jan":r=1;break;case"feb":r=2;break;case"mar":r=3;break;case"apr":r=4;break;case"may":r=5;break;case"jun":r=6;break;case"jul":r=7;break;case"aug":r=8;break;case"sep":r=9;break;case"oct":r=10;break;case"nov":r=11;break;case"dec":r=12;break;default:r=r.$to_i()}else r=Q["$coerce_to!"](r,q("Integer"),"to_int");return(r<1||r>12)&&P.$raise(q("ArgumentError"),"month out of range: "+r),r-=1,((e=e===g?1:e.$$is_string?parseInt(e,10):Q["$coerce_to!"](e,q("Integer"),"to_int"))<1||e>31)&&P.$raise(q("ArgumentError"),"day out of range: "+e),((s=s===g?0:s.$$is_string?parseInt(s,10):Q["$coerce_to!"](s,q("Integer"),"to_int"))<0||s>24)&&P.$raise(q("ArgumentError"),"hour out of range: "+s),((t=t===g?0:t.$$is_string?parseInt(t,10):Q["$coerce_to!"](t,q("Integer"),"to_int"))<0||t>59)&&P.$raise(q("ArgumentError"),"min out of range: "+t),n===g?n=0:n.$$is_number||(n=n.$$is_string?parseInt(n,10):Q["$coerce_to!"](n,q("Integer"),"to_int")),(n<0||n>60)&&P.$raise(q("ArgumentError"),"sec out of range: "+n),[a,r,e,s,t,n]}return E(f,"$at",function(r,e){var s;return q("Time")["$==="](r)?(void 0!==e&&P.$raise(q("TypeError"),"can't convert Time into an exact number"),(s=new Date(r.getTime())).timezone=r.timezone,s):(r.$$is_number||(r=Q["$coerce_to!"](r,q("Integer"),"to_int")),void 0===e?new Date(1e3*r):(e.$$is_number||(e=Q["$coerce_to!"](e,q("Integer"),"to_int")),new Date(1e3*r+e/1e3)))},-2),E(f,"$new",function(r,e,s,t,n,i,c){var x,j,O,te;return null==e&&(e=g),null==s&&(s=g),null==t&&(t=g),null==n&&(n=g),null==i&&(i=g),null==c&&(c=g),void 0===r?new Date:(r=(x=d(r,e,s,t,n,i))[0],e=x[1],s=x[2],t=x[3],n=x[4],i=x[5],c===g?(j=new Date(r,e,s,t,n,0,1e3*i),r<100&&j.setFullYear(r),j):(O=this.$_parse_offset(c),te=new Date(Date.UTC(r,e,s,t,n,0,1e3*i)),r<100&&te.setUTCFullYear(r),(j=new Date(te.getTime()-36e5*O)).timezone=O,j))},-1),E(f,"$_parse_offset",function(r){var e;return r.$$is_string?"UTC"==r?e=0:/^[+-]\d\d:[0-5]\d$/.test(r)?e=("-"==r[0]?-1:1)*(+(r[1]+r[2])+ +(r[4]+r[5])/60):P.$raise(q("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+r):r.$$is_number?e=r/3600:P.$raise(q("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String"),e}),E(f,"$local",function(r,e,s,t,n,i,c,o,x,j){var O,te;return null==e&&(e=g),null==s&&(s=g),null==t&&(t=g),null==n&&(n=g),null==i&&(i=g),null==c&&(c=g),null==o&&(o=g),null==x&&(x=g),null==j&&(j=g),10===arguments.length&&(r=(O=ee(arguments))[5],e=O[4],s=O[3],t=O[2],n=O[1],i=O[0]),r=(O=d(r,e,s,t,n,i))[0],e=O[1],s=O[2],t=O[3],n=O[4],i=O[5],te=new Date(r,e,s,t,n,0,1e3*i),r<100&&te.setFullYear(r),te},-2),E(f,"$gm",function(r,e,s,t,n,i,c,o,x,j){var O,te;return null==e&&(e=g),null==s&&(s=g),null==t&&(t=g),null==n&&(n=g),null==i&&(i=g),null==c&&(c=g),null==o&&(o=g),null==x&&(x=g),null==j&&(j=g),10===arguments.length&&(r=(O=ee(arguments))[5],e=O[4],s=O[3],t=O[2],n=O[1],i=O[0]),r=(O=d(r,e,s,t,n,i))[0],e=O[1],s=O[2],t=O[3],n=O[4],i=O[5],te=new Date(Date.UTC(r,e,s,t,n,0,1e3*i)),r<100&&te.setUTCFullYear(r),te.timezone=0,te},-2),E(f,"$now",function(){return this.$new()}),B(f,"$+",function(r){C(q("Time"),r)&&P.$raise(q("TypeError"),"time + time?"),r.$$is_number||(r=Q["$coerce_to!"](r,q("Integer"),"to_int"));var s=new Date(this.getTime()+1e3*r);return s.timezone=this.timezone,s}),B(f,"$-",function(r){var e=this;if(C(q("Time"),r))return(e.getTime()-r.getTime())/1e3;r.$$is_number||(r=Q["$coerce_to!"](r,q("Integer"),"to_int"));var s=new Date(e.getTime()-1e3*r);return s.timezone=e.timezone,s}),B(f,"$<=>",function(r){var s=g;return C(q("Time"),r)?this.$to_f()["$<=>"](r.$to_f()):(s=r["$<=>"](this),R(s["$nil?"]())?g:R(Y(s,0))?-1:R(H(s,0))?1:0)}),B(f,"$==",function(r){var s;return R(s=q("Time")["$==="](r))?this.$to_f()===r.$to_f():s}),B(f,"$asctime",function(){return this.$strftime("%a %b %e %H:%M:%S %Y")}),Z([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function a(r,e,s,t){var n=null==a.$$s?this:a.$$s;return null==r&&(r=g),null==e&&(e=g),null==s&&(s=g),null==t&&(t=0),Z(n,"define_method",[r],function i(){var c=null==i.$$s?this:i.$$s;return t+(null!=c.timezone?new Date(c.getTime()+36e5*c.timezone)[s]():c[e]())},{$$s:n})},{$$arity:-4,$$s:f}),B(f,"$yday",function(){var e,s,r=this;return e=v("Time").$new(r.$year()).$to_i(),s=v("Time").$new(r.$year(),r.$month(),r.$day()).$to_i(),W(U(L(s,e),86400).$round(),1)}),B(f,"$isdst",function(){var r=this,e=new Date(r.getFullYear(),0,1),s=new Date(r.getFullYear(),6,1);return r.getTimezoneOffset()<Math.max(e.getTimezoneOffset(),s.getTimezoneOffset())}),B(f,"$dup",function(){var r=this,e=g;return(e=new Date(r.getTime())).$copy_instance_variables(r),e.$initialize_dup(r),e}),B(f,"$eql?",function(r){var s;return R(s=r["$is_a?"](q("Time")))?this["$<=>"](r)["$zero?"]():s}),Z([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function a(r,e){var s=null==a.$$s?this:a.$$s;return null==r&&(r=g),null==e&&(e=g),Z(s,"define_method",[r],function t(){return(null==t.$$s?this:t.$$s).$wday()===e},{$$s:s})},{$$s:f}),B(f,"$hash",function(){return"Time:"+this.getTime()}),B(f,"$inspect",function(){var r=this;return R(r["$utc?"]())?r.$strftime("%Y-%m-%d %H:%M:%S UTC"):r.$strftime("%Y-%m-%d %H:%M:%S %z")}),B(f,"$succ",function(){var e=new Date(this.getTime()+1e3);return e.timezone=this.timezone,e}),B(f,"$usec",function(){return 1e3*this.getMilliseconds()}),B(f,"$zone",function(){var r=this;if(0===r.timezone)return"UTC";if(null!=r.timezone)return g;var s,e=r.toString();return"GMT"==(s=-1==e.indexOf("(")?e.match(/[A-Z]{3,4}/)[0]:e.match(/\((.+)\)(?:\s|$)/)[1])&&/(GMT\W*\d{4})/.test(e)?RegExp.$1:s}),B(f,"$getgm",function(){var e=new Date(this.getTime());return e.timezone=0,e}),B(f,"$gmtime",function(){var r=this;return 0!==r.timezone&&(re(r),r.timezone=0),r}),B(f,"$gmt?",function(){return 0===this.timezone}),B(f,"$gmt_offset",function(){var r=this;return null!=r.timezone?60*r.timezone:60*-r.getTimezoneOffset()}),B(f,"$strftime",function(r){var e=this;return r.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(s,t,n,i,c){var x,j,O,o="",te=-1!==t.indexOf("0"),ne=-1===t.indexOf("-"),ae=-1!==t.indexOf("_"),le=-1!==t.indexOf("^"),oe=-1!==t.indexOf("#"),ue=(t.match(":")||[]).length;switch(n=parseInt(n,10),te&&ae&&(t.indexOf("0")<t.indexOf("_")?te=!1:ae=!1),c){case"Y":o+=e.$year();break;case"C":te=!ae,o+=Math.round(e.$year()/100);break;case"y":te=!ae,o+=e.$year()%100;break;case"m":te=!ae,o+=e.$mon();break;case"B":o+=m[e.$mon()-1];break;case"b":case"h":ae=!te,o+=M[e.$mon()-1];break;case"d":te=!ae,o+=e.$day();break;case"e":ae=!te,o+=e.$day();break;case"j":te=!ae,n=isNaN(n)?3:n,o+=e.$yday();break;case"H":te=!ae,o+=e.$hour();break;case"k":ae=!te,o+=e.$hour();break;case"I":te=!ae,o+=e.$hour()%12||12;break;case"l":ae=!te,o+=e.$hour()%12||12;break;case"P":o+=e.$hour()>=12?"pm":"am";break;case"p":o+=e.$hour()>=12?"PM":"AM";break;case"M":te=!ae,o+=e.$min();break;case"S":te=!ae,o+=e.$sec();break;case"L":te=!ae,n=isNaN(n)?3:n,o+=e.getMilliseconds();break;case"N":n=isNaN(n)?9:n,o=(o+=e.getMilliseconds().toString().$rjust(3,"0")).$ljust(n,"0");break;case"z":var ie=null==e.timezone?e.getTimezoneOffset():60*-e.timezone,X=Math.floor(Math.abs(ie)/60),D=Math.abs(ie)%60;o+=ie<0?"+":"-",o+=X<10?"0":"",o+=X,ue>0&&(o+=":"),o+=D<10?"0":"",o+=D,ue>1&&(o+=":00");break;case"Z":o+=e.$zone();break;case"A":o+=N[e.$wday()];break;case"a":o+=h[e.$wday()];break;case"u":o+=e.$wday()+1;break;case"w":o+=e.$wday();break;case"V":o+=e.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":o+=e.$cweek_cyear()["$[]"](1);break;case"g":o+=e.$cweek_cyear()["$[]"](1)["$[]"](w(-2,-1,!1));break;case"s":o+=e.$to_i();break;case"n":o+="\n";break;case"t":o+="\t";break;case"%":o+="%";break;case"c":o+=e.$strftime("%a %b %e %T %Y");break;case"D":case"x":o+=e.$strftime("%m/%d/%y");break;case"F":o+=e.$strftime("%Y-%m-%d");break;case"v":o+=e.$strftime("%e-%^b-%4Y");break;case"r":o+=e.$strftime("%I:%M:%S %p");break;case"R":o+=e.$strftime("%H:%M");break;case"T":case"X":o+=e.$strftime("%H:%M:%S");break;case"J":if((x=e.$to_date().$jd())<2405160){o+=e.$strftime("%Y-%m-%d");break}x<2419614?(j="M",O=1867):x<2424875?(j="T",O=1911):x<2447535?(j="S",O=1925):x<2458605?(j="H",O=1988):(j="R",O=2018),o+=e.$format("%c%02d",j,L(e.$year(),O)),o+=e.$strftime("-%m-%d");break;default:return s}return le&&(o=o.toUpperCase()),oe&&(o=o.replace(/[A-Z]/,function(V){V.toLowerCase()}).replace(/[a-z]/,function(V){V.toUpperCase()})),ne&&(te||ae)&&(o=o.$rjust(isNaN(n)?2:n,ae?" ":"0")),o})}),B(f,"$to_a",function(){var r=this;return[r.$sec(),r.$min(),r.$hour(),r.$day(),r.$month(),r.$year(),r.$wday(),r.$yday(),r.$isdst(),r.$zone()]}),B(f,"$to_f",function(){return this.getTime()/1e3}),B(f,"$to_i",function(){return parseInt(this.getTime()/1e3,10)}),B(f,"$cweek_cyear",function(){var s,r=this,n=g,i=g,c=g,x=g;return s=q("Time").$new(r.$year(),1,1).$wday(),n=r.$year(),R(F(s,4))&&A(s,0)?i=L(s,1):(i=L(L(s,7),1),k(i,-8)&&(i=-1)),c=U(W(r.$yday(),i),7).$ceil(),R(F(c,0))?q("Time").$new(L(r.$year(),1),12,31).$cweek_cyear():(k(c,53)&&(x=q("Time").$new(r.$year(),12,31).$wday(),R(F(x,3))&&A(x,0)&&(c=1,n=W(n,1))),[c,n])}),a=l.get_singleton_class(f),T(a,"mktime","local"),T(a,"utc","gm"),T(f,"ctime","asctime"),T(f,"dst?","isdst"),T(f,"getutc","getgm"),T(f,"gmtoff","gmt_offset"),T(f,"mday","day"),T(f,"month","mon"),T(f,"to_s","inspect"),T(f,"tv_sec","to_i"),T(f,"tv_usec","usec"),T(f,"utc","gmtime"),T(f,"utc?","gmt?"),T(f,"utc_offset","gmt_offset")}(0,Date)},Opal.modules["corelib/struct"]=function(l){var ee=l.klass,re=l.slice,$=l.extract_kwargs,P=l.ensure_kwargs,Q=l.truthy,E=l.neqeq,C=l.eqeq,B=l.Opal,R=l.send,Y=l.Class,H=l.to_a,Z=l.def,W=l.defs,U=l.Kernel,L=l.hash2,w=l.rb_gt,A=l.rb_minus,F=l.eqeqeq,k=l.rb_lt,T=l.rb_ge,I=l.rb_plus,b=l.alias,S=l.nil,_=l.$$$;return l.top.$require("corelib/enumerable"),function(p,f,z){var v=ee("::",null,"Struct"),N=[v].concat([]),h=l.$r(N);v.$include(_("Enumerable")),W(v,"$new",function m(d,a,r){var s,t,n,i,e=m.$$p||S,o=S;if(m.$$p=null,s=re(arguments,1),t=$(s),t=P(t),n=s,null==(i=t.$$smap.keyword_init)&&(i=!1),Q(d))if(C(d.$class(),_("String"))&&E(d["$[]"](0).$upcase(),d["$[]"](0)))n.$unshift(d),d=S;else try{d=B["$const_name!"](d)}catch(x){if(!l.rescue(x,[_("TypeError"),_("NameError")]))throw x;try{n.$unshift(d),d=S}finally{l.pop_exception()}}return R(n,"map",[],function(j){return null==j&&(j=S),B["$coerce_to!"](j,_("String"),"to_str")}),o=R(Y,"new",[this],function x(){var O,j=null==x.$$s?this:x.$$s;return R(n,"each",[],function O(te){return null==te&&(te=S),(null==O.$$s?this:O.$$s).$define_struct_attribute(te)},{$$s:j}),O=l.get_singleton_class(j),Z(O,"$new",function(ae){var oe,ie=S;return oe=re(arguments),(ie=this.$allocate()).$$data={},R(ie,"initialize",H(oe)),ie},-1),O.$alias_method("[]","new")},{$$s:this}),Q(e)&&R(o,"module_eval",[],e.$to_proc()),o.$$keyword_init=i,Q(d)&&_("Struct").$const_set(d,o),o},-2),W(v,"$define_struct_attribute",function(d){var a=this;return C(a,_("Struct"))&&U.$raise(_("ArgumentError"),"you cannot define attributes to the Struct class"),a.$members()["$<<"](d),R(a,"define_method",[d],function r(){return(null==r.$$s?this:r.$$s).$$data[d]},{$$s:a}),R(a,"define_method",[d+"="],function r(e){return null==e&&(e=S),(null==r.$$s?this:r.$$s).$$data[d]=e},{$$s:a})}),W(v,"$members",function(){var a,d=this;return null==d.members&&(d.members=S),C(d,_("Struct"))&&U.$raise(_("ArgumentError"),"the Struct class has no members"),d.members=Q(a=d.members)?a:[]}),W(v,"$inherited",function(d){var r,a=this;return null==a.members&&(a.members=S),r=a.members,R(d,"instance_eval",[],function e(){return(null==e.$$s?this:e.$$s).members=r},{$$s:a})}),Z(v,"$initialize",function(d){var a,r,e=this,s=S,t=S,n=S;return a=re(arguments),r=a,Q(e.$class().$$keyword_init)?(s=Q(t=r.$last())?t:L([],{}),(Q(w(r.$length(),1))||Q(1===r.length&&!s.$$is_hash))&&U.$raise(_("ArgumentError"),"wrong number of arguments (given "+r.$length()+", expected 0)"),n=A(s.$keys(),e.$class().$members()),Q(n["$any?"]())&&U.$raise(_("ArgumentError"),"unknown keywords: "+n.$join(", ")),R(e.$class().$members(),"each",[],function i(c){var o,x=null==i.$$s?this:i.$$s;return null==c&&(c=S),o=[c,s["$[]"](c)],R(x,"[]=",o),o[o.length-1]},{$$s:e})):(Q(w(r.$length(),e.$class().$members().$length()))&&U.$raise(_("ArgumentError"),"struct size differs"),R(e.$class().$members(),"each_with_index",[],function i(c,o){var x,j=null==i.$$s?this:i.$$s;return null==c&&(c=S),null==o&&(o=S),x=[c,r["$[]"](o)],R(j,"[]=",x),x[x.length-1]},{$$s:e}))},-1),Z(v,"$initialize_copy",function(d){this.$$data={};var e,s,t,r=Object.keys(d.$$data);for(e=0,s=r.length;e<s;e++)this.$$data[t=r[e]]=d.$$data[t]}),W(v,"$keyword_init?",function(){return this.$$keyword_init}),Z(v,"$members",function(){return this.$class().$members()}),Z(v,"$hash",function(){return h("Hash").$new(this.$$data).$hash()}),Z(v,"$[]",function(d){var a=this;return F(_("Integer"),d)?(Q(k(d,a.$class().$members().$size()["$-@"]()))&&U.$raise(_("IndexError"),"offset "+d+" too small for struct(size:"+a.$class().$members().$size()+")"),Q(T(d,a.$class().$members().$size()))&&U.$raise(_("IndexError"),"offset "+d+" too large for struct(size:"+a.$class().$members().$size()+")"),d=a.$class().$members()["$[]"](d)):F(_("String"),d)?a.$$data.hasOwnProperty(d)||U.$raise(_("NameError").$new("no member '"+d+"' in struct",d)):U.$raise(_("TypeError"),"no implicit conversion of "+d.$class()+" into Integer"),d=B["$coerce_to!"](d,_("String"),"to_str"),a.$$data[d]}),Z(v,"$[]=",function(d,a){var r=this;return F(_("Integer"),d)?(Q(k(d,r.$class().$members().$size()["$-@"]()))&&U.$raise(_("IndexError"),"offset "+d+" too small for struct(size:"+r.$class().$members().$size()+")"),Q(T(d,r.$class().$members().$size()))&&U.$raise(_("IndexError"),"offset "+d+" too large for struct(size:"+r.$class().$members().$size()+")"),d=r.$class().$members()["$[]"](d)):F(_("String"),d)?Q(r.$class().$members()["$include?"](d.$to_sym()))||U.$raise(_("NameError").$new("no member '"+d+"' in struct",d)):U.$raise(_("TypeError"),"no implicit conversion of "+d.$class()+" into Integer"),d=B["$coerce_to!"](d,_("String"),"to_str"),r.$$data[d]=a}),Z(v,"$==",function(d){if(!Q(d["$instance_of?"](this.$class())))return!1;var r={},e={};return function s(t,n){var i,c,o;for(i in r[t.$__id__()]=!0,e[n.$__id__()]=!0,t.$$data)if(c=t.$$data[i],o=n.$$data[i],_("Struct")["$==="](c)){if(!(r.hasOwnProperty(c.$__id__())&&e.hasOwnProperty(o.$__id__())||s(c,o)))return!1}else if(!c["$=="](o))return!1;return!0}(this,d)}),Z(v,"$eql?",function(d){if(!Q(d["$instance_of?"](this.$class())))return!1;var r={},e={};return function s(t,n){var i,c,o;for(i in r[t.$__id__()]=!0,e[n.$__id__()]=!0,t.$$data)if(c=t.$$data[i],o=n.$$data[i],_("Struct")["$==="](c)){if(!(r.hasOwnProperty(c.$__id__())&&e.hasOwnProperty(o.$__id__())||s(c,o)))return!1}else if(!c["$eql?"](o))return!1;return!0}(this,d)}),Z(v,"$each",function m(){var d=m.$$p||S,a=this;return m.$$p=null,d===S?R(a,"enum_for",["each"],function r(){return(null==r.$$s?this:r.$$s).$size()},{$$s:a}):(R(a.$class().$members(),"each",[],function r(e){return null==e&&(e=S),l.yield1(d,(null==r.$$s?this:r.$$s)["$[]"](e))},{$$s:a}),a)}),Z(v,"$each_pair",function m(){var d=m.$$p||S,a=this;return m.$$p=null,d===S?R(a,"enum_for",["each_pair"],function r(){return(null==r.$$s?this:r.$$s).$size()},{$$s:a}):(R(a.$class().$members(),"each",[],function r(e){return null==e&&(e=S),l.yield1(d,[e,(null==r.$$s?this:r.$$s)["$[]"](e)])},{$$s:a}),a)}),Z(v,"$length",function(){return this.$class().$members().$length()}),Z(v,"$to_a",function(){return R(this.$class().$members(),"map",[],function a(r){return null==r&&(r=S),(null==a.$$s?this:a.$$s)["$[]"](r)},{$$s:this})});var M=[];return Z(v,"$inspect",function(){var d=this,a=S,r=S;return function(){try{return a="#<struct ",Q(M["$include?"](d.$__id__()))?I(a,":...>"):(M["$<<"](d.$__id__()),r=!0,F(_("Struct"),d)&&Q(d.$class().$name())&&(a=I(a,d.$class()+" ")),a=I(a,R(d.$each_pair(),"map",[],function(s,t){return null==s&&(s=S),null==t&&(t=S),s+"="+h("Opal").$inspect(t)}).$join(", ")),a=I(a,">"))}finally{Q(r)&&M.pop()}}()}),Z(v,"$to_h",function m(){var d=m.$$p||S,a=this;return m.$$p=null,d!==S?R(R(a,"map",[],d.$to_proc()),"to_h",H(a.$args())):R(a.$class().$members(),"each_with_object",[L([],{})],function r(e,s){var t;return null==e&&(e=S),null==s&&(s=S),t=[e,(null==r.$$s?this:r.$$s)["$[]"](e)],R(s,"[]=",t),t[t.length-1]},{$$s:a})}),Z(v,"$values_at",function(d){var a,r;a=re(arguments);for(var s=[],t=0,n=(r=R(r=a,"map",[],function(c){return null==c&&(c=S),c.$$is_range?c.$to_a():c}).$flatten()).length;t<n;t++)r[t].$$is_number||U.$raise(_("TypeError"),"no implicit conversion of "+r[t].$class()+" into Integer"),s.push(this["$[]"](r[t]));return s},-1),Z(v,"$dig",function(d,a){var e,t=S;return e=re(arguments,1),(t=Q(d.$$is_string&&this.$$data.hasOwnProperty(d))&&this.$$data[d]||S)===S||0===e.length?t:(Q(t["$respond_to?"]("dig"))||U.$raise(_("TypeError"),t.$class()+" does not have #dig method"),R(t,"dig",H(e)))},-2),b(v,"size","length"),b(v,"to_s","inspect"),b(v,"values","to_a")}()},Opal.modules["corelib/set"]=function(l){var ee=l.freeze,re=l.klass,$=l.slice,P=l.defs,Q=l.hash2,E=l.truthy,C=l.eqeqeq,B=l.Kernel,R=l.send,Y=l.def,H=l.eqeq,Z=l.rb_lt,W=l.rb_le,U=l.alias,w=l.nil,A=l.$$$;return function(F,k,T){var I=re("::",null,"Set"),b=[I].concat([]),g=l.$r(b);function _(p){E(p["$is_a?"](A("Set")))||B.$raise(A("ArgumentError"),"value must be a set")}return I.$$prototype.hash=w,I.$include(A("Enumerable")),P(I,"$[]",function(f){var z;return z=$(arguments),this.$new(z)},-1),Y(I,"$initialize",function p(f){var z=p.$$p||w,v=this;return p.$$p=null,null==f&&(f=w),v.hash=Q([],{}),E(f["$nil?"]())?w:(C(A("Enumerable"),f)||B.$raise(A("ArgumentError"),"value must be enumerable"),E(z)?R(f,"each",[],function N(h){return null==h&&(h=w),(null==N.$$s?this:N.$$s).$add(l.yield1(z,h))},{$$s:v}):v.$merge(f))},-1),Y(I,"$dup",function(){return this.$class().$new().$merge(this)}),Y(I,"$-",function(f){return E(f["$respond_to?"]("each"))||B.$raise(A("ArgumentError"),"value must be enumerable"),this.$dup().$subtract(f)}),Y(I,"$inspect",function(){return"#<Set: {"+this.$to_a().$join(",")+"}>"}),Y(I,"$==",function(f){var z=this;return!!E(z["$equal?"](f))||(E(f["$instance_of?"](z.$class()))?z.hash["$=="](f.$instance_variable_get("@hash")):!(!E(f["$is_a?"](A("Set")))||!H(z.$size(),f.$size()))&&R(f,"all?",[],function v(N){var h=null==v.$$s?this:v.$$s;return null==h.hash&&(h.hash=w),null==N&&(N=w),h.hash["$include?"](N)},{$$s:z}))}),Y(I,"$add",function(f){return this.hash["$[]="](f,!0),this}),Y(I,"$classify",function p(){var f=p.$$p||w,z=this,v=w;return p.$$p=null,f===w?z.$enum_for("classify"):(v=R(A("Hash"),"new",[],function N(h,M){var m;return null==h&&(h=w),null==M&&(M=w),m=[M,(null==N.$$s?this:N.$$s).$class().$new()],R(h,"[]=",m),m[m.length-1]},{$$s:z}),R(z,"each",[],function(h){return null==h&&(h=w),v["$[]"](l.yield1(f,h)).$add(h)}),v)}),Y(I,"$collect!",function p(){var f=p.$$p||w,z=this,v=w;return p.$$p=null,f===w?z.$enum_for("collect!"):(v=z.$class().$new(),R(z,"each",[],function(h){return null==h&&(h=w),v["$<<"](l.yield1(f,h))}),z.$replace(v))}),Y(I,"$compare_by_identity",function(){var f=this;return E(f.hash["$respond_to?"]("compare_by_identity"))?(f.hash.$compare_by_identity(),f):f.$raise(g("NotImplementedError"),f.$class().$name()+"#compare_by_identity is not implemented")}),Y(I,"$compare_by_identity?",function(){var z;return E(z=this.hash["$respond_to?"]("compare_by_identity?"))?this.hash["$compare_by_identity?"]():z}),Y(I,"$delete",function(f){return this.hash.$delete(f),this}),Y(I,"$delete?",function(f){var z=this;return E(z["$include?"](f))?(z.$delete(f),z):w}),Y(I,"$delete_if",function p(){var f=p.$$p||w,z=this;return p.$$p=null,f===w?z.$enum_for("delete_if"):(R(R(z,"select",[],function(N){return null==N&&(N=w),l.yield1(f,N)}),"each",[],function v(N){var h=null==v.$$s?this:v.$$s;return null==h.hash&&(h.hash=w),null==N&&(N=w),h.hash.$delete(N)},{$$s:z}),z)}),Y(I,"$freeze",function(){var f=this;return E(f["$frozen?"]())?f:(f.hash.$freeze(),ee(f))}),Y(I,"$keep_if",function p(){var f=p.$$p||w,z=this;return p.$$p=null,f===w?z.$enum_for("keep_if"):(R(R(z,"reject",[],function(N){return null==N&&(N=w),l.yield1(f,N)}),"each",[],function v(N){var h=null==v.$$s?this:v.$$s;return null==h.hash&&(h.hash=w),null==N&&(N=w),h.hash.$delete(N)},{$$s:z}),z)}),Y(I,"$reject!",function p(){var f=p.$$p||w,z=this,v=w;return p.$$p=null,f===w?z.$enum_for("reject!"):(v=z.$size(),R(z,"delete_if",[],f.$to_proc()),H(z.$size(),v)?w:z)}),Y(I,"$select!",function p(){var f=p.$$p||w,z=this,v=w;return p.$$p=null,f===w?z.$enum_for("select!"):(v=z.$size(),R(z,"keep_if",[],f.$to_proc()),H(z.$size(),v)?w:z)}),Y(I,"$add?",function(f){return E(this["$include?"](f))?w:this.$add(f)}),Y(I,"$each",function p(){var f=p.$$p||w,z=this;return p.$$p=null,f===w?z.$enum_for("each"):(R(z.hash,"each_key",[],f.$to_proc()),z)}),Y(I,"$empty?",function(){return this.hash["$empty?"]()}),Y(I,"$eql?",function(f){return this.hash["$eql?"](R(f,"instance_eval",[],function v(){var N=null==v.$$s?this:v.$$s;return null==N.hash&&(N.hash=w),N.hash},{$$s:this}))}),Y(I,"$clear",function(){return this.hash.$clear(),this}),Y(I,"$include?",function(f){return this.hash["$include?"](f)}),Y(I,"$merge",function(f){return R(f,"each",[],function v(N){return null==N&&(N=w),(null==v.$$s?this:v.$$s).$add(N)},{$$s:this}),this}),Y(I,"$replace",function(f){var z=this;return z.$clear(),z.$merge(f),z}),Y(I,"$size",function(){return this.hash.$size()}),Y(I,"$subtract",function(f){return R(f,"each",[],function v(N){return null==N&&(N=w),(null==v.$$s?this:v.$$s).$delete(N)},{$$s:this}),this}),Y(I,"$|",function(f){return E(f["$respond_to?"]("each"))||B.$raise(A("ArgumentError"),"value must be enumerable"),this.$dup().$merge(f)}),Y(I,"$superset?",function(f){return _(f),!E(Z(this.$size(),f.$size()))&&R(f,"all?",[],function v(N){return null==N&&(N=w),(null==v.$$s?this:v.$$s)["$include?"](N)},{$$s:this})}),Y(I,"$proper_superset?",function(f){return _(f),!E(W(this.$size(),f.$size()))&&R(f,"all?",[],function v(N){return null==N&&(N=w),(null==v.$$s?this:v.$$s)["$include?"](N)},{$$s:this})}),Y(I,"$subset?",function(f){return _(f),!E(Z(f.$size(),this.$size()))&&R(this,"all?",[],function(N){return null==N&&(N=w),f["$include?"](N)})}),Y(I,"$proper_subset?",function(f){return _(f),!E(W(f.$size(),this.$size()))&&R(this,"all?",[],function(N){return null==N&&(N=w),f["$include?"](N)})}),Y(I,"$intersect?",function(f){var z=this;return _(f),E(Z(z.$size(),f.$size()))?R(z,"any?",[],function(N){return null==N&&(N=w),f["$include?"](N)}):R(f,"any?",[],function v(N){return null==N&&(N=w),(null==v.$$s?this:v.$$s)["$include?"](N)},{$$s:z})}),Y(I,"$disjoint?",function(f){return this["$intersect?"](f)["$!"]()}),Y(I,"$to_a",function(){return this.hash.$keys()}),U(I,"+","|"),U(I,"<","proper_subset?"),U(I,"<<","add"),U(I,"<=","subset?"),U(I,">","proper_superset?"),U(I,">=","superset?"),U(I,"difference","-"),U(I,"filter!","select!"),U(I,"length","size"),U(I,"map!","collect!"),U(I,"member?","include?"),U(I,"union","|")}()},Opal.modules["corelib/dir"]=function(l){var W,H,re=l.def,$=l.truthy,P=l.alias,E=l.nil,C=l.$$$;return[H=(0,l.klass)("::",null,"Dir")].concat([]),W=l.get_singleton_class(H),re(W,"$chdir",function L(w){var A=L.$$p||E,F=E;return L.$$p=null,function(){try{return F=l.current_dir,l.current_dir=w,l.yieldX(A,[])}finally{l.current_dir=F}}()}),re(W,"$pwd",function(){return l.current_dir||"."}),re(W,"$home",function(){var w;return $(w=C("ENV")["$[]"]("HOME"))?w:"."}),P(W,"getwd","pwd")},Opal.modules["corelib/file"]=function(l){var I,b,g,q,ee=l.truthy,$=l.const_set,P=l.Opal,Q=l.regexp,E=l.rb_plus,C=l.def,B=l.Kernel,R=l.eqeq,Y=l.rb_lt,H=l.rb_minus,Z=l.range,W=l.send,U=l.slice,L=l.alias,A=l.nil,F=l.$$$;return I=[],g=[b=(0,l.klass)("::",F("IO"),"File")].concat(I),q=A,$(g[0],"Separator",$(g[0],"SEPARATOR","/")),$(g[0],"ALT_SEPARATOR",A),$(g[0],"PATH_SEPARATOR",":"),$(g[0],"FNM_SYSCASE",0),q=/^[a-zA-Z]:(?:\\|\/)/,function(S,_){var p=[S].concat(_),f=l.$r(p);function z(N){return ee(N["$respond_to?"]("to_path"))&&(N=N.$to_path()),P["$coerce_to!"](N,F("String"),"to_str")}function v(){return f("ALT_SEPARATOR")===A?l.escape_regexp(f("SEPARATOR")):l.escape_regexp(E(f("SEPARATOR"),f("ALT_SEPARATOR")))}return C(S,"$absolute_path",function(h,M){var m,d,r,e,s,a=A,t=A,n=A,i=A,c=A;null==M&&(M=A),m=f("SEPARATOR"),d=v(),a=[],h=ee(h["$respond_to?"]("to_path"))?h.$to_path():h,h=P["$coerce_to!"](h,F("String"),"to_str"),M=ee(r=M)?r:F("Dir").$pwd(),e=h.substr(0,m.length)===m||q.test(h),s=M.substr(0,m.length)===m||q.test(M),ee(e)?(t=h.$split(Q(["[",d,"]"])),n=q.test(h)?"":h.$sub(Q(["^([",d,"]+).*$"]),"\\1"),i=!0):(t=E(M.$split(Q(["[",d,"]"])),h.$split(Q(["[",d,"]"]))),n=q.test(M)?"":M.$sub(Q(["^([",d,"]+).*$"]),"\\1"),i=s);for(var o,x=0,j=t.length;x<j;x++)(o=t[x])!==A&&(""!==o||0!==a.length&&!i)&&("."!==o||0!==a.length&&!i)&&(".."===o?a.pop():a.push(o));return!i&&"."!==t[0]&&a.$unshift("."),c=a.$join(m),ee(i)&&(c=E(n,c)),c},-2),C(S,"$expand_path",function(h,M){var d,a,r=A,e=A,s=A;return null==M&&(M=A),d=f("SEPARATOR"),a=v(),ee("~"===h[0]||M&&"~"===M[0])&&(r=f("Dir").$home(),ee(r)||B.$raise(F("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),e=q.test(r)?"":r.$sub(Q(["^([",a,"]+).*$"]),"\\1"),ee(r["$start_with?"](e))||B.$raise(F("ArgumentError"),"non-absolute home"),r=E(r,d),s=Q(["^\\~(?:",d,"|$)"]),h=h.$sub(s,r),ee(M)&&(M=M.$sub(s,r))),this.$absolute_path(h,M)},-2),C(S,"$dirname",function(h,M){var d;if(null==M&&(M=1),R(M,0))return h;ee(Y(M,0))&&B.$raise(F("ArgumentError"),"level can't be negative"),d=v();var r,a=(h=z(h)).match(new RegExp("^["+d+"]"));return r=""===(h=(h=(h=h.replace(new RegExp("["+d+"]+$"),"")).replace(new RegExp("[^"+d+"]+$"),"")).replace(new RegExp("["+d+"]+$"),""))?a?"/":".":h,1==M?r:this.$dirname(r,H(M,1))},-2),C(S,"$basename",function(h,M){var m;return null==M&&(M=A),m=v(),0==(h=z(h)).length||(M=M!==A?P["$coerce_to!"](M,F("String"),"to_str"):null,h=(h=h.replace(new RegExp("(.)["+m+"]*$"),"$1")).replace(new RegExp("^(?:.*["+m+"])?([^"+m+"]+)$"),"$1"),".*"===M?h=h.replace(/\.[^\.]+$/,""):null!==M&&(M=l.escape_regexp(M),h=h.replace(new RegExp(M+"$"),""))),h},-2),C(S,"$extname",function(h){var m=A,d=A;return h=z(h),m=this.$basename(h),ee(m["$empty?"]())||(d=m["$[]"](Z(1,-1,!1)).$rindex("."),ee(d["$nil?"]())||R(E(d,1),H(m.$length(),1)))?"":m["$[]"](l.Range.$new(E(d,1),-1,!1))}),C(S,"$exist?",function(h){return null!=l.modules[h]}),C(S,"$directory?",function(h){var M=A;for(var m in M=[],l.modules)M.push(m);return h=h.$gsub(Q(["(^.",f("SEPARATOR"),"+|",f("SEPARATOR"),"+$)"])),W(M,"find",[],function(a){return null==a&&(a=A),a["$=~"](Q(["^",h]))})}),C(S,"$join",function(h){var M,m,d=A;return M=U(arguments),ee((m=M)["$empty?"]())?"":(d="",m=W(m.$flatten().$each_with_index(),"map",[],function(r,e){return null==r&&(r=A),null==e&&(e=A),R(e,0)&&ee(r["$empty?"]())||R(m.$length(),E(e,1))&&ee(r["$empty?"]())?f("SEPARATOR"):r}),m=W(m,"reject",[],"empty?".$to_proc()),W(m,"each_with_index",[],function(r,e){var s=A;return null==r&&(r=A),null==e&&(e=A),s=m["$[]"](E(e,1)),ee(s["$nil?"]())?d=""+d+r:(ee(r["$end_with?"](f("SEPARATOR")))&&ee(s["$start_with?"](f("SEPARATOR")))&&(r=r.$sub(Q([f("SEPARATOR"),"+$"]),"")),d=ee(r["$end_with?"](f("SEPARATOR")))||ee(s["$start_with?"](f("SEPARATOR")))?""+d+r:""+d+r+f("SEPARATOR"))}),d)},-1),C(S,"$split",function(h){return h.$split(f("SEPARATOR"))}),L(S,"realpath","expand_path"),L(S,"exists?","exist?")}(l.get_singleton_class(b),g)},Opal.modules["corelib/process/base"]=function(l){var B,ee=l.klass,re=l.slice,$=l.defs,P=l.return_val,Q=l.nil;return B=ee("::",null,"Signal"),$(B,"$trap",function(Y){return re(arguments),Q},-1),function(E,C){var B=ee("::",null,"GC");return $(B,"$start",P(Q))}()},Opal.modules["corelib/process"]=function(l){var ee=l.module,re=l.defs,$=l.truthy,P=l.return_val,Q=l.Kernel,E=l.nil,C=l.$$$;return function(B){var R=ee("::","Process"),Y=E;if(R.__clocks__=[],re(R,"$__register_clock__",function(W,U){var L=this;return null==L.__clocks__&&(L.__clocks__=E),L.$const_set(W,L.__clocks__.$size()),L.__clocks__["$<<"](U)}),R.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),Y=!1,l.global.performance)Y=function(){return performance.now()};else if(l.global.process&&process.hrtime){var H=process.hrtime();Y=function(){var Z=process.hrtime(H);return 1e3*Z[0]+(Z[1]/1e3|0)/1e3}}return $(Y)&&R.$__register_clock__("CLOCK_MONOTONIC",Y),re(R,"$pid",P(0)),re(R,"$times",function(){var W;return W=C("Time").$now().$to_f(),C(C("Benchmark"),"Tms").$new(W,W,W,W,W)}),re(R,"$clock_gettime",function(W,U){var L=this,A=E;null==L.__clocks__&&(L.__clocks__=E),null==U&&(U="float_second"),$(A=L.__clocks__["$[]"](W))||Q.$raise(C(C("Errno"),"EINVAL"),"clock_gettime("+W+") "+L.__clocks__["$[]"](W));var F=A();switch(U){case"float_second":return F/1e3;case"float_millisecond":return F/1;case"float_microsecond":return 1e3*F;case"second":return F/1e3|0;case"millisecond":return F/1|0;case"microsecond":return 1e3*F|0;case"nanosecond":return 1e6*F|0;default:Q.$raise(C("ArgumentError"),"unexpected unit: "+U)}},-2)}()},Opal.modules["corelib/random/formatter"]=function(l){var U,F,k,T,I,L,re=l.module,$=l.def,P=l.range,Q=l.send,E=l.rb_divide,C=l.Kernel,B=l.Opal,Y=l.nil,H=l.$$$;return U=[],F=[L=(0,l.klass)("::",null,"Random")].concat(U),T=[k=re(L,"Formatter")].concat(F),I=l.$r(T),$(k,"$hex",function(g){null==g&&(g=Y),g=H("Random").$_verify_count(g);for(var S=this.$bytes(g),_="",p=0;p<g;p++)_+=S.charCodeAt(p).toString(16).padStart(2,"0");return _.$encode("US-ASCII")},-1),$(k,"$random_bytes",function(g){return null==g&&(g=Y),this.$bytes(g)},-1),$(k,"$base64",function(g){return null==g&&(g=Y),H("Base64").$strict_encode64(this.$random_bytes(g)).$encode("US-ASCII")},-1),$(k,"$urlsafe_base64",function(g,q){return null==g&&(g=Y),null==q&&(q=!1),H("Base64").$urlsafe_encode64(this.$random_bytes(g),q).$encode("US-ASCII")},-1),$(k,"$uuid",function(){var q=Y;return(q=this.$hex(16).$split(""))["$[]="](12,"4"),q["$[]="](16,(3&parseInt(q["$[]"](16),16)|8).toString(16)),q=[q["$[]"](P(0,8,!0)),q["$[]"](P(8,12,!0)),q["$[]"](P(12,16,!0)),q["$[]"](P(16,20,!0)),q["$[]"](P(20,32,!0))],(q=Q(q,"map",[],"join".$to_proc())).$join("-")}),$(k,"$random_float",function(){var q=Y,S=Y;return q=this.$bytes(4),S=0,Q(4,"times",[],function(p){return null==p&&(p=Y),S=(S=S["$<<"](8))["$|"](q["$[]"](p).$ord())}),E(S.$abs(),2147483647)}),$(k,"$random_number",function(g){var q=this;function S(){return q.$random_float()}function _(f){return Math.floor(S()*f)}return null==g?S():g.$$is_range?function p(){var f=g.begin,z=g.end;if(f===Y||z===Y)return Y;var v=z-f;return v<0?Y:0===v?f:(z%1==0&&f%1==0&&!g.excl&&v++,_(v)+f)}():g.$$is_number?(g<=0&&C.$raise(H("ArgumentError"),"invalid argument - "+g),g%1==0?_(g):S()*g):((g=B["$coerce_to!"](g,H("Integer"),"to_int"))<=0&&C.$raise(H("ArgumentError"),"invalid argument - "+g),_(g))},-1),$(k,"$alphanumeric",function(g){var S=Y;return null==g&&(g=Y),g=I("Random").$_verify_count(g),S=Q([P("0","9",!1),P("a","z",!1),P("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),Q(H("Array"),"new",[g],function _(p){return null==p&&(p=Y),S["$[]"]((null==_.$$s?this:_.$$s).$random_number(S.$length()))},{$$s:this}).$join()},-1),L.$include(H(H("Random"),"Formatter")),L.$extend(H(H("Random"),"Formatter"))},Opal.modules["corelib/random/mersenne_twister"]=function(l){var Y,R,H,ee=l.klass,re=l.const_set,$=l.send,Q=l.$$$,E=l.nil;return E=function(){var C=624,B=397,W=function(T,I){return function(T,I){return 2147483648&T|2147483647&I}(T,I)>>>1^(1&I?2567483615:0)};function A(T){var I;return--T.left<=0&&function w(T){var g,I=0,b=T.state;for(T.left=C,T.next=0,g=228;--g;I++)b[I]=b[I+B]^W(b[I+0],b[I+1]);for(g=B;--g;I++)b[I]=b[I+(B-C)]^W(b[I+0],b[I+1]);b[I]=b[I+(B-C)]^W(b[I+0],b[0])}(T),I=T.state[T.next++],I^=I>>>11,I^=I<<7&2636928640,I^=I<<15&4022730752,(I^=I>>>18)>>>0}return{genrand_real:function k(T){return function F(T,I){return(67108864*(T>>>=5)+(I>>>=6))*(1/9007199254740992)}(A(T),A(T))},init:function U(T){var I={left:0,next:C,state:new Array(C)};return function L(T,I){var b;for(T.state[0]=I>>>0,b=1;b<C;b++)T.state[b]=1812433253*(T.state[b-1]^T.state[b-1]>>30>>>0)+b,T.state[b]&=4294967295;T.left=1,T.next=C}(I,T),I}}}(),R=ee("::",null,"Random"),H=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,re(R,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*H)},reseed:function(Z){return E.init(Z)},rand:function(Z){return E.genrand_real(Z)}}),$(R,"generator=",Y=[Q(R,"MERSENNE_TWISTER_GENERATOR")]),Y[Y.length-1]},Opal.modules["corelib/random"]=function(l){var U,ee=l.truthy,re=l.klass,$=l.Kernel,P=l.defs,Q=l.Opal,E=l.def,C=l.eqeqeq,B=l.send,R=l.top,Y=l.nil,H=l.$$$;return R.$require("corelib/random/formatter"),(U=re("::",null,"Random")).$attr_reader("seed","state"),P(U,"$_verify_count",function(w){return ee(w)||(w=16),"number"!=typeof w&&(w=w.$to_int()),w<0&&$.$raise(H("ArgumentError"),"negative string size (or size too big)"),Math.floor(w)}),E(U,"$initialize",function(w){return null==w&&(w=H("Random").$new_seed()),w=Q["$coerce_to!"](w,H("Integer"),"to_int"),this.state=w,this.$reseed(w)},-1),E(U,"$reseed",function(w){return this.seed=w,this.$rng=l.$$rand.reseed(w)}),P(U,"$new_seed",function(){return l.$$rand.new_seed()}),P(U,"$rand",function(w){return H(this,"DEFAULT").$rand(w)},-1),P(U,"$srand",function(w){var F;return null==w&&(w=H("Random").$new_seed()),w=Q["$coerce_to!"](w,H("Integer"),"to_int"),F=H(this,"DEFAULT").$seed(),H(this,"DEFAULT").$reseed(w),F},-1),P(U,"$urandom",function(w){return H("SecureRandom").$bytes(w)}),E(U,"$==",function(w){var F=Y;return!!C(H("Random"),w)&&(ee(F=this.$seed()["$=="](w.$seed()))?this.$state()["$=="](w.$state()):F)}),E(U,"$bytes",function(w){return w=H("Random").$_verify_count(w),B(H("Array"),"new",[w],function F(){return(null==F.$$s?this:F.$$s).$rand(255).$chr()},{$$s:this}).$join().$encode("ASCII-8BIT")}),P(U,"$bytes",function(w){return H(this,"DEFAULT").$bytes(w)}),E(U,"$rand",function(w){return this.$random_number(w)},-1),E(U,"$random_float",function(){return this.state++,l.$$rand.rand(this.$rng)}),P(U,"$random_float",function(){return H(this,"DEFAULT").$random_float()}),P(U,"$generator=",function(w){var A=this;return l.$$rand=w,ee(A["$const_defined?"]("DEFAULT"))?H(A,"DEFAULT").$reseed():A.$const_set("DEFAULT",A.$new(A.$new_seed()))}),R.$require("corelib/random/mersenne_twister")},Opal.modules["corelib/unsupported"]=function(l){var F,k,ee=l.Kernel,re=l.klass,$=l.send,P=l.slice,Q=l.module,E=l.def,C=l.return_val,B=l.alias,R=l.defs,Y=l.top,Z=l.nil,W=l.$$$,U={};function L(A){switch(l.config.unsupported_features_severity){case"error":ee.$raise(W("NotImplementedError"),A);break;case"warning":!function w(A){U[A]||(U[A]=!0,Y.$warn(A))}(A)}}return k=re("::",null,"String"),$(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function I(b){return null==b&&(b=Z),$(null==I.$$s?this:I.$$s,"define_method",[b],function(S){return P(arguments),ee.$raise(W("NotImplementedError"),"String#%s not supported. Mutable String methods are not supported in Opal."["$%"](b))},-1)},{$$s:k}),function(A){var F=Q("::","Kernel"),k="Object tainting is not supported by Opal";E(F,"$taint",function(){return L(k),this}),E(F,"$untaint",function(){return L(k),this}),E(F,"$tainted?",function(){return L(k),!1})}(),function(A,F){var k=re("::",null,"Module");E(k,"$public",function(I){var g;return 0===(g=P(arguments)).length?(this.$$module_function=!1,Z):1===g.length?g[0]:g},-1),E(k,"$private_class_method",function(I){var g;return 1===(g=P(arguments)).length?g[0]:g},-1),E(k,"$private_method_defined?",C(!1)),E(k,"$private_constant",function(I){return P(arguments),Z},-1),B(k,"nesting","public"),B(k,"private","public"),B(k,"protected","public"),B(k,"protected_method_defined?","private_method_defined?"),B(k,"public_class_method","private_class_method"),B(k,"public_instance_method","instance_method"),B(k,"public_instance_methods","instance_methods"),B(k,"public_method_defined?","method_defined?")}(),F=Q("::","Kernel"),E(F,"$private_methods",function(T){return P(arguments),[]},-1),B(F,"protected_methods","private_methods"),B(F,"private_instance_methods","private_methods"),B(F,"protected_instance_methods","private_methods"),function(A,F){var k=Q("::","Kernel"),T=[k].concat([]),I=l.$r(T);E(k,"$eval",function(g){return P(arguments),ee.$raise(W("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. See https://github.com/opal/opal/blob/"+I("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details.")},-1)}(),R(Y,"$public",function(F){var T;return 1===(T=P(arguments)).length?T[0]:T},-1),R(Y,"$private",function(F){var T;return 1===(T=P(arguments)).length?T[0]:T},-1)},Opal.modules["corelib/binding"]=function(l){var k,T,re=l.truthy,$=l.def,P=l.slice,Q=l.send,E=l.to_a,C=l.Kernel,B=l.return_ivar,R=l.eqeq,Y=l.thrower,H=l.module,Z=l.const_set,W=l.top,L=l.nil,w=l.$$$;return(T=(k=(0,l.klass)("::",null,"Binding")).$$prototype).jseval=T.scope_variables=L,$(k,"$initialize",function(b,g,q,S){var _,p=this;return null==g&&(g=[]),null==S&&(S=L),p.jseval=(_=[b,g,q,S])[0],p.scope_variables=_[1],p.receiver=_[2],p.source_location=_[3],re(void 0!==typeof q)?L:q=p.$js_eval("self")},-2),$(k,"$js_eval",function(b){var q;return q=P(arguments),re(this.jseval)?Q(this.jseval,"call",E(q)):C.$raise("Evaluation on a Proc#binding is not supported")},-1),$(k,"$local_variable_get",function(b){try{return this.$js_eval(b)}catch(q){if(!l.rescue(q,[w("Exception")]))throw q;try{return C.$raise(w("NameError"),"local variable `"+b+"' is not defined for "+this.$inspect())}finally{l.pop_exception()}}}),$(k,"$local_variable_set",function(b,g){return l.Binding.tmp_value=g,this.$js_eval(b+" = Opal.Binding.tmp_value"),delete l.Binding.tmp_value,g}),$(k,"$local_variables",B("scope_variables")),$(k,"$local_variable_defined?",function(b){return this.scope_variables["$include?"](b)}),$(k,"$eval",function(b,g,q){try{return Y("eval_return"),null==g&&(g=L),null==q&&(q=L),R(b,"self")?this.$receiver():C.$eval(b,this,g,q)}catch(p){if(p===l.t_eval_return)return p.$v;throw p}},-2),k.$attr_reader("receiver","source_location"),$(H("::","Kernel"),"$binding",function(){return C.$raise("Opal doesn't support dynamic calls to binding")}),Z([][0],"TOPLEVEL_BINDING",w("Binding").$new(function(A){return new Function("self","return "+A)(W)},[],W,["<main>",0]))},Opal.modules["corelib/irb"]=function(l){var I,S,N,h,_,p,f,g,ee=l.module,re=l.truthy,$=l.Kernel,P=l.defs,Q=l.hash,E=l.gvars,C=l.lambda,B=l.send,R=l.rb_plus,Y=l.const_set,H=l.klass,Z=l.def,W=l.Opal,U=l.range,L=l.eqeq,w=l.thrower,A=[],F=l.nil,k=l.$$$;I=A,S=g=[ee(A[0],"Opal")].concat(I),p=[_=ee(g[0],"IRB")].concat(S),f=l.$r(p),P(_,"$ensure_loaded",function(v){var h,M;if(re(l.loaded_features["$include?"](v)))return F;if(h="https://cdn.opalrb.com/opal/"+(re(f("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":f("RUBY_ENGINE_VERSION"))+"/"+v+".js",typeof XMLHttpRequest<"u"){var m=new XMLHttpRequest;m.open("GET",h,!1),m.send(""),M=m.responseText}else $.$raise("You need to provision "+v+" yourself in this environment");return new Function("Opal",M)(l),l.require(v),re(l.loaded_features["$include?"](v))?F:$.$raise("Could not load "+v+" for some reason")}),_.$singleton_class().$attr_accessor("output"),P(_,"$prepare_console",function z(){var v=z.$$p||F,h=this,M=F,m=F;return null==E.stdout&&(E.stdout=F),null==E.stderr&&(E.stderr=F),null==E.stdin&&(E.stdin=F),z.$$p=null,function(){try{return h["$output="](""),M=Q(E.stdout,C(function(a){return null==a&&(a=F),E.stdout=a}),E.stderr,C(function(a){return null==a&&(a=F),E.stderr=a})),re(h["$browser?"]())&&(B(M,"each",[],function d(a,r){var e=null==d.$$s?this:d.$$s,s=F;return null==a&&(a=F),null==r&&(r=F),(s=a.$dup())["$write_proc="](B(e,"proc",[],function t(n){var i=null==t.$$s?this:t.$$s;return null==n&&(n=F),i["$output="](R(i.$output(),n)),i["$output="](i.$output().$split("\n").$last(30).$join("\n")),re(n["$end_with?"]("\n"))&&i["$output="](R(i.$output(),"\n")),a.$write_proc().$call(n)},{$$s:e})),s["$tty="](!1),r.$call(s)},{$$s:h}),m=E.stdin.$read_proc(),E.stdin["$read_proc="](function(d){var a=prompt(h.$output());return null!==a?a+"\n":F})),l.yieldX(v,[])}finally{B(M,"each",[],function(a,r){return null==a&&(a=F),null==r&&(r=F),r.$call(a)}),B(E.stdin,"read_proc=",[m]),B(h,"output=",[""])}}()}),P(_,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),Y(p[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),(h=(N=H(p[0],null,"Silencer")).$$prototype).collector=h.stderr=F,Z(N,"$initialize",function(){return null==E.stderr&&(E.stderr=F),this.stderr=E.stderr}),Z(N,"$silence",function M(){var m=M.$$p||F,d=this;return M.$$p=null,function(){try{return d.collector=k("StringIO").$new(),E.stderr=d.collector,l.yieldX(m,[])}finally{E.stderr=d.stderr}}()}),Z(N,"$warnings",function(){return this.collector.$string()}),function(T,I,b){var g=H("::",null,"Binding"),q=[g].concat(b),S=l.$r(q);Z(g,"$irb",function(){try{var p=w("return"),z=F;return k(W,"IRB").$ensure_loaded("opal-replutils"),z=k(k(W,"IRB"),"Silencer").$new(),B(k(W,"IRB"),"prepare_console",[],function v(){var N=null==v.$$s?this:v.$$s;return function(){try{var h=w("break");return B(N,"loop",[],function M(){var m=null==M.$$s?this:M.$$s,d=F,a=F,r=F,e=F,s=F;for(m.$print(">> "),d=m.$gets(),re(d)||h.$throw(),a="",re(k(W,"IRB")["$browser?"]())&&m.$puts(d),re(d["$start_with?"]("ls "))?(a=d["$[]"](U(3,-1,!1)),r="ls"):L(d,"ls\n")?(a="self",r="ls"):re(d["$start_with?"]("show "))?(a=d["$[]"](U(5,-1,!1)),r="show"):(a=d,r="inspect"),e=F;;){try{B(z,"silence",[],function(){return e=l.compile(a,{irb:!0})})}catch(t){if(!l.rescue(t,[S("SyntaxError")]))throw t;s=t;try{if(re(k(k(W,"IRB"),"LINEBREAKS")["$include?"](s.$message()))){m.$print(".. "),d=m.$gets(),re(d)||p.$throw(),re(k(W,"IRB")["$browser?"]())&&m.$puts(d),a=R(a,d);continue}re(z.$warnings()["$empty?"]())?m.$warn(s.$full_message()):m.$warn(z.$warnings())}finally{l.pop_exception()}}break}return L(r,"show")&&(m.$puts(e),p.$throw()),m.$puts(k("REPLUtils").$eval_and_print(e,r,!1,m))},{$$s:N,$$ret:p})}catch(M){if(M===h)return M.$v;throw M}}()},{$$s:this})}catch(v){if(v===p)return v.$v;throw v}})}(0,0,A),l.irb=function(T){k("Binding").$new(T).$irb()},l.load_parser=function(){l.Opal.IRB.$ensure_loaded("opal-parser")},typeof l.eval>"u"&&(l.eval=function(T){return l.load_parser(),l.eval(T)}),typeof l.compile>"u"&&(l.compile=function(T,I){return l.load_parser(),l.compile(T,I)})},Opal.queue(function(l){var ee=l.Object;return ee.$require("opal/base"),ee.$require("opal/mini"),ee.$require("corelib/kernel/format"),ee.$require("corelib/string/encoding"),ee.$autoload("Math","corelib/math"),ee.$require("corelib/complex/base"),ee.$autoload("Complex","corelib/complex"),ee.$require("corelib/rational/base"),ee.$autoload("Rational","corelib/rational"),ee.$require("corelib/time"),ee.$autoload("Struct","corelib/struct"),ee.$autoload("Set","corelib/set"),ee.$autoload("Dir","corelib/dir"),ee.$autoload("File","corelib/file"),ee.$require("corelib/process/base"),ee.$autoload("Process","corelib/process"),ee.$autoload("Random","corelib/random"),ee.$require("corelib/unsupported"),ee.$require("corelib/binding"),ee.$require("corelib/irb")}),Opal.queue(function(l){var v,d,a,r,e,N,h,M,ee=l.module,re=l.defs,$=l.slice,P=l.truthy,Q=l.send,E=l.Kernel,C=l.extract_kwargs,B=l.ensure_kwargs,R=l.range,Y=l.to_a,H=l.def,Z=l.return_ivar,W=l.alias,U=l.klass,L=l.rb_minus,w=l.return_val,A=l.hash2,F=l.send2,k=l.find_super,T=l.eqeqeq,I=l.rb_ge,b=l.return_self,g=l.gvars,q=l.top,S=[],_=l.$r(S),p=l.nil,f=l.$$$;return v=S,h=[N=ee(S[0],"Native")].concat(v),M=l.$r(h),re(N,"$is_a?",function(d,a){try{return d instanceof this.$try_convert(a)}catch{return!1}}),re(N,"$try_convert",function(d,a){return null==a&&(a=p),this["$native?"](d)?d:d["$respond_to?"]("to_n")?d.$to_n():a},-2),re(N,"$convert",function(d){return this["$native?"](d)?d:d["$respond_to?"]("to_n")?d.$to_n():void this.$raise(M("ArgumentError"),d.$inspect()+" isn't native")}),re(N,"$call",function m(d,a,r){var t,e=m.$$p||p,n=this;m.$$p=null,t=$(arguments,2);var i=d[a];if(i instanceof Function){for(var c=new Array(t.length),o=0,x=t.length;o<x;o++){var j=t[o],O=n.$try_convert(j);c[o]=O===p?j:O}return e!==p&&c.push(e),n.$Native(i.apply(d,c))}return n.$Native(i)},-3),re(N,"$proc",function m(){var d=m.$$p||p;return m.$$p=null,P(d)||this.$raise(M("LocalJumpError"),"no block given"),Q(E,"proc",[],function r(e){var s,t,i,n=null==r.$$s?this:r.$$s;if(s=$(arguments),Q(t=s,"map!",[],function o(x){return null==x&&(x=p),(null==o.$$s?this:o.$$s).$Native(x)},{$$s:n}),i=n.$Native(this),this===l.global)return d.apply(n,t);var c=d.$$s;d.$$s=null;try{return d.apply(i,t)}finally{d.$$s=c}},{$$arity:-1,$$s:this})}),d=h,r=[a=ee(h[0],"Helpers")].concat(d),e=l.$r(r),H(a,"$alias_native",function s(t,n,i){var c,o,x,j,te=this;return s.$$p=null,c=$(arguments,1),o=C(c),o=B(o),c.length>0&&(x=c.shift()),null==x&&(x=t),null==(j=o.$$smap.as)&&(j=p),P(x["$end_with?"]("="))?Q(te,"define_method",[t],function ne(ae){var le=null==ne.$$s?this:ne.$$s;return null==le.native&&(le.native=p),null==ae&&(ae=p),le.native[x["$[]"](R(0,-2,!1))]=e("Native").$convert(ae),ae},{$$s:te}):P(j)?Q(te,"define_method",[t],function ne(ae){var ue,le=ne.$$p||p,ie=null==ne.$$s?this:ne.$$s,X=p;return null==ie.native&&(ie.native=p),ne.$$p=null,ue=$(arguments),X=Q(e("Native"),"call",[ie.native,x].concat(Y(ue)),le.$to_proc()),P(X)?j.$new(X.$to_n()):p},{$$arity:-1,$$s:te}):Q(te,"define_method",[t],function ne(ae){var ue,le=ne.$$p||p,ie=null==ne.$$s?this:ne.$$s;return null==ie.native&&(ie.native=p),ne.$$p=null,ue=$(arguments),Q(e("Native"),"call",[ie.native,x].concat(Y(ue)),le.$to_proc())},{$$arity:-1,$$s:te})},-2),H(a,"$native_reader",function(t){var n;return n=$(arguments),Q(n,"each",[],function o(x){var j=null==o.$$s?this:o.$$s;return null==x&&(x=p),Q(j,"define_method",[x],function O(){var te=null==O.$$s?this:O.$$s;return null==te.native&&(te.native=p),te.$Native(te.native[x])},{$$s:j})},{$$s:this})},-1),H(a,"$native_writer",function(t){var n;return n=$(arguments),Q(n,"each",[],function o(x){var j=null==o.$$s?this:o.$$s;return null==x&&(x=p),Q(j,"define_method",[x+"="],function O(te){var ne=null==O.$$s?this:O.$$s;return null==ne.native&&(ne.native=p),null==te&&(te=p),ne.$Native(ne.native[x]=te)},{$$s:j})},{$$s:this})},-1),H(a,"$native_accessor",function(t){var n,i;return n=$(arguments),Q(this,"native_reader",Y(i=n)),Q(this,"native_writer",Y(i))},-1),function(m,d){var a=ee(m,"Wrapper"),r=[a].concat(d),e=l.$r(r);H(a,"$initialize",function(t){return P(E["$native?"](t))||E.$raise(e("ArgumentError"),t.$inspect()+" isn't native"),this.native=t}),H(a,"$to_n",Z("native")),re(a,"$included",function(t){return t.$extend(e("Helpers"))})}(h[0],h),re(N,"$included",function(d){return this.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),d.$include(M("Wrapper"))}),function(z,v){var N=ee(z,"Kernel"),h=[N].concat(v),M=l.$r(h);H(N,"$native?",function(d){return null==d||!d.$$class}),H(N,"$Native",function m(d){var r=this;return m.$$p=null,P(null==d)?p:P(r["$native?"](d))?f(M("Native"),"Object").$new(d):P(d["$is_a?"](M("Array")))?Q(d,"map",[],function e(s){return null==s&&(s=p),(null==e.$$s?this:e.$$s).$Native(s)},{$$s:r}):P(d["$is_a?"](M("Proc")))?Q(r,"proc",[],function e(s){var n,t=e.$$p||p,c=null==e.$$s?this:e.$$s;return e.$$p=null,n=$(arguments),c.$Native(Q(d,"call",Y(n),t.$to_proc()))},{$$arity:-1,$$s:r}):d}),W(N,"_Array","Array"),H(N,"$Array",function m(d,a){var s,r=m.$$p||p;return m.$$p=null,s=$(arguments,1),P(this["$native?"](d))?Q(f(M("Native"),"Array"),"new",[d].concat(Y(s)),r.$to_proc()).$to_a():this.$_Array(d)},-2)}(S[0],S),function(z,v){var N=U(z,v,"Object");N.$$prototype.native=p,N.$include(f(f("Native"),"Wrapper")),H(N,"$==",function(m){return this.native===f("Native").$try_convert(m)}),H(N,"$has_key?",function(m){return l.hasOwnProperty.call(this.native,m)}),H(N,"$each",function M(m){var a,r=M.$$p||p,e=this;if(M.$$p=null,a=$(arguments),r!==p){for(var s in e.native)l.yieldX(r,[s,e.native[s]]);return e}return Q(e,"method_missing",["each"].concat(Y(a)))},-1),H(N,"$[]",function(m){var a=this.native[m];return a instanceof Function?a:f("Native").$call(this.native,m)}),H(N,"$[]=",function(m,d){var r;return r=f("Native").$try_convert(d),this.native[m]=P(r===p)?d:r}),H(N,"$merge!",function(m){for(var a in m=f("Native").$convert(m))this.native[a]=m[a];return this}),H(N,"$respond_to?",function(m,d){return null==d&&(d=!1),E.$instance_method("respond_to?").$bind(this).$call(m,d)},-2),H(N,"$respond_to_missing?",function(m,d){return null==d&&(d=!1),l.hasOwnProperty.call(this.native,m)},-2),H(N,"$method_missing",function M(m,d){var e,s,a=M.$$p||p;return M.$$p=null,e=$(arguments,1),"="===m.charAt(m.length-1)?(s=[m.$slice(0,L(m.$length(),1)),e["$[]"](0)],Q(this,"[]=",s),s[s.length-1]):Q(f("Native"),"call",[this.native,m].concat(Y(e)),a.$to_proc())},-2),H(N,"$nil?",w(!1)),H(N,"$is_a?",function(m){return l.is_a(this,m)}),H(N,"$instance_of?",function(m){return this.$$class===m}),H(N,"$class",function(){return this.$$class}),H(N,"$to_a",function M(m){var d=M.$$p||p;return M.$$p=null,null==m&&(m=A([],{})),Q(f(f("Native"),"Array"),"new",[this.native,m],d.$to_proc()).$to_a()},-1),H(N,"$inspect",function(){return"#<Native:"+String(this.native)+">"}),W(N,"include?","has_key?"),W(N,"key?","has_key?"),W(N,"kind_of?","is_a?"),W(N,"member?","has_key?")}(_("Native"),_("BasicObject")),function(z,v,N){var h=U(z,null,"Array"),M=[h].concat(N),m=l.$r(M),d=h.$$prototype;d.named=d.native=d.get=d.block=d.set=d.length=p,h.$include(f(m("Native"),"Wrapper")),h.$include(m("Enumerable")),H(h,"$initialize",function a(r,e){var s=a.$$p||p,t=this,n=p;return a.$$p=null,null==e&&(e=A([],{})),F(t,k(t,"initialize",a,!1,!0),"initialize",[r],null),t.get=P(n=e["$[]"]("get"))?n:e["$[]"]("access"),t.named=e["$[]"]("named"),t.set=P(n=e["$[]"]("set"))?n:e["$[]"]("access"),t.length=P(n=e["$[]"]("length"))?n:"length",t.block=s,P(null==t.$length())?t.$raise(m("ArgumentError"),"no length found on the array-like object"):p},-2),H(h,"$each",function a(){var r=a.$$p||p,e=this;if(a.$$p=null,!P(r))return e.$enum_for("each");for(var s=0,t=e.$length();s<t;s++)l.yield1(r,e["$[]"](s));return e}),H(h,"$[]",function(r){var s,t,e=this;return s=T(m("String"),t=r)||T(m("Symbol"),t)?P(e.named)?e.native[e.named](r):e.native[r]:T(m("Integer"),t)?P(e.get)?e.native[e.get](r):e.native[r]:p,P(s)?P(e.block)?e.block.$call(s):e.$Native(s):p}),H(h,"$[]=",function(r,e){var s=this;return P(s.set)?s.native[s.set](r,m("Native").$convert(e)):s.native[r]=m("Native").$convert(e)}),H(h,"$last",function(r){var e=this,s=p,t=p;if(null==r&&(r=p),P(r)){for(s=L(e.$length(),1),t=[];P(I(s,0));)t["$<<"](e["$[]"](s)),s=L(s,1);return t}return e["$[]"](L(e.$length(),1))},-1),H(h,"$length",function(){return this.native[this.length]}),H(h,"$inspect",function(){return this.$to_a().$inspect()}),W(h,"to_ary","to_a")}(_("Native"),0,S),function(z,v){var N=U(z,null,"Numeric");H(N,"$to_n",function(){return this.valueOf()})}(S[0]),function(z,v){var N=U(z,null,"Proc");H(N,"$to_n",b)}(S[0]),function(z,v){var N=U(z,null,"String");H(N,"$to_n",function(){return this.valueOf()})}(S[0]),function(z,v){var N=U(z,null,"Regexp");H(N,"$to_n",function(){return this.valueOf()})}(S[0]),function(z,v){var N=U(z,null,"MatchData");H(N,"$to_n",Z("matches"))}(S[0]),function(z,v,N){var h=U(z,null,"Struct"),M=[h].concat(N),m=l.$r(M);H(h,"$to_n",function(){var r=p;return r={},Q(this,"each_pair",[],function(s,t){return null==s&&(s=p),null==t&&(t=p),r[s]=m("Native").$try_convert(t,t)}),r})}(S[0],0,S),function(z,v,N){var h=U(z,null,"Array"),M=[h].concat(N),m=l.$r(M);H(h,"$to_n",function(){for(var r=[],e=0,s=this.length;e<s;e++){var t=this[e];r.push(m("Native").$try_convert(t,t))}return r})}(S[0],0,S),function(z,v){var N=U(z,null,"Boolean");H(N,"$to_n",function(){return this.valueOf()})}(S[0]),function(z,v){var N=U(z,null,"Time");H(N,"$to_n",b)}(S[0]),function(z,v){var N=U(z,null,"NilClass");H(N,"$to_n",function(){return null})}(S[0]),P(_("Hash")["$method_defined?"]("_initialize"))||function(z,v,N){var h=U(z,null,"Hash"),M=[h].concat(N),m=l.$r(M);W(h,"_initialize","initialize"),H(h,"$initialize",function d(a){var r=d.$$p||p,e=this;if(d.$$p=null,null!=a&&(void 0===a.constructor||a.constructor===Object)){var n,i,s=e.$$smap,t=e.$$keys;for(n in a)!(i=a[n])||void 0!==i.constructor&&i.constructor!==Object?i&&i.$$is_array?(i=i.map(function(c){return!c||void 0!==c.constructor&&c.constructor!==Object?e.$Native(c):m("Hash").$new(c)}),s[n]=i):s[n]=e.$Native(i):s[n]=m("Hash").$new(i),t.push(n);return e}return Q(e,"_initialize",[a],r.$to_proc())},-1),H(h,"$to_n",function(){for(var t,n,r={},e=this.$$keys,s=this.$$smap,i=0,c=e.length;i<c;i++)n=(t=e[i]).$$is_string?s[t]:(t=t.key).value,r[t]=m("Native").$try_convert(n,n);return r})}(S[0],0,S),function(z,v){var N=U(z,null,"Module");H(N,"$native_module",function(){return l.global[this.$name()]=this})}(S[0]),function(z,v,N){var h=U(z,null,"Class"),M=[h].concat(N),m=l.$r(M);H(h,"$native_alias",function(a,r){var e=this,s=e.prototype[l.jsid(r)];s||e.$raise(m("NameError").$new("undefined method `"+r+"' for class `"+e.$inspect()+"'",r)),e.prototype[a]=s}),H(h,"$native_class",function(){var a=this;return a.$native_module(),a.new=a.$new})}(S[0],0,S),g.$=g.global=q.$Native(l.global)}),Opal.modules.strscan=function(l){var W,U,L,w,A,re=l.def,$=l.truthy,P=l.eqeqeq,Q=l.Opal,E=l.return_ivar,C=l.send,B=l.alias,R=[],Y=l.nil;return W=R,L=[U=(0,l.klass)(R[0],null,"StringScanner")].concat(W),w=l.$r(L),(A=U.$$prototype).pos=A.string=A.working=A.matched=A.prev_pos=A.match=Y,U.$attr_reader("pos","matched"),re(U,"$initialize",function(k){var T=this;return T.string=k,T.pos=0,T.matched=Y,T.working=k,T.match=[]}),U.$attr_reader("string"),re(U,"$beginning_of_line?",function(){var k=this;return 0===k.pos||"\n"===k.string.charAt(k.pos-1)}),re(U,"$scan",function(k){var T=this,I=(k=T.$anchor(k)).exec(T.working);return null==I?T.matched=Y:(T.prev_pos=T.pos,T.pos+=I[0].length,T.working=T.working.substring(I[0].length),T.matched=I[0],T.match=I,I[0])}),re(U,"$scan_until",function(k){var T=this;k=T.$anchor(k);for(var I=T.working,b=0;I.length!=b;++b){var g=k.exec(I.substr(b));if(null!==g){var q=b+g[0].length,S=I.substr(0,q);return T.matched=g[0],T.match=g,T.prev_pos=T.pos+b,T.pos+=q,T.working=I.substr(q),S}}return T.matched=Y}),re(U,"$[]",function(k){var I;if($(this.match["$empty?"]()))return Y;P(w("Symbol"),I=k)?k=k.$to_s():P(w("String"),I)||(k=Q["$coerce_to!"](k,w("Integer"),"to_int"));var b=this.match;return k<0&&(k+=b.length),k<0||k>=b.length||null==b[k]?Y:b[k]}),re(U,"$check",function(k){var T=this,I=(k=T.$anchor(k)).exec(T.working);return T.matched=null==I?Y:I[0]}),re(U,"$check_until",function(k){var T=this,I=T.prev_pos,b=T.pos,g=T.working,q=T.$scan_until(k);return T.prev_pos=I,T.pos=b,T.working=g,q}),re(U,"$peek",function(k){return this.working.substring(0,k)}),re(U,"$eos?",function(){return 0===this.working.length}),re(U,"$exist?",function(k){var I=k.exec(this.working);return null==I?Y:0==I.index?0:I.index+1}),re(U,"$skip",function(k){var T=this,I=(k=T.$anchor(k)).exec(T.working);if(null==I)return T.match=[],T.matched=Y;var b=I[0],g=b.length;return T.matched=b,T.match=I,T.prev_pos=T.pos,T.pos+=g,T.working=T.working.substring(g),g}),re(U,"$skip_until",function(k){var I=this.$scan_until(k);return I===Y?Y:(this.matched=I.substr(-1),I.length)}),re(U,"$get_byte",function(){var k=this,T=Y;return k.pos<k.string.length?(k.prev_pos=k.pos,k.pos+=1,T=k.matched=k.working.substring(0,1),k.working=k.working.substring(1)):k.matched=Y,T}),re(U,"$match?",function(k){var T=this,I=(k=T.$anchor(k)).exec(T.working);return null==I?Y:(T.prev_pos=T.pos,I[0].length)}),re(U,"$pos=",function(k){var T=this;return k<0&&(k+=T.string.$length()),T.pos=k,T.working=T.string.slice(k)}),re(U,"$matched_size",function(){return this.matched===Y?Y:this.matched.length}),re(U,"$post_match",function(){var k=this;return k.matched===Y?Y:k.string.substr(k.pos)}),re(U,"$pre_match",function(){var k=this;return k.matched===Y?Y:k.string.substr(0,k.prev_pos)}),re(U,"$reset",function(){var k=this;return k.working=k.string,k.matched=Y,k.pos=0}),re(U,"$rest",E("working")),re(U,"$rest?",function(){return 0!==this.working.length}),re(U,"$rest_size",function(){return this.$rest().$size()}),re(U,"$terminate",function(){var k,T=this;return T.match=Y,k=[T.string.$length()],C(T,"pos=",k),k[k.length-1]}),re(U,"$unscan",function(){var k=this;return k.pos=k.prev_pos,k.prev_pos=Y,k.match=Y,k}),B(U,"bol?","beginning_of_line?"),B(U,"getch","get_byte"),U.$private(),re(U,"$anchor",function(k){var T=k.toString().match(/\/([^\/]+)$/);return T=T?T[1]:void 0,new RegExp("^(?:"+k.source+")",T)})},Opal.queue(function(l){var R,Y,W,H,ee=l.klass,re=l.def,$=l.module,P=l.top,Q=[],E=l.$r(Q),C=l.nil;return P.$require("strscan"),Y=Q,[H=ee(Q[0],null,"Dir")].concat(Y),W=l.get_singleton_class(H),re(W,"$[]",function(){return[]}),R=$(Q[0],"StringScannerPatch"),re(R,"$scan_until",function(H){var Z=this;H=(Z=this).$anchor(H);for(var L,W=Z.pos,U=Z.working;;){var w=0===U.length;if(L=H.exec(U),W+=1,U=U.substr(1),null!=L)return Z.matched=Z.string.substr(Z.pos,W-Z.pos-1+L[0].length),Z.prev_pos=W-1,Z.pos=W,Z.working=U.substr(L[0].length-1),Z.matched;if(w)return Z.matched=C}}),E("StringScanner").$prepend(E("StringScannerPatch")),l.top.$__dir__=()=>"/",C})},8823:(l,ee,re)=>{re(3986),Opal.modules["bcdice/arithmetic/node"]=function($){var b,_,v,a,r,h,M,f,q,P=$.module,Q=$.klass,E=$.def,C=$.thrower,B=$.return_ivar,R=$.send2,Y=$.find_super,H=$.eqeq,Z=$.const_set,W=$.eqeqeq,U=$.rb_divide,L=$.truthy,w=$.assign_ivar,A=$.alias,F=[],k=$.nil,T=$.$$$;return b=F,_=q=[P(F[0],"BCDice")].concat(b),v=f=[P(q[0],"Arithmetic")].concat(_),h=[P(f[0],"Node")].concat(v),M=$.$r(h),(r=(a=Q(h[0],null,"BinaryOp")).$$prototype).lhs=r.rhs=r.op=k,E(a,"$initialize",function(s,t,n){var i=this;return i.lhs=s,i.op=t,i.rhs=n}),E(a,"$eval",function(s){try{C("eval_return");var c,n=this,i=k;return i=n.lhs.$eval(s),c=n.rhs.$eval(s),i.$send(n.op,c)}catch(o){if(o===$.t_eval_return)return o.$v;throw o}}),E(a,"$output",function(){var s=this;return""+s.lhs.$output()+s.op+s.rhs.$output()}),E(a,"$s_exp",function(){var s=this;return"("+s.$op_for_s_exp()+" "+s.lhs.$s_exp()+" "+s.rhs.$s_exp()+")"}),E(a,"$op_for_s_exp",B("op")),function(m,d,a){var r=Q(m,d,"DivideBase"),e=[r].concat(a),s=$.$r(e),t=r.$$prototype;t.lhs=t.rhs=t.op=k,E(r,"$initialize",function n(i,c){return n.$$p=null,R(this,Y(this,"initialize",n,!1,!0),"initialize",[i,"/",c],null)}),E(r,"$eval",function(i){try{C("eval_return");var x,j,o=this;return x=o.lhs.$eval(i),j=o.rhs.$eval(i),H(j,0)&&o.$raise(s("ZeroDivisionError")),o.$divide_and_round(x,j,i)}catch(O){if(O===$.t_eval_return)return O.$v;throw O}}),E(r,"$output",function n(){var i=n.$$p||k,c=this;return n.$$p=null,""+R(c,Y(c,"output",n,!1,!0),"output",[],i)+c.$rounding_method()}),r.$private(),E(r,"$rounding_method",function(){return T(this.$class(),"ROUNDING_METHOD")}),E(r,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),E(r,"$divide_and_round",function(i,c,o){return this.$raise(s("NotImplementedError"))})}(h[0],M("BinaryOp"),h),function(m,d,a){var r=Q(m,d,"DivideWithGameSystemDefault"),e=[r].concat(a),s=$.$r(e);Z(e[0],"ROUNDING_METHOD",""),r.$private(),E(r,"$divide_and_round",function(n,i,c){var o,x=k;return W(T(s("RoundType"),"CEIL"),o=c)?U(n.$to_f(),i).$ceil():W(T(s("RoundType"),"ROUND"),o)?(x=U(n.$to_f(),i),L(x["$negative?"]())?x.$abs().$round()["$-@"]():x.$round()):U(n,i).$floor()})}(h[0],M("DivideBase"),h),function(m,d,a){var r=Q(m,d,"DivideWithCeil"),e=[r].concat(a);Z(e[0],"ROUNDING_METHOD","C"),r.$private(),E(r,"$divide_and_round",function(t,n,i){return U(t.$to_f(),n).$ceil()})}(h[0],M("DivideBase"),h),function(m,d,a){var r=Q(m,d,"DivideWithRound"),e=[r].concat(a);Z(e[0],"ROUNDING_METHOD","R"),r.$private(),E(r,"$divide_and_round",function(t,n,i){var c=k;return c=U(t.$to_f(),n),L(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()})}(h[0],M("DivideBase"),h),function(m,d,a){var r=Q(m,d,"DivideWithFloor"),e=[r].concat(a);Z(e[0],"ROUNDING_METHOD","F"),r.$private(),E(r,"$divide_and_round",function(t,n,i){return U(t,n).$floor()})}(h[0],M("DivideBase"),h),function(m,d){var a=Q(m,null,"Negative");a.$$prototype.body=k,E(a,"$initialize",w("body")),E(a,"$eval",function(s){try{return C("eval_return"),this.body.$eval(s)["$-@"]()}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),E(a,"$output",function(){return"-"+this.body.$output()}),E(a,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(h[0]),function(m,d){var a=Q(m,null,"Parenthesis");a.$$prototype.expr=k,E(a,"$initialize",w("expr")),E(a,"$eval",function(s){try{return C("eval_return"),this.expr.$eval(s)}catch(i){if(i===$.t_eval_return)return i.$v;throw i}}),E(a,"$output",function(){return"("+this.expr.$output()+")"}),E(a,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(h[0]),function(m,d){var a=Q(m,null,"Number");return a.$$prototype.value=k,E(a,"$initialize",w("value")),E(a,"$eval",B("value")),E(a,"$output",function(){return this.value.$to_s()}),A(a,"s_exp","output")}(h[0])},Opal.modules["racc/parser"]=function($){var z,N,h,P=$.module,Q=$.klass,E=$.truthy,C=$.const_set,B=$.defs,R=$.gvars,Y=$.rb_lt,H=$.def,Z=$.to_ary,W=$.send,U=$.neqeq,L=$.rb_plus,w=$.eqeq,A=$.rb_ge,F=$.rb_gt,k=$.rb_minus,T=$.rb_le,I=$.rb_times,b=$.assign_ivar_val,q=[],S=$.$r(q),_=$.nil,p=$.$$$;return z=q,N=[P(q[0],"Racc")].concat(z),h=$.$r(N),Q(N[0],h("StandardError"),"ParseError"),E(p("::","ParseError","skip_raise")?"constant":_)||C(q[0],"ParseError",p(S("Racc"),"ParseError")),function(f,z){var a,r,e,s,t,h=[P(f,"Racc")].concat(z),M=$.$r(h);return E(M("Racc_No_Extensions","skip_raise")?"constant":_)||C(h[0],"Racc_No_Extensions",!1),a=h,e=[r=Q(h[0],null,"Parser")].concat(a),s=$.$r(e),(t=r.$$prototype).yydebug=t.racc_debug_out=t.racc_error_status=t.racc_t=t.racc_vstack=t.racc_val=t.racc_state=t.racc_tstack=_,C(e[0],"Racc_Runtime_Version","1.4.6"),C(e[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),C(e[0],"Racc_Runtime_Core_Version_R","1.4.6"),C(e[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),C(e[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),C(e[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),C(e[0],"Racc_Runtime_Core_Version",s("Racc_Runtime_Core_Version_R")),C(e[0],"Racc_Runtime_Core_Revision",s("Racc_Runtime_Core_Revision_R")),C(e[0],"Racc_Runtime_Type","ruby"),B(s("Parser"),"$racc_runtime_type",function(){return s("Racc_Runtime_Type")}),H(r,"$_racc_setup",function(){var i,c,o=this,x=_,j=_;return null==R.stderr&&(R.stderr=_),E(p(o.$class(),"Racc_debug_parser"))||(o.yydebug=!1),E(null!=(i=o.yydebug)&&i!==_?"instance-variable":_)||(o.yydebug=!1),E(o.yydebug)&&(E(null!=(c=o.racc_debug_out)&&c!==_?"instance-variable":_)||(o.racc_debug_out=R.stderr),o.racc_debug_out=E(x=o.racc_debug_out)?x:R.stderr),j=p(o.$class(),"Racc_arg"),E(Y(j.$size(),14))&&j["$[]="](13,!0),j}),H(r,"$_racc_init_sysvars",function(){var i=this;return i.racc_state=[0],i.racc_tstack=[],i.racc_vstack=[],i.racc_t=_,i.racc_val=_,i.racc_read_next=!0,i.racc_user_yyerror=!1,i.racc_error_status=0}),H(r,"$do_parse",function(){return this.$__send__(s("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),H(r,"$next_token",function(){return this.$raise(s("NotImplementedError"),this.$class()+"#next_token is not defined")}),H(r,"$_racc_do_parse_rb",function(i,c){var o,j=this,O=_,te=_,ne=_,ae=_,oe=_,ue=_,ie=_,X=_;return o=Z(i),O=null==o[0]?_:o[0],te=null==o[1]?_:o[1],ne=null==o[2]?_:o[2],ae=null==o[3]?_:o[3],oe=null==o[10]?_:o[10],j.$_racc_init_sysvars(),ue=ie=X=_,W(j,"catch",["racc_end_parse"],function D(){var V,J,u=null==D.$$s?this:D.$$s,y=_;for(null==u.racc_state&&(u.racc_state=_),null==u.racc_read_next&&(u.racc_read_next=_),null==u.racc_t&&(u.racc_t=_),null==u.yydebug&&(u.yydebug=_),null==u.racc_val&&(u.racc_val=_);E(!0);)for(E(X=ae["$[]"](u.racc_state["$[]"](-1)))?(E(u.racc_read_next)&&U(u.racc_t,0)&&(J=u.$next_token(),V=Z(J),ue=null==V[0]?_:V[0],u.racc_val=null==V[1]?_:V[1],u.racc_t=E(ue)?E(y=oe["$[]"](ue))?y:1:0,E(u.yydebug)&&u.$racc_read_token(u.racc_t,ue,u.racc_val),u.racc_read_next=!1),X=L(X,u.racc_t),E(A(X,0))&&E(ie=O["$[]"](X))&&w(te["$[]"](X),u.racc_state["$[]"](-1))||(ie=ne["$[]"](u.racc_state["$[]"](-1)))):ie=ne["$[]"](u.racc_state["$[]"](-1));E(ie=u.$_racc_evalact(ie,i)););},{$$s:j})}),H(r,"$yyparse",function(i,c){return this.$__send__(s("Racc_YY_Parse_Method"),i,c,this.$_racc_setup(),!0)}),H(r,"$_racc_yyparse_rb",function(i,c,o,x){var j,ne=_,ae=_,le=_,oe=_,ie=_,X=_,D=_;return j=Z(o),ne=null==j[0]?_:j[0],ae=null==j[1]?_:j[1],le=null==j[2]?_:j[2],oe=null==j[3]?_:j[3],ie=null==j[10]?_:j[10],this.$_racc_init_sysvars(),X=_,D=_,W(this,"catch",["racc_end_parse"],function V(){var J=null==V.$$s?this:V.$$s;for(null==J.racc_state&&(J.racc_state=_);!E(D=oe["$[]"](J.racc_state["$[]"](-1)));)for(;E(X=J.$_racc_evalact(le["$[]"](J.racc_state["$[]"](-1)),o)););return W(i,"__send__",[c],function u(y,K){var G=null==u.$$s?this:u.$$s,se=_,$e=_;for(null==G.racc_t&&(G.racc_t=_),null==G.racc_state&&(G.racc_state=_),null==G.racc_read_next&&(G.racc_read_next=_),null==y&&(y=_),null==K&&(K=_),G.racc_t=E(y)?E(se=ie["$[]"](y))?se:1:0,G.racc_val=K,G.racc_read_next=!1,D=L(D,G.racc_t),E(A(D,0))&&E(X=ne["$[]"](D))&&w(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));E(X=G.$_racc_evalact(X,o)););for(;E(E(se=E($e=(D=oe["$[]"](G.racc_state["$[]"](-1)))["$!"]())?$e:G.racc_read_next["$!"]())?se:G.racc_t["$=="](0));)for(E(D)&&E(D=L(D,G.racc_t))&&E(A(D,0))&&E(X=ne["$[]"](D))&&w(ae["$[]"](D),G.racc_state["$[]"](-1))||(X=le["$[]"](G.racc_state["$[]"](-1)));E(X=G.$_racc_evalact(X,o)););},{$$s:J})},{$$s:this})}),H(r,"$_racc_evalact",function(i,c){var o,le,j=this,O=_,te=_,ae=_,oe=_,ue=_,ie=_;if(O=null==(o=Z(c))[0]?_:o[0],te=null==o[1]?_:o[1],ae=null==o[3]?_:o[3],le=null==o[11]?_:o[11],oe=null==o[12]?_:o[12],E(F(i,0))&&E(Y(i,le)))E(F(j.racc_error_status,0))&&(w(j.racc_t,1)||(j.racc_error_status=k(j.racc_error_status,1))),j.racc_vstack.$push(j.racc_val),j.racc_state.$push(i),j.racc_read_next=!0,E(j.yydebug)&&(j.racc_tstack.$push(j.racc_t),j.$racc_shift(j.racc_t,j.racc_tstack,j.racc_vstack));else if(E(Y(i,0))&&E(F(i,oe["$-@"]()))){if(ue=W(j,"catch",["racc_jump"],function X(){var D=null==X.$$s?this:X.$$s;return null==D.racc_state&&(D.racc_state=_),D.racc_state.$push(D.$_racc_do_reduce(c,i)),!1},{$$s:j}),E(ue))switch(ue.valueOf()){case 1:return j.racc_user_yyerror=!0,oe["$-@"]();case 2:return le;default:j.$raise("[Racc Bug] unknown jump code")}}else if(w(i,le))E(j.yydebug)&&j.$racc_accept(),j.$throw("racc_end_parse",j.racc_vstack["$[]"](0));else{if(w(i,oe["$-@"]())){switch(j.racc_error_status.valueOf()){case 0:E(c["$[]"](21))||j.$on_error(j.racc_t,j.racc_val,j.racc_vstack);break;case 3:w(j.racc_t,0)&&j.$throw("racc_end_parse",_),j.racc_read_next=!0}for(j.racc_user_yyerror=!1,j.racc_error_status=3;E(!0)&&!(E(ie=ae["$[]"](j.racc_state["$[]"](-1)))&&(ie=L(ie,1),E(A(ie,0))&&E(i=O["$[]"](ie))&&w(te["$[]"](ie),j.racc_state["$[]"](-1))));)E(T(j.racc_state.$size(),1))&&j.$throw("racc_end_parse",_),j.racc_state.$pop(),j.racc_vstack.$pop(),E(j.yydebug)&&(j.racc_tstack.$pop(),j.$racc_e_pop(j.racc_state,j.racc_tstack,j.racc_vstack));return i}j.$raise("[Racc Bug] unknown action "+i.$inspect())}return E(j.yydebug)&&j.$racc_next_state(j.racc_state["$[]"](-1),j.racc_state),_}),H(r,"$_racc_do_reduce",function(i,c){var o,oe,ie,y,K,G,ce,j=this,te=_,ne=_,ae=_,le=_,ue=_,X=_,D=_,V=_,J=_,u=_,se=_,$e=_,fe=_;return te=null==(o=Z(i))[4]?_:o[4],ne=null==o[5]?_:o[5],ae=null==o[6]?_:o[6],le=null==o[7]?_:o[7],oe=null==o[8]?_:o[8],ue=null==o[9]?_:o[9],ie=null==o[13]?_:o[13],X=j.racc_state,D=j.racc_vstack,V=j.racc_tstack,J=I(c,-3),u=ue["$[]"](J),y=ue["$[]"](L(J,1)),K=ue["$[]"](L(J,2)),G=[],E(j.yydebug)&&(se=V["$[]"](u["$-@"](),u)),$e=D["$[]"](u["$-@"](),u),E(j.yydebug)&&V["$[]="](u["$-@"](),u,G),D["$[]="](u["$-@"](),u,G),X["$[]="](u["$-@"](),u,G),E(ie)?D.$push(j.$__send__(K,$e,D,$e["$[]"](0))):D.$push(j.$__send__(K,$e,D)),V.$push(y),E(j.yydebug)&&j.$racc_reduce(se,y,V,D),ce=k(y,oe),E(J=le["$[]"](ce))&&(J=L(J,X["$[]"](-1)),E(A(J,0))&&E(fe=te["$[]"](J))&&w(ne["$[]"](J),ce))?fe:ae["$[]"](ce)}),H(r,"$on_error",function(i,c,o){var j,x=this;return x.$raise(s("ParseError"),x.$sprintf("\nparse error on value %s (%s)",c.$inspect(),E(j=x.$token_to_str(i))?j:"?"))}),H(r,"$yyerror",function(){return this.$throw("racc_jump",1)}),H(r,"$yyaccept",function(){return this.$throw("racc_jump",2)}),H(r,"$yyerrok",b("racc_error_status",0)),H(r,"$racc_read_token",function(i,c,o){var x=this;return x.racc_debug_out.$print("read    "),x.racc_debug_out.$print(c.$inspect(),"(",x.$racc_token2str(i),") "),x.racc_debug_out.$puts(o.$inspect()),x.racc_debug_out.$puts()}),H(r,"$racc_shift",function(i,c,o){var x=this;return x.racc_debug_out.$puts("shift   "+x.$racc_token2str(i)),x.$racc_print_stacks(c,o),x.racc_debug_out.$puts()}),H(r,"$racc_reduce",function(i,c,o,x){var j=this,O=_;return(O=j.racc_debug_out).$print("reduce "),E(i["$empty?"]())?O.$print(" <none>"):W(i,"each",[],function te(ne){return null==ne&&(ne=_),O.$print(" ",(null==te.$$s?this:te.$$s).$racc_token2str(ne))},{$$s:j}),O.$puts(" --\x3e "+j.$racc_token2str(c)),j.$racc_print_stacks(o,x),j.racc_debug_out.$puts()}),H(r,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),H(r,"$racc_e_pop",function(i,c,o){var x=this;return x.racc_debug_out.$puts("error recovering mode: pop token"),x.$racc_print_states(i),x.$racc_print_stacks(c,o),x.racc_debug_out.$puts()}),H(r,"$racc_next_state",function(i,c){var o=this;return o.racc_debug_out.$puts("goto    "+i),o.$racc_print_states(c),o.racc_debug_out.$puts()}),H(r,"$racc_print_stacks",function(i,c){var x=_;return(x=this.racc_debug_out).$print("        ["),W(i,"each_index",[],function j(O){return null==O&&(O=_),x.$print(" (",(null==j.$$s?this:j.$$s).$racc_token2str(i["$[]"](O))," ",c["$[]"](O).$inspect(),")")},{$$s:this}),x.$puts(" ]")}),H(r,"$racc_print_states",function(i){var o=_;return(o=this.racc_debug_out).$print("        ["),W(i,"each",[],function(j){return null==j&&(j=_),o.$print(" ",j)}),o.$puts(" ]")}),H(r,"$racc_token2str",function(i){var o;return E(o=p(this.$class(),"Racc_token_to_s_table")["$[]"](i))?o:this.$raise("[Racc Bug] can't convert token "+i+" to string")}),H(r,"$token_to_str",function(i){return p(this.$class(),"Racc_token_to_s_table")["$[]"](i)})}(q[0],q)},Opal.modules.strscan=function($){var w,A,F,k,T,Q=$.def,E=$.truthy,C=$.eqeqeq,B=$.Opal,R=$.return_ivar,Y=$.send,H=$.alias,Z=[],W=$.nil;return w=Z,F=[A=(0,$.klass)(Z[0],null,"StringScanner")].concat(w),k=$.$r(F),(T=A.$$prototype).pos=T.string=T.working=T.matched=T.prev_pos=T.match=W,A.$attr_reader("pos","matched"),Q(A,"$initialize",function(b){var g=this;return g.string=b,g.pos=0,g.matched=W,g.working=b,g.match=[]}),A.$attr_reader("string"),Q(A,"$beginning_of_line?",function(){var b=this;return 0===b.pos||"\n"===b.string.charAt(b.pos-1)}),Q(A,"$scan",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?g.matched=W:(g.prev_pos=g.pos,g.pos+=q[0].length,g.working=g.working.substring(q[0].length),g.matched=q[0],g.match=q,q[0])}),Q(A,"$scan_until",function(b){var g=this;b=g.$anchor(b);for(var q=g.working,S=0;q.length!=S;++S){var _=b.exec(q.substr(S));if(null!==_){var p=S+_[0].length,f=q.substr(0,p);return g.matched=_[0],g.match=_,g.prev_pos=g.pos+S,g.pos+=p,g.working=q.substr(p),f}}return g.matched=W}),Q(A,"$[]",function(b){var q;if(E(this.match["$empty?"]()))return W;C(k("Symbol"),q=b)?b=b.$to_s():C(k("String"),q)||(b=B["$coerce_to!"](b,k("Integer"),"to_int"));var S=this.match;return b<0&&(b+=S.length),b<0||b>=S.length||null==S[b]?W:S[b]}),Q(A,"$check",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return g.matched=null==q?W:q[0]}),Q(A,"$check_until",function(b){var g=this,q=g.prev_pos,S=g.pos,_=g.working,p=g.$scan_until(b);return g.prev_pos=q,g.pos=S,g.working=_,p}),Q(A,"$peek",function(b){return this.working.substring(0,b)}),Q(A,"$eos?",function(){return 0===this.working.length}),Q(A,"$exist?",function(b){var q=b.exec(this.working);return null==q?W:0==q.index?0:q.index+1}),Q(A,"$skip",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);if(null==q)return g.match=[],g.matched=W;var S=q[0],_=S.length;return g.matched=S,g.match=q,g.prev_pos=g.pos,g.pos+=_,g.working=g.working.substring(_),_}),Q(A,"$skip_until",function(b){var q=this.$scan_until(b);return q===W?W:(this.matched=q.substr(-1),q.length)}),Q(A,"$get_byte",function(){var b=this,g=W;return b.pos<b.string.length?(b.prev_pos=b.pos,b.pos+=1,g=b.matched=b.working.substring(0,1),b.working=b.working.substring(1)):b.matched=W,g}),Q(A,"$match?",function(b){var g=this,q=(b=g.$anchor(b)).exec(g.working);return null==q?W:(g.prev_pos=g.pos,q[0].length)}),Q(A,"$pos=",function(b){var g=this;return b<0&&(b+=g.string.$length()),g.pos=b,g.working=g.string.slice(b)}),Q(A,"$matched_size",function(){return this.matched===W?W:this.matched.length}),Q(A,"$post_match",function(){var b=this;return b.matched===W?W:b.string.substr(b.pos)}),Q(A,"$pre_match",function(){var b=this;return b.matched===W?W:b.string.substr(0,b.prev_pos)}),Q(A,"$reset",function(){var b=this;return b.working=b.string,b.matched=W,b.pos=0}),Q(A,"$rest",R("working")),Q(A,"$rest?",function(){return 0!==this.working.length}),Q(A,"$rest_size",function(){return this.$rest().$size()}),Q(A,"$terminate",function(){var b,g=this;return g.match=W,b=[g.string.$length()],Y(g,"pos=",b),b[b.length-1]}),Q(A,"$unscan",function(){var b=this;return b.pos=b.prev_pos,b.prev_pos=W,b.match=W,b}),H(A,"bol?","beginning_of_line?"),H(A,"getch","get_byte"),A.$private(),Q(A,"$anchor",function(b){var g=b.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+b.source+")",g)})},Opal.modules["bcdice/normalize"]=function($){var H,L,W,P=$.module,Q=$.eqeqeq,E=$.def,C=$.eqeq,B=[],R=$.nil;return H=B,W=[P(B[0],"BCDice")].concat(H),(L=P(W[0],"Normalize")).$module_function(),E(L,"$comparison_operator",function(A){var F;return Q(/<=|=</,F=A)?"<=":Q(/>=|=>/,F)?">=":Q(/<>|!=|=!/,F)?"!=":Q(/</,F)?"<":Q(/>/,F)?">":Q(/=/,F)?"==":R}),E(L,"$target_number",function(A){return C(A,"?")?A:A.$to_i()})},Opal.modules["bcdice/common_command/lexer"]=function($){var U,F,g,q,S,_,T,w,P=$.module,Q=$.klass,E=$.const_set,C=$.hash2,B=$.truthy,R=$.def,Y=$.top,H=[],Z=$.nil;return Y.$require("strscan"),Y.$require("bcdice/normalize"),U=H,F=w=[P(H[0],"BCDice")].concat(U),g=T=[P(w[0],"CommonCommand")].concat(F),S=[q=Q(T[0],null,"Lexer")].concat(g),_=$.$r(S),q.$$prototype.scanner=Z,E(S[0],"SYMBOLS",C(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),R(q,"$initialize",function(z){var N;return z=B(N=z.$split(" ",2).$first())?N:"",this.scanner=_("StringScanner").$new(z)}),R(q,"$next_token",function(){var z=this,v=Z,N=Z,h=Z,m=Z;return B(z.scanner["$eos?"]())?[!1,"$"]:B(v=z.scanner.$scan(/\d+/))?["NUMBER",v.$to_i()]:B(N=z.scanner.$scan(/[<>!=]+/))?["CMP_OP",_("Normalize").$comparison_operator(N)]:(h=z.scanner.$getch().$upcase(),[B(m=_("SYMBOLS")["$[]"](h))?m:h.$to_sym(),h])}),R(q,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/arithmetic/parser"]=function($){var w,T,_,h,M,m,d,a,r,e,s,t,c,p,v,N,b,g,F,P=$.module,Q=$.klass,E=$.defs,C=$.def,B=$.hash,R=$.const_set,Y=$.truthy,H=$.top,Z=[],W=$.nil,U=$.$$$;return H.$require("racc/parser.rb"),H.$require("bcdice/common_command/lexer"),H.$require("bcdice/arithmetic/node"),w=Z,T=F=[P(Z[0],"BCDice")].concat(w),b=[P(F[0],"Arithmetic")].concat(T),g=$.$r(b),_=b,v=[p=Q(b[0],U(g("Racc"),"Parser"),"Parser")].concat(_),N=$.$r(v),p.$$prototype.lexer=W,E(p,"$parse",function(te){return this.$new().$parse(te)}),C(p,"$parse",function(te){try{return this.lexer=U(U(N("BCDice"),"CommonCommand"),"Lexer").$new(te),this.$do_parse()}catch(ae){if(!$.rescue(ae,[N("ParseError")]))throw ae;try{return W}finally{$.pop_exception()}}}),p.$private(),C(p,"$next_token",function(){return this.lexer.$next_token()}),h=$.large_array_unpack("8,17,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,,,4,5,4,5,7,9,7,,,10,11,,10,11,22,26,24,25,27"),M=$.large_array_unpack("0,9,4,2,2,0,0,4,4,0,5,4,7,18,18,5,5,7,7,5,10,7,11,19,19,10,10,11,11,10,12,11,13,,,12,12,13,13,12,1,13,,,16,16,,1,1,16,21,21,21,21"),m=[-2,40,-6,W,0,8,W,10,W,1,18,20,28,30,W,W,37,W,4,14,W,47,W,W,W,W,W,W],d=[-17,-17,-3,-6,-17,-17,-14,-17,-16,-17,-17,-17,-17,-17,-12,-13,-17,28,-1,-2,-4,-7,-15,-5,-8,-9,-10,-11],a=[14,15,23,1,18,19,W,W,20,21,16],r=[3,3,4,1,2,2,W,W,3,3,1],e=[W,3,-6,-4,-19,W],s=[W,W,2,3,W,6],t=$.large_array_unpack("0,0,racc_error,3,14,_reduce_1,3,14,_reduce_2,1,14,_reduce_none,3,15,_reduce_4,4,15,_reduce_5,1,15,_reduce_none,0,17,_reduce_7,1,17,_reduce_8,1,17,_reduce_9,1,17,_reduce_10,1,17,_reduce_11,2,16,_reduce_12,2,16,_reduce_13,1,16,_reduce_none,3,18,_reduce_15,1,18,_reduce_16"),c=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12),R(v[0],"Racc_arg",[h,M,d,m,a,r,s,e,13,t,c,28,17,!0]),Y(N("Ractor","skip_raise")?"constant":W)&&N("Ractor").$make_shareable(N("Racc_arg")),R(v[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","add","mul","unary","round_type","term"]),Y(N("Ractor","skip_raise")?"constant":W)&&N("Ractor").$make_shareable(N("Racc_token_to_s_table")),R(v[0],"Racc_debug_parser",!1),C(p,"$_reduce_1",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"BinaryOp").$new(te["$[]"](0),"+",te["$[]"](2))}),C(p,"$_reduce_2",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"BinaryOp").$new(te["$[]"](0),"-",te["$[]"](2))}),C(p,"$_reduce_4",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"BinaryOp").$new(te["$[]"](0),"*",te["$[]"](2))}),C(p,"$_reduce_5",function(te,ne,ae){return te["$[]"](3).$new(te["$[]"](0),te["$[]"](2))}),C(p,"$_reduce_7",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),C(p,"$_reduce_8",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"DivideWithCeil")}),C(p,"$_reduce_9",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"DivideWithCeil")}),C(p,"$_reduce_10",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"DivideWithRound")}),C(p,"$_reduce_11",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"DivideWithFloor")}),C(p,"$_reduce_12",function(te,ne,ae){return te["$[]"](1)}),C(p,"$_reduce_13",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"Negative").$new(te["$[]"](1))}),C(p,"$_reduce_15",function(te,ne,ae){return te["$[]"](1)}),C(p,"$_reduce_16",function(te,ne,ae){return U(U(N("Arithmetic"),"Node"),"Number").$new(te["$[]"](0))}),C(p,"$_reduce_none",function(te,ne,ae){return te["$[]"](0)})},Opal.modules["bcdice/arithmetic"]=function($){var H,L,F,T,I,w,A,W,P=$.module,Q=$.thrower,E=$.def,C=$.top,B=[],R=$.nil;return C.$require("bcdice/arithmetic/node"),C.$require("bcdice/arithmetic/parser"),H=B,L=W=[P(B[0],"BCDice")].concat(H),A=[w=P(W[0],"Arithmetic")].concat(L),T=[F=$.get_singleton_class(w)].concat(A),I=$.$r(T),E(F,"$eval",function(g,q){try{var _;Q("eval_return");try{return(_=I("Parser").$parse(g))===R||null==_?R:_.$eval(q)}catch(f){if(!$.rescue(f,[I("ZeroDivisionError")]))throw f;try{return R}finally{$.pop_exception()}}}catch(f){if(f===$.t_eval_return)return f.$v;throw f}})},Opal.queue(function($){var w,I,b,g,q,S,F,P=$.module,Q=$.klass,E=$.defs,C=$.def,B=$.send,R=$.truthy,Y=$.eqeq,H=$.thrower,W=[],U=$.nil;return $.top.$require("bcdice/arithmetic"),w=W,I=F=[P(W[0],"BCDice")].concat(w),g=[b=Q(F[0],null,"Preprocessor")].concat(I),q=$.$r(g),(S=b.$$prototype).game_system=S.text=U,E(b,"$process",function(p,f){return q("Preprocessor").$new(p,f).$process()}),C(b,"$initialize",function(p,f){return this.text=p,this.game_system=f}),C(b,"$process",function(){var p=this;return p.$trim_after_whitespace(),p.$replace_parentheses(),p.text=p.game_system.$change_text(p.text),p.$replace_implicit_d(),p.text}),b.$private(),C(b,"$trim_after_whitespace",function(){return this.text=this.text.$strip().$split(/\s/,2).$first()}),C(b,"$replace_parentheses",function(){try{H("eval_return");var f=this;return function(){try{var z=H("break");return B(f,"loop",[],function v(){var h,N=null==v.$$s?this:v.$$s;if(null==N.text&&(N.text=U),h=N.text,N.text=B(N.text,"gsub",[/\([\d\/+*\-CURF]+\)/],function M(m){var a,d=null==M.$$s?this:M.$$s;return null==d.game_system&&(d.game_system=U),null==m&&(m=U),R(a=q("Arithmetic").$eval(m,d.game_system.$round_type()))?a:m},{$$s:N}),!Y(h,N.text))return U;z.$throw()},{$$s:f})}catch(v){if(v===z)return v.$v;throw v}}()}catch(z){if(z===$.t_eval_return)return z.$v;throw z}}),C(b,"$replace_implicit_d",function(){var p=this;return p.text=B(p.text,"gsub",[/(\d+)D([^\w]|$)/i],function f(){var z=null==f.$$s?this:f.$$s;return null==z.game_system&&(z.game_system=U),q("Regexp").$last_match(1)+"D"+z.game_system.$sides_implicit_d()+q("Regexp").$last_match(2)},{$$s:p})})})},389:(l,ee,re)=>{re(3986),Opal.queue(function($){var R,E=[];return R=E,(0,$.const_set)([(0,$.module)(E[0],"BCDice")].concat(R)[0],"VERSION","3.13.0")})},4837:function(l,ee,re){"use strict";var $=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(ee,"__esModule",{value:!0}),ee.Opal=ee.I18n=ee.BCDice=void 0,re(389);var P=$(re(4806));ee.BCDice=P.default.module(null,"BCDice"),ee.I18n=P.default.module(null,"I18n");var Q=re(4806);Object.defineProperty(ee,"Opal",{enumerable:!0,get:function(){return $(Q).default}})},4806:(l,ee,re)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0}),ee.nilToNull=void 0,re(3986),Opal.config.unsupported_features_severity="ignore",ee.default=Opal,ee.nilToNull=function $(P){return P===Opal.nil?null:P}},653:function(l,ee,re){"use strict";var $=this&&this.__extends||function(){var U=function(L,w){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,F){A.__proto__=F}||function(A,F){for(var k in F)Object.prototype.hasOwnProperty.call(F,k)&&(A[k]=F[k])})(L,w)};return function(L,w){function A(){this.constructor=L}U(L,w),L.prototype=null===w?Object.create(w):(A.prototype=w.prototype,new A)}}(),P=this&&this.__awaiter||function(U,L,w,A){return new(w||(w=Promise))(function(k,T){function I(q){try{g(A.next(q))}catch(S){T(S)}}function b(q){try{g(A.throw(q))}catch(S){T(S)}}function g(q){q.done?k(q.value):function F(k){return k instanceof w?k:new w(function(T){T(k)})}(q.value).then(I,b)}g((A=A.apply(U,L||[])).next())})},Q=this&&this.__generator||function(U,L){var A,F,k,T,w={label:0,sent:function(){if(1&k[0])throw k[1];return k[1]},trys:[],ops:[]};return T={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(T[Symbol.iterator]=function(){return this}),T;function I(g){return function(q){return function b(g){if(A)throw new TypeError("Generator is already executing.");for(;w;)try{if(A=1,F&&(k=2&g[0]?F.return:g[0]?F.throw||((k=F.return)&&k.call(F),0):F.next)&&!(k=k.call(F,g[1])).done)return k;switch(F=0,k&&(g=[2&g[0],k.value]),g[0]){case 0:case 1:k=g;break;case 4:return w.label++,{value:g[1],done:!1};case 5:w.label++,F=g[1],g=[0];continue;case 7:g=w.ops.pop(),w.trys.pop();continue;default:if(!(k=(k=w.trys).length>0&&k[k.length-1])&&(6===g[0]||2===g[0])){w=0;continue}if(3===g[0]&&(!k||g[1]>k[0]&&g[1]<k[3])){w.label=g[1];break}if(6===g[0]&&w.label<k[1]){w.label=k[1],k=g;break}if(k&&w.label<k[2]){w.label=k[2],w.ops.push(g);break}k[2]&&w.ops.pop(),w.trys.pop();continue}g=L.call(U,w)}catch(q){g=[6,q],F=0}finally{A=k=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,q])}}},E=this&&this.__importDefault||function(U){return U&&U.__esModule?U:{default:U}};Object.defineProperty(ee,"__esModule",{value:!0}),ee.getGameSystemClass=void 0;var C=E(re(8547)),B=re(4837),R=re(7324),Y=E(re(4682)),H=E(re(3034));function Z(U){var L;return(L=function(w){function A(F,k){return w.call(this,F,k??U.$new(F))||this}return $(A,w),A.eval=function(F){return R.parseResult(U.$eval(F))},A}(C.default)).ID=U.$const_get("ID"),L.NAME=U.$const_get("NAME"),L.SORT_KEY=U.$const_get("SORT_KEY"),L.HELP_MESSAGE=U.$const_get("HELP_MESSAGE"),L.COMMAND_PATTERN=U.$command_pattern(),L}ee.getGameSystemClass=Z;var W=function(){function U(){}return U.prototype.getGameSystemIdByName=function(L){var w,A=null===(w=this.listAvailableGameSystems().find(function(F){return F.name===L}))||void 0===w?void 0:w.id;if(!A)throw new Error("GameSystem named "+L+" does not exists");return A},U.prototype.getGameSystemInfo=function(L){var w=this.listAvailableGameSystems().find(function(A){return A.id===L});if(!w)throw new Error("GameSystem is not found");return w},U.prototype.getGameSystemClass=function(L){var w=this.listLoadedGameSystems().find(function(A){return A.ID===L});if(!w)throw new Error("GameSystem "+L+" is not loaded");return w},U.prototype.getI18nInfos=function(L){var w=L.replace(/_[^0-9].*$/g,""),A=this.listAvailabletI18nInfoList().find(function(T){return T.baseClassName===w||T.baseClassName===L}),F=A?[A]:[],k=this.listAvailableGameSystems().find(function(T){return T.className===L});return k?Array.from(new Set(this.getI18nInfos(k.superClassName).concat(F))):F},U.prototype.listLoadedGameSystems=function(){var L,w,A;return null!==(A=null===(w=null===(L=B.BCDice.GameSystem)||void 0===L?void 0:L.$constants())||void 0===w?void 0:w.map(function(F){return Z(B.BCDice.GameSystem[F])}))&&void 0!==A?A:[]},U.prototype.listAvailableGameSystems=function(){return Y.default.gameSystems},U.prototype.listAvailabletI18nInfoList=function(){return H.default.i18nList},U.prototype.dynamicLoad=function(L){var w;return P(this,void 0,void 0,function(){var A,F,k,T,I,b,g,q,S,p,f,z,v;return Q(this,function(N){switch(N.label){case 0:if(A=this.getGameSystemInfo(L),!(F=null!==(w=A?.className)&&void 0!==w?w:L).match(/^[A-Z]\w*$/))throw new Error("Invalid id");k=this.getI18nInfos(F),T=0,I=k,N.label=1;case 1:if(!(T<I.length))return[3,6];g=(b=I[T]).locales.filter(function(h){return h===A.locale||h===B.I18n.$default_locale()}),q=0,S=g,N.label=2;case 2:return q<S.length?(z=(f=JSON).stringify,[4,this.dynamicImportI18n(b.baseClassName,S[q])]):[3,5];case 3:p=z.apply(f,[N.sent()]),B.I18n.$load_translation(p),N.label=4;case 4:return q++,[3,2];case 5:return T++,[3,1];case 6:return[4,this.dynamicImport(F)];case 7:if(N.sent(),!(v=B.BCDice.GameSystem.$const_get(F)))throw new Error("Failed to load game system");return[2,Z(v)]}})})},U.prototype.dynamicImportI18n=function(L,w){throw new Error("Not implemented")},U.prototype.dynamicImport=function(L){throw new Error("Not implemented")},U}();ee.default=W},7324:function(l,ee,re){"use strict";var $=this&&this.__assign||function(){return $=Object.assign||function(C){for(var B,R=1,Y=arguments.length;R<Y;R++)for(var H in B=arguments[R])Object.prototype.hasOwnProperty.call(B,H)&&(C[H]=B[H]);return C},$.apply(this,arguments)},P=this&&this.__rest||function(C,B){var R={};for(var Y in C)Object.prototype.hasOwnProperty.call(C,Y)&&B.indexOf(Y)<0&&(R[Y]=C[Y]);if(null!=C&&"function"==typeof Object.getOwnPropertySymbols){var H=0;for(Y=Object.getOwnPropertySymbols(C);H<Y.length;H++)B.indexOf(Y[H])<0&&Object.prototype.propertyIsEnumerable.call(C,Y[H])&&(R[Y[H]]=C[Y[H]])}return R};Object.defineProperty(ee,"__esModule",{value:!0}),ee.parseResult=void 0;var Q=re(4837);ee.parseResult=function E(C){if(C===Q.Opal.nil)return null;var B=C.detailed_rands,R=P(C,["detailed_rands"]);return $($({},R),{detailedRands:B.map(function(Y){return Y.$to_n()})})}},85:(l,ee,re)=>{var $={"./AFF2e":[6907,7327],"./AFF2e.js":[6907,7327],"./AceKillerGene":[5103,7217],"./AceKillerGene.js":[5103,7217],"./Ainecadette":[7581,8150],"./Ainecadette.js":[7581,8150],"./Airgetlamh":[4621,5247],"./Airgetlamh.js":[4621,5247],"./AlchemiaStruggle":[6383,5225],"./AlchemiaStruggle.js":[6383,5225],"./Alsetto":[2933,2948],"./Alsetto.js":[2933,2948],"./Alshard":[2099,6420],"./Alshard.js":[2099,6420],"./AlterRaise":[4749,3385],"./AlterRaise.js":[4749,3385],"./Amadeus":[2974,1582],"./Amadeus.js":[2974,1582],"./Amadeus_Korean":[2596,5512],"./Amadeus_Korean.js":[2596,5512],"./AngelGear":[2695,9437],"./AngelGear.js":[2695,9437],"./AniMalus":[3831,8752],"./AniMalus.js":[3831,8752],"./AnimaAnimus":[4541,2919],"./AnimaAnimus.js":[4541,2919],"./Aoharubaan":[8117,6968],"./Aoharubaan.js":[8117,6968],"./Arianrhod":[8026,5283],"./Arianrhod.js":[8026,5283],"./ArknightsFan":[9715,9488],"./ArknightsFan.js":[9715,9488],"./ArsMagica":[5570,5734],"./ArsMagica.js":[5570,5734],"./AssaultEngine":[7300,4339],"./AssaultEngine.js":[7300,4339],"./Avandner":[4992,3084],"./Avandner.js":[4992,3084],"./Ayabito":[6509,1253],"./Ayabito.js":[6509,1253],"./BBN":[4929,2522],"./BBN.js":[4929,2522],"./BadLife":[3918,4872],"./BadLife.js":[3918,4872],"./Bakenokawa":[574,2135],"./Bakenokawa.js":[574,2135],"./BarnaKronika":[1513,7073],"./BarnaKronika.js":[1513,7073],"./BattleTech":[1978,6344],"./BattleTech.js":[1978,6344],"./BeastBindTrinity":[449,4572],"./BeastBindTrinity.js":[449,4572],"./BeginningIdol":[5638,66],"./BeginningIdol.js":[5638,66],"./BeginningIdol2022":[2129,6466],"./BeginningIdol2022.js":[2129,6466],"./BeginningIdol_Korean":[8892,7117],"./BeginningIdol_Korean.js":[8892,7117],"./BladeOfArcana":[7680,1087],"./BladeOfArcana.js":[7680,1087],"./BlindMythos":[489,5539],"./BlindMythos.js":[489,5539],"./BloodCrusade":[9986,2013],"./BloodCrusade.js":[9986,2013],"./BloodMoon":[4282,593],"./BloodMoon.js":[4282,593],"./Bloodorium":[2197,3312],"./Bloodorium.js":[2197,3312],"./CardRanker":[3773,873],"./CardRanker.js":[3773,873],"./CastleInGray":[5413,1820],"./CastleInGray.js":[5413,1820],"./ChaosFlare":[8101,1114],"./ChaosFlare.js":[8101,1114],"./Chill":[1814,1919],"./Chill.js":[1814,1919],"./Chill3":[3138,8585],"./Chill3.js":[3138,8585],"./CodeLayerd":[5802,9606],"./CodeLayerd.js":[5802,9606],"./ColossalHunter":[1601,2461],"./ColossalHunter.js":[1601,2461],"./Comes":[1910,2793],"./Comes.js":[1910,2793],"./ConvictorDrive":[5939,8138],"./ConvictorDrive.js":[5939,8138],"./CrashWorld":[7362,2519],"./CrashWorld.js":[7362,2519],"./Cthulhu":[3563,3364],"./Cthulhu.js":[3563,3364],"./Cthulhu7th":[4176,8376],"./Cthulhu7th.js":[4176,8376],"./Cthulhu7th_ChineseTraditional":[5136,6447],"./Cthulhu7th_ChineseTraditional.js":[5136,6447],"./Cthulhu7th_Korean":[6795,7170],"./Cthulhu7th_Korean.js":[6795,7170],"./CthulhuTech":[3014,2555],"./CthulhuTech.js":[3014,2555],"./Cthulhu_ChineseTraditional":[8154,9285],"./Cthulhu_ChineseTraditional.js":[8154,9285],"./Cthulhu_Korean":[7479,7008],"./Cthulhu_Korean.js":[7479,7008],"./Cthulhu_SimplifiedChinese":[6682,1448],"./Cthulhu_SimplifiedChinese.js":[6682,1448],"./CyberpunkRed":[6710,347],"./CyberpunkRed.js":[6710,347],"./DarkBlaze":[6597,3005],"./DarkBlaze.js":[6597,3005],"./DarkDaysDrive":[718,5736],"./DarkDaysDrive.js":[718,5736],"./DarkSouls":[2465,3958],"./DarkSouls.js":[2465,3958],"./DeadlineHeroes":[7316,6143],"./DeadlineHeroes.js":[7316,6143],"./DemonParasite":[7429,5670],"./DemonParasite.js":[7429,5670],"./DemonSpike":[6395,3054],"./DemonSpike.js":[6395,3054],"./DesperateRun":[7483,148],"./DesperateRun.js":[7483,148],"./DetatokoSaga":[6531,5413],"./DetatokoSaga.js":[6531,5413],"./DetatokoSaga_Korean":[7825,7553],"./DetatokoSaga_Korean.js":[7825,7553],"./DiceBot":[4960,8159],"./DiceBot.js":[4960,8159],"./DiceOfTheDead":[3727,5651],"./DiceOfTheDead.js":[3727,5651],"./DoubleCross":[6793,8436],"./DoubleCross.js":[6793,8436],"./DoubleCross_Korean":[3468,6708],"./DoubleCross_Korean.js":[3468,6708],"./Dracurouge":[3310,2697],"./Dracurouge.js":[3310,2697],"./Dracurouge_Korean":[3218,9678],"./Dracurouge_Korean.js":[3218,9678],"./DungeonsAndDragons":[239,8358],"./DungeonsAndDragons.js":[239,8358],"./DungeonsAndDragons5":[7155,1125],"./DungeonsAndDragons5.js":[7155,1125],"./EarthDawn":[2038,517],"./EarthDawn.js":[2038,517],"./EarthDawn3":[1668,9730],"./EarthDawn3.js":[1668,9730],"./EarthDawn4":[4135,809],"./EarthDawn4.js":[4135,809],"./EclipsePhase":[4605,9735],"./EclipsePhase.js":[4605,9735],"./Elric":[3674,7309],"./Elric.js":[3674,7309],"./Elysion":[6118,7372],"./Elysion.js":[6118,7372],"./EmbryoMachine":[7539,9755],"./EmbryoMachine.js":[7539,9755],"./Emoklore":[8553,5620],"./Emoklore.js":[8553,5620],"./EndBreaker":[1377,3515],"./EndBreaker.js":[1377,3515],"./EtrianOdysseySRS":[5660,1851],"./EtrianOdysseySRS.js":[5660,1851],"./FateCoreSystem":[9767,5899],"./FateCoreSystem.js":[9767,5899],"./Fiasco":[8673,6739],"./Fiasco.js":[8673,6739],"./Fiasco_Korean":[6343,7036],"./Fiasco_Korean.js":[6343,7036],"./FilledWith":[4955,6705],"./FilledWith.js":[4955,6705],"./FullFace":[4810,9118],"./FullFace.js":[4810,9118],"./FullMetalPanic":[5625,8725],"./FullMetalPanic.js":[5625,8725],"./FutariSousa":[703,4564],"./FutariSousa.js":[703,4564],"./FutariSousa_Korean":[1577,8175],"./FutariSousa_Korean.js":[1577,8175],"./GURPS":[3472,6908],"./GURPS.js":[3472,6908],"./Garako":[8726,8165],"./Garako.js":[8726,8165],"./GardenOrder":[8468,172],"./GardenOrder.js":[8468,172],"./GehennaAn":[5669,5105],"./GehennaAn.js":[5669,5105],"./GeishaGirlwithKatana":[2878,8780],"./GeishaGirlwithKatana.js":[2878,8780],"./GhostLive":[2545,9626],"./GhostLive.js":[2545,9626],"./GoblinSlayer":[5917,2006],"./GoblinSlayer.js":[5917,2006],"./GoldenSkyStories":[4063,9940],"./GoldenSkyStories.js":[4063,9940],"./Gorilla":[4267,7576],"./Gorilla.js":[4267,7576],"./GranCrest":[3054,6613],"./GranCrest.js":[3054,6613],"./GundamSentinel":[5093,541],"./GundamSentinel.js":[5093,541],"./Gundog":[1231,6501],"./Gundog.js":[1231,6501],"./GundogRevised":[6006,427],"./GundogRevised.js":[6006,427],"./GundogZero":[8467,493],"./GundogZero.js":[8467,493],"./GurpsFW":[442,6949],"./GurpsFW.js":[442,6949],"./HarnMaster":[5372,4075],"./HarnMaster.js":[5372,4075],"./HatsuneMiku":[9377,6589],"./HatsuneMiku.js":[9377,6589],"./HeroScale":[6801,7555],"./HeroScale.js":[6801,7555],"./Hieizan":[2471,8171],"./Hieizan.js":[2471,8171],"./HouraiGakuen":[2034,7155],"./HouraiGakuen.js":[2034,7155],"./HunterTheReckoning5th":[5692,3191],"./HunterTheReckoning5th.js":[5692,3191],"./HuntersMoon":[7161,1909],"./HuntersMoon.js":[7161,1909],"./IfIfIf":[278,4507],"./IfIfIf.js":[278,4507],"./Illusio":[6732,4796],"./Illusio.js":[6732,4796],"./InfiniteBabeL":[6569,7641],"./InfiniteBabeL.js":[6569,7641],"./InfiniteFantasia":[9790,391],"./InfiniteFantasia.js":[9790,391],"./Insane":[6933,9001],"./Insane.js":[6933,9001],"./Insane_Korean":[7307,1918],"./Insane_Korean.js":[7307,1918],"./Irisbane":[6554,6957],"./Irisbane.js":[6554,6957],"./IthaWenUa":[1637,9872],"./IthaWenUa.js":[1637,9872],"./JamesBond":[9414,7097],"./JamesBond.js":[9414,7097],"./JekyllAndHyde":[4324,4788],"./JekyllAndHyde.js":[4324,4788],"./JuinKansen":[9587,9327],"./JuinKansen.js":[9587,9327],"./Kamigakari":[478,8602],"./Kamigakari.js":[478,8602],"./Kamigakari_Korean":[8333,5309],"./Kamigakari_Korean.js":[8333,5309],"./KamitsubakiCityUnderConstructionNarrative":[4581,8464],"./KamitsubakiCityUnderConstructionNarrative.js":[4581,8464],"./KanColle":[8653,2098],"./KanColle.js":[8653,2098],"./Karukami":[7550,1616],"./Karukami.js":[7550,1616],"./KemonoNoMori":[3725,3962],"./KemonoNoMori.js":[3725,3962],"./KillDeathBusiness":[8211,6750],"./KillDeathBusiness.js":[8211,6750],"./KillDeathBusiness_Korean":[2431,4401],"./KillDeathBusiness_Korean.js":[2431,4401],"./KurayamiCrying":[1006,164],"./KurayamiCrying.js":[1006,164],"./Kutulu":[994,8790],"./Kutulu.js":[994,8790],"./KyokoShinshoku":[7379,7275],"./KyokoShinshoku.js":[7379,7275],"./Liminal":[3526,3115],"./Liminal.js":[3526,3115],"./LiveraDoll":[2004,8440],"./LiveraDoll.js":[2004,8440],"./LogHorizon":[4234,4810],"./LogHorizon.js":[4234,4810],"./LogHorizon_Korean":[4912,348],"./LogHorizon_Korean.js":[4912,348],"./LostRecord":[4144,7171],"./LostRecord.js":[4144,7171],"./LostRoyal":[8302,9625],"./LostRoyal.js":[8302,9625],"./MagicaLogia":[6993,2399],"./MagicaLogia.js":[6993,2399],"./MagicaLogia_Korean":[7882,7729],"./MagicaLogia_Korean.js":[7882,7729],"./MagicaLogia_SimplifiedChinese":[3137,6875],"./MagicaLogia_SimplifiedChinese.js":[3137,6875],"./MamonoScramble":[2659,3524],"./MamonoScramble.js":[2659,3524],"./MeikyuDays":[5671,1493],"./MeikyuDays.js":[5671,1493],"./MeikyuKingdom":[2215,8326],"./MeikyuKingdom.js":[2215,8326],"./MeikyuKingdomBasic":[571,7016],"./MeikyuKingdomBasic.js":[571,7016],"./MetalHead":[1048,7276],"./MetalHead.js":[1048,7276],"./MetalHeadExtream":[7081,3062],"./MetalHeadExtream.js":[7081,3062],"./MetallicGuardian":[869,2040],"./MetallicGuardian.js":[869,2040],"./MonotoneMuseum":[7321,735],"./MonotoneMuseum.js":[7321,735],"./MonotoneMuseum_Korean":[6406,5249],"./MonotoneMuseum_Korean.js":[6406,5249],"./NRR":[7186,713],"./NRR.js":[7186,713],"./NSSQ":[9032,4238],"./NSSQ.js":[9032,4238],"./Nechronica":[8633,3532],"./Nechronica.js":[8633,3532],"./Nechronica_Korean":[3742,4116],"./Nechronica_Korean.js":[3742,4116],"./NeverCloud":[3094,3096],"./NeverCloud.js":[3094,3096],"./NightWizard":[2964,5811],"./NightWizard.js":[2964,5811],"./NightWizard3rd":[4283,3535],"./NightWizard3rd.js":[4283,3535],"./NightmareHunterDeep":[5720,298],"./NightmareHunterDeep.js":[5720,298],"./NinjaSlayer":[3524,7381],"./NinjaSlayer.js":[3524,7381],"./NinjaSlayer2":[4133,7869],"./NinjaSlayer2.js":[4133,7869],"./NjslyrBattle":[1009,3443],"./NjslyrBattle.js":[1009,3443],"./NobunagasBlackCastle":[8057,6652],"./NobunagasBlackCastle.js":[8057,6652],"./Nuekagami":[5545,3293],"./Nuekagami.js":[5545,3293],"./OneWayHeroics":[7904,3852],"./OneWayHeroics.js":[7904,3852],"./OracleEngine":[2157,2989],"./OracleEngine.js":[2157,2989],"./OrgaRain":[1024,644],"./OrgaRain.js":[1024,644],"./Oukahoushin3rd":[5400,3407],"./Oukahoushin3rd.js":[5400,3407],"./Paradiso":[3808,4246],"./Paradiso.js":[3808,4246],"./Paranoia":[7168,1031],"./Paranoia.js":[7168,1031],"./ParanoiaRebooted":[8493,5289],"./ParanoiaRebooted.js":[8493,5289],"./ParasiteBlood":[8415,1410],"./ParasiteBlood.js":[8415,1410],"./PastFutureParadox":[8777,4094],"./PastFutureParadox.js":[8777,4094],"./Pathfinder":[9785,1599],"./Pathfinder.js":[9785,1599],"./Peekaboo":[1446,844],"./Peekaboo.js":[1446,844],"./Pendragon":[8275,2311],"./Pendragon.js":[8275,2311],"./PersonaO":[9969,481],"./PersonaO.js":[9969,481],"./PhantasmAdventure":[7244,8614],"./PhantasmAdventure.js":[7244,8614],"./Postman":[8109,5124],"./Postman.js":[8109,5124],"./PulpCthulhu":[4171,9449],"./PulpCthulhu.js":[4171,9449],"./Raisondetre":[3803,293],"./Raisondetre.js":[3803,293],"./RecordOfLodossWar":[6769,281],"./RecordOfLodossWar.js":[6769,281],"./RecordOfSteam":[563,2213],"./RecordOfSteam.js":[563,2213],"./Revulture":[1057,9886],"./Revulture.js":[1057,9886],"./RokumonSekai2":[5323,9495],"./RokumonSekai2.js":[5323,9495],"./RoleMaster":[1157,2625],"./RoleMaster.js":[1157,2625],"./RuinBreakers":[5602,7696],"./RuinBreakers.js":[5602,7696],"./RuneQuest":[1035,7480],"./RuneQuest.js":[1035,7480],"./RuneQuestRoleplayingInGlorantha":[9970,2023],"./RuneQuestRoleplayingInGlorantha.js":[9970,2023],"./RyuTuber":[5063,1766],"./RyuTuber.js":[5063,1766],"./Ryutama":[7703,585],"./Ryutama.js":[7703,585],"./SRS":[9489,1377],"./SRS.js":[9489,1377],"./SajinsenkiAGuS":[2272,5034],"./SajinsenkiAGuS.js":[2272,5034],"./SajinsenkiAGuS2E":[3596,9362],"./SajinsenkiAGuS2E.js":[3596,9362],"./SamsaraBallad":[3393,2250],"./SamsaraBallad.js":[3393,2250],"./Satasupe":[132,3314],"./Satasupe.js":[132,3314],"./ScreamHighSchool":[20,512],"./ScreamHighSchool.js":[20,512],"./Sengensyou":[595,3109],"./Sengensyou.js":[595,3109],"./SevenFortressMobius":[25,1091],"./SevenFortressMobius.js":[25,1091],"./ShadowRun":[5994,8975],"./ShadowRun.js":[5994,8975],"./ShadowRun4":[6683,5925],"./ShadowRun4.js":[6683,5925],"./ShadowRun5":[4973,3665],"./ShadowRun5.js":[4973,3665],"./SharedFantasia":[6800,2025],"./SharedFantasia.js":[6800,2025],"./ShinMegamiTenseiKakuseihen":[6827,8657],"./ShinMegamiTenseiKakuseihen.js":[6827,8657],"./ShinkuuGakuen":[2556,1763],"./ShinkuuGakuen.js":[2556,1763],"./ShinobiGami":[3340,132],"./ShinobiGami.js":[3340,132],"./Shiranui":[6637,2709],"./Shiranui.js":[6637,2709],"./ShoujoTenrankai":[7408,8565],"./ShoujoTenrankai.js":[7408,8565],"./ShuumatsuKikou":[8420,533],"./ShuumatsuKikou.js":[8420,533],"./Siren":[2343,2443],"./Siren.js":[2343,2443],"./Skynauts":[263,5150],"./Skynauts.js":[263,5150],"./SkynautsBouken":[2171,303],"./SkynautsBouken.js":[2171,303],"./StarryDolls":[401,9354],"./StarryDolls.js":[401,9354],"./SteamPunkers":[8906,7103],"./SteamPunkers.js":[8906,7103],"./StellarKnights":[2860,628],"./StellarKnights.js":[2860,628],"./StellarKnights_Korean":[6027,6768],"./StellarKnights_Korean.js":[6027,6768],"./StellarLife":[4080,3740],"./StellarLife.js":[4080,3740],"./StrangerOfSwordCity":[6711,1593],"./StrangerOfSwordCity.js":[6711,1593],"./StratoShout":[7243,8470],"./StratoShout.js":[7243,8470],"./StratoShout_Korean":[9611,6114],"./StratoShout_Korean.js":[9611,6114],"./Strave":[1935,8233],"./Strave.js":[1935,8233],"./SwordWorld":[8792,3210],"./SwordWorld.js":[8792,3210],"./SwordWorld2_0":[7229,7043],"./SwordWorld2_0.js":[7229,7043],"./SwordWorld2_0_SimplifiedChinese":[30,8196],"./SwordWorld2_0_SimplifiedChinese.js":[30,8196],"./SwordWorld2_5":[8308,9753],"./SwordWorld2_5.js":[8308,9753],"./SwordWorld2_5_SimplifiedChinese":[1873,6152],"./SwordWorld2_5_SimplifiedChinese.js":[1873,6152],"./SwordWorld_SimplifiedChinese":[6224,9640],"./SwordWorld_SimplifiedChinese.js":[6224,9640],"./TalesFromTheLoop":[1631,1982],"./TalesFromTheLoop.js":[1631,1982],"./TenkaRyouran":[2795,7812],"./TenkaRyouran.js":[2795,7812],"./TherapieSein":[5995,5405],"./TherapieSein.js":[5995,5405],"./TokumeiTenkousei":[6264,5101],"./TokumeiTenkousei.js":[6264,5101],"./TokyoGhostResearch":[6328,2686],"./TokyoGhostResearch.js":[6328,2686],"./TokyoNova":[974,7455],"./TokyoNova.js":[974,7455],"./Torg":[1886,6604],"./Torg.js":[1886,6604],"./Torg1_5":[3902,8177],"./Torg1_5.js":[3902,8177],"./TorgEternity":[550,9931],"./TorgEternity.js":[550,9931],"./ToshiakiHolyGrailWar":[1403,4957],"./ToshiakiHolyGrailWar.js":[1403,4957],"./TrinitySeven":[880,589],"./TrinitySeven.js":[880,589],"./TunnelsAndTrolls":[1815,5188],"./TunnelsAndTrolls.js":[1815,5188],"./TwilightGunsmoke":[1383,6331],"./TwilightGunsmoke.js":[1383,6331],"./UnsungDuet":[4170,1209],"./UnsungDuet.js":[4170,1209],"./Utakaze":[5378,357],"./Utakaze.js":[5378,357],"./VampireTheMasquerade5th":[8086,7115],"./VampireTheMasquerade5th.js":[8086,7115],"./Ventangle":[2093,1948],"./Ventangle.js":[2093,1948],"./Villaciel":[2080,4906],"./Villaciel.js":[2080,4906],"./VisionConnect":[2077,35],"./VisionConnect.js":[2077,35],"./WARPS":[1030,1380],"./WARPS.js":[1030,1380],"./WaresBlade":[2587,4213],"./WaresBlade.js":[2587,4213],"./Warhammer":[5120,7339],"./Warhammer.js":[5120,7339],"./Warhammer4":[4013,4837],"./Warhammer4.js":[4013,4837],"./WerewolfTheApocalypse5th":[7682,5406],"./WerewolfTheApocalypse5th.js":[7682,5406],"./WitchQuest":[4278,6088],"./WitchQuest.js":[4278,6088],"./WorldOfDarkness":[1476,3726],"./WorldOfDarkness.js":[1476,3726],"./WorldsEndFrontline":[8359,1795],"./WorldsEndFrontline.js":[8359,1795],"./YankeeYogSothoth":[2194,7906],"./YankeeYogSothoth.js":[2194,7906],"./YearZeroEngine":[8855,6632],"./YearZeroEngine.js":[8855,6632],"./Yggdrasill":[5694,6467],"./Yggdrasill.js":[5694,6467],"./ZettaiReido":[4097,4999],"./ZettaiReido.js":[4097,4999],"./ZombiLine":[8617,4701],"./ZombiLine.js":[8617,4701]};function P(Q){if(!re.o($,Q))return Promise.resolve().then(()=>{var B=new Error("Cannot find module '"+Q+"'");throw B.code="MODULE_NOT_FOUND",B});var E=$[Q],C=E[0];return re.e(E[1]).then(()=>re.t(C,23))}P.keys=()=>Object.keys($),P.id=85,l.exports=P},6507:(l,ee,re)=>{var $={"./Amadeus.ja_jp.json":[6070,9299],"./Amadeus.ko_kr.json":[765,4092],"./Arianrhod.ja_jp.json":[7267,8206],"./BeginningIdol.ja_jp.json":[5355,8635],"./BeginningIdol.ko_kr.json":[2590,6961],"./Cthulhu.ja_jp.json":[8128,652],"./Cthulhu.ko_kr.json":[7002,2617],"./Cthulhu.zh_hans.json":[4209,4922],"./Cthulhu.zh_hant.json":[8021,3147],"./DetatokoSaga.ja_jp.json":[4608,5777],"./DetatokoSaga.ko_kr.json":[408,4502],"./DoubleCross.ja_jp.json":[9221,8706],"./DoubleCross.ko_kr.json":[9734,8517],"./Dracurouge.ja_jp.json":[2286,2847],"./Dracurouge.ko_kr.json":[3597,155],"./Emoklore.ja_jp.json":[8985,6488],"./Fiasco.ja_jp.json":[9873,1800],"./Fiasco.ko_kr.json":[5244,783],"./FutariSousa.ja_jp.json":[9491,8078],"./FutariSousa.ko_kr.json":[8721,9567],"./Insane.ja_jp.json":[5040,6446],"./Insane.ko_kr.json":[5488,3978],"./Kamigakari.ja_jp.json":[2742,3922],"./Kamigakari.ko_kr.json":[7708,1197],"./KillDeathBusiness.ja_jp.json":[2288,3760],"./KillDeathBusiness.ko_kr.json":[1847,287],"./LogHorizon.ja_jp.json":[6438,3811],"./LogHorizon.ko_kr.json":[8319,5106],"./MagicaLogia.ja_jp.json":[4786,9120],"./MagicaLogia.ko_kr.json":[339,2107],"./MagicaLogia.zh_hans.json":[9116,3229],"./MonotoneMuseum.ja_jp.json":[5628,7848],"./MonotoneMuseum.ko_kr.json":[1302,8157],"./Nechronica.ja_jp.json":[9437,667],"./Nechronica.ko_kr.json":[4241,7743],"./NinjaSlayer2.ja_jp.json":[1566,7674],"./StellarKnights.ja_jp.json":[7251,9206],"./StellarKnights.ko_kr.json":[6697,5717],"./StratoShout.ja_jp.json":[7313,7015],"./StratoShout.ko_kr.json":[424,4113],"./SwordWorld.ja_jp.json":[1243,7348],"./SwordWorld.zh_hans.json":[715,654],"./SwordWorld2_0.ja_jp.json":[7547,5351],"./SwordWorld2_0.zh_hans.json":[7912,5642],"./SwordWorld2_5.ja_jp.json":[8368,669],"./SwordWorld2_5.zh_hans.json":[9860,2597]};function P(Q){if(!re.o($,Q))return Promise.resolve().then(()=>{var B=new Error("Cannot find module '"+Q+"'");throw B.code="MODULE_NOT_FOUND",B});var E=$[Q],C=E[0];return re.e(E[1]).then(()=>re.t(C,19))}P.keys=()=>Object.keys($),P.id=6507,l.exports=P},4682:l=>{"use strict";l.exports=JSON.parse('{"gameSystems":[{"id":"IfIfIf","name":"\u30a4\u30d5\u30fb\u30a4\u30d5\u30fb\u30a4\u30d5","className":"IfIfIf","superClassName":"Base","sortKey":"\u3044\u3075\u3044\u3075\u3044\u3075","locale":"ja_jp"},{"id":"SkynautsBouken","name":"\u6b6f\u8eca\u306e\u5854\u306e\u63a2\u7a7a\u58eb\uff08\u5192\u967a\u4f01\u753b\u5c40\uff09","className":"SkynautsBouken","superClassName":"Base","sortKey":"\u306f\u304f\u308b\u307e\u306e\u3068\u3046\u306e\u3059\u304b\u3044\u306e\u304a\u30642","locale":"ja_jp"},{"id":"NightWizard3rd","name":"\u30ca\u30a4\u30c8\u30a6\u30a3\u30b6\u30fc\u30c9 The 3rd Edition","className":"NightWizard3rd","superClassName":"NightWizard","sortKey":"\u306a\u3044\u3068\u3046\u3044\u3055\u3042\u30683","locale":"ja_jp"},{"id":"NightmareHunterDeep","name":"\u30ca\u30a4\u30c8\u30e1\u30a2\u30cf\u30f3\u30bf\u30fc=\u30c7\u30a3\u30fc\u30d7","className":"NightmareHunterDeep","superClassName":"Base","sortKey":"\u306a\u3044\u3068\u3081\u3042\u306f\u3093\u305f\u3042\u3066\u3044\u3044\u3075","locale":"ja_jp"},{"id":"EarthDawn","name":"\u30a2\u30fc\u30b9\u30c9\u30fc\u30f3","className":"EarthDawn","superClassName":"Base","sortKey":"\u3042\u3042\u3059\u3068\u304a\u3093","locale":"ja_jp"},{"id":"NinjaSlayer","name":"\u30cb\u30f3\u30b8\u30e3\u30b9\u30ec\u30a4\u30e4\u30fcTRPG","className":"NinjaSlayer","superClassName":"Base","sortKey":"\u306b\u3093\u3057\u3084\u3059\u308c\u3044\u3084\u3042TRPG","locale":"ja_jp"},{"id":"StarryDolls","name":"\u30b9\u30bf\u30ea\u30a3\u30c9\u30fc\u30eb","className":"StarryDolls","superClassName":"Base","sortKey":"\u3059\u305f\u308a\u3044\u3068\u304a\u308b","locale":"ja_jp"},{"id":"SteamPunkers","name":"\u30b9\u30c1\u30fc\u30e0\u30d1\u30f3\u30ab\u30fc\u30ba","className":"SteamPunkers","superClassName":"Base","sortKey":"\u3059\u3061\u3044\u3080\u306f\u3093\u304b\u3042\u3059","locale":"ja_jp"},{"id":"StellarKnights","name":"\u9280\u5263\u306e\u30b9\u30c6\u30e9\u30ca\u30a4\u30c4","className":"StellarKnights","superClassName":"Base","sortKey":"\u304d\u3093\u3051\u3093\u306e\u3059\u3066\u3089\u306a\u3044\u3064","locale":"ja_jp"},{"id":"Illusio","name":"\u6643\u5929\u306e\u30a4\u30eb\u30fc\u30b8\u30aa","className":"Illusio","superClassName":"Base","sortKey":"\u3053\u3046\u3066\u3093\u306e\u3044\u308b\u3046\u3057\u304a","locale":"ja_jp"},{"id":"InfiniteBabeL","name":"\u5c11\u5e74\u306e\u305f\u3081\u306e\u5c11\u5973\u5c55\u721b\u4f1a\u7570\u805e Infinite BabeL","className":"InfiniteBabeL","superClassName":"ShoujoTenrankai","sortKey":"\u3057\u3088\u3046\u306d\u3093\u306e\u305f\u3081\u306e\u3057\u3088\u3046\u3057\u3088\u3066\u3093\u3089\u3093\u304b\u3044\u3044\u3075\u3093\u3044\u3093\u3075\u3044\u306b\u3064\u3068\u306f\u3078\u308b","locale":"ja_jp"},{"id":"ShoujoTenrankai","name":"\u5c11\u5973\u5c55\u721b\u4f1aTRPG","className":"ShoujoTenrankai","superClassName":"Base","sortKey":"\u3057\u3088\u3046\u3057\u3088\u3066\u3093\u3089\u3093\u304b\u3044TRPG","locale":"ja_jp"},{"id":"BeginningIdol:Korean","name":"\ube44\uae30\ub2dd \uc544\uc774\ub3cc","className":"BeginningIdol_Korean","superClassName":"BeginningIdol","sortKey":"\u56fd\u969b\u5316:Korean:\ube44\uae30\ub2dd \uc544\uc774\ub3cc","locale":"ko_kr"},{"id":"BeginningIdol2022","name":"\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb\uff082022\u5e74\u6539\u8a02\u7248\uff09","className":"BeginningIdol2022","superClassName":"Base","sortKey":"\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b2022","locale":"ja_jp"},{"id":"StellarLife","name":"\u30b9\u30c6\u30e9\u30fc\u30e9\u30a4\u30d5TRPG","className":"StellarLife","superClassName":"Base","sortKey":"\u3059\u3066\u3089\u3042\u3089\u3044\u3075TRPG","locale":"ja_jp"},{"id":"StellarKnights:Korean","name":"\uc740\uac80\uc758 \uc2a4\ud154\ub77c\ub098\uc774\uce20","className":"StellarKnights_Korean","superClassName":"StellarKnights","sortKey":"\u56fd\u969b\u5316:Korean:\uc740\uac80\uc758 \uc2a4\ud154\ub77c\ub098\uc774\uce20","locale":"ko_kr"},{"id":"NinjaSlayer2","name":"\u30cb\u30f3\u30b8\u30e3\u30b9\u30ec\u30a4\u30e4\u30fcTRPG 2\u7248","className":"NinjaSlayer2","superClassName":"Base","sortKey":"\u306b\u3093\u3057\u3084\u3059\u308c\u3044\u3084\u3042TRPG2","locale":"ja_jp"},{"id":"InfiniteFantasia","name":"\u7121\u9650\u306e\u30d5\u30a1\u30f3\u30bf\u30b8\u30a2","className":"InfiniteFantasia","superClassName":"Base","sortKey":"\u3080\u3051\u3093\u306e\u3075\u3042\u3093\u305f\u3057\u3042","locale":"ja_jp"},{"id":"Insane","name":"\u30a4\u30f3\u30bb\u30a4\u30f3","className":"Insane","superClassName":"Base","sortKey":"\u3044\u3093\u305b\u3044\u3093","locale":"ja_jp"},{"id":"EarthDawn3","name":"\u30a2\u30fc\u30b9\u30c9\u30fc\u30f33\u7248","className":"EarthDawn3","superClassName":"EarthDawn","sortKey":"\u3042\u3042\u3059\u3068\u304a\u30933","locale":"ja_jp"},{"id":"StrangerOfSwordCity","name":"\u5263\u306e\u8857\u306e\u7570\u90a6\u4ebaTRPG","className":"StrangerOfSwordCity","superClassName":"Base","sortKey":"\u3064\u308b\u304d\u306e\u307e\u3061\u306e\u3044\u307b\u3046\u3057\u3093TRPG","locale":"ja_jp"},{"id":"Insane:Korean","name":"\uc778\uc138\uc778","className":"Insane_Korean","superClassName":"Insane","sortKey":"\u56fd\u969b\u5316:Korean:\uc778\uc138\uc778","locale":"ko_kr"},{"id":"Irisbane","name":"\u77b3\u9038\u3089\u3055\u306c\u30a4\u30ea\u30b9\u30d9\u30a4\u30f3","className":"Irisbane","superClassName":"Base","sortKey":"\u3072\u3068\u307f\u305d\u3089\u3055\u306c\u3044\u308a\u3059\u3078\u3044\u3093","locale":"ja_jp"},{"id":"BladeOfArcana","name":"\u30d6\u30ec\u30a4\u30c9\u30fb\u30aa\u30d6\u30fb\u30a2\u30eb\u30ab\u30ca","className":"BladeOfArcana","superClassName":"Base","sortKey":"\u3075\u308c\u3044\u3068\u304a\u3075\u3042\u308b\u304b\u306a","locale":"ja_jp"},{"id":"StratoShout","name":"\u30b9\u30c8\u30e9\u30c8\u30b7\u30e3\u30a6\u30c8","className":"StratoShout","superClassName":"Base","sortKey":"\u3059\u3068\u3089\u3068\u3057\u3084\u3046\u3068","locale":"ja_jp"},{"id":"StratoShout:Korean","name":"\uc2a4\ud2b8\ub77c\ud1a0 \uc0e4\uc6b0\ud2b8","className":"StratoShout_Korean","superClassName":"StratoShout","sortKey":"\u56fd\u969b\u5316:Korean:\uc2a4\ud2b8\ub77c\ud1a0 \uc0e4\uc6b0\ud2b8","locale":"ko_kr"},{"id":"Strave","name":"\u78a7\u7a7a\u306e\u30b9\u30c8\u30ec\u30a4\u30f4","className":"Strave","superClassName":"Base","sortKey":"\u3078\u304d\u304f\u3046\u306e\u3059\u3068\u308c\u3044\u3075","locale":"ja_jp"},{"id":"BlindMythos","name":"\u30d6\u30e9\u30a4\u30f3\u30c9\u30fb\u30df\u30c8\u30b9RPG","className":"BlindMythos","superClassName":"Base","sortKey":"\u3075\u3089\u3044\u3093\u3068\u307f\u3068\u3059RPG","locale":"ja_jp"},{"id":"IthaWenUa","name":"\u30a4\u30b5\u30fc\u30fb\u30a6\u30a7\u30f3\uff1d\u30a2\u30fc","className":"IthaWenUa","superClassName":"Base","sortKey":"\u3044\u3055\u3042\u3046\u3048\u3093\u3042\u3042","locale":"ja_jp"},{"id":"JamesBond","name":"\u30b8\u30a7\u30fc\u30e0\u30ba\u30fb\u30dc\u30f3\u30c9007","className":"JamesBond","superClassName":"Base","sortKey":"\u3057\u3048\u3048\u3080\u3059\u307b\u3093\u3068007","locale":"ja_jp"},{"id":"JekyllAndHyde","name":"\u30b8\u30ad\u30eb\u3068\u30cf\u30a4\u30c9\u3068\u30b0\u30ea\u30c8\u30b0\u30e9","className":"JekyllAndHyde","superClassName":"DesperateRun","sortKey":"\u3057\u304d\u308b\u3068\u306f\u3044\u3068\u3068\u304f\u308a\u3068\u304f\u3089","locale":"ja_jp"},{"id":"JuinKansen","name":"\u546a\u5370\u611f\u67d3","className":"JuinKansen","superClassName":"Base","sortKey":"\u3057\u3086\u3044\u3093\u304b\u3093\u305b\u3093","locale":"ja_jp"},{"id":"Kamigakari","name":"\u795e\u6211\u72e9","className":"Kamigakari","superClassName":"Base","sortKey":"\u304b\u307f\u304b\u304b\u308a","locale":"ja_jp"},{"id":"ZombiLine","name":"\u30be\u30f3\u30d3\u30e9\u30a4\u30f3","className":"ZombiLine","superClassName":"Base","sortKey":"\u305d\u3093\u3072\u3089\u3044\u3093","locale":"ja_jp"},{"id":"SwordWorld","name":"\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c9RPG","className":"SwordWorld","superClassName":"Base","sortKey":"\u305d\u304a\u3068\u308f\u3042\u308b\u3068","locale":"ja_jp"},{"id":"EarthDawn4","name":"\u30a2\u30fc\u30b9\u30c9\u30fc\u30f34\u7248","className":"EarthDawn4","superClassName":"EarthDawn","sortKey":"\u3042\u3042\u3059\u3068\u304a\u30934","locale":"ja_jp"},{"id":"ZettaiReido","name":"\u7d76\u5bfe\u96b7\u5974","className":"ZettaiReido","superClassName":"Base","sortKey":"\u305b\u3064\u305f\u3044\u308c\u3044\u3068","locale":"ja_jp"},{"id":"NjslyrBattle","name":"NJSLYRBATTLE","className":"NjslyrBattle","superClassName":"Base","sortKey":"\u306b\u3093\u3057\u3084\u3059\u308c\u3044\u3084\u3042\u306f\u3068\u308b","locale":"ja_jp"},{"id":"NobunagasBlackCastle","name":"\u4fe1\u9577\u306e\u9ed2\u3044\u57ce","className":"NobunagasBlackCastle","superClassName":"Base","sortKey":"\u306e\u3075\u306a\u304b\u306e\u304f\u308d\u3044\u3057\u308d","locale":"ja_jp"},{"id":"Kamigakari:Korean","name":"\uce74\ubbf8\uac00\uce74\ub9ac","className":"Kamigakari_Korean","superClassName":"Kamigakari","sortKey":"\u56fd\u969b\u5316:Korean:\uce74\ubbf8\uac00\uce74\ub9ac","locale":"ko_kr"},{"id":"KamitsubakiCityUnderConstructionNarrative","name":"\u795e\u693f\u5e02\u5efa\u8a2d\u4e2d\u3002NARRATIVE","className":"KamitsubakiCityUnderConstructionNarrative","superClassName":"Base","sortKey":"\u304b\u307f\u3064\u306f\u304d\u3057\u3051\u3093\u305b\u3064\u3061\u3086\u3046\u306a\u3089\u3066\u3044\u3075","locale":"ja_jp"},{"id":"AFF2e","name":"ADVANCED FIGHTING FANTASY 2nd Edition","className":"AFF2e","superClassName":"Base","sortKey":"\u3042\u3068\u306f\u3093\u3059\u3068\u3075\u3042\u3044\u3066\u3044\u3093\u304f\u3075\u3042\u3093\u305f\u3057\u30442","locale":"ja_jp"},{"id":"EclipsePhase","name":"\u30a8\u30af\u30ea\u30d7\u30b9\u30fb\u30d5\u30a7\u30a4\u30ba","className":"EclipsePhase","superClassName":"Base","sortKey":"\u3048\u304f\u308a\u3075\u3059\u3075\u3048\u3044\u3059","locale":"ja_jp"},{"id":"NRR","name":"nRR","className":"NRR","superClassName":"Base","sortKey":"\u3048\u306c\u3042\u3042\u308b\u3042\u3042\u308b","locale":"ja_jp"},{"id":"Elric","name":"\u30a8\u30eb\u30ea\u30c3\u30af\uff01","className":"Elric","superClassName":"Base","sortKey":"\u3048\u308b\u308a\u3064\u304f","locale":"ja_jp"},{"id":"Elysion","name":"\u30a8\u30ea\u30e5\u30b7\u30aa\u30f3","className":"Elysion","superClassName":"Base","sortKey":"\u3048\u308a\u3086\u3057\u304a\u3093","locale":"ja_jp"},{"id":"KanColle","name":"\u8266\u3053\u308cRPG","className":"KanColle","superClassName":"Base","sortKey":"\u304b\u3093\u3053\u308cRPG","locale":"ja_jp"},{"id":"BloodCrusade","name":"\u30d6\u30e9\u30c3\u30c9\u30fb\u30af\u30eb\u30bb\u30a4\u30c9","className":"BloodCrusade","superClassName":"Base","sortKey":"\u3075\u3089\u3064\u3068\u304f\u308b\u305b\u3044\u3068","locale":"ja_jp"},{"id":"AceKillerGene","name":"\u30a8\u30fc\u30b9\u30ad\u30e9\u30fc\u30b8\u30fc\u30f3","className":"AceKillerGene","superClassName":"GardenOrder","sortKey":"\u3048\u3048\u3059\u304d\u3089\u3042\u3057\u3044\u3093","locale":"ja_jp"},{"id":"GardenOrder","name":"\u30ac\u30fc\u30c7\u30f3\u30aa\u30fc\u30c0\u30fc","className":"GardenOrder","superClassName":"Base","sortKey":"\u304b\u3042\u3066\u3093\u304a\u304a\u305f\u3042","locale":"ja_jp"},{"id":"BloodMoon","name":"\u30d6\u30e9\u30c3\u30c9\u30e0\u30fc\u30f3","className":"BloodMoon","superClassName":"Base","sortKey":"\u3075\u3089\u3064\u3068\u3080\u3046\u3093","locale":"ja_jp"},{"id":"Bloodorium","name":"\u30d6\u30e9\u30c9\u30ea\u30a6\u30e0","className":"Bloodorium","superClassName":"Base","sortKey":"\u3075\u3089\u3068\u308a\u3046\u3080","locale":"ja_jp"},{"id":"NSSQ","name":"SRS\u3058\u3083\u306a\u3044\u4e16\u754c\u6a39\u306e\u8ff7\u5baeTRPG","className":"NSSQ","superClassName":"Base","sortKey":"\u3048\u3059\u3042\u3042\u308b\u3048\u3059\u3057\u3084\u306a\u3044\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046TRPG","locale":"ja_jp"},{"id":"KemonoNoMori","name":"\u7378\u30ce\u68ee","className":"KemonoNoMori","superClassName":"Base","sortKey":"\u3051\u3082\u306e\u306e\u3082\u308a","locale":"ja_jp"},{"id":"CardRanker","name":"\u30ab\u30fc\u30c9\u30e9\u30f3\u30ab\u30fc","className":"CardRanker","superClassName":"Base","sortKey":"\u304b\u3042\u3068\u3089\u3093\u304b\u3042","locale":"ja_jp"},{"id":"CastleInGray","name":"\u7070\u8272\u57ce\u7dba\u8b5a","className":"CastleInGray","superClassName":"Base","sortKey":"\u306f\u3044\u3044\u308d\u3057\u3088\u3046\u304d\u305f\u3093","locale":"ja_jp"},{"id":"Karukami","name":"\u30ab\u30eb\u30ab\u30df","className":"Karukami","superClassName":"Base","sortKey":"\u304b\u308b\u304b\u307f","locale":"ja_jp"},{"id":"Ainecadette","name":"\u30a8\u30cd\u30ab\u30c7\u30c3\u30c8","className":"Ainecadette","superClassName":"Base","sortKey":"\u3048\u306d\u304b\u3066\u3064\u3068","locale":"ja_jp"},{"id":"ChaosFlare","name":"\u30ab\u30aa\u30b9\u30d5\u30ec\u30a2","className":"ChaosFlare","superClassName":"Base","sortKey":"\u304b\u304a\u3059\u3075\u308c\u3042","locale":"ja_jp"},{"id":"Nuekagami","name":"\u9d7a\u93e1","className":"Nuekagami","superClassName":"Base","sortKey":"\u306c\u3048\u304b\u304b\u307f","locale":"ja_jp"},{"id":"KillDeathBusiness","name":"\u30ad\u30eb\u30c7\u30b9\u30d3\u30b8\u30cd\u30b9","className":"KillDeathBusiness","superClassName":"Base","sortKey":"\u304d\u308b\u3066\u3059\u3072\u3057\u306d\u3059","locale":"ja_jp"},{"id":"Chill","name":"Chill","className":"Chill","superClassName":"Base","sortKey":"\u3061\u308b","locale":"ja_jp"},{"id":"Airgetlamh","name":"\u6731\u306e\u5b64\u5854\u306e\u30a8\u30a2\u30b2\u30c8\u30e9\u30e0","className":"Airgetlamh","superClassName":"Base","sortKey":"\u3042\u3051\u306e\u3053\u3068\u3046\u306e\u3048\u3042\u3051\u3068\u3089\u3080","locale":"ja_jp"},{"id":"OneWayHeroics","name":"\u7247\u9053\u52c7\u8005TRPG","className":"OneWayHeroics","superClassName":"Base","sortKey":"\u304b\u305f\u307f\u3061\u3086\u3046\u3057\u3084TRPG","locale":"ja_jp"},{"id":"Chill3","name":"Chill 3rd Edition","className":"Chill3","superClassName":"Base","sortKey":"\u3061\u308b3","locale":"ja_jp"},{"id":"AlchemiaStruggle","name":"\u30a2\u30eb\u30b1\u30df\u30a2\u30fb\u30b9\u30c8\u30e9\u30b0\u30eb","className":"AlchemiaStruggle","superClassName":"Base","sortKey":"\u3042\u308b\u3051\u307f\u3042\u3059\u3068\u3089\u304f\u308b","locale":"ja_jp"},{"id":"CodeLayerd","name":"\u30b3\u30fc\u30c9\uff1a\u30ec\u30a4\u30e4\u30fc\u30c9","className":"CodeLayerd","superClassName":"Base","sortKey":"\u3053\u304a\u3068\u308c\u3044\u3084\u3042\u3068","locale":"ja_jp"},{"id":"EmbryoMachine","name":"\u30a8\u30e0\u30d6\u30ea\u30aa\u30de\u30b7\u30f3RPG","className":"EmbryoMachine","superClassName":"Base","sortKey":"\u3048\u3080\u3075\u308a\u304a\u307e\u3057\u3093RPG","locale":"ja_jp"},{"id":"ColossalHunter","name":"\u30b3\u30ed\u30c3\u30b5\u30eb\u30cf\u30f3\u30bf\u30fc","className":"ColossalHunter","superClassName":"Base","sortKey":"\u3053\u308d\u3064\u3055\u308b\u306f\u3093\u305f\u3042","locale":"ja_jp"},{"id":"KillDeathBusiness:Korean","name":"Kill Death Business (\ud55c\uad6d\uc5b4)","className":"KillDeathBusiness_Korean","superClassName":"KillDeathBusiness","sortKey":"\u56fd\u969b\u5316:Korean:Kill Death Business","locale":"ko_kr"},{"id":"KurayamiCrying","name":"\u30af\u30e9\u30e4\u30df\u30af\u30e9\u30a4\u30f3","className":"KurayamiCrying","superClassName":"Base","sortKey":"\u304f\u3089\u3084\u307f\u304f\u3089\u3044\u3093","locale":"ja_jp"},{"id":"Kutulu","name":"Kutulu","className":"Kutulu","superClassName":"Base","sortKey":"\u304f\u3068\u3046\u308b\u3046","locale":"ja_jp"},{"id":"OracleEngine","name":"\u30aa\u30e9\u30af\u30eb\u30a8\u30f3\u30b8\u30f3","className":"OracleEngine","superClassName":"Base","sortKey":"\u304a\u3089\u304f\u308b\u3048\u3093\u3057\u3093","locale":"ja_jp"},{"id":"Emoklore","name":"\u30a8\u30e2\u30af\u30ed\u30a2TRPG","className":"Emoklore","superClassName":"Base","sortKey":"\u3048\u3082\u304f\u308d\u3042TRPG","locale":"ja_jp"},{"id":"SwordWorld2.0","name":"\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.0","className":"SwordWorld2_0","superClassName":"SwordWorld","sortKey":"\u305d\u304a\u3068\u308f\u3042\u308b\u30682.0","locale":"ja_jp"},{"id":"KyokoShinshoku","name":"\u865a\u69cb\u4fb5\u8755TRPG","className":"KyokoShinshoku","superClassName":"Base","sortKey":"\u304d\u3088\u3053\u3046\u3057\u3093\u3057\u3088\u304fTRPG","locale":"ja_jp"},{"id":"EndBreaker","name":"\u30a8\u30f3\u30c9\u30d6\u30ec\u30a4\u30ab\u30fc\uff01","className":"EndBreaker","superClassName":"Base","sortKey":"\u3048\u3093\u3068\u3075\u308c\u3044\u304b\u3042","locale":"ja_jp"},{"id":"SwordWorld2.5","name":"\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.5","className":"SwordWorld2_5","superClassName":"SwordWorld2_0","sortKey":"\u305d\u304a\u3068\u308f\u3042\u308b\u30682.5","locale":"ja_jp"},{"id":"Comes","name":"\u30ab\u30e0\u30ba","className":"Comes","superClassName":"Base","sortKey":"\u304b\u3080\u3059","locale":"ja_jp"},{"id":"Alsetto","name":"\u8a69\u7247\u306e\u30a2\u30eb\u30bb\u30c3\u30c8","className":"Alsetto","superClassName":"Base","sortKey":"\u3046\u305f\u304b\u305f\u306e\u3042\u308b\u305b\u3064\u3068","locale":"ja_jp"},{"id":"ConvictorDrive","name":"\u30b3\u30f3\u30f4\u30a3\u30af\u30bf\u30fc\u30fb\u30c9\u30e9\u30a4\u30d6","className":"ConvictorDrive","superClassName":"Base","sortKey":"\u3053\u3093\u3046\u3044\u304f\u305f\u3042\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"EtrianOdysseySRS","name":"\u4e16\u754c\u6a39\u306e\u8ff7\u5baeSRS","className":"EtrianOdysseySRS","superClassName":"SRS","sortKey":"\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046SRS","locale":"ja_jp"},{"id":"Alshard","name":"\u30a2\u30eb\u30b7\u30e3\u30fc\u30c9","className":"Alshard","superClassName":"SRS","sortKey":"\u3042\u308b\u3057\u3084\u3042\u3068","locale":"ja_jp"},{"id":"SRS","name":"\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9RPG\u30b7\u30b9\u30c6\u30e0","className":"SRS","superClassName":"Base","sortKey":"\u3059\u305f\u3093\u305f\u3042\u3068RPG\u3057\u3059\u3066\u3080","locale":"ja_jp"},{"id":"LiveraDoll","name":"\u7d2b\u7e1e\u306e\u30ea\u30f4\u30e9\u30c9\u30fc\u30eb","className":"LiveraDoll","superClassName":"Base","sortKey":"\u3057\u3057\u307e\u306e\u308a\u3046\u3089\u3068\u304a\u308b","locale":"ja_jp"},{"id":"CrashWorld","name":"\u589c\u843d\u4e16\u754c","className":"CrashWorld","superClassName":"Base","sortKey":"\u3064\u3044\u3089\u304f\u305b\u304b\u3044","locale":"ja_jp"},{"id":"Cthulhu","name":"\u30af\u30c8\u30a5\u30eb\u30d5\u795e\u8a71TRPG","className":"Cthulhu","superClassName":"Base","sortKey":"\u304f\u3068\u3046\u308b\u3075\u3057\u3093\u308fTRPG","locale":"ja_jp"},{"id":"Fiasco","name":"\u30d5\u30a3\u30a2\u30b9\u30b3","className":"Fiasco","superClassName":"Base","sortKey":"\u3075\u3044\u3042\u3059\u3053","locale":"ja_jp"},{"id":"Oukahoushin3rd","name":"\u592e\u83ef\u5c01\u795eRPG \u7b2c\u4e09\u7248","className":"Oukahoushin3rd","superClassName":"Base","sortKey":"\u304a\u3046\u304b\u307b\u3046\u3057\u3093RPG3","locale":"ja_jp"},{"id":"LogHorizon","name":"\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG","className":"LogHorizon","superClassName":"Base","sortKey":"\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG","locale":"ja_jp"},{"id":"OrgaRain","name":"\u5728\u308a\u3066\u904d\u304f\u30aa\u30eb\u30ac\u30ec\u30a4\u30f3","className":"OrgaRain","superClassName":"Base","sortKey":"\u3042\u308a\u3066\u3042\u307e\u306d\u304f\u304a\u308b\u304b\u308c\u3044\u3093","locale":"ja_jp"},{"id":"Paradiso","name":"\u30c1\u30a7\u30ec\u30b9\u30c6\u8272\u306e\u30d1\u30e9\u30c7\u30a3\u30fc\u30be","className":"Paradiso","superClassName":"Base","sortKey":"\u3061\u3048\u308c\u3059\u3066\u3044\u308d\u306e\u306f\u3089\u3066\u3044\u3044\u305d","locale":"ja_jp"},{"id":"TalesFromTheLoop","name":"\u30b6\u30fb\u30eb\u30fc\u30d7TRPG","className":"TalesFromTheLoop","superClassName":"Base","sortKey":"\u3055\u308b\u3046\u3075TRPG","locale":"ja_jp"},{"id":"SwordWorld:SimplifiedChinese","name":"\u5251\u4e16\u754c","className":"SwordWorld_SimplifiedChinese","superClassName":"SwordWorld","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c","locale":"zh_hans"},{"id":"FateCoreSystem","name":"Fate Core System","className":"FateCoreSystem","superClassName":"Base","sortKey":"\u3075\u3048\u3044\u3068\u3053\u3042\u3057\u3059\u3066\u3080","locale":"ja_jp"},{"id":"SwordWorld2.5:SimplifiedChinese","name":"\u5251\u4e16\u754c2.5","className":"SwordWorld2_5_SimplifiedChinese","superClassName":"SwordWorld2_5","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c2.5","locale":"zh_hans"},{"id":"Fiasco:Korean","name":"\ud53c\uc544\uc2a4\ucf54","className":"Fiasco_Korean","superClassName":"Fiasco","sortKey":"\u56fd\u969b\u5316:Korean:\ud53c\uc544\uc2a4\ucf54","locale":"ko_kr"},{"id":"FilledWith","name":"\u30d5\u30a3\u30eb\u30c8\u30a6\u30a3\u30ba","className":"FilledWith","superClassName":"Base","sortKey":"\u3075\u3044\u308b\u3068\u3046\u3044\u3059","locale":"ja_jp"},{"id":"TenkaRyouran","name":"\u5929\u4e0b\u7e5a\u4e71","className":"TenkaRyouran","superClassName":"SRS","sortKey":"\u3066\u3093\u304b\u308a\u3088\u3046\u3089\u3093","locale":"ja_jp"},{"id":"SwordWorld2.0:SimplifiedChinese","name":"\u5251\u4e16\u754c2.0","className":"SwordWorld2_0_SimplifiedChinese","superClassName":"SwordWorld2_0","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c2.0","locale":"zh_hans"},{"id":"Liminal","name":"\u30ea\u30df\u30ca\u30eb","className":"Liminal","superClassName":"Base","sortKey":"\u308a\u307f\u306a\u308b","locale":"ja_jp"},{"id":"TokumeiTenkousei","name":"\u7279\u547d\u8ee2\u653b\u751f","className":"TokumeiTenkousei","superClassName":"Base","sortKey":"\u3068\u304f\u3081\u3044\u3066\u3093\u3053\u3046\u305b\u3044","locale":"ja_jp"},{"id":"TherapieSein","name":"\u30bb\u30e9\u30d5\u30a3\u30b6\u30a4\u30f3","className":"TherapieSein","superClassName":"Base","sortKey":"\u305b\u3089\u3075\u3044\u3055\u3044\u3093","locale":"ja_jp"},{"id":"TokyoNova","name":"\u30c8\u30fc\u30ad\u30e7\u30fcN\u25ceVA","className":"TokyoNova","superClassName":"Base","sortKey":"\u3068\u304a\u304d\u3088\u304a\u306e\u306f","locale":"ja_jp"},{"id":"Torg","name":"\u30c8\u30fc\u30b0","className":"Torg","superClassName":"Base","sortKey":"\u3068\u304a\u304f","locale":"ja_jp"},{"id":"TokyoGhostResearch","name":"\u6771\u4eac\u30b4\u30fc\u30b9\u30c8\u30ea\u30b5\u30fc\u30c1","className":"TokyoGhostResearch","superClassName":"Base","sortKey":"\u3068\u3046\u304d\u3088\u3046\u3053\u304a\u3059\u3068\u308a\u3055\u3042\u3061","locale":"ja_jp"},{"id":"Paranoia","name":"\u30d1\u30e9\u30ce\u30a4\u30a2","className":"Paranoia","superClassName":"Base","sortKey":"\u306f\u3089\u306e\u3044\u3042","locale":"ja_jp"},{"id":"ParanoiaRebooted","name":"\u30d1\u30e9\u30ce\u30a4\u30a2 \u30ea\u30d6\u30fc\u30c6\u30c3\u30c9","className":"ParanoiaRebooted","superClassName":"Base","sortKey":"\u306f\u3089\u306e\u3044\u3042\u308a\u3075\u3046\u3066\u3064\u3068","locale":"ja_jp"},{"id":"Cthulhu7th","name":"\u65b0\u30af\u30c8\u30a5\u30eb\u30d5\u795e\u8a71TRPG","className":"Cthulhu7th","superClassName":"Base","sortKey":"\u3057\u3093\u304f\u3068\u3046\u308b\u3075\u3057\u3093\u308fTRPG","locale":"ja_jp"},{"id":"AlterRaise","name":"\u30a2\u30eb\u30c8\u30ec\u30a4\u30ba","className":"AlterRaise","superClassName":"Base","sortKey":"\u3042\u308b\u3068\u308c\u3044\u3059","locale":"ja_jp"},{"id":"ParasiteBlood","name":"\u30d1\u30e9\u30b5\u30a4\u30c8\u30d6\u30e9\u30c3\u30c9RPG","className":"ParasiteBlood","superClassName":"DemonParasite","sortKey":"\u306f\u3089\u3055\u3044\u3068\u3075\u3089\u3064\u3068RPG","locale":"ja_jp"},{"id":"LogHorizon:Korean","name":"\ub85c\uadf8 \ud638\ub77c\uc774\uc98c","className":"LogHorizon_Korean","superClassName":"LogHorizon","sortKey":"\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c","locale":"ko_kr"},{"id":"LostRecord","name":"\u30ed\u30b9\u30c8\u30ec\u30b3\u30fc\u30c9","className":"LostRecord","superClassName":"Base","sortKey":"\u308d\u3059\u3068\u308c\u3053\u304a\u3068","locale":"ja_jp"},{"id":"LostRoyal","name":"\u30ed\u30b9\u30c8\u30ed\u30a4\u30e4\u30eb","className":"LostRoyal","superClassName":"Base","sortKey":"\u308d\u3059\u3068\u308d\u3044\u3084\u308b","locale":"ja_jp"},{"id":"PastFutureParadox","name":"\u30d1\u30b9\u30c8\u30d5\u30e5\u30fc\u30c1\u30e3\u30fc\u30d1\u30e9\u30c9\u30c3\u30af\u30b9","className":"PastFutureParadox","superClassName":"Base","sortKey":"\u306f\u3059\u3068\u3075\u3086\u3046\u3061\u3084\u3042\u306f\u3089\u3068\u3064\u304f\u3059","locale":"ja_jp"},{"id":"Amadeus","name":"\u30a2\u30de\u30c7\u30a6\u30b9","className":"Amadeus","superClassName":"Base","sortKey":"\u3042\u307e\u3066\u3046\u3059","locale":"ja_jp"},{"id":"Pathfinder","name":"Pathfinder","className":"Pathfinder","superClassName":"DungeonsAndDragons","sortKey":"\u306f\u3059\u3075\u3042\u3044\u3093\u305f\u3042","locale":"ja_jp"},{"id":"Peekaboo","name":"\u30d4\u30fc\u30ab\u30fc\u30d6\u30fc","className":"Peekaboo","superClassName":"Base","sortKey":"\u3072\u3044\u304b\u3042\u3075\u3046","locale":"ja_jp"},{"id":"Pendragon","name":"\u30da\u30f3\u30c9\u30e9\u30b4\u30f3","className":"Pendragon","superClassName":"Base","sortKey":"\u3078\u3093\u3068\u3089\u3053\u3093","locale":"ja_jp"},{"id":"PersonaO","name":"\u30da\u30eb\u30bd\u30caTRPG-O","className":"PersonaO","superClassName":"Base","sortKey":"\u3078\u308b\u305d\u306aTRPGO","locale":"ja_jp"},{"id":"Torg1.5","name":"\u30c8\u30fc\u30b01.5\u7248","className":"Torg1_5","superClassName":"Torg","sortKey":"\u3068\u304a\u304f1.5","locale":"ja_jp"},{"id":"FullMetalPanic","name":"\u30d5\u30eb\u30e1\u30bf\u30eb\u30fb\u30d1\u30cb\u30c3\u30af\uff01RPG","className":"FullMetalPanic","superClassName":"SRS","sortKey":"\u3075\u308b\u3081\u305f\u308b\u306f\u306b\u3064\u304fRPG","locale":"ja_jp"},{"id":"Amadeus:Korean","name":"\uc544\ub9c8\ub370\uc6b0\uc2a4","className":"Amadeus_Korean","superClassName":"Amadeus","sortKey":"\u56fd\u969b\u5316:Korean:\uc544\ub9c8\ub370\uc6b0\uc2a4","locale":"ko_kr"},{"id":"FullFace","name":"\u30d5\u30eb\u30d5\u30a7\u30a4\u30b9","className":"FullFace","superClassName":"Base","sortKey":"\u3075\u308b\u3075\u3048\u3044\u3059","locale":"ja_jp"},{"id":"AngelGear","name":"\u30a8\u30f3\u30bc\u30eb\u30ae\u30a2 \u5929\u4f7f\u5927\u6226TRPG The 2nd Editon","className":"AngelGear","superClassName":"Base","sortKey":"\u3048\u3093\u305b\u308b\u304d\u30422","locale":"ja_jp"},{"id":"MagicaLogia","name":"\u30de\u30ae\u30ab\u30ed\u30ae\u30a2","className":"MagicaLogia","superClassName":"Base","sortKey":"\u307e\u304d\u304b\u308d\u304d\u3042","locale":"ja_jp"},{"id":"Postman","name":"\u58ca\u308c\u305f\u4e16\u754c\u306e\u30dd\u30b9\u30c8\u30de\u30f3","className":"Postman","superClassName":"Base","sortKey":"\u3053\u308f\u308c\u305f\u305b\u304b\u3044\u306e\u307b\u3059\u3068\u307e\u3093","locale":"ja_jp"},{"id":"PhantasmAdventure","name":"\u30d5\u30a1\u30f3\u30bf\u30ba\u30e0\u30fb\u30a2\u30c9\u30d9\u30f3\u30c1\u30e3\u30fc","className":"PhantasmAdventure","superClassName":"Base","sortKey":"\u3075\u3042\u3093\u305f\u3059\u3080\u3042\u3068\u3078\u3093\u3061\u3084\u3042","locale":"ja_jp"},{"id":"FutariSousa","name":"\u30d5\u30bf\u30ea\u30bd\u30a6\u30b5","className":"FutariSousa","superClassName":"Base","sortKey":"\u3075\u305f\u308a\u305d\u3046\u3055","locale":"ja_jp"},{"id":"AnimaAnimus","name":"\u30a2\u30cb\u30de\u30a2\u30cb\u30e0\u30b9","className":"AnimaAnimus","superClassName":"Base","sortKey":"\u3042\u306b\u307e\u3042\u306b\u3080\u3059","locale":"ja_jp"},{"id":"FutariSousa:Korean","name":"\ub458\uc774\uc11c \uc218\uc0ac","className":"FutariSousa_Korean","superClassName":"FutariSousa","sortKey":"\u56fd\u969b\u5316:Korean:\ub458\uc774\uc11c \uc218\uc0ac","locale":"ko_kr"},{"id":"Garako","name":"\u30ac\u30e9\u30b3\u3068\u7834\u754c\u306e\u5854","className":"Garako","superClassName":"Base","sortKey":"\u304b\u3089\u3053\u3068\u306f\u304b\u3044\u306e\u3068\u3046","locale":"ja_jp"},{"id":"PulpCthulhu","name":"\u30d1\u30eb\u30d7\u30fb\u30af\u30c8\u30a5\u30eb\u30d5","className":"PulpCthulhu","superClassName":"Cthulhu7th","sortKey":"\u306f\u308b\u3075\u304f\u3068\u3046\u308b\u3075","locale":"ja_jp"},{"id":"AniMalus","name":"\u30a2\u30cb\u30de\u30e9\u30b9","className":"AniMalus","superClassName":"Base","sortKey":"\u3042\u306b\u307e\u3089\u3059","locale":"ja_jp"},{"id":"Raisondetre","name":"\u53db\u9006\u30ec\u30be\u30f3\u30c7\u30fc\u30c8\u30eb","className":"Raisondetre","superClassName":"Base","sortKey":"\u306f\u3093\u304d\u3084\u304f\u308c\u305d\u3093\u3066\u3068\u304a\u308b","locale":"ja_jp"},{"id":"GehennaAn","name":"\u30b2\u30d8\u30ca\u30fb\u30a2\u30ca\u30b9\u30bf\u30b7\u30b9","className":"GehennaAn","superClassName":"Base","sortKey":"\u3051\u3078\u306a\u3042\u306a\u3059\u305f\u3057\u3059","locale":"ja_jp"},{"id":"MagicaLogia:Korean","name":"\ub9c8\uae30\uce74\ub85c\uae30\uc544","className":"MagicaLogia_Korean","superClassName":"MagicaLogia","sortKey":"\u56fd\u969b\u5316:Korean:\ub9c8\uae30\uce74\ub85c\uae30\uc544","locale":"ko_kr"},{"id":"MagicaLogia:SimplifiedChinese","name":"\u9b54\u5bfc\u4e66\u5927\u6218","className":"MagicaLogia_SimplifiedChinese","superClassName":"MagicaLogia","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u9b54\u5bfc\u4e66\u5927\u6218","locale":"zh_hans"},{"id":"MamonoScramble","name":"\u30de\u30e2\u30ce\u30b9\u30af\u30e9\u30f3\u30d6\u30eb","className":"MamonoScramble","superClassName":"Base","sortKey":"\u307e\u3082\u306e\u3059\u304f\u3089\u3093\u3075\u308b","locale":"ja_jp"},{"id":"RecordOfLodossWar","name":"\u30ed\u30fc\u30c9\u30b9\u5cf6\u6226\u8a18RPG","className":"RecordOfLodossWar","superClassName":"Base","sortKey":"\u308d\u304a\u3068\u3059\u3068\u3046\u305b\u3093\u304dRPG","locale":"ja_jp"},{"id":"Aoharubaan","name":"\u3042\u304a\u306f\u308b\u3070\u30fc\u3093\u3063","className":"Aoharubaan","superClassName":"Base","sortKey":"\u3042\u304a\u306f\u308b\u306f\u3042\u3093\u3064","locale":"ja_jp"},{"id":"MeikyuDays","name":"\u8ff7\u5bae\u30c7\u30a4\u30ba","className":"MeikyuDays","superClassName":"Base","sortKey":"\u3081\u3044\u304d\u3086\u3046\u3066\u3044\u3059","locale":"ja_jp"},{"id":"TorgEternity","name":"\u30c8\u30fc\u30b0 \u30a8\u30bf\u30cb\u30c6\u30a3","className":"TorgEternity","superClassName":"Base","sortKey":"\u3068\u304a\u304f\u3048\u305f\u306b\u3066\u3044","locale":"ja_jp"},{"id":"MeikyuKingdom","name":"\u8ff7\u5bae\u30ad\u30f3\u30b0\u30c0\u30e0","className":"MeikyuKingdom","superClassName":"Base","sortKey":"\u3081\u3044\u304d\u3086\u3046\u304d\u3093\u304f\u305f\u3080","locale":"ja_jp"},{"id":"GeishaGirlwithKatana","name":"\u30b2\u30a4\u30b7\u30e3\u30fb\u30ac\u30fc\u30eb\u30fb\u30a6\u30a3\u30ba\u30fb\u30ab\u30bf\u30ca","className":"GeishaGirlwithKatana","superClassName":"Base","sortKey":"\u3051\u3044\u3057\u3084\u304b\u3042\u308b\u3046\u3044\u3059\u304b\u305f\u306a","locale":"ja_jp"},{"id":"RecordOfSteam","name":"Record of Steam","className":"RecordOfSteam","superClassName":"Base","sortKey":"\u308c\u3053\u304a\u3068\u304a\u3075\u3059\u3061\u3044\u3080","locale":"ja_jp"},{"id":"ToshiakiHolyGrailWar","name":"\u3068\u3057\u3042\u304d\u306e\u8056\u676f\u6226\u4e89TRPG","className":"ToshiakiHolyGrailWar","superClassName":"Base","sortKey":"\u3068\u3057\u3042\u304d\u306e\u305b\u3044\u306f\u3044\u305b\u3093\u305d\u3046TRPG","locale":"ja_jp"},{"id":"Arianrhod","name":"\u30a2\u30ea\u30a2\u30f3\u30ed\u30c3\u30c9RPG","className":"Arianrhod","superClassName":"Base","sortKey":"\u3042\u308a\u3042\u3093\u308d\u3064\u3068RPG","locale":"ja_jp"},{"id":"Cthulhu7th:ChineseTraditional","name":"\u514b\u8607\u9b6f\u795e\u8a71\u7b2c7\u7248","className":"Cthulhu7th_ChineseTraditional","superClassName":"Base","sortKey":"\u56fd\u969b\u5316:Chinese Traditional:\u514b\u8607\u9b6f\u795e\u8a71\u7b2c7\u7248","locale":"ja_jp"},{"id":"ArknightsFan","name":"\u30a2\u30fc\u30af\u30ca\u30a4\u30c4TRPG by Dapto","className":"ArknightsFan","superClassName":"Base","sortKey":"\u3042\u3042\u304f\u306a\u3044\u3064TRPG\u306f\u3044\u305f\u3075\u3068","locale":"ja_jp"},{"id":"GhostLive","name":"\u5b9f\u6cc1\u30b4\u30fc\u30b9\u30c8\u30e9\u30a4\u30f4","className":"GhostLive","superClassName":"Base","sortKey":"\u3057\u3064\u304d\u3088\u3046\u3053\u304a\u3059\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"GoblinSlayer","name":"\u30b4\u30d6\u30ea\u30f3\u30b9\u30ec\u30a4\u30e4\u30fcTRPG","className":"GoblinSlayer","superClassName":"Base","sortKey":"\u3053\u3075\u308a\u3093\u3059\u308c\u3044\u3084\u3042TRPG","locale":"ja_jp"},{"id":"Revulture","name":"\u5149\u7815\u306e\u30ea\u30f4\u30a1\u30eb\u30c1\u30e3\u30fc","className":"Revulture","superClassName":"Base","sortKey":"\u3053\u3046\u3055\u3044\u306e\u308a\u3046\u3042\u308b\u3061\u3084\u3042","locale":"ja_jp"},{"id":"TrinitySeven","name":"\u30c8\u30ea\u30cb\u30c6\u30a3\u30bb\u30d6\u30f3RPG","className":"TrinitySeven","superClassName":"Base","sortKey":"\u3068\u308a\u306b\u3066\u3044\u305b\u3075\u3093RPG","locale":"ja_jp"},{"id":"RokumonSekai2","name":"\u516d\u9580\u4e16\u754cRPG \u30bb\u30ab\u30f3\u30c9\u30a8\u30c7\u30a3\u30b7\u30e7\u30f3","className":"RokumonSekai2","superClassName":"Base","sortKey":"\u308d\u304f\u3082\u3093\u305b\u304b\u3044RPG2","locale":"ja_jp"},{"id":"Cthulhu7th:Korean","name":"\ud06c\ud234\ub8e8\uc758 \ubd80\ub984 7\ud310","className":"Cthulhu7th_Korean","superClassName":"Base","sortKey":"\u56fd\u969b\u5316:Korean:\ud06c\ud234\ub8e8\uc758 \ubd80\ub984 7\ud310","locale":"ja_jp"},{"id":"CthulhuTech","name":"\u30af\u30c8\u30a5\u30eb\u30d5\u30c6\u30c3\u30af","className":"CthulhuTech","superClassName":"Base","sortKey":"\u304f\u3068\u3046\u308b\u3075\u3066\u3064\u304f","locale":"ja_jp"},{"id":"TunnelsAndTrolls","name":"\u30c8\u30f3\u30cd\u30eb\u30ba\uff06\u30c8\u30ed\u30fc\u30eb\u30ba","className":"TunnelsAndTrolls","superClassName":"Base","sortKey":"\u3068\u3093\u306d\u308b\u3059\u3042\u3093\u3068\u3068\u308d\u304a\u308b\u3059","locale":"ja_jp"},{"id":"ArsMagica","name":"\u30a2\u30eb\u30b9\u30de\u30ae\u30ab","className":"ArsMagica","superClassName":"Base","sortKey":"\u3042\u308b\u3059\u307e\u304d\u304b","locale":"ja_jp"},{"id":"RoleMaster","name":"\u30ed\u30fc\u30eb\u30de\u30b9\u30bf\u30fc","className":"RoleMaster","superClassName":"Base","sortKey":"\u308d\u304a\u308b\u307e\u3059\u305f\u3042","locale":"ja_jp"},{"id":"RuinBreakers","name":"\u30eb\u30fc\u30a4\u30f3\u30d6\u30ec\u30a4\u30ab\u30fc\u30ba","className":"RuinBreakers","superClassName":"Base","sortKey":"\u308b\u3046\u3044\u3093\u3075\u308c\u3044\u304b\u3042\u3059","locale":"ja_jp"},{"id":"GoldenSkyStories","name":"\u3086\u3046\u3084\u3051\u3053\u3084\u3051","className":"GoldenSkyStories","superClassName":"Base","sortKey":"\u3086\u3046\u3084\u3051\u3053\u3084\u3051","locale":"ja_jp"},{"id":"Gorilla","name":"\u30b4\u30ea\u30e9TRPG","className":"Gorilla","superClassName":"Base","sortKey":"\u3053\u308a\u3089TRPG","locale":"ja_jp"},{"id":"RuneQuest","name":"\u30eb\u30fc\u30f3\u30af\u30a8\u30b9\u30c8","className":"RuneQuest","superClassName":"Base","sortKey":"\u308b\u3046\u3093\u304f\u3048\u3059\u3068","locale":"ja_jp"},{"id":"GranCrest","name":"\u30b0\u30e9\u30f3\u30af\u30ec\u30b9\u30c8RPG","className":"GranCrest","superClassName":"Base","sortKey":"\u304f\u3089\u3093\u304f\u308c\u3059\u3068RPG","locale":"ja_jp"},{"id":"GundamSentinel","name":"\u30ac\u30f3\u30c0\u30e0\u30fb\u30bb\u30f3\u30c1\u30cd\u30ebRPG","className":"GundamSentinel","superClassName":"Base","sortKey":"\u304b\u3093\u305f\u3080\u305b\u3093\u3061\u306d\u308b","locale":"ja_jp"},{"id":"TwilightGunsmoke","name":"\u30c8\u30ef\u30a4\u30e9\u30a4\u30c8\u30ac\u30f3\u30b9\u30e2\u30fc\u30af","className":"TwilightGunsmoke","superClassName":"Base","sortKey":"\u3068\u308f\u3044\u3089\u3044\u3068\u304b\u3093\u3059\u3082\u304a\u304f","locale":"ja_jp"},{"id":"AssaultEngine","name":"\u30a2\u30b5\u30eb\u30c8\u30a8\u30f3\u30b8\u30f3","className":"AssaultEngine","superClassName":"Base","sortKey":"\u3042\u3055\u308b\u3068\u3048\u3093\u3057\u3093","locale":"ja_jp"},{"id":"RuneQuestRoleplayingInGlorantha","name":"\u30eb\u30fc\u30f3\u30af\u30a8\u30b9\u30c8\uff1a\u30ed\u30fc\u30eb\u30d7\u30ec\u30a4\u30f3\u30b0\u30fb\u30a4\u30f3\u30fb\u30b0\u30ed\u30fc\u30e9\u30f3\u30b5","className":"RuneQuestRoleplayingInGlorantha","superClassName":"Base","sortKey":"\u308b\u3046\u3093\u304f\u3048\u3059\u30684","locale":"ja_jp"},{"id":"UnsungDuet","name":"\u30a2\u30f3\u30b5\u30f3\u30b0\u30fb\u30c7\u30e5\u30a8\u30c3\u30c8","className":"UnsungDuet","superClassName":"Base","sortKey":"\u3042\u3093\u3055\u3093\u304f\u3066\u3086\u3048\u3064\u3068","locale":"ja_jp"},{"id":"Cthulhu:ChineseTraditional","name":"\u514b\u8607\u9b6f\u795e\u8a71","className":"Cthulhu_ChineseTraditional","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:Chinese Traditional:\u514b\u8607\u9b6f\u795e\u8a71","locale":"zh_hant"},{"id":"Cthulhu:Korean","name":"\ud06c\ud234\ub8e8","className":"Cthulhu_Korean","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:Korean:\ud06c\ud234\ub8e8","locale":"ko_kr"},{"id":"Cthulhu:SimplifiedChinese","name":"\u514b\u82cf\u9c81\u7684\u547c\u5524 \u7b2c\u516d\u7248","className":"Cthulhu_SimplifiedChinese","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u514b\u82cf\u9c81\u7684\u547c\u5524 \u7b2c\u516d\u7248","locale":"zh_hans"},{"id":"Avandner","name":"\u9ed2\u7d62\u306e\u30a2\u30f4\u30a1\u30f3\u30c9\u30ca\u30fc","className":"Avandner","superClassName":"Base","sortKey":"\u3053\u3064\u3051\u3093\u306e\u3042\u3046\u3042\u3093\u3068\u306a\u3042","locale":"ja_jp"},{"id":"Ayabito","name":"\u3042\u3084\u3073\u3068","className":"Ayabito","superClassName":"Base","sortKey":"\u3042\u3084\u3072\u3068","locale":"ja_jp"},{"id":"CyberpunkRed","name":"\u30b5\u30a4\u30d0\u30fc\u30d1\u30f3\u30afRED","className":"CyberpunkRed","superClassName":"Base","sortKey":"\u3055\u3044\u306f\u3042\u306f\u3093\u304f\u308c\u3064\u3068","locale":"ja_jp"},{"id":"Ryutama","name":"\u308a\u3085\u3046\u305f\u307e","className":"Ryutama","superClassName":"Base","sortKey":"\u308a\u3086\u3046\u305f\u307e","locale":"ja_jp"},{"id":"RyuTuber","name":"\u30ea\u30e5\u30fc\u30c1\u30e5\u30fc\u30d0\u30fc\u3068\u3061\u3044\u3055\u306a\u5947\u8de1","className":"RyuTuber","superClassName":"Base","sortKey":"\u308a\u3086\u3046\u3061\u3086\u3046\u306f\u3042\u3068\u3061\u3044\u3055\u306a\u304d\u305b\u304d","locale":"ja_jp"},{"id":"Utakaze","name":"\u30a6\u30bf\u30ab\u30bc","className":"Utakaze","superClassName":"Base","sortKey":"\u3046\u305f\u304b\u305b","locale":"ja_jp"},{"id":"Bakenokawa","name":"\u30d0\u30b1\u30ce\u30ab\u30ef","className":"Bakenokawa","superClassName":"Base","sortKey":"\u306f\u3051\u306e\u304b\u308f","locale":"ja_jp"},{"id":"Gundog","name":"\u30ac\u30f3\u30c9\u30c3\u30b0","className":"Gundog","superClassName":"Base","sortKey":"\u304b\u3093\u3068\u3064\u304f","locale":"ja_jp"},{"id":"VampireTheMasquerade5th","name":"Vampire: The Masquerade 5th Edition","className":"VampireTheMasquerade5th","superClassName":"Base","sortKey":"\u3046\u3042\u3093\u306f\u3044\u3042\u3055\u307e\u3059\u304b\u308c\u3048\u30685","locale":"ja_jp"},{"id":"BBN","name":"BBNTRPG","className":"BBN","superClassName":"Base","sortKey":"\u3072\u3044\u3072\u3044\u3048\u306cTRPG","locale":"ja_jp"},{"id":"GundogRevised","name":"\u30ac\u30f3\u30c9\u30c3\u30b0\u30fb\u30ea\u30f4\u30a1\u30a4\u30ba\u30c9","className":"GundogRevised","superClassName":"Base","sortKey":"\u304b\u3093\u3068\u3064\u304f\u308a\u3046\u3042\u3044\u3059\u3068","locale":"ja_jp"},{"id":"SajinsenkiAGuS","name":"\u7802\u5875\u6226\u6a5f\u30a2\u30fc\u30ac\u30b9","className":"SajinsenkiAGuS","superClassName":"Base","sortKey":"\u3055\u3057\u3093\u305b\u3093\u304d\u3042\u3042\u304b\u3059","locale":"ja_jp"},{"id":"GundogZero","name":"\u30ac\u30f3\u30c9\u30c3\u30b0\u30bc\u30ed","className":"GundogZero","superClassName":"Gundog","sortKey":"\u304b\u3093\u3068\u3064\u304f\u305b\u308d","locale":"ja_jp"},{"id":"GURPS","name":"\u30ac\u30fc\u30d7\u30b9","className":"GURPS","superClassName":"Base","sortKey":"\u304b\u3042\u3075\u3059","locale":"ja_jp"},{"id":"BadLife","name":"\u30d0\u30c3\u30c9\u30e9\u30a4\u30d5","className":"BadLife","superClassName":"Base","sortKey":"\u306f\u3064\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"SajinsenkiAGuS2E","name":"\u7802\u5875\u6226\u6a5f\u30a2\u30fc\u30ac\u30b92ndEdition","className":"SajinsenkiAGuS2E","superClassName":"SajinsenkiAGuS","sortKey":"\u3055\u3057\u3093\u305b\u3093\u304d\u3042\u3042\u304b\u30592","locale":"ja_jp"},{"id":"Ventangle","name":"Ventangle","className":"Ventangle","superClassName":"Base","sortKey":"\u3046\u3048\u3093\u305f\u3093\u304f\u308b","locale":"ja_jp"},{"id":"GurpsFW","name":"\u30ac\u30fc\u30d7\u30b9\u30d5\u30a3\u30eb\u30c8\u30a6\u30a3\u30ba","className":"GurpsFW","superClassName":"Base","sortKey":"\u304b\u3042\u3075\u3059\u3075\u3044\u308b\u3068\u3046\u3044\u3059","locale":"ja_jp"},{"id":"SamsaraBallad","name":"\u30b5\u30f3\u30b5\u30fc\u30e9\u30fb\u30d0\u30e9\u30c3\u30c9","className":"SamsaraBallad","superClassName":"Base","sortKey":"\u3055\u3093\u3055\u3042\u3089\u306f\u3089\u3064\u3068","locale":"ja_jp"},{"id":"Villaciel","name":"\u84bc\u5929\u306e\u30f4\u30a3\u30e9\u30b7\u30a8\u30eb","className":"Villaciel","superClassName":"Base","sortKey":"\u305d\u3046\u3066\u3093\u306e\u3046\u3044\u3089\u3057\u3048\u308b","locale":"ja_jp"},{"id":"BarnaKronika","name":"\u30d0\u30eb\u30ca\u30fb\u30af\u30ed\u30cb\u30ab","className":"BarnaKronika","superClassName":"Base","sortKey":"\u306f\u308b\u306a\u304f\u308d\u306b\u304b","locale":"ja_jp"},{"id":"Satasupe","name":"\u30b5\u30bf\u30b9\u30da","className":"Satasupe","superClassName":"Base","sortKey":"\u3055\u305f\u3059\u3078","locale":"ja_jp"},{"id":"DarkBlaze","name":"\u30c0\u30fc\u30af\u30d6\u30ec\u30a4\u30ba","className":"DarkBlaze","superClassName":"Base","sortKey":"\u305f\u3042\u304f\u3075\u308c\u3044\u3059","locale":"ja_jp"},{"id":"MeikyuKingdomBasic","name":"\u8ff7\u5bae\u30ad\u30f3\u30b0\u30c0\u30e0 \u57fa\u672c\u30eb\u30fc\u30eb\u30d6\u30c3\u30af","className":"MeikyuKingdomBasic","superClassName":"MeikyuKingdom","sortKey":"\u3081\u3044\u304d\u3086\u3046\u304d\u3093\u304f\u305f\u3080\u304d\u307b\u3093\u308b\u3046\u308b\u3075\u3064\u304f","locale":"ja_jp"},{"id":"DarkDaysDrive","name":"\u30c0\u30fc\u30af\u30c7\u30a4\u30ba\u30c9\u30e9\u30a4\u30d6","className":"DarkDaysDrive","superClassName":"Base","sortKey":"\u305f\u3042\u304f\u3066\u3044\u3059\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"HarnMaster","name":"\u30cf\u30fc\u30f3\u30de\u30b9\u30bf\u30fc","className":"HarnMaster","superClassName":"Base","sortKey":"\u306f\u3042\u3093\u307e\u3059\u305f\u3042","locale":"ja_jp"},{"id":"BattleTech","name":"\u30d0\u30c8\u30eb\u30c6\u30c3\u30af","className":"BattleTech","superClassName":"Base","sortKey":"\u306f\u3068\u308b\u3066\u3064\u304f","locale":"ja_jp"},{"id":"DarkSouls","name":"\u30c0\u30fc\u30af\u30bd\u30a6\u30ebTRPG","className":"DarkSouls","superClassName":"Base","sortKey":"\u305f\u3042\u304f\u305d\u3046\u308bTRPG","locale":"ja_jp"},{"id":"HatsuneMiku","name":"\u521d\u97f3\u30df\u30afTRPG \u30b3\u30b3\u30ed\u30c0\u30f3\u30b8\u30e7\u30f3","className":"HatsuneMiku","superClassName":"Base","sortKey":"\u306f\u3064\u306d\u307f\u304fTRPG\u3053\u3053\u308d\u305f\u3093\u3057\u3088\u3093","locale":"ja_jp"},{"id":"DeadlineHeroes","name":"\u30c7\u30c3\u30c9\u30e9\u30a4\u30f3\u30d2\u30fc\u30ed\u30fc\u30baRPG","className":"DeadlineHeroes","superClassName":"Base","sortKey":"\u3066\u3064\u3068\u3089\u3044\u3093\u3072\u3044\u308d\u304a\u3059RPG","locale":"ja_jp"},{"id":"HeroScale","name":"\u82f1\u96c4\u306e\u5c3a\u5ea6","className":"HeroScale","superClassName":"Base","sortKey":"\u3048\u3044\u3086\u3046\u306e\u3057\u3084\u304f\u3068","locale":"ja_jp"},{"id":"ScreamHighSchool","name":"\u30b9\u30af\u30ea\u30fc\u30e0\u30cf\u30a4\u30b9\u30af\u30fc\u30eb","className":"ScreamHighSchool","superClassName":"GardenOrder","sortKey":"\u3059\u304f\u308a\u3044\u3080\u306f\u3044\u3059\u304f\u3046\u308b","locale":"ja_jp"},{"id":"Sengensyou","name":"\u5343\u5e7b\u6284","className":"Sengensyou","superClassName":"Base","sortKey":"\u305b\u3093\u3051\u3093\u3057\u3088\u3046","locale":"ja_jp"},{"id":"SevenFortressMobius","name":"\u30bb\u30d6\u30f3\uff1d\u30d5\u30a9\u30fc\u30c8\u30ec\u30b9 \u30e1\u30d3\u30a6\u30b9","className":"SevenFortressMobius","superClassName":"NightWizard","sortKey":"\u305b\u3075\u3093\u3075\u304a\u304a\u3068\u308c\u3059\u3081\u3072\u3046\u3059","locale":"ja_jp"},{"id":"ShadowRun","name":"\u30b7\u30e3\u30c9\u30a6\u30e9\u30f3","className":"ShadowRun","superClassName":"Base","sortKey":"\u3057\u3084\u3068\u3046\u3089\u3093","locale":"ja_jp"},{"id":"ShadowRun4","name":"\u30b7\u30e3\u30c9\u30a6\u30e9\u30f3 4th Edition","className":"ShadowRun4","superClassName":"Base","sortKey":"\u3057\u3084\u3068\u3046\u3089\u30934","locale":"ja_jp"},{"id":"VisionConnect","name":"\u30f4\u30a3\u30b8\u30e7\u30f3\u30b3\u30cd\u30af\u30c8","className":"VisionConnect","superClassName":"Base","sortKey":"\u3046\u3044\u3057\u3088\u3093\u3053\u306d\u304f\u3068","locale":"ja_jp"},{"id":"ShadowRun5","name":"\u30b7\u30e3\u30c9\u30a6\u30e9\u30f3 5th Edition","className":"ShadowRun5","superClassName":"ShadowRun4","sortKey":"\u3057\u3084\u3068\u3046\u3089\u30935","locale":"ja_jp"},{"id":"DemonParasite","name":"\u30c7\u30e2\u30f3\u30d1\u30e9\u30b5\u30a4\u30c8","className":"DemonParasite","superClassName":"Base","sortKey":"\u3066\u3082\u3093\u306f\u3089\u3055\u3044\u3068","locale":"ja_jp"},{"id":"WARPS","name":"\u30ef\u30fc\u30d7\u30b9","className":"WARPS","superClassName":"Base","sortKey":"\u308f\u3042\u3075\u3059","locale":"ja_jp"},{"id":"WaresBlade","name":"\u30ef\u30fc\u30b9\u30d6\u30ec\u30a4\u30c9","className":"WaresBlade","superClassName":"Base","sortKey":"\u308f\u3042\u3059\u3075\u308c\u3044\u3068","locale":"ja_jp"},{"id":"SharedFantasia","name":"Shared\u2020Fantasia","className":"SharedFantasia","superClassName":"Base","sortKey":"\u3057\u3048\u3042\u3042\u3068\u3075\u3042\u3093\u305f\u3057\u3042","locale":"ja_jp"},{"id":"Warhammer","name":"\u30a6\u30a9\u30fc\u30cf\u30f3\u30de\u30fc","className":"Warhammer","superClassName":"Base","sortKey":"\u3046\u304a\u304a\u306f\u3093\u307e\u3042","locale":"ja_jp"},{"id":"ShinMegamiTenseiKakuseihen","name":"\u771f\u30fb\u5973\u795e\u8ee2\u751fTRPG \u899a\u9192\u7bc7","className":"ShinMegamiTenseiKakuseihen","superClassName":"Base","sortKey":"\u3057\u3093\u3081\u304b\u307f\u3066\u3093\u305b\u3044TRPG\u304b\u304f\u305b\u3044\u3078\u3093","locale":"ja_jp"},{"id":"DemonSpike","name":"\u30c7\u30e2\u30f3\u30b9\u30d1\u30a4\u30af","className":"DemonSpike","superClassName":"Base","sortKey":"\u3066\u3082\u3093\u3059\u306f\u3044\u304f","locale":"ja_jp"},{"id":"ShinkuuGakuen","name":"\u771f\u7a7a\u5b66\u5712","className":"ShinkuuGakuen","superClassName":"Base","sortKey":"\u3057\u3093\u304f\u3046\u304b\u304f\u3048\u3093","locale":"ja_jp"},{"id":"DesperateRun","name":"Desperate Run TRPG","className":"DesperateRun","superClassName":"Base","sortKey":"\u3066\u3059\u3078\u308c\u3044\u3068\u3089\u3093TRPG","locale":"ja_jp"},{"id":"MetalHead","name":"\u30e1\u30bf\u30eb\u30d8\u30c3\u30c9","className":"MetalHead","superClassName":"Base","sortKey":"\u3081\u305f\u308b\u3078\u3064\u3068","locale":"ja_jp"},{"id":"BeastBindTrinity","name":"\u30d3\u30fc\u30b9\u30c8\u30d0\u30a4\u30f3\u30c9 \u30c8\u30ea\u30cb\u30c6\u30a3","className":"BeastBindTrinity","superClassName":"Base","sortKey":"\u3072\u3044\u3059\u3068\u306f\u3044\u3093\u3068\u3068\u308a\u306b\u3066\u3044","locale":"ja_jp"},{"id":"DetatokoSaga","name":"\u3067\u305f\u3068\u3053\u30b5\u30fc\u30ac","className":"DetatokoSaga","superClassName":"Base","sortKey":"\u3066\u305f\u3068\u3053\u3055\u3042\u304b","locale":"ja_jp"},{"id":"MetalHeadExtream","name":"\u30e1\u30bf\u30eb\u30d8\u30c3\u30c9\u30a8\u30af\u30b9\u30c8\u30ea\u30fc\u30e0","className":"MetalHeadExtream","superClassName":"Base","sortKey":"\u3081\u305f\u308b\u3078\u3064\u3068\u3048\u304f\u3059\u3068\u308a\u3044\u3080","locale":"ja_jp"},{"id":"Warhammer4","name":"\u30a6\u30a9\u30fc\u30cf\u30f3\u30de\u30fcRPG\u7b2c4\u7248","className":"Warhammer4","superClassName":"Base","sortKey":"\u3046\u304a\u304a\u306f\u3093\u307e\u30424","locale":"ja_jp"},{"id":"DetatokoSaga:Korean","name":"\ub370\ud0c0\ud1a0\ucf54 \uc0ac\uac00","className":"DetatokoSaga_Korean","superClassName":"DetatokoSaga","sortKey":"\u56fd\u969b\u5316:Korean:\ub370\ud0c0\ud1a0\ucf54 \uc0ac\uac00","locale":"ko_kr"},{"id":"DiceOfTheDead","name":"\u30c0\u30a4\u30b9\u30fb\u30aa\u30d6\u30fb\u30b6\u30fb\u30c7\u30c3\u30c9","className":"DiceOfTheDead","superClassName":"Base","sortKey":"\u305f\u3044\u3059\u304a\u3075\u3055\u3066\u3064\u3068","locale":"ja_jp"},{"id":"DoubleCross","name":"\u30c0\u30d6\u30eb\u30af\u30ed\u30b92nd,3rd","className":"DoubleCross","superClassName":"Base","sortKey":"\u305f\u3075\u308b\u304f\u308d\u30592","locale":"ja_jp"},{"id":"WerewolfTheApocalypse5th","name":"Werewolf: The Apocalypse 5th Edition","className":"WerewolfTheApocalypse5th","superClassName":"Base","sortKey":"\u308f\u3042\u3046\u3075\u308b\u3057\u3042\u307b\u304b\u308a\u3075\u30595","locale":"ja_jp"},{"id":"DiceBot","name":"DiceBot","className":"DiceBot","superClassName":"Base","sortKey":"*\u305f\u3044\u3059\u307b\u3064\u3068","locale":"ja_jp"},{"id":"Hieizan","name":"\u6bd4\u53e1\u5c71\u708e\u4e0a","className":"Hieizan","superClassName":"Base","sortKey":"\u3072\u3048\u3044\u3055\u3093\u3048\u3093\u3057\u3088\u3046","locale":"ja_jp"},{"id":"HouraiGakuen","name":"\u84ec\u83b1\u5b66\u5712\u306e\u5192\u967a!!","className":"HouraiGakuen","superClassName":"Base","sortKey":"\u307b\u3046\u3089\u3044\u304b\u304f\u3048\u3093\u306e\u307b\u3046\u3051\u3093","locale":"ja_jp"},{"id":"BeginningIdol","name":"\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb","className":"BeginningIdol","superClassName":"Base","sortKey":"\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b","locale":"ja_jp"},{"id":"ShinobiGami","name":"\u30b7\u30ce\u30d3\u30ac\u30df","className":"ShinobiGami","superClassName":"Base","sortKey":"\u3057\u306e\u3072\u304b\u307f","locale":"ja_jp"},{"id":"WitchQuest","name":"\u30a6\u30a3\u30c3\u30c1\u30af\u30a8\u30b9\u30c8","className":"WitchQuest","superClassName":"Base","sortKey":"\u3046\u3044\u3064\u3061\u304f\u3048\u3059\u3068","locale":"ja_jp"},{"id":"Shiranui","name":"\u4e0d\u77e5\u706b","className":"Shiranui","superClassName":"Base","sortKey":"\u3057\u3089\u306c\u3044","locale":"ja_jp"},{"id":"DoubleCross:Korean","name":"\ub354\ube14\ud06c\ub85c\uc2a42nd,3rd","className":"DoubleCross_Korean","superClassName":"DoubleCross","sortKey":"\u56fd\u969b\u5316:Korean:\ub354\ube14\ud06c\ub85c\uc2a4","locale":"ko_kr"},{"id":"Dracurouge","name":"\u30c9\u30e9\u30af\u30eb\u30fc\u30b8\u30e5","className":"Dracurouge","superClassName":"Base","sortKey":"\u3068\u3089\u304f\u308b\u3046\u3057\u3086","locale":"ja_jp"},{"id":"WorldOfDarkness","name":"\u30ef\u30fc\u30eb\u30c9\u30fb\u30aa\u30d6\u30fb\u30c0\u30fc\u30af\u30cd\u30b9","className":"WorldOfDarkness","superClassName":"Base","sortKey":"\u308f\u3042\u308b\u3068\u304a\u3075\u305f\u3042\u304f\u306d\u3059","locale":"ja_jp"},{"id":"MetallicGuardian","name":"\u30e1\u30bf\u30ea\u30c3\u30af\u30ac\u30fc\u30c7\u30a3\u30a2\u30f3RPG","className":"MetallicGuardian","superClassName":"SRS","sortKey":"\u3081\u305f\u308a\u3064\u304f\u304b\u3042\u3066\u3044\u3042\u3093RPG","locale":"ja_jp"},{"id":"MonotoneMuseum","name":"\u30e2\u30ce\u30c8\u30fc\u30f3\u30df\u30e5\u30fc\u30b8\u30a2\u30e0RPG","className":"MonotoneMuseum","superClassName":"Base","sortKey":"\u3082\u306e\u3068\u304a\u3093\u307f\u3086\u3046\u3057\u3042\u3080RPG","locale":"ja_jp"},{"id":"ShuumatsuKikou","name":"\u7d42\u672b\u7d00\u884c\uff32\uff30\uff27","className":"ShuumatsuKikou","superClassName":"Base","sortKey":"\u3057\u3086\u3046\u307e\u3064\u304d\u3053\u3046","locale":"ja_jp"},{"id":"MonotoneMuseum:Korean","name":"\ubaa8\ub178\ud1a4 \ubba4\uc9c0\uc5c4","className":"MonotoneMuseum_Korean","superClassName":"MonotoneMuseum","sortKey":"\u56fd\u969b\u5316:Korean:\ubaa8\ub178\ud1a4 \ubba4\uc9c0\uc5c4","locale":"ko_kr"},{"id":"Nechronica","name":"\u30cd\u30af\u30ed\u30cb\u30ab","className":"Nechronica","superClassName":"Base","sortKey":"\u306d\u304f\u308d\u306b\u304b","locale":"ja_jp"},{"id":"WorldsEndFrontline","name":"\u30ef\u30fc\u30eb\u30c9\u30a8\u30f3\u30c9\u30d5\u30ed\u30f3\u30c8\u30e9\u30a4\u30f3","className":"WorldsEndFrontline","superClassName":"Bloodorium","sortKey":"\u308f\u3042\u308b\u3068\u3048\u3093\u3068\u3075\u308d\u3093\u3068\u3089\u3044\u3093","locale":"ja_jp"},{"id":"Siren","name":"\u7d42\u672b\u30a2\u30a4\u30c9\u30eb\u80b2\u6210TRPG \u30bb\u30a4\u30ec\u30fc\u30f3","className":"Siren","superClassName":"Base","sortKey":"\u305b\u3044\u308c\u3048\u3093","locale":"ja_jp"},{"id":"YankeeYogSothoth","name":"\u30e4\u30f3\u30ad\u30fc\uff06\u30e8\u30b0\uff1d\u30bd\u30c8\u30fc\u30b9","className":"YankeeYogSothoth","superClassName":"Base","sortKey":"\u3084\u3093\u304d\u3044\u3042\u3093\u3068\u3088\u304f\u305d\u3068\u304a\u3059","locale":"ja_jp"},{"id":"HuntersMoon","name":"\u30cf\u30f3\u30bf\u30fc\u30ba\u30fb\u30e0\u30fc\u30f3","className":"HuntersMoon","superClassName":"Base","sortKey":"\u306f\u3093\u305f\u3042\u3059\u3080\u3046\u3093","locale":"ja_jp"},{"id":"Skynauts","name":"\u6b6f\u8eca\u306e\u5854\u306e\u63a2\u7a7a\u58eb\uff08\u516d\u7573\u9593\u5e7b\u60f3\u7a7a\u9593\uff09","className":"Skynauts","superClassName":"Base","sortKey":"\u306f\u304f\u308b\u307e\u306e\u3068\u3046\u306e\u3059\u304b\u3044\u306e\u304a\u3064","locale":"ja_jp"},{"id":"YearZeroEngine","name":"YearZeroEngine","className":"YearZeroEngine","superClassName":"Base","sortKey":"\u3044\u3084\u3042\u305b\u308d\u3048\u3093\u3057\u3093","locale":"ja_jp"},{"id":"Nechronica:Korean","name":"\ub124\ud06c\ub85c\ub2c8\uce74","className":"Nechronica_Korean","superClassName":"Nechronica","sortKey":"\u56fd\u969b\u5316:Korean:\ub124\ud06c\ub85c\ub2c8\uce74","locale":"ko_kr"},{"id":"NeverCloud","name":"\u30cd\u30d0\u30fc\u30af\u30e9\u30a6\u30c9TRPG","className":"NeverCloud","superClassName":"Base","sortKey":"\u306d\u306f\u3042\u304f\u3089\u3046\u3068TRPG","locale":"ja_jp"},{"id":"HunterTheReckoning5th","name":"Hunter: The Reckoning 5th Edition","className":"HunterTheReckoning5th","superClassName":"Base","sortKey":"\u306f\u3093\u3042\u305f\u3055\u308c\u3053\u306b\u3093\u304f5","locale":"ja_jp"},{"id":"NightWizard","name":"\u30ca\u30a4\u30c8\u30a6\u30a3\u30b6\u30fc\u30c9 The 2nd Edition","className":"NightWizard","superClassName":"Base","sortKey":"\u306a\u3044\u3068\u3046\u3044\u3055\u3042\u30682","locale":"ja_jp"},{"id":"Yggdrasill","name":"\u92fc\u9244\u306e\u30e6\u30b0\u30c9\u30e9\u30b7\u30eb","className":"Yggdrasill","superClassName":"Base","sortKey":"\u3053\u3046\u3066\u3064\u306e\u3086\u304f\u3068\u3089\u3057\u308b","locale":"ja_jp"},{"id":"Dracurouge:Korean","name":"\ub4dc\ub77c\ud06c\ub8e8\uc8fc","className":"Dracurouge_Korean","superClassName":"Dracurouge","sortKey":"\u56fd\u969b\u5316:Korean:\ub4dc\ub77c\ud06c\ub8e8\uc8fc","locale":"ko_kr"},{"id":"DungeonsAndDragons","name":"\u30c0\u30f3\u30b8\u30e7\u30f3\u30ba\uff06\u30c9\u30e9\u30b4\u30f3\u30ba","className":"DungeonsAndDragons","superClassName":"Base","sortKey":"\u305f\u3093\u3057\u3088\u3093\u3059\u3042\u3093\u3068\u3068\u3089\u3053\u3093\u3059","locale":"ja_jp"},{"id":"DungeonsAndDragons5","name":"\u30c0\u30f3\u30b8\u30e7\u30f3\u30ba\uff06\u30c9\u30e9\u30b4\u30f3\u30ba\u7b2c5\u7248","className":"DungeonsAndDragons5","superClassName":"Base","sortKey":"\u305f\u3093\u3057\u3088\u3093\u3059\u3042\u3093\u3068\u3068\u3089\u3053\u3093\u30595","locale":"ja_jp"}]}')},6884:l=>{"use strict";l.exports=JSON.parse('{"ko_kr":{"success":"\uc131\uacf5","failure":"\uc2e4\ud328","fumble":"\ud38c\ube14","RTT":{"rtt_format":"\ub79c\ub364 \ud2b9\uae30 \uacb0\uc815\ud45c(%<category_dice>d,%<row_dice>d) \uff1e %<text>s","rttn_format":"\uc9c0\uc815\ud2b9\uae30(%<category_name>s)\ud45c(%<row_dice>d) \uff1e %<text>s"}},"ja_jp":{"success":"\u6210\u529f","failure":"\u5931\u6557","critical":"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb","fumble":"\u30d5\u30a1\u30f3\u30d6\u30eb"},"zh_hans":{"success":"\u6210\u529f","failure":"\u5931\u8d25","fumble":"\u5927\u5931\u8d25","RTT":{"rtt_format":"\u968f\u673a\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s","rttn_format":"%<category_name>s\u9886\u57df\u968f\u673a\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"}},"zh_hant":{"success":"\u6210\u529f","failure":"\u5931\u6557"}}')},3034:l=>{"use strict";l.exports=JSON.parse('{"i18nList":[{"baseClassName":"DetatokoSaga","locales":["ko_kr","ja_jp"]},{"baseClassName":"StratoShout","locales":["ko_kr","ja_jp"]},{"baseClassName":"Insane","locales":["ko_kr","ja_jp"]},{"baseClassName":"SwordWorld2_0","locales":["ja_jp","zh_hans"]},{"baseClassName":"Fiasco","locales":["ko_kr","ja_jp"]},{"baseClassName":"KillDeathBusiness","locales":["ko_kr","ja_jp"]},{"baseClassName":"LogHorizon","locales":["ko_kr","ja_jp"]},{"baseClassName":"SwordWorld2_5","locales":["ja_jp","zh_hans"]},{"baseClassName":"Dracurouge","locales":["ko_kr","ja_jp"]},{"baseClassName":"Amadeus","locales":["ko_kr","ja_jp"]},{"baseClassName":"MonotoneMuseum","locales":["ko_kr","ja_jp"]},{"baseClassName":"MagicaLogia","locales":["ko_kr","ja_jp","zh_hans"]},{"baseClassName":"DoubleCross","locales":["ko_kr","ja_jp"]},{"baseClassName":"Kamigakari","locales":["ko_kr","ja_jp"]},{"baseClassName":"Nechronica","locales":["ko_kr","ja_jp"]},{"baseClassName":"BeginningIdol","locales":["ko_kr","ja_jp"]},{"baseClassName":"Emoklore","locales":["ja_jp"]},{"baseClassName":"NinjaSlayer2","locales":["ja_jp"]},{"baseClassName":"SwordWorld","locales":["ja_jp","zh_hans"]},{"baseClassName":"FutariSousa","locales":["ko_kr","ja_jp"]},{"baseClassName":"Cthulhu","locales":["ko_kr","ja_jp","zh_hans","zh_hant"]},{"baseClassName":"Arianrhod","locales":["ja_jp"]},{"baseClassName":"StellarKnights","locales":["ko_kr","ja_jp"]}]}')}}]);