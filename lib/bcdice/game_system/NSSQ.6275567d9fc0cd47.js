(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[4238],{6681:(Z,p,Q)=>{Q(9993),Opal.queue(function(l){var M,L,W,s,y,v,T,J,P,j=l.module,F=l.klass,C=l.const_set,i=l.truthy,b=l.def,z=l.rb_plus,D=l.eqeq,x=l.rb_ge,N=l.rb_lt,E=l.thrower,q=l.rb_minus,w=l.send,H=l.rb_gt,G=l.eqeqeq,k=l.rb_le,A=[],r=l.nil;return M=A,L=P=[j(A[0],"BCDice")].concat(M),T=[j(P[0],"GameSystem")].concat(L),J=l.$r(T),W=T,y=[s=F(T[0],J("Base"),"NSSQ")].concat(W),v=l.$r(y),s.$$prototype.randomizer=r,C(y[0],"ID","NSSQ"),C(y[0],"NAME","SRS\u3058\u3083\u306a\u3044\u4e16\u754c\u6a39\u306e\u8ff7\u5baeTRPG"),C(y[0],"SORT_KEY","\u3048\u3059\u3042\u3042\u308b\u3048\u3059\u3057\u3084\u306a\u3044\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046TRPG"),C(y[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xSQ\xb1y>=z)\n  xD6\u306e\u5224\u5b9a\u30023\u3064\u4ee5\u4e0a\u632f\u3063\u305f\u3068\u304d\u3001\u51fa\u76ee\u306e\u9ad8\u30442\u3064\u3092\u8868\u793a\u3057\u307e\u3059\u3002\u7d76\u5bfe\u6210\u529f\u3001\u7d76\u5bfe\u5931\u6557\u3082\u8a08\u7b97\u3057\u307e\u3059\u3002\n  2\u3064\u306e\u30b5\u30a4\u30b3\u30ed\u3092\u4f7f\u7528\u3057\u3066\u51fa\u76ee\u306b1\u304c\u3042\u3063\u305f\u5834\u5408\u306f\u3001FP\u306e\u7372\u5f97\u3082\u8868\u793a\u3057\u307e\u3059\u30023\u3064\u4ee5\u4e0a\u4f7f\u7528\u3057\u305f\u5834\u5408\u306f\u8868\u793a\u3057\u307e\u305b\u3093\u3002\n  \xb1y: y\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n  z: \u76ee\u6a19\u5024\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb (xDR(C)(+)y)\n  xD6\u306e\u30c0\u30e1\u30fc\u30b8\u30ed\u30fc\u30eb\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30d2\u30c3\u30c8\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002C\u3092\u4ed8\u3051\u308b\u3068\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30a2\u30c3\u30d7\u72b6\u614b\u3067\u8a08\u7b97\u3067\u304d\u307e\u3059\u3002+\u3092\u4ed8\u3051\u308b\u3068\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30d2\u30c3\u30c8\u6642\u306e\u30c0\u30a4\u30b9\u304c8\u500b\u306b\u306a\u308a\u307e\u3059\u3002\n  x: x\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n  y: y\u306b\u8010\u6027\u3092\u5165\u529b\u3002\n  \u4f8b) 5DR3 5DRC4 5DRC+4\n\n\u25a0 \u56de\u5fa9\u30ed\u30fc\u30eb (xHRy)\n  xD6\u306e\u56de\u5fa9\u30ed\u30fc\u30eb\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30d2\u30c3\u30c8\u304c\u767a\u751f\u3057\u307e\u305b\u3093\u3002\n  x: x\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n  y: y\u306b\u8010\u6027\u3092\u5165\u529b\u3002\u7701\u7565\u3057\u305f\u5834\u54083\u3002\n  \u4f8b) 2HR 10HR2\n\n\u25a0 \u63a1\u96c6\u30ed\u30fc\u30eb (TC\xb1z,SC\xb1z,GC\xb1z)\n  \u5c11\u3057\u3060\u3051(T)\u3001\u305d\u3053\u305d\u3053(S)\u3001\u30ac\u30c3\u30c4\u30ea(G)\u63a1\u53d6\u63a1\u6398\u4f10\u63a1\u3092\u884c\u3044\u307e\u3059\u3002\n  z: z\u306b\u8ffd\u52a0\u3067\u30ed\u30fc\u30eb\u3059\u308b\u56de\u6570\u3092\u5165\u529b\u3002\u7701\u7565\u53ef\u80fd\u3002\n  \u4f8b) TC SC+1 GC-1\n"),s.$register_prefix("\\d+SQ[\\+\\-\\d]*","\\d+DR(C)?(\\+)?\\d+","[TSG]C","\\d+HR\\d*"),b(s,"$eval_game_system_specific_command",function(n){var $,e,u,t=this;return i($=i(e=i(u=t.$roll_sq(n))?u:t.$damage_roll(n))?e:t.$heal_roll(n))?$:t.$collecting_roll(n)}),s.$private(),b(s,"$roll_sq",function(n){try{E("eval_return");var e=r,u=r,c=r,o=r,a=r,_=r,d=r,f=r,S=r,g=r;return e=/(\d+)SQ([+\-\d]+)?(([>=]+)(\d+))?/i.$match(n),i(e)?(u=e["$[]"](1).$to_i(),c=v("ArithmeticEvaluator").$eval(e["$[]"](2)),o=i(e["$[]"](5)["$nil?"]())?r:e["$[]"](5).$to_i(),_=(a=this.randomizer.$roll_barabara(u,6)).$sort().$reverse().$take(2),d=z(_.$sum(),c),f=a.$count(1),S=D(_,[6,6])?v("Result").$critical(" \uff1e \u7d76\u5bfe\u6210\u529f\uff01"):D(_,[1,1])?v("Result").$fumble(" \uff1e \u7d76\u5bfe\u5931\u6557\uff01"):i(o)&&i(x(d,o))?v("Result").$success(" \uff1e \u6210\u529f"):i(o)&&i(N(d,o))?v("Result").$failure(" \uff1e \u5931\u6557"):v("Result").$new(),g=D(u,2)&&i(x(f,1))?" (\u3010FP\u3011"+f+"\u7372\u5f97)":"",["("+n+")","["+a.$join(",")+"]"+v("Format").$modifier(c),d+"["+_.$join(",")+"]"+S.$text()+g].$join(" \uff1e ")):r}catch(R){if(R===l.t_eval_return)return R.$v;throw R}}),b(s,"$damage_roll",function(n){var t=this,$=r,e=r,u=r,c=r,o=r,a=r,_=r,d=r;return $=/(\d+)DR(C)?(\+)?(\d+)/i.$match(n),i($)?(e=$["$[]"](1).$to_i(),u=$["$[]"](2)["$nil?"]()["$!"](),c=$["$[]"](3)["$nil?"]()["$!"](),o=$["$[]"](4).$to_i(),_="("+n+") \uff1e ["+(a=t.randomizer.$roll_barabara(e,6)).$join(",")+"]"+o+" \uff1e "+t.$damage(a,o)+"\u30c0\u30e1\u30fc\u30b8",d=i(u)?1:2,i(x(q(a.$count(6),a.$count(1)),d))&&(_=z(_," \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30d2\u30c3\u30c8\uff01\n"),_=z(_,t.$additional_damage_roll(c,o))),_):r}),b(s,"$additional_damage_roll",function(n,t){var e,u=r;return"("+(e=i(n)?8:4)+"DR"+t+") \uff1e ["+(u=this.randomizer.$roll_barabara(e,6)).$join(",")+"]"+t+" \uff1e "+this.$damage(u,t)+"\u30c0\u30e1\u30fc\u30b8"}),b(s,"$heal_roll",function(n){var t,e=r,u=r,c=r,o=r,a=r;return e=/^(\d+)HR(\d+)?$/i.$match(n),i(e)?(u=e["$[]"](1).$to_i(),c=i(o=(t=e["$[]"](2))===r||null==t?r:t.$to_i())?o:3,"("+n+") \uff1e ["+(a=this.randomizer.$roll_barabara(u,6)).$join(",")+"]"+c+" \uff1e "+this.$damage(a,c)+"\u56de\u5fa9"):r}),b(s,"$damage",function(n,t){return w(n,"count",[],function(e){return null==e&&(e=r),H(e,t)})}),b(s,"$collecting_roll",function(n){try{E("eval_return");var e=r,u=r,c=r,o=r,a=r,_=r;return e=/([TSG])C([+\-\d]+)?/i.$match(n),!i(e)||(u=e["$[]"](1),c=v("ArithmeticEvaluator").$eval(e["$[]"](2)),o=G("T",a=u)?3:G("S",a)?4:G("G",a)?5:r,_=z(q(o,2),c),i(k(_,0)))?r:w(v("Array"),"new",[_],function f(S){var R,g=null==f.$$s?this:f.$$s,m=r;return null==g.randomizer&&(g.randomizer=r),null==S&&(S=r),R=(m=g.randomizer.$roll_barabara(2,6)).$sum(),"("+n+") \uff1e "+R+"["+m.$join(",")+"]: "+g.$result_collecting(S,R,o)},{$$s:this}).$join("\n")}catch(f){if(f===l.t_eval_return)return f.$v;throw f}}),b(s,"$result_collecting",function(n,t,$){return i(k(t,$))&&i(H(q($,2),n))?"\uff01\u3042\u3042\u3063\u3068\uff01":i(k(q($,2),n))?"\u6210\u529f\uff08\u8ffd\u52a0\u5206\uff09":"\u6210\u529f"})})}}]);