(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[9906],{3637:(X,Z,W)=>{W(5151),Opal.modules["bcdice/game_system/Revulture"]=function($){var N,Y,V,m,o,c,z,G,D,h=$.module,B=$.klass,x=$.const_set,t=$.truthy,A=$.def,p=$.rb_le,g=$.rb_plus,s=$.send,E=$.rb_gt,q=$.thrower,H=$.hash2,I=$.rb_ge,S=[],i=$.nil,u=$.$$$;return N=S,Y=D=[h(S[0],"BCDice")].concat(N),z=[h(D[0],"GameSystem")].concat(Y),G=$.$r(z),V=z,o=[m=B(z[0],G("Base"),"Revulture")].concat(V),c=$.$r(o),m.$$prototype.randomizer=i,x(o[0],"ID","Revulture"),x(o[0],"NAME","\u5149\u7815\u306e\u30ea\u30f4\u30a1\u30eb\u30c1\u30e3\u30fc"),x(o[0],"SORT_KEY","\u3053\u3046\u3055\u3044\u306e\u308a\u3046\u3042\u308b\u3061\u3084\u3042"),x(o[0],"HELP_MESSAGE","\u25a0\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\uff08 xAT, xATK, xATTACK \uff09\nx: \u30c0\u30a4\u30b9\u6570\uff08\u52a0\u7b97 + \u3068\u9664\u7b97 / \u3092\u4f7f\u7528\u53ef\u80fd\uff09\n\u4f8b\uff09 3AT, 4ATK, 5+6ATTACK, 15/2AT\n\n\u25a1\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u3000\u76ee\u6a19\u5024\u3064\u304d\uff08 xAT<=y, xATK<=y, xATTACK<=y \uff09\nx: \u30c0\u30a4\u30b9\u6570\uff08\u52a0\u7b97 + \u3068\u9664\u7b97 / \u3092\u4f7f\u7528\u53ef\u80fd\uff09\ny: \u76ee\u6a19\u5024\uff08 1 \u4ee5\u4e0a 6 \u4ee5\u4e0b\u3002\u52a0\u7b97 + \u3092\u4f7f\u7528\u53ef\u80fd\uff09\n\u4f8b\uff09 3AT<=4, 3AT<=2+1\n\n\u25a1\u30a2\u30bf\u30c3\u30af\u5224\u5b9a\u3000\u76ee\u6a19\u5024\uff06\u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u3064\u304d\uff08 xAT<=y[>=a:+b], xATK<=y[>=a:+b], xATTACK<=y[z] \uff09\nx: \u30c0\u30a4\u30b9\u6570\uff08\u52a0\u7b97 + \u3068\u9664\u7b97 / \u3092\u4f7f\u7528\u53ef\u80fd\uff09\ny: \u76ee\u6a19\u5024\uff08 1 \u4ee5\u4e0a 6 \u4ee5\u4e0b\u3002\u52a0\u7b97 + \u3092\u4f7f\u7528\u53ef\u80fd\uff09\nz: \u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u306e\u898f\u5247\uff08\u8a73\u7d30\u306f\u5f8c\u8ff0\uff09\uff08\u203b\u8907\u6570\u540c\u6642\u306b\u6307\u5b9a\u53ef\u80fd\uff09\n\n\u25bd\u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u306e\u898f\u5247 [a:+b]\na: \u30d2\u30c3\u30c8\u6570\u304c a \u306a\u3089\n\u3000=a\u3000\uff08\u30d2\u30c3\u30c8\u6570\u304c a \u306b\u7b49\u3057\u3044\uff09\n\u3000>=a\u3000\uff08\u30d2\u30c3\u30c8\u6570\u304c a \u4ee5\u4e0a\uff09\nb: \u30c0\u30e1\u30fc\u30b8\u3092 b \u70b9\u8ffd\u52a0\n\n\u4f8b\uff09 3AT<=4[>=2:+3] #\u30eb\u30fc\u30eb\u30d6\u30c3\u30afp056\u300c\u30b0\u30ec\u30f3\u30b0\u30e9\u30f3\u30c8AR\u300d\n\u4f8b\uff09 2AT<=4[=1:+5][>=2:+8] #\u30eb\u30fc\u30eb\u30d6\u30c3\u30afp067\u300c\u30d5\u30a1\u30fc\u30dc\u30eb\u30fb\u30c9\u30e9\u30b4\u30f3\u30d6\u30ec\u30b9\u300d\n"),x(o[0],"ATTACK_ROLL_REG",/^(\d+([+\/]\d+)*)?AT(TACK|K)?(<=([1-6](\+\d)*))?((\[>?=\d+:\+\d+\])+)?/i.$freeze()),m.$register_prefix("\\d+([+\\/]\\d+)*AT"),A(m,"$eval_game_system_specific_command",function(l){var r=i;return t(r=c("ATTACK_ROLL_REG").$match(l))?this.$roll_attack(r["$[]"](1),r["$[]"](5),r["$[]"](7)):i}),m.$private(),A(m,"$roll_attack",function(l,e,r){try{q("eval_return");var f,K,a=this,d=i,C=i,R=i,y=i,b=i,k=i;return f=c("Arithmetic").$eval(l,u(c("RoundType"),"FLOOR")),t(e)&&(d=c("Arithmetic").$eval(e,u(c("RoundType"),"FLOOR")).$clamp(1,6)),K=a.$make_command_text(f,d,r),t(p(f,0))?K+" \uff1e \u30c0\u30a4\u30b9\u6570\u304c 0 \u3067\u3059":t(d["$nil?"]())&&t(r)?K+" \uff1e \u76ee\u6a19\u5024\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u8ffd\u52a0\u30c0\u30e1\u30fc\u30b8\u3092\u7b97\u51fa\u3067\u304d\u307e\u305b\u3093":(C=a.randomizer.$roll_barabara(f,6).$sort(),R=C.$count(1),t(d)&&(y=g(s(C,"count",[],function(_){return null==_&&(_=i),p(_,d)}),R)),b=a.$calc_damage(y,r),(k=[])["$<<"](K),k["$<<"](C.$join(",")),t(E(R,0))&&k["$<<"]("\u30af\u30ea\u30c6\u30a3\u30ab\u30eb "+R),t(y)&&k["$<<"]("\u30d2\u30c3\u30c8\u6570 "+y),t(b)&&k["$<<"]("\u30c0\u30e1\u30fc\u30b8 "+b),s(c("Result").$new(k.$join(" \uff1e ")),"tap",[],function(_){var v;return null==_&&(_=i),t(y)&&_["$condition="](E(y,0)),v=[E(R,0)],s(_,"critical=",v),v[v.length-1]}))}catch(T){if(T===$.t_eval_return)return T.$v;throw T}}),A(m,"$make_command_text",function(l,e,r){var n=i;return n=l+"attack",t(e)&&(n=g(n,"<="+e)),t(r)&&(n=g(n,r)),"("+n+")"}),A(m,"$calc_damage",function(l,e){var n=i;return t(e)?(n=l,s(this.$parse_additional_damage_rules(e),"each",[],function(f){return null==f&&(f=i),t(f["$[]"]("condition").$call(l))?n=g(n,f["$[]"]("additinal_damage")):i}),n):i}),A(m,"$parse_additional_damage_rules",function(l){return s(l.$scan(/\[(>?=)(\d+):\+(\d+)\]/),"map",[],function r(n){return null==n&&(n=i),H(["condition","additinal_damage"],{condition:(null==r.$$s?this:r.$$s).$make_additional_damage_condition(n["$[]"](0),n["$[]"](1).$to_i()),additinal_damage:n["$[]"](2).$to_i()})},{$$s:this})}),A(m,"$make_additional_damage_condition",function(l,e){switch(l.valueOf()){case"=":return s(this,"lambda",[],function(a){return null==a&&(a=i),a["$=="](e)});case">=":return s(this,"lambda",[],function(a){return null==a&&(a=i),I(a,e)});default:return i}})},Opal.queue(function($){var P,J,m,o,c,w,G,Q,F,h=$.module,B=$.klass,x=$.const_set,t=$.truthy,A=$.def,p=$.rb_le,g=$.rb_plus,s=$.send,E=$.rb_gt,q=$.thrower,H=$.hash2,I=$.rb_ge,i=[],u=$.nil,j=$.$$$;return $.top.$require("bcdice/game_system/Revulture"),P=i,J=F=[h(i[0],"BCDice")].concat(P),G=[h(F[0],"GameSystem")].concat(J),Q=$.$r(G),m=G,c=[o=B(G[0],Q("Revulture"),"Revulture_Korean")].concat(m),w=$.$r(c),o.$$prototype.randomizer=u,x(c[0],"ID","Revulture:Korean"),x(c[0],"NAME","\uad11\uc1c4\uc758 \ub9ac\ubc8c\ucc98"),x(c[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\uad11\uc1c4\uc758 \ub9ac\ubc8c\ucc98"),x(c[0],"HELP_MESSAGE","\u25a0\uacf5\uaca9 \ud310\uc815\uff08 xAT, xATK, xATTACK \uff09\nx: \uc8fc\uc0ac\uc704 \uc218\uff08\ub367\uc148 + \uacfc \ub098\ub217\uc148 / \uc0ac\uc6a9 \uac00\ub2a5\uff09\n\uc608\uc2dc\uff09 3AT, 4ATK, 5+6ATTACK, 15/2AT\n\n\u25a1\uacf5\uaca9 \ud310\uc815 \ubaa9\ud45c\uac12 \ud3ec\ud568\uff08 xAT<=y, xATK<=y, xATTACK<=y \uff09\nx: \uc8fc\uc0ac\uc704 \uc218\uff08\ub367\uc148 + \uacfc \ub098\ub217\uc148 / \uc0ac\uc6a9 \uac00\ub2a5\uff09\ny: \ubaa9\ud45c\uac12\uff08 1 \uc774\uc0c1 6 \uc774\ud558. \ub367\uc148 + \uc0ac\uc6a9 \uac00\ub2a5\uff09\n\uc608\uc2dc\uff09 3AT<=4, 3AT<=2+1\n\n\u25a1\uacf5\uaca9 \ud310\uc815\u3000\ubaa9\ud45c\uac12\uff06\ucd94\uac00 \ub300\ubbf8\uc9c0 \ud3ec\ud568\uff08 xAT<=y[>=a:+b], xATK<=y[>=a:+b], xATTACK<=y[z] \uff09\nx: \uc8fc\uc0ac\uc704 \uc218\uff08\ub367\uc148 + \uacfc \ub098\ub217\uc148 / \uc0ac\uc6a9 \uac00\ub2a5\uff09\ny: \ubaa9\ud45c\uac12\uff08 1 \uc774\uc0c1 6 \uc774\ud558. \ub367\uc148 + \uc0ac\uc6a9 \uac00\ub2a5\uff09\nz: \ucd94\uac00 \ub300\ubbf8\uc9c0 \uaddc\uce59\uff08\uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \ud6c4\uc220\uff09\uff08\u203b\uc5ec\ub7ec \uac1c\ub97c \ub3d9\uc2dc\uc5d0 \uc9c0\uc815 \uac00\ub2a5\uff09\n\n\u25bd\ucd94\uac00 \ub300\ubbf8\uc9c0 \uaddc\uce59 [a:+b]\na: \ud788\ud2b8 \uc218\uac00 a \ub77c\uba74\n\u3000=a\u3000\uff08\ud788\ud2b8 \uc218\uac00 a\uc640 \ub3d9\uc77c\uff09\n\u3000>=a\u3000\uff08\ud788\ud2b8 \uc218\uac00 a \uc774\uc0c1\uff09\nb: \ub300\ubbf8\uc9c0\ub97c b \uc810 \ucd94\uac00\n\n\uc608\uc2dc\uff09 3AT<=4[>=2:+3] #\u30eb\u30fc\u30eb\u30d6\u30c3\u30afp056\u300c\u30b0\u30ec\u30f3\u30b0\u30e9\u30f3\u30c8AR\u300d\n\uc608\uc2dc\uff09 2AT<=4[=1:+5][>=2:+8] #\u30eb\u30fc\u30eb\u30d6\u30c3\u30afp067\u300c\u30d5\u30a1\u30fc\u30dc\u30eb\u30fb\u30c9\u30e9\u30b4\u30f3\u30d6\u30ec\u30b9\u300d\n"),x(c[0],"ATTACK_ROLL_REG",/^(\d+([+\/]\d+)*)?AT(TACK|K)?(<=([1-6](\+\d)*))?((\[>?=\d+:\+\d+\])+)?/i.$freeze()),o.$register_prefix("\\d+([+\\/]\\d+)*AT"),A(o,"$eval_game_system_specific_command",function(e){var n=u;return t(n=w("ATTACK_ROLL_REG").$match(e))?this.$roll_attack(n["$[]"](1),n["$[]"](5),n["$[]"](7)):u}),o.$private(),A(o,"$roll_attack",function(e,r,n){try{q("eval_return");var d,C,f=this,K=u,R=u,y=u,b=u,k=u,T=u;return d=w("Arithmetic").$eval(e,j(w("RoundType"),"FLOOR")),t(r)&&(K=w("Arithmetic").$eval(r,j(w("RoundType"),"FLOOR")).$clamp(1,6)),C=f.$make_command_text(d,K,n),t(p(d,0))?C+" \uff1e \uc8fc\uc0ac\uc704\uac00 0\uac1c \uc785\ub2c8\ub2e4.":t(K["$nil?"]())&&t(n)?C+" \uff1e \ubaa9\ud45c\uac12\uc774 \uc9c0\uc815\ub418\uc9c0 \uc54a\uc544 \ucd94\uac00 \ub300\ubbf8\uc9c0\ub97c \uacc4\uc0b0\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.":(R=f.randomizer.$roll_barabara(d,6).$sort(),y=R.$count(1),t(K)&&(b=g(s(R,"count",[],function(v){return null==v&&(v=u),p(v,K)}),y)),k=f.$calc_damage(b,n),(T=[])["$<<"](C),T["$<<"](R.$join(",")),t(E(y,0))&&T["$<<"]("\ud06c\ub9ac\ud2f0\uceec "+y),t(b)&&T["$<<"]("\ud788\ud2b8 \uc218 "+b),t(k)&&T["$<<"]("\ub300\ubbf8\uc9c0 "+k),s(w("Result").$new(T.$join(" \uff1e ")),"tap",[],function(v){var M;return null==v&&(v=u),t(b)&&v["$condition="](E(b,0)),M=[E(y,0)],s(v,"critical=",M),M[M.length-1]}))}catch(_){if(_===$.t_eval_return)return _.$v;throw _}}),A(o,"$make_command_text",function(e,r,n){var a=u;return a=e+"attack",t(r)&&(a=g(a,"<="+r)),t(n)&&(a=g(a,n)),"("+a+")"}),A(o,"$calc_damage",function(e,r){var a=u;return t(r)?(a=e,s(this.$parse_additional_damage_rules(r),"each",[],function(d){return null==d&&(d=u),t(d["$[]"]("condition").$call(e))?a=g(a,d["$[]"]("additinal_damage")):u}),a):u}),A(o,"$parse_additional_damage_rules",function(e){return s(e.$scan(/\[(>?=)(\d+):\+(\d+)\]/),"map",[],function n(a){return null==a&&(a=u),H(["condition","additinal_damage"],{condition:(null==n.$$s?this:n.$$s).$make_additional_damage_condition(a["$[]"](0),a["$[]"](1).$to_i()),additinal_damage:a["$[]"](2).$to_i()})},{$$s:this})}),A(o,"$make_additional_damage_condition",function(e,r){switch(e.valueOf()){case"=":return s(this,"lambda",[],function(f){return null==f&&(f=u),f["$=="](r)});case">=":return s(this,"lambda",[],function(f){return null==f&&(f=u),I(f,r)});default:return u}})})}}]);