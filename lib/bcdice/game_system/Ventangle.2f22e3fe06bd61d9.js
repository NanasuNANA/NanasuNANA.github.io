(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[1948],{2093:(ge,pe,he)=>{he(3986),Opal.modules["i18n/backend/fallbacks"]=function(e){var j,i,r,a,s,v,F=e.module,L=e.class_variable_set,c=e.truthy,I=e.class_variable_get,y=e.def,z=e.send,M=e.send2,D=e.find_super,E=e.hash2,P=e.find_block_super,T=e.neqeq,V=e.thrower,G=e.return_val,B=[],N=e.nil,d=e.$$$;return j=B,v=[s=F(B[0],"I18n")].concat(j),L(v[0],"@@fallbacks",N),i=e.get_singleton_class(s),r=[i].concat(v),a=e.$r(r),y(i,"$fallbacks",function(){var q=N;return L(r[1],"@@fallbacks",c(null!=r[1].$$cvars["@@fallbacks"]?"class variable":N)&&c(q=I(r[1],"@@fallbacks",!1))?q:d(d(a("I18n"),"Locale"),"Fallbacks").$new()),c(q=a("Thread").$current()["$[]"]("i18n_fallbacks"))?q:I(r[1],"@@fallbacks",!1)}),y(i,"$fallbacks=",function(A){var q;return L(r[1],"@@fallbacks",c(A["$is_a?"](a("Array")))?d(d(a("I18n"),"Locale"),"Fallbacks").$new(A):A),q=["i18n_fallbacks",I(r[1],"@@fallbacks",!1)],z(a("Thread").$current(),"[]=",q),q[q.length-1]}),function(i,w){var A,q,x,l,a=[F(i,"Backend")].concat(w);return A=a,x=[q=F(a[0],"Fallbacks")].concat(A),l=e.$r(x),y(q,"$translate",function k(o,h,u){try{var p=V("return"),_=k.$$p||N,C=this,U=N,m=N;return k.$$p=null,null==u&&(u=l("EMPTY_HASH")),c(u.$fetch("fallback",!0))?c(u["$[]"]("fallback_in_progress"))?M(C,D(C,"translate",k,!1,!0),"translate",[o,h,u],_):(c(u["$[]"]("default"))&&(U=C["$extract_non_symbol_default!"](u)),m=u.$merge(E(["fallback_in_progress"],{fallback_in_progress:!0})),z(l("I18n").$fallbacks()["$[]"](o),"each",[],function t(R){var n=null==t.$$s?this:t.$$s;null==R&&(R=N);try{return z(n,"catch",["exception"],function f(){var $=null==f.$$s?this:f.$$s,H=N;if(H=M($,P($,"translate",f.$$def||t.$$def||k,!1,!1),"translate",[R,h,m],null),c(H["$nil?"]()))return N;T(o.$to_s(),R.$to_s())&&$.$on_fallback(o,R,h,u),p.$throw(H)},{$$s:n,$$ret:p})}catch(f){if(!e.rescue(f,[d(l("I18n"),"InvalidLocale")]))throw f;try{return N}finally{e.pop_exception()}}},{$$s:C}),c(u["$key?"]("default"))&&c(u["$[]"]("default")["$nil?"]())?N:c(U)?M(C,D(C,"translate",k,!1,!0),"translate",[o,N,u.$merge(E(["default"],{default:U}))],null):C.$throw("exception",d(l("I18n"),"MissingTranslation").$new(o,h,u))):M(C,D(C,"translate",k,!1,!0),"translate",[o,h,u],_)}catch(t){if(t===p)return t.$v;throw t}},-3),y(q,"$extract_non_symbol_default!",function(o){var u,h=N;return h=[o["$[]"]("default")].$flatten(),u=z(h,"detect",[],function(_){return null==_&&(_=N),_["$is_a?"](l("Symbol"))["$!"]()}),c(u)&&o["$[]="]("default",h["$[]"](0,h.$index(u))),u}),y(q,"$exists?",function k(o,h,u){try{var p=V("return"),_=k.$$p||N,C=this;return k.$$p=null,null==u&&(u=l("EMPTY_HASH")),c(u.$fetch("fallback",!0))?(z(l("I18n").$fallbacks()["$[]"](o),"each",[],function U(m){var t=null==U.$$s?this:U.$$s;null==m&&(m=N);try{if(!c(M(t,P(t,"exists?",U.$$def||k,!1,!1),"exists?",[m,h],null)))return N;p.$throw(!0)}catch(R){if(!e.rescue(R,[d(l("I18n"),"InvalidLocale")]))throw R;try{return N}finally{e.pop_exception()}}},{$$s:C,$$ret:p}),!1):M(C,D(C,"exists?",k,!1,!0),"exists?",[o,h,u],_)}catch(U){if(U===p)return U.$v;throw U}},-3),q.$private(),y(q,"$on_fallback",G(N))}(v[0],v)},Opal.modules["bcdice/randomizer"]=function(e){var s,b,A,q,x,l,i,w,L=e.klass,c=e.const_set,I=e.def,y=e.truthy,z=e.rb_gt,M=e.rb_plus,D=e.rb_le,E=e.send,P=e.rb_minus,T=e.eqeq,V=e.rb_times,G=e.eqeqeq,B=e.rb_ge,N=[],d=e.nil,W=e.$$$;return s=N,i=[(0,e.module)(N[0],"BCDice")].concat(s),w=e.$r(i),b=i,q=[A=L(i[0],null,"Randomizer")].concat(b),x=e.$r(q),(l=A.$$prototype).rand_results=l.detailed_rand_results=d,c(q[0],"UPPER_LIMIT_DICE_TIMES",200),c(q[0],"UPPER_LIMIT_DICE_SIDES",1e4),c(q[0],"UPPER_LIMIT_RANDS",1e4),I(A,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),A.$attr_reader("rand_results"),A.$attr_reader("detailed_rand_results"),c(q[0],"DetailedRandResult",x("Struct").$new("kind","sides","value")),I(A,"$roll_barabara",function(o,h){var u=this;return y(z(M(u.rand_results.$size(),o),x("UPPER_LIMIT_RANDS")))&&u.$raise(x("TooManyRandsError")),y(D(o,0))||y(z(o,x("UPPER_LIMIT_DICE_TIMES")))?[]:E(x("Array"),"new",[o],function p(){return(null==p.$$s?this:p.$$s).$roll_once(h)},{$$s:u})}),I(A,"$roll_sum",function(o,h){return this.$roll_barabara(o,h).$sum()}),I(A,"$roll_once",function(o){var u=d;return y(D(o,0))||y(z(o,x("UPPER_LIMIT_DICE_SIDES")))?0:(u=this.$rand_inner(o),this.$push_to_detail("normal",o,u),u)}),I(A,"$roll_index",function(o){return P(this.$roll_once(o),1)}),I(A,"$roll_tens_d10",function(){var u,h=d;return h=this.$rand_inner(10),T(h,10)&&(h=0),u=V(h,10),this.$push_to_detail("tens_d10",10,u),u}),I(A,"$roll_d9",function(){var h;return h=P(this.$rand_inner(10),1),this.$push_to_detail("d9",10,h),h}),I(A,"$roll_d66",function(o){var p,u=d;return u=E(x("Array"),"new",[2],function _(){return(null==_.$$s?this:_.$$s).$roll_once(6)},{$$s:this}),G(W(x("D66SortType"),"ASC"),p=o)?u["$sort!"]():G(W(x("D66SortType"),"DESC"),p)&&u["$sort!"]()["$reverse!"](),M(V(u["$[]"](0),10),u["$[]"](1))}),A.$private(),I(A,"$rand_inner",function(o){var u,h=this;return y(B(h.rand_results.$size(),x("UPPER_LIMIT_RANDS")))&&h.$raise(x("TooManyRandsError")),u=h.$random(o),h.rand_results["$<<"]([u,o]),u}),I(A,"$random",function(o){return M(x("Kernel").$rand(o),1)}),I(A,"$push_to_detail",function(o,h,u){var _;return _=x("DetailedRandResult").$new(o,h,u),this.detailed_rand_results.$push(_)}),L(i[0],w("StandardError"),"TooManyRandsError"),d},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var E,G,j,s,v,i,w,N,T,F=e.module,L=e.klass,c=e.def,I=e.truthy,y=e.return_val,z=[],M=e.nil;return E=z,G=T=[F(z[0],"BCDice")].concat(E),j=N=[F(T[0],"DiceTable")].concat(G),v=[s=L(N[0],null,"RollResult")].concat(j),i=e.$r(v),(w=s.$$prototype).table_name=w.value=w.body=M,c(s,"$initialize",function(a,b,A){var q=this;return q.table_name=a,q.value=b,q.body=A}),s.$attr_reader("table_name"),s.$attr_reader("value"),s.$attr_reader("body"),c(s,"$to_s",function(){var a=this;return a.table_name+"("+a.value+") \uff1e "+a.body}),c(s,"$last_body",function(){var a=this;return I(a.body["$is_a?"](i("RollResult")))?a.body.$last_body():a.body}),c(s,"$empty?",y(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var E,G,j,s,v,i,w,N,T,F=e.module,L=e.klass,c=e.truthy,I=e.def,y=e.rb_minus,z=[],M=e.nil;return E=z,G=T=[F(z[0],"BCDice")].concat(E),j=N=[F(T[0],"DiceTable")].concat(G),v=[s=L(N[0],null,"ChainTable")].concat(j),i=e.$r(v),(w=s.$$prototype).times=w.sides=w.items=w.name=M,I(s,"$initialize",function(a,b,A){var q=this,x=M;return q.name=a,q.items=A.$freeze(),x=/(\d+)D(\d+)/i.$match(b),c(x)||q.$raise(i("ArgumentError"),"Unexpected table type: "+b),q.times=x["$[]"](1).$to_i(),q.sides=x["$[]"](2).$to_i()}),I(s,"$roll",function(a){var A,q,b=this,x=M;return A=a.$roll_sum(b.times,b.sides),q=y(A,b.times),x=b.items["$[]"](q),c(x["$respond_to?"]("roll"))&&(x=x.$roll(a)),i("RollResult").$new(b.name,A,x)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var V,d,i,w,r,a,b,j,B,F=e.module,L=e.klass,c=e.hash2,I=e.defs,y=e.def,z=e.rb_plus,M=e.rb_times,D=e.rb_minus,E=[],P=e.nil;return V=E,d=B=[F(E[0],"BCDice")].concat(V),i=j=[F(B[0],"DiceTable")].concat(d),r=[w=L(j[0],null,"D66GridTable")].concat(i),a=e.$r(r),(b=w.$$prototype).name=b.items=P,I(w,"$from_i18n",function(q,x){var k=P;return k=a("I18n").$t(q,c(["locale","raise"],{locale:x,raise:!0})),this.$new(k["$[]"]("name"),k["$[]"]("items"))}),y(w,"$initialize",function(q,x){return this.name=q,this.items=x.$freeze()}),y(w,"$roll",function(q){var l,k,o,h,u;return l=q.$roll_once(6),k=q.$roll_once(6),o=z(M(l,10),k),h=D(l,1),u=D(k,1),a("RollResult").$new(this.name,o,this.items["$[]"](h)["$[]"](u))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var P,B,v,i,w,r,d,W,V,F=e.module,L=e.klass,c=e.hash2,I=e.defs,y=e.def,M=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),P=M,B=V=[F(M[0],"BCDice")].concat(P),d=[F(V[0],"DiceTable")].concat(B),W=e.$r(d),v=d,w=[i=L(d[0],W("D66GridTable"),"D66HalfGridTable")].concat(v),r=e.$r(w),I(i,"$from_i18n",function(b,A){var x=D;return x=r("I18n").$t(b,c(["locale","raise"],{locale:A,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2_3"),x["$[]"]("items_4_5_6"))}),y(i,"$initialize",function(b,A,q){return this.name=b,this.items=[A,A,A,q,q,q].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var P,B,v,i,w,r,d,W,V,F=e.module,L=e.klass,c=e.hash2,I=e.defs,y=e.def,M=[],D=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),P=M,B=V=[F(M[0],"BCDice")].concat(P),d=[F(V[0],"DiceTable")].concat(B),W=e.$r(d),v=d,w=[i=L(d[0],W("D66GridTable"),"D66OneThirdTable")].concat(v),r=e.$r(w),I(i,"$from_i18n",function(b,A){var x=D;return x=r("I18n").$t(b,c(["locale","raise"],{locale:A,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2"),x["$[]"]("items_3_4"),x["$[]"]("items_5_6"))}),y(i,"$initialize",function(b,A,q,x){return this.name=b,this.items=[A,A,q,q,x,x].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var B,j,r,a,b,A,q,v,d,F=e.module,L=e.klass,c=e.hash2,I=e.defs,y=e.def,z=e.eqeqeq,M=e.rb_plus,D=e.rb_times,E=e.truthy,P=[],T=e.nil,V=e.$$$;return B=P,j=d=[F(P[0],"BCDice")].concat(B),r=v=[F(d[0],"DiceTable")].concat(j),b=[a=L(v[0],null,"D66Table")].concat(r),A=e.$r(b),(q=a.$$prototype).sort_type=q.items=q.name=T,I(a,"$from_i18n",function(l,k){var u,h=T;return h=A("I18n").$t(l,c(["locale"],{locale:k})),u=A("D66SortType").$const_get(h["$[]"]("d66_sort_type")),this.$new(h["$[]"]("name"),u,h["$[]"]("items"))}),y(a,"$initialize",function(l,k,o){var h=this;return h.name=l,h.sort_type=k,h.items=o.$freeze()}),y(a,"$roll",function(l){var k=this,o=T,h=T,u=T,p=T;return o=l.$roll_barabara(2,6),z(V(A("D66SortType"),"ASC"),h=k.sort_type)?o["$sort!"]():z(V(A("D66SortType"),"DESC"),h)&&o["$sort!"]()["$reverse!"](),u=M(D(o["$[]"](0),10),o["$[]"](1)),p=E(h=k.items["$[]"](u))?h:k.items["$[]"](u.$to_s()),E(p["$respond_to?"]("roll"))&&(p=p.$roll(l)),A("RollResult").$new(k.name,u,p)}),y(a,"$choice",function(l){return A("RollResult").$new(this.name,l,this.items["$[]"](l))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var N,s,i,w,W,F=e.module,L=e.klass,c=e.hash2,I=e.send,y=e.to_ary,z=e.rb_plus,M=e.rb_times,D=e.send2,E=e.find_super,P=e.def,V=[],G=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),N=V,s=W=[F(V[0],"BCDice")].concat(N),i=[F(W[0],"DiceTable")].concat(s),w=e.$r(i),P(L(i[0],w("D66Table"),"D66LeftRangeTable"),"$initialize",function A(q,x,l){var h;return A.$$p=null,h=c([],{}),I(l,"each",[],function(p){var _,m;return null==p&&(p=G),_=y(p),m=null==_[1]?G:_[1],I(null==_[0]?G:_[0],"each",[],function(R){return null==R&&(R=G),I(m,"each_with_index",[],function(f,$){var H,Q;return null==f&&(f=G),null==$&&($=G),Q=z(M(R,10),z($,1)),I(h,"[]=",H=[Q,f]),H[H.length-1]})})}),D(this,E(this,"initialize",A,!1,!0),"initialize",[q,x,h],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var G,W,w,r,a,b,A,s,N,F=e.module,L=e.klass,c=e.hash2,I=e.defs,y=e.def,z=e.truthy,M=e.rb_minus,D=e.rb_plus,E=e.rb_times,P=[],T=e.nil;return G=P,W=N=[F(P[0],"BCDice")].concat(G),w=s=[F(N[0],"DiceTable")].concat(W),a=[r=L(s[0],null,"D66ParityTable")].concat(w),b=e.$r(a),(A=r.$$prototype).odd=A.even=A.name=T,I(r,"$from_i18n",function(x,l){var o=T;return o=b("I18n").$t(x,c(["locale","raise"],{locale:l,raise:!0})),this.$new(o["$[]"]("name"),o["$[]"]("odd"),o["$[]"]("even"))}),y(r,"$initialize",function(x,l,k){var o=this;return o.name=x,o.odd=l.$freeze(),o.even=k.$freeze()}),y(r,"$roll",function(x){var o,u,p,l=this,k=T;return k=x.$roll_once(6),o=x.$roll_once(6),u=(z(k["$odd?"]())?l.odd:l.even)["$[]"](M(o,1)),p=D(E(k,10),o),b("RollResult").$new(l.name,p,u)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var P,B,s,v,i,w,r,d,V,F=e.module,L=e.klass,c=e.def,I=e.rb_plus,y=e.rb_times,z=e.send,M=[],D=e.nil;return P=M,B=V=[F(M[0],"BCDice")].concat(P),s=d=[F(V[0],"DiceTable")].concat(B),i=[v=L(d[0],null,"D66RangeTable")].concat(s),w=e.$r(i),(r=v.$$prototype).items=r.name=D,c(v,"$initialize",function(b,A){return this.name=b,this.items=A.$freeze()}),c(v,"$roll",function(b){var q,x,l,k=D;return q=b.$roll_once(6),x=b.$roll_once(6),l=I(y(q,10),x),k=z(this.items,"find",[],function(h){return null==h&&(h=D),h["$[]"](0)["$include?"](l)}),w("RollResult").$new(this.name,l,k["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var G,W,w,r,a,b,A,s,N,F=e.module,L=e.klass,c=e.const_set,I=e.send,y=e.truthy,z=e.def,M=e.eqeqeq,D=e.rb_times,E=e.rb_plus,P=[],T=e.nil;return G=P,W=N=[F(P[0],"BCDice")].concat(G),w=s=[F(N[0],"DiceTable")].concat(W),a=[r=L(s[0],null,"RangeTable")].concat(w),b=e.$r(a),(A=r.$$prototype).name=A.items=A.num_of_dice=A.num_of_sides=A.formatter=T,c(a[0],"RollResult",I(b("Struct"),"new",["sum","values","content","formatted"],function q(){return(null==q.$$s?this:q.$$s).$alias_method("to_s","formatted")},{$$s:r})),c(a[0],"Item",b("Struct").$new("range","content")),c(a[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),c(a[0],"DEFAULT_FORMATTER",I(r,"lambda",[],function(x,l){return null==x&&(x=T),null==l&&(l=T),x.$name()+"("+l.$sum()+") \uff1e "+l.$content()})),r.$attr_reader("name"),r.$attr_reader("num_of_dice"),r.$attr_reader("num_of_sides"),z(r,"$initialize",function q(x,l,k){var u,o=q.$$p||T,h=this,p=T;return q.$$p=null,h.name=x.$freeze(),h.formatter=y(u=o)?u:b("DEFAULT_FORMATTER"),p=b("DICE_ROLL_METHOD_RE").$match(l),y(p)||h.$raise(b("ArgumentError"),h.name+": invalid dice roll method: "+l),h.num_of_dice=p["$[]"](1).$to_i(),h.num_of_sides=p["$[]"](2).$to_i(),h.$store(k)}),z(r,"$fetch",function(x){var k,l=this;return k=I(l.items,"find",[],function(h){return null==h&&(h=T),h.$range()["$include?"](x)}),y(k)||l.$raise(b("RangeError"),l.name+": value is out of range: "+x),k}),z(r,"$roll",function(x){var o,l=this,k=T,h=T;return o=(k=x.$roll_barabara(l.num_of_dice,l.num_of_sides)).$sum(),(h=b("RollResult").$new(o,k,l.$fetch(o).$content()))["$formatted="](l.formatter["$[]"](l,h)),h}),r.$private(),z(r,"$store",function(x){var k,o,l=this;return k=I(x,"map",[],function h(u,p){return null==u&&(u=T),null==p&&(p=T),[(null==h.$$s?this:h.$$s).$coerce_to_int_range(u),p]},{$$s:l}),o=I(k,"sort_by",[],function(u,p){return null==u&&(u=T),null==p&&(p=T),u.$min()}),l.$assert_min_sum_is_covered(o),l.$assert_max_sum_is_covered(o),l.$assert_no_gap_or_overlap_in_ranges(o),l.items=I(o,"map",[],function(u,p){return null==u&&(u=T),null==p&&(p=T),b("Item").$new(u,p.$freeze()).$freeze()}).$freeze(),l}),z(r,"$coerce_to_int_range",function(x){var k;return M(b("Integer"),k=x)?b("Range").$new(x,x):M(b("Range"),k)&&y(x.$begin()["$is_a?"](b("Integer")))&&y(x.$end()["$is_a?"](b("Integer")))?x:this.$raise(b("TypeError"),this.name+": "+x+" ("+x.$class()+") must be an Integer or a Range with Integers ")}),z(r,"$assert_min_sum_is_covered",function(x){var k,l=this,o=T;return k=l.num_of_dice,o=x.$first()["$[]"](0),y(o["$include?"](k))||l.$raise(b("RangeError"),l.name+": min value ("+k+") is not covered: "+o),l}),z(r,"$assert_max_sum_is_covered",function(x){var k,l=this,o=T;return k=D(l.num_of_dice,l.num_of_sides),o=x.$last()["$[]"](0),y(o["$include?"](k))||l.$raise(b("RangeError"),l.name+": max value ("+k+") is not covered: "+o),l}),z(r,"$assert_no_gap_or_overlap_in_ranges",function(x){return I(x,"each_cons",[2],function k(o,h){var C,U,u=null==k.$$s?this:k.$$s,p=T,_=T;return null==u.name&&(u.name=T),null==o&&(o=T),null==h&&(h=T),p=o["$[]"](0),_=h["$[]"](0),C=p.$max(),U=E(C,1),y(_["$include?"](C))&&u.$raise(b("RangeError"),u.name+": Range overlap: "+p+" and "+_),y(_["$include?"](U))?T:u.$raise(b("RangeError"),u.name+": Range gap: "+p+" and "+_)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var T,N,v,b,A,q,x,w,W,G,F=e.module,L=e.klass,c=e.send,I=e.def,y=e.rb_minus,z=e.return_ivar,M=[],D=e.nil,E=e.$$$;return T=M,N=G=[F(M[0],"BCDice")].concat(T),v=W=[F(G[0],"DiceTable")].concat(N),b=w=[L(W[0],null,"SaiFicSkillTable")].concat(v),q=[A=L(w[0],null,"Category")].concat(b),x=e.$r(q),I(A,"$initialize",function(k,o,h,u){var p=this;return p.name=k,p.skills=c(o.$map(),"with_index",[2],function(C,U){return null==C&&(C=D),null==U&&(U=D),E(x("SaiFicSkillTable"),"Skill").$new(k,C,h,U,u)}),p.dice=h}),I(A,"$roll",function(k){return this.$skills()["$[]"](y(k.$roll_sum(2,6),2))}),I(A,"$to_s",z("name")),A.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var D,V,W,w,r,s,B,P,F=e.module,L=e.klass,c=e.def,I=e.hash2,y=[],z=e.nil;return D=y,V=P=[F(y[0],"BCDice")].concat(D),W=B=[F(P[0],"DiceTable")].concat(V),s=[L(B[0],null,"SaiFicSkillTable")].concat(W),(r=(w=L(s[0],null,"Skill")).$$prototype).s_format=r.category_dice=r.row_dice=r.category_name=r.name=z,c(w,"$initialize",function(b,A,q,x,l){var k=this;return k.category_name=b,k.name=A,k.category_dice=q,k.row_dice=x,k.s_format=l}),c(w,"$to_s",function(){var b=this;return b.$format(b.s_format,I(["category_dice","row_dice","category_name","skill_name"],{category_dice:b.category_dice,row_dice:b.row_dice,category_name:b.category_name,skill_name:b.name}))}),w.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var s,r,x,l,k,o,h,b,i,F=e.module,L=e.klass,c=e.ensure_kwargs,I=e.hash2,y=e.send,M=e.defs,D=e.const_set,E=e.to_ary,P=e.def,T=e.truthy,V=e.rb_minus,G=e.rb_plus,B=e.top,N=[],d=e.nil,W=e.$$$;return B.$require("bcdice/dice_table/sai_fic_skill_table/category"),B.$require("bcdice/dice_table/sai_fic_skill_table/skill"),s=N,r=i=[F(N[0],"BCDice")].concat(s),x=b=[F(i[0],"DiceTable")].concat(r),k=[l=L(b[0],null,"SaiFicSkillTable")].concat(x),o=e.$r(k),(h=l.$$prototype).rtt=h.rtt_format=h.rct=h.rct_format=h.rttn=h.rttn_format=h.categories=d,M(l,"$from_i18n",function(p,_,C){var U,m,t,$,f=d;return null==(U=(C=c(C)).$$smap.rtt)&&(U=d),null==(m=C.$$smap.rct)&&(m=d),null==(t=C.$$smap.rttn)&&(t=d),$=(f=o("I18n").$t("RTT",I(["locale","raise","default"],{locale:_,raise:!1,default:I([],{})})).$merge(o("I18n").$t(p,I(["locale","raise"],{locale:_,raise:!0}))))["$[]"]("items"),f=y(f,"select",[],function(Q,K){return null==Q&&(Q=d),null==K&&(K=d),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](Q)}),this.$new($,e.to_hash(f).$merge(I(["rtt","rct","rttn"],{rtt:U,rct:m,rttn:t})))},-3),D(k[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),D(k[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),D(k[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),D(k[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),P(l,"$initialize",function(p,_){var C,U,m,t,R,n,f,$=this;return null==(C=(_=c(_)).$$smap.rtt)&&(C=d),null==(U=_.$$smap.rct)&&(U=d),null==(m=_.$$smap.rttn)&&(m=d),null==(t=_.$$smap.rtt_format)&&(t=o("DEFAULT_RTT")),null==(R=_.$$smap.rct_format)&&(R=o("DEFAULT_RCT")),null==(n=_.$$smap.rttn_format)&&(n=o("DEFAULT_RTTN")),null==(f=_.$$smap.s_format)&&(f=o("DEFAULT_S")),$.categories=y(p.$map(),"with_index",[1],function(Q,K){var ie,ce,ne;return null==Q&&(Q=d),null==K&&(K=d),ce=null==(ie=E(Q))[0]?d:ie[0],ne=null==ie[1]?d:ie[1],W(o("SaiFicSkillTable"),"Category").$new(ce,ne,K,f)},{$$has_top_level_mlhs_arg:!0}),$.rtt=C,$.rct=U,$.rttn=m.$to_a(),$.rtt_format=t,$.rct_format=R,$.rttn_format=n},-2),D(k[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),l.$attr_reader("categories"),P(l,"$roll_command",function(p,_){var U,C=this,m=d,t=d;return T(["RTT",C.rtt]["$include?"](U=_))?C.$format_skill(C.rtt_format,C.$roll_skill(p)):T(["RCT",C.rct]["$include?"](U))?(m=C.$roll_category(p),C.$format(C.rct_format,I(["category_dice","category_name"],{category_dice:m.$dice(),category_name:m.$name()}))):T(t=o("RTTN").$index(U))||T(t=C.rttn.$index(U))?C.$format_skill(C.rttn_format,C.categories["$[]"](t).$roll(p)):d}),P(l,"$roll_category",function(p){return this.categories["$[]"](V(p.$roll_once(6),1))}),P(l,"$roll_skill",function(p){return this.$roll_category(p).$roll(p)}),P(l,"$prefixes",function(){var p=this;return G(["RTT[1-6]?","RCT",p.rtt,p.rct],p.rttn).$compact()}),l.$private(),P(l,"$format_skill",function(p,_){return this.$format(p,I(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:_.$category_dice(),row_dice:_.$row_dice(),category_name:_.$category_name(),skill_name:_.$name(),text:_.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var T,N,v,i,w,r,a,W,G,F=e.module,L=e.klass,c=e.hash2,I=e.defs,y=e.truthy,z=e.def,M=e.rb_minus,D=[],E=e.nil;return T=D,N=G=[F(D[0],"BCDice")].concat(T),v=W=[F(G[0],"DiceTable")].concat(N),w=[i=L(W[0],null,"Table")].concat(v),r=e.$r(w),(a=i.$$prototype).times=a.sides=a.name=a.items=E,I(i,"$from_i18n",function(A,q){var l=E;return l=r("I18n").$t(A,c(["locale"],{locale:q})),this.$new(l["$[]"]("name"),l["$[]"]("type"),l["$[]"]("items"))}),z(i,"$initialize",function(A,q,x){var l=this,k=E;return l.name=A,l.items=x.$freeze(),k=/(\d+)D(\d+)/i.$match(q),y(k)||l.$raise(r("ArgumentError"),"Unexpected table type: "+q),l.times=k["$[]"](1).$to_i(),l.sides=k["$[]"](2).$to_i()}),z(i,"$roll",function(A){var x,q=this;return x=A.$roll_sum(q.times,q.sides),q.$choice(x)}),z(i,"$choice",function(A){var x,q=this;return x=M(A,q.times),r("RollResult").$new(q.name,A,q.items["$[]"](x))})},Opal.modules["bcdice/dice_table"]=function(e){var F=e.top;return F.$require("bcdice/dice_table/roll_result"),F.$require("bcdice/dice_table/chain_table"),F.$require("bcdice/dice_table/d66_grid_table"),F.$require("bcdice/dice_table/d66_half_grid_table"),F.$require("bcdice/dice_table/d66_one_third_table"),F.$require("bcdice/dice_table/d66_left_range_table"),F.$require("bcdice/dice_table/d66_parity_table"),F.$require("bcdice/dice_table/d66_range_table"),F.$require("bcdice/dice_table/d66_table"),F.$require("bcdice/dice_table/range_table"),F.$require("bcdice/dice_table/sai_fic_skill_table"),F.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var z,P,V,D,F=e.module,L=e.const_set,c=[];return z=c,P=D=[F(c[0],"BCDice")].concat(z),V=[F(D[0],"D66SortType")].concat(P),L(V[0],"NO_SORT","no_sort"),L(V[0],"ASC","asc"),L(V[0],"DESC","desc"),function(E,P){var V=[F(E,"RoundType")].concat(P);return L(V[0],"CEIL","ceil"),L(V[0],"FLOOR","floor"),L(V[0],"ROUND","round")}(D[0],D)},Opal.modules["bcdice/translate"]=function(e){var P,B,N,d,W,V,F=e.module,L=e.ensure_kwargs,c=e.kwrestargs,y=e.hash2,z=e.def,M=[],D=e.nil;return P=M,B=V=[F(M[0],"BCDice")].concat(P),d=[N=F(V[0],"Translate")].concat(B),W=e.$r(d),z(N,"$translate",function(s,v){var i,w=this;return null==w.locale&&(w.locale=D),v=L(v),i=c(v,{}),W("I18n").$translate(s,y(["locale","raise"],{locale:w.locale,raise:!0}).$merge(e.to_hash(i)))},-2)},Opal.modules["bcdice/result"]=function(e){var N,j,d,P,V,L=e.klass,c=e.send,I=e.def,y=e.return_val,z=e.return_ivar,M=[],D=e.nil;return P=M,N=V=[(0,e.module)(M[0],"BCDice")].concat(P),[d=L(V[0],null,"Result")].concat(N),I(j=e.get_singleton_class(d),"$success",function(i){return c(this.$new(),"tap",[],function(a){var b;return null==a&&(a=D),a["$text="](i),c(a,"success=",b=[!0]),b[b.length-1]})}),I(j,"$failure",function(i){return c(this.$new(),"tap",[],function(a){var b;return null==a&&(a=D),a["$text="](i),c(a,"failure=",b=[!0]),b[b.length-1]})}),I(j,"$critical",function(i){return c(this.$new(),"tap",[],function(a){var b;return null==a&&(a=D),a["$text="](i),a["$critical="](!0),c(a,"success=",b=[!0]),b[b.length-1]})}),I(j,"$fumble",function(i){return c(this.$new(),"tap",[],function(a){var b;return null==a&&(a=D),a["$text="](i),a["$fumble="](!0),c(a,"failure=",b=[!0]),b[b.length-1]})}),I(j,"$nothing",y("nothing")),I(d,"$initialize",function(s){var v=this;return null==s&&(s=D),v.text=s,v.rands=D,v.detailed_rands=D,v.secret=!1,v.success=!1,v.failure=!1,v.critical=!1,v.fumble=!1},-1),d.$attr_accessor("text","rands","detailed_rands"),d.$attr_writer("secret","success","failure","critical","fumble"),I(d,"$secret?",z("secret")),I(d,"$success?",z("success")),I(d,"$failure?",z("failure")),I(d,"$critical?",z("critical")),I(d,"$fumble?",z("fumble")),I(d,"$condition=",function(s){return this.success=s,this.failure=s["$!"]()})},Opal.modules["racc/parser"]=function(e){var A,x,l,F=e.module,L=e.klass,c=e.truthy,I=e.const_set,y=e.defs,z=e.gvars,M=e.rb_lt,D=e.def,E=e.to_ary,P=e.send,T=e.neqeq,V=e.rb_plus,G=e.eqeq,B=e.rb_ge,N=e.rb_gt,d=e.rb_minus,W=e.rb_le,j=e.rb_times,s=e.assign_ivar_val,i=[],w=e.$r(i),r=e.nil,a=e.$$$;return A=i,x=[F(i[0],"Racc")].concat(A),l=e.$r(x),L(x[0],l("StandardError"),"ParseError"),c(a("::","ParseError","skip_raise")?"constant":r)||I(i[0],"ParseError",a(w("Racc"),"ParseError")),function(b,A){var u,p,_,C,U,l=[F(b,"Racc")].concat(A),k=e.$r(l);return c(k("Racc_No_Extensions","skip_raise")?"constant":r)||I(l[0],"Racc_No_Extensions",!1),u=l,_=[p=L(l[0],null,"Parser")].concat(u),C=e.$r(_),(U=p.$$prototype).yydebug=U.racc_debug_out=U.racc_error_status=U.racc_t=U.racc_vstack=U.racc_val=U.racc_state=U.racc_tstack=r,I(_[0],"Racc_Runtime_Version","1.4.6"),I(_[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),I(_[0],"Racc_Runtime_Core_Version_R","1.4.6"),I(_[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),I(_[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),I(_[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),I(_[0],"Racc_Runtime_Core_Version",C("Racc_Runtime_Core_Version_R")),I(_[0],"Racc_Runtime_Core_Revision",C("Racc_Runtime_Core_Revision_R")),I(_[0],"Racc_Runtime_Type","ruby"),y(C("Parser"),"$racc_runtime_type",function(){return C("Racc_Runtime_Type")}),D(p,"$_racc_setup",function(){var t,R,n=this,f=r,$=r;return null==z.stderr&&(z.stderr=r),c(a(n.$class(),"Racc_debug_parser"))||(n.yydebug=!1),c(null!=(t=n.yydebug)&&t!==r?"instance-variable":r)||(n.yydebug=!1),c(n.yydebug)&&(c(null!=(R=n.racc_debug_out)&&R!==r?"instance-variable":r)||(n.racc_debug_out=z.stderr),n.racc_debug_out=c(f=n.racc_debug_out)?f:z.stderr),$=a(n.$class(),"Racc_arg"),c(M($.$size(),14))&&$["$[]="](13,!0),$}),D(p,"$_racc_init_sysvars",function(){var t=this;return t.racc_state=[0],t.racc_tstack=[],t.racc_vstack=[],t.racc_t=r,t.racc_val=r,t.racc_read_next=!0,t.racc_user_yyerror=!1,t.racc_error_status=0}),D(p,"$do_parse",function(){return this.$__send__(C("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),D(p,"$next_token",function(){return this.$raise(C("NotImplementedError"),this.$class()+"#next_token is not defined")}),D(p,"$_racc_do_parse_rb",function(t,R){var n,$=this,H=r,Q=r,K=r,ie=r,ce=r,ne=r,ue=r,ae=r;return n=E(t),H=null==n[0]?r:n[0],Q=null==n[1]?r:n[1],K=null==n[2]?r:n[2],ie=null==n[3]?r:n[3],ce=null==n[10]?r:n[10],$.$_racc_init_sysvars(),ne=ue=ae=r,P($,"catch",["racc_end_parse"],function J(){var se,Y,g=null==J.$$s?this:J.$$s,Z=r;for(null==g.racc_state&&(g.racc_state=r),null==g.racc_read_next&&(g.racc_read_next=r),null==g.racc_t&&(g.racc_t=r),null==g.yydebug&&(g.yydebug=r),null==g.racc_val&&(g.racc_val=r);c(!0);)for(c(ae=ie["$[]"](g.racc_state["$[]"](-1)))?(c(g.racc_read_next)&&T(g.racc_t,0)&&(Y=g.$next_token(),se=E(Y),ne=null==se[0]?r:se[0],g.racc_val=null==se[1]?r:se[1],g.racc_t=c(ne)?c(Z=ce["$[]"](ne))?Z:1:0,c(g.yydebug)&&g.$racc_read_token(g.racc_t,ne,g.racc_val),g.racc_read_next=!1),ae=V(ae,g.racc_t),c(B(ae,0))&&c(ue=H["$[]"](ae))&&G(Q["$[]"](ae),g.racc_state["$[]"](-1))||(ue=K["$[]"](g.racc_state["$[]"](-1)))):ue=K["$[]"](g.racc_state["$[]"](-1));c(ue=g.$_racc_evalact(ue,t)););},{$$s:$})}),D(p,"$yyparse",function(t,R){return this.$__send__(C("Racc_YY_Parse_Method"),t,R,this.$_racc_setup(),!0)}),D(p,"$_racc_yyparse_rb",function(t,R,n,f){var $,Q=this,K=r,ie=r,$e=r,ce=r,ue=r,ae=r,J=r;return $=E(n),K=null==$[0]?r:$[0],ie=null==$[1]?r:$[1],$e=null==$[2]?r:$[2],ce=null==$[3]?r:$[3],ue=null==$[10]?r:$[10],Q.$_racc_init_sysvars(),ae=r,J=r,P(Q,"catch",["racc_end_parse"],function se(){var Y=null==se.$$s?this:se.$$s;for(null==Y.racc_state&&(Y.racc_state=r);!c(J=ce["$[]"](Y.racc_state["$[]"](-1)));)for(;c(ae=Y.$_racc_evalact($e["$[]"](Y.racc_state["$[]"](-1)),n)););return P(t,"__send__",[R],function g(Z,X){var S=null==g.$$s?this:g.$$s,ee=r,te=r;for(null==S.racc_t&&(S.racc_t=r),null==S.racc_state&&(S.racc_state=r),null==S.racc_read_next&&(S.racc_read_next=r),null==Z&&(Z=r),null==X&&(X=r),S.racc_t=c(Z)?c(ee=ue["$[]"](Z))?ee:1:0,S.racc_val=X,S.racc_read_next=!1,J=V(J,S.racc_t),c(B(J,0))&&c(ae=K["$[]"](J))&&G(ie["$[]"](J),S.racc_state["$[]"](-1))||(ae=$e["$[]"](S.racc_state["$[]"](-1)));c(ae=S.$_racc_evalact(ae,n)););for(;c(c(ee=c(te=(J=ce["$[]"](S.racc_state["$[]"](-1)))["$!"]())?te:S.racc_read_next["$!"]())?ee:S.racc_t["$=="](0));)for(c(J)&&c(J=V(J,S.racc_t))&&c(B(J,0))&&c(ae=K["$[]"](J))&&G(ie["$[]"](J),S.racc_state["$[]"](-1))||(ae=$e["$[]"](S.racc_state["$[]"](-1)));c(ae=S.$_racc_evalact(ae,n)););},{$$s:Y})},{$$s:Q})}),D(p,"$_racc_evalact",function(t,R){var n,$e,$=this,H=r,Q=r,ie=r,ce=r,ne=r,ue=r;if(H=null==(n=E(R))[0]?r:n[0],Q=null==n[1]?r:n[1],ie=null==n[3]?r:n[3],$e=null==n[11]?r:n[11],ce=null==n[12]?r:n[12],c(N(t,0))&&c(M(t,$e)))c(N($.racc_error_status,0))&&(G($.racc_t,1)||($.racc_error_status=d($.racc_error_status,1))),$.racc_vstack.$push($.racc_val),$.racc_state.$push(t),$.racc_read_next=!0,c($.yydebug)&&($.racc_tstack.$push($.racc_t),$.$racc_shift($.racc_t,$.racc_tstack,$.racc_vstack));else if(c(M(t,0))&&c(N(t,ce["$-@"]()))){if(ne=P($,"catch",["racc_jump"],function ae(){var J=null==ae.$$s?this:ae.$$s;return null==J.racc_state&&(J.racc_state=r),J.racc_state.$push(J.$_racc_do_reduce(R,t)),!1},{$$s:$}),c(ne))switch(ne.valueOf()){case 1:return $.racc_user_yyerror=!0,ce["$-@"]();case 2:return $e;default:$.$raise("[Racc Bug] unknown jump code")}}else if(G(t,$e))c($.yydebug)&&$.$racc_accept(),$.$throw("racc_end_parse",$.racc_vstack["$[]"](0));else{if(G(t,ce["$-@"]())){switch($.racc_error_status.valueOf()){case 0:c(R["$[]"](21))||$.$on_error($.racc_t,$.racc_val,$.racc_vstack);break;case 3:G($.racc_t,0)&&$.$throw("racc_end_parse",r),$.racc_read_next=!0}for($.racc_user_yyerror=!1,$.racc_error_status=3;c(!0)&&!(c(ue=ie["$[]"]($.racc_state["$[]"](-1)))&&(ue=V(ue,1),c(B(ue,0))&&c(t=H["$[]"](ue))&&G(Q["$[]"](ue),$.racc_state["$[]"](-1))));)c(W($.racc_state.$size(),1))&&$.$throw("racc_end_parse",r),$.racc_state.$pop(),$.racc_vstack.$pop(),c($.yydebug)&&($.racc_tstack.$pop(),$.$racc_e_pop($.racc_state,$.racc_tstack,$.racc_vstack));return t}$.$raise("[Racc Bug] unknown action "+t.$inspect())}return c($.yydebug)&&$.$racc_next_state($.racc_state["$[]"](-1),$.racc_state),r}),D(p,"$_racc_do_reduce",function(t,R){var n,ce,ue,Z,X,S,re,$=this,Q=r,K=r,ie=r,$e=r,ne=r,ae=r,J=r,se=r,Y=r,g=r,ee=r,te=r,O=r;return Q=null==(n=E(t))[4]?r:n[4],K=null==n[5]?r:n[5],ie=null==n[6]?r:n[6],$e=null==n[7]?r:n[7],ce=null==n[8]?r:n[8],ne=null==n[9]?r:n[9],ue=null==n[13]?r:n[13],ae=$.racc_state,J=$.racc_vstack,se=$.racc_tstack,Y=j(R,-3),g=ne["$[]"](Y),Z=ne["$[]"](V(Y,1)),X=ne["$[]"](V(Y,2)),S=[],c($.yydebug)&&(ee=se["$[]"](g["$-@"](),g)),te=J["$[]"](g["$-@"](),g),c($.yydebug)&&se["$[]="](g["$-@"](),g,S),J["$[]="](g["$-@"](),g,S),ae["$[]="](g["$-@"](),g,S),c(ue)?J.$push($.$__send__(X,te,J,te["$[]"](0))):J.$push($.$__send__(X,te,J)),se.$push(Z),c($.yydebug)&&$.$racc_reduce(ee,Z,se,J),re=d(Z,ce),c(Y=$e["$[]"](re))&&(Y=V(Y,ae["$[]"](-1)),c(B(Y,0))&&c(O=Q["$[]"](Y))&&G(K["$[]"](Y),re))?O:ie["$[]"](re)}),D(p,"$on_error",function(t,R,n){var $,f=this;return f.$raise(C("ParseError"),f.$sprintf("\nparse error on value %s (%s)",R.$inspect(),c($=f.$token_to_str(t))?$:"?"))}),D(p,"$yyerror",function(){return this.$throw("racc_jump",1)}),D(p,"$yyaccept",function(){return this.$throw("racc_jump",2)}),D(p,"$yyerrok",s("racc_error_status",0)),D(p,"$racc_read_token",function(t,R,n){var f=this;return f.racc_debug_out.$print("read    "),f.racc_debug_out.$print(R.$inspect(),"(",f.$racc_token2str(t),") "),f.racc_debug_out.$puts(n.$inspect()),f.racc_debug_out.$puts()}),D(p,"$racc_shift",function(t,R,n){var f=this;return f.racc_debug_out.$puts("shift   "+f.$racc_token2str(t)),f.$racc_print_stacks(R,n),f.racc_debug_out.$puts()}),D(p,"$racc_reduce",function(t,R,n,f){var $=this,H=r;return(H=$.racc_debug_out).$print("reduce "),c(t["$empty?"]())?H.$print(" <none>"):P(t,"each",[],function Q(K){return null==K&&(K=r),H.$print(" ",(null==Q.$$s?this:Q.$$s).$racc_token2str(K))},{$$s:$}),H.$puts(" --\x3e "+$.$racc_token2str(R)),$.$racc_print_stacks(n,f),$.racc_debug_out.$puts()}),D(p,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),D(p,"$racc_e_pop",function(t,R,n){var f=this;return f.racc_debug_out.$puts("error recovering mode: pop token"),f.$racc_print_states(t),f.$racc_print_stacks(R,n),f.racc_debug_out.$puts()}),D(p,"$racc_next_state",function(t,R){var n=this;return n.racc_debug_out.$puts("goto    "+t),n.$racc_print_states(R),n.racc_debug_out.$puts()}),D(p,"$racc_print_stacks",function(t,R){var f=r;return(f=this.racc_debug_out).$print("        ["),P(t,"each_index",[],function $(H){return null==H&&(H=r),f.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(t["$[]"](H))," ",R["$[]"](H).$inspect(),")")},{$$s:this}),f.$puts(" ]")}),D(p,"$racc_print_states",function(t){var n=r;return(n=this.racc_debug_out).$print("        ["),P(t,"each",[],function($){return null==$&&($=r),n.$print(" ",$)}),n.$puts(" ]")}),D(p,"$racc_token2str",function(t){var n;return c(n=a(this.$class(),"Racc_token_to_s_table")["$[]"](t))?n:this.$raise("[Racc Bug] can't convert token "+t+" to string")}),D(p,"$token_to_str",function(t){return a(this.$class(),"Racc_token_to_s_table")["$[]"](t)})}(i[0],i)},Opal.modules["bcdice/arithmetic/node"]=function(e){var s,r,q,u,p,l,k,b,i,F=e.module,L=e.klass,c=e.def,I=e.thrower,y=e.return_ivar,z=e.send2,M=e.find_super,D=e.eqeq,E=e.const_set,P=e.eqeqeq,T=e.rb_divide,V=e.truthy,G=e.assign_ivar,B=e.alias,N=[],d=e.nil,W=e.$$$;return s=N,r=i=[F(N[0],"BCDice")].concat(s),q=b=[F(i[0],"Arithmetic")].concat(r),l=[F(b[0],"Node")].concat(q),k=e.$r(l),(p=(u=L(l[0],null,"BinaryOp")).$$prototype).lhs=p.rhs=p.op=d,c(u,"$initialize",function(C,U,m){var t=this;return t.lhs=C,t.op=U,t.rhs=m}),c(u,"$eval",function(C){try{I("eval_return");var R,m=this,t=d;return t=m.lhs.$eval(C),R=m.rhs.$eval(C),t.$send(m.op,R)}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),c(u,"$output",function(){var C=this;return""+C.lhs.$output()+C.op+C.rhs.$output()}),c(u,"$s_exp",function(){var C=this;return"("+C.$op_for_s_exp()+" "+C.lhs.$s_exp()+" "+C.rhs.$s_exp()+")"}),c(u,"$op_for_s_exp",y("op")),function(o,h,u){var p=L(o,h,"DivideBase"),_=[p].concat(u),C=e.$r(_),U=p.$$prototype;U.lhs=U.rhs=U.op=d,c(p,"$initialize",function m(t,R){return m.$$p=null,z(this,M(this,"initialize",m,!1,!0),"initialize",[t,"/",R],null)}),c(p,"$eval",function(t){try{I("eval_return");var f,$,n=this;return f=n.lhs.$eval(t),$=n.rhs.$eval(t),D($,0)&&n.$raise(C("ZeroDivisionError")),n.$divide_and_round(f,$,t)}catch(H){if(H===e.t_eval_return)return H.$v;throw H}}),c(p,"$output",function m(){var t=m.$$p||d,R=this;return m.$$p=null,""+z(R,M(R,"output",m,!1,!0),"output",[],t)+R.$rounding_method()}),p.$private(),c(p,"$rounding_method",function(){return W(this.$class(),"ROUNDING_METHOD")}),c(p,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),c(p,"$divide_and_round",function(t,R,n){return this.$raise(C("NotImplementedError"))})}(l[0],k("BinaryOp"),l),function(o,h,u){var p=L(o,h,"DivideWithGameSystemDefault"),_=[p].concat(u),C=e.$r(_);E(_[0],"ROUNDING_METHOD",""),p.$private(),c(p,"$divide_and_round",function(m,t,R){var n,f=d;return P(W(C("RoundType"),"CEIL"),n=R)?T(m.$to_f(),t).$ceil():P(W(C("RoundType"),"ROUND"),n)?(f=T(m.$to_f(),t),V(f["$negative?"]())?f.$abs().$round()["$-@"]():f.$round()):T(m,t).$floor()})}(l[0],k("DivideBase"),l),function(o,h,u){var p=L(o,h,"DivideWithCeil"),_=[p].concat(u);E(_[0],"ROUNDING_METHOD","C"),p.$private(),c(p,"$divide_and_round",function(U,m,t){return T(U.$to_f(),m).$ceil()})}(l[0],k("DivideBase"),l),function(o,h,u){var p=L(o,h,"DivideWithRound"),_=[p].concat(u);E(_[0],"ROUNDING_METHOD","R"),p.$private(),c(p,"$divide_and_round",function(U,m,t){var R=d;return R=T(U.$to_f(),m),V(R["$negative?"]())?R.$abs().$round()["$-@"]():R.$round()})}(l[0],k("DivideBase"),l),function(o,h,u){var p=L(o,h,"DivideWithFloor"),_=[p].concat(u);E(_[0],"ROUNDING_METHOD","F"),p.$private(),c(p,"$divide_and_round",function(U,m,t){return T(U,m).$floor()})}(l[0],k("DivideBase"),l),function(o,h){var u=L(o,null,"Negative");u.$$prototype.body=d,c(u,"$initialize",G("body")),c(u,"$eval",function(C){try{return I("eval_return"),this.body.$eval(C)["$-@"]()}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(u,"$output",function(){return"-"+this.body.$output()}),c(u,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(l[0]),function(o,h){var u=L(o,null,"Parenthesis");u.$$prototype.expr=d,c(u,"$initialize",G("expr")),c(u,"$eval",function(C){try{return I("eval_return"),this.expr.$eval(C)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),c(u,"$output",function(){return"("+this.expr.$output()+")"}),c(u,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(l[0]),function(o,h){var u=L(o,null,"Number");return u.$$prototype.value=d,c(u,"$initialize",G("value")),c(u,"$eval",y("value")),c(u,"$output",function(){return this.value.$to_s()}),B(u,"s_exp","output")}(l[0])},Opal.modules.strscan=function(e){var G,B,N,d,W,L=e.def,c=e.truthy,I=e.eqeqeq,y=e.Opal,z=e.return_ivar,M=e.send,D=e.alias,E=[],P=e.nil;return G=E,N=[B=(0,e.klass)(E[0],null,"StringScanner")].concat(G),d=e.$r(N),(W=B.$$prototype).pos=W.string=W.working=W.matched=W.prev_pos=W.match=P,B.$attr_reader("pos","matched"),L(B,"$initialize",function(s){var v=this;return v.string=s,v.pos=0,v.matched=P,v.working=s,v.match=[]}),B.$attr_reader("string"),L(B,"$beginning_of_line?",function(){var s=this;return 0===s.pos||"\n"===s.string.charAt(s.pos-1)}),L(B,"$scan",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);return null==i?v.matched=P:(v.prev_pos=v.pos,v.pos+=i[0].length,v.working=v.working.substring(i[0].length),v.matched=i[0],v.match=i,i[0])}),L(B,"$scan_until",function(s){var v=this;s=v.$anchor(s);for(var i=v.working,w=0;i.length!=w;++w){var r=s.exec(i.substr(w));if(null!==r){var a=w+r[0].length,b=i.substr(0,a);return v.matched=r[0],v.match=r,v.prev_pos=v.pos+w,v.pos+=a,v.working=i.substr(a),b}}return v.matched=P}),L(B,"$[]",function(s){var i;if(c(this.match["$empty?"]()))return P;I(d("Symbol"),i=s)?s=s.$to_s():I(d("String"),i)||(s=y["$coerce_to!"](s,d("Integer"),"to_int"));var w=this.match;return s<0&&(s+=w.length),s<0||s>=w.length||null==w[s]?P:w[s]}),L(B,"$check",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);return v.matched=null==i?P:i[0]}),L(B,"$check_until",function(s){var v=this,i=v.prev_pos,w=v.pos,r=v.working,a=v.$scan_until(s);return v.prev_pos=i,v.pos=w,v.working=r,a}),L(B,"$peek",function(s){return this.working.substring(0,s)}),L(B,"$eos?",function(){return 0===this.working.length}),L(B,"$exist?",function(s){var i=s.exec(this.working);return null==i?P:0==i.index?0:i.index+1}),L(B,"$skip",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);if(null==i)return v.match=[],v.matched=P;var w=i[0],r=w.length;return v.matched=w,v.match=i,v.prev_pos=v.pos,v.pos+=r,v.working=v.working.substring(r),r}),L(B,"$skip_until",function(s){var i=this.$scan_until(s);return i===P?P:(this.matched=i.substr(-1),i.length)}),L(B,"$get_byte",function(){var s=this,v=P;return s.pos<s.string.length?(s.prev_pos=s.pos,s.pos+=1,v=s.matched=s.working.substring(0,1),s.working=s.working.substring(1)):s.matched=P,v}),L(B,"$match?",function(s){var v=this,i=(s=v.$anchor(s)).exec(v.working);return null==i?P:(v.prev_pos=v.pos,i[0].length)}),L(B,"$pos=",function(s){var v=this;return s<0&&(s+=v.string.$length()),v.pos=s,v.working=v.string.slice(s)}),L(B,"$matched_size",function(){return this.matched===P?P:this.matched.length}),L(B,"$post_match",function(){var s=this;return s.matched===P?P:s.string.substr(s.pos)}),L(B,"$pre_match",function(){var s=this;return s.matched===P?P:s.string.substr(0,s.prev_pos)}),L(B,"$reset",function(){var s=this;return s.working=s.string,s.matched=P,s.pos=0}),L(B,"$rest",z("working")),L(B,"$rest?",function(){return 0!==this.working.length}),L(B,"$rest_size",function(){return this.$rest().$size()}),L(B,"$terminate",function(){var s,v=this;return v.match=P,s=[v.string.$length()],M(v,"pos=",s),s[s.length-1]}),L(B,"$unscan",function(){var s=this;return s.pos=s.prev_pos,s.prev_pos=P,s.match=P,s}),D(B,"bol?","beginning_of_line?"),D(B,"getch","get_byte"),B.$private(),L(B,"$anchor",function(s){var v=s.toString().match(/\/([^\/]+)$/);return v=v?v[1]:void 0,new RegExp("^(?:"+s.source+")",v)})},Opal.modules["bcdice/normalize"]=function(e){var D,V,P,F=e.module,L=e.eqeqeq,c=e.def,I=e.eqeq,y=[],z=e.nil;return D=y,P=[F(y[0],"BCDice")].concat(D),(V=F(P[0],"Normalize")).$module_function(),c(V,"$comparison_operator",function(B){var N;return L(/<=|=</,N=B)?"<=":L(/>=|=>/,N)?">=":L(/<>|!=|=!/,N)?"!=":L(/</,N)?"<":L(/>/,N)?">":L(/=/,N)?"==":z}),c(V,"$target_number",function(B){return I(B,"?")?B:B.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var G,W,w,r,a,b,A,s,N,F=e.module,L=e.klass,c=e.const_set,I=e.hash2,y=e.truthy,z=e.send,M=e.def,D=e.thrower,E=e.top,P=[],T=e.nil;return E.$require("strscan"),E.$require("bcdice/normalize"),G=P,W=N=[F(P[0],"BCDice")].concat(G),w=s=[F(N[0],"Command")].concat(W),a=[r=L(s[0],null,"Lexer")].concat(w),b=e.$r(a),(A=r.$$prototype).scanner=A.notations=T,c(a[0],"SYMBOLS",I(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),M(r,"$initialize",function(x,l){var k,o,u;return x=y(u=(k=(o=x)===T||null==o?T:o.$split(" ",2))===T||null==k?T:k.$first())?u:"",this.scanner=b("StringScanner").$new(x),this.notations=z(l,"map",[],function(_){return null==_&&(_=T),y(_["$is_a?"](b("String")))?b("Regexp").$new(_):_})}),M(r,"$next_token",function(){try{var x=D("return"),l=this,k=T,o=T,u=T,p=T;return y(l.scanner["$eos?"]())?[!1,"$"]:(z(l.notations,"each",[],function _(C){var m,U=null==_.$$s?this:_.$$s;if(null==U.scanner&&(U.scanner=T),null==C&&(C=T),m=U.scanner.$scan(C),!y(m))return T;x.$throw(["NOTATION",m])},{$$s:l,$$ret:x}),y(k=l.scanner.$scan(/\d+/))?["NUMBER",k.$to_i()]:y(o=l.scanner.$scan(/[<>!=]+/))?(o=b("Normalize").$comparison_operator(o),[y(o)?"CMP_OP":"ILLEGAL",o]):(u=l.scanner.$getch().$upcase(),[y(p=b("SYMBOLS")["$[]"](u))?p:u.$to_sym(),u]))}catch(_){if(_===x)return _.$v;throw _}}),M(r,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var E,G,j,s,v,i,w,N,T,F=e.module,L=e.klass,c=e.def,I=e.return_ivar,y=e.truthy,z=[],M=e.nil;return E=z,G=T=[F(z[0],"BCDice")].concat(E),j=N=[F(T[0],"Command")].concat(G),v=[s=L(N[0],null,"Parsed")].concat(j),i=e.$r(v),(w=s.$$prototype).critical=w.fumble=w.dollar=w.modify_number=w.question_target=w.target_number=w.prefix_number=w.command=w.suffix_number=w.cmp_op=M,s.$attr_accessor("command"),s.$attr_accessor("prefix_number"),s.$attr_accessor("suffix_number"),s.$attr_accessor("critical"),s.$attr_accessor("fumble"),s.$attr_accessor("dollar"),s.$attr_accessor("modify_number"),s.$attr_accessor("cmp_op"),s.$attr_accessor("target_number"),s.$attr_writer("question_target"),c(s,"$initialize",function(){var a=this;return a.prefix_number=M,a.suffix_number=M,a.critical=M,a.fumble=M,a.dollar=M,a.cmp_op=M,a.target_number=M,a.question_target=!1}),c(s,"$question_target?",I("question_target")),c(s,"$to_s",function(a){var b=this,A=M,q=M,x=M,l=M,k=M;switch(null==a&&(a="after_command"),A=y(b.critical)?"@"+b.critical:M,q=y(b.fumble)?"#"+b.fumble:M,x=y(b.dollar)?"$"+b.dollar:M,l=i("Format").$modifier(b.modify_number),k=y(b.question_target)?"?":b.target_number,a.valueOf()){case"after_command":return[b.prefix_number,b.command,b.suffix_number,A,q,x,l,b.cmp_op,k].$join();case"after_modify_number":return[b.prefix_number,b.command,b.suffix_number,l,A,q,x,b.cmp_op,k].$join();case"after_target_number":return[b.prefix_number,b.command,b.suffix_number,l,b.cmp_op,k,A,q,x].$join();default:return M}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var a,x,p,R,n,f,$,H,Q,K,ie,$e,ue,_,m,t,se,k,o,A,F=e.klass,L=e.module,c=e.slice,I=e.extract_kwargs,y=e.ensure_kwargs,z=e.get_kwarg,M=e.send2,D=e.find_super,E=e.def,P=e.send,T=e.eqeq,V=e.thrower,G=e.hash,B=e.const_set,N=e.truthy,d=e.to_ary,W=e.hash2,j=e.top,s=[],v=e.$r(s),i=e.nil,w=e.$$$;return j.$require("racc/parser.rb"),j.$require("bcdice/arithmetic/node"),j.$require("bcdice/command/lexer"),j.$require("bcdice/command/parsed"),F(w(v("BCDice"),"Command"),w(v("Racc"),"Parser"),"Parser"),a=s,x=A=[L(s[0],"BCDice")].concat(a),k=[L(A[0],"Command")].concat(x),o=e.$r(k),p=k,m=[_=F(k[0],w(o("Racc"),"Parser"),"Parser")].concat(p),t=e.$r(m),(se=_.$$prototype).notations=se.lexer=se.modifier=se.suffix_number=se.prefix_number=se.need_suffix_number=se.need_prefix_number=se.critical=se.fumble=se.dollar=se.allowed_cmp_op=se.question_target=i,E(_,"$initialize",function Y(g,Z){var X,S,ee,te,O=this;return Y.$$p=null,X=c(arguments),S=I(X),S=y(S),ee=X,te=z(S,"round_type"),M(O,D(O,"initialize",Y,!1,!0),"initialize",[],null),O.notations=ee,O.round_type=te,O.prefix_number=!1,O.suffix_number=!1,O.need_prefix_number=!1,O.need_suffix_number=!1,O.modifier=!0,O.critical=!1,O.fumble=!1,O.dollar=!1,O.allowed_cmp_op=[i,">=",">","<=","<","==","!="],O.question_target=!1},-2),E(_,"$disable_modifier",function(){return this.modifier=!1,this}),E(_,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),E(_,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),E(_,"$has_prefix_number",function(){var g=this;return g.prefix_number=!0,g.need_prefix_number=!0,g}),E(_,"$has_suffix_number",function(){var g=this;return g.suffix_number=!0,g.need_suffix_number=!0,g}),E(_,"$enable_critical",function(){return this.critical=!0,this}),E(_,"$enable_fumble",function(){return this.fumble=!0,this}),E(_,"$enable_dollar",function(){return this.dollar=!0,this}),E(_,"$restrict_cmp_op_to",function(g){var Z;return Z=c(arguments),this.allowed_cmp_op=Z,this},-1),E(_,"$enable_question_target",function(){return this.question_target=!0,this}),E(_,"$parse",function(g){var Z=this;try{return Z.lexer=t("Lexer").$new(g,Z.notations),Z.$do_parse()}catch(X){if(!e.rescue(X,[t("ParseError"),t("ZeroDivisionError")]))throw X;try{return i}finally{e.pop_exception()}}}),_.$private(),E(_,"$parsed",function(g,Z,X,S){try{return V("eval_return"),P(t("Parsed").$new(),"tap",[],function re(O){var _e,le,de,me,ve,fe,be,oe=null==re.$$s?this:re.$$s;return null==oe.round_type&&(oe.round_type=i),null==O&&(O=i),O["$command="](g["$[]"]("command")),O["$prefix_number="]((_e=g["$[]"]("prefix"))===i||null==_e?i:_e.$eval(oe.round_type)),O["$suffix_number="]((le=g["$[]"]("suffix"))===i||null==le?i:le.$eval(oe.round_type)),O["$critical="]((de=Z["$[]"]("critical"))===i||null==de?i:de.$eval(oe.round_type)),O["$fumble="]((me=Z["$[]"]("fumble"))===i||null==me?i:me.$eval(oe.round_type)),O["$dollar="]((ve=Z["$[]"]("dollar"))===i||null==ve?i:ve.$eval(oe.round_type)),O["$modify_number="](X.$eval(oe.round_type)),O["$cmp_op="](S["$[]"]("cmp_op")),T(S["$[]"]("target"),"?")?(O["$question_target="](!0),P(O,"target_number=",fe=[0]),fe[fe.length-1]):(O["$question_target="](!1),fe=[(be=S["$[]"]("target"),be===i||null==be?i:be.$eval(oe.round_type))],P(O,"target_number=",fe),fe[fe.length-1])},{$$s:this})}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),E(_,"$next_token",function(){return this.lexer.$next_token()}),R=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),n=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),f=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),$=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),H=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),Q=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),K=[i,6,13,3,9,-1,27,-15,-10,-1,-38],ie=[i,i,i,i,i,i,19,16,15,i,i],$e=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),ue=G(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),B(m[0],"Racc_arg",[R,n,$,f,H,Q,ie,K,19,$e,ue,58,35,!0]),N(t("Ractor","skip_raise")?"constant":i)&&t("Ractor").$make_shareable(t("Racc_arg")),B(m[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),N(t("Ractor","skip_raise")?"constant":i)&&t("Ractor").$make_shareable(t("Racc_token_to_s_table")),B(m[0],"Racc_debug_parser",!1),E(_,"$_reduce_1",function(g,Z,X){var S;return N(this.modifier)||this.$raise(t("ParseError")),S=d(g),this.$parsed(null==S[0]?i:S[0],null==S[1]?i:S[1],null==S[2]?i:S[2],null==S[3]?i:S[3])}),E(_,"$_reduce_2",function(g,Z,X){var S;return N(this.modifier)||this.$raise(t("ParseError")),S=d(g),this.$parsed(null==S[0]?i:S[0],null==S[2]?i:S[2],null==S[1]?i:S[1],null==S[3]?i:S[3])}),E(_,"$_reduce_3",function(g,Z,X){var S,_e;return _e=null==(S=d(g))[2]?i:S[2],this.$parsed(null==S[0]?i:S[0],null==S[1]?i:S[1],w(w(t("Arithmetic"),"Node"),"Number").$new(0),_e)}),E(_,"$_reduce_4",function(g,Z,X){var S=this;return N(S.prefix_number)&&N(S.suffix_number)||S.$raise(t("ParseError")),W(["command","prefix","suffix"],{command:g["$[]"](1),prefix:g["$[]"](0),suffix:g["$[]"](2)})}),E(_,"$_reduce_5",function(g,Z,X){var S=this;return N(S.prefix_number)||S.$raise(t("ParseError")),N(S.need_suffix_number)&&S.$raise(t("ParseError")),W(["command","prefix"],{command:g["$[]"](1),prefix:g["$[]"](0)})}),E(_,"$_reduce_6",function(g,Z,X){var S=this;return N(S.suffix_number)||S.$raise(t("ParseError")),N(S.need_prefix_number)&&S.$raise(t("ParseError")),W(["command","suffix"],{command:g["$[]"](0),suffix:g["$[]"](1)})}),E(_,"$_reduce_7",function(g,Z,X){var S=this;return(N(S.need_prefix_number)||N(S.need_suffix_number))&&S.$raise(t("ParseError")),W(["command"],{command:g["$[]"](0)})}),E(_,"$_reduce_8",function(g,Z,X){return W([],{})}),E(_,"$_reduce_9",function(g,Z,X){var S,_e,re=i;return re=null==(S=d(g))[0]?i:S[0],_e=null==S[2]?i:S[2],N(this.critical)&&N(re["$[]"]("critical")["$nil?"]())||this.$raise(t("ParseError")),re["$[]="]("critical",_e),re}),E(_,"$_reduce_10",function(g,Z,X){var S,_e,re=i;return re=null==(S=d(g))[0]?i:S[0],_e=null==S[2]?i:S[2],N(this.fumble)&&N(re["$[]"]("fumble")["$nil?"]())||this.$raise(t("ParseError")),re["$[]="]("fumble",_e),re}),E(_,"$_reduce_11",function(g,Z,X){var S,_e,re=i;return re=null==(S=d(g))[0]?i:S[0],_e=null==S[2]?i:S[2],N(this.dollar)&&N(re["$[]"]("dollar")["$nil?"]())||this.$raise(t("ParseError")),re["$[]="]("dollar",_e),re}),E(_,"$_reduce_12",function(g,Z,X){return g["$[]"](1)}),E(_,"$_reduce_13",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"Negative").$new(g["$[]"](1))}),E(_,"$_reduce_14",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"+",g["$[]"](2))}),E(_,"$_reduce_15",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"-",g["$[]"](2))}),E(_,"$_reduce_16",function(g,Z,X){return N(this.allowed_cmp_op["$include?"](i))||this.$raise(t("ParseError")),W([],{})}),E(_,"$_reduce_17",function(g,Z,X){var S,re,O;return O=null==(S=d(g))[1]?i:S[1],N(this.allowed_cmp_op["$include?"](re=null==S[0]?i:S[0]))||this.$raise(t("ParseError")),W(["cmp_op","target"],{cmp_op:re,target:O})}),E(_,"$_reduce_18",function(g,Z,X){var ee,S=this;return ee=g["$[]"](0),N(S.question_target)||S.$raise(t("ParseError")),N(S.allowed_cmp_op["$include?"](ee))||S.$raise(t("ParseError")),W(["cmp_op","target"],{cmp_op:ee,target:"?"})}),E(_,"$_reduce_19",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"+",g["$[]"](2))}),E(_,"$_reduce_20",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"-",g["$[]"](2))}),E(_,"$_reduce_22",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"BinaryOp").$new(g["$[]"](0),"*",g["$[]"](2))}),E(_,"$_reduce_23",function(g,Z,X){return g["$[]"](3).$new(g["$[]"](0),g["$[]"](2))}),E(_,"$_reduce_25",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),E(_,"$_reduce_26",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"DivideWithCeil")}),E(_,"$_reduce_27",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"DivideWithCeil")}),E(_,"$_reduce_28",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"DivideWithRound")}),E(_,"$_reduce_29",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"DivideWithFloor")}),E(_,"$_reduce_30",function(g,Z,X){return g["$[]"](1)}),E(_,"$_reduce_31",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"Negative").$new(g["$[]"](1))}),E(_,"$_reduce_33",function(g,Z,X){return g["$[]"](1)}),E(_,"$_reduce_34",function(g,Z,X){return w(w(t("Arithmetic"),"Node"),"Number").$new(g["$[]"](0))}),E(_,"$_reduce_none",function(g,Z,X){return g["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var P,B,j,s,v,i,d,V,F=e.module,L=e.send,c=e.eqeqeq,I=e.truthy,y=e.def,z=e.return_val,M=[],D=e.nil;return P=M,B=V=[F(M[0],"BCDice")].concat(P),j=d=[F(V[0],"Deprecated")].concat(B),v=[s=F(d[0],"Checker")].concat(j),i=e.$r(v),s.$private(),y(s,"$check_result_legacy",function(r,a,b,A){var k,q=this,x=D,l=D,o=D,h=D;return x=L(a,"map",[],"sides".$to_proc()),k=(l=L(a,"map",[],"value".$to_proc())).$sum(),o=c([100],h=x)?q.$check_1D100(r,k,b,A):c([20],h)?q.$check_1D20(r,k,b,A):c([6,6],h)?q.$check_2D6(r,k,l,b,A):D,(I(o["$nil?"]())||I(o["$empty?"]()))&&(o=c([10],h=x.$uniq())?q.$check_nD10(r,k,l,b,A):c([6],h)?q.$check_nD6(r,k,l,b,A):D,I(o["$nil?"]())||I(o["$empty?"]()))?D:i("Result").$new(o.$delete_prefix(" \uff1e "))}),y(s,"$check_1D100",z(D)),y(s,"$check_1D20",z(D)),y(s,"$check_nD10",z(D)),y(s,"$check_2D6",z(D)),y(s,"$check_nD6",z(D))},Opal.modules["bcdice/base"]=function(e){var v,q,h,U,t,R,u,p,_,C,l,F=e.module,L=e.klass,c=e.slice,I=e.rb_plus,y=e.truthy,z=e.def,M=e.regexp,D=e.send,E=e.thrower,P=e.return_ivar,T=e.assign_ivar_val,V=e.eqeqeq,G=e.eqeq,B=e.return_val,N=e.range,d=e.rb_minus,W=e.rb_divide,j=e.rb_times,s=e.rb_ge,i=e.top,w=[],r=e.$r(w),a=e.nil,b=e.$$$;return i.$require("i18n"),i.$require("i18n/backend/fallbacks"),i.$require("bcdice/randomizer"),i.$require("bcdice/dice_table"),i.$require("bcdice/enum"),i.$require("bcdice/translate"),i.$require("bcdice/result"),i.$require("bcdice/command/parser"),i.$require("bcdice/deprecated/checker"),q=w,h=l=[F(w[0],"BCDice")].concat(q),p=[u=L(l[0],null,"Base")].concat(h),_=e.$r(p),(C=u.$$prototype).raw_input=C.randomizer=C.enabled_upcase_input=C.debug=a,t=[U=e.get_singleton_class(u)].concat(p),R=e.$r(t),U.$attr_reader("prefixes"),z(U,"$register_prefix",function(f){var H,K,Q=this;return null==Q.prefixes&&(Q.prefixes=a),H=c(arguments),Q.prefixes=I(y(K=Q.prefixes)?K:[],H.$flatten())},-1),z(U,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),z(U,"$prefixes_pattern",function(){var f=this,$=a;return null==f.prefixes_pattern&&(f.prefixes_pattern=a),null==f.prefixes&&(f.prefixes=a),f.prefixes_pattern=y($=f.prefixes_pattern)?$:a,y(f.prefixes_pattern)?f.prefixes_pattern:(f.prefixes=y($=f.prefixes)?$:[],f.prefixes.$freeze(),f.prefixes_pattern=(y(f.prefixes["$empty?"]())?/(?!)/:M(["^(S)?(",f.prefixes.$join("|"),")"],"i")).$freeze())}),z(U,"$command_pattern",function(){var f=this,$=a,H=a;return null==f.command_pattern&&(f.command_pattern=a),null==f.prefixes&&(f.prefixes=a),f.command_pattern=y($=f.command_pattern)?$:a,y(f.command_pattern)?f.command_pattern:(f.prefixes=y($=f.prefixes)?$:[],f.prefixes.$freeze(),H=I(D(b(R("CommonCommand"),"COMMANDS"),"map",[],function(K){return null==K&&(K=a),b(K,"PREFIX_PATTERN").$source()}),f.prefixes),f.command_pattern=M(["^S?(",H.$join("|"),")"],"i").$freeze())}),z(U,"$eval",function(f){try{return E("eval_return"),this.$new(f).$eval()}catch(Q){if(Q===e.t_eval_return)return Q.$v;throw Q}}),u.$include(_("Translate")),u.$include(b(_("Deprecated"),"Checker")),z(u,"$initialize",function(m){var t=this;return t.raw_input=m,t.sort_add_dice=!1,t.sort_barabara_dice=!1,t.d66_sort_type=b(_("D66SortType"),"NO_SORT"),t.enabled_d9=!1,t.round_type=b(_("RoundType"),"FLOOR"),t.sides_implicit_d=6,t.upper_dice_reroll_threshold=a,t.reroll_dice_reroll_threshold=a,t.default_cmp_op=a,t.default_target_number=a,t.enabled_upcase_input=!0,t.locale="ja_jp",t.randomizer=b(_("BCDice"),"Randomizer").$new(),t.debug=!1}),u.$attr_accessor("randomizer"),u.$attr_reader("d66_sort_type"),u.$attr_reader("round_type"),u.$attr_reader("sides_implicit_d"),u.$attr_reader("upper_dice_reroll_threshold"),u.$attr_reader("reroll_dice_reroll_threshold"),u.$attr_reader("default_cmp_op"),u.$attr_reader("default_target_number"),z(u,"$sort_add_dice?",P("sort_add_dice")),z(u,"$sort_barabara_dice?",P("sort_barabara_dice")),z(u,"$enabled_d9?",P("enabled_d9")),z(u,"$enable_debug",T("debug",!0)),z(u,"$eval",function(){var t,n,m=this,R=a;return t=b(_("BCDice"),"Preprocessor").$process(m.raw_input,m),R=y(n=m.$dice_command(t))?n:m.$eval_common_command(m.raw_input),y(R)?(R["$rands="](m.randomizer.$rand_results()),R["$detailed_rands="](m.randomizer.$detailed_rand_results()),R):a}),z(u,"$change_text",function(m){return m}),z(u,"$check_result",function(m,t,R,n){var f=this,$=a,H=a,Q=a,K=a,ie=a;return $=f.$check_result_legacy(m,t,R,n),y($)?$:(H=D(t,"map",[],"sides".$to_proc()),K=(Q=D(t,"map",[],"value".$to_proc())).$sum(),$=V([100],ie=H)?f.$result_1d100(m,K,R,n):V([20],ie)?f.$result_1d20(m,K,R,n):V([6,6],ie)?f.$result_2d6(m,K,Q,R,n):a,G($,_("Result").$nothing())?a:y($)?$:($=V([10],ie=H.$uniq())?f.$result_nd10(m,K,Q,R,n):V([6],ie)?f.$result_nd6(m,K,Q,R,n):a,G($,_("Result").$nothing())?a:y($)?$:f.$result_ndx(m,R,n)))}),z(u,"$grich_text",B(a)),u.$private(),z(u,"$eval_common_command",function(m){try{E("eval_return");var R=E("return");return m=this.$change_text(m),D(b(_("CommonCommand"),"COMMANDS"),"each",[],function f($){var Q,H=null==f.$$s?this:f.$$s;if(null==H.randomizer&&(H.randomizer=a),null==$&&($=a),Q=$.$eval(m,H,H.randomizer),!y(Q))return a;R.$throw(Q)},{$$s:this,$$ret:R}),a}catch(f){if(f===e.t_eval_return||f===R)return f.$v;throw f}}),z(u,"$dice_command",function(m){var t=this,R=a,n=a,f=a,$=a;return y(t.enabled_upcase_input)&&(m=m.$upcase()),R=t.$class().$prefixes_pattern().$match(m),y(R)?(n=R["$[]"](1)["$nil?"]()["$!"](),y(n)&&(m=m["$[]"](N(1,-1,!1))),f=t.$eval_game_system_specific_command(m),y(f["$is_a?"](_("Result")))?(f["$secret="](y($=f["$secret?"]())?$:n),f):y(f["$nil?"]())||y(f["$empty?"]())||G(f,"1")?a:D(_("Result").$new(),"tap",[],function(Q){var K;return null==Q&&(Q=a),Q["$text="](f.$to_s()),D(Q,"secret=",K=[n]),K[K.length-1]})):a}),z(u,"$eval_game_system_specific_command",B(a)),z(u,"$result_ndx",function(m,t,R){return y(R["$is_a?"](_("String")))?a:y(m.$send(t,R))?_("Result").$success(this.$translate("success")):_("Result").$failure(this.$translate("failure"))}),z(u,"$result_1d100",B(a)),z(u,"$result_1d20",B(a)),z(u,"$result_nd10",B(a)),z(u,"$result_2d6",B(a)),z(u,"$result_nd6",B(a)),z(u,"$get_table_by_2d6",function(m){return this.$get_table_by_nD6(m,2)}),z(u,"$get_table_by_1d6",function(m){return this.$get_table_by_nD6(m,1)}),z(u,"$get_table_by_nD6",function(m,t){return this.$get_table_by_nDx(m,t,6)}),z(u,"$get_table_by_nDx",function(m,t,R){var f,$=a;return f=this.randomizer.$roll_sum(t,R),$=this.$get_table_value(m["$[]"](d(f,t))),y($["$nil?"]())?["1",0]:[$,f]}),z(u,"$get_table_by_1d3",function(m){var n,f,t=this,$=a;return t.$debug("get_table_by_1d3"),n=t.randomizer.$roll_sum(1,6),t.$debug("num",n),f=W(d(n,1),2).$to_i(),t.$debug("index",f),$=m["$[]"](f),y($["$nil?"]())?["1",0]:[$,n]}),z(u,"$get_table_by_d66_swap",function(m){var R;return R=this.randomizer.$roll_d66(b(_("D66SortType"),"ASC")),[this.$get_table_by_number(R,m),R]}),z(u,"$get_table_by_d66",function(m){var R,n,f,H,$=a;return R=this.randomizer.$roll_once(6),n=this.randomizer.$roll_once(6),f=I(j(d(R,1),6),d(n,1)),$=m["$[]"](f),H=""+R+n,y($["$nil?"]())?["1",H]:[$,H]}),z(u,"$get_table_by_number",function(m,t,R){try{var n=E("return");return null==R&&(R="1"),D(t,"each",[],function $(H){var K,Q=null==$.$$s?this:$.$$s;if(null==H&&(H=a),K=H["$[]"](0),!y(s(K,m)))return a;n.$throw(Q.$get_table_value(H["$[]"](1)))},{$$s:this,$$ret:n}),this.$get_table_value(R)}catch($){if($===n)return $.$v;throw $}},-3),z(u,"$get_table_value",function(m){return y(m["$is_a?"](_("Proc")))?m.$call():m}),z(u,"$roll_tables",function(m,t){var n=a;return n=t["$[]"](m),y(n)?n.$roll(this.randomizer).$to_s():a}),z(u,"$debug",function(m,t){var n,f=this,$=a,H=a;return n=c(arguments,1),y(f.debug)?($=y(m["$is_a?"](_("String")))?m:m.$inspect(),y(n["$empty?"]())?f.$warn($):(H=D(n,"map",[],function(K){return null==K&&(K=a),y(K["$is_a?"](_("String")))?'"'+K+'"':K.$inspect()}),f.$warn($+": "+H.$join(", ")))):a},-2),b(b(r("I18n"),"Backend"),"Simple").$include(b(b(r("I18n"),"Backend"),"Fallbacks")),r("I18n").$load_path()["$<<"](r("Dir")["$[]"](r("File").$join("bcdice","../../i18n/**/*.yml"))),r("I18n")["$default_locale="]("ja_jp"),v=[["ja_jp"]],D(r("I18n").$fallbacks(),"defaults=",v),v[v.length-1]},Opal.queue(function(e){var s,r,l,k,o,h,b,A,i,F=e.module,L=e.klass,c=e.const_set,I=e.hash2,y=e.truthy,z=e.rb_lt,M=e.rb_gt,D=e.send,E=e.rb_plus,P=e.rb_ge,T=e.rb_minus,V=e.def,G=e.rb_le,N=[],d=e.nil,W=e.$$$;return e.top.$require("bcdice/base"),s=N,r=i=[F(N[0],"BCDice")].concat(s),b=[F(i[0],"GameSystem")].concat(r),A=e.$r(b),l=b,o=[k=L(b[0],A("Base"),"Ventangle")].concat(l),h=e.$r(o),k.$$prototype.randomizer=d,c(o[0],"ID","Ventangle"),c(o[0],"NAME","Ventangle"),c(o[0],"SORT_KEY","\u3046\u3048\u3093\u305f\u3093\u304f\u308b"),c(o[0],"HELP_MESSAGE","\u57fa\u672c\u66f8\u5f0f VTn@s#f$g>=T n=\u30c0\u30a4\u30b9\u6570\uff08\u7701\u7565\u66422\uff09 s=\u30b9\u30da\u30b7\u30e3\u30eb\u5024\uff08\u7701\u7565\u664212\uff09 f=\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\uff08\u7701\u7565\u66422\uff09 g=\u30ec\u30d9\u30eb\u30ae\u30e3\u30c3\u30d7\u5224\u5b9a\u5024\uff08\u7701\u7565\u53ef\uff09 T=\u76ee\u6a19\u5024\uff08\u7701\u7565\u53ef\uff09\n\n\u4f8b\uff1a\nVT        \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b9\u30da\u30b7\u30e3\u30eb\u5024\u30fb\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u306e\u5224\u5b9a\u3092\u884c\u3046\nVT@10#3   \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u306e\u5224\u5b9a\u3092\u884c\u3046\nVT3@10#3  \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u306e\u5224\u5b9a\u3092\u3001\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u30921\u70b9\u6d88\u8cbb\u3057\u3066\u30c0\u30a4\u30b93\u3064\u3067\u884c\u3046\n\nVT>=5         \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b9\u30da\u30b7\u30e3\u30eb\u5024\u30fb\u30d5\u30a1\u30f3\u30d6\u30eb\u5024\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u884c\u3046\nVT@10#3>=5    \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u884c\u3046\nVT@10#3$5>=5  \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u884c\u3046\u3002\u3053\u306e\u969b\u9054\u6210\u5024\u304c\u76ee\u6a19\u5024\u3088\u308a5\u4ee5\u4e0a\u5927\u304d\u3044\u5834\u5408\u3001\u30ae\u30e3\u30c3\u30d7\u30dc\u30fc\u30ca\u30b9\u3092\u8868\u793a\u3059\u308b\nVT3@10#3>=5   \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u3001\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u30921\u70b9\u6d88\u8cbb\u3057\u3066\u30c0\u30a4\u30b93\u3064\u3067\u884c\u3046\nVT3@10#3$4>=5 \u30b9\u30da\u30b7\u30e3\u30eb\u502410\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u50243\u3067\u76ee\u6a19\u50245\u306e\u5224\u5b9a\u3092\u3001\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u30921\u70b9\u6d88\u8cbb\u3057\u3066\u30c0\u30a4\u30b93\u3064\u3067\u884c\u3046\u3002\u3053\u306e\u969b\u9054\u6210\u5024\u304c\u76ee\u6a19\u5024\u3088\u308a4\u4ee5\u4e0a\u5927\u304d\u3044\u5834\u5408\u3001\u30ae\u30e3\u30c3\u30d7\u30dc\u30fc\u30ca\u30b9\u3092\u8868\u793a\u3059\u308b\n"),c(o[0],"DEFAULT_SPECIAL_VALUE",12),c(o[0],"DEFAULT_FUMBLE_VALUE",2),c(o[0],"DEFAULT_DICE_NUM",2),k.$register_prefix("VT"),V(k,"$eval_game_system_specific_command",function(_){var C=this,m=d,t=d,R=d,n=d,f=d,$=d,H=d,Q=d,K=d,ie=d,$e=d,ce=d,ne=d,ue=d;return C.$debug("eval_game_system_specific_command Begin"),m=W(h("Command"),"Parser").$new("VT",I(["round_type"],{round_type:C.$round_type()})).$enable_critical().$enable_fumble().$enable_dollar().$enable_suffix_number().$restrict_cmp_op_to(d,">=").$parse(_),!y(m)||(t=y(R=m.$suffix_number())?R:h("DEFAULT_DICE_NUM"),y(z(t,h("DEFAULT_DICE_NUM"))))?d:(n=C.randomizer.$roll_barabara(t,6),y(M(t,2))?(f=0,$=D(D(D(D(n.$map(),"with_index",[],function(J,se){return null==J&&(J=d),null==se&&(se=d),I(["index","value"],{index:se,value:J})}),"sort_by",[],function(J){return null==J&&(J=d),[J["$[]"]("value"),f=E(f,1)]}).$reverse().$take(2),"sort_by",[],function(J){return null==J&&(J=d),J["$[]"]("index")}),"map",[],function(J){return null==J&&(J=d),J["$[]"]("value")})):$=n,H=$.$sum(),Q=E(H,m.$modify_number()),K=C.$compare(H,Q,m),ie=y(M(t,2))?$.$to_s():d,$e=y(M(m.$modify_number(),0))?""+H+h("Format").$modifier(m.$modify_number()):d,ce=y(m.$target_number())&&y(m.$dollar())&&y(K["$success?"]())&&y(P(ne=T(Q,m.$target_number()),m.$dollar()))?"\u30ae\u30e3\u30c3\u30d7\u30dc\u30fc\u30ca\u30b9("+ne+")":d,ue=[m.$to_s(),n.$to_s(),ie,$e,Q.$to_s(),K.$text(),ce].$compact(),K["$text="](ue.$join(" \uff1e ")),K)}),V(k,"$compare",function(_,C,U){var m,R,t=d;return m=y(t=U.$critical())?t:h("DEFAULT_SPECIAL_VALUE"),R=y(t=U.$fumble())?t:h("DEFAULT_FUMBLE_VALUE"),y(G(_,R))?h("Result").$fumble("\u30d5\u30a1\u30f3\u30d6\u30eb"):y(P(_,m))?h("Result").$critical("\u30b9\u30da\u30b7\u30e3\u30eb"):y(U.$target_number())?y(C.$send(U.$cmp_op(),U.$target_number()))?h("Result").$success("\u6210\u529f"):h("Result").$failure("\u5931\u6557"):h("Result").$new(d)})})}}]);