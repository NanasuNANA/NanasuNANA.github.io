(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[8196],{30:(xe,Re,ke)=>{ke(3986),Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var F,j,i,c,g,H,A,Q,Y=e.module,G=e.ensure_kwargs,_=e.truthy,B=e.thrower,P=e.def,o=[],M=e.nil,v=e.$$$;return F=o,j=Q=[Y(o[0],"BCDice")].concat(F),A=[H=Y(Q[0],"ArithmeticEvaluator")].concat(j),c=[i=e.get_singleton_class(H)].concat(A),g=e.$r(c),P(i,"$eval",function(C,r){try{B("eval_return");var y,L=M;return null==(y=(r=G(r)).$$smap.round_type)&&(y=v(g("RoundType"),"FLOOR")),_(C)&&_(L=g("Arithmetic").$eval(C,y))?L:0}catch(N){if(N===e.t_eval_return)return N.$v;throw N}},-2)},Opal.modules["i18n/backend/fallbacks"]=function(e){var I,u,r,$,c,g,Y=e.module,G=e.class_variable_set,_=e.truthy,B=e.class_variable_get,P=e.def,o=e.send,M=e.send2,v=e.find_super,z=e.hash2,F=e.find_block_super,E=e.neqeq,Q=e.thrower,V=e.return_val,j=[],H=e.nil,A=e.$$$;return I=j,g=[c=Y(j[0],"I18n")].concat(I),G(g[0],"@@fallbacks",H),u=e.get_singleton_class(c),r=[u].concat(g),$=e.$r(r),P(u,"$fallbacks",function(){var N=H;return G(r[1],"@@fallbacks",_(null!=r[1].$$cvars["@@fallbacks"]?"class variable":H)&&_(N=B(r[1],"@@fallbacks",!1))?N:A(A($("I18n"),"Locale"),"Fallbacks").$new()),_(N=$("Thread").$current()["$[]"]("i18n_fallbacks"))?N:B(r[1],"@@fallbacks",!1)}),P(u,"$fallbacks=",function(L){var N;return G(r[1],"@@fallbacks",_(L["$is_a?"]($("Array")))?A(A($("I18n"),"Locale"),"Fallbacks").$new(L):L),N=["i18n_fallbacks",B(r[1],"@@fallbacks",!1)],o($("Thread").$current(),"[]=",N),N[N.length-1]}),function(u,C){var L,N,R,p,$=[Y(u,"Backend")].concat(C);return L=$,R=[N=Y($[0],"Fallbacks")].concat(L),p=e.$r(R),P(N,"$translate",function D(x,b,s){try{var f=Q("return"),l=D.$$p||H,q=this,d=H,h=H;return D.$$p=null,null==s&&(s=p("EMPTY_HASH")),_(s.$fetch("fallback",!0))?_(s["$[]"]("fallback_in_progress"))?M(q,v(q,"translate",D,!1,!0),"translate",[x,b,s],l):(_(s["$[]"]("default"))&&(d=q["$extract_non_symbol_default!"](s)),h=s.$merge(z(["fallback_in_progress"],{fallback_in_progress:!0})),o(p("I18n").$fallbacks()["$[]"](x),"each",[],function n(T){var t=null==n.$$s?this:n.$$s;null==T&&(T=H);try{return o(t,"catch",["exception"],function m(){var a=null==m.$$s?this:m.$$s,O=H;if(O=M(a,F(a,"translate",m.$$def||n.$$def||D,!1,!1),"translate",[T,b,h],null),_(O["$nil?"]()))return H;E(x.$to_s(),T.$to_s())&&a.$on_fallback(x,T,b,s),f.$throw(O)},{$$s:t,$$ret:f})}catch(m){if(!e.rescue(m,[A(p("I18n"),"InvalidLocale")]))throw m;try{return H}finally{e.pop_exception()}}},{$$s:q}),_(s["$key?"]("default"))&&_(s["$[]"]("default")["$nil?"]())?H:_(d)?M(q,v(q,"translate",D,!1,!0),"translate",[x,H,s.$merge(z(["default"],{default:d}))],null):q.$throw("exception",A(p("I18n"),"MissingTranslation").$new(x,b,s))):M(q,v(q,"translate",D,!1,!0),"translate",[x,b,s],l)}catch(n){if(n===f)return n.$v;throw n}},-3),P(N,"$extract_non_symbol_default!",function(x){var s,b=H;return b=[x["$[]"]("default")].$flatten(),s=o(b,"detect",[],function(l){return null==l&&(l=H),l["$is_a?"](p("Symbol"))["$!"]()}),_(s)&&x["$[]="]("default",b["$[]"](0,b.$index(s))),s}),P(N,"$exists?",function D(x,b,s){try{var f=Q("return"),l=D.$$p||H,q=this;return D.$$p=null,null==s&&(s=p("EMPTY_HASH")),_(s.$fetch("fallback",!0))?(o(p("I18n").$fallbacks()["$[]"](x),"each",[],function d(h){var n=null==d.$$s?this:d.$$s;null==h&&(h=H);try{if(!_(M(n,F(n,"exists?",d.$$def||D,!1,!1),"exists?",[h,b],null)))return H;f.$throw(!0)}catch(T){if(!e.rescue(T,[A(p("I18n"),"InvalidLocale")]))throw T;try{return H}finally{e.pop_exception()}}},{$$s:q,$$ret:f}),!1):M(q,v(q,"exists?",D,!1,!0),"exists?",[x,b,s],l)}catch(d){if(d===f)return d.$v;throw d}},-3),N.$private(),P(N,"$on_fallback",V(H))}(g[0],g)},Opal.modules["bcdice/randomizer"]=function(e){var c,y,L,N,R,p,u,C,G=e.klass,_=e.const_set,B=e.def,P=e.truthy,o=e.rb_gt,M=e.rb_plus,v=e.rb_le,z=e.send,F=e.rb_minus,E=e.eqeq,Q=e.rb_times,V=e.eqeqeq,j=e.rb_ge,H=[],A=e.nil,i=e.$$$;return c=H,u=[(0,e.module)(H[0],"BCDice")].concat(c),C=e.$r(u),y=u,N=[L=G(u[0],null,"Randomizer")].concat(y),R=e.$r(N),(p=L.$$prototype).rand_results=p.detailed_rand_results=A,_(N[0],"UPPER_LIMIT_DICE_TIMES",200),_(N[0],"UPPER_LIMIT_DICE_SIDES",1e4),_(N[0],"UPPER_LIMIT_RANDS",1e4),B(L,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),L.$attr_reader("rand_results"),L.$attr_reader("detailed_rand_results"),_(N[0],"DetailedRandResult",R("Struct").$new("kind","sides","value")),B(L,"$roll_barabara",function(x,b){var s=this;return P(o(M(s.rand_results.$size(),x),R("UPPER_LIMIT_RANDS")))&&s.$raise(R("TooManyRandsError")),P(v(x,0))||P(o(x,R("UPPER_LIMIT_DICE_TIMES")))?[]:z(R("Array"),"new",[x],function f(){return(null==f.$$s?this:f.$$s).$roll_once(b)},{$$s:s})}),B(L,"$roll_sum",function(x,b){return this.$roll_barabara(x,b).$sum()}),B(L,"$roll_once",function(x){var s=A;return P(v(x,0))||P(o(x,R("UPPER_LIMIT_DICE_SIDES")))?0:(s=this.$rand_inner(x),this.$push_to_detail("normal",x,s),s)}),B(L,"$roll_index",function(x){return F(this.$roll_once(x),1)}),B(L,"$roll_tens_d10",function(){var s,b=A;return b=this.$rand_inner(10),E(b,10)&&(b=0),s=Q(b,10),this.$push_to_detail("tens_d10",10,s),s}),B(L,"$roll_d9",function(){var b;return b=F(this.$rand_inner(10),1),this.$push_to_detail("d9",10,b),b}),B(L,"$roll_d66",function(x){var f,s=A;return s=z(R("Array"),"new",[2],function l(){return(null==l.$$s?this:l.$$s).$roll_once(6)},{$$s:this}),V(i(R("D66SortType"),"ASC"),f=x)?s["$sort!"]():V(i(R("D66SortType"),"DESC"),f)&&s["$sort!"]()["$reverse!"](),M(Q(s["$[]"](0),10),s["$[]"](1))}),L.$private(),B(L,"$rand_inner",function(x){var s,b=this;return P(j(b.rand_results.$size(),R("UPPER_LIMIT_RANDS")))&&b.$raise(R("TooManyRandsError")),s=b.$random(x),b.rand_results["$<<"]([s,x]),s}),B(L,"$random",function(x){return M(R("Kernel").$rand(x),1)}),B(L,"$push_to_detail",function(x,b,s){var l;return l=R("DetailedRandResult").$new(x,b,s),this.detailed_rand_results.$push(l)}),G(u[0],C("StandardError"),"TooManyRandsError"),A},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var z,V,I,c,g,u,C,H,E,Y=e.module,G=e.klass,_=e.def,B=e.truthy,P=e.return_val,o=[],M=e.nil;return z=o,V=E=[Y(o[0],"BCDice")].concat(z),I=H=[Y(E[0],"DiceTable")].concat(V),g=[c=G(H[0],null,"RollResult")].concat(I),u=e.$r(g),(C=c.$$prototype).table_name=C.value=C.body=M,_(c,"$initialize",function($,y,L){var N=this;return N.table_name=$,N.value=y,N.body=L}),c.$attr_reader("table_name"),c.$attr_reader("value"),c.$attr_reader("body"),_(c,"$to_s",function(){var $=this;return $.table_name+"("+$.value+") \uff1e "+$.body}),_(c,"$last_body",function(){var $=this;return B($.body["$is_a?"](u("RollResult")))?$.body.$last_body():$.body}),_(c,"$empty?",P(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var z,V,I,c,g,u,C,H,E,Y=e.module,G=e.klass,_=e.truthy,B=e.def,P=e.rb_minus,o=[],M=e.nil;return z=o,V=E=[Y(o[0],"BCDice")].concat(z),I=H=[Y(E[0],"DiceTable")].concat(V),g=[c=G(H[0],null,"ChainTable")].concat(I),u=e.$r(g),(C=c.$$prototype).times=C.sides=C.items=C.name=M,B(c,"$initialize",function($,y,L){var N=this,R=M;return N.name=$,N.items=L.$freeze(),R=/(\d+)D(\d+)/i.$match(y),_(R)||N.$raise(u("ArgumentError"),"Unexpected table type: "+y),N.times=R["$[]"](1).$to_i(),N.sides=R["$[]"](2).$to_i()}),B(c,"$roll",function($){var L,N,y=this,R=M;return L=$.$roll_sum(y.times,y.sides),N=P(L,y.times),R=y.items["$[]"](N),_(R["$respond_to?"]("roll"))&&(R=R.$roll($)),u("RollResult").$new(y.name,L,R)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){var Q,A,u,C,r,$,y,I,j,Y=e.module,G=e.klass,_=e.hash2,B=e.defs,P=e.def,o=e.rb_plus,M=e.rb_times,v=e.rb_minus,z=[],F=e.nil;return Q=z,A=j=[Y(z[0],"BCDice")].concat(Q),u=I=[Y(j[0],"DiceTable")].concat(A),r=[C=G(I[0],null,"D66GridTable")].concat(u),$=e.$r(r),(y=C.$$prototype).name=y.items=F,B(C,"$from_i18n",function(N,R){var D=F;return D=$("I18n").$t(N,_(["locale","raise"],{locale:R,raise:!0})),this.$new(D["$[]"]("name"),D["$[]"]("items"))}),P(C,"$initialize",function(N,R){return this.name=N,this.items=R.$freeze()}),P(C,"$roll",function(N){var p,D,x,b,s;return p=N.$roll_once(6),D=N.$roll_once(6),x=o(M(p,10),D),b=v(p,1),s=v(D,1),$("RollResult").$new(this.name,x,this.items["$[]"](b)["$[]"](s))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var F,j,g,u,C,r,A,i,Q,Y=e.module,G=e.klass,_=e.hash2,B=e.defs,P=e.def,M=[],v=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),F=M,j=Q=[Y(M[0],"BCDice")].concat(F),A=[Y(Q[0],"DiceTable")].concat(j),i=e.$r(A),g=A,C=[u=G(A[0],i("D66GridTable"),"D66HalfGridTable")].concat(g),r=e.$r(C),B(u,"$from_i18n",function(y,L){var R=v;return R=r("I18n").$t(y,_(["locale","raise"],{locale:L,raise:!0})),this.$new(R["$[]"]("name"),R["$[]"]("items_1_2_3"),R["$[]"]("items_4_5_6"))}),P(u,"$initialize",function(y,L,N){return this.name=y,this.items=[L,L,L,N,N,N].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var F,j,g,u,C,r,A,i,Q,Y=e.module,G=e.klass,_=e.hash2,B=e.defs,P=e.def,M=[],v=e.nil;return e.top.$require("bcdice/dice_table/d66_grid_table"),F=M,j=Q=[Y(M[0],"BCDice")].concat(F),A=[Y(Q[0],"DiceTable")].concat(j),i=e.$r(A),g=A,C=[u=G(A[0],i("D66GridTable"),"D66OneThirdTable")].concat(g),r=e.$r(C),B(u,"$from_i18n",function(y,L){var R=v;return R=r("I18n").$t(y,_(["locale","raise"],{locale:L,raise:!0})),this.$new(R["$[]"]("name"),R["$[]"]("items_1_2"),R["$[]"]("items_3_4"),R["$[]"]("items_5_6"))}),P(u,"$initialize",function(y,L,N,R){return this.name=y,this.items=[L,L,N,N,R,R].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var j,I,r,$,y,L,N,g,A,Y=e.module,G=e.klass,_=e.hash2,B=e.defs,P=e.def,o=e.eqeqeq,M=e.rb_plus,v=e.rb_times,z=e.truthy,F=[],E=e.nil,Q=e.$$$;return j=F,I=A=[Y(F[0],"BCDice")].concat(j),r=g=[Y(A[0],"DiceTable")].concat(I),y=[$=G(g[0],null,"D66Table")].concat(r),L=e.$r(y),(N=$.$$prototype).sort_type=N.items=N.name=E,B($,"$from_i18n",function(p,D){var s,b=E;return b=L("I18n").$t(p,_(["locale"],{locale:D})),s=L("D66SortType").$const_get(b["$[]"]("d66_sort_type")),this.$new(b["$[]"]("name"),s,b["$[]"]("items"))}),P($,"$initialize",function(p,D,x){var b=this;return b.name=p,b.sort_type=D,b.items=x.$freeze()}),P($,"$roll",function(p){var D=this,x=E,b=E,s=E,f=E;return x=p.$roll_barabara(2,6),o(Q(L("D66SortType"),"ASC"),b=D.sort_type)?x["$sort!"]():o(Q(L("D66SortType"),"DESC"),b)&&x["$sort!"]()["$reverse!"](),s=M(v(x["$[]"](0),10),x["$[]"](1)),f=z(b=D.items["$[]"](s))?b:D.items["$[]"](s.$to_s()),z(f["$respond_to?"]("roll"))&&(f=f.$roll(p)),L("RollResult").$new(D.name,s,f)}),P($,"$choice",function(p){return L("RollResult").$new(this.name,p,this.items["$[]"](p))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){var H,c,u,C,i,Y=e.module,G=e.klass,_=e.hash2,B=e.send,P=e.to_ary,o=e.rb_plus,M=e.rb_times,v=e.send2,z=e.find_super,F=e.def,Q=[],V=e.nil;return e.top.$require("bcdice/dice_table/d66_table"),H=Q,c=i=[Y(Q[0],"BCDice")].concat(H),u=[Y(i[0],"DiceTable")].concat(c),C=e.$r(u),F(G(u[0],C("D66Table"),"D66LeftRangeTable"),"$initialize",function L(N,R,p){var b;return L.$$p=null,b=_([],{}),B(p,"each",[],function(f){var l,h;return null==f&&(f=V),l=P(f),h=null==l[1]?V:l[1],B(null==l[0]?V:l[0],"each",[],function(T){return null==T&&(T=V),B(h,"each_with_index",[],function(m,a){var O,re;return null==m&&(m=V),null==a&&(a=V),re=o(M(T,10),o(a,1)),B(b,"[]=",O=[re,m]),O[O.length-1]})})}),v(this,z(this,"initialize",L,!1,!0),"initialize",[N,R,b],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var V,i,C,r,$,y,L,c,H,Y=e.module,G=e.klass,_=e.hash2,B=e.defs,P=e.def,o=e.truthy,M=e.rb_minus,v=e.rb_plus,z=e.rb_times,F=[],E=e.nil;return V=F,i=H=[Y(F[0],"BCDice")].concat(V),C=c=[Y(H[0],"DiceTable")].concat(i),$=[r=G(c[0],null,"D66ParityTable")].concat(C),y=e.$r($),(L=r.$$prototype).odd=L.even=L.name=E,B(r,"$from_i18n",function(R,p){var x=E;return x=y("I18n").$t(R,_(["locale","raise"],{locale:p,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("odd"),x["$[]"]("even"))}),P(r,"$initialize",function(R,p,D){var x=this;return x.name=R,x.odd=p.$freeze(),x.even=D.$freeze()}),P(r,"$roll",function(R){var x,s,f,p=this,D=E;return D=R.$roll_once(6),x=R.$roll_once(6),s=(o(D["$odd?"]())?p.odd:p.even)["$[]"](M(x,1)),f=v(z(D,10),x),y("RollResult").$new(p.name,f,s)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var F,j,c,g,u,C,r,A,Q,Y=e.module,G=e.klass,_=e.def,B=e.rb_plus,P=e.rb_times,o=e.send,M=[],v=e.nil;return F=M,j=Q=[Y(M[0],"BCDice")].concat(F),c=A=[Y(Q[0],"DiceTable")].concat(j),u=[g=G(A[0],null,"D66RangeTable")].concat(c),C=e.$r(u),(r=g.$$prototype).items=r.name=v,_(g,"$initialize",function(y,L){return this.name=y,this.items=L.$freeze()}),_(g,"$roll",function(y){var N,R,p,D=v;return N=y.$roll_once(6),R=y.$roll_once(6),p=B(P(N,10),R),D=o(this.items,"find",[],function(b){return null==b&&(b=v),b["$[]"](0)["$include?"](p)}),C("RollResult").$new(this.name,p,D["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(e){var V,i,C,r,$,y,L,c,H,Y=e.module,G=e.klass,_=e.const_set,B=e.send,P=e.truthy,o=e.def,M=e.eqeqeq,v=e.rb_times,z=e.rb_plus,F=[],E=e.nil;return V=F,i=H=[Y(F[0],"BCDice")].concat(V),C=c=[Y(H[0],"DiceTable")].concat(i),$=[r=G(c[0],null,"RangeTable")].concat(C),y=e.$r($),(L=r.$$prototype).name=L.items=L.num_of_dice=L.num_of_sides=L.formatter=E,_($[0],"RollResult",B(y("Struct"),"new",["sum","values","content","formatted"],function N(){return(null==N.$$s?this:N.$$s).$alias_method("to_s","formatted")},{$$s:r})),_($[0],"Item",y("Struct").$new("range","content")),_($[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),_($[0],"DEFAULT_FORMATTER",B(r,"lambda",[],function(R,p){return null==R&&(R=E),null==p&&(p=E),R.$name()+"("+p.$sum()+") \uff1e "+p.$content()})),r.$attr_reader("name"),r.$attr_reader("num_of_dice"),r.$attr_reader("num_of_sides"),o(r,"$initialize",function N(R,p,D){var s,x=N.$$p||E,b=this,f=E;return N.$$p=null,b.name=R.$freeze(),b.formatter=P(s=x)?s:y("DEFAULT_FORMATTER"),f=y("DICE_ROLL_METHOD_RE").$match(p),P(f)||b.$raise(y("ArgumentError"),b.name+": invalid dice roll method: "+p),b.num_of_dice=f["$[]"](1).$to_i(),b.num_of_sides=f["$[]"](2).$to_i(),b.$store(D)}),o(r,"$fetch",function(R){var D,p=this;return D=B(p.items,"find",[],function(b){return null==b&&(b=E),b.$range()["$include?"](R)}),P(D)||p.$raise(y("RangeError"),p.name+": value is out of range: "+R),D}),o(r,"$roll",function(R){var x,p=this,D=E,b=E;return x=(D=R.$roll_barabara(p.num_of_dice,p.num_of_sides)).$sum(),(b=y("RollResult").$new(x,D,p.$fetch(x).$content()))["$formatted="](p.formatter["$[]"](p,b)),b}),r.$private(),o(r,"$store",function(R){var D,x,p=this;return D=B(R,"map",[],function b(s,f){return null==s&&(s=E),null==f&&(f=E),[(null==b.$$s?this:b.$$s).$coerce_to_int_range(s),f]},{$$s:p}),x=B(D,"sort_by",[],function(s,f){return null==s&&(s=E),null==f&&(f=E),s.$min()}),p.$assert_min_sum_is_covered(x),p.$assert_max_sum_is_covered(x),p.$assert_no_gap_or_overlap_in_ranges(x),p.items=B(x,"map",[],function(s,f){return null==s&&(s=E),null==f&&(f=E),y("Item").$new(s,f.$freeze()).$freeze()}).$freeze(),p}),o(r,"$coerce_to_int_range",function(R){var D;return M(y("Integer"),D=R)?y("Range").$new(R,R):M(y("Range"),D)&&P(R.$begin()["$is_a?"](y("Integer")))&&P(R.$end()["$is_a?"](y("Integer")))?R:this.$raise(y("TypeError"),this.name+": "+R+" ("+R.$class()+") must be an Integer or a Range with Integers ")}),o(r,"$assert_min_sum_is_covered",function(R){var D,p=this,x=E;return D=p.num_of_dice,x=R.$first()["$[]"](0),P(x["$include?"](D))||p.$raise(y("RangeError"),p.name+": min value ("+D+") is not covered: "+x),p}),o(r,"$assert_max_sum_is_covered",function(R){var D,p=this,x=E;return D=v(p.num_of_dice,p.num_of_sides),x=R.$last()["$[]"](0),P(x["$include?"](D))||p.$raise(y("RangeError"),p.name+": max value ("+D+") is not covered: "+x),p}),o(r,"$assert_no_gap_or_overlap_in_ranges",function(R){return B(R,"each_cons",[2],function D(x,b){var q,d,s=null==D.$$s?this:D.$$s,f=E,l=E;return null==s.name&&(s.name=E),null==x&&(x=E),null==b&&(b=E),f=x["$[]"](0),l=b["$[]"](0),q=f.$max(),d=z(q,1),P(l["$include?"](q))&&s.$raise(y("RangeError"),s.name+": Range overlap: "+f+" and "+l),P(l["$include?"](d))?E:s.$raise(y("RangeError"),s.name+": Range gap: "+f+" and "+l)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var E,H,g,y,L,N,R,C,i,V,Y=e.module,G=e.klass,_=e.send,B=e.def,P=e.rb_minus,o=e.return_ivar,M=[],v=e.nil,z=e.$$$;return E=M,H=V=[Y(M[0],"BCDice")].concat(E),g=i=[Y(V[0],"DiceTable")].concat(H),y=C=[G(i[0],null,"SaiFicSkillTable")].concat(g),N=[L=G(C[0],null,"Category")].concat(y),R=e.$r(N),B(L,"$initialize",function(D,x,b,s){var f=this;return f.name=D,f.skills=_(x.$map(),"with_index",[2],function(q,d){return null==q&&(q=v),null==d&&(d=v),z(R("SaiFicSkillTable"),"Skill").$new(D,q,b,d,s)}),f.dice=b}),B(L,"$roll",function(D){return this.$skills()["$[]"](P(D.$roll_sum(2,6),2))}),B(L,"$to_s",o("name")),L.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var v,Q,i,C,r,c,j,F,Y=e.module,G=e.klass,_=e.def,B=e.hash2,P=[],o=e.nil;return v=P,Q=F=[Y(P[0],"BCDice")].concat(v),i=j=[Y(F[0],"DiceTable")].concat(Q),c=[G(j[0],null,"SaiFicSkillTable")].concat(i),(r=(C=G(c[0],null,"Skill")).$$prototype).s_format=r.category_dice=r.row_dice=r.category_name=r.name=o,_(C,"$initialize",function(y,L,N,R,p){var D=this;return D.category_name=y,D.name=L,D.category_dice=N,D.row_dice=R,D.s_format=p}),_(C,"$to_s",function(){var y=this;return y.$format(y.s_format,B(["category_dice","row_dice","category_name","skill_name"],{category_dice:y.category_dice,row_dice:y.row_dice,category_name:y.category_name,skill_name:y.name}))}),C.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var c,r,R,p,D,x,b,y,u,Y=e.module,G=e.klass,_=e.ensure_kwargs,B=e.hash2,P=e.send,M=e.defs,v=e.const_set,z=e.to_ary,F=e.def,E=e.truthy,Q=e.rb_minus,V=e.rb_plus,j=e.top,H=[],A=e.nil,i=e.$$$;return j.$require("bcdice/dice_table/sai_fic_skill_table/category"),j.$require("bcdice/dice_table/sai_fic_skill_table/skill"),c=H,r=u=[Y(H[0],"BCDice")].concat(c),R=y=[Y(u[0],"DiceTable")].concat(r),D=[p=G(y[0],null,"SaiFicSkillTable")].concat(R),x=e.$r(D),(b=p.$$prototype).rtt=b.rtt_format=b.rct=b.rct_format=b.rttn=b.rttn_format=b.categories=A,M(p,"$from_i18n",function(f,l,q){var d,h,n,a,m=A;return null==(d=(q=_(q)).$$smap.rtt)&&(d=A),null==(h=q.$$smap.rct)&&(h=A),null==(n=q.$$smap.rttn)&&(n=A),a=(m=x("I18n").$t("RTT",B(["locale","raise","default"],{locale:l,raise:!1,default:B([],{})})).$merge(x("I18n").$t(f,B(["locale","raise"],{locale:l,raise:!0}))))["$[]"]("items"),m=P(m,"select",[],function(re,ee){return null==re&&(re=A),null==ee&&(ee=A),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](re)}),this.$new(a,e.to_hash(m).$merge(B(["rtt","rct","rttn"],{rtt:d,rct:h,rttn:n})))},-3),v(D[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),v(D[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),v(D[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),v(D[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),F(p,"$initialize",function(f,l){var q,d,h,n,T,t,m,a=this;return null==(q=(l=_(l)).$$smap.rtt)&&(q=A),null==(d=l.$$smap.rct)&&(d=A),null==(h=l.$$smap.rttn)&&(h=A),null==(n=l.$$smap.rtt_format)&&(n=x("DEFAULT_RTT")),null==(T=l.$$smap.rct_format)&&(T=x("DEFAULT_RCT")),null==(t=l.$$smap.rttn_format)&&(t=x("DEFAULT_RTTN")),null==(m=l.$$smap.s_format)&&(m=x("DEFAULT_S")),a.categories=P(f.$map(),"with_index",[1],function(re,ee){var ie,oe,ue;return null==re&&(re=A),null==ee&&(ee=A),oe=null==(ie=z(re))[0]?A:ie[0],ue=null==ie[1]?A:ie[1],i(x("SaiFicSkillTable"),"Category").$new(oe,ue,ee,m)},{$$has_top_level_mlhs_arg:!0}),a.rtt=q,a.rct=d,a.rttn=h.$to_a(),a.rtt_format=n,a.rct_format=T,a.rttn_format=t},-2),v(D[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),p.$attr_reader("categories"),F(p,"$roll_command",function(f,l){var d,q=this,h=A,n=A;return E(["RTT",q.rtt]["$include?"](d=l))?q.$format_skill(q.rtt_format,q.$roll_skill(f)):E(["RCT",q.rct]["$include?"](d))?(h=q.$roll_category(f),q.$format(q.rct_format,B(["category_dice","category_name"],{category_dice:h.$dice(),category_name:h.$name()}))):E(n=x("RTTN").$index(d))||E(n=q.rttn.$index(d))?q.$format_skill(q.rttn_format,q.categories["$[]"](n).$roll(f)):A}),F(p,"$roll_category",function(f){return this.categories["$[]"](Q(f.$roll_once(6),1))}),F(p,"$roll_skill",function(f){return this.$roll_category(f).$roll(f)}),F(p,"$prefixes",function(){var f=this;return V(["RTT[1-6]?","RCT",f.rtt,f.rct],f.rttn).$compact()}),p.$private(),F(p,"$format_skill",function(f,l){return this.$format(f,B(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:l.$category_dice(),row_dice:l.$row_dice(),category_name:l.$category_name(),skill_name:l.$name(),text:l.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(e){var E,H,g,u,C,r,$,i,V,Y=e.module,G=e.klass,_=e.hash2,B=e.defs,P=e.truthy,o=e.def,M=e.rb_minus,v=[],z=e.nil;return E=v,H=V=[Y(v[0],"BCDice")].concat(E),g=i=[Y(V[0],"DiceTable")].concat(H),C=[u=G(i[0],null,"Table")].concat(g),r=e.$r(C),($=u.$$prototype).times=$.sides=$.name=$.items=z,B(u,"$from_i18n",function(L,N){var p=z;return p=r("I18n").$t(L,_(["locale"],{locale:N})),this.$new(p["$[]"]("name"),p["$[]"]("type"),p["$[]"]("items"))}),o(u,"$initialize",function(L,N,R){var p=this,D=z;return p.name=L,p.items=R.$freeze(),D=/(\d+)D(\d+)/i.$match(N),P(D)||p.$raise(r("ArgumentError"),"Unexpected table type: "+N),p.times=D["$[]"](1).$to_i(),p.sides=D["$[]"](2).$to_i()}),o(u,"$roll",function(L){var R,N=this;return R=L.$roll_sum(N.times,N.sides),N.$choice(R)}),o(u,"$choice",function(L){var R,N=this;return R=M(L,N.times),r("RollResult").$new(N.name,L,N.items["$[]"](R))})},Opal.modules["bcdice/dice_table"]=function(e){var Y=e.top;return Y.$require("bcdice/dice_table/roll_result"),Y.$require("bcdice/dice_table/chain_table"),Y.$require("bcdice/dice_table/d66_grid_table"),Y.$require("bcdice/dice_table/d66_half_grid_table"),Y.$require("bcdice/dice_table/d66_one_third_table"),Y.$require("bcdice/dice_table/d66_left_range_table"),Y.$require("bcdice/dice_table/d66_parity_table"),Y.$require("bcdice/dice_table/d66_range_table"),Y.$require("bcdice/dice_table/d66_table"),Y.$require("bcdice/dice_table/range_table"),Y.$require("bcdice/dice_table/sai_fic_skill_table"),Y.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var o,F,Q,v,Y=e.module,G=e.const_set,_=[];return o=_,F=v=[Y(_[0],"BCDice")].concat(o),Q=[Y(v[0],"D66SortType")].concat(F),G(Q[0],"NO_SORT","no_sort"),G(Q[0],"ASC","asc"),G(Q[0],"DESC","desc"),function(z,F){var Q=[Y(z,"RoundType")].concat(F);return G(Q[0],"CEIL","ceil"),G(Q[0],"FLOOR","floor"),G(Q[0],"ROUND","round")}(v[0],v)},Opal.modules["bcdice/translate"]=function(e){var F,j,H,A,i,Q,Y=e.module,G=e.ensure_kwargs,_=e.kwrestargs,P=e.hash2,o=e.def,M=[],v=e.nil;return F=M,j=Q=[Y(M[0],"BCDice")].concat(F),A=[H=Y(Q[0],"Translate")].concat(j),i=e.$r(A),o(H,"$translate",function(c,g){var u,C=this;return null==C.locale&&(C.locale=v),g=G(g),u=_(g,{}),i("I18n").$translate(c,P(["locale","raise"],{locale:C.locale,raise:!0}).$merge(e.to_hash(u)))},-2)},Opal.modules["bcdice/result"]=function(e){var H,I,A,F,Q,G=e.klass,_=e.send,B=e.def,P=e.return_val,o=e.return_ivar,M=[],v=e.nil;return F=M,H=Q=[(0,e.module)(M[0],"BCDice")].concat(F),[A=G(Q[0],null,"Result")].concat(H),B(I=e.get_singleton_class(A),"$success",function(u){return _(this.$new(),"tap",[],function($){var y;return null==$&&($=v),$["$text="](u),_($,"success=",y=[!0]),y[y.length-1]})}),B(I,"$failure",function(u){return _(this.$new(),"tap",[],function($){var y;return null==$&&($=v),$["$text="](u),_($,"failure=",y=[!0]),y[y.length-1]})}),B(I,"$critical",function(u){return _(this.$new(),"tap",[],function($){var y;return null==$&&($=v),$["$text="](u),$["$critical="](!0),_($,"success=",y=[!0]),y[y.length-1]})}),B(I,"$fumble",function(u){return _(this.$new(),"tap",[],function($){var y;return null==$&&($=v),$["$text="](u),$["$fumble="](!0),_($,"failure=",y=[!0]),y[y.length-1]})}),B(I,"$nothing",P("nothing")),B(A,"$initialize",function(c){var g=this;return null==c&&(c=v),g.text=c,g.rands=v,g.detailed_rands=v,g.secret=!1,g.success=!1,g.failure=!1,g.critical=!1,g.fumble=!1},-1),A.$attr_accessor("text","rands","detailed_rands"),A.$attr_writer("secret","success","failure","critical","fumble"),B(A,"$secret?",o("secret")),B(A,"$success?",o("success")),B(A,"$failure?",o("failure")),B(A,"$critical?",o("critical")),B(A,"$fumble?",o("fumble")),B(A,"$condition=",function(c){return this.success=c,this.failure=c["$!"]()})},Opal.modules["racc/parser"]=function(e){var L,R,p,Y=e.module,G=e.klass,_=e.truthy,B=e.const_set,P=e.defs,o=e.gvars,M=e.rb_lt,v=e.def,z=e.to_ary,F=e.send,E=e.neqeq,Q=e.rb_plus,V=e.eqeq,j=e.rb_ge,H=e.rb_gt,A=e.rb_minus,i=e.rb_le,I=e.rb_times,c=e.assign_ivar_val,u=[],C=e.$r(u),r=e.nil,$=e.$$$;return L=u,R=[Y(u[0],"Racc")].concat(L),p=e.$r(R),G(R[0],p("StandardError"),"ParseError"),_($("::","ParseError","skip_raise")?"constant":r)||B(u[0],"ParseError",$(C("Racc"),"ParseError")),function(y,L){var s,f,l,q,d,p=[Y(y,"Racc")].concat(L),D=e.$r(p);return _(D("Racc_No_Extensions","skip_raise")?"constant":r)||B(p[0],"Racc_No_Extensions",!1),s=p,l=[f=G(p[0],null,"Parser")].concat(s),q=e.$r(l),(d=f.$$prototype).yydebug=d.racc_debug_out=d.racc_error_status=d.racc_t=d.racc_vstack=d.racc_val=d.racc_state=d.racc_tstack=r,B(l[0],"Racc_Runtime_Version","1.4.6"),B(l[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),B(l[0],"Racc_Runtime_Core_Version_R","1.4.6"),B(l[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),B(l[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),B(l[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),B(l[0],"Racc_Runtime_Core_Version",q("Racc_Runtime_Core_Version_R")),B(l[0],"Racc_Runtime_Core_Revision",q("Racc_Runtime_Core_Revision_R")),B(l[0],"Racc_Runtime_Type","ruby"),P(q("Parser"),"$racc_runtime_type",function(){return q("Racc_Runtime_Type")}),v(f,"$_racc_setup",function(){var n,T,t=this,m=r,a=r;return null==o.stderr&&(o.stderr=r),_($(t.$class(),"Racc_debug_parser"))||(t.yydebug=!1),_(null!=(n=t.yydebug)&&n!==r?"instance-variable":r)||(t.yydebug=!1),_(t.yydebug)&&(_(null!=(T=t.racc_debug_out)&&T!==r?"instance-variable":r)||(t.racc_debug_out=o.stderr),t.racc_debug_out=_(m=t.racc_debug_out)?m:o.stderr),a=$(t.$class(),"Racc_arg"),_(M(a.$size(),14))&&a["$[]="](13,!0),a}),v(f,"$_racc_init_sysvars",function(){var n=this;return n.racc_state=[0],n.racc_tstack=[],n.racc_vstack=[],n.racc_t=r,n.racc_val=r,n.racc_read_next=!0,n.racc_user_yyerror=!1,n.racc_error_status=0}),v(f,"$do_parse",function(){return this.$__send__(q("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),v(f,"$next_token",function(){return this.$raise(q("NotImplementedError"),this.$class()+"#next_token is not defined")}),v(f,"$_racc_do_parse_rb",function(n,T){var t,a=this,O=r,re=r,ee=r,ie=r,oe=r,ue=r,_e=r,le=r;return t=z(n),O=null==t[0]?r:t[0],re=null==t[1]?r:t[1],ee=null==t[2]?r:t[2],ie=null==t[3]?r:t[3],oe=null==t[10]?r:t[10],a.$_racc_init_sysvars(),ue=_e=le=r,F(a,"catch",["racc_end_parse"],function $e(){var se,te,S=null==$e.$$s?this:$e.$$s,X=r;for(null==S.racc_state&&(S.racc_state=r),null==S.racc_read_next&&(S.racc_read_next=r),null==S.racc_t&&(S.racc_t=r),null==S.yydebug&&(S.yydebug=r),null==S.racc_val&&(S.racc_val=r);_(!0);)for(_(le=ie["$[]"](S.racc_state["$[]"](-1)))?(_(S.racc_read_next)&&E(S.racc_t,0)&&(te=S.$next_token(),se=z(te),ue=null==se[0]?r:se[0],S.racc_val=null==se[1]?r:se[1],S.racc_t=_(ue)?_(X=oe["$[]"](ue))?X:1:0,_(S.yydebug)&&S.$racc_read_token(S.racc_t,ue,S.racc_val),S.racc_read_next=!1),le=Q(le,S.racc_t),_(j(le,0))&&_(_e=O["$[]"](le))&&V(re["$[]"](le),S.racc_state["$[]"](-1))||(_e=ee["$[]"](S.racc_state["$[]"](-1)))):_e=ee["$[]"](S.racc_state["$[]"](-1));_(_e=S.$_racc_evalact(_e,n)););},{$$s:a})}),v(f,"$yyparse",function(n,T){return this.$__send__(q("Racc_YY_Parse_Method"),n,T,this.$_racc_setup(),!0)}),v(f,"$_racc_yyparse_rb",function(n,T,t,m){var a,ee=r,ie=r,ce=r,oe=r,_e=r,le=r,$e=r;return a=z(t),ee=null==a[0]?r:a[0],ie=null==a[1]?r:a[1],ce=null==a[2]?r:a[2],oe=null==a[3]?r:a[3],_e=null==a[10]?r:a[10],this.$_racc_init_sysvars(),le=r,$e=r,F(this,"catch",["racc_end_parse"],function se(){var te=null==se.$$s?this:se.$$s;for(null==te.racc_state&&(te.racc_state=r);!_($e=oe["$[]"](te.racc_state["$[]"](-1)));)for(;_(le=te.$_racc_evalact(ce["$[]"](te.racc_state["$[]"](-1)),t)););return F(n,"__send__",[T],function S(X,K){var k=null==S.$$s?this:S.$$s,Z=r,w=r;for(null==k.racc_t&&(k.racc_t=r),null==k.racc_state&&(k.racc_state=r),null==k.racc_read_next&&(k.racc_read_next=r),null==X&&(X=r),null==K&&(K=r),k.racc_t=_(X)?_(Z=_e["$[]"](X))?Z:1:0,k.racc_val=K,k.racc_read_next=!1,$e=Q($e,k.racc_t),_(j($e,0))&&_(le=ee["$[]"]($e))&&V(ie["$[]"]($e),k.racc_state["$[]"](-1))||(le=ce["$[]"](k.racc_state["$[]"](-1)));_(le=k.$_racc_evalact(le,t)););for(;_(_(Z=_(w=($e=oe["$[]"](k.racc_state["$[]"](-1)))["$!"]())?w:k.racc_read_next["$!"]())?Z:k.racc_t["$=="](0));)for(_($e)&&_($e=Q($e,k.racc_t))&&_(j($e,0))&&_(le=ee["$[]"]($e))&&V(ie["$[]"]($e),k.racc_state["$[]"](-1))||(le=ce["$[]"](k.racc_state["$[]"](-1)));_(le=k.$_racc_evalact(le,t)););},{$$s:te})},{$$s:this})}),v(f,"$_racc_evalact",function(n,T){var t,ce,a=this,O=r,re=r,ie=r,oe=r,ue=r,_e=r;if(O=null==(t=z(T))[0]?r:t[0],re=null==t[1]?r:t[1],ie=null==t[3]?r:t[3],ce=null==t[11]?r:t[11],oe=null==t[12]?r:t[12],_(H(n,0))&&_(M(n,ce)))_(H(a.racc_error_status,0))&&(V(a.racc_t,1)||(a.racc_error_status=A(a.racc_error_status,1))),a.racc_vstack.$push(a.racc_val),a.racc_state.$push(n),a.racc_read_next=!0,_(a.yydebug)&&(a.racc_tstack.$push(a.racc_t),a.$racc_shift(a.racc_t,a.racc_tstack,a.racc_vstack));else if(_(M(n,0))&&_(H(n,oe["$-@"]()))){if(ue=F(a,"catch",["racc_jump"],function le(){var $e=null==le.$$s?this:le.$$s;return null==$e.racc_state&&($e.racc_state=r),$e.racc_state.$push($e.$_racc_do_reduce(T,n)),!1},{$$s:a}),_(ue))switch(ue.valueOf()){case 1:return a.racc_user_yyerror=!0,oe["$-@"]();case 2:return ce;default:a.$raise("[Racc Bug] unknown jump code")}}else if(V(n,ce))_(a.yydebug)&&a.$racc_accept(),a.$throw("racc_end_parse",a.racc_vstack["$[]"](0));else{if(V(n,oe["$-@"]())){switch(a.racc_error_status.valueOf()){case 0:_(T["$[]"](21))||a.$on_error(a.racc_t,a.racc_val,a.racc_vstack);break;case 3:V(a.racc_t,0)&&a.$throw("racc_end_parse",r),a.racc_read_next=!0}for(a.racc_user_yyerror=!1,a.racc_error_status=3;_(!0)&&!(_(_e=ie["$[]"](a.racc_state["$[]"](-1)))&&(_e=Q(_e,1),_(j(_e,0))&&_(n=O["$[]"](_e))&&V(re["$[]"](_e),a.racc_state["$[]"](-1))));)_(i(a.racc_state.$size(),1))&&a.$throw("racc_end_parse",r),a.racc_state.$pop(),a.racc_vstack.$pop(),_(a.yydebug)&&(a.racc_tstack.$pop(),a.$racc_e_pop(a.racc_state,a.racc_tstack,a.racc_vstack));return n}a.$raise("[Racc Bug] unknown action "+n.$inspect())}return _(a.yydebug)&&a.$racc_next_state(a.racc_state["$[]"](-1),a.racc_state),r}),v(f,"$_racc_do_reduce",function(n,T){var t,oe,_e,X,K,k,W,a=this,re=r,ee=r,ie=r,ce=r,ue=r,le=r,$e=r,se=r,te=r,S=r,Z=r,w=r,J=r;return re=null==(t=z(n))[4]?r:t[4],ee=null==t[5]?r:t[5],ie=null==t[6]?r:t[6],ce=null==t[7]?r:t[7],oe=null==t[8]?r:t[8],ue=null==t[9]?r:t[9],_e=null==t[13]?r:t[13],le=a.racc_state,$e=a.racc_vstack,se=a.racc_tstack,te=I(T,-3),S=ue["$[]"](te),X=ue["$[]"](Q(te,1)),K=ue["$[]"](Q(te,2)),k=[],_(a.yydebug)&&(Z=se["$[]"](S["$-@"](),S)),w=$e["$[]"](S["$-@"](),S),_(a.yydebug)&&se["$[]="](S["$-@"](),S,k),$e["$[]="](S["$-@"](),S,k),le["$[]="](S["$-@"](),S,k),_(_e)?$e.$push(a.$__send__(K,w,$e,w["$[]"](0))):$e.$push(a.$__send__(K,w,$e)),se.$push(X),_(a.yydebug)&&a.$racc_reduce(Z,X,se,$e),W=A(X,oe),_(te=ce["$[]"](W))&&(te=Q(te,le["$[]"](-1)),_(j(te,0))&&_(J=re["$[]"](te))&&V(ee["$[]"](te),W))?J:ie["$[]"](W)}),v(f,"$on_error",function(n,T,t){var a,m=this;return m.$raise(q("ParseError"),m.$sprintf("\nparse error on value %s (%s)",T.$inspect(),_(a=m.$token_to_str(n))?a:"?"))}),v(f,"$yyerror",function(){return this.$throw("racc_jump",1)}),v(f,"$yyaccept",function(){return this.$throw("racc_jump",2)}),v(f,"$yyerrok",c("racc_error_status",0)),v(f,"$racc_read_token",function(n,T,t){var m=this;return m.racc_debug_out.$print("read    "),m.racc_debug_out.$print(T.$inspect(),"(",m.$racc_token2str(n),") "),m.racc_debug_out.$puts(t.$inspect()),m.racc_debug_out.$puts()}),v(f,"$racc_shift",function(n,T,t){var m=this;return m.racc_debug_out.$puts("shift   "+m.$racc_token2str(n)),m.$racc_print_stacks(T,t),m.racc_debug_out.$puts()}),v(f,"$racc_reduce",function(n,T,t,m){var a=this,O=r;return(O=a.racc_debug_out).$print("reduce "),_(n["$empty?"]())?O.$print(" <none>"):F(n,"each",[],function re(ee){return null==ee&&(ee=r),O.$print(" ",(null==re.$$s?this:re.$$s).$racc_token2str(ee))},{$$s:a}),O.$puts(" --\x3e "+a.$racc_token2str(T)),a.$racc_print_stacks(t,m),a.racc_debug_out.$puts()}),v(f,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),v(f,"$racc_e_pop",function(n,T,t){var m=this;return m.racc_debug_out.$puts("error recovering mode: pop token"),m.$racc_print_states(n),m.$racc_print_stacks(T,t),m.racc_debug_out.$puts()}),v(f,"$racc_next_state",function(n,T){var t=this;return t.racc_debug_out.$puts("goto    "+n),t.$racc_print_states(T),t.racc_debug_out.$puts()}),v(f,"$racc_print_stacks",function(n,T){var m=r;return(m=this.racc_debug_out).$print("        ["),F(n,"each_index",[],function a(O){return null==O&&(O=r),m.$print(" (",(null==a.$$s?this:a.$$s).$racc_token2str(n["$[]"](O))," ",T["$[]"](O).$inspect(),")")},{$$s:this}),m.$puts(" ]")}),v(f,"$racc_print_states",function(n){var t=r;return(t=this.racc_debug_out).$print("        ["),F(n,"each",[],function(a){return null==a&&(a=r),t.$print(" ",a)}),t.$puts(" ]")}),v(f,"$racc_token2str",function(n){var t;return _(t=$(this.$class(),"Racc_token_to_s_table")["$[]"](n))?t:this.$raise("[Racc Bug] can't convert token "+n+" to string")}),v(f,"$token_to_str",function(n){return $(this.$class(),"Racc_token_to_s_table")["$[]"](n)})}(u[0],u)},Opal.modules["bcdice/arithmetic/node"]=function(e){var c,r,N,s,f,p,D,y,u,Y=e.module,G=e.klass,_=e.def,B=e.thrower,P=e.return_ivar,o=e.send2,M=e.find_super,v=e.eqeq,z=e.const_set,F=e.eqeqeq,E=e.rb_divide,Q=e.truthy,V=e.assign_ivar,j=e.alias,H=[],A=e.nil,i=e.$$$;return c=H,r=u=[Y(H[0],"BCDice")].concat(c),N=y=[Y(u[0],"Arithmetic")].concat(r),p=[Y(y[0],"Node")].concat(N),D=e.$r(p),(f=(s=G(p[0],null,"BinaryOp")).$$prototype).lhs=f.rhs=f.op=A,_(s,"$initialize",function(q,d,h){var n=this;return n.lhs=q,n.op=d,n.rhs=h}),_(s,"$eval",function(q){try{B("eval_return");var T,h=this,n=A;return n=h.lhs.$eval(q),T=h.rhs.$eval(q),n.$send(h.op,T)}catch(t){if(t===e.t_eval_return)return t.$v;throw t}}),_(s,"$output",function(){var q=this;return""+q.lhs.$output()+q.op+q.rhs.$output()}),_(s,"$s_exp",function(){var q=this;return"("+q.$op_for_s_exp()+" "+q.lhs.$s_exp()+" "+q.rhs.$s_exp()+")"}),_(s,"$op_for_s_exp",P("op")),function(x,b,s){var f=G(x,b,"DivideBase"),l=[f].concat(s),q=e.$r(l),d=f.$$prototype;d.lhs=d.rhs=d.op=A,_(f,"$initialize",function h(n,T){return h.$$p=null,o(this,M(this,"initialize",h,!1,!0),"initialize",[n,"/",T],null)}),_(f,"$eval",function(n){try{B("eval_return");var m,a,t=this;return m=t.lhs.$eval(n),a=t.rhs.$eval(n),v(a,0)&&t.$raise(q("ZeroDivisionError")),t.$divide_and_round(m,a,n)}catch(O){if(O===e.t_eval_return)return O.$v;throw O}}),_(f,"$output",function h(){var n=h.$$p||A,T=this;return h.$$p=null,""+o(T,M(T,"output",h,!1,!0),"output",[],n)+T.$rounding_method()}),f.$private(),_(f,"$rounding_method",function(){return i(this.$class(),"ROUNDING_METHOD")}),_(f,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),_(f,"$divide_and_round",function(n,T,t){return this.$raise(q("NotImplementedError"))})}(p[0],D("BinaryOp"),p),function(x,b,s){var f=G(x,b,"DivideWithGameSystemDefault"),l=[f].concat(s),q=e.$r(l);z(l[0],"ROUNDING_METHOD",""),f.$private(),_(f,"$divide_and_round",function(h,n,T){var t,m=A;return F(i(q("RoundType"),"CEIL"),t=T)?E(h.$to_f(),n).$ceil():F(i(q("RoundType"),"ROUND"),t)?(m=E(h.$to_f(),n),Q(m["$negative?"]())?m.$abs().$round()["$-@"]():m.$round()):E(h,n).$floor()})}(p[0],D("DivideBase"),p),function(x,b,s){var f=G(x,b,"DivideWithCeil"),l=[f].concat(s);z(l[0],"ROUNDING_METHOD","C"),f.$private(),_(f,"$divide_and_round",function(d,h,n){return E(d.$to_f(),h).$ceil()})}(p[0],D("DivideBase"),p),function(x,b,s){var f=G(x,b,"DivideWithRound"),l=[f].concat(s);z(l[0],"ROUNDING_METHOD","R"),f.$private(),_(f,"$divide_and_round",function(d,h,n){var T=A;return T=E(d.$to_f(),h),Q(T["$negative?"]())?T.$abs().$round()["$-@"]():T.$round()})}(p[0],D("DivideBase"),p),function(x,b,s){var f=G(x,b,"DivideWithFloor"),l=[f].concat(s);z(l[0],"ROUNDING_METHOD","F"),f.$private(),_(f,"$divide_and_round",function(d,h,n){return E(d,h).$floor()})}(p[0],D("DivideBase"),p),function(x,b){var s=G(x,null,"Negative");s.$$prototype.body=A,_(s,"$initialize",V("body")),_(s,"$eval",function(q){try{return B("eval_return"),this.body.$eval(q)["$-@"]()}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),_(s,"$output",function(){return"-"+this.body.$output()}),_(s,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(p[0]),function(x,b){var s=G(x,null,"Parenthesis");s.$$prototype.expr=A,_(s,"$initialize",V("expr")),_(s,"$eval",function(q){try{return B("eval_return"),this.expr.$eval(q)}catch(n){if(n===e.t_eval_return)return n.$v;throw n}}),_(s,"$output",function(){return"("+this.expr.$output()+")"}),_(s,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(p[0]),function(x,b){var s=G(x,null,"Number");return s.$$prototype.value=A,_(s,"$initialize",V("value")),_(s,"$eval",P("value")),_(s,"$output",function(){return this.value.$to_s()}),j(s,"s_exp","output")}(p[0])},Opal.modules.strscan=function(e){var V,j,H,A,i,G=e.def,_=e.truthy,B=e.eqeqeq,P=e.Opal,o=e.return_ivar,M=e.send,v=e.alias,z=[],F=e.nil;return V=z,H=[j=(0,e.klass)(z[0],null,"StringScanner")].concat(V),A=e.$r(H),(i=j.$$prototype).pos=i.string=i.working=i.matched=i.prev_pos=i.match=F,j.$attr_reader("pos","matched"),G(j,"$initialize",function(c){var g=this;return g.string=c,g.pos=0,g.matched=F,g.working=c,g.match=[]}),j.$attr_reader("string"),G(j,"$beginning_of_line?",function(){var c=this;return 0===c.pos||"\n"===c.string.charAt(c.pos-1)}),G(j,"$scan",function(c){var g=this,u=(c=g.$anchor(c)).exec(g.working);return null==u?g.matched=F:(g.prev_pos=g.pos,g.pos+=u[0].length,g.working=g.working.substring(u[0].length),g.matched=u[0],g.match=u,u[0])}),G(j,"$scan_until",function(c){var g=this;c=g.$anchor(c);for(var u=g.working,C=0;u.length!=C;++C){var r=c.exec(u.substr(C));if(null!==r){var $=C+r[0].length,y=u.substr(0,$);return g.matched=r[0],g.match=r,g.prev_pos=g.pos+C,g.pos+=$,g.working=u.substr($),y}}return g.matched=F}),G(j,"$[]",function(c){var u;if(_(this.match["$empty?"]()))return F;B(A("Symbol"),u=c)?c=c.$to_s():B(A("String"),u)||(c=P["$coerce_to!"](c,A("Integer"),"to_int"));var C=this.match;return c<0&&(c+=C.length),c<0||c>=C.length||null==C[c]?F:C[c]}),G(j,"$check",function(c){var g=this,u=(c=g.$anchor(c)).exec(g.working);return g.matched=null==u?F:u[0]}),G(j,"$check_until",function(c){var g=this,u=g.prev_pos,C=g.pos,r=g.working,$=g.$scan_until(c);return g.prev_pos=u,g.pos=C,g.working=r,$}),G(j,"$peek",function(c){return this.working.substring(0,c)}),G(j,"$eos?",function(){return 0===this.working.length}),G(j,"$exist?",function(c){var u=c.exec(this.working);return null==u?F:0==u.index?0:u.index+1}),G(j,"$skip",function(c){var g=this,u=(c=g.$anchor(c)).exec(g.working);if(null==u)return g.match=[],g.matched=F;var C=u[0],r=C.length;return g.matched=C,g.match=u,g.prev_pos=g.pos,g.pos+=r,g.working=g.working.substring(r),r}),G(j,"$skip_until",function(c){var u=this.$scan_until(c);return u===F?F:(this.matched=u.substr(-1),u.length)}),G(j,"$get_byte",function(){var c=this,g=F;return c.pos<c.string.length?(c.prev_pos=c.pos,c.pos+=1,g=c.matched=c.working.substring(0,1),c.working=c.working.substring(1)):c.matched=F,g}),G(j,"$match?",function(c){var g=this,u=(c=g.$anchor(c)).exec(g.working);return null==u?F:(g.prev_pos=g.pos,u[0].length)}),G(j,"$pos=",function(c){var g=this;return c<0&&(c+=g.string.$length()),g.pos=c,g.working=g.string.slice(c)}),G(j,"$matched_size",function(){return this.matched===F?F:this.matched.length}),G(j,"$post_match",function(){var c=this;return c.matched===F?F:c.string.substr(c.pos)}),G(j,"$pre_match",function(){var c=this;return c.matched===F?F:c.string.substr(0,c.prev_pos)}),G(j,"$reset",function(){var c=this;return c.working=c.string,c.matched=F,c.pos=0}),G(j,"$rest",o("working")),G(j,"$rest?",function(){return 0!==this.working.length}),G(j,"$rest_size",function(){return this.$rest().$size()}),G(j,"$terminate",function(){var c,g=this;return g.match=F,c=[g.string.$length()],M(g,"pos=",c),c[c.length-1]}),G(j,"$unscan",function(){var c=this;return c.pos=c.prev_pos,c.prev_pos=F,c.match=F,c}),v(j,"bol?","beginning_of_line?"),v(j,"getch","get_byte"),j.$private(),G(j,"$anchor",function(c){var g=c.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+c.source+")",g)})},Opal.modules["bcdice/normalize"]=function(e){var v,Q,F,Y=e.module,G=e.eqeqeq,_=e.def,B=e.eqeq,P=[],o=e.nil;return v=P,F=[Y(P[0],"BCDice")].concat(v),(Q=Y(F[0],"Normalize")).$module_function(),_(Q,"$comparison_operator",function(j){var H;return G(/<=|=</,H=j)?"<=":G(/>=|=>/,H)?">=":G(/<>|!=|=!/,H)?"!=":G(/</,H)?"<":G(/>/,H)?">":G(/=/,H)?"==":o}),_(Q,"$target_number",function(j){return B(j,"?")?j:j.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(e){var V,i,C,r,$,y,L,c,H,Y=e.module,G=e.klass,_=e.const_set,B=e.hash2,P=e.truthy,o=e.send,M=e.def,v=e.thrower,z=e.top,F=[],E=e.nil;return z.$require("strscan"),z.$require("bcdice/normalize"),V=F,i=H=[Y(F[0],"BCDice")].concat(V),C=c=[Y(H[0],"Command")].concat(i),$=[r=G(c[0],null,"Lexer")].concat(C),y=e.$r($),(L=r.$$prototype).scanner=L.notations=E,_($[0],"SYMBOLS",B(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),M(r,"$initialize",function(R,p){var D,x,s;return R=P(s=(D=(x=R)===E||null==x?E:x.$split(" ",2))===E||null==D?E:D.$first())?s:"",this.scanner=y("StringScanner").$new(R),this.notations=o(p,"map",[],function(l){return null==l&&(l=E),P(l["$is_a?"](y("String")))?y("Regexp").$new(l):l})}),M(r,"$next_token",function(){try{var R=v("return"),p=this,D=E,x=E,s=E,f=E;return P(p.scanner["$eos?"]())?[!1,"$"]:(o(p.notations,"each",[],function l(q){var h,d=null==l.$$s?this:l.$$s;if(null==d.scanner&&(d.scanner=E),null==q&&(q=E),h=d.scanner.$scan(q),!P(h))return E;R.$throw(["NOTATION",h])},{$$s:p,$$ret:R}),P(D=p.scanner.$scan(/\d+/))?["NUMBER",D.$to_i()]:P(x=p.scanner.$scan(/[<>!=]+/))?(x=y("Normalize").$comparison_operator(x),[P(x)?"CMP_OP":"ILLEGAL",x]):(s=p.scanner.$getch().$upcase(),[P(f=y("SYMBOLS")["$[]"](s))?f:s.$to_sym(),s]))}catch(l){if(l===R)return l.$v;throw l}}),M(r,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(e){var z,V,I,c,g,u,C,H,E,Y=e.module,G=e.klass,_=e.def,B=e.return_ivar,P=e.truthy,o=[],M=e.nil;return z=o,V=E=[Y(o[0],"BCDice")].concat(z),I=H=[Y(E[0],"Command")].concat(V),g=[c=G(H[0],null,"Parsed")].concat(I),u=e.$r(g),(C=c.$$prototype).critical=C.fumble=C.dollar=C.modify_number=C.question_target=C.target_number=C.prefix_number=C.command=C.suffix_number=C.cmp_op=M,c.$attr_accessor("command"),c.$attr_accessor("prefix_number"),c.$attr_accessor("suffix_number"),c.$attr_accessor("critical"),c.$attr_accessor("fumble"),c.$attr_accessor("dollar"),c.$attr_accessor("modify_number"),c.$attr_accessor("cmp_op"),c.$attr_accessor("target_number"),c.$attr_writer("question_target"),_(c,"$initialize",function(){var $=this;return $.prefix_number=M,$.suffix_number=M,$.critical=M,$.fumble=M,$.dollar=M,$.cmp_op=M,$.target_number=M,$.question_target=!1}),_(c,"$question_target?",B("question_target")),_(c,"$to_s",function($){var y=this,L=M,N=M,R=M,p=M,D=M;switch(null==$&&($="after_command"),L=P(y.critical)?"@"+y.critical:M,N=P(y.fumble)?"#"+y.fumble:M,R=P(y.dollar)?"$"+y.dollar:M,p=u("Format").$modifier(y.modify_number),D=P(y.question_target)?"?":y.target_number,$.valueOf()){case"after_command":return[y.prefix_number,y.command,y.suffix_number,L,N,R,p,y.cmp_op,D].$join();case"after_modify_number":return[y.prefix_number,y.command,y.suffix_number,p,L,N,R,y.cmp_op,D].$join();case"after_target_number":return[y.prefix_number,y.command,y.suffix_number,p,y.cmp_op,D,L,N,R].$join();default:return M}},-1)},Opal.modules["bcdice/command/parser"]=function(e){var $,R,f,T,t,m,a,O,re,ee,ie,ce,_e,l,h,n,se,D,x,L,Y=e.klass,G=e.module,_=e.slice,B=e.extract_kwargs,P=e.ensure_kwargs,o=e.get_kwarg,M=e.send2,v=e.find_super,z=e.def,F=e.send,E=e.eqeq,Q=e.thrower,V=e.hash,j=e.const_set,H=e.truthy,A=e.to_ary,i=e.hash2,I=e.top,c=[],g=e.$r(c),u=e.nil,C=e.$$$;return I.$require("racc/parser.rb"),I.$require("bcdice/arithmetic/node"),I.$require("bcdice/command/lexer"),I.$require("bcdice/command/parsed"),Y(C(g("BCDice"),"Command"),C(g("Racc"),"Parser"),"Parser"),$=c,R=L=[G(c[0],"BCDice")].concat($),D=[G(L[0],"Command")].concat(R),x=e.$r(D),f=D,h=[l=Y(D[0],C(x("Racc"),"Parser"),"Parser")].concat(f),n=e.$r(h),(se=l.$$prototype).notations=se.lexer=se.modifier=se.suffix_number=se.prefix_number=se.need_suffix_number=se.need_prefix_number=se.critical=se.fumble=se.dollar=se.allowed_cmp_op=se.question_target=u,z(l,"$initialize",function te(S,X){var K,k,Z,w,J=this;return te.$$p=null,K=_(arguments),k=B(K),k=P(k),Z=K,w=o(k,"round_type"),M(J,v(J,"initialize",te,!1,!0),"initialize",[],null),J.notations=Z,J.round_type=w,J.prefix_number=!1,J.suffix_number=!1,J.need_prefix_number=!1,J.need_suffix_number=!1,J.modifier=!0,J.critical=!1,J.fumble=!1,J.dollar=!1,J.allowed_cmp_op=[u,">=",">","<=","<","==","!="],J.question_target=!1},-2),z(l,"$disable_modifier",function(){return this.modifier=!1,this}),z(l,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),z(l,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),z(l,"$has_prefix_number",function(){var S=this;return S.prefix_number=!0,S.need_prefix_number=!0,S}),z(l,"$has_suffix_number",function(){var S=this;return S.suffix_number=!0,S.need_suffix_number=!0,S}),z(l,"$enable_critical",function(){return this.critical=!0,this}),z(l,"$enable_fumble",function(){return this.fumble=!0,this}),z(l,"$enable_dollar",function(){return this.dollar=!0,this}),z(l,"$restrict_cmp_op_to",function(S){var X;return X=_(arguments),this.allowed_cmp_op=X,this},-1),z(l,"$enable_question_target",function(){return this.question_target=!0,this}),z(l,"$parse",function(S){var X=this;try{return X.lexer=n("Lexer").$new(S,X.notations),X.$do_parse()}catch(K){if(!e.rescue(K,[n("ParseError"),n("ZeroDivisionError")]))throw K;try{return u}finally{e.pop_exception()}}}),l.$private(),z(l,"$parsed",function(S,X,K,k){try{return Q("eval_return"),F(n("Parsed").$new(),"tap",[],function W(J){var U,ne,ae,fe,de,me,ve,he=null==W.$$s?this:W.$$s;return null==he.round_type&&(he.round_type=u),null==J&&(J=u),J["$command="](S["$[]"]("command")),J["$prefix_number="]((U=S["$[]"]("prefix"))===u||null==U?u:U.$eval(he.round_type)),J["$suffix_number="]((ne=S["$[]"]("suffix"))===u||null==ne?u:ne.$eval(he.round_type)),J["$critical="]((ae=X["$[]"]("critical"))===u||null==ae?u:ae.$eval(he.round_type)),J["$fumble="]((fe=X["$[]"]("fumble"))===u||null==fe?u:fe.$eval(he.round_type)),J["$dollar="]((de=X["$[]"]("dollar"))===u||null==de?u:de.$eval(he.round_type)),J["$modify_number="](K.$eval(he.round_type)),J["$cmp_op="](k["$[]"]("cmp_op")),E(k["$[]"]("target"),"?")?(J["$question_target="](!0),F(J,"target_number=",me=[0]),me[me.length-1]):(J["$question_target="](!1),me=[(ve=k["$[]"]("target"),ve===u||null==ve?u:ve.$eval(he.round_type))],F(J,"target_number=",me),me[me.length-1])},{$$s:this})}catch(W){if(W===e.t_eval_return)return W.$v;throw W}}),z(l,"$next_token",function(){return this.lexer.$next_token()}),T=e.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),t=e.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),m=e.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),a=e.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),O=e.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),re=e.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),ee=[u,6,13,3,9,-1,27,-15,-10,-1,-38],ie=[u,u,u,u,u,u,19,16,15,u,u],ce=e.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),_e=V(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),j(h[0],"Racc_arg",[T,t,a,m,O,re,ie,ee,19,ce,_e,58,35,!0]),H(n("Ractor","skip_raise")?"constant":u)&&n("Ractor").$make_shareable(n("Racc_arg")),j(h[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),H(n("Ractor","skip_raise")?"constant":u)&&n("Ractor").$make_shareable(n("Racc_token_to_s_table")),j(h[0],"Racc_debug_parser",!1),z(l,"$_reduce_1",function(S,X,K){var k,w=this;return H(w.modifier)||w.$raise(n("ParseError")),k=A(S),w.$parsed(null==k[0]?u:k[0],null==k[1]?u:k[1],null==k[2]?u:k[2],null==k[3]?u:k[3])}),z(l,"$_reduce_2",function(S,X,K){var k,w=this;return H(w.modifier)||w.$raise(n("ParseError")),k=A(S),w.$parsed(null==k[0]?u:k[0],null==k[2]?u:k[2],null==k[1]?u:k[1],null==k[3]?u:k[3])}),z(l,"$_reduce_3",function(S,X,K){var k,U;return U=null==(k=A(S))[2]?u:k[2],this.$parsed(null==k[0]?u:k[0],null==k[1]?u:k[1],C(C(n("Arithmetic"),"Node"),"Number").$new(0),U)}),z(l,"$_reduce_4",function(S,X,K){var k=this;return H(k.prefix_number)&&H(k.suffix_number)||k.$raise(n("ParseError")),i(["command","prefix","suffix"],{command:S["$[]"](1),prefix:S["$[]"](0),suffix:S["$[]"](2)})}),z(l,"$_reduce_5",function(S,X,K){var k=this;return H(k.prefix_number)||k.$raise(n("ParseError")),H(k.need_suffix_number)&&k.$raise(n("ParseError")),i(["command","prefix"],{command:S["$[]"](1),prefix:S["$[]"](0)})}),z(l,"$_reduce_6",function(S,X,K){var k=this;return H(k.suffix_number)||k.$raise(n("ParseError")),H(k.need_prefix_number)&&k.$raise(n("ParseError")),i(["command","suffix"],{command:S["$[]"](0),suffix:S["$[]"](1)})}),z(l,"$_reduce_7",function(S,X,K){var k=this;return(H(k.need_prefix_number)||H(k.need_suffix_number))&&k.$raise(n("ParseError")),i(["command"],{command:S["$[]"](0)})}),z(l,"$_reduce_8",function(S,X,K){return i([],{})}),z(l,"$_reduce_9",function(S,X,K){var k,U,W=u;return W=null==(k=A(S))[0]?u:k[0],U=null==k[2]?u:k[2],H(this.critical)&&H(W["$[]"]("critical")["$nil?"]())||this.$raise(n("ParseError")),W["$[]="]("critical",U),W}),z(l,"$_reduce_10",function(S,X,K){var k,U,W=u;return W=null==(k=A(S))[0]?u:k[0],U=null==k[2]?u:k[2],H(this.fumble)&&H(W["$[]"]("fumble")["$nil?"]())||this.$raise(n("ParseError")),W["$[]="]("fumble",U),W}),z(l,"$_reduce_11",function(S,X,K){var k,U,W=u;return W=null==(k=A(S))[0]?u:k[0],U=null==k[2]?u:k[2],H(this.dollar)&&H(W["$[]"]("dollar")["$nil?"]())||this.$raise(n("ParseError")),W["$[]="]("dollar",U),W}),z(l,"$_reduce_12",function(S,X,K){return S["$[]"](1)}),z(l,"$_reduce_13",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"Negative").$new(S["$[]"](1))}),z(l,"$_reduce_14",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"+",S["$[]"](2))}),z(l,"$_reduce_15",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"-",S["$[]"](2))}),z(l,"$_reduce_16",function(S,X,K){return H(this.allowed_cmp_op["$include?"](u))||this.$raise(n("ParseError")),i([],{})}),z(l,"$_reduce_17",function(S,X,K){var k,W,J;return J=null==(k=A(S))[1]?u:k[1],H(this.allowed_cmp_op["$include?"](W=null==k[0]?u:k[0]))||this.$raise(n("ParseError")),i(["cmp_op","target"],{cmp_op:W,target:J})}),z(l,"$_reduce_18",function(S,X,K){var Z,k=this;return Z=S["$[]"](0),H(k.question_target)||k.$raise(n("ParseError")),H(k.allowed_cmp_op["$include?"](Z))||k.$raise(n("ParseError")),i(["cmp_op","target"],{cmp_op:Z,target:"?"})}),z(l,"$_reduce_19",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"+",S["$[]"](2))}),z(l,"$_reduce_20",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"-",S["$[]"](2))}),z(l,"$_reduce_22",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"BinaryOp").$new(S["$[]"](0),"*",S["$[]"](2))}),z(l,"$_reduce_23",function(S,X,K){return S["$[]"](3).$new(S["$[]"](0),S["$[]"](2))}),z(l,"$_reduce_25",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),z(l,"$_reduce_26",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"DivideWithCeil")}),z(l,"$_reduce_27",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"DivideWithCeil")}),z(l,"$_reduce_28",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"DivideWithRound")}),z(l,"$_reduce_29",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"DivideWithFloor")}),z(l,"$_reduce_30",function(S,X,K){return S["$[]"](1)}),z(l,"$_reduce_31",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"Negative").$new(S["$[]"](1))}),z(l,"$_reduce_33",function(S,X,K){return S["$[]"](1)}),z(l,"$_reduce_34",function(S,X,K){return C(C(n("Arithmetic"),"Node"),"Number").$new(S["$[]"](0))}),z(l,"$_reduce_none",function(S,X,K){return S["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(e){var F,j,I,c,g,u,A,Q,Y=e.module,G=e.send,_=e.eqeqeq,B=e.truthy,P=e.def,o=e.return_val,M=[],v=e.nil;return F=M,j=Q=[Y(M[0],"BCDice")].concat(F),I=A=[Y(Q[0],"Deprecated")].concat(j),g=[c=Y(A[0],"Checker")].concat(I),u=e.$r(g),c.$private(),P(c,"$check_result_legacy",function(r,$,y,L){var D,N=this,R=v,p=v,x=v,b=v;return R=G($,"map",[],"sides".$to_proc()),D=(p=G($,"map",[],"value".$to_proc())).$sum(),x=_([100],b=R)?N.$check_1D100(r,D,y,L):_([20],b)?N.$check_1D20(r,D,y,L):_([6,6],b)?N.$check_2D6(r,D,p,y,L):v,(B(x["$nil?"]())||B(x["$empty?"]()))&&(x=_([10],b=R.$uniq())?N.$check_nD10(r,D,p,y,L):_([6],b)?N.$check_nD6(r,D,p,y,L):v,B(x["$nil?"]())||B(x["$empty?"]()))?v:u("Result").$new(x.$delete_prefix(" \uff1e "))}),P(c,"$check_1D100",o(v)),P(c,"$check_1D20",o(v)),P(c,"$check_nD10",o(v)),P(c,"$check_2D6",o(v)),P(c,"$check_nD6",o(v))},Opal.modules["bcdice/base"]=function(e){var g,N,b,d,n,T,s,f,l,q,p,Y=e.module,G=e.klass,_=e.slice,B=e.rb_plus,P=e.truthy,o=e.def,M=e.regexp,v=e.send,z=e.thrower,F=e.return_ivar,E=e.assign_ivar_val,Q=e.eqeqeq,V=e.eqeq,j=e.return_val,H=e.range,A=e.rb_minus,i=e.rb_divide,I=e.rb_times,c=e.rb_ge,u=e.top,C=[],r=e.$r(C),$=e.nil,y=e.$$$;return u.$require("i18n"),u.$require("i18n/backend/fallbacks"),u.$require("bcdice/randomizer"),u.$require("bcdice/dice_table"),u.$require("bcdice/enum"),u.$require("bcdice/translate"),u.$require("bcdice/result"),u.$require("bcdice/command/parser"),u.$require("bcdice/deprecated/checker"),N=C,b=p=[Y(C[0],"BCDice")].concat(N),f=[s=G(p[0],null,"Base")].concat(b),l=e.$r(f),(q=s.$$prototype).raw_input=q.randomizer=q.enabled_upcase_input=q.debug=$,n=[d=e.get_singleton_class(s)].concat(f),T=e.$r(n),d.$attr_reader("prefixes"),o(d,"$register_prefix",function(m){var O,ee;return null==this.prefixes&&(this.prefixes=$),O=_(arguments),this.prefixes=B(P(ee=this.prefixes)?ee:[],O.$flatten())},-1),o(d,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),o(d,"$prefixes_pattern",function(){var m=this,a=$;return null==m.prefixes_pattern&&(m.prefixes_pattern=$),null==m.prefixes&&(m.prefixes=$),m.prefixes_pattern=P(a=m.prefixes_pattern)?a:$,P(m.prefixes_pattern)?m.prefixes_pattern:(m.prefixes=P(a=m.prefixes)?a:[],m.prefixes.$freeze(),m.prefixes_pattern=(P(m.prefixes["$empty?"]())?/(?!)/:M(["^(S)?(",m.prefixes.$join("|"),")"],"i")).$freeze())}),o(d,"$command_pattern",function(){var m=this,a=$,O=$;return null==m.command_pattern&&(m.command_pattern=$),null==m.prefixes&&(m.prefixes=$),m.command_pattern=P(a=m.command_pattern)?a:$,P(m.command_pattern)?m.command_pattern:(m.prefixes=P(a=m.prefixes)?a:[],m.prefixes.$freeze(),O=B(v(y(T("CommonCommand"),"COMMANDS"),"map",[],function(ee){return null==ee&&(ee=$),y(ee,"PREFIX_PATTERN").$source()}),m.prefixes),m.command_pattern=M(["^S?(",O.$join("|"),")"],"i").$freeze())}),o(d,"$eval",function(m){try{return z("eval_return"),this.$new(m).$eval()}catch(re){if(re===e.t_eval_return)return re.$v;throw re}}),s.$include(l("Translate")),s.$include(y(l("Deprecated"),"Checker")),o(s,"$initialize",function(h){var n=this;return n.raw_input=h,n.sort_add_dice=!1,n.sort_barabara_dice=!1,n.d66_sort_type=y(l("D66SortType"),"NO_SORT"),n.enabled_d9=!1,n.round_type=y(l("RoundType"),"FLOOR"),n.sides_implicit_d=6,n.upper_dice_reroll_threshold=$,n.reroll_dice_reroll_threshold=$,n.default_cmp_op=$,n.default_target_number=$,n.enabled_upcase_input=!0,n.locale="ja_jp",n.randomizer=y(l("BCDice"),"Randomizer").$new(),n.debug=!1}),s.$attr_accessor("randomizer"),s.$attr_reader("d66_sort_type"),s.$attr_reader("round_type"),s.$attr_reader("sides_implicit_d"),s.$attr_reader("upper_dice_reroll_threshold"),s.$attr_reader("reroll_dice_reroll_threshold"),s.$attr_reader("default_cmp_op"),s.$attr_reader("default_target_number"),o(s,"$sort_add_dice?",F("sort_add_dice")),o(s,"$sort_barabara_dice?",F("sort_barabara_dice")),o(s,"$enabled_d9?",F("enabled_d9")),o(s,"$enable_debug",E("debug",!0)),o(s,"$eval",function(){var n,t,h=this,T=$;return n=y(l("BCDice"),"Preprocessor").$process(h.raw_input,h),T=P(t=h.$dice_command(n))?t:h.$eval_common_command(h.raw_input),P(T)?(T["$rands="](h.randomizer.$rand_results()),T["$detailed_rands="](h.randomizer.$detailed_rand_results()),T):$}),o(s,"$change_text",function(h){return h}),o(s,"$check_result",function(h,n,T,t){var m=this,a=$,O=$,re=$,ee=$,ie=$;return a=m.$check_result_legacy(h,n,T,t),P(a)?a:(O=v(n,"map",[],"sides".$to_proc()),ee=(re=v(n,"map",[],"value".$to_proc())).$sum(),a=Q([100],ie=O)?m.$result_1d100(h,ee,T,t):Q([20],ie)?m.$result_1d20(h,ee,T,t):Q([6,6],ie)?m.$result_2d6(h,ee,re,T,t):$,V(a,l("Result").$nothing())?$:P(a)?a:(a=Q([10],ie=O.$uniq())?m.$result_nd10(h,ee,re,T,t):Q([6],ie)?m.$result_nd6(h,ee,re,T,t):$,V(a,l("Result").$nothing())?$:P(a)?a:m.$result_ndx(h,T,t)))}),o(s,"$grich_text",j($)),s.$private(),o(s,"$eval_common_command",function(h){try{z("eval_return");var T=z("return");return h=this.$change_text(h),v(y(l("CommonCommand"),"COMMANDS"),"each",[],function m(a){var re,O=null==m.$$s?this:m.$$s;if(null==O.randomizer&&(O.randomizer=$),null==a&&(a=$),re=a.$eval(h,O,O.randomizer),!P(re))return $;T.$throw(re)},{$$s:this,$$ret:T}),$}catch(m){if(m===e.t_eval_return||m===T)return m.$v;throw m}}),o(s,"$dice_command",function(h){var n=this,T=$,t=$,m=$,a=$;return P(n.enabled_upcase_input)&&(h=h.$upcase()),T=n.$class().$prefixes_pattern().$match(h),P(T)?(t=T["$[]"](1)["$nil?"]()["$!"](),P(t)&&(h=h["$[]"](H(1,-1,!1))),m=n.$eval_game_system_specific_command(h),P(m["$is_a?"](l("Result")))?(m["$secret="](P(a=m["$secret?"]())?a:t),m):P(m["$nil?"]())||P(m["$empty?"]())||V(m,"1")?$:v(l("Result").$new(),"tap",[],function(re){var ee;return null==re&&(re=$),re["$text="](m.$to_s()),v(re,"secret=",ee=[t]),ee[ee.length-1]})):$}),o(s,"$eval_game_system_specific_command",j($)),o(s,"$result_ndx",function(h,n,T){return P(T["$is_a?"](l("String")))?$:P(h.$send(n,T))?l("Result").$success(this.$translate("success")):l("Result").$failure(this.$translate("failure"))}),o(s,"$result_1d100",j($)),o(s,"$result_1d20",j($)),o(s,"$result_nd10",j($)),o(s,"$result_2d6",j($)),o(s,"$result_nd6",j($)),o(s,"$get_table_by_2d6",function(h){return this.$get_table_by_nD6(h,2)}),o(s,"$get_table_by_1d6",function(h){return this.$get_table_by_nD6(h,1)}),o(s,"$get_table_by_nD6",function(h,n){return this.$get_table_by_nDx(h,n,6)}),o(s,"$get_table_by_nDx",function(h,n,T){var m,a=$;return m=this.randomizer.$roll_sum(n,T),a=this.$get_table_value(h["$[]"](A(m,n))),P(a["$nil?"]())?["1",0]:[a,m]}),o(s,"$get_table_by_1d3",function(h){var t,m,n=this,a=$;return n.$debug("get_table_by_1d3"),t=n.randomizer.$roll_sum(1,6),n.$debug("num",t),m=i(A(t,1),2).$to_i(),n.$debug("index",m),a=h["$[]"](m),P(a["$nil?"]())?["1",0]:[a,t]}),o(s,"$get_table_by_d66_swap",function(h){var T;return T=this.randomizer.$roll_d66(y(l("D66SortType"),"ASC")),[this.$get_table_by_number(T,h),T]}),o(s,"$get_table_by_d66",function(h){var T,t,m,O,a=$;return T=this.randomizer.$roll_once(6),t=this.randomizer.$roll_once(6),m=B(I(A(T,1),6),A(t,1)),a=h["$[]"](m),O=""+T+t,P(a["$nil?"]())?["1",O]:[a,O]}),o(s,"$get_table_by_number",function(h,n,T){try{var t=z("return");return null==T&&(T="1"),v(n,"each",[],function a(O){var ee,re=null==a.$$s?this:a.$$s;if(null==O&&(O=$),ee=O["$[]"](0),!P(c(ee,h)))return $;t.$throw(re.$get_table_value(O["$[]"](1)))},{$$s:this,$$ret:t}),this.$get_table_value(T)}catch(a){if(a===t)return a.$v;throw a}},-3),o(s,"$get_table_value",function(h){return P(h["$is_a?"](l("Proc")))?h.$call():h}),o(s,"$roll_tables",function(h,n){var t=$;return t=n["$[]"](h),P(t)?t.$roll(this.randomizer).$to_s():$}),o(s,"$debug",function(h,n){var t,m=this,a=$,O=$;return t=_(arguments,1),P(m.debug)?(a=P(h["$is_a?"](l("String")))?h:h.$inspect(),P(t["$empty?"]())?m.$warn(a):(O=v(t,"map",[],function(ee){return null==ee&&(ee=$),P(ee["$is_a?"](l("String")))?'"'+ee+'"':ee.$inspect()}),m.$warn(a+": "+O.$join(", ")))):$},-2),y(y(r("I18n"),"Backend"),"Simple").$include(y(y(r("I18n"),"Backend"),"Fallbacks")),r("I18n").$load_path()["$<<"](r("Dir")["$[]"](r("File").$join("bcdice","../../i18n/**/*.yml"))),r("I18n")["$default_locale="]("ja_jp"),g=[["ja_jp"]],v(r("I18n").$fallbacks(),"defaults=",g),g[g.length-1]},Opal.modules["bcdice/game_system/sword_world/rating_lexer"]=function(e){var E,H,u,L,N,R,p,r,i,I,V,Y=e.module,G=e.klass,_=e.const_set,B=e.hash2,P=e.truthy,o=e.def,v=[],z=e.nil;return e.top.$require("strscan"),E=v,H=V=[Y(v[0],"BCDice")].concat(E),i=[Y(V[0],"GameSystem")].concat(H),I=e.$r(i),u=i,L=r=[G(i[0],I("Base"),"SwordWorld")].concat(u),R=[N=G(r[0],null,"RatingLexer")].concat(L),p=e.$r(R),N.$$prototype.scanner=z,_(R[0],"SYMBOLS",B(["+","-","*","/","(",")","[","]","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),o(N,"$initialize",function(b){var s,f,q;return b=P(q=(s=(f=b)===z||null==f?z:f.$split(" ",2))===z||null==s?z:s.$first())?q:"",this.scanner=p("StringScanner").$new(b)}),o(N,"$next_token",function(){var b=this,s=z,f=z,q=z;return P(b.scanner["$eos?"]())?[!1,"$"]:P(s=b.scanner.$scan(/\d+/))?["NUMBER",s.$to_i()]:(f=b.scanner.$getch().$upcase(),[P(q=p("SYMBOLS")["$[]"](f))?q:f.$to_sym(),f])}),o(N,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/game_system/sword_world/rating_parsed"]=function(e){var Q,A,C,N,R,p,D,x,$,I,c,j,Y=e.module,G=e.klass,_=e.def,B=e.truthy,P=e.rb_le,o=e.rb_plus,M=e.rb_lt,v=e.neqeq,z=[],F=e.nil;return Q=z,A=j=[Y(z[0],"BCDice")].concat(Q),I=[Y(j[0],"GameSystem")].concat(A),c=e.$r(I),C=I,N=$=[G(I[0],c("Base"),"SwordWorld")].concat(C),p=[R=G($[0],null,"RatingParsed")].concat(N),D=e.$r(p),(x=R.$$prototype).modifier_after_half=x.modifier_after_one_and_a_half=x.semi_fixed_val=x.kept_modify=x.rate=x.greatest_fortune=x.modifier=F,R.$attr_accessor("rate"),R.$attr_accessor("critical"),R.$attr_accessor("kept_modify"),R.$attr_accessor("first_to"),R.$attr_accessor("first_modify"),R.$attr_accessor("rateup"),R.$attr_accessor("greatest_fortune"),R.$attr_accessor("semi_fixed_val"),R.$attr_accessor("tmp_fixed_val"),R.$attr_accessor("modifier"),R.$attr_accessor("modifier_after_half"),R.$attr_accessor("modifier_after_one_and_a_half"),_(R,"$initialize",function(s,f){var l=this;return l.rate=s,l.modifier=f,l.critical=13,l.kept_modify=0,l.first_to=0,l.first_modify=0,l.greatest_fortune=!1,l.rateup=0,l.semi_fixed_val=0,l.tmp_fixed_val=0,l.modifier_after_half=F,l.modifier_after_one_and_a_half=F}),_(R,"$half",function(){return this.modifier_after_half["$nil?"]()["$!"]()}),_(R,"$one_and_a_half",function(){return this.modifier_after_one_and_a_half["$nil?"]()["$!"]()}),_(R,"$min_critical",function(){var s=this;return B(P(s.semi_fixed_val,1))?3:o(o(s.semi_fixed_val,s.kept_modify),2).$clamp(3,13)}),_(R,"$infinite_roll?",function(){return M(this.$critical(),this.$min_critical())}),_(R,"$to_s",function(){var s=this,f=F;return f="KeyNo."+s.rate,B(M(s.$critical(),13))&&(f=o(f,"c["+s.$critical()+"]")),v(s.$first_modify(),0)&&(f=o(f,"m["+D("Format").$modifier(s.$first_modify())+"]")),v(s.$first_to(),0)&&(f=o(f,"m["+s.$first_to()+"]")),v(s.$rateup(),0)&&(f=o(f,"r["+s.$rateup()+"]")),B(s.greatest_fortune)&&(f=o(f,"gf")),v(s.$semi_fixed_val(),0)&&(f=o(f,"sf["+s.$semi_fixed_val()+"]")),v(s.$tmp_fixed_val(),0)&&(f=o(f,"tf["+s.$tmp_fixed_val()+"]")),v(s.$kept_modify(),0)&&(f=o(f,"a["+D("Format").$modifier(s.$kept_modify())+"]")),v(s.modifier,0)&&(f=o(f,D("Format").$modifier(s.modifier))),f})},Opal.modules["bcdice/game_system/sword_world/rating_options"]=function(e){var v,Q,I,r,g,j,H,F,Y=e.module,G=e.klass,_=e.truthy,B=e.def,P=[];return v=P,Q=F=[Y(P[0],"BCDice")].concat(v),j=[Y(F[0],"GameSystem")].concat(Q),H=e.$r(j),I=j,g=[G(j[0],H("Base"),"SwordWorld")].concat(I),(r=G(g[0],null,"RatingOptions")).$attr_accessor("critical"),r.$attr_accessor("kept_modify"),r.$attr_accessor("first_to"),r.$attr_accessor("first_modify"),r.$attr_accessor("rateup"),r.$attr_accessor("greatest_fortune"),r.$attr_accessor("semi_fixed_val"),r.$attr_accessor("tmp_fixed_val"),r.$attr_accessor("modifier"),r.$attr_accessor("modifier_after_half"),r.$attr_accessor("modifier_after_one_and_a_half"),B(r,"$settable_first_roll_adjust_option?",function(){var L;return _(L=this.$first_modify()["$nil?"]())?this.$first_to()["$nil?"]():L}),B(r,"$settable_non_2d_roll_option?",function(){var L,N,y=this;return _(L=_(N=y.$greatest_fortune()["$nil?"]())?y.$semi_fixed_val()["$nil?"]():N)?y.$tmp_fixed_val()["$nil?"]():L})},Opal.modules["bcdice/game_system/sword_world/rating_parser"]=function(e){var g,$,D,q,m,a,O,re,ee,ie,ce,oe,ue,$e,d,T,t,S,b,s,L,N,C,Y=e.module,G=e.klass,_=e.ensure_kwargs,B=e.send2,P=e.find_super,o=e.def,M=e.send,v=e.truthy,z=e.not,F=e.thrower,E=e.hash,Q=e.const_set,V=e.to_ary,j=e.eqeq,H=e.top,A=[],i=e.nil,I=e.$$$;return H.$require("racc/parser.rb"),H.$require("bcdice/arithmetic/node"),H.$require("bcdice/enum"),H.$require("bcdice/game_system/sword_world/rating_lexer"),H.$require("bcdice/game_system/sword_world/rating_parsed"),H.$require("bcdice/game_system/sword_world/rating_options"),g=A,$=C=[Y(A[0],"BCDice")].concat(g),L=[Y(C[0],"GameSystem")].concat($),N=e.$r(L),D=L,b=[G(L[0],N("Base"),"SwordWorld")].concat(D),s=e.$r(b),q=b,T=[d=G(b[0],I(s("Racc"),"Parser"),"RatingParser")].concat(q),t=e.$r(T),(S=d.$$prototype).lexer=S.round_type=S.version=i,o(d,"$initialize",function X(K){var k,Z,W=this;return X.$$p=null,null==(k=(K=_(K)).$$smap.version)&&(k="v1_0"),null==(Z=K.$$smap.round_type)&&(Z=I(t("RoundType"),"CEIL")),B(W,P(W,"initialize",X,!1,!0),"initialize",[],null),W.version=k,W.round_type=Z},-1),o(d,"$set_debug",function(){return this.yydebug=!0,this}),o(d,"$parse",function(K){try{return this.lexer=t("RatingLexer").$new(K),this.$do_parse()}catch(Z){if(!e.rescue(Z,[t("ParseError"),t("ZeroDivisionError")]))throw Z;try{return i}finally{e.pop_exception()}}}),d.$private(),o(d,"$parsed",function(K,k,Z){try{return F("eval_return"),M(t("RatingParsed").$new(K,k),"tap",[],function J(U){var ne,ae,fe,de,me,ve,he,ye,pe,ge=null==J.$$s?this:J.$$s,be=i;return null==ge.round_type&&(ge.round_type=i),null==U&&(U=i),U["$kept_modify="](v(be=(ne=Z.$kept_modify())===i||null==ne?i:ne.$eval(ge.round_type))?be:0),U["$first_to="](v(be=Z.$first_to())?be:0),U["$first_modify="](v(be=Z.$first_modify())?be:0),U["$rateup="](v(be=(ae=Z.$rateup())===i||null==ae?i:ae.$eval(ge.round_type))?be:0),z(Z.$greatest_fortune()["$nil?"]())&&U["$greatest_fortune="](Z.$greatest_fortune()),U["$semi_fixed_val="](v(be=(fe=Z.$semi_fixed_val())===i||null==fe?i:fe.$clamp(1,6))?be:0),U["$tmp_fixed_val="](v(be=(de=Z.$tmp_fixed_val())===i||null==de?i:de.$clamp(1,6))?be:0),U["$modifier_after_half="]((me=Z.$modifier_after_half())===i||null==me?i:me.$eval(ge.round_type)),U["$modifier_after_one_and_a_half="]((ve=Z.$modifier_after_one_and_a_half())===i||null==ve?i:ve.$eval(ge.round_type)),he=[v((pe=Z.$critical(),ye=pe===i||null==pe?i:pe.$eval(ge.round_type),be=ye===i||null==ye?i:ye.$clamp(0,13)))?be:v(U.$half())||v(U.$one_and_a_half())?13:10],M(U,"critical=",he),he[he.length-1]},{$$s:this})}catch(J){if(J===e.t_eval_return)return J.$v;throw J}}),o(d,"$next_token",function(){return this.lexer.$next_token()}),m=e.large_array_unpack("18,16,17,19,6,20,21,23,24,64,65,27,28,13,66,14,22,15,18,16,17,19,5,20,21,23,24,5,9,3,4,13,10,14,22,15,18,16,17,19,11,20,21,23,24,34,5,34,40,13,42,14,22,15,30,31,30,31,33,34,33,34,62,63,62,63,34,43,30,31,30,31,33,34,33,30,31,44,34,33,34,52,30,31,57,34,33,30,31,30,31,33,34,33,30,31,58,34,33,34,60,30,31,61,34,33,30,31,30,31,33,34,33,30,31,,34,33,34,,30,31,,34,33,30,31,30,31,33,36,33,30,31,62,63,33,62,63,37,38,62,63,62,63,62,63"),a=e.large_array_unpack("7,7,7,7,1,7,7,7,7,55,55,12,12,7,55,7,7,7,25,25,25,25,3,25,25,25,25,0,4,0,0,25,5,25,25,25,49,49,49,49,6,49,49,49,49,13,9,14,17,49,19,49,49,49,13,13,14,14,13,16,14,18,46,46,48,48,22,20,16,16,18,18,16,23,18,22,22,21,24,22,27,29,23,23,37,28,23,24,24,27,27,24,30,27,28,28,38,31,28,33,43,30,30,44,40,30,31,31,33,33,31,62,33,40,40,,63,40,64,,62,62,,65,62,63,63,64,64,63,15,64,65,65,50,50,65,51,51,15,15,56,56,69,69,70,70"),O=e.large_array_unpack("24,4,,19,23,30,40,-4,,43,,,0,43,45,128,57,43,59,42,59,69,64,71,76,14,,78,83,63,90,95,,97,,,,82,94,,102,,,98,101,,49,,51,32,121,124,,,,-2,128,,,,,,109,114,116,121,,,,130,132"),re=e.large_array_unpack("-36,-36,-5,-36,-36,-36,-36,-1,-5,-36,-4,71,-6,-36,-36,-36,-12,-36,-36,-36,-36,-36,-36,-36,-36,-2,-5,-36,-36,-36,-36,-36,-33,-36,-35,-8,-9,-36,-36,-13,-14,-16,-17,-36,-36,-20,-21,-30,-22,-3,-23,-24,-7,-31,-32,-36,-27,-10,-11,-15,-18,-19,-36,-36,-36,-36,-34,-28,-29,-25,-26"),ee=e.large_array_unpack("29,35,7,39,1,41,46,48,25,45,50,51,2,55,,8,56,53,54,,,26,,,,,49,59,,,,,,,,,,,,,,,,,,,,69,70,67,68"),ie=e.large_array_unpack("5,5,3,5,1,5,6,6,3,5,6,6,2,7,,2,6,5,5,,,2,,,,,3,5,,,,,,,,,,,,,,,,,,,,6,6,5,5"),ce=[i,4,12,0,i,-13,-17,-20,i],oe=[i,i,i,i,12,47,i,i,32],ue=e.large_array_unpack("0,0,racc_error,2,23,_reduce_1,3,23,_reduce_2,4,23,_reduce_3,2,24,_reduce_4,0,25,_reduce_5,2,25,_reduce_6,4,25,_reduce_7,3,25,_reduce_8,3,25,_reduce_9,4,25,_reduce_10,4,25,_reduce_11,2,25,_reduce_12,3,25,_reduce_13,3,25,_reduce_14,4,25,_reduce_15,3,25,_reduce_16,3,25,_reduce_17,4,25,_reduce_18,4,25,_reduce_19,3,25,_reduce_20,2,26,_reduce_21,2,26,_reduce_22,3,26,_reduce_23,3,26,_reduce_24,3,29,_reduce_25,3,29,_reduce_26,1,29,_reduce_none,3,28,_reduce_28,3,28,_reduce_29,1,28,_reduce_none,2,27,_reduce_31,2,27,_reduce_32,1,27,_reduce_none,3,30,_reduce_34,1,30,_reduce_35"),$e=E(!1,0,"error",1,"NUMBER",2,"K",3,"R",4,"H",5,"O",6,"G",7,"F",8,"S",9,"T",10,"PLUS",11,"MINUS",12,"ASTERISK",13,"SLASH",14,"PARENL",15,"PARENR",16,"BRACKETL",17,"BRACKETR",18,"AT",19,"SHARP",20,"DOLLAR",21),Q(T[0],"Racc_arg",[m,a,re,O,ee,ie,oe,ce,22,ue,$e,71,36,!0]),v(t("Ractor","skip_raise")?"constant":i)&&t("Ractor").$make_shareable(t("Racc_arg")),Q(T[0],"Racc_token_to_s_table",["$end","error","NUMBER","K","R","H","O","G","F","S","T","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","BRACKETL","BRACKETR","AT","SHARP","DOLLAR","$start","expr","rate","option","modifier","unary","mul","add","term"]),v(t("Ractor","skip_raise")?"constant":i)&&t("Ractor").$make_shareable(t("Racc_token_to_s_table")),Q(T[0],"Racc_debug_parser",!1),o(d,"$_reduce_1",function(K,k,Z){try{F("eval_return");var W,ne,de,ae=i,fe=i;return ne=null==(W=V(K))[0]?i:W[0],fe=v(de=(ae=null==W[1]?i:W[1]).$modifier())?de:I(I(t("Arithmetic"),"Node"),"Number").$new(0),this.$parsed(ne,fe.$eval(this.round_type),ae)}catch(me){if(me===e.t_eval_return)return me.$v;throw me}}),o(d,"$_reduce_2",function(K,k,Z){try{F("eval_return");var W,ae,de,U=this,fe=i,me=i;return ae=null==(W=V(K))[1]?i:W[1],v((fe=null==W[2]?i:W[2]).$modifier_after_one_and_a_half())&&U.$raise(t("ParseError")),v(fe.$modifier_after_half())||fe["$modifier_after_half="](I(I(t("Arithmetic"),"Node"),"Number").$new(0)),me=v(de=fe.$modifier())?de:I(I(t("Arithmetic"),"Node"),"Number").$new(0),U.$parsed(ae,me.$eval(U.round_type),fe)}catch(ve){if(ve===e.t_eval_return)return ve.$v;throw ve}}),o(d,"$_reduce_3",function(K,k,Z){try{F("eval_return");var W,ae,de,U=this,fe=i,me=i;return ae=null==(W=V(K))[2]?i:W[2],v((fe=null==W[3]?i:W[3]).$modifier_after_half())&&U.$raise(t("ParseError")),v(fe.$modifier_after_one_and_a_half())||fe["$modifier_after_one_and_a_half="](I(I(t("Arithmetic"),"Node"),"Number").$new(0)),me=v(de=fe.$modifier())?de:I(I(t("Arithmetic"),"Node"),"Number").$new(0),U.$parsed(ae,me.$eval(U.round_type),fe)}catch(ve){if(ve===e.t_eval_return)return ve.$v;throw ve}}),o(d,"$_reduce_4",function(K,k,Z){return K["$[]"](1).$to_i()}),o(d,"$_reduce_5",function(K,k,Z){return t("RatingOptions").$new()}),o(d,"$_reduce_6",function(K,k,Z){var w,ne,U=i;return ne=null==(w=V(K))[1]?i:w[1],v((U=null==w[0]?i:w[0]).$modifier()["$nil?"]())||this.$raise(t("ParseError")),U["$modifier="](ne),U}),o(d,"$_reduce_7",function(K,k,Z){var w,ae,U=i;return ae=null==(w=V(K))[2]?i:w[2],v((U=null==w[0]?i:w[0]).$critical()["$nil?"]())||this.$raise(t("ParseError")),U["$critical="](ae),U}),o(d,"$_reduce_8",function(K,k,Z){var w,ae,U=i;return ae=null==(w=V(K))[2]?i:w[2],v((U=null==w[0]?i:w[0]).$critical()["$nil?"]())||this.$raise(t("ParseError")),U["$critical="](ae),U}),o(d,"$_reduce_9",function(K,k,Z){var w,U=i,ae=i;return ae=null==(w=V(K))[2]?i:w[2],v((U=null==w[0]?i:w[0])["$settable_first_roll_adjust_option?"]())||this.$raise(t("ParseError")),U["$first_to="](ae.$to_i()),U}),o(d,"$_reduce_10",function(K,k,Z){var w,U=i,ae=i;return ae=null==(w=V(K))[3]?i:w[3],v((U=null==w[0]?i:w[0])["$settable_first_roll_adjust_option?"]())||this.$raise(t("ParseError")),U["$first_modify="](ae.$to_i()),U}),o(d,"$_reduce_11",function(K,k,Z){var w,U=i,ae=i;return ae=null==(w=V(K))[3]?i:w[3],v((U=null==w[0]?i:w[0])["$settable_first_roll_adjust_option?"]())||this.$raise(t("ParseError")),U["$first_modify="](ae.$to_i()["$-@"]()),U}),o(d,"$_reduce_12",function(K,k,Z){var w,U=i;return w=V(K),v((U=null==w[0]?i:w[0]).$modifier_after_half()["$nil?"]())||this.$raise(t("ParseError")),U["$modifier_after_half="](I(I(t("Arithmetic"),"Node"),"Number").$new(0)),U}),o(d,"$_reduce_13",function(K,k,Z){var w,ae,U=i;return ae=null==(w=V(K))[2]?i:w[2],v((U=null==w[0]?i:w[0]).$modifier_after_half()["$nil?"]())||this.$raise(t("ParseError")),U["$modifier_after_half="](ae),U}),o(d,"$_reduce_14",function(K,k,Z){var w,U=i;return w=V(K),v((U=null==w[0]?i:w[0]).$modifier_after_one_and_a_half())&&this.$raise(t("ParseError")),U["$modifier_after_one_and_a_half="](I(I(t("Arithmetic"),"Node"),"Number").$new(0)),U}),o(d,"$_reduce_15",function(K,k,Z){var w,ae,U=i;return ae=null==(w=V(K))[3]?i:w[3],v((U=null==w[0]?i:w[0]).$modifier_after_one_and_a_half())&&this.$raise(t("ParseError")),U["$modifier_after_one_and_a_half="](ae),U}),o(d,"$_reduce_16",function(K,k,Z){var w,ae,U=i;return U=null==(w=V(K))[0]?i:w[0],ae=null==w[2]?i:w[2],v(["v2_5","v2_0"]["$include?"](this.version))&&v(U.$rateup()["$nil?"]())||this.$raise(t("ParseError")),U["$rateup="](ae),U}),o(d,"$_reduce_17",function(K,k,Z){var w,U=i;return U=null==(w=V(K))[0]?i:w[0],v(["v2_5","v2_0"]["$include?"](this.version))&&v(U["$settable_non_2d_roll_option?"]())||this.$raise(t("ParseError")),U["$greatest_fortune="](!0),U}),o(d,"$_reduce_18",function(K,k,Z){var w,U=i,ae=i;return U=null==(w=V(K))[0]?i:w[0],ae=null==w[3]?i:w[3],v(["v2_5","v2_0"]["$include?"](this.version))&&v(U["$settable_non_2d_roll_option?"]())||this.$raise(t("ParseError")),U["$semi_fixed_val="](ae.$to_i()),U}),o(d,"$_reduce_19",function(K,k,Z){var w,U=i,ae=i;return U=null==(w=V(K))[0]?i:w[0],ae=null==w[3]?i:w[3],v(["v2_5","v2_0"]["$include?"](this.version))&&v(U["$settable_non_2d_roll_option?"]())||this.$raise(t("ParseError")),U["$tmp_fixed_val="](ae.$to_i()),U}),o(d,"$_reduce_20",function(K,k,Z){var w,ae,U=i;return U=null==(w=V(K))[0]?i:w[0],ae=null==w[2]?i:w[2],j(this.version,"v2_5")&&v(U.$kept_modify()["$nil?"]())||this.$raise(t("ParseError")),U["$kept_modify="](ae),U}),o(d,"$_reduce_21",function(K,k,Z){return K["$[]"](1)}),o(d,"$_reduce_22",function(K,k,Z){return I(I(t("Arithmetic"),"Node"),"Negative").$new(K["$[]"](1))}),o(d,"$_reduce_23",function(K,k,Z){return I(I(t("Arithmetic"),"Node"),"BinaryOp").$new(K["$[]"](0),"+",K["$[]"](2))}),o(d,"$_reduce_24",function(K,k,Z){return I(I(t("Arithmetic"),"Node"),"BinaryOp").$new(K["$[]"](0),"-",K["$[]"](2))}),o(d,"$_reduce_25",function(K,k,Z){return I(I(t("Arithmetic"),"Node"),"BinaryOp").$new(K["$[]"](0),"+",K["$[]"](2))}),o(d,"$_reduce_26",function(K,k,Z){return I(I(t("Arithmetic"),"Node"),"BinaryOp").$new(K["$[]"](0),"-",K["$[]"](2))}),o(d,"$_reduce_28",function(K,k,Z){return I(I(t("Arithmetic"),"Node"),"BinaryOp").$new(K["$[]"](0),"*",K["$[]"](2))}),o(d,"$_reduce_29",function(K,k,Z){return I(I(t("Arithmetic"),"Node"),"DivideWithGameSystemDefault").$new(K["$[]"](0),K["$[]"](2))}),o(d,"$_reduce_31",function(K,k,Z){return K["$[]"](1)}),o(d,"$_reduce_32",function(K,k,Z){return I(I(t("Arithmetic"),"Node"),"Negative").$new(K["$[]"](1))}),o(d,"$_reduce_34",function(K,k,Z){return K["$[]"](1)}),o(d,"$_reduce_35",function(K,k,Z){return I(I(t("Arithmetic"),"Node"),"Number").$new(K["$[]"](0))}),o(d,"$_reduce_none",function(K,k,Z){return K["$[]"](0)})},Opal.modules["bcdice/game_system/SwordWorld"]=function(e){var L,D,q,d,h,n,T,b,s,R,Y=e.module,G=e.klass,_=e.const_set,B=e.send2,P=e.find_super,o=e.def,M=e.truthy,v=e.rb_ge,z=e.rb_le,F=e.eqeq,E=e.neqeq,Q=e.rb_minus,V=e.rb_gt,j=e.hash2,H=e.send,A=e.to_ary,i=e.rb_plus,I=e.rb_lt,c=e.rb_times,g=e.thrower,u=e.rb_divide,C=e.top,r=[],$=e.nil;return C.$require("bcdice/base"),C.$require("bcdice/game_system/sword_world/rating_parser"),L=r,D=R=[Y(r[0],"BCDice")].concat(L),b=[Y(R[0],"GameSystem")].concat(D),s=e.$r(b),q=b,h=[d=G(b[0],s("Base"),"SwordWorld")].concat(q),n=e.$r(h),(T=d.$$prototype).rating_table=T.randomizer=$,_(h[0],"ID","SwordWorld"),_(h[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c9RPG"),_(h[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u3068"),_(h[0],"HELP_MESSAGE","\u30fbSW\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx[c]+m$f) (x:\u30ad\u30fc, c:\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024, m:\u30dc\u30fc\u30ca\u30b9, f:\u51fa\u76ee\u4fee\u6b63)\n"),d.$register_prefix("H?K"),o(d,"$initialize",function t(m){var O=this;return t.$$p=null,B(O,P(O,"initialize",t,!1,!0),"initialize",[m],null),O.rating_table=0}),o(d,"$result_2d6",function(m,a,O,re,ee){return M(v(a,12))?n("Result").$critical(this.$translate("SwordWorld.critical")):M(z(a,2))?n("Result").$fumble(this.$translate("SwordWorld.fumble")):E(re,">=")||F(ee,"?")?$:M(v(m,ee))?n("Result").$success(this.$translate("success")):n("Result").$failure(this.$translate("failure"))}),o(d,"$eval_game_system_specific_command",function(m){return this.$rating(m)}),d.$private(),o(d,"$rating_parser",function(){return n("RatingParser").$new()}),o(d,"$rating",function(m){var a,O,re=this,ee=$,ie=$,ce=$,oe=$,ue=$,_e=$,le=$,$e=$,se=$,te=$,S=$,X=$,K=$,k=$,w=$,W=$;return re.$debug("rating string",m),ee=re.$rating_parser().$parse(m),M(ee)?(ie=re.$getSW2_0_RatingTable(),ce=Q(ie.$length(),1),re.$debug("keyMax",ce),M(V(ee.$rate(),ce))?n("Result").$new(re.$translate("SwordWorld.keynumber_exceeds",j(["keyMax"],{keyMax:ce}))):M(ee["$infinite_roll?"]())?n("Result").$new(re.$translate("SwordWorld.infinite_critical",j(["min_critical"],{min_critical:ee.$min_critical()}))):(oe=re.$getNewRates(ie),ue=ee+" \uff1e ",_e=[],le=[],$e=[],se=0,te=0,S=0,X=0,K=ee.$first_to(),k=ee.$first_modify(),function(){try{var J=g("break");return H(re,"loop",[],function U(){var ne,ae,ve,he,fe=null==U.$$s?this:U.$$s,de=$,me=$;if(ae=fe.$rollDice(ee,X),me=null==(ne=A(ae))[1]?$:ne[1],se=de=null==ne[0]?$:ne[0],E(K,0)?(se=de=K,K=0):E(k,0)&&(se=i(se,k),k=0),M(z(de,2))&&(_e["$<<"](de.$to_s()),le["$<<"](me.$to_s()),$e["$<<"]("**"),X=i(X,1),J.$throw()),E(ee.$kept_modify(),0)&&E(se,2)&&(se=i(se,ee.$kept_modify())),M(I(se,2))&&(se=2),M(V(se,12))&&(se=12),ve=[i(ee.$rate(),c(X,ee.$rateup())),ce].$min(),fe.$debug("currentKey",ve),he=oe["$[]"](se)["$[]"](ve),fe.$debug("rateValue",he),S=i(S,he),te=i(te,se),_e["$<<"](se.$to_s()),le["$<<"](me.$to_s()),$e["$<<"](M(V(se,2))?he:"**"),X=i(X,1),M(v(se,ee.$critical())))return $;J.$throw()},{$$s:re})}catch(U){if(U===J)return U.$v;throw U}}(),O=re.$getResultText(S,ee,le,_e,$e,te,X),a=A(O),w=null==a[1]?$:a[1],W=null==a[2]?$:a[2],ue=i(ue,null==a[0]?$:a[0]),H(n("Result").$new(),"tap",[],function(U){var ne;return null==U&&(U=$),U["$text="](ue),U["$critical="](w),H(U,"fumble=",ne=[W]),ne[ne.length-1]}))):(re.$debug("not matched"),"1")}),o(d,"$getSW2_0_RatingTable",function(){return["*,0,0,0,1,2,2,3,3,4,4","*,0,0,0,1,2,3,3,3,4,4","*,0,0,0,1,2,3,4,4,4,4","*,0,0,1,1,2,3,4,4,4,5","*,0,0,1,2,2,3,4,4,5,5","*,0,1,1,2,2,3,4,5,5,5","*,0,1,1,2,3,3,4,5,5,5","*,0,1,1,2,3,4,4,5,5,6","*,0,1,2,2,3,4,4,5,6,6","*,0,1,2,3,3,4,4,5,6,7","*,1,1,2,3,3,4,5,5,6,7","*,1,2,2,3,3,4,5,6,6,7","*,1,2,2,3,4,4,5,6,6,7","*,1,2,3,3,4,4,5,6,7,7","*,1,2,3,4,4,4,5,6,7,8","*,1,2,3,4,4,5,5,6,7,8","*,1,2,3,4,4,5,6,7,7,8","*,1,2,3,4,5,5,6,7,7,8","*,1,2,3,4,5,6,6,7,7,8","*,1,2,3,4,5,6,7,7,8,9","*,1,2,3,4,5,6,7,8,9,10","*,1,2,3,4,6,6,7,8,9,10","*,1,2,3,5,6,6,7,8,9,10","*,2,2,3,5,6,7,7,8,9,10","*,2,3,4,5,6,7,7,8,9,10","*,2,3,4,5,6,7,8,8,9,10","*,2,3,4,5,6,8,8,9,9,10","*,2,3,4,6,6,8,8,9,9,10","*,2,3,4,6,6,8,9,9,10,10","*,2,3,4,6,7,8,9,9,10,10","*,2,4,4,6,7,8,9,10,10,10","*,2,4,5,6,7,8,9,10,10,11","*,3,4,5,6,7,8,10,10,10,11","*,3,4,5,6,8,8,10,10,10,11","*,3,4,5,6,8,9,10,10,11,11","*,3,4,5,7,8,9,10,10,11,12","*,3,5,5,7,8,9,10,11,11,12","*,3,5,6,7,8,9,10,11,12,12","*,3,5,6,7,8,10,10,11,12,13","*,4,5,6,7,8,10,11,11,12,13","*,4,5,6,7,9,10,11,11,12,13","*,4,6,6,7,9,10,11,12,12,13","*,4,6,7,7,9,10,11,12,13,13","*,4,6,7,8,9,10,11,12,13,14","*,4,6,7,8,10,10,11,12,13,14","*,4,6,7,9,10,10,11,12,13,14","*,4,6,7,9,10,10,12,13,13,14","*,4,6,7,9,10,11,12,13,13,15","*,4,6,7,9,10,12,12,13,13,15","*,4,6,7,10,10,12,12,13,14,15","*,4,6,8,10,10,12,12,13,15,15","*,5,7,8,10,10,12,12,13,15,15","*,5,7,8,10,11,12,12,13,15,15","*,5,7,9,10,11,12,12,14,15,15","*,5,7,9,10,11,12,13,14,15,16","*,5,7,10,10,11,12,13,14,16,16","*,5,8,10,10,11,12,13,15,16,16","*,5,8,10,11,11,12,13,15,16,17","*,5,8,10,11,12,12,13,15,16,17","*,5,9,10,11,12,12,14,15,16,17","*,5,9,10,11,12,13,14,15,16,18","*,5,9,10,11,12,13,14,16,17,18","*,5,9,10,11,13,13,14,16,17,18","*,5,9,10,11,13,13,15,17,17,18","*,5,9,10,11,13,14,15,17,17,18","*,5,9,10,12,13,14,15,17,18,18","*,5,9,10,12,13,15,15,17,18,19","*,5,9,10,12,13,15,16,17,19,19","*,5,9,10,12,14,15,16,17,19,19","*,5,9,10,12,14,16,16,17,19,19","*,5,9,10,12,14,16,17,18,19,19","*,5,9,10,13,14,16,17,18,19,20","*,5,9,10,13,15,16,17,18,19,20","*,5,9,10,13,15,16,17,19,20,21","*,6,9,10,13,15,16,18,19,20,21","*,6,9,10,13,16,16,18,19,20,21","*,6,9,10,13,16,17,18,19,20,21","*,6,9,10,13,16,17,18,20,21,22","*,6,9,10,13,16,17,19,20,22,23","*,6,9,10,13,16,18,19,20,22,23","*,6,9,10,13,16,18,20,21,22,23","*,6,9,10,13,17,18,20,21,22,23","*,6,9,10,14,17,18,20,21,22,24","*,6,9,11,14,17,18,20,21,23,24","*,6,9,11,14,17,19,20,21,23,24","*,6,9,11,14,17,19,21,22,23,24","*,7,10,11,14,17,19,21,22,23,25","*,7,10,12,14,17,19,21,22,24,25","*,7,10,12,14,18,19,21,22,24,25","*,7,10,12,15,18,19,21,22,24,26","*,7,10,12,15,18,19,21,23,25,26","*,7,11,13,15,18,19,21,23,25,26","*,7,11,13,15,18,20,21,23,25,27","*,8,11,13,15,18,20,22,23,25,27","*,8,11,13,16,18,20,22,23,25,28","*,8,11,14,16,18,20,22,23,26,28","*,8,11,14,16,19,20,22,23,26,28","*,8,12,14,16,19,20,22,24,26,28","*,8,12,15,16,19,20,22,24,27,28","*,8,12,15,17,19,20,22,24,27,29","*,8,12,15,18,19,20,22,24,27,30"]}),o(d,"$getNewRates",function(m){var a,O,ee=$,ie=$,ce=$,oe=$,ue=$,_e=$,le=$,$e=$,se=$,te=$,S=$;return ee=[],ie=[],ce=[],oe=[],ue=[],_e=[],le=[],$e=[],se=[],te=[],S=[],H(m,"each",[],function(k){var Z=$;return null==k&&(k=$),Z=k.$split(/,/),S.$push(0),ee.$push(Z["$[]"](1).$to_i()),ie.$push(Z["$[]"](2).$to_i()),ce.$push(Z["$[]"](3).$to_i()),oe.$push(Z["$[]"](4).$to_i()),ue.$push(Z["$[]"](5).$to_i()),_e.$push(Z["$[]"](6).$to_i()),le.$push(Z["$[]"](7).$to_i()),$e.$push(Z["$[]"](8).$to_i()),se.$push(Z["$[]"](9).$to_i()),te.$push(Z["$[]"](10).$to_i())}),F(this.rating_table,1)&&te["$[]="](31,(a=[32,(O=[33,10],H(te,"[]=",O),O[O.length-1])],H(te,"[]=",a),a[a.length-1])),[S,S,S,ee,ie,ce,oe,ue,_e,le,$e,se,te]}),o(d,"$rollDice",function(m,a){var re=$;return[(re=this.randomizer.$roll_barabara(2,6)).$sum(),re.$join(",")]}),o(d,"$getResultText",function(m,a,O,re,ee,ie,ce){var ue=$,_e=$,le=$,$e=$,se=$;return(ue=[]).$push("2D:["+O.$join(" ")+"]="+re.$join(",")),M(z(ie,2))?(ue.$push(ee.$join(",")),ue.$push(this.$translate("SwordWorld.fumble")),[ue.$join(" \uff1e "),!1,!0]):(M(V(ee.$size(),1))||E(a.$modifier(),0)?(_e=i(ee.$join(","),n("Format").$modifier(a.$modifier())),M(a.$half())?(_e="("+_e+")/2",E(a.$modifier_after_half(),0)&&(_e=i(_e,n("Format").$modifier(a.$modifier_after_half())))):M(a.$one_and_a_half())&&(_e="("+_e+")*1.5",E(a.$modifier_after_one_and_a_half(),0)&&(_e=i(_e,n("Format").$modifier(a.$modifier_after_one_and_a_half())))),ue.$push(_e)):M(a.$half())?(_e=ee.$first()+"/2",E(a.$modifier_after_half(),0)&&(_e=i(_e,n("Format").$modifier(a.$modifier_after_half()))),ue.$push(_e)):M(a.$one_and_a_half())&&(_e=ee.$first()+"*1.5",E(a.$modifier_after_one_and_a_half(),0)&&(_e=i(_e,n("Format").$modifier(a.$modifier_after_one_and_a_half()))),ue.$push(_e)),M(V(ce,1))&&(le=this.$translate("SwordWorld.round_text",j(["reroll_count"],{reroll_count:Q(ce,1)})),ue.$push(le)),$e=i(m,a.$modifier()),M(a.$half())?($e=u($e,2).$ceil(),E(a.$modifier_after_half(),0)&&($e=i($e,a.$modifier_after_half()))):M(a.$one_and_a_half())&&($e=c($e,1.5).$ceil(),E(a.$modifier_after_one_and_a_half(),0)&&($e=i($e,a.$modifier_after_one_and_a_half()))),se=$e.$to_s(),ue.$push(se),[ue.$join(" \uff1e "),V(ce,1),!1])})},Opal.modules["bcdice/game_system/sword_world/transcendent_test"]=function(e){var j,I,$,p,D,x,b,s,L,g,u,A,Y=e.module,G=e.klass,_=e.def,B=e.truthy,P=e.rb_lt,o=e.hash2,M=e.rb_ge,v=e.rb_plus,z=e.send,F=e.top,E=[],Q=e.nil;return F.$require("bcdice/result"),F.$require("bcdice/translate"),j=E,I=A=[Y(E[0],"BCDice")].concat(j),g=[Y(A[0],"GameSystem")].concat(I),u=e.$r(g),$=g,p=L=[G(g[0],u("SwordWorld"),"SwordWorld2_0")].concat($),x=[D=G(L[0],null,"TranscendentTest")].concat(p),b=e.$r(x),(s=D.$$prototype).modifier=s.critical_value=s.expression=s.modifier_str=s.target=s.cmp_op=Q,D.$include(b("Translate")),_(D,"$initialize",function(l,q,d,h,n){var T=this;return T.critical_value=l,T.modifier=q,T.cmp_op=d,T.target=h,T.locale=n,T.modifier_str=b("Format").$modifier(T.modifier),T.expression=T.$node_expression()}),_(D,"$execute",function(l){var n,T,t,q=this,d=Q,h=Q,m=Q,a=Q,O=Q,re=Q;if(B(P(q.critical_value,3)))return q.$translate("SwordWorld2_0.transcendent_critical_too_small",o(["expression"],{expression:q.expression}));if(h=[d=l.$roll_barabara(2,6)],n=d["$=="]([1,1]),T=d["$=="]([6,6]),!B(n))for(;B(M(q.$sum_of_dice(h.$last()),q.critical_value));)h.$push(l.$roll_barabara(2,6));return t=q.$sum_of_dice(h),m=v(t,q.modifier),a=q.$result_status(m,h.$length(),n,T),O=o(["success","failure","super_success","critical","fumble"],{success:q.$translate("success"),failure:q.$translate("failure"),super_success:q.$translate("SwordWorld2_0.super_success"),critical:q.$translate("SwordWorld.critical"),fumble:q.$translate("SwordWorld.fumble")}).$freeze()["$[]"](a),re=["("+q.expression+")",""+q.$dice_str(h,t)+q.modifier_str,m,O].$compact(),z(b("Result").$new(),"tap",[],function(ie){var ce;return null==ie&&(ie=Q),ie["$text="](re.$join(" \uff1e ")),ie["$fumble="](a["$=="]("fumble")),ie["$critical="](a["$=="]("critical")),ie["$success="](["success","super_success","critical"]["$include?"](a)),ce=[["failure","fumble"]["$include?"](a)],z(ie,"failure=",ce),ce[ce.length-1]})}),D.$private(),_(D,"$node_expression",function(){var q,l=this;return q="2D6@"+l.critical_value+l.modifier_str,B(l.target)?""+q+l.cmp_op+l.target:q}),_(D,"$sum_of_dice",function(l){return l.$flatten().$sum()}),_(D,"$dice_str",function(l,q){return""+q+z(l,"map",[],function(n){return null==n&&(n=Q),"["+n.$join(",")+"]"}).$join()}),_(D,"$result_status",function(l,q,d,h){var n=this;return B(n.target)?B(d)?"fumble":B(h)?"critical":B(l.$send(n.cmp_op,n.target))?B(M(q,2))&&B(M(l,41))?"super_success":"success":"failure":"no_target"})},Opal.modules["bcdice/game_system/SwordWorld2_0"]=function(e){var u,y,x,b,s,f,l,N,R,r,Y=e.module,G=e.klass,_=e.const_set,B=e.send2,P=e.find_super,o=e.def,M=e.eqeqeq,v=e.truthy,z=e.hash2,F=e.rb_gt,E=e.rb_plus,Q=e.eqeq,V=e.rb_times,j=e.send,H=e.neqeq,A=e.top,i=[],I=e.nil,c=e.$$$;return A.$require("bcdice/arithmetic_evaluator"),A.$require("bcdice/game_system/SwordWorld"),A.$require("bcdice/game_system/sword_world/transcendent_test"),u=i,y=r=[Y(i[0],"BCDice")].concat(u),N=[Y(r[0],"GameSystem")].concat(y),R=e.$r(N),x=N,s=[b=G(N[0],R("SwordWorld"),"SwordWorld2_0")].concat(x),f=e.$r(s),(l=b.$$prototype).locale=l.randomizer=I,_(s[0],"ID","SwordWorld2.0"),_(s[0],"NAME","\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.0"),_(s[0],"SORT_KEY","\u305d\u304a\u3068\u308f\u3042\u308b\u30682.0"),_(s[0],"HELP_MESSAGE",'\u81ea\u52d5\u7684\u6210\u529f\u3001\u6210\u529f\u3001\u5931\u6557\u3001\u81ea\u52d5\u7684\u5931\u6557\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3000(Kx)\n\u3000"K\u30ad\u30fc\u30ca\u30f3\u30d0\u30fc+\u30dc\u30fc\u30ca\u30b9"\u306e\u5f62\u3067\u8a18\u5165\u3057\u307e\u3059\u3002\n\u3000\u30dc\u30fc\u30ca\u30b9\u306e\u90e8\u5206\u306b\u300cK20+K30\u300d\u306e\u3088\u3046\u306b\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u53d6\u308b\u3053\u3068\u306f\u51fa\u6765\u307e\u305b\u3093\u3002\n\u3000\u307e\u305f\u3001\u30dc\u30fc\u30ca\u30b9\u306f\u8907\u6570\u53d6\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3082\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3068\u540c\u69d8\u306b\u3001\u4ed6\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u96a0\u308c\u3066\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2\n\n\u30fb\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306e\u8a2d\u5b9a\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u306f"[\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024]"\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3000\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u502410\u3068\u3057\u307e\u3059\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u51e6\u7406\u304c\u5fc5\u8981\u306a\u3044\u3068\u304d\u306f13\u306a\u3069\u3068\u3057\u3066\u304f\u3060\u3055\u3044\u3002(\u9632\u5fa1\u6642\u306a\u3069\u306e\u5bfe\u5fdc)\n\u3000\u307e\u305f\u30bf\u30a4\u30d7\u306e\u8efd\u6e1b\u5316\u306e\u305f\u3081\u306b\u672b\u5c3e\u306b\u300c@\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u300d\u3067\u3082\u51e6\u7406\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3000\u4f8b\uff09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9\n\n\u30fb\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u534a\u6e1b (HKx, KxH+N)\n\u3000\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u306e\u5148\u982d\u307e\u305f\u306f\u672b\u5c3e\u306b"H"\u3092\u3064\u3051\u308b\u3068\u3001\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u8868\u3092\u632f\u3063\u3066\u6700\u7d42\u7d50\u679c\u3092\u534a\u6e1b\u3055\u305b\u307e\u3059\u3002\n\u3000\u672b\u5c3e\u306b\u3064\u3051\u305f\u5834\u5408\u3001\u76f4\u5f8c\u306b\u4fee\u6b63\u3092\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u3001\u534a\u6e1b\u5f8c\u306e\u52a0\u6e1b\u7b97\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3000\u3053\u306e\u969b\u3001\u8907\u6570\u306e\u9805\u306b\u3088\u308b\u4fee\u6b63\u306b\u306f\u30ab\u30c3\u30b3\u3067\u56f2\u3046\u3053\u3068\u304c\u5fc5\u8981\u3067\u3059\uff08\u30ab\u30c3\u30b3\u304c\u306a\u3044\u3068\u30d1\u30fc\u30b9\u306b\u5931\u6557\u3057\u307e\u3059\uff09\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u3057\u3068\u6271\u308f\u308c\u307e\u3059\u3002\n\u3000\u4f8b\uff09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H(1+1)\n\n\u30fb\u30c0\u30a4\u30b9\u76ee\u306e\u4fee\u6b63\uff08\u904b\u547d\u5909\u8ee2\u3084\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u30ec\u30a4\u7528\uff09\n\u3000\u672b\u5c3e\u306b\u300c$\u4fee\u6b63\u5024\u300d\u3067\u30c0\u30a4\u30b9\u76ee\u306b\u4fee\u6b63\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\u3000$\uff0b\uff11\u3068\u4fee\u6b63\u8868\u8a18\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u306b\uff0b\u4fee\u6b63\u3001\uff04\uff19\u306e\u3088\u3046\u306b\u56fa\u5b9a\u5024\u306a\u3089\u30c0\u30a4\u30b9\u76ee\u3092\u305d\u306e\u51fa\u76ee\u306b\u5dee\u3057\u66ff\u3048\u3002\n\u3000\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3057\u305f\u5834\u5408\u3067\u3082\u56fa\u5b9a\u5024\u3084\u4fee\u6b63\u5024\u306e\u9069\u7528\u306f\u6700\u521d\u306e\u4e00\u56de\u3060\u3051\u3067\u3059\u3002\n\u3000\u4f8b\uff09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9\n\n\u30fb\u9996\u5207\u308a\u5200\u7528\u30ec\u30fc\u30c6\u30a3\u30f3\u30b0\u4e0a\u6607 r10\n\u3000\u4f8b\uff09K20r10\u3000K30+24@8R10\u3000K40+24@8$12r10\n\n\u30fb\u30b0\u30ec\u30a4\u30c6\u30b9\u30c8\u30d5\u30a9\u30fc\u30c1\u30e5\u30f3\u306f\u672b\u5c3e\u306b gf\n\u3000\u4f8b\uff09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r10gf\n\n\u30fb\u5a01\u529b\u8868\u30921d+sf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u3082\u7d99\u7d9a sf4\n\u3000\u4f8b\uff09k10sf4\u3000k0+5SF4@13\u3000k70+26sf3@9\n\n\u30fb\u5a01\u529b\u8868\u30921d+tf\u3067\u53c2\u7167 \u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5f8c\u306f2d\u3067\u53c2\u7167 tf3\n\u3000\u4f8b\uff09k10tf3\u3000k0+5TF4@13\u3000k70+26tf3@9\n\n\u30fb\u8d85\u8d8a\u5224\u5b9a\u7528\u306b2d6\u30ed\u30fc\u30eb\u306b 2D6@10 \u66f8\u5f0f\u3067\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u5024\u4ed8\u4e0e\u304c\u53ef\u80fd\u306b\u3002\n\u3000\u4f8b\uff092D6@10\u30002D6@10+11>=30\n\n\u30fb\u6210\u9577\u3000(Gr)\n\u3000\u672b\u5c3e\u306b\u6570\u5b57\u3092\u4ed8\u52a0\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u56de\u306e\u6210\u9577\u3092\u307e\u3068\u3081\u3066\u884c\u3048\u307e\u3059\u3002\n\u3000\u4f8b\uff09Gr3\n\n\u30fb\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3000(FT)\n\u3000\u9632\u5fa1\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30fb\u7d61\u307f\u52b9\u679c\u8868\u3000(TT)\n\u3000\u7d61\u307f\u52b9\u679c\u8868\u3092\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n'),b.$register_prefix("H?K","Gr","2D6?@\\d+","FT","TT"),o(b,"$initialize",function q(d){var n=this;return q.$$p=null,B(n,P(n,"initialize",q,!1,!0),"initialize",[d],null),n.rating_table=2}),o(b,"$eval_game_system_specific_command",function q(d){var T,n=this,m=I;return q.$$p=null,M(/^Gr(\d+)?/i,T=d)?v(d["$=~"](/^Gr(\d+)/i))?n.$growth(f("Regexp").$last_match(1).$to_i()):n.$growth():M(/^2D6?@\d+/i,T)?(m=c(f("Command"),"Parser").$new(/2D6?/i,z(["round_type"],{round_type:c(c(f("BCDice"),"RoundType"),"CEIL")})).$enable_critical().$restrict_cmp_op_to(I,">=",">").$parse(d),v(m)?f("TranscendentTest").$new(m.$critical(),m.$modify_number(),m.$cmp_op(),m.$target_number(),n.locale).$execute(n.randomizer):I):M("FT",T)?n.$get_fumble_table():M("TT",T)?n.$get_tangle_table():B(n,P(n,"eval_game_system_specific_command",q,!1,!0),"eval_game_system_specific_command",[d],null)}),o(b,"$rating_parser",function(){return f("RatingParser").$new(z(["version"],{version:"v2_0"}))}),o(b,"$rollDice",function q(d,h){var T=this,t=I;return q.$$p=null,v(F(d.$semi_fixed_val(),0))?(t=T.randomizer.$roll_once(6),[E(t,d.$semi_fixed_val()),t+","+d.$semi_fixed_val()]):Q(h,0)&&v(F(d.$tmp_fixed_val(),0))?(t=T.randomizer.$roll_once(6),[E(t,d.$tmp_fixed_val()),t+","+d.$tmp_fixed_val()]):v(d.$greatest_fortune())?(t=T.randomizer.$roll_once(6),[V(t,2),t+","+t]):B(T,P(T,"rollDice",q,!1,!0),"rollDice",[d,h],null)}),o(b,"$growth",function(d){return null==d&&(d=1),j(e.Range.$new(1,d,!1),"map",[],function n(){return(null==n.$$s?this:n.$$s).$growth_step()},{$$s:this}).$join(" | ")},-1),o(b,"$growth_step",function(){var d=this,h=I,n=I,T=I;return n=(h=c(f("DiceTable"),"Table").$from_i18n("SwordWorld2_0.GrowthTable",d.locale)).$roll(d.randomizer),T=h.$roll(d.randomizer),H(n.$value(),T.$value())?"["+n.$value()+","+T.$value()+"]->("+n.$body()+" or "+T.$body()+")":"["+n.$value()+","+T.$value()+"]->("+n.$body()+")"}),o(b,"$get_fumble_table",function(){return c(f("DiceTable"),"Table").$from_i18n("SwordWorld2_0.FumbleTable",this.locale).$roll(this.randomizer)}),o(b,"$get_tangle_table",function(){return c(f("DiceTable"),"Table").$from_i18n("SwordWorld2_0.TangleTable",this.locale).$roll(this.randomizer)})},Opal.queue(function(e){var E,H,u,C,r,i,I,V,Y=e.module,G=e.klass,_=e.const_set,B=e.send2,P=e.find_super,o=e.def,v=[];return e.top.$require("bcdice/game_system/SwordWorld2_0"),E=v,H=V=[Y(v[0],"BCDice")].concat(E),i=[Y(V[0],"GameSystem")].concat(H),I=e.$r(i),u=i,_((r=[C=G(i[0],I("SwordWorld2_0"),"SwordWorld2_0_SimplifiedChinese")].concat(u))[0],"ID","SwordWorld2.0:SimplifiedChinese"),_(r[0],"NAME","\u5251\u4e16\u754c2.0"),_(r[0],"SORT_KEY","\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c2.0"),_(r[0],"HELP_MESSAGE","\u81ea\u52a8\u6210\u529f\u3001\u6210\u529f\u3001\u5931\u8d25\u3001\u81ea\u52a8\u5931\u8d25\u4f1a\u81ea\u52a8\u5224\u5b9a\u3002\n\n  \u30fb\u5a01\u529b\u8868\u3000(Kx)\n  \u3000\u6307\u4ee4\u4e3a\u201cK\u5a01\u529b\u503c+\u52a0\u503c\u201d\u7684\u683c\u5f0f\u3002\n  \u3000\u52a0\u503c\u7684\u90e8\u5206\u4e0d\u80fd\u662f\u50cf\u201cK20+K30\u201d\u8fd9\u6837\u7684\u5a01\u529b\u7684\u5199\u6cd5\u3002\n  \u3000\u53e6\u5916\uff0c\u52a0\u503c\u53ef\u4ee5\u6709\u591a\u4e2a\u3002\n  \u3000\u5a01\u529b\u8868\u548c\u9ab0\u70b9\u4e00\u6837\uff0c\u53ef\u4ee5\u5bf9\u5176\u4ed6\u73a9\u5bb6\u9690\u85cf\u3002\n  \u3000\u4f8b\uff09K20\u3000\u3000\u3000K10+5\u3000\u3000\u3000k30\u3000\u3000\u3000k10+10\u3000\u3000\u3000Sk10-1\u3000\u3000\u3000k10+5+2\n\n  \u30fb\u66b4\u51fb\u503c\u7684\u8bbe\u5b9a\n  \u3000\u66b4\u51fb\u503c\u901a\u8fc7\u201c[\u66b4\u51fb\u503c]\u201d\u6307\u5b9a\u3002\n  \u3000\u6ca1\u6709\u6307\u5b9a\u66b4\u51fb\u503c\u65f6\u9ed8\u8ba4\u4e3a10\u3002\n  \u3000\u5982\u679c\u4e0d\u9700\u8981\u53d1\u751f\u66b4\u51fb\uff0c\u8bf7\u8bbe\u5b9a\u4e3a13\u3002\uff08\u4f8b\u5982\u9632\u5fa1\u65f6\uff09\n  \u3000\u53e6\u5916\u4e5f\u53ef\u5199\u6210\u7ed3\u5c3e\u7684\u201c@\u66b4\u51fb\u503c\u201d\u7684\u5f62\u5f0f\u3002\n  \u3000\u4f8b\uff09K20[10]\u3000\u3000\u3000K10+5[9]\u3000\u3000\u3000k30[10]\u3000\u3000\u3000k10[9]+10\u3000\u3000\u3000k10-5@9\n\n  \u30fb\u5a01\u529b\u8868\u7684\u51cf\u534a (HKx, KxH+N)\n  \u3000\u5728\u5a01\u529b\u8868\u5f00\u5934\u6216\u672b\u5c3e\u52a0\u4e0a\u201cH\u201d\uff0c\u9ab0\u5a01\u529b\u8868\u7684\u6700\u7ec8\u7ed3\u679c\u5c31\u4f1a\u51cf\u534a\u3002\n  \u3000H\u5199\u5728\u5a01\u529b\u8868\u672b\u5c3e\u7684\u60c5\u51b5\u4e0b\u53ef\u4ee5\u5728\u540e\u9762\u76f4\u63a5\u8ddf\u7740\u4fee\u6b63\uff0c\u4f1a\u5728\u51cf\u534a\u540e\u8fdb\u884c\u52a0\u51cf\u8fd0\u7b97\u3002\n  \u3000\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u591a\u4e2a\u4fee\u6b63\u9700\u8981\u7528\u62ec\u53f7\u62ec\u8d77\u6765\uff08\u5426\u5219\u4f1a\u89e3\u6790\u5931\u8d25\uff09\n  \u3000\u6ca1\u6709\u6307\u5b9a\u66b4\u51fb\u503c\u7684\u60c5\u51b5\u4e0b\uff0c\u5219\u89c6\u4e3a\u6ca1\u6709\u66b4\u51fb\u503c\u3002\n  \u3000\u4f8b\uff09HK20\u3000\u3000K20h\u3000\u3000HK10-5@9\u3000\u3000K10-5@9H\u3000\u3000K20gfH\u3000\u3000K20+8H+2\u3000\u3000K20+8H+(1+1)\n\n  \u30fb\u9ab0\u5b50\u51fa\u76ee\u4fee\u6b63\uff08\u547d\u8fd0\u53d8\u8f6c\u6216\u91cd\u51fb\u5149\u8f89\u7528\uff09\n  \u3000\u5728\u6307\u4ee4\u672b\u5c3e\u6dfb\u52a0\u201c$\u4fee\u6b63\u503c\u201d\u6765\u6539\u53d8\u9ab0\u5b50\u51fa\u76ee\u3002\n  \u3000\u53ef\u4ee5\u4f7f\u7528$+1\u7684\u683c\u5f0f\u5728\u9ab0\u5b50\u51fa\u76ee\u4e0a+\u4fee\u6b63\uff0c\u6216\u4f7f\u7528$9\u7684\u683c\u5f0f\u628a\u9ab0\u5b50\u51fa\u76ee\u66ff\u6362\u4e3a\u56fa\u5b9a\u503c\u3002\n  \u3000\u66b4\u51fb\u65f6\u53ea\u6709\u7b2c\u4e00\u6b21\u51fa\u76ee\u5e94\u7528\u8fd9\u4e2a\u4fee\u6b63\u3002\n  \u3000\u4f8b\uff09K20$+1\u3000\u3000\u3000K10+5$9\u3000\u3000\u3000k10-5@9$+2\u3000\u3000\u3000k10[9]+10$9\n\n  \u30fb\u5a01\u529b\u4e0a\u5347\uff08\u65a9\u9996\u5200\u7528\uff09 r10\n  \u3000r\u540e\u8ddf\u4e0a\u5347\u503c\uff0c\u66b4\u51fb\u540e\u5a01\u529b\u4e0a\u5347r\u540e\u6240\u586b\u5199\u7684\u4e0a\u5347\u503c\u70b9\n  \u3000\u4f8b\uff09K20r10\u3000K30+24@8R10\u3000K40+24@8$12r10\n\n  \u30fb\u6781\u9650\u547d\u8fd0\u5728\u672b\u5c3e\u52a0\u4e0a gf\n  \u3000\u4f8b\uff09K20gf\u3000K30+24@8GF\u3000K40+24@8$12r5gf\n\n  \u30fb\u5a01\u529b\u8868\u4f7f\u75281d+\u56fa\u5b9a\u503c\u5bf9\u5e94 \u66b4\u51fb\u540e\u4ecd\u7ee7\u7eed sf4\n  \u3000\u4f8b\uff09k10sf4\u3000k0+5sf4@13\u3000k70+26sf3@9\n\n  \u30fb\u5a01\u529b\u8868\u4f7f\u75281d+\u56fa\u5b9a\u503c\u5bf9\u5e94 \u66b4\u51fb\u540e\u53d8\u56de\u4f7f\u75282d\u5bf9\u5e94 tf3\n  \u3000\u4f8b\uff09k10tf3\u3000k0+5tf4@13\u3000k70+26tf3@9\n\n  \u30fb\u8d85\u8d8a\u5224\u5b9a\u75282d6\u53ef\u5199\u6210 2d6@10 \u7684\u683c\u5f0f\u52a0\u4e0a\u66b4\u51fb\u503c\u3002\n  \u3000\u4f8b\uff092D6@10\u30002D6@10+11>=30\n\n  \u30fb\u6210\u957f\u3000(Gr)\n  \u3000\u5728Gr\u540e\u9762\u52a0\u4e0a\u6570\u5b57\u53ef\u4ee5\u8fdb\u884c\u591a\u6b21\u6210\u957f\u3002\n  \u3000\u4f8b\uff09Gr3\n\n  \u30fb\u9632\u5fa1\u5927\u5931\u8d25\u8868\u3000(FT)\n  \u3000\u62bd\u53d6\u9632\u5fa1\u5927\u5931\u8d25\u8868\u3002\n\n  \u30fb\u7f20\u7ed5\u6548\u679c\u8868\u3000(TT)\n  \u3000\u62bd\u53d6\u7f20\u7ed5\u6548\u679c\u8868\u3002\n"),C.$register_prefix_from_super_class(),o(C,"$initialize",function $(y){var N=this;return $.$$p=null,B(N,P(N,"initialize",$,!1,!0),"initialize",[y],null),N.locale="zh_hans"})})}}]);